{"version":3,"file":"bundle.js","sources":["../../node_modules/three/three.js","../../node_modules/stats.js/build/stats.min.js","../../node_modules/rollup-plugin-node-builtins/src/es6/events.js","../../client/inputaction.js","../../client/inputmanager.js","../../client/clientgame.js","../../client/basescene.js","../../common/com.js","../../client/entitymanager.js","../../common/statics.js","../../client/map.js","../../client/entity.js","../../client/playerentity.js","../../node_modules/three-orbit-controls/index.js","../../client/action.js","../../client/teeoffaction.js","../../client/gameplayscene.js","../../node_modules/parseuri/index.js","../../node_modules/rollup-plugin-node-globals/src/global.js","../../node_modules/process-es6/browser.js","../../node_modules/ms/index.js","../../node_modules/socket.io-client/node_modules/debug/src/debug.js","../../node_modules/socket.io-client/node_modules/debug/src/browser.js","../../node_modules/socket.io-client/lib/url.js","../../node_modules/socket.io-parser/node_modules/debug/src/debug.js","../../node_modules/socket.io-parser/node_modules/debug/src/browser.js","../../node_modules/component-emitter/index.js","../../node_modules/isarray/index.js","../../node_modules/buffer-es6/base64.js","../../node_modules/buffer-es6/ieee754.js","../../node_modules/buffer-es6/isArray.js","../../node_modules/buffer-es6/index.js","../../node_modules/socket.io-parser/is-buffer.js","../../node_modules/socket.io-parser/binary.js","../../node_modules/socket.io-parser/index.js","../../node_modules/has-cors/index.js","../../node_modules/engine.io-client/lib/xmlhttprequest.js","../../node_modules/engine.io-parser/lib/keys.js","../../node_modules/has-binary2/index.js","../../node_modules/arraybuffer.slice/index.js","../../node_modules/after/index.js","../../node_modules/engine.io-parser/lib/utf8.js","../../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../../node_modules/blob/index.js","../../node_modules/engine.io-parser/lib/browser.js","../../node_modules/engine.io-client/lib/transport.js","../../node_modules/parseqs/index.js","../../node_modules/component-inherit/index.js","../../node_modules/yeast/index.js","../../node_modules/engine.io-client/node_modules/debug/src/debug.js","../../node_modules/engine.io-client/node_modules/debug/src/browser.js","../../node_modules/engine.io-client/lib/transports/polling.js","../../node_modules/engine.io-client/lib/transports/polling-xhr.js","../../node_modules/engine.io-client/lib/transports/polling-jsonp.js","../../node_modules/rollup-plugin-node-resolve/src/empty.js","../../node_modules/engine.io-client/lib/transports/websocket.js","../../node_modules/engine.io-client/lib/transports/index.js","../../node_modules/indexof/index.js","../../node_modules/engine.io-client/lib/socket.js","../../node_modules/engine.io-client/lib/index.js","../../node_modules/to-array/index.js","../../node_modules/socket.io-client/lib/on.js","../../node_modules/component-bind/index.js","../../node_modules/socket.io-client/lib/socket.js","../../node_modules/backo2/index.js","../../node_modules/socket.io-client/lib/manager.js","../../node_modules/socket.io-client/lib/index.js","../../node_modules/svelte/internal.mjs","../../client/views/test.svelte","../../main.js"],"sourcesContent":["var self = self || {};// File:src/Three.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nvar THREE = { REVISION: '77' };\r\n\r\n//\r\n\r\nif ( typeof define === 'function' && define.amd ) {\r\n\r\n\tdefine( 'three', THREE );\r\n\r\n} else if ( 'undefined' !== typeof exports && 'undefined' !== typeof module ) {\r\n\r\n\tmodule.exports = THREE;\r\n\r\n}\r\n\r\n// Polyfills\r\n\r\nif ( Number.EPSILON === undefined ) {\r\n\r\n\tNumber.EPSILON = Math.pow( 2, - 52 );\r\n\r\n}\r\n\r\n//\r\n\r\nif ( Math.sign === undefined ) {\r\n\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\n\r\n\tMath.sign = function ( x ) {\r\n\r\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\r\n\r\n\t};\r\n\r\n}\r\n\r\nif ( Function.prototype.name === undefined ) {\r\n\r\n\t// Missing in IE9-11.\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\r\n\r\n\tObject.defineProperty( Function.prototype, 'name', {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.toString().match( /^\\s*function\\s*(\\S*)\\s*\\(/ )[ 1 ];\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n}\r\n\r\nif ( Object.assign === undefined ) {\r\n\r\n\t// Missing in IE.\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n\r\n\t( function () {\r\n\r\n\t\tObject.assign = function ( target ) {\r\n\r\n\t\t\t'use strict';\r\n\r\n\t\t\tif ( target === undefined || target === null ) {\r\n\r\n\t\t\t\tthrow new TypeError( 'Cannot convert undefined or null to object' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar output = Object( target );\r\n\r\n\t\t\tfor ( var index = 1; index < arguments.length; index ++ ) {\r\n\r\n\t\t\t\tvar source = arguments[ index ];\r\n\r\n\t\t\t\tif ( source !== undefined && source !== null ) {\r\n\r\n\t\t\t\t\tfor ( var nextKey in source ) {\r\n\r\n\t\t\t\t\t\tif ( Object.prototype.hasOwnProperty.call( source, nextKey ) ) {\r\n\r\n\t\t\t\t\t\t\toutput[ nextKey ] = source[ nextKey ];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn output;\r\n\r\n\t\t};\r\n\r\n\t} )();\r\n\r\n}\r\n\r\n//\r\n\r\nObject.assign( THREE, {\r\n\r\n\t// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\r\n\r\n\tMOUSE: { LEFT: 0, MIDDLE: 1, RIGHT: 2 },\r\n\r\n\t// GL STATE CONSTANTS\r\n\r\n\tCullFaceNone: 0,\r\n\tCullFaceBack: 1,\r\n\tCullFaceFront: 2,\r\n\tCullFaceFrontBack: 3,\r\n\r\n\tFrontFaceDirectionCW: 0,\r\n\tFrontFaceDirectionCCW: 1,\r\n\r\n\t// SHADOWING TYPES\r\n\r\n\tBasicShadowMap: 0,\r\n\tPCFShadowMap: 1,\r\n\tPCFSoftShadowMap: 2,\r\n\r\n\t// MATERIAL CONSTANTS\r\n\r\n\t// side\r\n\r\n\tFrontSide: 0,\r\n\tBackSide: 1,\r\n\tDoubleSide: 2,\r\n\r\n\t// shading\r\n\r\n\tFlatShading: 1,\r\n\tSmoothShading: 2,\r\n\r\n\t// colors\r\n\r\n\tNoColors: 0,\r\n\tFaceColors: 1,\r\n\tVertexColors: 2,\r\n\r\n\t// blending modes\r\n\r\n\tNoBlending: 0,\r\n\tNormalBlending: 1,\r\n\tAdditiveBlending: 2,\r\n\tSubtractiveBlending: 3,\r\n\tMultiplyBlending: 4,\r\n\tCustomBlending: 5,\r\n\r\n\t// custom blending equations\r\n\t// (numbers start from 100 not to clash with other\r\n\t// mappings to OpenGL constants defined in Texture.js)\r\n\r\n\tAddEquation: 100,\r\n\tSubtractEquation: 101,\r\n\tReverseSubtractEquation: 102,\r\n\tMinEquation: 103,\r\n\tMaxEquation: 104,\r\n\r\n\t// custom blending destination factors\r\n\r\n\tZeroFactor: 200,\r\n\tOneFactor: 201,\r\n\tSrcColorFactor: 202,\r\n\tOneMinusSrcColorFactor: 203,\r\n\tSrcAlphaFactor: 204,\r\n\tOneMinusSrcAlphaFactor: 205,\r\n\tDstAlphaFactor: 206,\r\n\tOneMinusDstAlphaFactor: 207,\r\n\r\n\t// custom blending source factors\r\n\r\n\t//ZeroFactor: 200,\r\n\t//OneFactor: 201,\r\n\t//SrcAlphaFactor: 204,\r\n\t//OneMinusSrcAlphaFactor: 205,\r\n\t//DstAlphaFactor: 206,\r\n\t//OneMinusDstAlphaFactor: 207,\r\n\tDstColorFactor: 208,\r\n\tOneMinusDstColorFactor: 209,\r\n\tSrcAlphaSaturateFactor: 210,\r\n\r\n\t// depth modes\r\n\r\n\tNeverDepth: 0,\r\n\tAlwaysDepth: 1,\r\n\tLessDepth: 2,\r\n\tLessEqualDepth: 3,\r\n\tEqualDepth: 4,\r\n\tGreaterEqualDepth: 5,\r\n\tGreaterDepth: 6,\r\n\tNotEqualDepth: 7,\r\n\r\n\r\n\t// TEXTURE CONSTANTS\r\n\r\n\tMultiplyOperation: 0,\r\n\tMixOperation: 1,\r\n\tAddOperation: 2,\r\n\r\n\t// Tone Mapping modes\r\n\r\n\tNoToneMapping: 0, // do not do any tone mapping, not even exposure (required for special purpose passes.)\r\n\tLinearToneMapping: 1, // only apply exposure.\r\n\tReinhardToneMapping: 2,\r\n\tUncharted2ToneMapping: 3, // John Hable\r\n\tCineonToneMapping: 4, // optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\r\n\r\n\t// Mapping modes\r\n\r\n\tUVMapping: 300,\r\n\r\n\tCubeReflectionMapping: 301,\r\n\tCubeRefractionMapping: 302,\r\n\r\n\tEquirectangularReflectionMapping: 303,\r\n\tEquirectangularRefractionMapping: 304,\r\n\r\n\tSphericalReflectionMapping: 305,\r\n\tCubeUVReflectionMapping: 306,\r\n\tCubeUVRefractionMapping: 307,\r\n\r\n\t// Wrapping modes\r\n\r\n\tRepeatWrapping: 1000,\r\n\tClampToEdgeWrapping: 1001,\r\n\tMirroredRepeatWrapping: 1002,\r\n\r\n\t// Filters\r\n\r\n\tNearestFilter: 1003,\r\n\tNearestMipMapNearestFilter: 1004,\r\n\tNearestMipMapLinearFilter: 1005,\r\n\tLinearFilter: 1006,\r\n\tLinearMipMapNearestFilter: 1007,\r\n\tLinearMipMapLinearFilter: 1008,\r\n\r\n\t// Data types\r\n\r\n\tUnsignedByteType: 1009,\r\n\tByteType: 1010,\r\n\tShortType: 1011,\r\n\tUnsignedShortType: 1012,\r\n\tIntType: 1013,\r\n\tUnsignedIntType: 1014,\r\n\tFloatType: 1015,\r\n\tHalfFloatType: 1025,\r\n\r\n\t// Pixel types\r\n\r\n\t//UnsignedByteType: 1009,\r\n\tUnsignedShort4444Type: 1016,\r\n\tUnsignedShort5551Type: 1017,\r\n\tUnsignedShort565Type: 1018,\r\n\r\n\t// Pixel formats\r\n\r\n\tAlphaFormat: 1019,\r\n\tRGBFormat: 1020,\r\n\tRGBAFormat: 1021,\r\n\tLuminanceFormat: 1022,\r\n\tLuminanceAlphaFormat: 1023,\r\n\t// THREE.RGBEFormat handled as THREE.RGBAFormat in shaders\r\n\tRGBEFormat: THREE.RGBAFormat, //1024;\r\n\tDepthFormat: 1026,\r\n\r\n\t// DDS / ST3C Compressed texture formats\r\n\r\n\tRGB_S3TC_DXT1_Format: 2001,\r\n\tRGBA_S3TC_DXT1_Format: 2002,\r\n\tRGBA_S3TC_DXT3_Format: 2003,\r\n\tRGBA_S3TC_DXT5_Format: 2004,\r\n\r\n\t// PVRTC compressed texture formats\r\n\r\n\tRGB_PVRTC_4BPPV1_Format: 2100,\r\n\tRGB_PVRTC_2BPPV1_Format: 2101,\r\n\tRGBA_PVRTC_4BPPV1_Format: 2102,\r\n\tRGBA_PVRTC_2BPPV1_Format: 2103,\r\n\r\n\t// ETC compressed texture formats\r\n\r\n\tRGB_ETC1_Format: 2151,\r\n\r\n\t// Loop styles for AnimationAction\r\n\r\n\tLoopOnce: 2200,\r\n\tLoopRepeat: 2201,\r\n\tLoopPingPong: 2202,\r\n\r\n\t// Interpolation\r\n\r\n\tInterpolateDiscrete: 2300,\r\n\tInterpolateLinear: 2301,\r\n\tInterpolateSmooth: 2302,\r\n\r\n\t// Interpolant ending modes\r\n\r\n\tZeroCurvatureEnding: 2400,\r\n\tZeroSlopeEnding: 2401,\r\n\tWrapAroundEnding: 2402,\r\n\r\n\t// Triangle Draw modes\r\n\r\n\tTrianglesDrawMode: 0,\r\n\tTriangleStripDrawMode: 1,\r\n\tTriangleFanDrawMode: 2,\r\n\r\n\t// Texture Encodings\r\n\r\n\tLinearEncoding: 3000, // No encoding at all.\r\n\tsRGBEncoding: 3001,\r\n\tGammaEncoding: 3007, // uses GAMMA_FACTOR, for backwards compatibility with WebGLRenderer.gammaInput/gammaOutput\r\n\r\n\t// The following Texture Encodings are for RGB-only (no alpha) HDR light emission sources.\r\n\t// These encodings should not specified as output encodings except in rare situations.\r\n\tRGBEEncoding: 3002, // AKA Radiance.\r\n\tLogLuvEncoding: 3003,\r\n\tRGBM7Encoding: 3004,\r\n\tRGBM16Encoding: 3005,\r\n\tRGBDEncoding: 3006, // MaxRange is 256.\r\n\r\n\t// Depth packing strategies\r\n\r\n\tBasicDepthPacking: 3200, // for writing to float textures for high precision or for visualizing results in RGB buffers\r\n\tRGBADepthPacking: 3201 // for packing into RGBA buffers.\r\n\r\n} );\r\n\r\n// File:src/math/Color.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Color = function ( r, g, b ) {\r\n\r\n\tif ( g === undefined && b === undefined ) {\r\n\r\n\t\t// r is THREE.Color, hex or string\r\n\t\treturn this.set( r );\r\n\r\n\t}\r\n\r\n\treturn this.setRGB( r, g, b );\r\n\r\n};\r\n\r\nTHREE.Color.prototype = {\r\n\r\n\tconstructor: THREE.Color,\r\n\r\n\tr: 1, g: 1, b: 1,\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value instanceof THREE.Color ) {\r\n\r\n\t\t\tthis.copy( value );\r\n\r\n\t\t} else if ( typeof value === 'number' ) {\r\n\r\n\t\t\tthis.setHex( value );\r\n\r\n\t\t} else if ( typeof value === 'string' ) {\r\n\r\n\t\t\tthis.setStyle( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.r = scalar;\r\n\t\tthis.g = scalar;\r\n\t\tthis.b = scalar;\r\n\r\n\t},\r\n\r\n\tsetHex: function ( hex ) {\r\n\r\n\t\thex = Math.floor( hex );\r\n\r\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\r\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\r\n\t\tthis.b = ( hex & 255 ) / 255;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRGB: function ( r, g, b ) {\r\n\r\n\t\tthis.r = r;\r\n\t\tthis.g = g;\r\n\t\tthis.b = b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHSL: function () {\r\n\r\n\t\tfunction hue2rgb( p, q, t ) {\r\n\r\n\t\t\tif ( t < 0 ) t += 1;\r\n\t\t\tif ( t > 1 ) t -= 1;\r\n\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n\t\t\tif ( t < 1 / 2 ) return q;\r\n\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n\t\t\treturn p;\r\n\r\n\t\t}\r\n\r\n\t\treturn function ( h, s, l ) {\r\n\r\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\t\t\th = THREE.Math.euclideanModulo( h, 1 );\r\n\t\t\ts = THREE.Math.clamp( s, 0, 1 );\r\n\t\t\tl = THREE.Math.clamp( l, 0, 1 );\r\n\r\n\t\t\tif ( s === 0 ) {\r\n\r\n\t\t\t\tthis.r = this.g = this.b = l;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n\t\t\t\tvar q = ( 2 * l ) - p;\r\n\r\n\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\r\n\t\t\t\tthis.g = hue2rgb( q, p, h );\r\n\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetStyle: function ( style ) {\r\n\r\n\t\tfunction handleAlpha( string ) {\r\n\r\n\t\t\tif ( string === undefined ) return;\r\n\r\n\t\t\tif ( parseFloat( string ) < 1 ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar m;\r\n\r\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\r\n\r\n\t\t\t// rgb / hsl\r\n\r\n\t\t\tvar color;\r\n\t\t\tvar name = m[ 1 ];\r\n\t\t\tvar components = m[ 2 ];\r\n\r\n\t\t\tswitch ( name ) {\r\n\r\n\t\t\t\tcase 'rgb':\r\n\t\t\t\tcase 'rgba':\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'hsl':\r\n\t\t\t\tcase 'hsla':\r\n\r\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\r\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\r\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\r\n\r\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\r\n\r\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\r\n\r\n\t\t\t// hex color\r\n\r\n\t\t\tvar hex = m[ 1 ];\r\n\t\t\tvar size = hex.length;\r\n\r\n\t\t\tif ( size === 3 ) {\r\n\r\n\t\t\t\t// #ff0\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t} else if ( size === 6 ) {\r\n\r\n\t\t\t\t// #ff0000\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( style && style.length > 0 ) {\r\n\r\n\t\t\t// color keywords\r\n\t\t\tvar hex = THREE.ColorKeywords[ style ];\r\n\r\n\t\t\tif ( hex !== undefined ) {\r\n\r\n\t\t\t\t// red\r\n\t\t\t\tthis.setHex( hex );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// unknown color\r\n\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.r, this.g, this.b );\r\n\r\n\t},\r\n\r\n\tcopy: function ( color ) {\r\n\r\n\t\tthis.r = color.r;\r\n\t\tthis.g = color.g;\r\n\t\tthis.b = color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, gammaFactor );\r\n\t\tthis.g = Math.pow( color.g, gammaFactor );\r\n\t\tthis.b = Math.pow( color.b, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, safeInverse );\r\n\t\tthis.g = Math.pow( color.g, safeInverse );\r\n\t\tthis.b = Math.pow( color.b, safeInverse );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertGammaToLinear: function () {\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tthis.r = r * r;\r\n\t\tthis.g = g * g;\r\n\t\tthis.b = b * b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertLinearToGamma: function () {\r\n\r\n\t\tthis.r = Math.sqrt( this.r );\r\n\t\tthis.g = Math.sqrt( this.g );\r\n\t\tthis.b = Math.sqrt( this.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetHex: function () {\r\n\r\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\r\n\t},\r\n\r\n\tgetHexString: function () {\r\n\r\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\r\n\t},\r\n\r\n\tgetHSL: function ( optionalTarget ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\r\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tvar max = Math.max( r, g, b );\r\n\t\tvar min = Math.min( r, g, b );\r\n\r\n\t\tvar hue, saturation;\r\n\t\tvar lightness = ( min + max ) / 2.0;\r\n\r\n\t\tif ( min === max ) {\r\n\r\n\t\t\thue = 0;\r\n\t\t\tsaturation = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar delta = max - min;\r\n\r\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\r\n\t\t\tswitch ( max ) {\r\n\r\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\r\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\thue /= 6;\r\n\r\n\t\t}\r\n\r\n\t\thsl.h = hue;\r\n\t\thsl.s = saturation;\r\n\t\thsl.l = lightness;\r\n\r\n\t\treturn hsl;\r\n\r\n\t},\r\n\r\n\tgetStyle: function () {\r\n\r\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\r\n\t},\r\n\r\n\toffsetHSL: function ( h, s, l ) {\r\n\r\n\t\tvar hsl = this.getHSL();\r\n\r\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\r\n\r\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( color ) {\r\n\r\n\t\tthis.r += color.r;\r\n\t\tthis.g += color.g;\r\n\t\tthis.b += color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddColors: function ( color1, color2 ) {\r\n\r\n\t\tthis.r = color1.r + color2.r;\r\n\t\tthis.g = color1.g + color2.g;\r\n\t\tthis.b = color1.b + color2.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.r += s;\r\n\t\tthis.g += s;\r\n\t\tthis.b += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( color ) {\r\n\r\n\t\tthis.r *= color.r;\r\n\t\tthis.g *= color.g;\r\n\t\tthis.b *= color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.r *= s;\r\n\t\tthis.g *= s;\r\n\t\tthis.b *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( color, alpha ) {\r\n\r\n\t\tthis.r += ( color.r - this.r ) * alpha;\r\n\t\tthis.g += ( color.g - this.g ) * alpha;\r\n\t\tthis.b += ( color.b - this.b ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( c ) {\r\n\r\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.r = array[ offset ];\r\n\t\tthis.g = array[ offset + 1 ];\r\n\t\tthis.b = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.r;\r\n\t\tarray[ offset + 1 ] = this.g;\r\n\t\tarray[ offset + 2 ] = this.b;\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\r\n// File:src/math/Quaternion.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Quaternion = function ( x, y, z, w ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Quaternion.prototype = {\r\n\r\n\tconstructor: THREE.Quaternion,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget w () {\r\n\r\n\t\treturn this._w;\r\n\r\n\t},\r\n\r\n\tset w ( value ) {\r\n\r\n\t\tthis._w = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._w = w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( quaternion ) {\r\n\r\n\t\tthis._x = quaternion.x;\r\n\t\tthis._y = quaternion.y;\r\n\t\tthis._z = quaternion.z;\r\n\t\tthis._w = quaternion.w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromEuler: function ( euler, update ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\r\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n\t\t//\tcontent/SpinCalc.m\r\n\r\n\t\tvar c1 = Math.cos( euler._x / 2 );\r\n\t\tvar c2 = Math.cos( euler._y / 2 );\r\n\t\tvar c3 = Math.cos( euler._z / 2 );\r\n\t\tvar s1 = Math.sin( euler._x / 2 );\r\n\t\tvar s2 = Math.sin( euler._y / 2 );\r\n\t\tvar s3 = Math.sin( euler._z / 2 );\r\n\r\n\t\tvar order = euler.order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t}\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\r\n\t\tthis._x = axis.x * s;\r\n\t\tthis._y = axis.y * s;\r\n\t\tthis._z = axis.z * s;\r\n\t\tthis._w = Math.cos( halfAngle );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n\t\t\ttrace = m11 + m22 + m33,\r\n\t\t\ts;\r\n\r\n\t\tif ( trace > 0 ) {\r\n\r\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n\t\t\tthis._w = 0.25 / s;\r\n\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\r\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\tthis._x = 0.25 * s;\r\n\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\r\n\t\t} else if ( m22 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\tthis._y = 0.25 * s;\r\n\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\tthis._z = 0.25 * s;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromUnitVectors: function () {\r\n\r\n\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\r\n\r\n\t\t// assumes direction vectors vFrom and vTo are normalized\r\n\r\n\t\tvar v1, r;\r\n\r\n\t\tvar EPS = 0.000001;\r\n\r\n\t\treturn function ( vFrom, vTo ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tr = vFrom.dot( vTo ) + 1;\r\n\r\n\t\t\tif ( r < EPS ) {\r\n\r\n\t\t\t\tr = 0;\r\n\r\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\r\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv1.crossVectors( vFrom, vTo );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = v1.x;\r\n\t\t\tthis._y = v1.y;\r\n\t\t\tthis._z = v1.z;\r\n\t\t\tthis._w = r;\r\n\r\n\t\t\treturn this.normalize();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tinverse: function () {\r\n\r\n\t\treturn this.conjugate().normalize();\r\n\r\n\t},\r\n\r\n\tconjugate: function () {\r\n\r\n\t\tthis._x *= - 1;\r\n\t\tthis._y *= - 1;\r\n\t\tthis._z *= - 1;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tvar l = this.length();\r\n\r\n\t\tif ( l === 0 ) {\r\n\r\n\t\t\tthis._x = 0;\r\n\t\t\tthis._y = 0;\r\n\t\t\tthis._z = 0;\r\n\t\t\tthis._w = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tl = 1 / l;\r\n\r\n\t\t\tthis._x = this._x * l;\r\n\t\t\tthis._y = this._y * l;\r\n\t\t\tthis._z = this._z * l;\r\n\t\t\tthis._w = this._w * l;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( q, p ) {\r\n\r\n\t\tif ( p !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n\t\t\treturn this.multiplyQuaternions( q, p );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyQuaternions( this, q );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( q ) {\r\n\r\n\t\treturn this.multiplyQuaternions( q, this );\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternions: function ( a, b ) {\r\n\r\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\r\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\r\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tslerp: function ( qb, t ) {\r\n\r\n\t\tif ( t === 0 ) return this;\r\n\t\tif ( t === 1 ) return this.copy( qb );\r\n\r\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\r\n\r\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\r\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\r\n\t\tif ( cosHalfTheta < 0 ) {\r\n\r\n\t\t\tthis._w = - qb._w;\r\n\t\t\tthis._x = - qb._x;\r\n\t\t\tthis._y = - qb._y;\r\n\t\t\tthis._z = - qb._z;\r\n\r\n\t\t\tcosHalfTheta = - cosHalfTheta;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.copy( qb );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cosHalfTheta >= 1.0 ) {\r\n\r\n\t\t\tthis._w = w;\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\r\n\r\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\r\n\r\n\t\t\tthis._w = 0.5 * ( w + this._w );\r\n\t\t\tthis._x = 0.5 * ( x + this._x );\r\n\t\t\tthis._y = 0.5 * ( y + this._y );\r\n\t\t\tthis._z = 0.5 * ( z + this._z );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\r\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\r\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\r\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\r\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\r\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( quaternion ) {\r\n\r\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis._x = array[ offset ];\r\n\t\tthis._y = array[ offset + 1 ];\r\n\t\tthis._z = array[ offset + 2 ];\r\n\t\tthis._w = array[ offset + 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {}\r\n\r\n};\r\n\r\nObject.assign( THREE.Quaternion, {\r\n\r\n\tslerp: function( qa, qb, qm, t ) {\r\n\r\n\t\treturn qm.copy( qa ).slerp( qb, t );\r\n\r\n\t},\r\n\r\n\tslerpFlat: function(\r\n\t\t\tdst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\r\n\r\n\t\t// fuzz-free, array-based Quaternion SLERP operation\r\n\r\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\r\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\r\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\r\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\r\n\r\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\r\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\r\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\r\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\r\n\r\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\r\n\r\n\t\t\tvar s = 1 - t,\r\n\r\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\r\n\r\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\r\n\t\t\t\tsqrSin = 1 - cos * cos;\r\n\r\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\r\n\t\t\tif ( sqrSin > Number.EPSILON ) {\r\n\r\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\r\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\r\n\r\n\t\t\t\ts = Math.sin( s * len ) / sin;\r\n\t\t\t\tt = Math.sin( t * len ) / sin;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar tDir = t * dir;\r\n\r\n\t\t\tx0 = x0 * s + x1 * tDir;\r\n\t\t\ty0 = y0 * s + y1 * tDir;\r\n\t\t\tz0 = z0 * s + z1 * tDir;\r\n\t\t\tw0 = w0 * s + w1 * tDir;\r\n\r\n\t\t\t// Normalize in case we just did a lerp:\r\n\t\t\tif ( s === 1 - t ) {\r\n\r\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\r\n\r\n\t\t\t\tx0 *= f;\r\n\t\t\t\ty0 *= f;\r\n\t\t\t\tz0 *= f;\r\n\t\t\t\tw0 *= f;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdst[ dstOffset ] = x0;\r\n\t\tdst[ dstOffset + 1 ] = y0;\r\n\t\tdst[ dstOffset + 2 ] = z0;\r\n\t\tdst[ dstOffset + 3 ] = w0;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/Vector2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author egraether / http://egraether.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.Vector2 = function ( x, y ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\r\n};\r\n\r\nTHREE.Vector2.prototype = {\r\n\r\n\tconstructor: THREE.Vector2,\r\n\r\n\tget width() {\r\n\r\n\t\treturn this.x;\r\n\r\n\t},\r\n\r\n\tset width( value ) {\r\n\r\n\t\tthis.x = value;\r\n\r\n\t},\r\n\r\n\tget height() {\r\n\r\n\t\treturn this.y;\r\n\r\n\t},\r\n\r\n\tset height( value ) {\r\n\r\n\t\tthis.y = value;\r\n\r\n\t},\r\n\r\n\t//\r\n\r\n\tset: function ( x, y ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v ) {\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tif ( isFinite( scalar ) ) {\r\n\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector2();\r\n\t\t\t\tmax = new THREE.Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tvar length = this.length();\r\n\r\n\t\treturn this.multiplyScalar( Math.max( min, Math.min( max, length ) ) / length );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function() {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tangle: function () {\r\n\r\n\t\t// computes the angle in radians with respect to the positive x-axis\r\n\r\n\t\tvar angle = Math.atan2( this.y, this.x );\r\n\r\n\t\tif ( angle < 0 ) angle += 2 * Math.PI;\r\n\r\n\t\treturn angle;\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\r\n\t\treturn dx * dx + dy * dy;\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.multiplyScalar( length / this.length() );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateAround: function ( center, angle ) {\r\n\r\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\r\n\r\n\t\tvar x = this.x - center.x;\r\n\t\tvar y = this.y - center.y;\r\n\r\n\t\tthis.x = x * c - y * s + center.x;\r\n\t\tthis.y = x * s + y * c + center.y;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author *kile / http://kile.stravaganza.org/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector3 = function ( x, y, z ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\r\n};\r\n\r\nTHREE.Vector3.prototype = {\r\n\r\n\tconstructor: THREE.Vector3,\r\n\r\n\tset: function ( x, y, z ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n\t\t\treturn this.multiplyVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\t\tthis.z *= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tif ( isFinite( scalar ) ) {\r\n\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\t\t\tthis.z *= scalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x * b.x;\r\n\t\tthis.y = a.y * b.y;\r\n\t\tthis.z = a.z * b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyEuler: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function applyEuler( euler ) {\r\n\r\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\treturn this.applyQuaternion( quaternion.setFromEuler( euler ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyAxisAngle: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function applyAxisAngle( axis, angle ) {\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\treturn this.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyProjection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 projection matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\tvar e = m.elements;\r\n\t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective divide\r\n\r\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\r\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\r\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\r\n\r\n\t\t// calculate quat * vector\r\n\r\n\t\tvar ix =  qw * x + qy * z - qz * y;\r\n\t\tvar iy =  qw * y + qz * x - qx * z;\r\n\t\tvar iz =  qw * z + qx * y - qy * x;\r\n\t\tvar iw = - qx * x - qy * y - qz * z;\r\n\r\n\t\t// calculate result * inverse quat\r\n\r\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function project( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tunproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function unproject( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\t\t// vector interpreted as a direction\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\r\n\t\treturn this.normalize();\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\t\tthis.z /= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector3();\r\n\t\t\t\tmax = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclampLength: function ( min, max ) {\r\n\r\n\t\tvar length = this.length();\r\n\r\n\t\treturn this.multiplyScalar( Math.max( min, Math.min( max, length ) ) / length );\r\n\r\n\t},\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.multiplyScalar( length / this.length() );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t},\r\n\r\n\tcross: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n\t\t\treturn this.crossVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tthis.x = y * v.z - z * v.y;\r\n\t\tthis.y = z * v.x - x * v.z;\r\n\t\tthis.z = x * v.y - y * v.x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossVectors: function ( a, b ) {\r\n\r\n\t\tvar ax = a.x, ay = a.y, az = a.z;\r\n\t\tvar bx = b.x, by = b.y, bz = b.z;\r\n\r\n\t\tthis.x = ay * bz - az * by;\r\n\t\tthis.y = az * bx - ax * bz;\r\n\t\tthis.z = ax * by - ay * bx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tprojectOnVector: function () {\r\n\r\n\t\tvar v1, dot;\r\n\r\n\t\treturn function projectOnVector( vector ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( vector ).normalize();\r\n\r\n\t\t\tdot = this.dot( v1 );\r\n\r\n\t\t\treturn this.copy( v1 ).multiplyScalar( dot );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tprojectOnPlane: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function projectOnPlane( planeNormal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\r\n\r\n\t\t\treturn this.sub( v1 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\treflect: function () {\r\n\r\n\t\t// reflect incident vector off plane orthogonal to normal\r\n\t\t// normal is assumed to have unit length\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function reflect( normal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tangleTo: function ( v ) {\r\n\r\n\t\tvar theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\r\n\r\n\t\t// clamp, to handle numerical problems\r\n\r\n\t\treturn Math.acos( THREE.Math.clamp( theta, - 1, 1 ) );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\r\n\r\n\t\treturn dx * dx + dy * dy + dz * dz;\r\n\r\n\t},\r\n\r\n\tsetFromSpherical: function( s ) {\r\n\r\n\t\tvar sinPhiRadius = Math.sin( s.phi ) * s.radius;\r\n\r\n\t\tthis.x = sinPhiRadius * Math.sin( s.theta );\r\n\t\tthis.y = Math.cos( s.phi ) * s.radius;\r\n\t\tthis.z = sinPhiRadius * Math.cos( s.theta );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixPosition: function ( m ) {\r\n\r\n\t\treturn this.setFromMatrixColumn( m, 3 );\r\n\r\n\t},\r\n\r\n\tsetFromMatrixScale: function ( m ) {\r\n\r\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\r\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\r\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\r\n\r\n\t\tthis.x = sx;\r\n\t\tthis.y = sy;\r\n\t\tthis.z = sz;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixColumn: function ( m, index ) {\r\n\r\n\t\tif ( typeof m === 'number' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).' );\r\n\t\t\tvar temp = m\r\n\t\t\tm = index;\r\n\t\t\tindex = temp;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.fromArray( m.elements, index * 4 );\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\tthis.z = attribute.array[ index + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector4.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector4 = function ( x, y, z, w ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\tthis.w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Vector4.prototype = {\r\n\r\n\tconstructor: THREE.Vector4,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetScalar: function ( scalar ) {\r\n\r\n\t\tthis.x = scalar;\r\n\t\tthis.y = scalar;\r\n\t\tthis.z = scalar;\r\n\t\tthis.w = scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( w ) {\r\n\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tcase 3: this.w = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tcase 3: return this.w;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\t\tthis.w += v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\t\tthis.w += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\t\tthis.w = a.w + b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\t\tthis.w += v.w * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\t\tthis.w -= v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\t\tthis.w -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\t\tthis.w = a.w - b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tif ( isFinite( scalar ) ) {\r\n\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\t\t\tthis.z *= scalar;\r\n\t\t\tthis.w *= scalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\t\t\tthis.w = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\treturn this.multiplyScalar( 1 / scalar );\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n\t\t// q is assumed to be normalized\r\n\r\n\t\tthis.w = 2 * Math.acos( q.w );\r\n\r\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n\t\tif ( s < 0.0001 ) {\r\n\r\n\t\t\t this.x = 1;\r\n\t\t\t this.y = 0;\r\n\t\t\t this.z = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t this.x = q.x / s;\r\n\t\t\t this.y = q.y / s;\r\n\t\t\t this.z = q.z / s;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar angle, x, y, z,\t\t// variables for result\r\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n\t\t\tte = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\r\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\r\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n\t\t\t// singularity found\r\n\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t// in leading diagonal and zero in other terms\r\n\r\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\r\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\r\n\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\r\n\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// otherwise this singularity is angle = 180\r\n\r\n\t\t\tangle = Math.PI;\r\n\r\n\t\t\tvar xx = ( m11 + 1 ) / 2;\r\n\t\t\tvar yy = ( m22 + 1 ) / 2;\r\n\t\t\tvar zz = ( m33 + 1 ) / 2;\r\n\t\t\tvar xy = ( m12 + m21 ) / 4;\r\n\t\t\tvar xz = ( m13 + m31 ) / 4;\r\n\t\t\tvar yz = ( m23 + m32 ) / 4;\r\n\r\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\r\n\r\n\t\t\t\t// m11 is the largest diagonal term\r\n\r\n\t\t\t\tif ( xx < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\tz = xz / x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( yy > zz ) {\r\n\r\n\t\t\t\t// m22 is the largest diagonal term\r\n\r\n\t\t\t\tif ( yy < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\tz = yz / y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// m33 is the largest diagonal term so base result on this\r\n\r\n\t\t\t\tif ( zz < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\ty = yz / z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.set( x, y, z, angle );\r\n\r\n\t\t\treturn this; // return 180 deg rotation\r\n\r\n\t\t}\r\n\r\n\t\t// as we have reached here there are no singularities so we can handle normally\r\n\r\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\r\n\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\r\n\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t// caught by singularity test above, but I've left it in just in case\r\n\r\n\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tthis.x = Math.min( this.x, v.x );\r\n\t\tthis.y = Math.min( this.y, v.y );\r\n\t\tthis.z = Math.min( this.z, v.z );\r\n\t\tthis.w = Math.min( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tthis.x = Math.max( this.x, v.x );\r\n\t\tthis.y = Math.max( this.y, v.y );\r\n\t\tthis.z = Math.max( this.z, v.z );\r\n\t\tthis.w = Math.max( this.w, v.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector4();\r\n\t\t\t\tmax = new THREE.Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\t\tthis.w = Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\t\tthis.w = Math.ceil( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\t\tthis.w = Math.round( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\t\tthis.w = - this.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( length ) {\r\n\r\n\t\treturn this.multiplyScalar( length / this.length() );\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\t\tthis.w = array[ offset + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\t\tarray[ offset + 3 ] = this.w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\tthis.z = attribute.array[ index + 2 ];\r\n\t\tthis.w = attribute.array[ index + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Euler.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Euler = function ( x, y, z, order ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._order = order || THREE.Euler.DefaultOrder;\r\n\r\n};\r\n\r\nTHREE.Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\nTHREE.Euler.DefaultOrder = 'XYZ';\r\n\r\nTHREE.Euler.prototype = {\r\n\r\n\tconstructor: THREE.Euler,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget order () {\r\n\r\n\t\treturn this._order;\r\n\r\n\t},\r\n\r\n\tset order ( value ) {\r\n\r\n\t\tthis._order = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, order ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._order = order || this._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\r\n\r\n\t},\r\n\r\n\tcopy: function ( euler ) {\r\n\r\n\t\tthis._x = euler._x;\r\n\t\tthis._y = euler._y;\r\n\t\tthis._z = euler._z;\r\n\t\tthis._order = euler._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\r\n\t\tvar clamp = THREE.Math.clamp;\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements;\r\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\torder = order || this._order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = 0;\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\r\n\r\n\t\t}\r\n\r\n\t\tthis._order = order;\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromQuaternion: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function ( q, order, update ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.makeRotationFromQuaternion( q );\r\n\r\n\t\t\treturn this.setFromRotationMatrix( matrix, order, update );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromVector3: function ( v, order ) {\r\n\r\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n\t},\r\n\r\n\treorder: function () {\r\n\r\n\t\t// WARNING: this discards revolution information -bhouston\r\n\r\n\t\tvar q = new THREE.Quaternion();\r\n\r\n\t\treturn function ( newOrder ) {\r\n\r\n\t\t\tq.setFromEuler( this );\r\n\t\t\t\r\n\t\t\treturn this.setFromQuaternion( q, newOrder );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tequals: function ( euler ) {\r\n\r\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis._x = array[ 0 ];\r\n\t\tthis._y = array[ 1 ];\r\n\t\tthis._z = array[ 2 ];\r\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._order;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\ttoVector3: function ( optionalResult ) {\r\n\r\n\t\tif ( optionalResult ) {\r\n\r\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn new THREE.Vector3( this._x, this._y, this._z );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {}\r\n\r\n};\r\n\r\n// File:src/math/Line3.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Line3 = function ( start, end ) {\r\n\r\n\tthis.start = ( start !== undefined ) ? start : new THREE.Vector3();\r\n\tthis.end = ( end !== undefined ) ? end : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Line3.prototype = {\r\n\r\n\tconstructor: THREE.Line3,\r\n\r\n\tset: function ( start, end ) {\r\n\r\n\t\tthis.start.copy( start );\r\n\t\tthis.end.copy( end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( line ) {\r\n\r\n\t\tthis.start.copy( line.start );\r\n\t\tthis.end.copy( line.end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tdelta: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.end, this.start );\r\n\r\n\t},\r\n\r\n\tdistanceSq: function () {\r\n\r\n\t\treturn this.start.distanceToSquared( this.end );\r\n\r\n\t},\r\n\r\n\tdistance: function () {\r\n\r\n\t\treturn this.start.distanceTo( this.end );\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tclosestPointToPointParameter: function () {\r\n\r\n\t\tvar startP = new THREE.Vector3();\r\n\t\tvar startEnd = new THREE.Vector3();\r\n\r\n\t\treturn function ( point, clampToLine ) {\r\n\r\n\t\t\tstartP.subVectors( point, this.start );\r\n\t\t\tstartEnd.subVectors( this.end, this.start );\r\n\r\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\r\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\r\n\r\n\t\t\tvar t = startEnd_startP / startEnd2;\r\n\r\n\t\t\tif ( clampToLine ) {\r\n\r\n\t\t\t\tt = THREE.Math.clamp( t, 0, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\r\n\r\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.start.applyMatrix4( matrix );\r\n\t\tthis.end.applyMatrix4( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( line ) {\r\n\r\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box2.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Box2 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector2( + Infinity, + Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector2( - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box2.prototype = {\r\n\r\n\tconstructor: THREE.Box2,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = + Infinity;\r\n\t\tthis.max.x = this.max.y = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t     point.y < this.min.y || point.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t     ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box3.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Box3 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector3( + Infinity, + Infinity, + Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector3( - Infinity, - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box3.prototype = {\r\n\r\n\tconstructor: THREE.Box3,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromArray: function ( array ) {\r\n\r\n\t\tvar minX = + Infinity;\r\n\t\tvar minY = + Infinity;\r\n\t\tvar minZ = + Infinity;\r\n\r\n\t\tvar maxX = - Infinity;\r\n\t\tvar maxY = - Infinity;\r\n\t\tvar maxZ = - Infinity;\r\n\r\n\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n\t\t\tvar x = array[ i ];\r\n\t\t\tvar y = array[ i + 1 ];\r\n\t\t\tvar z = array[ i + 2 ];\r\n\r\n\t\t\tif ( x < minX ) minX = x;\r\n\t\t\tif ( y < minY ) minY = y;\r\n\t\t\tif ( z < minZ ) minZ = z;\r\n\r\n\t\t\tif ( x > maxX ) maxX = x;\r\n\t\t\tif ( y > maxY ) maxY = y;\r\n\t\t\tif ( z > maxZ ) maxZ = z;\r\n\r\n\t\t}\r\n\r\n\t\tthis.min.set( minX, minY, minZ );\r\n\t\tthis.max.set( maxX, maxY, maxZ );\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromObject: function () {\r\n\r\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\r\n\t\t// accounting for both the object's, and children's, world transforms\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tvar scope = this;\r\n\r\n\t\t\tobject.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.makeEmpty();\r\n\r\n\t\t\tobject.traverse( function ( node ) {\r\n\r\n\t\t\t\tvar geometry = node.geometry;\r\n\r\n\t\t\t\tif ( geometry !== undefined ) {\r\n\r\n\t\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\t\t\tvar vertices = geometry.vertices;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\r\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\r\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( geometry instanceof THREE.BufferGeometry && geometry.attributes[ 'position' ] !== undefined ) {\r\n\r\n\t\t\t\t\t\tvar positions = geometry.attributes[ 'position' ].array;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\tv1.fromArray( positions, i );\r\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\r\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\r\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tisEmpty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t\t\t point.y < this.min.y || point.y > this.max.y ||\r\n\t\t\t\t point.z < this.min.z || point.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t\t ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) &&\r\n\t\t\t ( this.min.z <= box.min.z ) && ( box.max.z <= this.max.z ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t\t\t box.max.y < this.min.y || box.min.y > this.max.y ||\r\n\t\t\t\t box.max.z < this.min.z || box.min.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsSphere: ( function () {\r\n\r\n\t\tvar closestPoint;\r\n\r\n\t\treturn function intersectsSphere( sphere ) {\r\n\r\n\t\t\tif ( closestPoint === undefined ) closestPoint = new THREE.Vector3();\r\n\r\n\t\t\t// Find the point on the AABB closest to the sphere center.\r\n\t\t\tthis.clampPoint( sphere.center, closestPoint );\r\n\r\n\t\t\t// If that point is inside the sphere, the AABB and sphere intersect.\r\n\t\t\treturn closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// We compute the minimum and maximum dot product values. If those values\r\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\r\n\r\n\t\tvar min, max;\r\n\r\n\t\tif ( plane.normal.x > 0 ) {\r\n\r\n\t\t\tmin = plane.normal.x * this.min.x;\r\n\t\t\tmax = plane.normal.x * this.max.x;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin = plane.normal.x * this.max.x;\r\n\t\t\tmax = plane.normal.x * this.min.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( plane.normal.y > 0 ) {\r\n\r\n\t\t\tmin += plane.normal.y * this.min.y;\r\n\t\t\tmax += plane.normal.y * this.max.y;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin += plane.normal.y * this.max.y;\r\n\t\t\tmax += plane.normal.y * this.min.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( plane.normal.z > 0 ) {\r\n\r\n\t\t\tmin += plane.normal.z * this.min.z;\r\n\t\t\tmax += plane.normal.z * this.max.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tmin += plane.normal.z * this.max.z;\r\n\t\t\tmax += plane.normal.z * this.min.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn ( min <= plane.constant && max >= plane.constant );\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetBoundingSphere: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Sphere();\r\n\r\n\t\t\tresult.center = this.center();\r\n\t\t\tresult.radius = this.size( v1 ).length() * 0.5;\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\r\n\t\tif( this.isEmpty() ) this.makeEmpty();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar points = [\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3()\r\n\t\t];\r\n\r\n\t\treturn function ( matrix ) {\r\n\r\n\t\t\t// transform of empty box is an empty box.\r\n\t\t\tif( this.isEmpty() ) return this;\r\n\r\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\r\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\r\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\r\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\r\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\r\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\r\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\r\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\r\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );\t// 111\r\n\r\n\t\t\tthis.setFromPoints( points );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix3.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://clara.io\r\n * @author tschw\r\n */\r\n\r\nTHREE.Matrix3 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0,\r\n\t\t0, 1, 0,\r\n\t\t0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix3.prototype = {\r\n\r\n\tconstructor: THREE.Matrix3,\r\n\r\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\r\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\r\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0,\r\n\t\t\t0, 1, 0,\r\n\t\t\t0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tvar me = m.elements;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\r\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\r\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrix4: function( m ) {\r\n\r\n\t\tvar me = m.elements;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tme[ 0 ], me[ 4 ], me[  8 ],\r\n\t\t\tme[ 1 ], me[ 5 ], me[  9 ],\r\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\tv1.applyMatrix3( this );\r\n\t\t\t\tv1.toArray( array, j );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyToBuffer: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\tv1.z = buffer.getZ( j );\r\n\r\n\t\t\t\tv1.applyMatrix3( this );\r\n\r\n\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn buffer;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\r\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\r\n\r\n\t\tif ( matrix instanceof THREE.Matrix4 ) {\r\n\r\n\t\t\tconsole.error( \"THREE.Matrix3.getInverse no longer takes a Matrix4 argument.\" );\r\n\r\n\t\t}\r\n\r\n\t\tvar me = matrix.elements,\r\n\t\t\tte = this.elements,\r\n\r\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\r\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\r\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\r\n\r\n\t\t\tt11 = n33 * n22 - n32 * n23,\r\n\t\t\tt12 = n32 * n13 - n33 * n12,\r\n\t\t\tt13 = n23 * n12 - n22 * n13,\r\n\r\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnDegenerate || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this.identity();\r\n\t\t}\r\n\t\t\r\n\t\tvar detInv = 1 / det;\r\n\r\n\t\tte[ 0 ] = t11 * detInv;\r\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\r\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\r\n\r\n\t\tte[ 3 ] = t12 * detInv;\r\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\r\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\r\n\r\n\t\tte[ 6 ] = t13 * detInv;\r\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\r\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar tmp, m = this.elements;\r\n\r\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset is deprecated \" +\r\n\t\t\t\t\"- just use .toArray instead.\" );\r\n\r\n\t\treturn this.toArray( array, offset );\r\n\r\n\t},\r\n\r\n\tgetNormalMatrix: function ( matrix4 ) {\r\n\r\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\r\n\r\n\t},\r\n\r\n\ttransposeIntoArray: function ( r ) {\r\n\r\n\t\tvar m = this.elements;\r\n\r\n\t\tr[ 0 ] = m[ 0 ];\r\n\t\tr[ 1 ] = m[ 3 ];\r\n\t\tr[ 2 ] = m[ 6 ];\r\n\t\tr[ 3 ] = m[ 1 ];\r\n\t\tr[ 4 ] = m[ 4 ];\r\n\t\tr[ 5 ] = m[ 7 ];\r\n\t\tr[ 6 ] = m[ 2 ];\r\n\t\tr[ 7 ] = m[ 5 ];\r\n\t\tr[ 8 ] = m[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix4.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author jordi_ros / http://plattsoft.com\r\n * @author D1plo1d / http://github.com/D1plo1d\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author timknip / http://www.floorplanner.com/\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Matrix4 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0, 0,\r\n\t\t0, 1, 0, 0,\r\n\t\t0, 0, 1, 0,\r\n\t\t0, 0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix4.prototype = {\r\n\r\n\tconstructor: THREE.Matrix4,\r\n\r\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, 1, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Matrix4().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tthis.elements.set( m.elements );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyPosition: function ( m ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = m.elements;\r\n\r\n\t\tte[ 12 ] = me[ 12 ];\r\n\t\tte[ 13 ] = me[ 13 ];\r\n\t\tte[ 14 ] = me[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\txAxis.setFromMatrixColumn( this, 0 );\r\n\t\tyAxis.setFromMatrixColumn( this, 1 );\r\n\t\tzAxis.setFromMatrixColumn( this, 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\tthis.set(\r\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\r\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\r\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\r\n\t\t\t0,       0,       0,       1\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractRotation: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( m ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = m.elements;\r\n\r\n\t\t\tvar scaleX = 1 / v1.setFromMatrixColumn( m, 0 ).length();\r\n\t\t\tvar scaleY = 1 / v1.setFromMatrixColumn( m, 1 ).length();\r\n\t\t\tvar scaleZ = 1 / v1.setFromMatrixColumn( m, 2 ).length();\r\n\r\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\r\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\r\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\r\n\r\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\r\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\r\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\r\n\r\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\r\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\r\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeRotationFromEuler: function ( euler ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\r\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\r\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\r\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\r\n\r\n\t\tif ( euler.order === 'XYZ' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - c * f;\r\n\t\t\tte[ 8 ] = d;\r\n\r\n\t\t\tte[ 1 ] = af + be * d;\r\n\t\t\tte[ 5 ] = ae - bf * d;\r\n\t\t\tte[ 9 ] = - b * c;\r\n\r\n\t\t\tte[ 2 ] = bf - ae * d;\r\n\t\t\tte[ 6 ] = be + af * d;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YXZ' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce + df * b;\r\n\t\t\tte[ 4 ] = de * b - cf;\r\n\t\t\tte[ 8 ] = a * d;\r\n\r\n\t\t\tte[ 1 ] = a * f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b;\r\n\r\n\t\t\tte[ 2 ] = cf * b - de;\r\n\t\t\tte[ 6 ] = df + ce * b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZXY' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce - df * b;\r\n\t\t\tte[ 4 ] = - a * f;\r\n\t\t\tte[ 8 ] = de + cf * b;\r\n\r\n\t\t\tte[ 1 ] = cf + de * b;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = df - ce * b;\r\n\r\n\t\t\tte[ 2 ] = - a * d;\r\n\t\t\tte[ 6 ] = b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZYX' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = be * d - af;\r\n\t\t\tte[ 8 ] = ae * d + bf;\r\n\r\n\t\t\tte[ 1 ] = c * f;\r\n\t\t\tte[ 5 ] = bf * d + ae;\r\n\t\t\tte[ 9 ] = af * d - be;\r\n\r\n\t\t\tte[ 2 ] = - d;\r\n\t\t\tte[ 6 ] = b * c;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YZX' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = bd - ac * f;\r\n\t\t\tte[ 8 ] = bc * f + ad;\r\n\r\n\t\t\tte[ 1 ] = f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b * e;\r\n\r\n\t\t\tte[ 2 ] = - d * e;\r\n\t\t\tte[ 6 ] = ad * f + bc;\r\n\t\t\tte[ 10 ] = ac - bd * f;\r\n\r\n\t\t} else if ( euler.order === 'XZY' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - f;\r\n\t\t\tte[ 8 ] = d * e;\r\n\r\n\t\t\tte[ 1 ] = ac * f + bd;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = ad * f - bc;\r\n\r\n\t\t\tte[ 2 ] = bc * f - ad;\r\n\t\t\tte[ 6 ] = b * e;\r\n\t\t\tte[ 10 ] = bd * f + ac;\r\n\r\n\t\t}\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\r\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\r\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n\t\tte[ 0 ] = 1 - ( yy + zz );\r\n\t\tte[ 4 ] = xy - wz;\r\n\t\tte[ 8 ] = xz + wy;\r\n\r\n\t\tte[ 1 ] = xy + wz;\r\n\t\tte[ 5 ] = 1 - ( xx + zz );\r\n\t\tte[ 9 ] = yz - wx;\r\n\r\n\t\tte[ 2 ] = xz - wy;\r\n\t\tte[ 6 ] = yz + wx;\r\n\t\tte[ 10 ] = 1 - ( xx + yy );\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar x, y, z;\r\n\r\n\t\treturn function ( eye, target, up ) {\r\n\r\n\t\t\tif ( x === undefined ) {\r\n\r\n\t\t\t\tx = new THREE.Vector3();\r\n\t\t\t\ty = new THREE.Vector3();\r\n\t\t\t\tz = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tz.subVectors( eye, target ).normalize();\r\n\r\n\t\t\tif ( z.lengthSq() === 0 ) {\r\n\r\n\t\t\t\tz.z = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\tif ( x.lengthSq() === 0 ) {\r\n\r\n\t\t\t\tz.z += 0.0001;\r\n\t\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\ty.crossVectors( z, x );\r\n\r\n\r\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\r\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\r\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiply: function ( m, n ) {\r\n\r\n\t\tif ( n !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n\t\t\treturn this.multiplyMatrices( m, n );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tpremultiply: function ( m ) {\r\n\r\n\t\treturn this.multiplyMatrices( m, this );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tvar ae = a.elements;\r\n\t\tvar be = b.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\r\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyToArray: function ( a, b, r ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tthis.multiplyMatrices( a, b );\r\n\r\n\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\r\n\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\r\n\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\r\n\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\t\t\t\tv1.toArray( array, j );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyToBuffer: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\tv1.z = buffer.getZ( j );\r\n\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\r\n\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn buffer;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\r\n\t\t//TODO: make this more efficient\r\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\r\n\t\treturn (\r\n\t\t\tn41 * (\r\n\t\t\t\t+ n14 * n23 * n32\r\n\t\t\t\t - n13 * n24 * n32\r\n\t\t\t\t - n14 * n22 * n33\r\n\t\t\t\t + n12 * n24 * n33\r\n\t\t\t\t + n13 * n22 * n34\r\n\t\t\t\t - n12 * n23 * n34\r\n\t\t\t) +\r\n\t\t\tn42 * (\r\n\t\t\t\t+ n11 * n23 * n34\r\n\t\t\t\t - n11 * n24 * n33\r\n\t\t\t\t + n14 * n21 * n33\r\n\t\t\t\t - n13 * n21 * n34\r\n\t\t\t\t + n13 * n24 * n31\r\n\t\t\t\t - n14 * n23 * n31\r\n\t\t\t) +\r\n\t\t\tn43 * (\r\n\t\t\t\t+ n11 * n24 * n32\r\n\t\t\t\t - n11 * n22 * n34\r\n\t\t\t\t - n14 * n21 * n32\r\n\t\t\t\t + n12 * n21 * n34\r\n\t\t\t\t + n14 * n22 * n31\r\n\t\t\t\t - n12 * n24 * n31\r\n\t\t\t) +\r\n\t\t\tn44 * (\r\n\t\t\t\t- n13 * n22 * n31\r\n\t\t\t\t - n11 * n23 * n32\r\n\t\t\t\t + n11 * n22 * n33\r\n\t\t\t\t + n13 * n21 * n32\r\n\t\t\t\t - n12 * n21 * n33\r\n\t\t\t\t + n12 * n23 * n31\r\n\t\t\t)\r\n\r\n\t\t);\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar tmp;\r\n\r\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\r\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset is deprecated \" +\r\n\t\t\t\t\"- just use .toArray instead.\" );\r\n\r\n\t\treturn this.toArray( array, offset );\r\n\r\n\t},\r\n\r\n\tgetPosition: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n\r\n\t\t\treturn v1.setFromMatrixColumn( this, 3 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetPosition: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 12 ] = v.x;\r\n\t\tte[ 13 ] = v.y;\r\n\t\tte[ 14 ] = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( m, throwOnDegenerate ) {\r\n\r\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n\t\tvar te = this.elements,\r\n\t\t\tme = m.elements,\r\n\r\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\r\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\r\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\r\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\r\n\r\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\r\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\r\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\r\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\r\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnDegenerate || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this.identity();\r\n\r\n\t\t}\r\n\t\t\r\n\t\tvar detInv = 1 / det;\r\n\r\n\t\tte[ 0 ] = t11 * detInv;\r\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\r\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\r\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\r\n\r\n\t\tte[ 4 ] = t12 * detInv;\r\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\r\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\r\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\r\n\r\n\t\tte[ 8 ] = t13 * detInv;\r\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\r\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\r\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\r\n\r\n\t\tte[ 12 ] = t14 * detInv;\r\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\r\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\r\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tscale: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = v.x, y = v.y, z = v.z;\r\n\r\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMaxScaleOnAxis: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\r\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\r\n\r\n\t},\r\n\r\n\tmakeTranslation: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, x,\r\n\t\t\t0, 1, 0, y,\r\n\t\t\t0, 0, 1, z,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationX: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0,  0, 0,\r\n\t\t\t0, c, - s, 0,\r\n\t\t\t0, s,  c, 0,\r\n\t\t\t0, 0,  0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationY: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t c, 0, s, 0,\r\n\t\t\t 0, 1, 0, 0,\r\n\t\t\t- s, 0, c, 0,\r\n\t\t\t 0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationZ: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tc, - s, 0, 0,\r\n\t\t\ts,  c, 0, 0,\r\n\t\t\t0,  0, 1, 0,\r\n\t\t\t0,  0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationAxis: function ( axis, angle ) {\r\n\r\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\r\n\t\tvar c = Math.cos( angle );\r\n\t\tvar s = Math.sin( angle );\r\n\t\tvar t = 1 - c;\r\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\r\n\t\tvar tx = t * x, ty = t * y;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\t return this;\r\n\r\n\t},\r\n\r\n\tmakeScale: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tx, 0, 0, 0,\r\n\t\t\t0, y, 0, 0,\r\n\t\t\t0, 0, z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tthis.makeRotationFromQuaternion( quaternion );\r\n\t\tthis.scale( scale );\r\n\t\tthis.setPosition( position );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdecompose: function () {\r\n\r\n\t\tvar vector, matrix;\r\n\r\n\t\treturn function ( position, quaternion, scale ) {\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tvector = new THREE.Vector3();\r\n\t\t\t\tmatrix = new THREE.Matrix4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\r\n\t\t\t// if determine is negative, we need to invert one scale\r\n\t\t\tvar det = this.determinant();\r\n\t\t\tif ( det < 0 ) {\r\n\r\n\t\t\t\tsx = - sx;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tposition.x = te[ 12 ];\r\n\t\t\tposition.y = te[ 13 ];\r\n\t\t\tposition.z = te[ 14 ];\r\n\r\n\t\t\t// scale the rotation part\r\n\r\n\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\r\n\r\n\t\t\tvar invSX = 1 / sx;\r\n\t\t\tvar invSY = 1 / sy;\r\n\t\t\tvar invSZ = 1 / sz;\r\n\r\n\t\t\tmatrix.elements[ 0 ] *= invSX;\r\n\t\t\tmatrix.elements[ 1 ] *= invSX;\r\n\t\t\tmatrix.elements[ 2 ] *= invSX;\r\n\r\n\t\t\tmatrix.elements[ 4 ] *= invSY;\r\n\t\t\tmatrix.elements[ 5 ] *= invSY;\r\n\t\t\tmatrix.elements[ 6 ] *= invSY;\r\n\r\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\r\n\r\n\t\t\tquaternion.setFromRotationMatrix( matrix );\r\n\r\n\t\t\tscale.x = sx;\r\n\t\t\tscale.y = sy;\r\n\t\t\tscale.z = sz;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = 2 * near / ( right - left );\r\n\t\tvar y = 2 * near / ( top - bottom );\r\n\r\n\t\tvar a = ( right + left ) / ( right - left );\r\n\t\tvar b = ( top + bottom ) / ( top - bottom );\r\n\t\tvar c = - ( far + near ) / ( far - near );\r\n\t\tvar d = - 2 * far * near / ( far - near );\r\n\r\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakePerspective: function ( fov, aspect, near, far ) {\r\n\r\n\t\tvar ymax = near * Math.tan( THREE.Math.DEG2RAD * fov * 0.5 );\r\n\t\tvar ymin = - ymax;\r\n\t\tvar xmin = ymin * aspect;\r\n\t\tvar xmax = ymax * aspect;\r\n\r\n\t\treturn this.makeFrustum( xmin, xmax, ymin, ymax, near, far );\r\n\r\n\t},\r\n\r\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar w = 1.0 / ( right - left );\r\n\t\tvar h = 1.0 / ( top - bottom );\r\n\t\tvar p = 1.0 / ( far - near );\r\n\r\n\t\tvar x = ( right + left ) * w;\r\n\t\tvar y = ( top + bottom ) * h;\r\n\t\tvar z = ( far + near ) * p;\r\n\r\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( matrix ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = matrix.elements;\r\n\r\n\t\tfor ( var i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\t\tarray[ offset + 9 ]  = te[ 9 ];\r\n\t\tarray[ offset + 10 ] = te[ 10 ];\r\n\t\tarray[ offset + 11 ] = te[ 11 ];\r\n\r\n\t\tarray[ offset + 12 ] = te[ 12 ];\r\n\t\tarray[ offset + 13 ] = te[ 13 ];\r\n\t\tarray[ offset + 14 ] = te[ 14 ];\r\n\t\tarray[ offset + 15 ] = te[ 15 ];\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Ray.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Ray = function ( origin, direction ) {\r\n\r\n\tthis.origin = ( origin !== undefined ) ? origin : new THREE.Vector3();\r\n\tthis.direction = ( direction !== undefined ) ? direction : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Ray.prototype = {\r\n\r\n\tconstructor: THREE.Ray,\r\n\r\n\tset: function ( origin, direction ) {\r\n\r\n\t\tthis.origin.copy( origin );\r\n\t\tthis.direction.copy( direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( ray ) {\r\n\r\n\t\tthis.origin.copy( ray.origin );\r\n\t\tthis.direction.copy( ray.direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tlookAt: function ( v ) {\r\n\r\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trecast: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( t ) {\r\n\r\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\tresult.subVectors( point, this.origin );\r\n\t\tvar directionDistance = result.dot( this.direction );\r\n\r\n\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\treturn result.copy( this.origin );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\r\n\r\n\t},\r\n\r\n\tdistanceSqToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\r\n\r\n\t\t\t// point behind the ray\r\n\r\n\t\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\t\treturn this.origin.distanceToSquared( point );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t\t\treturn v1.distanceToSquared( point );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tdistanceSqToSegment: function () {\r\n\r\n\t\tvar segCenter = new THREE.Vector3();\r\n\t\tvar segDir = new THREE.Vector3();\r\n\t\tvar diff = new THREE.Vector3();\r\n\r\n\t\treturn function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\r\n\t\t\t// It returns the min distance between the ray and the segment\r\n\t\t\t// defined by v0 and v1\r\n\t\t\t// It can also set two optional targets :\r\n\t\t\t// - The closest point on the ray\r\n\t\t\t// - The closest point on the segment\r\n\r\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\r\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\r\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\r\n\r\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\r\n\t\t\tvar a01 = - this.direction.dot( segDir );\r\n\t\t\tvar b0 = diff.dot( this.direction );\r\n\t\t\tvar b1 = - diff.dot( segDir );\r\n\t\t\tvar c = diff.lengthSq();\r\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\r\n\t\t\tvar s0, s1, sqrDist, extDet;\r\n\r\n\t\t\tif ( det > 0 ) {\r\n\r\n\t\t\t\t// The ray and segment are not parallel.\r\n\r\n\t\t\t\ts0 = a01 * b1 - b0;\r\n\t\t\t\ts1 = a01 * b0 - b1;\r\n\t\t\t\textDet = segExtent * det;\r\n\r\n\t\t\t\tif ( s0 >= 0 ) {\r\n\r\n\t\t\t\t\tif ( s1 >= - extDet ) {\r\n\r\n\t\t\t\t\t\tif ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t\t// region 0\r\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\r\n\r\n\t\t\t\t\t\t\tvar invDet = 1 / det;\r\n\t\t\t\t\t\t\ts0 *= invDet;\r\n\t\t\t\t\t\t\ts1 *= invDet;\r\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// region 1\r\n\r\n\t\t\t\t\t\t\ts1 = segExtent;\r\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 5\r\n\r\n\t\t\t\t\t\ts1 = - segExtent;\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( s1 <= - extDet ) {\r\n\r\n\t\t\t\t\t\t// region 4\r\n\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else if ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t// region 3\r\n\r\n\t\t\t\t\t\ts0 = 0;\r\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 2\r\n\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Ray and segment are parallel.\r\n\r\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( optionalPointOnRay ) {\r\n\r\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( optionalPointOnSegment ) {\r\n\r\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn sqrDist;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectSphere: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( sphere, optionalTarget ) {\r\n\r\n\t\t\tv1.subVectors( sphere.center, this.origin );\r\n\t\t\tvar tca = v1.dot( this.direction );\r\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\r\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\r\n\r\n\t\t\tif ( d2 > radius2 ) return null;\r\n\r\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\r\n\r\n\t\t\t// t0 = first intersect point - entrance on front of sphere\r\n\t\t\tvar t0 = tca - thc;\r\n\r\n\t\t\t// t1 = second intersect point - exit point on back of sphere\r\n\t\t\tvar t1 = tca + thc;\r\n\r\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\r\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\r\n\r\n\t\t\t// test to see if t0 is behind the ray:\r\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n\t\t\t// in order to always return an intersect point that is in front of the ray.\r\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\r\n\r\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\r\n\t\t\treturn this.at( t0, optionalTarget );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\r\n\r\n\t},\r\n\r\n\tdistanceToPlane: function ( plane ) {\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t// line is coplanar, return origin\r\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\r\n\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\r\n\t\t// Return if the ray never intersects the plane\r\n\r\n\t\treturn t >= 0 ? t :  null;\r\n\r\n\t},\r\n\r\n\tintersectPlane: function ( plane, optionalTarget ) {\r\n\r\n\t\tvar t = this.distanceToPlane( plane );\r\n\r\n\t\tif ( t === null ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.at( t, optionalTarget );\r\n\r\n\t},\r\n\r\n\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// check if the ray lies on the plane first\r\n\r\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\r\n\r\n\t\tif ( distToPoint === 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator * distToPoint < 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// ray origin is behind the plane (and is pointing behind it)\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tintersectBox: function ( box, optionalTarget ) {\r\n\r\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\r\n\r\n\t\tvar invdirx = 1 / this.direction.x,\r\n\t\t\tinvdiry = 1 / this.direction.y,\r\n\t\t\tinvdirz = 1 / this.direction.z;\r\n\r\n\t\tvar origin = this.origin;\r\n\r\n\t\tif ( invdirx >= 0 ) {\r\n\r\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\r\n\r\n\t\t}\r\n\r\n\t\tif ( invdiry >= 0 ) {\r\n\r\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\r\n\t\t// These lines also handle the case where tmin or tmax is NaN\r\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\r\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\r\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\r\n\t\tif ( invdirz >= 0 ) {\r\n\r\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\r\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\r\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\r\n\t\t//return point closest to the ray (positive side)\r\n\r\n\t\tif ( tmax < 0 ) return null;\r\n\r\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\r\n\r\n\t},\r\n\r\n\tintersectsBox: ( function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\treturn this.intersectBox( box, v ) !== null;\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tintersectTriangle: function () {\r\n\r\n\t\t// Compute the offset origin, edges, and normal.\r\n\t\tvar diff = new THREE.Vector3();\r\n\t\tvar edge1 = new THREE.Vector3();\r\n\t\tvar edge2 = new THREE.Vector3();\r\n\t\tvar normal = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c, backfaceCulling, optionalTarget ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\r\n\r\n\t\t\tedge1.subVectors( b, a );\r\n\t\t\tedge2.subVectors( c, a );\r\n\t\t\tnormal.crossVectors( edge1, edge2 );\r\n\r\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n\t\t\tvar DdN = this.direction.dot( normal );\r\n\t\t\tvar sign;\r\n\r\n\t\t\tif ( DdN > 0 ) {\r\n\r\n\t\t\t\tif ( backfaceCulling ) return null;\r\n\t\t\t\tsign = 1;\r\n\r\n\t\t\t} else if ( DdN < 0 ) {\r\n\r\n\t\t\t\tsign = - 1;\r\n\t\t\t\tDdN = - DdN;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdiff.subVectors( this.origin, a );\r\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\r\n\r\n\t\t\t// b1 < 0, no intersection\r\n\t\t\tif ( DdQxE2 < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\r\n\r\n\t\t\t// b2 < 0, no intersection\r\n\t\t\tif ( DdE1xQ < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// b1+b2 > 1, no intersection\r\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Line intersects triangle, check if ray does.\r\n\t\t\tvar QdN = - sign * diff.dot( normal );\r\n\r\n\t\t\t// t < 0, no intersection\r\n\t\t\tif ( QdN < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Ray intersects triangle.\r\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix4: function ( matrix4 ) {\r\n\r\n\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\r\n\t\tthis.origin.applyMatrix4( matrix4 );\r\n\t\tthis.direction.sub( this.origin );\r\n\t\tthis.direction.normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( ray ) {\r\n\r\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Sphere.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Sphere = function ( center, radius ) {\r\n\r\n\tthis.center = ( center !== undefined ) ? center : new THREE.Vector3();\r\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\r\n\r\n};\r\n\r\nTHREE.Sphere.prototype = {\r\n\r\n\tconstructor: THREE.Sphere,\r\n\r\n\tset: function ( center, radius ) {\r\n\r\n\t\tthis.center.copy( center );\r\n\t\tthis.radius = radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\r\n\t\treturn function ( points, optionalCenter ) {\r\n\r\n\t\t\tvar center = this.center;\r\n\r\n\t\t\tif ( optionalCenter !== undefined ) {\r\n\r\n\t\t\t\tcenter.copy( optionalCenter );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbox.setFromPoints( points ).center( center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( sphere ) {\r\n\r\n\t\tthis.center.copy( sphere.center );\r\n\t\tthis.radius = sphere.radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\treturn ( this.radius <= 0 );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar radiusSum = this.radius + sphere.radius;\r\n\r\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsSphere( this );\r\n\r\n\t},\r\n\r\n\tintersectsPlane: function ( plane ) {\r\n\r\n\t\t// We use the following equation to compute the signed distance from\r\n\t\t// the center of the sphere to the plane.\r\n\t\t//\r\n\t\t// distance = q * n - d\r\n\t\t//\r\n\t\t// If this distance is greater than the radius of the sphere,\r\n\t\t// then there is no intersection.\r\n\r\n\t\treturn Math.abs( this.center.dot( plane.normal ) - plane.constant ) <= this.radius;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tresult.copy( point );\r\n\r\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\r\n\t\t\tresult.sub( this.center ).normalize();\r\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\tgetBoundingBox: function ( optionalTarget ) {\r\n\r\n\t\tvar box = optionalTarget || new THREE.Box3();\r\n\r\n\t\tbox.set( this.center, this.center );\r\n\t\tbox.expandByScalar( this.radius );\r\n\r\n\t\treturn box;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.center.applyMatrix4( matrix );\r\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.center.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( sphere ) {\r\n\r\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Frustum.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Frustum = function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\tthis.planes = [\r\n\r\n\t\t( p0 !== undefined ) ? p0 : new THREE.Plane(),\r\n\t\t( p1 !== undefined ) ? p1 : new THREE.Plane(),\r\n\t\t( p2 !== undefined ) ? p2 : new THREE.Plane(),\r\n\t\t( p3 !== undefined ) ? p3 : new THREE.Plane(),\r\n\t\t( p4 !== undefined ) ? p4 : new THREE.Plane(),\r\n\t\t( p5 !== undefined ) ? p5 : new THREE.Plane()\r\n\r\n\t];\r\n\r\n};\r\n\r\nTHREE.Frustum.prototype = {\r\n\r\n\tconstructor: THREE.Frustum,\r\n\r\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tplanes[ 0 ].copy( p0 );\r\n\t\tplanes[ 1 ].copy( p1 );\r\n\t\tplanes[ 2 ].copy( p2 );\r\n\t\tplanes[ 3 ].copy( p3 );\r\n\t\tplanes[ 4 ].copy( p4 );\r\n\t\tplanes[ 5 ].copy( p5 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( frustum ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrix: function ( m ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar me = m.elements;\r\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\r\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tintersectsObject: function () {\r\n\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tvar geometry = object.geometry;\r\n\r\n\t\t\tif ( geometry.boundingSphere === null )\r\n\t\t\t\tgeometry.computeBoundingSphere();\r\n\r\n\t\t\tsphere.copy( geometry.boundingSphere )\r\n\t\t\t\t.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsSprite: function () {\r\n\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\treturn function ( sprite ) {\r\n\r\n\t\t\tsphere.center.set( 0, 0, 0 );\r\n\t\t\tsphere.radius = 0.7071067811865476;\r\n\t\t\tsphere.applyMatrix4( sprite.matrixWorld );\r\n\r\n\t\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar center = sphere.center;\r\n\t\tvar negRadius = - sphere.radius;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\r\n\r\n\t\t\tif ( distance < negRadius ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsBox: function () {\r\n\r\n\t\tvar p1 = new THREE.Vector3(),\r\n\t\t\tp2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\tvar planes = this.planes;\r\n\r\n\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\r\n\r\n\t\t\t\tvar plane = planes[ i ];\r\n\r\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\r\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\r\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\r\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\r\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\r\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\r\n\r\n\t\t\t\t// if both outside plane, no intersection\r\n\r\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Plane.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Plane = function ( normal, constant ) {\r\n\r\n\tthis.normal = ( normal !== undefined ) ? normal : new THREE.Vector3( 1, 0, 0 );\r\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\r\n\r\n};\r\n\r\nTHREE.Plane.prototype = {\r\n\r\n\tconstructor: THREE.Plane,\r\n\r\n\tset: function ( normal, constant ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponents: function ( x, y, z, w ) {\r\n\r\n\t\tthis.normal.set( x, y, z );\r\n\t\tthis.constant = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCoplanarPoints: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c ) {\r\n\r\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\r\n\r\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\r\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( plane ) {\r\n\r\n\t\tthis.normal.copy( plane.normal );\r\n\t\tthis.constant = plane.constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\r\n\r\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\r\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\r\n\t\tthis.constant *= inverseNormalLength;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.constant *= - 1;\r\n\t\tthis.normal.negate();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn this.normal.dot( point ) + this.constant;\r\n\r\n\t},\r\n\r\n\tdistanceToSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\r\n\t},\r\n\r\n\tprojectPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\r\n\r\n\t},\r\n\r\n\torthoPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\r\n\r\n\t},\r\n\r\n\tintersectLine: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( line, optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tvar direction = line.delta( v1 );\r\n\r\n\t\t\tvar denominator = this.normal.dot( direction );\r\n\r\n\t\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t\t// line is coplanar, return origin\r\n\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\r\n\r\n\t\t\t\t\treturn result.copy( line.start );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Unsure if this is the correct method to handle this case.\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\r\n\t\t\tif ( t < 0 || t > 1 ) {\r\n\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsLine: function ( line ) {\r\n\r\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\r\n\t\tvar startSign = this.distanceToPoint( line.start );\r\n\t\tvar endSign = this.distanceToPoint( line.end );\r\n\r\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\r\n\t},\r\n\r\n\tintersectsBox: function ( box ) {\r\n\r\n\t\treturn box.intersectsPlane( this );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\treturn sphere.intersectsPlane( this );\r\n\r\n\t},\r\n\r\n\tcoplanarPoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar m1 = new THREE.Matrix3();\r\n\r\n\t\treturn function ( matrix, optionalNormalMatrix ) {\r\n\r\n\t\t\tvar referencePoint = this.coplanarPoint( v1 ).applyMatrix4( matrix );\r\n\r\n\t\t\t// transform normal based on theory here:\r\n\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\r\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\r\n\t\t\tvar normal = this.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t// recalculate constant (like in setFromNormalAndCoplanarPoint)\r\n\t\t\tthis.constant = - referencePoint.dot( normal );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.constant = this.constant - offset.dot( this.normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( plane ) {\r\n\r\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Spherical.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\r\n *\r\n * The poles (phi) are at the positive and negative y axis.\r\n * The equator starts at positive z.\r\n */\r\n\r\nTHREE.Spherical = function ( radius, phi, theta ) {\r\n\r\n\tthis.radius = ( radius !== undefined ) ? radius : 1.0;\r\n\tthis.phi = ( phi !== undefined ) ? phi : 0; // up / down towards top and bottom pole\r\n\tthis.theta = ( theta !== undefined ) ? theta : 0; // around the equator of the sphere\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Spherical.prototype = {\r\n\r\n\tconstructor: THREE.Spherical,\r\n\r\n\tset: function ( radius, phi, theta ) {\r\n\r\n\t\tthis.radius = radius;\r\n\t\tthis.phi = phi;\r\n\t\tthis.theta = theta;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( other ) {\r\n\r\n\t\tthis.radius.copy( other.radius );\r\n\t\tthis.phi.copy( other.phi );\r\n\t\tthis.theta.copy( other.theta );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// restrict phi to be betwee EPS and PI-EPS\r\n\tmakeSafe: function() {\r\n\r\n\t\tvar EPS = 0.000001;\r\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromVector3: function( vec3 ) {\r\n\r\n\t\tthis.radius = vec3.length();\r\n\r\n\t\tif ( this.radius === 0 ) {\r\n\r\n\t\t\tthis.theta = 0;\r\n\t\t\tthis.phi = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.theta = Math.atan2( vec3.x, vec3.z ); // equator angle around y-up axis\r\n\t\t\tthis.phi = Math.acos( THREE.Math.clamp( vec3.y / this.radius, - 1, 1 ) ); // polar angle\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n};\r\n\r\n// File:src/math/Math.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Math = {\r\n\r\n\tDEG2RAD: Math.PI / 180,\r\n\tRAD2DEG: 180 / Math.PI,\r\n\r\n\tgenerateUUID: function () {\r\n\r\n\t\t// http://www.broofa.com/Tools/Math.uuid.htm\r\n\r\n\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\r\n\t\tvar uuid = new Array( 36 );\r\n\t\tvar rnd = 0, r;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tfor ( var i = 0; i < 36; i ++ ) {\r\n\r\n\t\t\t\tif ( i === 8 || i === 13 || i === 18 || i === 23 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '-';\r\n\r\n\t\t\t\t} else if ( i === 14 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '4';\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\r\n\t\t\t\t\tr = rnd & 0xf;\r\n\t\t\t\t\trnd = rnd >> 4;\r\n\t\t\t\t\tuuid[ i ] = chars[ ( i === 19 ) ? ( r & 0x3 ) | 0x8 : r ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn uuid.join( '' );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclamp: function ( value, min, max ) {\r\n\r\n\t\treturn Math.max( min, Math.min( max, value ) );\r\n\r\n\t},\r\n\r\n\t// compute euclidian modulo of m % n\r\n\t// https://en.wikipedia.org/wiki/Modulo_operation\r\n\r\n\teuclideanModulo: function ( n, m ) {\r\n\r\n\t\treturn ( ( n % m ) + m ) % m;\r\n\r\n\t},\r\n\r\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\r\n\r\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\r\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\r\n\t},\r\n\r\n\t// http://en.wikipedia.org/wiki/Smoothstep\r\n\r\n\tsmoothstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * ( 3 - 2 * x );\r\n\r\n\t},\r\n\r\n\tsmootherstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\r\n\t},\r\n\r\n\trandom16: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Math.random16() has been deprecated. Use Math.random() instead.' );\r\n\t\treturn Math.random();\r\n\r\n\t},\r\n\r\n\t// Random integer from <low, high> interval\r\n\r\n\trandInt: function ( low, high ) {\r\n\r\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\r\n\t},\r\n\r\n\t// Random float from <low, high> interval\r\n\r\n\trandFloat: function ( low, high ) {\r\n\r\n\t\treturn low + Math.random() * ( high - low );\r\n\r\n\t},\r\n\r\n\t// Random float from <-range/2, range/2> interval\r\n\r\n\trandFloatSpread: function ( range ) {\r\n\r\n\t\treturn range * ( 0.5 - Math.random() );\r\n\r\n\t},\r\n\r\n\tdegToRad: function ( degrees ) {\r\n\r\n\t\treturn degrees * THREE.Math.DEG2RAD;\r\n\r\n\t},\r\n\r\n\tradToDeg: function ( radians ) {\r\n\r\n\t\treturn radians * THREE.Math.RAD2DEG;\r\n\r\n\t},\r\n\r\n\tisPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n\t},\r\n\r\n\tnearestPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn Math.pow( 2, Math.round( Math.log( value ) / Math.LN2 ) );\r\n\r\n\t},\r\n\r\n\tnextPowerOfTwo: function ( value ) {\r\n\r\n\t\tvalue --;\r\n\t\tvalue |= value >> 1;\r\n\t\tvalue |= value >> 2;\r\n\t\tvalue |= value >> 4;\r\n\t\tvalue |= value >> 8;\r\n\t\tvalue |= value >> 16;\r\n\t\tvalue ++;\r\n\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Spline.js\r\n\r\n/**\r\n * Spline from Tween.js, slightly optimized (and trashed)\r\n * http://sole.github.com/tween.js/examples/05_spline.html\r\n *\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Spline = function ( points ) {\r\n\r\n\tthis.points = points;\r\n\r\n\tvar c = [], v3 = { x: 0, y: 0, z: 0 },\r\n\tpoint, intPoint, weight, w2, w3,\r\n\tpa, pb, pc, pd;\r\n\r\n\tthis.initFromArray = function ( a ) {\r\n\r\n\t\tthis.points = [];\r\n\r\n\t\tfor ( var i = 0; i < a.length; i ++ ) {\r\n\r\n\t\t\tthis.points[ i ] = { x: a[ i ][ 0 ], y: a[ i ][ 1 ], z: a[ i ][ 2 ] };\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getPoint = function ( k ) {\r\n\r\n\t\tpoint = ( this.points.length - 1 ) * k;\r\n\t\tintPoint = Math.floor( point );\r\n\t\tweight = point - intPoint;\r\n\r\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\tc[ 1 ] = intPoint;\r\n\t\tc[ 2 ] = intPoint  > this.points.length - 2 ? this.points.length - 1 : intPoint + 1;\r\n\t\tc[ 3 ] = intPoint  > this.points.length - 3 ? this.points.length - 1 : intPoint + 2;\r\n\r\n\t\tpa = this.points[ c[ 0 ] ];\r\n\t\tpb = this.points[ c[ 1 ] ];\r\n\t\tpc = this.points[ c[ 2 ] ];\r\n\t\tpd = this.points[ c[ 3 ] ];\r\n\r\n\t\tw2 = weight * weight;\r\n\t\tw3 = weight * w2;\r\n\r\n\t\tv3.x = interpolate( pa.x, pb.x, pc.x, pd.x, weight, w2, w3 );\r\n\t\tv3.y = interpolate( pa.y, pb.y, pc.y, pd.y, weight, w2, w3 );\r\n\t\tv3.z = interpolate( pa.z, pb.z, pc.z, pd.z, weight, w2, w3 );\r\n\r\n\t\treturn v3;\r\n\r\n\t};\r\n\r\n\tthis.getControlPointsArray = function () {\r\n\r\n\t\tvar i, p, l = this.points.length,\r\n\t\t\tcoords = [];\r\n\r\n\t\tfor ( i = 0; i < l; i ++ ) {\r\n\r\n\t\t\tp = this.points[ i ];\r\n\t\t\tcoords[ i ] = [ p.x, p.y, p.z ];\r\n\r\n\t\t}\r\n\r\n\t\treturn coords;\r\n\r\n\t};\r\n\r\n\t// approximate length by summing linear segments\r\n\r\n\tthis.getLength = function ( nSubDivisions ) {\r\n\r\n\t\tvar i, index, nSamples, position,\r\n\t\t\tpoint = 0, intPoint = 0, oldIntPoint = 0,\r\n\t\t\toldPosition = new THREE.Vector3(),\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tchunkLengths = [],\r\n\t\t\ttotalLength = 0;\r\n\r\n\t\t// first point has 0 length\r\n\r\n\t\tchunkLengths[ 0 ] = 0;\r\n\r\n\t\tif ( ! nSubDivisions ) nSubDivisions = 100;\r\n\r\n\t\tnSamples = this.points.length * nSubDivisions;\r\n\r\n\t\toldPosition.copy( this.points[ 0 ] );\r\n\r\n\t\tfor ( i = 1; i < nSamples; i ++ ) {\r\n\r\n\t\t\tindex = i / nSamples;\r\n\r\n\t\t\tposition = this.getPoint( index );\r\n\t\t\ttmpVec.copy( position );\r\n\r\n\t\t\ttotalLength += tmpVec.distanceTo( oldPosition );\r\n\r\n\t\t\toldPosition.copy( position );\r\n\r\n\t\t\tpoint = ( this.points.length - 1 ) * index;\r\n\t\t\tintPoint = Math.floor( point );\r\n\r\n\t\t\tif ( intPoint !== oldIntPoint ) {\r\n\r\n\t\t\t\tchunkLengths[ intPoint ] = totalLength;\r\n\t\t\t\toldIntPoint = intPoint;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// last point ends with total length\r\n\r\n\t\tchunkLengths[ chunkLengths.length ] = totalLength;\r\n\r\n\t\treturn { chunks: chunkLengths, total: totalLength };\r\n\r\n\t};\r\n\r\n\tthis.reparametrizeByArcLength = function ( samplingCoef ) {\r\n\r\n\t\tvar i, j,\r\n\t\t\tindex, indexCurrent, indexNext,\r\n\t\t\trealDistance,\r\n\t\t\tsampling, position,\r\n\t\t\tnewpoints = [],\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tsl = this.getLength();\r\n\r\n\t\tnewpoints.push( tmpVec.copy( this.points[ 0 ] ).clone() );\r\n\r\n\t\tfor ( i = 1; i < this.points.length; i ++ ) {\r\n\r\n\t\t\t//tmpVec.copy( this.points[ i - 1 ] );\r\n\t\t\t//linearDistance = tmpVec.distanceTo( this.points[ i ] );\r\n\r\n\t\t\trealDistance = sl.chunks[ i ] - sl.chunks[ i - 1 ];\r\n\r\n\t\t\tsampling = Math.ceil( samplingCoef * realDistance / sl.total );\r\n\r\n\t\t\tindexCurrent = ( i - 1 ) / ( this.points.length - 1 );\r\n\t\t\tindexNext = i / ( this.points.length - 1 );\r\n\r\n\t\t\tfor ( j = 1; j < sampling - 1; j ++ ) {\r\n\r\n\t\t\t\tindex = indexCurrent + j * ( 1 / sampling ) * ( indexNext - indexCurrent );\r\n\r\n\t\t\t\tposition = this.getPoint( index );\r\n\t\t\t\tnewpoints.push( tmpVec.copy( position ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnewpoints.push( tmpVec.copy( this.points[ i ] ).clone() );\r\n\r\n\t\t}\r\n\r\n\t\tthis.points = newpoints;\r\n\r\n\t};\r\n\r\n\t// Catmull-Rom\r\n\r\n\tfunction interpolate( p0, p1, p2, p3, t, t2, t3 ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\r\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Triangle.js\r\n\r\n/**\r\n * @author bhouston / http://clara.io\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Triangle = function ( a, b, c ) {\r\n\r\n\tthis.a = ( a !== undefined ) ? a : new THREE.Vector3();\r\n\tthis.b = ( b !== undefined ) ? b : new THREE.Vector3();\r\n\tthis.c = ( c !== undefined ) ? c : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Triangle.normal = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\r\n\treturn function ( a, b, c, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tresult.subVectors( c, b );\r\n\t\tv0.subVectors( a, b );\r\n\t\tresult.cross( v0 );\r\n\r\n\t\tvar resultLengthSq = result.lengthSq();\r\n\t\tif ( resultLengthSq > 0 ) {\r\n\r\n\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.set( 0, 0, 0 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// static/instance method to calculate barycentric coordinates\r\n// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\nTHREE.Triangle.barycoordFromPoint = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c, optionalTarget ) {\r\n\r\n\t\tv0.subVectors( c, a );\r\n\t\tv1.subVectors( b, a );\r\n\t\tv2.subVectors( point, a );\r\n\r\n\t\tvar dot00 = v0.dot( v0 );\r\n\t\tvar dot01 = v0.dot( v1 );\r\n\t\tvar dot02 = v0.dot( v2 );\r\n\t\tvar dot11 = v1.dot( v1 );\r\n\t\tvar dot12 = v1.dot( v2 );\r\n\r\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t// collinear or singular triangle\r\n\t\tif ( denom === 0 ) {\r\n\r\n\t\t\t// arbitrary location outside of triangle?\r\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\r\n\t\t\treturn result.set( - 2, - 1, - 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvar invDenom = 1 / denom;\r\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\r\n\t\t// barycentric coordinates must always sum to 1\r\n\t\treturn result.set( 1 - u - v, v, u );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.containsPoint = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c ) {\r\n\r\n\t\tvar result = THREE.Triangle.barycoordFromPoint( point, a, b, c, v1 );\r\n\r\n\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.prototype = {\r\n\r\n\tconstructor: THREE.Triangle,\r\n\r\n\tset: function ( a, b, c ) {\r\n\r\n\t\tthis.a.copy( a );\r\n\t\tthis.b.copy( b );\r\n\t\tthis.c.copy( c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\r\n\t\tthis.a.copy( points[ i0 ] );\r\n\t\tthis.b.copy( points[ i1 ] );\r\n\t\tthis.c.copy( points[ i2 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( triangle ) {\r\n\r\n\t\tthis.a.copy( triangle.a );\r\n\t\tthis.b.copy( triangle.b );\r\n\t\tthis.c.copy( triangle.c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tarea: function () {\r\n\r\n\t\tvar v0 = new THREE.Vector3();\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tv0.subVectors( this.c, this.b );\r\n\t\t\tv1.subVectors( this.a, this.b );\r\n\r\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmidpoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\r\n\t},\r\n\r\n\tnormal: function ( optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.normal( this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tplane: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Plane();\r\n\r\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn THREE.Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tclosestPointToPoint: function () {\r\n\r\n\t\tvar plane, edgeList, projectedPoint, closestPoint;\r\n\r\n\t\treturn function closestPointToPoint( point, optionalTarget ) {\r\n\r\n\t\t\tif ( plane === undefined ) {\r\n\r\n\t\t\t\tplane = new THREE.Plane();\r\n\t\t\t\tedgeList = [ new THREE.Line3(), new THREE.Line3(), new THREE.Line3() ];\r\n\t\t\t\tprojectedPoint = new THREE.Vector3();\r\n\t\t\t\tclosestPoint = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\tvar minDistance = Infinity;\r\n\r\n\t\t\t// project the point onto the plane of the triangle\r\n\r\n\t\t\tplane.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\t\t\tplane.projectPoint( point, projectedPoint );\r\n\r\n\t\t\t// check if the projection lies within the triangle\r\n\r\n\t\t\tif( this.containsPoint( projectedPoint ) === true ) {\r\n\r\n\t\t\t\t// if so, this is the closest point\r\n\r\n\t\t\t\tresult.copy( projectedPoint );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// if not, the point falls outside the triangle. the result is the closest point to the triangle's edges or vertices\r\n\r\n\t\t\t\tedgeList[ 0 ].set( this.a, this.b );\r\n\t\t\t\tedgeList[ 1 ].set( this.b, this.c );\r\n\t\t\t\tedgeList[ 2 ].set( this.c, this.a );\r\n\r\n\t\t\t\tfor( var i = 0; i < edgeList.length; i ++ ) {\r\n\r\n\t\t\t\t\tedgeList[ i ].closestPointToPoint( projectedPoint, true, closestPoint );\r\n\r\n\t\t\t\t\tvar distance = projectedPoint.distanceToSquared( closestPoint );\r\n\r\n\t\t\t\t\tif( distance < minDistance ) {\r\n\r\n\t\t\t\t\t\tminDistance = distance;\r\n\r\n\t\t\t\t\t\tresult.copy( closestPoint );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tequals: function ( triangle ) {\r\n\r\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Interpolant.js\r\n\r\n/**\r\n * Abstract base class of interpolants over parametric samples.\r\n *\r\n * The parameter domain is one dimensional, typically the time or a path\r\n * along a curve defined by the data.\r\n *\r\n * The sample values can have any dimensionality and derived classes may\r\n * apply special interpretations to the data.\r\n *\r\n * This class provides the interval seek in a Template Method, deferring\r\n * the actual interpolation to derived classes.\r\n *\r\n * Time complexity is O(1) for linear access crossing at most two points\r\n * and O(log N) for random access, where N is the number of positions.\r\n *\r\n * References:\r\n *\r\n * \t\thttp://www.oodesign.com/template-method-pattern.html\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.Interpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tthis.parameterPositions = parameterPositions;\r\n\tthis._cachedIndex = 0;\r\n\r\n\tthis.resultBuffer = resultBuffer !== undefined ?\r\n\t\t\tresultBuffer : new sampleValues.constructor( sampleSize );\r\n\tthis.sampleValues = sampleValues;\r\n\tthis.valueSize = sampleSize;\r\n\r\n};\r\n\r\nTHREE.Interpolant.prototype = {\r\n\r\n\tconstructor: THREE.Interpolant,\r\n\r\n\tevaluate: function( t ) {\r\n\r\n\t\tvar pp = this.parameterPositions,\r\n\t\t\ti1 = this._cachedIndex,\r\n\r\n\t\t\tt1 = pp[   i1   ],\r\n\t\t\tt0 = pp[ i1 - 1 ];\r\n\r\n\t\tvalidate_interval: {\r\n\r\n\t\t\tseek: {\r\n\r\n\t\t\t\tvar right;\r\n\r\n\t\t\t\tlinear_scan: {\r\n//- See http://jsperf.com/comparison-to-undefined/3\r\n//- slower code:\r\n//-\r\n//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\r\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\r\n\r\n\t\t\t\t\t\tfor ( var giveUpAt = i1 + 2; ;) {\r\n\r\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\r\n\r\n\t\t\t\t\t\t\t\t// after end\r\n\r\n\t\t\t\t\t\t\t\ti1 = pp.length;\r\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\r\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\r\n\r\n\t\t\t\t\t\t\tt0 = t1;\r\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\r\n\r\n\t\t\t\t\t\t\tif ( t < t1 ) {\r\n\r\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\r\n\t\t\t\t\t\t\t\tbreak seek;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// prepare binary search on the right side of the index\r\n\t\t\t\t\t\tright = pp.length;\r\n\t\t\t\t\t\tbreak linear_scan;\r\n\r\n\t\t\t\t\t}\r\n\r\n//- slower code:\r\n//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\r\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\r\n\r\n\t\t\t\t\t\t// looping?\r\n\r\n\t\t\t\t\t\tvar t1global = pp[ 1 ];\r\n\r\n\t\t\t\t\t\tif ( t < t1global ) {\r\n\r\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\r\n\t\t\t\t\t\t\tt0 = t1global;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// linear reverse scan\r\n\r\n\t\t\t\t\t\tfor ( var giveUpAt = i1 - 2; ;) {\r\n\r\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\t// before start\r\n\r\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\r\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\r\n\r\n\t\t\t\t\t\t\tt1 = t0;\r\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( t >= t0 ) {\r\n\r\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\r\n\t\t\t\t\t\t\t\tbreak seek;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// prepare binary search on the left side of the index\r\n\t\t\t\t\t\tright = i1;\r\n\t\t\t\t\t\ti1 = 0;\r\n\t\t\t\t\t\tbreak linear_scan;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// the interval is valid\r\n\r\n\t\t\t\t\tbreak validate_interval;\r\n\r\n\t\t\t\t} // linear scan\r\n\r\n\t\t\t\t// binary search\r\n\r\n\t\t\t\twhile ( i1 < right ) {\r\n\r\n\t\t\t\t\tvar mid = ( i1 + right ) >>> 1;\r\n\r\n\t\t\t\t\tif ( t < pp[ mid ] ) {\r\n\r\n\t\t\t\t\t\tright = mid;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\ti1 = mid + 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt1 = pp[   i1   ];\r\n\t\t\t\tt0 = pp[ i1 - 1 ];\r\n\r\n\t\t\t\t// check boundary cases, again\r\n\r\n\t\t\t\tif ( t0 === undefined ) {\r\n\r\n\t\t\t\t\tthis._cachedIndex = 0;\r\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( t1 === undefined ) {\r\n\r\n\t\t\t\t\ti1 = pp.length;\r\n\t\t\t\t\tthis._cachedIndex = i1;\r\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} // seek\r\n\r\n\t\t\tthis._cachedIndex = i1;\r\n\r\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\r\n\r\n\t\t} // validate_interval\r\n\r\n\t\treturn this.interpolate_( i1, t0, t, t1 );\r\n\r\n\t},\r\n\r\n\tsettings: null, // optional, subclass-specific settings structure\r\n\t// Note: The indirection allows central control of many interpolants.\r\n\r\n\t// --- Protected interface\r\n\r\n\tDefaultSettings_: {},\r\n\r\n\tgetSettings_: function() {\r\n\r\n\t\treturn this.settings || this.DefaultSettings_;\r\n\r\n\t},\r\n\r\n\tcopySampleValue_: function( index ) {\r\n\r\n\t\t// copies a sample value to the result buffer\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = index * stride;\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] = values[ offset + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// Template methods for derived classes:\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tthrow new Error( \"call to abstract method\" );\r\n\t\t// implementations shall return this.resultBuffer\r\n\r\n\t},\r\n\r\n\tintervalChanged_: function( i1, t0, t1 ) {\r\n\r\n\t\t// empty\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( THREE.Interpolant.prototype, {\r\n\r\n\tbeforeStart_: //( 0, t, t0 ), returns this.resultBuffer\r\n\t\tTHREE.Interpolant.prototype.copySampleValue_,\r\n\r\n\tafterEnd_: //( N-1, tN-1, t ), returns this.resultBuffer\r\n\t\tTHREE.Interpolant.prototype.copySampleValue_\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/CubicInterpolant.js\r\n\r\n/**\r\n * Fast and simple cubic spline interpolant.\r\n *\r\n * It was derived from a Hermitian construction setting the first derivative\r\n * at each sample position to the linear slope between neighboring positions\r\n * over their parameter interval.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.CubicInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n\tthis._weightPrev = -0;\r\n\tthis._offsetPrev = -0;\r\n\tthis._weightNext = -0;\r\n\tthis._offsetNext = -0;\r\n\r\n};\r\n\r\nTHREE.CubicInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.CubicInterpolant,\r\n\r\n\tDefaultSettings_: {\r\n\r\n\t\tendingStart: \tTHREE.ZeroCurvatureEnding,\r\n\t\tendingEnd:\t\tTHREE.ZeroCurvatureEnding\r\n\r\n\t},\r\n\r\n\tintervalChanged_: function( i1, t0, t1 ) {\r\n\r\n\t\tvar pp = this.parameterPositions,\r\n\t\t\tiPrev = i1 - 2,\r\n\t\t\tiNext = i1 + 1,\r\n\r\n\t\t\ttPrev = pp[ iPrev ],\r\n\t\t\ttNext = pp[ iNext ];\r\n\r\n\t\tif ( tPrev === undefined ) {\r\n\r\n\t\t\tswitch ( this.getSettings_().endingStart ) {\r\n\r\n\t\t\t\tcase THREE.ZeroSlopeEnding:\r\n\r\n\t\t\t\t\t// f'(t0) = 0\r\n\t\t\t\t\tiPrev = i1;\r\n\t\t\t\t\ttPrev = 2 * t0 - t1;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.WrapAroundEnding:\r\n\r\n\t\t\t\t\t// use the other end of the curve\r\n\t\t\t\t\tiPrev = pp.length - 2;\r\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault: // ZeroCurvatureEnding\r\n\r\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\r\n\t\t\t\t\tiPrev = i1;\r\n\t\t\t\t\ttPrev = t1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( tNext === undefined ) {\r\n\r\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\r\n\r\n\t\t\t\tcase THREE.ZeroSlopeEnding:\r\n\r\n\t\t\t\t\t// f'(tN) = 0\r\n\t\t\t\t\tiNext = i1;\r\n\t\t\t\t\ttNext = 2 * t1 - t0;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.WrapAroundEnding:\r\n\r\n\t\t\t\t\t// use the other end of the curve\r\n\t\t\t\t\tiNext = 1;\r\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault: // ZeroCurvatureEnding\r\n\r\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\r\n\t\t\t\t\tiNext = i1 - 1;\r\n\t\t\t\t\ttNext = t0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar halfDt = ( t1 - t0 ) * 0.5,\r\n\t\t\tstride = this.valueSize;\r\n\r\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\r\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\r\n\t\tthis._offsetPrev = iPrev * stride;\r\n\t\tthis._offsetNext = iNext * stride;\r\n\r\n\t},\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\r\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\r\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\r\n\r\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\r\n\t\t\tpp = p * p,\r\n\t\t\tppp = pp * p;\r\n\r\n\t\t// evaluate polynomials\r\n\r\n\t\tvar sP =     - wP   * ppp   +         2 * wP    * pp    -          wP   * p;\r\n\t\tvar s0 = ( 1 + wP ) * ppp   + (-1.5 - 2 * wP )  * pp    + ( -0.5 + wP ) * p     + 1;\r\n\t\tvar s1 = (-1 - wN ) * ppp   + ( 1.5 +   wN   )  * pp    +    0.5        * p;\r\n\t\tvar sN =       wN   * ppp   -           wN      * pp;\r\n\r\n\t\t// combine data linearly\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] =\r\n\t\t\t\t\tsP * values[ oP + i ] +\r\n\t\t\t\t\ts0 * values[ o0 + i ] +\r\n\t\t\t\t\ts1 * values[ o1 + i ] +\r\n\t\t\t\t\tsN * values[ oN + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/DiscreteInterpolant.js\r\n\r\n/**\r\n *\r\n * Interpolant that evaluates to the sample value at the position preceeding\r\n * the parameter.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.DiscreteInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n};\r\n\r\nTHREE.DiscreteInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.DiscreteInterpolant,\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\treturn this.copySampleValue_( i1 - 1 );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/LinearInterpolant.js\r\n\r\n/**\r\n * @author tschw\r\n */\r\n\r\nTHREE.LinearInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n};\r\n\r\nTHREE.LinearInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.LinearInterpolant,\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toffset1 = i1 * stride,\r\n\t\t\toffset0 = offset1 - stride,\r\n\r\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\r\n\t\t\tweight0 = 1 - weight1;\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tresult[ i ] =\r\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\r\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/math/interpolants/QuaternionLinearInterpolant.js\r\n\r\n/**\r\n * Spherical linear unit quaternion interpolant.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.QuaternionLinearInterpolant = function(\r\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n\tTHREE.Interpolant.call(\r\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n};\r\n\r\nTHREE.QuaternionLinearInterpolant.prototype =\r\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\r\n\r\n\tconstructor: THREE.QuaternionLinearInterpolant,\r\n\r\n\tinterpolate_: function( i1, t0, t, t1 ) {\r\n\r\n\t\tvar result = this.resultBuffer,\r\n\t\t\tvalues = this.sampleValues,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toffset = i1 * stride,\r\n\r\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\r\n\r\n\t\tfor ( var end = offset + stride; offset !== end; offset += 4 ) {\r\n\r\n\t\t\tTHREE.Quaternion.slerpFlat( result, 0,\r\n\t\t\t\t\tvalues, offset - stride, values, offset, alpha );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/core/Clock.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Clock = function ( autoStart ) {\r\n\r\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.oldTime = 0;\r\n\tthis.elapsedTime = 0;\r\n\r\n\tthis.running = false;\r\n\r\n};\r\n\r\nTHREE.Clock.prototype = {\r\n\r\n\tconstructor: THREE.Clock,\r\n\r\n\tstart: function () {\r\n\r\n\t\tthis.startTime = ( performance || Date ).now();\r\n\r\n\t\tthis.oldTime = this.startTime;\r\n\t\tthis.running = true;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis.getElapsedTime();\r\n\t\tthis.running = false;\r\n\r\n\t},\r\n\r\n\tgetElapsedTime: function () {\r\n\r\n\t\tthis.getDelta();\r\n\t\treturn this.elapsedTime;\r\n\r\n\t},\r\n\r\n\tgetDelta: function () {\r\n\r\n\t\tvar diff = 0;\r\n\r\n\t\tif ( this.autoStart && ! this.running ) {\r\n\r\n\t\t\tthis.start();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.running ) {\r\n\r\n\t\t\tvar newTime = ( performance || Date ).now();\r\n\r\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\r\n\t\t\tthis.oldTime = newTime;\r\n\r\n\t\t\tthis.elapsedTime += diff;\r\n\r\n\t\t}\r\n\r\n\t\treturn diff;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/EventDispatcher.js\r\n\r\n/**\r\n * https://github.com/mrdoob/eventdispatcher.js/\r\n */\r\n\r\nTHREE.EventDispatcher = function () {};\r\n\r\nObject.assign( THREE.EventDispatcher.prototype, {\r\n\r\n\taddEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) this._listeners = {};\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] === undefined ) {\r\n\r\n\t\t\tlisteners[ type ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\r\n\t\t\tlisteners[ type ].push( listener );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\thasEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return false;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tremoveEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tvar index = listenerArray.indexOf( listener );\r\n\r\n\t\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\t\tlistenerArray.splice( index, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdispatchEvent: function ( event ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ event.type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tevent.target = this;\r\n\r\n\t\t\tvar array = [], i = 0;\r\n\t\t\tvar length = listenerArray.length;\r\n\r\n\t\t\tfor ( i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = listenerArray[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ].call( this, event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/core/Layers.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Layers = function () {\r\n\r\n\tthis.mask = 1;\r\n\r\n};\r\n\r\nTHREE.Layers.prototype = {\r\n\r\n\tconstructor: THREE.Layers,\r\n\r\n\tset: function ( channel ) {\r\n\r\n\t\tthis.mask = 1 << channel;\r\n\r\n\t},\r\n\r\n\tenable: function ( channel ) {\r\n\r\n\t\tthis.mask |= 1 << channel;\r\n\r\n\t},\r\n\r\n\ttoggle: function ( channel ) {\r\n\r\n\t\tthis.mask ^= 1 << channel;\r\n\r\n\t},\r\n\r\n\tdisable: function ( channel ) {\r\n\r\n\t\tthis.mask &= ~ ( 1 << channel );\r\n\r\n\t},\r\n\r\n\ttest: function ( layers ) {\r\n\r\n\t\treturn ( this.mask & layers.mask ) !== 0;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Raycaster.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author bhouston / http://clara.io/\r\n * @author stephomi / http://stephaneginier.com/\r\n */\r\n\r\n( function ( THREE ) {\r\n\r\n\tTHREE.Raycaster = function ( origin, direction, near, far ) {\r\n\r\n\t\tthis.ray = new THREE.Ray( origin, direction );\r\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\tthis.near = near || 0;\r\n\t\tthis.far = far || Infinity;\r\n\r\n\t\tthis.params = {\r\n\t\t\tMesh: {},\r\n\t\t\tLine: {},\r\n\t\t\tLOD: {},\r\n\t\t\tPoints: { threshold: 1 },\r\n\t\t\tSprite: {}\r\n\t\t};\r\n\r\n\t\tObject.defineProperties( this.params, {\r\n\t\t\tPointCloud: {\r\n\t\t\t\tget: function () {\r\n\t\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\r\n\t\t\t\t\treturn this.Points;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\tfunction ascSort( a, b ) {\r\n\r\n\t\treturn a.distance - b.distance;\r\n\r\n\t}\r\n\r\n\tfunction intersectObject( object, raycaster, intersects, recursive ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tobject.raycast( raycaster, intersects );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tvar children = object.children;\r\n\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tTHREE.Raycaster.prototype = {\r\n\r\n\t\tconstructor: THREE.Raycaster,\r\n\r\n\t\tlinePrecision: 1,\r\n\r\n\t\tset: function ( origin, direction ) {\r\n\r\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\t\tthis.ray.set( origin, direction );\r\n\r\n\t\t},\r\n\r\n\t\tsetFromCamera: function ( coords, camera ) {\r\n\r\n\t\t\tif ( camera instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\r\n\r\n\t\t\t} else if ( camera instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\t\tthis.ray.origin.set( coords.x, coords.y, - 1 ).unproject( camera );\r\n\t\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tintersectObject: function ( object, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tintersectObject( object, this, intersects, recursive );\r\n\r\n\t\t\tintersects.sort( ascSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t},\r\n\r\n\t\tintersectObjects: function ( objects, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tif ( Array.isArray( objects ) === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n\t\t\t\treturn intersects;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tintersects.sort( ascSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}( THREE ) );\r\n\r\n// File:src/core/Object3D.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author elephantatwork / www.elephantatwork.ch\r\n */\r\n\r\nTHREE.Object3D = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.Object3DIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Object3D';\r\n\r\n\tthis.parent = null;\r\n\tthis.children = [];\r\n\r\n\tthis.up = THREE.Object3D.DefaultUp.clone();\r\n\r\n\tvar position = new THREE.Vector3();\r\n\tvar rotation = new THREE.Euler();\r\n\tvar quaternion = new THREE.Quaternion();\r\n\tvar scale = new THREE.Vector3( 1, 1, 1 );\r\n\r\n\tfunction onRotationChange() {\r\n\r\n\t\tquaternion.setFromEuler( rotation, false );\r\n\r\n\t}\r\n\r\n\tfunction onQuaternionChange() {\r\n\r\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\r\n\r\n\t}\r\n\r\n\trotation.onChange( onRotationChange );\r\n\tquaternion.onChange( onQuaternionChange );\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tposition: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: position\r\n\t\t},\r\n\t\trotation: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: rotation\r\n\t\t},\r\n\t\tquaternion: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: quaternion\r\n\t\t},\r\n\t\tscale: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: scale\r\n\t\t},\r\n\t\tmodelViewMatrix: {\r\n\t\t\tvalue: new THREE.Matrix4()\r\n\t\t},\r\n\t\tnormalMatrix: {\r\n\t\t\tvalue: new THREE.Matrix3()\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.matrix = new THREE.Matrix4();\r\n\tthis.matrixWorld = new THREE.Matrix4();\r\n\r\n\tthis.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\r\n\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\tthis.layers = new THREE.Layers();\r\n\tthis.visible = true;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.receiveShadow = false;\r\n\r\n\tthis.frustumCulled = true;\r\n\tthis.renderOrder = 0;\r\n\r\n\tthis.userData = {};\r\n\r\n};\r\n\r\nTHREE.Object3D.DefaultUp = new THREE.Vector3( 0, 1, 0 );\r\nTHREE.Object3D.DefaultMatrixAutoUpdate = true;\r\n\r\nObject.assign( THREE.Object3D.prototype, THREE.EventDispatcher.prototype, {\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\r\n\r\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\r\n\t},\r\n\r\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\r\n\r\n\t},\r\n\r\n\tsetRotationFromEuler: function ( euler ) {\r\n\r\n\t\tthis.quaternion.setFromEuler( euler, true );\r\n\r\n\t},\r\n\r\n\tsetRotationFromMatrix: function ( m ) {\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m );\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\t// assumes q is normalized\r\n\r\n\t\tthis.quaternion.copy( q );\r\n\r\n\t},\r\n\r\n\trotateOnAxis: function () {\r\n\r\n\t\t// rotate object on axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar q1 = new THREE.Quaternion();\r\n\r\n\t\treturn function ( axis, angle ) {\r\n\r\n\t\t\tq1.setFromAxisAngle( axis, angle );\r\n\r\n\t\t\tthis.quaternion.multiply( q1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateOnAxis: function () {\r\n\r\n\t\t// translate object by distance along axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( axis, distance ) {\r\n\r\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\r\n\r\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlocalToWorld: function ( vector ) {\r\n\r\n\t\treturn vector.applyMatrix4( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tworldToLocal: function () {\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\t// This routine does not support objects with rotated and/or translated parent(s)\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\tm1.lookAt( vector, this.position, this.up );\r\n\r\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tadd: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.add( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object === this ) {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object instanceof THREE.Object3D ) {\r\n\r\n\t\t\tif ( object.parent !== null ) {\r\n\r\n\t\t\t\tobject.parent.remove( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.parent = this;\r\n\t\t\tobject.dispatchEvent( { type: 'added' } );\r\n\r\n\t\t\tthis.children.push( object );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tremove: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.remove( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar index = this.children.indexOf( object );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tobject.parent = null;\r\n\r\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\r\n\r\n\t\t\tthis.children.splice( index, 1 );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetObjectById: function ( id ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'id', id );\r\n\r\n\t},\r\n\r\n\tgetObjectByName: function ( name ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'name', name );\r\n\r\n\t},\r\n\r\n\tgetObjectByProperty: function ( name, value ) {\r\n\r\n\t\tif ( this[ name ] === value ) return this;\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar child = this.children[ i ];\r\n\t\t\tvar object = child.getObjectByProperty( name, value );\r\n\r\n\t\t\tif ( object !== undefined ) {\r\n\r\n\t\t\t\treturn object;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tgetWorldPosition: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tgetWorldQuaternion: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar scale = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Quaternion();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldRotation: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Euler();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldScale: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldDirection: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\traycast: function () {},\r\n\r\n\ttraverse: function ( callback ) {\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tvar children = this.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverse( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseVisible: function ( callback ) {\r\n\r\n\t\tif ( this.visible === false ) return;\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tvar children = this.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverseVisible( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseAncestors: function ( callback ) {\r\n\r\n\t\tvar parent = this.parent;\r\n\r\n\t\tif ( parent !== null ) {\r\n\r\n\t\t\tcallback( parent );\r\n\r\n\t\t\tparent.traverseAncestors( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrix: function () {\r\n\r\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\r\n\r\n\t\tthis.matrixWorldNeedsUpdate = true;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\r\n\r\n\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\r\n\r\n\t\t\tif ( this.parent === null ) {\r\n\r\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\t\t\tforce = true;\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\t// meta is '' when called from JSON.stringify\r\n\t\tvar isRootObject = ( meta === undefined || meta === '' );\r\n\r\n\t\tvar output = {};\r\n\r\n\t\t// meta is a hash used to collect geometries, materials.\r\n\t\t// not providing it implies that this is the root object\r\n\t\t// being serialized.\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\t// initialize meta obj\r\n\t\t\tmeta = {\r\n\t\t\t\tgeometries: {},\r\n\t\t\t\tmaterials: {},\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {}\r\n\t\t\t};\r\n\r\n\t\t\toutput.metadata = {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Object',\r\n\t\t\t\tgenerator: 'Object3D.toJSON'\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// standard Object3D serialization\r\n\r\n\t\tvar object = {};\r\n\r\n\t\tobject.uuid = this.uuid;\r\n\t\tobject.type = this.type;\r\n\r\n\t\tif ( this.name !== '' ) object.name = this.name;\r\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\r\n\t\tif ( this.castShadow === true ) object.castShadow = true;\r\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\r\n\t\tif ( this.visible === false ) object.visible = false;\r\n\r\n\t\tobject.matrix = this.matrix.toArray();\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.geometry !== undefined ) {\r\n\r\n\t\t\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\r\n\t\t\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON( meta );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.geometry = this.geometry.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.material !== undefined ) {\r\n\r\n\t\t\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\r\n\t\t\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON( meta );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.material = this.material.uuid;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( this.children.length > 0 ) {\r\n\r\n\t\t\tobject.children = [];\r\n\r\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\r\n\r\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\tvar geometries = extractFromCache( meta.geometries );\r\n\t\t\tvar materials = extractFromCache( meta.materials );\r\n\t\t\tvar textures = extractFromCache( meta.textures );\r\n\t\t\tvar images = extractFromCache( meta.images );\r\n\r\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\r\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\r\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\r\n\t\t\tif ( images.length > 0 ) output.images = images;\r\n\r\n\t\t}\r\n\r\n\t\toutput.object = object;\r\n\r\n\t\treturn output;\r\n\r\n\t\t// extract data from the cache hash\r\n\t\t// remove metadata on each item\r\n\t\t// and return as array\r\n\t\tfunction extractFromCache ( cache ) {\r\n\r\n\t\t\tvar values = [];\r\n\t\t\tfor ( var key in cache ) {\r\n\r\n\t\t\t\tvar data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function ( recursive ) {\r\n\r\n\t\treturn new this.constructor().copy( this, recursive );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tif ( recursive === undefined ) recursive = true;\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.up.copy( source.up );\r\n\r\n\t\tthis.position.copy( source.position );\r\n\t\tthis.quaternion.copy( source.quaternion );\r\n\t\tthis.scale.copy( source.scale );\r\n\r\n\t\tthis.matrix.copy( source.matrix );\r\n\t\tthis.matrixWorld.copy( source.matrixWorld );\r\n\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\r\n\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\tthis.castShadow = source.castShadow;\r\n\t\tthis.receiveShadow = source.receiveShadow;\r\n\r\n\t\tthis.frustumCulled = source.frustumCulled;\r\n\t\tthis.renderOrder = source.renderOrder;\r\n\r\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = source.children[ i ];\r\n\t\t\t\tthis.add( child.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nTHREE.Object3DIdCount = 0;\r\n\r\n// File:src/core/Face3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Face3 = function ( a, b, c, normal, color, materialIndex ) {\r\n\r\n\tthis.a = a;\r\n\tthis.b = b;\r\n\tthis.c = c;\r\n\r\n\tthis.normal = normal instanceof THREE.Vector3 ? normal : new THREE.Vector3();\r\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\r\n\r\n\tthis.color = color instanceof THREE.Color ? color : new THREE.Color();\r\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\r\n\r\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\r\n};\r\n\r\nTHREE.Face3.prototype = {\r\n\r\n\tconstructor: THREE.Face3,\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.a = source.a;\r\n\t\tthis.b = source.b;\r\n\t\tthis.c = source.c;\r\n\r\n\t\tthis.normal.copy( source.normal );\r\n\t\tthis.color.copy( source.color );\r\n\r\n\t\tthis.materialIndex = source.materialIndex;\r\n\r\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/BufferAttribute.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferAttribute = function ( array, itemSize, normalized ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.array = array;\r\n\tthis.itemSize = itemSize;\r\n\r\n\tthis.dynamic = false;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\tthis.normalized = normalized === true;\r\n\r\n};\r\n\r\nTHREE.BufferAttribute.prototype = {\r\n\r\n\tconstructor: THREE.BufferAttribute,\r\n\r\n\tget count() {\r\n\r\n\t\treturn this.array.length / this.itemSize;\r\n\r\n\t},\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tthis.dynamic = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.itemSize = source.itemSize;\r\n\r\n\t\tthis.dynamic = source.dynamic;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.itemSize;\r\n\t\tindex2 *= attribute.itemSize;\r\n\r\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyArray: function ( array ) {\r\n\r\n\t\tthis.array.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyColorsArray: function ( colors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar color = colors[ i ];\r\n\r\n\t\t\tif ( color === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\r\n\t\t\t\tcolor = new THREE.Color();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = color.r;\r\n\t\t\tarray[ offset ++ ] = color.g;\r\n\t\t\tarray[ offset ++ ] = color.b;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyIndicesArray: function ( indices ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar index = indices[ i ];\r\n\r\n\t\t\tarray[ offset ++ ] = index.a;\r\n\t\t\tarray[ offset ++ ] = index.b;\r\n\t\t\tarray[ offset ++ ] = index.c;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector2sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector3sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector4sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\t\t\tarray[ offset ++ ] = vector.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize ];\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.array[ index * this.itemSize ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 1 ];\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 2 ];\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 3 ];\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\t\tthis.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.Int8Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int8Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint8Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8ClampedAttribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint8ClampedArray( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Int16Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int16Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint16Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint16Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Int32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Float32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Float32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Float64Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Float64Array( array ), itemSize );\r\n\r\n};\r\n\r\n\r\n// Deprecated\r\n\r\nTHREE.DynamicBufferAttribute = function ( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.' );\r\n\treturn new THREE.BufferAttribute( array, itemSize ).setDynamic( true );\r\n\r\n};\r\n\r\n// File:src/core/InstancedBufferAttribute.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedBufferAttribute = function ( array, itemSize, meshPerAttribute ) {\r\n\r\n\tTHREE.BufferAttribute.call( this, array, itemSize );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n};\r\n\r\nTHREE.InstancedBufferAttribute.prototype = Object.create( THREE.BufferAttribute.prototype );\r\nTHREE.InstancedBufferAttribute.prototype.constructor = THREE.InstancedBufferAttribute;\r\n\r\nTHREE.InstancedBufferAttribute.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.BufferAttribute.prototype.copy.call( this, source );\r\n\r\n\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/core/InterleavedBuffer.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InterleavedBuffer = function ( array, stride ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.array = array;\r\n\tthis.stride = stride;\r\n\r\n\tthis.dynamic = false;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n};\r\n\r\nTHREE.InterleavedBuffer.prototype = {\r\n\r\n\tconstructor: THREE.InterleavedBuffer,\r\n\r\n\tget length () {\r\n\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tget count () {\r\n\r\n\t\treturn this.array.length / this.stride;\r\n\r\n\t},\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tthis.dynamic = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.stride = source.stride;\r\n\t\tthis.dynamic = source.dynamic;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.stride;\r\n\t\tindex2 *= attribute.stride;\r\n\r\n\t\tfor ( var i = 0, l = this.stride; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/InstancedInterleavedBuffer.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedInterleavedBuffer = function ( array, stride, meshPerAttribute ) {\r\n\r\n\tTHREE.InterleavedBuffer.call( this, array, stride );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n};\r\n\r\nTHREE.InstancedInterleavedBuffer.prototype = Object.create( THREE.InterleavedBuffer.prototype );\r\nTHREE.InstancedInterleavedBuffer.prototype.constructor = THREE.InstancedInterleavedBuffer;\r\n\r\nTHREE.InstancedInterleavedBuffer.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.InterleavedBuffer.prototype.copy.call( this, source );\r\n\r\n\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/core/InterleavedBufferAttribute.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InterleavedBufferAttribute = function ( interleavedBuffer, itemSize, offset ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.data = interleavedBuffer;\r\n\tthis.itemSize = itemSize;\r\n\tthis.offset = offset;\r\n\r\n};\r\n\r\n\r\nTHREE.InterleavedBufferAttribute.prototype = {\r\n\r\n\tconstructor: THREE.InterleavedBufferAttribute,\r\n\r\n\tget length() {\r\n\r\n\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tget count() {\r\n\r\n\t\treturn this.data.count;\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\t\tthis.data.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Geometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author kile / http://kile.stravaganza.org/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\nTHREE.Geometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Geometry';\r\n\r\n\tthis.vertices = [];\r\n\tthis.colors = [];\r\n\tthis.faces = [];\r\n\tthis.faceVertexUvs = [ [] ];\r\n\r\n\tthis.morphTargets = [];\r\n\tthis.morphNormals = [];\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\tthis.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.elementsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.lineDistancesNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n};\r\n\r\nObject.assign( THREE.Geometry.prototype, THREE.EventDispatcher.prototype, {\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertex.applyMatrix4( matrix );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.verticesNeedUpdate = true;\r\n\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function () {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateX( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationX( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateY( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationY( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateZ( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationZ( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function () {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function translate( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeTranslation( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tscale: function () {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function scale( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeScale( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar obj;\r\n\r\n\t\treturn function lookAt( vector ) {\r\n\r\n\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\r\n\t\t\tobj.lookAt( vector );\r\n\r\n\t\t\tobj.updateMatrix();\r\n\r\n\t\t\tthis.applyMatrix( obj.matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfromBufferGeometry: function ( geometry ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\tvar positions = attributes.position.array;\r\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\r\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\r\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\r\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\r\n\r\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\r\n\r\n\t\tvar tempNormals = [];\r\n\t\tvar tempUVs = [];\r\n\t\tvar tempUVs2 = [];\r\n\r\n\t\tfor ( var i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\r\n\r\n\t\t\tscope.vertices.push( new THREE.Vector3( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] ) );\r\n\r\n\t\t\tif ( normals !== undefined ) {\r\n\r\n\t\t\t\ttempNormals.push( new THREE.Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( colors !== undefined ) {\r\n\r\n\t\t\t\tscope.colors.push( new THREE.Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\ttempUVs.push( new THREE.Vector2( uvs[ j ], uvs[ j + 1 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs2 !== undefined ) {\r\n\r\n\t\t\t\ttempUVs2.push( new THREE.Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction addFace( a, b, c, materialIndex ) {\r\n\r\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\r\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\r\n\r\n\t\t\tvar face = new THREE.Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\r\n\r\n\t\t\tscope.faces.push( face );\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs2 !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( indices !== undefined ) {\r\n\r\n\t\t\tvar groups = geometry.groups;\r\n\r\n\t\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\r\n\r\n\t\t\t\t\tvar group = groups[ i ];\r\n\r\n\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex  );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\r\n\r\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\r\n\r\n\t\t\t\taddFace( i, i + 1, i + 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeFaceNormals();\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tvar offset = this.boundingBox.center().negate();\r\n\r\n\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\r\n\t\treturn offset;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tthis.computeBoundingSphere();\r\n\r\n\t\tvar center = this.boundingSphere.center;\r\n\t\tvar radius = this.boundingSphere.radius;\r\n\r\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\t\tmatrix.set(\r\n\t\t\ts, 0, 0, - s * center.x,\r\n\t\t\t0, s, 0, - s * center.y,\r\n\t\t\t0, 0, s, - s * center.z,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\r\n\t\tthis.applyMatrix( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\r\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ f ];\r\n\r\n\t\t\tvar vA = this.vertices[ face.a ];\r\n\t\t\tvar vB = this.vertices[ face.b ];\r\n\t\t\tvar vC = this.vertices[ face.c ];\r\n\r\n\t\t\tcb.subVectors( vC, vB );\r\n\t\t\tab.subVectors( vA, vB );\r\n\t\t\tcb.cross( ab );\r\n\r\n\t\t\tcb.normalize();\r\n\r\n\t\t\tface.normal.copy( cb );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function ( areaWeighted ) {\r\n\r\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\r\n\r\n\t\tvar v, vl, f, fl, face, vertices;\r\n\r\n\t\tvertices = new Array( this.vertices.length );\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tif ( areaWeighted ) {\r\n\r\n\t\t\t// vertex normals weighted by triangle areas\r\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\r\n\t\t\tvar vA, vB, vC;\r\n\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvA = this.vertices[ face.a ];\r\n\t\t\t\tvB = this.vertices[ face.b ];\r\n\t\t\t\tvC = this.vertices[ face.c ];\r\n\r\n\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\tvertices[ face.a ].add( cb );\r\n\t\t\t\tvertices[ face.b ].add( cb );\r\n\t\t\t\tvertices[ face.c ].add( cb );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvertices[ face.a ].add( face.normal );\r\n\t\t\t\tvertices[ face.b ].add( face.normal );\r\n\t\t\t\tvertices[ face.c ].add( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ].normalize();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\r\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\r\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.faces.length > 0 ) {\r\n\r\n\t\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeMorphNormals: function () {\r\n\r\n\t\tvar i, il, f, fl, face;\r\n\r\n\t\t// save original normals\r\n\t\t// - create temp variables on first access\r\n\t\t//   otherwise just copy (for faster repeated calls)\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tif ( ! face.__originalFaceNormal ) {\r\n\r\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\r\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// use temp geometry to compute face and vertex normals for each morph\r\n\r\n\t\tvar tmpGeo = new THREE.Geometry();\r\n\t\ttmpGeo.faces = this.faces;\r\n\r\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\t// create on first access\r\n\r\n\t\t\tif ( ! this.morphNormals[ i ] ) {\r\n\r\n\t\t\t\tthis.morphNormals[ i ] = {};\r\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\r\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\r\n\r\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\r\n\t\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tfaceNormal = new THREE.Vector3();\r\n\t\t\t\t\tvertexNormals = { a: new THREE.Vector3(), b: new THREE.Vector3(), c: new THREE.Vector3() };\r\n\r\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\r\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar morphNormals = this.morphNormals[ i ];\r\n\r\n\t\t\t// set vertices to morph target\r\n\r\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\r\n\t\t\t// compute morph normals\r\n\r\n\t\t\ttmpGeo.computeFaceNormals();\r\n\t\t\ttmpGeo.computeVertexNormals();\r\n\r\n\t\t\t// store morph normals\r\n\r\n\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\r\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\r\n\r\n\t\t\t\tfaceNormal.copy( face.normal );\r\n\r\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore original normals\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tface.normal = face.__originalFaceNormal;\r\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Geometry: .computeTangents() has been removed.' );\r\n\r\n\t},\r\n\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tvar d = 0;\r\n\t\tvar vertices = this.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( i > 0 ) {\r\n\r\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.lineDistances[ i ] = d;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingBox.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.Geometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar normalMatrix,\r\n\t\tvertexOffset = this.vertices.length,\r\n\t\tvertices1 = this.vertices,\r\n\t\tvertices2 = geometry.vertices,\r\n\t\tfaces1 = this.faces,\r\n\t\tfaces2 = geometry.faces,\r\n\t\tuvs1 = this.faceVertexUvs[ 0 ],\r\n\t\tuvs2 = geometry.faceVertexUvs[ 0 ];\r\n\r\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\r\n\t\tif ( matrix !== undefined ) {\r\n\r\n\t\t\tnormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// vertices\r\n\r\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = vertices2[ i ];\r\n\r\n\t\t\tvar vertexCopy = vertex.clone();\r\n\r\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\r\n\t\t\tvertices1.push( vertexCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// faces\r\n\r\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\r\n\t\t\tfaceVertexNormals = face.vertexNormals,\r\n\t\t\tfaceVertexColors = face.vertexColors;\r\n\r\n\t\t\tfaceCopy = new THREE.Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n\t\t\tfaceCopy.normal.copy( face.normal );\r\n\r\n\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\r\n\r\n\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.color.copy( face.color );\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tcolor = faceVertexColors[ j ];\r\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\r\n\t\t\tfaces1.push( faceCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// uvs\r\n\r\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\r\n\r\n\t\t\tif ( uv === undefined ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvs1.push( uvCopy );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmergeMesh: function ( mesh ) {\r\n\r\n\t\tif ( mesh instanceof THREE.Mesh === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\r\n\r\n\t\tthis.merge( mesh.geometry, mesh.matrix );\r\n\r\n\t},\r\n\r\n\t/*\r\n\t * Checks for duplicate vertices with hashmap.\r\n\t * Duplicated vertices are removed\r\n\t * and faces' vertices are updated.\r\n\t */\r\n\r\n\tmergeVertices: function () {\r\n\r\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\r\n\t\tvar unique = [], changes = [];\r\n\r\n\t\tvar v, key;\r\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\r\n\t\tvar precision = Math.pow( 10, precisionPoints );\r\n\t\tvar i, il, face;\r\n\t\tvar indices, j, jl;\r\n\r\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tv = this.vertices[ i ];\r\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\r\n\t\t\tif ( verticesMap[ key ] === undefined ) {\r\n\r\n\t\t\t\tverticesMap[ key ] = i;\r\n\t\t\t\tunique.push( this.vertices[ i ] );\r\n\t\t\t\tchanges[ i ] = unique.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// if faces are completely degenerate after merging vertices, we\r\n\t\t// have to remove them from the geometry.\r\n\t\tvar faceIndicesToRemove = [];\r\n\r\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = this.faces[ i ];\r\n\r\n\t\t\tface.a = changes[ face.a ];\r\n\t\t\tface.b = changes[ face.b ];\r\n\t\t\tface.c = changes[ face.c ];\r\n\r\n\t\t\tindices = [ face.a, face.b, face.c ];\r\n\r\n\t\t\tvar dupIndex = - 1;\r\n\r\n\t\t\t// if any duplicate vertices are found in a Face3\r\n\t\t\t// we have to remove the face as nothing can be saved\r\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\r\n\r\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\r\n\r\n\t\t\t\t\tdupIndex = n;\r\n\t\t\t\t\tfaceIndicesToRemove.push( i );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\r\n\t\t\tvar idx = faceIndicesToRemove[ i ];\r\n\r\n\t\t\tthis.faces.splice( idx, 1 );\r\n\r\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Use unique set of vertices\r\n\r\n\t\tvar diff = this.vertices.length - unique.length;\r\n\t\tthis.vertices = unique;\r\n\t\treturn diff;\r\n\r\n\t},\r\n\r\n\tsortFacesByMaterialIndex: function () {\r\n\r\n\t\tvar faces = this.faces;\r\n\t\tvar length = faces.length;\r\n\r\n\t\t// tag faces\r\n\r\n\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tfaces[ i ]._id = i;\r\n\r\n\t\t}\r\n\r\n\t\t// sort faces\r\n\r\n\t\tfunction materialIndexSort( a, b ) {\r\n\r\n\t\t\treturn a.materialIndex - b.materialIndex;\r\n\r\n\t\t}\r\n\r\n\t\tfaces.sort( materialIndexSort );\r\n\r\n\t\t// sort uvs\r\n\r\n\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\r\n\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\r\n\r\n\t\tvar newUvs1, newUvs2;\r\n\r\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\r\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\r\n\r\n\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tvar id = faces[ i ]._id;\r\n\r\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\r\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\r\n\r\n\t\t}\r\n\r\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\r\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Geometry',\r\n\t\t\t\tgenerator: 'Geometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Geometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tvar parameters = this.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tvar vertices = [];\r\n\r\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = [];\r\n\t\tvar normals = [];\r\n\t\tvar normalsHash = {};\r\n\t\tvar colors = [];\r\n\t\tvar colorsHash = {};\r\n\t\tvar uvs = [];\r\n\t\tvar uvsHash = {};\r\n\r\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\r\n\t\t\tvar hasMaterial = true;\r\n\t\t\tvar hasFaceUv = false; // deprecated\r\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\r\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\r\n\r\n\t\t\tvar faceType = 0;\r\n\r\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\r\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\r\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\r\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\r\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\r\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\r\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\r\n\t\t\tfaces.push( faceType );\r\n\t\t\tfaces.push( face.a, face.b, face.c );\r\n\t\t\tfaces.push( face.materialIndex );\r\n\r\n\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\tvar vertexColors = face.vertexColors;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction setBit( value, position, enabled ) {\r\n\r\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getNormalIndex( normal ) {\r\n\r\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\r\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getColorIndex( color ) {\r\n\r\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\r\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcolorsHash[ hash ] = colors.length;\r\n\t\t\tcolors.push( color.getHex() );\r\n\r\n\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getUvIndex( uv ) {\r\n\r\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\r\n\r\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = {};\r\n\r\n\t\tdata.data.vertices = vertices;\r\n\t\tdata.data.normals = normals;\r\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\r\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\r\n\t\tdata.data.faces = faces;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\t/*\r\n\t\t// Handle primitives\r\n\r\n\t\tvar parameters = this.parameters;\r\n\r\n\t\tif ( parameters !== undefined ) {\r\n\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tvalues.push( parameters[ key ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar geometry = Object.create( this.constructor.prototype );\r\n\t\t\tthis.constructor.apply( geometry, values );\r\n\t\t\treturn geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\t\t*/\r\n\r\n\t\treturn new THREE.Geometry().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.vertices = [];\r\n\t\tthis.faces = [];\r\n\t\tthis.faceVertexUvs = [ [] ];\r\n\r\n\t\tvar vertices = source.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = source.faces;\r\n\r\n\t\tfor ( var i = 0, il = faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.faces.push( faces[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\r\n\r\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\r\n\r\n\t\t\t\tfor ( var k = 0, kl = uvs.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\tvar uv = uvs[ k ];\r\n\r\n\t\t\t\t\tuvsCopy.push( uv.clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nTHREE.GeometryIdCount = 0;\r\n\r\n// File:src/core/DirectGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.DirectGeometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'DirectGeometry';\r\n\r\n\tthis.indices = [];\r\n\tthis.vertices = [];\r\n\tthis.normals = [];\r\n\tthis.colors = [];\r\n\tthis.uvs = [];\r\n\tthis.uvs2 = [];\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.morphTargets = {};\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\t// this.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n};\r\n\r\nObject.assign( THREE.DirectGeometry.prototype, THREE.EventDispatcher.prototype, {\r\n\r\n\tcomputeBoundingBox: THREE.Geometry.prototype.computeBoundingBox,\r\n\tcomputeBoundingSphere: THREE.Geometry.prototype.computeBoundingSphere,\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tconsole.warn( 'THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.' );\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tconsole.warn( 'THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.' );\r\n\r\n\t},\r\n\r\n\tcomputeGroups: function ( geometry ) {\r\n\r\n\t\tvar group;\r\n\t\tvar groups = [];\r\n\t\tvar materialIndex;\r\n\r\n\t\tvar faces = geometry.faces;\r\n\r\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\t// materials\r\n\r\n\t\t\tif ( face.materialIndex !== materialIndex ) {\r\n\r\n\t\t\t\tmaterialIndex = face.materialIndex;\r\n\r\n\t\t\t\tif ( group !== undefined ) {\r\n\r\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\t\t\tgroups.push( group );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgroup = {\r\n\t\t\t\t\tstart: i * 3,\r\n\t\t\t\t\tmaterialIndex: materialIndex\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( group !== undefined ) {\r\n\r\n\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\tgroups.push( group );\r\n\r\n\t\t}\r\n\r\n\t\tthis.groups = groups;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tvar faces = geometry.faces;\r\n\t\tvar vertices = geometry.vertices;\r\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\r\n\r\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\r\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\r\n\r\n\t\t// morphs\r\n\r\n\t\tvar morphTargets = geometry.morphTargets;\r\n\t\tvar morphTargetsLength = morphTargets.length;\r\n\r\n\t\tvar morphTargetsPosition;\r\n\r\n\t\tif ( morphTargetsLength > 0 ) {\r\n\r\n\t\t\tmorphTargetsPosition = [];\r\n\r\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsPosition[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\r\n\r\n\t\t}\r\n\r\n\t\tvar morphNormals = geometry.morphNormals;\r\n\t\tvar morphNormalsLength = morphNormals.length;\r\n\r\n\t\tvar morphTargetsNormal;\r\n\r\n\t\tif ( morphNormalsLength > 0 ) {\r\n\r\n\t\t\tmorphTargetsNormal = [];\r\n\r\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsNormal[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\r\n\r\n\t\t}\r\n\r\n\t\t// skins\r\n\r\n\t\tvar skinIndices = geometry.skinIndices;\r\n\t\tvar skinWeights = geometry.skinWeights;\r\n\r\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\r\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\r\n\r\n\t\t//\r\n\r\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\r\n\r\n\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar normal = face.normal;\r\n\r\n\t\t\t\tthis.normals.push( normal, normal, normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar vertexColors = face.vertexColors;\r\n\r\n\t\t\tif ( vertexColors.length === 3 ) {\r\n\r\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar color = face.color;\r\n\r\n\t\t\t\tthis.colors.push( color, color, color );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv === true ) {\r\n\r\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\r\n\r\n\t\t\t\t\tthis.uvs.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv2 === true ) {\r\n\r\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\r\n\r\n\t\t\t\t\tthis.uvs2.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// morphs\r\n\r\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\r\n\r\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\r\n\r\n\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\r\n\r\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\r\n\r\n\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// skins\r\n\r\n\t\t\tif ( hasSkinIndices ) {\r\n\r\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasSkinWeights ) {\r\n\r\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeGroups( geometry );\r\n\r\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/core/BufferGeometry.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'BufferGeometry';\r\n\r\n\tthis.index = null;\r\n\tthis.attributes = {};\r\n\r\n\tthis.morphAttributes = {};\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\tthis.drawRange = { start: 0, count: Infinity };\r\n\r\n};\r\n\r\nObject.assign( THREE.BufferGeometry.prototype, THREE.EventDispatcher.prototype, {\r\n\r\n\tgetIndex: function () {\r\n\r\n\t\treturn this.index;\r\n\r\n\t},\r\n\r\n\tsetIndex: function ( index ) {\r\n\r\n\t\tthis.index = index;\r\n\r\n\t},\r\n\r\n\taddAttribute: function ( name, attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.BufferAttribute === false && attribute instanceof THREE.InterleavedBufferAttribute === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\r\n\t\t\tthis.addAttribute( name, new THREE.BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( name === 'index' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\r\n\t\t\tthis.setIndex( attribute );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.attributes[ name ] = attribute;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetAttribute: function ( name ) {\r\n\r\n\t\treturn this.attributes[ name ];\r\n\r\n\t},\r\n\r\n\tremoveAttribute: function ( name ) {\r\n\r\n\t\tdelete this.attributes[ name ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddGroup: function ( start, count, materialIndex ) {\r\n\r\n\t\tthis.groups.push( {\r\n\r\n\t\t\tstart: start,\r\n\t\t\tcount: count,\r\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tclearGroups: function () {\r\n\r\n\t\tthis.groups = [];\r\n\r\n\t},\r\n\r\n\tsetDrawRange: function ( start, count ) {\r\n\r\n\t\tthis.drawRange.start = start;\r\n\t\tthis.drawRange.count = count;\r\n\r\n\t},\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar position = this.attributes.position;\r\n\r\n\t\tif ( position !== undefined ) {\r\n\r\n\t\t\tmatrix.applyToVector3Array( position.array );\r\n\t\t\tposition.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tvar normal = this.attributes.normal;\r\n\r\n\t\tif ( normal !== undefined ) {\r\n\r\n\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t\tnormalMatrix.applyToVector3Array( normal.array );\r\n\t\t\tnormal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\trotateX: function () {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateX( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationX( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateY( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationY( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateZ( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationZ( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function () {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function translate( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeTranslation( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tscale: function () {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function scale( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeScale( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar obj;\r\n\r\n\t\treturn function lookAt( vector ) {\r\n\r\n\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\r\n\t\t\tobj.lookAt( vector );\r\n\r\n\t\t\tobj.updateMatrix();\r\n\r\n\t\t\tthis.applyMatrix( obj.matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tvar offset = this.boundingBox.center().negate();\r\n\r\n\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\r\n\t\treturn offset;\r\n\r\n\t},\r\n\r\n\tsetFromObject: function ( object ) {\r\n\r\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( object instanceof THREE.Points || object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar positions = new THREE.Float32Attribute( geometry.vertices.length * 3, 3 );\r\n\t\t\tvar colors = new THREE.Float32Attribute( geometry.colors.length * 3, 3 );\r\n\r\n\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\r\n\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\r\n\r\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\r\n\r\n\t\t\t\tvar lineDistances = new THREE.Float32Attribute( geometry.lineDistances.length, 1 );\r\n\r\n\t\t\t\tthis.addAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\tthis.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateFromObject: function ( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tvar direct = geometry.__directGeometry;\r\n\r\n\t\t\tif ( direct === undefined ) {\r\n\r\n\t\t\t\treturn this.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t\tgeometry = direct;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.verticesNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.position;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.normalsNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.normal;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colorsNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.color;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvsNeedUpdate ) {\r\n\r\n\t\t\tvar attribute = this.attributes.uv;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\r\n\r\n\t\t\tvar attribute = this.attributes.lineDistance;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.groupsNeedUpdate ) {\r\n\r\n\t\t\tgeometry.computeGroups( object.geometry );\r\n\t\t\tthis.groups = geometry.groups;\r\n\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tgeometry.__directGeometry = new THREE.DirectGeometry().fromGeometry( geometry );\r\n\r\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\r\n\r\n\t},\r\n\r\n\tfromDirectGeometry: function ( geometry ) {\r\n\r\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\r\n\r\n\t\tif ( geometry.normals.length > 0 ) {\r\n\r\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\r\n\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colors.length > 0 ) {\r\n\r\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\r\n\t\t\tthis.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs.length > 0 ) {\r\n\r\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\r\n\t\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs2.length > 0 ) {\r\n\r\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\r\n\t\t\tthis.addAttribute( 'uv2', new THREE.BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.indices.length > 0 ) {\r\n\r\n\t\t\tvar TypeArray = geometry.vertices.length > 65535 ? Uint32Array : Uint16Array;\r\n\t\t\tvar indices = new TypeArray( geometry.indices.length * 3 );\r\n\t\t\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ).copyIndicesArray( geometry.indices ) );\r\n\r\n\t\t}\r\n\r\n\t\t// groups\r\n\r\n\t\tthis.groups = geometry.groups;\r\n\r\n\t\t// morphs\r\n\r\n\t\tfor ( var name in geometry.morphTargets ) {\r\n\r\n\t\t\tvar array = [];\r\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\r\n\r\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar morphTarget = morphTargets[ i ];\r\n\r\n\t\t\t\tvar attribute = new THREE.Float32Attribute( morphTarget.length * 3, 3 );\r\n\r\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphAttributes[ name ] = array;\r\n\r\n\t\t}\r\n\r\n\t\t// skinning\r\n\r\n\t\tif ( geometry.skinIndices.length > 0 ) {\r\n\r\n\t\t\tvar skinIndices = new THREE.Float32Attribute( geometry.skinIndices.length * 4, 4 );\r\n\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.skinWeights.length > 0 ) {\r\n\r\n\t\t\tvar skinWeights = new THREE.Float32Attribute( geometry.skinWeights.length * 4, 4 );\r\n\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t}\r\n\r\n\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\tif ( positions !== undefined ) {\r\n\r\n\t\t\tthis.boundingBox.setFromArray( positions );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.boundingBox.makeEmpty();\r\n\r\n\t\t}\r\n\r\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\treturn function computeBoundingSphere() {\r\n\r\n\t\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\t\tif ( positions ) {\r\n\r\n\t\t\t\tvar center = this.boundingSphere.center;\r\n\r\n\t\t\t\tbox.setFromArray( positions );\r\n\t\t\t\tbox.center( center );\r\n\r\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\r\n\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\r\n\r\n\t\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\t// backwards compatibility\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tvar index = this.index;\r\n\t\tvar attributes = this.attributes;\r\n\t\tvar groups = this.groups;\r\n\r\n\t\tif ( attributes.position ) {\r\n\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( attributes.normal === undefined ) {\r\n\r\n\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( positions.length ), 3 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// reset existing normals to zero\r\n\r\n\t\t\t\tvar array = attributes.normal.array;\r\n\r\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tarray[ i ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar normals = attributes.normal.array;\r\n\r\n\t\t\tvar vA, vB, vC,\r\n\r\n\t\t\tpA = new THREE.Vector3(),\r\n\t\t\tpB = new THREE.Vector3(),\r\n\t\t\tpC = new THREE.Vector3(),\r\n\r\n\t\t\tcb = new THREE.Vector3(),\r\n\t\t\tab = new THREE.Vector3();\r\n\r\n\t\t\t// indexed elements\r\n\r\n\t\t\tif ( index ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\tif ( groups.length === 0 ) {\r\n\r\n\t\t\t\t\tthis.addGroup( 0, indices.length );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\r\n\r\n\t\t\t\t\tvar group = groups[ j ];\r\n\r\n\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\r\n\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\r\n\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\r\n\r\n\t\t\t\t\t\tpA.fromArray( positions, vA );\r\n\t\t\t\t\t\tpB.fromArray( positions, vB );\r\n\t\t\t\t\t\tpC.fromArray( positions, vC );\r\n\r\n\t\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\t\tnormals[ vA ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vB ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vC ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\r\n\r\n\t\t\t\t\tpA.fromArray( positions, i );\r\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\r\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\r\n\r\n\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\tnormals[ i ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.normalizeNormals();\r\n\r\n\t\t\tattributes.normal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, offset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\r\n\r\n\t\t\tvar attribute1 = attributes[ key ];\r\n\t\t\tvar attributeArray1 = attribute1.array;\r\n\r\n\t\t\tvar attribute2 = geometry.attributes[ key ];\r\n\t\t\tvar attributeArray2 = attribute2.array;\r\n\r\n\t\t\tvar attributeSize = attribute2.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\r\n\r\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalizeNormals: function () {\r\n\r\n\t\tvar normals = this.attributes.normal.array;\r\n\r\n\t\tvar x, y, z, n;\r\n\r\n\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\r\n\r\n\t\t\tx = normals[ i ];\r\n\t\t\ty = normals[ i + 1 ];\r\n\t\t\tz = normals[ i + 2 ];\r\n\r\n\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\r\n\r\n\t\t\tnormals[ i ] *= n;\r\n\t\t\tnormals[ i + 1 ] *= n;\r\n\t\t\tnormals[ i + 2 ] *= n;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoNonIndexed: function () {\r\n\r\n\t\tif ( this.index === null ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar geometry2 = new THREE.BufferGeometry();\r\n\r\n\t\tvar indices = this.index.array;\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ name ];\r\n\r\n\t\t\tvar array = attribute.array;\r\n\t\t\tvar itemSize = attribute.itemSize;\r\n\r\n\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\r\n\r\n\t\t\tvar index = 0, index2 = 0;\r\n\r\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tindex = indices[ i ] * itemSize;\r\n\r\n\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\r\n\r\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry2.addAttribute( name, new THREE.BufferAttribute( array2, itemSize ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry2;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard BufferGeometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tvar parameters = this.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = { attributes: {} };\r\n\r\n\t\tvar index = this.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tvar array = Array.prototype.slice.call( index.array );\r\n\r\n\t\t\tdata.data.index = {\r\n\t\t\t\ttype: index.array.constructor.name,\r\n\t\t\t\tarray: array\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\r\n\t\t\tvar array = Array.prototype.slice.call( attribute.array );\r\n\r\n\t\t\tdata.data.attributes[ key ] = {\r\n\t\t\t\titemSize: attribute.itemSize,\r\n\t\t\t\ttype: attribute.array.constructor.name,\r\n\t\t\t\tarray: array,\r\n\t\t\t\tnormalized: attribute.normalized\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = this.groups;\r\n\r\n\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar boundingSphere = this.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tdata.data.boundingSphere = {\r\n\t\t\t\tcenter: boundingSphere.center.toArray(),\r\n\t\t\t\tradius: boundingSphere.radius\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\t/*\r\n\t\t// Handle primitives\r\n\r\n\t\tvar parameters = this.parameters;\r\n\r\n\t\tif ( parameters !== undefined ) {\r\n\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tvalues.push( parameters[ key ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar geometry = Object.create( this.constructor.prototype );\r\n\t\t\tthis.constructor.apply( geometry, values );\r\n\t\t\treturn geometry;\r\n\r\n\t\t}\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\t\t*/\r\n\r\n\t\treturn new THREE.BufferGeometry().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tvar index = source.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tthis.setIndex( index.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = source.attributes;\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ name ];\r\n\t\t\tthis.addAttribute( name, attribute.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = source.groups;\r\n\r\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar group = groups[ i ];\r\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\nTHREE.BufferGeometry.MaxIndex = 65535;\r\n\r\n// File:src/core/InstancedBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedBufferGeometry = function () {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'InstancedBufferGeometry';\r\n\tthis.maxInstancedCount = undefined;\r\n\r\n};\r\n\r\nTHREE.InstancedBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.InstancedBufferGeometry.prototype.constructor = THREE.InstancedBufferGeometry;\r\n\r\nTHREE.InstancedBufferGeometry.prototype.addGroup = function ( start, count, instances ) {\r\n\r\n\tthis.groups.push( {\r\n\r\n\t\tstart: start,\r\n\t\tcount: count,\r\n\t\tinstances: instances\r\n\r\n\t} );\r\n\r\n};\r\n\r\nTHREE.InstancedBufferGeometry.prototype.copy = function ( source ) {\r\n\r\n\tvar index = source.index;\r\n\r\n\tif ( index !== null ) {\r\n\r\n\t\tthis.setIndex( index.clone() );\r\n\r\n\t}\r\n\r\n\tvar attributes = source.attributes;\r\n\r\n\tfor ( var name in attributes ) {\r\n\r\n\t\tvar attribute = attributes[ name ];\r\n\t\tthis.addAttribute( name, attribute.clone() );\r\n\r\n\t}\r\n\r\n\tvar groups = source.groups;\r\n\r\n\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\tvar group = groups[ i ];\r\n\t\tthis.addGroup( group.start, group.count, group.instances );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/core/Uniform.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Uniform = function ( value ) {\r\n\r\n\tif ( typeof value === 'string' ) {\r\n\r\n\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\r\n\t\tvalue = arguments[ 1 ];\r\n\r\n\t}\r\n\r\n\tthis.value = value;\r\n\r\n\tthis.dynamic = false;\r\n\r\n};\r\n\r\nTHREE.Uniform.prototype = {\r\n\r\n\tconstructor: THREE.Uniform,\r\n\r\n\tonUpdate: function ( callback ) {\r\n\r\n\t\tthis.dynamic = true;\r\n\t\tthis.onUpdateCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/animation/AnimationAction.js\r\n\r\n/**\r\n *\r\n * Action provided by AnimationMixer for scheduling clip playback on specific\r\n * objects.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n *\r\n */\r\n\r\nTHREE.AnimationAction = function() {\r\n\r\n\tthrow new Error( \"THREE.AnimationAction: \" +\r\n\t\t\t\"Use mixer.clipAction for construction.\" );\r\n\r\n};\r\n\r\nTHREE.AnimationAction._new =\r\n\t\tfunction AnimationAction( mixer, clip, localRoot ) {\r\n\r\n\tthis._mixer = mixer;\r\n\tthis._clip = clip;\r\n\tthis._localRoot = localRoot || null;\r\n\r\n\tvar tracks = clip.tracks,\r\n\t\tnTracks = tracks.length,\r\n\t\tinterpolants = new Array( nTracks );\r\n\r\n\tvar interpolantSettings = {\r\n\t\t\tendingStart: \tTHREE.ZeroCurvatureEnding,\r\n\t\t\tendingEnd:\t\tTHREE.ZeroCurvatureEnding\r\n\t};\r\n\r\n\tfor ( var i = 0; i !== nTracks; ++ i ) {\r\n\r\n\t\tvar interpolant = tracks[ i ].createInterpolant( null );\r\n\t\tinterpolants[ i ] = interpolant;\r\n\t\tinterpolant.settings = interpolantSettings;\r\n\r\n\t}\r\n\r\n\tthis._interpolantSettings = interpolantSettings;\r\n\r\n\tthis._interpolants = interpolants;\t// bound by the mixer\r\n\r\n\t// inside: PropertyMixer (managed by the mixer)\r\n\tthis._propertyBindings = new Array( nTracks );\r\n\r\n\tthis._cacheIndex = null;\t\t\t// for the memory manager\r\n\tthis._byClipCacheIndex = null;\t\t// for the memory manager\r\n\r\n\tthis._timeScaleInterpolant = null;\r\n\tthis._weightInterpolant = null;\r\n\r\n\tthis.loop = THREE.LoopRepeat;\r\n\tthis._loopCount = -1;\r\n\r\n\t// global mixer time when the action is to be started\r\n\t// it's set back to 'null' upon start of the action\r\n\tthis._startTime = null;\r\n\r\n\t// scaled local time of the action\r\n\t// gets clamped or wrapped to 0..clip.duration according to loop\r\n\tthis.time = 0;\r\n\r\n\tthis.timeScale = 1;\r\n\tthis._effectiveTimeScale = 1;\r\n\r\n\tthis.weight = 1;\r\n\tthis._effectiveWeight = 1;\r\n\r\n\tthis.repetitions = Infinity; \t\t// no. of repetitions when looping\r\n\r\n\tthis.paused = false;\t\t\t\t// false -> zero effective time scale\r\n\tthis.enabled = true;\t\t\t\t// true -> zero effective weight\r\n\r\n\tthis.clampWhenFinished \t= false;\t// keep feeding the last frame?\r\n\r\n\tthis.zeroSlopeAtStart \t= true;\t\t// for smooth interpolation w/o separate\r\n\tthis.zeroSlopeAtEnd\t\t= true;\t\t// clips for start, loop and end\r\n\r\n};\r\n\r\nTHREE.AnimationAction._new.prototype = {\r\n\r\n\tconstructor: THREE.AnimationAction._new,\r\n\r\n\t// State & Scheduling\r\n\r\n\tplay: function() {\r\n\r\n\t\tthis._mixer._activateAction( this );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstop: function() {\r\n\r\n\t\tthis._mixer._deactivateAction( this );\r\n\r\n\t\treturn this.reset();\r\n\r\n\t},\r\n\r\n\treset: function() {\r\n\r\n\t\tthis.paused = false;\r\n\t\tthis.enabled = true;\r\n\r\n\t\tthis.time = 0;\t\t\t// restart clip\r\n\t\tthis._loopCount = -1;\t// forget previous loops\r\n\t\tthis._startTime = null;\t// forget scheduling\r\n\r\n\t\treturn this.stopFading().stopWarping();\r\n\r\n\t},\r\n\r\n\tisRunning: function() {\r\n\r\n\t\tvar start = this._startTime;\r\n\r\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\r\n\t\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\r\n\r\n\t},\r\n\r\n\t// return true when play has been called\r\n\tisScheduled: function() {\r\n\r\n\t\treturn this._mixer._isActiveAction( this );\r\n\r\n\t},\r\n\r\n\tstartAt: function( time ) {\r\n\r\n\t\tthis._startTime = time;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetLoop: function( mode, repetitions ) {\r\n\r\n\t\tthis.loop = mode;\r\n\t\tthis.repetitions = repetitions;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Weight\r\n\r\n\t// set the weight stopping any scheduled fading\r\n\t// although .enabled = false yields an effective weight of zero, this\r\n\t// method does *not* change .enabled, because it would be confusing\r\n\tsetEffectiveWeight: function( weight ) {\r\n\r\n\t\tthis.weight = weight;\r\n\r\n\t\t// note: same logic as when updated at runtime\r\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\r\n\r\n\t\treturn this.stopFading();\r\n\r\n\t},\r\n\r\n\t// return the weight considering fading and .enabled\r\n\tgetEffectiveWeight: function() {\r\n\r\n\t\treturn this._effectiveWeight;\r\n\r\n\t},\r\n\r\n\tfadeIn: function( duration ) {\r\n\r\n\t\treturn this._scheduleFading( duration, 0, 1 );\r\n\r\n\t},\r\n\r\n\tfadeOut: function( duration ) {\r\n\r\n\t\treturn this._scheduleFading( duration, 1, 0 );\r\n\r\n\t},\r\n\r\n\tcrossFadeFrom: function( fadeOutAction, duration, warp ) {\r\n\r\n\t\tvar mixer = this._mixer;\r\n\r\n\t\tfadeOutAction.fadeOut( duration );\r\n\t\tthis.fadeIn( duration );\r\n\r\n\t\tif( warp ) {\r\n\r\n\t\t\tvar fadeInDuration = this._clip.duration,\r\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\r\n\r\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\r\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\r\n\r\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\r\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossFadeTo: function( fadeInAction, duration, warp ) {\r\n\r\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\r\n\r\n\t},\r\n\r\n\tstopFading: function() {\r\n\r\n\t\tvar weightInterpolant = this._weightInterpolant;\r\n\r\n\t\tif ( weightInterpolant !== null ) {\r\n\r\n\t\t\tthis._weightInterpolant = null;\r\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Time Scale Control\r\n\r\n\t// set the weight stopping any scheduled warping\r\n\t// although .paused = true yields an effective time scale of zero, this\r\n\t// method does *not* change .paused, because it would be confusing\r\n\tsetEffectiveTimeScale: function( timeScale ) {\r\n\r\n\t\tthis.timeScale = timeScale;\r\n\t\tthis._effectiveTimeScale = this.paused ? 0 :timeScale;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\t// return the time scale considering warping and .paused\r\n\tgetEffectiveTimeScale: function() {\r\n\r\n\t\treturn this._effectiveTimeScale;\r\n\r\n\t},\r\n\r\n\tsetDuration: function( duration ) {\r\n\r\n\t\tthis.timeScale = this._clip.duration / duration;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\tsyncWith: function( action ) {\r\n\r\n\t\tthis.time = action.time;\r\n\t\tthis.timeScale = action.timeScale;\r\n\r\n\t\treturn this.stopWarping();\r\n\r\n\t},\r\n\r\n\thalt: function( duration ) {\r\n\r\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\r\n\r\n\t},\r\n\r\n\twarp: function( startTimeScale, endTimeScale, duration ) {\r\n\r\n\t\tvar mixer = this._mixer, now = mixer.time,\r\n\t\t\tinterpolant = this._timeScaleInterpolant,\r\n\r\n\t\t\ttimeScale = this.timeScale;\r\n\r\n\t\tif ( interpolant === null ) {\r\n\r\n\t\t\tinterpolant = mixer._lendControlInterpolant(),\r\n\t\t\tthis._timeScaleInterpolant = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\tvar times = interpolant.parameterPositions,\r\n\t\t\tvalues = interpolant.sampleValues;\r\n\r\n\t\ttimes[ 0 ] = now;\r\n\t\ttimes[ 1 ] = now + duration;\r\n\r\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\r\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstopWarping: function() {\r\n\r\n\t\tvar timeScaleInterpolant = this._timeScaleInterpolant;\r\n\r\n\t\tif ( timeScaleInterpolant !== null ) {\r\n\r\n\t\t\tthis._timeScaleInterpolant = null;\r\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// Object Accessors\r\n\r\n\tgetMixer: function() {\r\n\r\n\t\treturn this._mixer;\r\n\r\n\t},\r\n\r\n\tgetClip: function() {\r\n\r\n\t\treturn this._clip;\r\n\r\n\t},\r\n\r\n\tgetRoot: function() {\r\n\r\n\t\treturn this._localRoot || this._mixer._root;\r\n\r\n\t},\r\n\r\n\t// Interna\r\n\r\n\t_update: function( time, deltaTime, timeDirection, accuIndex ) {\r\n\t\t// called by the mixer\r\n\r\n\t\tvar startTime = this._startTime;\r\n\r\n\t\tif ( startTime !== null ) {\r\n\r\n\t\t\t// check for scheduled start of action\r\n\r\n\t\t\tvar timeRunning = ( time - startTime ) * timeDirection;\r\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\r\n\r\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// start\r\n\r\n\t\t\tthis._startTime = null; // unschedule\r\n\t\t\tdeltaTime = timeDirection * timeRunning;\r\n\r\n\t\t}\r\n\r\n\t\t// apply time scale and advance time\r\n\r\n\t\tdeltaTime *= this._updateTimeScale( time );\r\n\t\tvar clipTime = this._updateTime( deltaTime );\r\n\r\n\t\t// note: _updateTime may disable the action resulting in\r\n\t\t// an effective weight of 0\r\n\r\n\t\tvar weight = this._updateWeight( time );\r\n\r\n\t\tif ( weight > 0 ) {\r\n\r\n\t\t\tvar interpolants = this._interpolants;\r\n\t\t\tvar propertyMixers = this._propertyBindings;\r\n\r\n\t\t\tfor ( var j = 0, m = interpolants.length; j !== m; ++ j ) {\r\n\r\n\t\t\t\tinterpolants[ j ].evaluate( clipTime );\r\n\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_updateWeight: function( time ) {\r\n\r\n\t\tvar weight = 0;\r\n\r\n\t\tif ( this.enabled ) {\r\n\r\n\t\t\tweight = this.weight;\r\n\t\t\tvar interpolant = this._weightInterpolant;\r\n\r\n\t\t\tif ( interpolant !== null ) {\r\n\r\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n\t\t\t\tweight *= interpolantValue;\r\n\r\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n\t\t\t\t\tthis.stopFading();\r\n\r\n\t\t\t\t\tif ( interpolantValue === 0 ) {\r\n\r\n\t\t\t\t\t\t// faded out, disable\r\n\t\t\t\t\t\tthis.enabled = false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._effectiveWeight = weight;\r\n\t\treturn weight;\r\n\r\n\t},\r\n\r\n\t_updateTimeScale: function( time ) {\r\n\r\n\t\tvar timeScale = 0;\r\n\r\n\t\tif ( ! this.paused ) {\r\n\r\n\t\t\ttimeScale = this.timeScale;\r\n\r\n\t\t\tvar interpolant = this._timeScaleInterpolant;\r\n\r\n\t\t\tif ( interpolant !== null ) {\r\n\r\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n\t\t\t\ttimeScale *= interpolantValue;\r\n\r\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n\t\t\t\t\tthis.stopWarping();\r\n\r\n\t\t\t\t\tif ( timeScale === 0 ) {\r\n\r\n\t\t\t\t\t\t// motion has halted, pause\r\n\t\t\t\t\t\tthis.paused = true;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// warp done - apply final time scale\r\n\t\t\t\t\t\tthis.timeScale = timeScale;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis._effectiveTimeScale = timeScale;\r\n\t\treturn timeScale;\r\n\r\n\t},\r\n\r\n\t_updateTime: function( deltaTime ) {\r\n\r\n\t\tvar time = this.time + deltaTime;\r\n\r\n\t\tif ( deltaTime === 0 ) return time;\r\n\r\n\t\tvar duration = this._clip.duration,\r\n\r\n\t\t\tloop = this.loop,\r\n\t\t\tloopCount = this._loopCount;\r\n\r\n\t\tif ( loop === THREE.LoopOnce ) {\r\n\r\n\t\t\tif ( loopCount === -1 ) {\r\n\t\t\t\t// just started\r\n\r\n\t\t\t\tthis.loopCount = 0;\r\n\t\t\t\tthis._setEndings( true, true, false );\r\n\r\n\t\t\t}\r\n\r\n\t\t\thandle_stop: {\r\n\r\n\t\t\t\tif ( time >= duration ) {\r\n\r\n\t\t\t\t\ttime = duration;\r\n\r\n\t\t\t\t} else if ( time < 0 ) {\r\n\r\n\t\t\t\t\ttime = 0;\r\n\r\n\t\t\t\t} else break handle_stop;\r\n\r\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\r\n\t\t\t\telse this.enabled = false;\r\n\r\n\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\ttype: 'finished', action: this,\r\n\t\t\t\t\tdirection: deltaTime < 0 ? -1 : 1\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else { // repetitive Repeat or PingPong\r\n\r\n\t\t\tvar pingPong = ( loop === THREE.LoopPingPong );\r\n\r\n\t\t\tif ( loopCount === -1 ) {\r\n\t\t\t\t// just started\r\n\r\n\t\t\t\tif ( deltaTime >= 0 ) {\r\n\r\n\t\t\t\t\tloopCount = 0;\r\n\r\n\t\t\t\t\tthis._setEndings(\r\n\t\t\t\t\t\t\ttrue, this.repetitions === 0, pingPong );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// when looping in reverse direction, the initial\r\n\t\t\t\t\t// transition through zero counts as a repetition,\r\n\t\t\t\t\t// so leave loopCount at -1\r\n\r\n\t\t\t\t\tthis._setEndings(\r\n\t\t\t\t\t\t\tthis.repetitions === 0, true, pingPong );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( time >= duration || time < 0 ) {\r\n\t\t\t\t// wrap around\r\n\r\n\t\t\t\tvar loopDelta = Math.floor( time / duration ); // signed\r\n\t\t\t\ttime -= duration * loopDelta;\r\n\r\n\t\t\t\tloopCount += Math.abs( loopDelta );\r\n\r\n\t\t\t\tvar pending = this.repetitions - loopCount;\r\n\r\n\t\t\t\tif ( pending < 0 ) {\r\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\r\n\r\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\r\n\t\t\t\t\telse this.enabled = false;\r\n\r\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\r\n\r\n\t\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\t\ttype: 'finished', action: this,\r\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : -1\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// keep running\r\n\r\n\t\t\t\t\tif ( pending === 0 ) {\r\n\t\t\t\t\t\t// entering the last round\r\n\r\n\t\t\t\t\t\tvar atStart = deltaTime < 0;\r\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._loopCount = loopCount;\r\n\r\n\t\t\t\t\tthis._mixer.dispatchEvent( {\r\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\r\n\t\t\t\t// invert time for the \"pong round\"\r\n\r\n\t\t\t\tthis.time = time;\r\n\t\t\t\treturn duration - time;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.time = time;\r\n\t\treturn time;\r\n\r\n\t},\r\n\r\n\t_setEndings: function( atStart, atEnd, pingPong ) {\r\n\r\n\t\tvar settings = this._interpolantSettings;\r\n\r\n\t\tif ( pingPong ) {\r\n\r\n\t\t\tsettings.endingStart \t= THREE.ZeroSlopeEnding;\r\n\t\t\tsettings.endingEnd\t\t= THREE.ZeroSlopeEnding;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\r\n\r\n\t\t\tif ( atStart ) {\r\n\r\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ?\r\n\t\t\t\t\t\tTHREE.ZeroSlopeEnding : THREE.ZeroCurvatureEnding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsettings.endingStart = THREE.WrapAroundEnding;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( atEnd ) {\r\n\r\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ?\r\n\t\t\t\t\t\tTHREE.ZeroSlopeEnding : THREE.ZeroCurvatureEnding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsettings.endingEnd \t = THREE.WrapAroundEnding;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_scheduleFading: function( duration, weightNow, weightThen ) {\r\n\r\n\t\tvar mixer = this._mixer, now = mixer.time,\r\n\t\t\tinterpolant = this._weightInterpolant;\r\n\r\n\t\tif ( interpolant === null ) {\r\n\r\n\t\t\tinterpolant = mixer._lendControlInterpolant(),\r\n\t\t\tthis._weightInterpolant = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\tvar times = interpolant.parameterPositions,\r\n\t\t\tvalues = interpolant.sampleValues;\r\n\r\n\t\ttimes[ 0 ] = now; \t\t\t\tvalues[ 0 ] = weightNow;\r\n\t\ttimes[ 1 ] = now + duration;\tvalues[ 1 ] = weightThen;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// File:src/animation/AnimationClip.js\r\n\r\n/**\r\n *\r\n * Reusable set of Tracks that represent an animation.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n */\r\n\r\nTHREE.AnimationClip = function ( name, duration, tracks ) {\r\n\r\n\tthis.name = name;\r\n\tthis.tracks = tracks;\r\n\tthis.duration = ( duration !== undefined ) ? duration : -1;\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\t// this means it should figure out its duration by scanning the tracks\r\n\tif ( this.duration < 0 ) {\r\n\r\n\t\tthis.resetDuration();\r\n\r\n\t}\r\n\r\n\t// maybe only do these on demand, as doing them here could potentially slow down loading\r\n\t// but leaving these here during development as this ensures a lot of testing of these functions\r\n\tthis.trim();\r\n\tthis.optimize();\r\n\r\n};\r\n\r\nTHREE.AnimationClip.prototype = {\r\n\r\n\tconstructor: THREE.AnimationClip,\r\n\r\n\tresetDuration: function() {\r\n\r\n\t\tvar tracks = this.tracks,\r\n\t\t\tduration = 0;\r\n\r\n\t\tfor ( var i = 0, n = tracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar track = this.tracks[ i ];\r\n\r\n\t\t\tduration = Math.max(\r\n\t\t\t\t\tduration, track.times[ track.times.length - 1 ] );\r\n\r\n\t\t}\r\n\r\n\t\tthis.duration = duration;\r\n\r\n\t},\r\n\r\n\ttrim: function() {\r\n\r\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\toptimize: function() {\r\n\r\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n\t\t\tthis.tracks[ i ].optimize();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// Static methods:\r\n\r\nObject.assign( THREE.AnimationClip, {\r\n\r\n\tparse: function( json ) {\r\n\r\n\t\tvar tracks = [],\r\n\t\t\tjsonTracks = json.tracks,\r\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\r\n\r\n\t\tfor ( var i = 0, n = jsonTracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\ttracks.push( THREE.KeyframeTrack.parse( jsonTracks[ i ] ).scale( frameTime ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn new THREE.AnimationClip( json.name, json.duration, tracks );\r\n\r\n\t},\r\n\r\n\r\n\ttoJSON: function( clip ) {\r\n\r\n\t\tvar tracks = [],\r\n\t\t\tclipTracks = clip.tracks;\r\n\r\n\t\tvar json = {\r\n\r\n\t\t\t'name': clip.name,\r\n\t\t\t'duration': clip.duration,\r\n\t\t\t'tracks': tracks\r\n\r\n\t\t};\r\n\r\n\t\tfor ( var i = 0, n = clipTracks.length; i !== n; ++ i ) {\r\n\r\n\t\t\ttracks.push( THREE.KeyframeTrack.toJSON( clipTracks[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn json;\r\n\r\n\t},\r\n\r\n\r\n\tCreateFromMorphTargetSequence: function( name, morphTargetSequence, fps, noLoop ) {\r\n\r\n\t\tvar numMorphTargets = morphTargetSequence.length;\r\n\t\tvar tracks = [];\r\n\r\n\t\tfor ( var i = 0; i < numMorphTargets; i ++ ) {\r\n\r\n\t\t\tvar times = [];\r\n\t\t\tvar values = [];\r\n\r\n\t\t\ttimes.push(\r\n\t\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\r\n\t\t\t\t\ti,\r\n\t\t\t\t\t( i + 1 ) % numMorphTargets );\r\n\r\n\t\t\tvalues.push( 0, 1, 0 );\r\n\r\n\t\t\tvar order = THREE.AnimationUtils.getKeyframeOrder( times );\r\n\t\t\ttimes = THREE.AnimationUtils.sortedArray( times, 1, order );\r\n\t\t\tvalues = THREE.AnimationUtils.sortedArray( values, 1, order );\r\n\r\n\t\t\t// if there is a key at the first frame, duplicate it as the\r\n\t\t\t// last frame as well for perfect loop.\r\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\r\n\r\n\t\t\t\ttimes.push( numMorphTargets );\r\n\t\t\t\tvalues.push( values[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttracks.push(\r\n\t\t\t\t\tnew THREE.NumberKeyframeTrack(\r\n\t\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\r\n\t\t\t\t\t\ttimes, values\r\n\t\t\t\t\t).scale( 1.0 / fps ) );\r\n\t\t}\r\n\r\n\t\treturn new THREE.AnimationClip( name, -1, tracks );\r\n\r\n\t},\r\n\r\n\tfindByName: function( objectOrClipArray, name ) {\r\n\r\n\t\tvar clipArray = objectOrClipArray;\r\n\r\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\r\n\r\n\t\t\tvar o = objectOrClipArray;\r\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < clipArray.length; i ++ ) {\r\n\r\n\t\t\tif ( clipArray[ i ].name === name ) {\r\n\r\n\t\t\t\treturn clipArray[ i ];\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\tCreateClipsFromMorphTargetSequences: function( morphTargets, fps, noLoop ) {\r\n\r\n\t\tvar animationToMorphTargets = {};\r\n\r\n\t\t// tested with https://regex101.com/ on trick sequences\r\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\r\n\t\tvar pattern = /^([\\w-]*?)([\\d]+)$/;\r\n\r\n\t\t// sort morph target names into animation groups based\r\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\r\n\t\tfor ( var i = 0, il = morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar morphTarget = morphTargets[ i ];\r\n\t\t\tvar parts = morphTarget.name.match( pattern );\r\n\r\n\t\t\tif ( parts && parts.length > 1 ) {\r\n\r\n\t\t\t\tvar name = parts[ 1 ];\r\n\r\n\t\t\t\tvar animationMorphTargets = animationToMorphTargets[ name ];\r\n\t\t\t\tif ( ! animationMorphTargets ) {\r\n\r\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tanimationMorphTargets.push( morphTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar clips = [];\r\n\r\n\t\tfor ( var name in animationToMorphTargets ) {\r\n\r\n\t\t\tclips.push( THREE.AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn clips;\r\n\r\n\t},\r\n\r\n\t// parse the animation.hierarchy format\r\n\tparseAnimation: function( animation, bones, nodeName ) {\r\n\r\n\t\tif ( ! animation ) {\r\n\r\n\t\t\tconsole.error( \"  no animation in JSONLoader data\" );\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar addNonemptyTrack = function(\r\n\t\t\t\ttrackType, trackName, animationKeys, propertyName, destTracks ) {\r\n\r\n\t\t\t// only return track if there are actually keys.\r\n\t\t\tif ( animationKeys.length !== 0 ) {\r\n\r\n\t\t\t\tvar times = [];\r\n\t\t\t\tvar values = [];\r\n\r\n\t\t\t\tTHREE.AnimationUtils.flattenJSON(\r\n\t\t\t\t\t\tanimationKeys, times, values, propertyName );\r\n\r\n\t\t\t\t// empty keys are filtered out, so check again\r\n\t\t\t\tif ( times.length !== 0 ) {\r\n\r\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tvar tracks = [];\r\n\r\n\t\tvar clipName = animation.name || 'default';\r\n\t\t// automatic length determination in AnimationClip.\r\n\t\tvar duration = animation.length || -1;\r\n\t\tvar fps = animation.fps || 30;\r\n\r\n\t\tvar hierarchyTracks = animation.hierarchy || [];\r\n\r\n\t\tfor ( var h = 0; h < hierarchyTracks.length; h ++ ) {\r\n\r\n\t\t\tvar animationKeys = hierarchyTracks[ h ].keys;\r\n\r\n\t\t\t// skip empty tracks\r\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\r\n\r\n\t\t\t// process morph targets in a way exactly compatible\r\n\t\t\t// with AnimationHandler.init( animation )\r\n\t\t\tif ( animationKeys[0].morphTargets ) {\r\n\r\n\t\t\t\t// figure out all morph targets used in this track\r\n\t\t\t\tvar morphTargetNames = {};\r\n\t\t\t\tfor ( var k = 0; k < animationKeys.length; k ++ ) {\r\n\r\n\t\t\t\t\tif ( animationKeys[k].morphTargets ) {\r\n\r\n\t\t\t\t\t\tfor ( var m = 0; m < animationKeys[k].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[k].morphTargets[m] ] = -1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create a track for each morph target with all zero\r\n\t\t\t\t// morphTargetInfluences except for the keys in which\r\n\t\t\t\t// the morphTarget is named.\r\n\t\t\t\tfor ( var morphTargetName in morphTargetNames ) {\r\n\r\n\t\t\t\t\tvar times = [];\r\n\t\t\t\t\tvar values = [];\r\n\r\n\t\t\t\t\tfor ( var m = 0;\r\n\t\t\t\t\t\t\tm !== animationKeys[k].morphTargets.length; ++ m ) {\r\n\r\n\t\t\t\t\t\tvar animationKey = animationKeys[k];\r\n\r\n\t\t\t\t\t\ttimes.push( animationKey.time );\r\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttracks.push( new THREE.NumberKeyframeTrack(\r\n\t\t\t\t\t\t\t'.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\r\n\r\n\t\t\t} else {\r\n\t\t\t\t// ...assume skeletal animation\r\n\r\n\t\t\t\tvar boneName = '.bones[' + bones[ h ].name + ']';\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\t\tTHREE.VectorKeyframeTrack, boneName + '.position',\r\n\t\t\t\t\t\tanimationKeys, 'pos', tracks );\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\t\tTHREE.QuaternionKeyframeTrack, boneName + '.quaternion',\r\n\t\t\t\t\t\tanimationKeys, 'rot', tracks );\r\n\r\n\t\t\t\taddNonemptyTrack(\r\n\t\t\t\t\t\tTHREE.VectorKeyframeTrack, boneName + '.scale',\r\n\t\t\t\t\t\tanimationKeys, 'scl', tracks );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( tracks.length === 0 ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar clip = new THREE.AnimationClip( clipName, duration, tracks );\r\n\r\n\t\treturn clip;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/animation/AnimationMixer.js\r\n\r\n/**\r\n *\r\n * Player for AnimationClips.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.AnimationMixer = function( root ) {\r\n\r\n\tthis._root = root;\r\n\tthis._initMemoryManager();\r\n\tthis._accuIndex = 0;\r\n\r\n\tthis.time = 0;\r\n\r\n\tthis.timeScale = 1.0;\r\n\r\n};\r\n\r\nObject.assign( THREE.AnimationMixer.prototype, THREE.EventDispatcher.prototype, {\r\n\r\n\t// return an action for a clip optionally using a custom root target\r\n\t// object (this method allocates a lot of dynamic memory in case a\r\n\t// previously unknown clip/root combination is specified)\r\n\tclipAction: function( clip, optionalRoot ) {\r\n\r\n\t\tvar root = optionalRoot || this._root,\r\n\t\t\trootUuid = root.uuid,\r\n\r\n\t\t\tclipObject = typeof clip === 'string' ?\r\n\t\t\t\t\tTHREE.AnimationClip.findByName( root, clip ) : clip,\r\n\r\n\t\t\tclipUuid = clipObject !== null ? clipObject.uuid : clip,\r\n\r\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ],\r\n\t\t\tprototypeAction = null;\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\tvar existingAction =\r\n\t\t\t\t\tactionsForClip.actionByRoot[ rootUuid ];\r\n\r\n\t\t\tif ( existingAction !== undefined ) {\r\n\r\n\t\t\t\treturn existingAction;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// we know the clip, so we don't have to parse all\r\n\t\t\t// the bindings again but can just copy\r\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\r\n\r\n\t\t\t// also, take the clip from the prototype action\r\n\t\t\tif ( clipObject === null )\r\n\t\t\t\tclipObject = prototypeAction._clip;\r\n\r\n\t\t}\r\n\r\n\t\t// clip must be known when specified via string\r\n\t\tif ( clipObject === null ) return null;\r\n\r\n\t\t// allocate all resources required to run it\r\n\t\tvar newAction = new THREE.\r\n\t\t\t\tAnimationMixer._Action( this, clipObject, optionalRoot );\r\n\r\n\t\tthis._bindAction( newAction, prototypeAction );\r\n\r\n\t\t// and make the action known to the memory manager\r\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\r\n\r\n\t\treturn newAction;\r\n\r\n\t},\r\n\r\n\t// get an existing action\r\n\texistingAction: function( clip, optionalRoot ) {\r\n\r\n\t\tvar root = optionalRoot || this._root,\r\n\t\t\trootUuid = root.uuid,\r\n\r\n\t\t\tclipObject = typeof clip === 'string' ?\r\n\t\t\t\t\tTHREE.AnimationClip.findByName( root, clip ) : clip,\r\n\r\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\r\n\r\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\t// deactivates all previously scheduled actions\r\n\tstopAllAction: function() {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tnActions = this._nActiveActions,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = this._nActiveBindings;\r\n\r\n\t\tthis._nActiveActions = 0;\r\n\t\tthis._nActiveBindings = 0;\r\n\r\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\r\n\r\n\t\t\tactions[ i ].reset();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].useCount = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// advance the time and update apply the animation\r\n\tupdate: function( deltaTime ) {\r\n\r\n\t\tdeltaTime *= this.timeScale;\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tnActions = this._nActiveActions,\r\n\r\n\t\t\ttime = this.time += deltaTime,\r\n\t\t\ttimeDirection = Math.sign( deltaTime ),\r\n\r\n\t\t\taccuIndex = this._accuIndex ^= 1;\r\n\r\n\t\t// run active actions\r\n\r\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\r\n\r\n\t\t\tvar action = actions[ i ];\r\n\r\n\t\t\tif ( action.enabled ) {\r\n\r\n\t\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tnBindings = this._nActiveBindings;\r\n\r\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].apply( accuIndex );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// return this mixer's root target object\r\n\tgetRoot: function() {\r\n\r\n\t\treturn this._root;\r\n\r\n\t},\r\n\r\n\t// free all resources specific to a particular clip\r\n\tuncacheClip: function( clip ) {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tclipUuid = clip.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip !== undefined ) {\r\n\r\n\t\t\t// note: just calling _removeInactiveAction would mess up the\r\n\t\t\t// iteration state and also require updating the state we can\r\n\t\t\t// just throw away\r\n\r\n\t\t\tvar actionsToRemove = actionsForClip.knownActions;\r\n\r\n\t\t\tfor ( var i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar action = actionsToRemove[ i ];\r\n\r\n\t\t\t\tthis._deactivateAction( action );\r\n\r\n\t\t\t\tvar cacheIndex = action._cacheIndex,\r\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\r\n\r\n\t\t\t\taction._cacheIndex = null;\r\n\t\t\t\taction._byClipCacheIndex = null;\r\n\r\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\r\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\r\n\t\t\t\tactions.pop();\r\n\r\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdelete actionsByClip[ clipUuid ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// free all resources specific to a particular root target object\r\n\tuncacheRoot: function( root ) {\r\n\r\n\t\tvar rootUuid = root.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip;\r\n\r\n\t\tfor ( var clipUuid in actionsByClip ) {\r\n\r\n\t\t\tvar actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\r\n\t\t\t\taction = actionByRoot[ rootUuid ];\r\n\r\n\t\t\tif ( action !== undefined ) {\r\n\r\n\t\t\t\tthis._deactivateAction( action );\r\n\t\t\t\tthis._removeInactiveAction( action );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingByName !== undefined ) {\r\n\r\n\t\t\tfor ( var trackName in bindingByName ) {\r\n\r\n\t\t\t\tvar binding = bindingByName[ trackName ];\r\n\t\t\t\tbinding.restoreOriginalState();\r\n\t\t\t\tthis._removeInactiveBinding( binding );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// remove a targeted clip from the cache\r\n\tuncacheAction: function( clip, optionalRoot ) {\r\n\r\n\t\tvar action = this.existingAction( clip, optionalRoot );\r\n\r\n\t\tif ( action !== null ) {\r\n\r\n\t\t\tthis._deactivateAction( action );\r\n\t\t\tthis._removeInactiveAction( action );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\nTHREE.AnimationMixer._Action = THREE.AnimationAction._new;\r\n\r\n// Implementation details:\r\n\r\nObject.assign( THREE.AnimationMixer.prototype, {\r\n\r\n\t_bindAction: function( action, prototypeAction ) {\r\n\r\n\t\tvar root = action._localRoot || this._root,\r\n\t\t\ttracks = action._clip.tracks,\r\n\t\t\tnTracks = tracks.length,\r\n\t\t\tbindings = action._propertyBindings,\r\n\t\t\tinterpolants = action._interpolants,\r\n\t\t\trootUuid = root.uuid,\r\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingsByName = bindingsByRoot[ rootUuid ];\r\n\r\n\t\tif ( bindingsByName === undefined ) {\r\n\r\n\t\t\tbindingsByName = {};\r\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i !== nTracks; ++ i ) {\r\n\r\n\t\t\tvar track = tracks[ i ],\r\n\t\t\t\ttrackName = track.name,\r\n\t\t\t\tbinding = bindingsByName[ trackName ];\r\n\r\n\t\t\tif ( binding !== undefined ) {\r\n\r\n\t\t\t\tbindings[ i ] = binding;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbinding = bindings[ i ];\r\n\r\n\t\t\t\tif ( binding !== undefined ) {\r\n\r\n\t\t\t\t\t// existing binding, make sure the cache knows\r\n\r\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\r\n\r\n\t\t\t\t\t\t++ binding.referenceCount;\r\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar path = prototypeAction && prototypeAction.\r\n\t\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\r\n\r\n\t\t\t\tbinding = new THREE.PropertyMixer(\r\n\t\t\t\t\t\tTHREE.PropertyBinding.create( root, trackName, path ),\r\n\t\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\r\n\r\n\t\t\t\t++ binding.referenceCount;\r\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n\t\t\t\tbindings[ i ] = binding;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_activateAction: function( action ) {\r\n\r\n\t\tif ( ! this._isActiveAction( action ) ) {\r\n\r\n\t\t\tif ( action._cacheIndex === null ) {\r\n\r\n\t\t\t\t// this action has been forgotten by the cache, but the user\r\n\t\t\t\t// appears to be still using it -> rebind\r\n\r\n\t\t\t\tvar rootUuid = ( action._localRoot || this._root ).uuid,\r\n\t\t\t\t\tclipUuid = action._clip.uuid,\r\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\r\n\r\n\t\t\t\tthis._bindAction( action,\r\n\t\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\r\n\r\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar bindings = action._propertyBindings;\r\n\r\n\t\t\t// increment reference counts / sort out state\r\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar binding = bindings[ i ];\r\n\r\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\r\n\r\n\t\t\t\t\tthis._lendBinding( binding );\r\n\t\t\t\t\tbinding.saveOriginalState();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._lendAction( action );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_deactivateAction: function( action ) {\r\n\r\n\t\tif ( this._isActiveAction( action ) ) {\r\n\r\n\t\t\tvar bindings = action._propertyBindings;\r\n\r\n\t\t\t// decrement reference counts / sort out state\r\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar binding = bindings[ i ];\r\n\r\n\t\t\t\tif ( -- binding.useCount === 0 ) {\r\n\r\n\t\t\t\t\tbinding.restoreOriginalState();\r\n\t\t\t\t\tthis._takeBackBinding( binding );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._takeBackAction( action );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// Memory manager\r\n\r\n\t_initMemoryManager: function() {\r\n\r\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\r\n\t\tthis._nActiveActions = 0;\r\n\r\n\t\tthis._actionsByClip = {};\r\n\t\t// inside:\r\n\t\t// {\r\n\t\t// \t\tknownActions: Array< _Action >\t- used as prototypes\r\n\t\t// \t\tactionByRoot: _Action\t\t\t- lookup\r\n\t\t// }\r\n\r\n\r\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\r\n\t\tthis._nActiveBindings = 0;\r\n\r\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\r\n\r\n\r\n\t\tthis._controlInterpolants = []; // same game as above\r\n\t\tthis._nActiveControlInterpolants = 0;\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tthis.stats = {\r\n\r\n\t\t\tactions: {\r\n\t\t\t\tget total() { return scope._actions.length; },\r\n\t\t\t\tget inUse() { return scope._nActiveActions; }\r\n\t\t\t},\r\n\t\t\tbindings: {\r\n\t\t\t\tget total() { return scope._bindings.length; },\r\n\t\t\t\tget inUse() { return scope._nActiveBindings; }\r\n\t\t\t},\r\n\t\t\tcontrolInterpolants: {\r\n\t\t\t\tget total() { return scope._controlInterpolants.length; },\r\n\t\t\t\tget inUse() { return scope._nActiveControlInterpolants; }\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t// Memory management for _Action objects\r\n\r\n\t_isActiveAction: function( action ) {\r\n\r\n\t\tvar index = action._cacheIndex;\r\n\t\treturn index !== null && index < this._nActiveActions;\r\n\r\n\t},\r\n\r\n\t_addInactiveAction: function( action, clipUuid, rootUuid ) {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\r\n\r\n\t\tif ( actionsForClip === undefined ) {\r\n\r\n\t\t\tactionsForClip = {\r\n\r\n\t\t\t\tknownActions: [ action ],\r\n\t\t\t\tactionByRoot: {}\r\n\r\n\t\t\t};\r\n\r\n\t\t\taction._byClipCacheIndex = 0;\r\n\r\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar knownActions = actionsForClip.knownActions;\r\n\r\n\t\t\taction._byClipCacheIndex = knownActions.length;\r\n\t\t\tknownActions.push( action );\r\n\r\n\t\t}\r\n\r\n\t\taction._cacheIndex = actions.length;\r\n\t\tactions.push( action );\r\n\r\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\r\n\r\n\t},\r\n\r\n\t_removeInactiveAction: function( action ) {\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\r\n\t\t\tcacheIndex = action._cacheIndex;\r\n\r\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\r\n\t\tactions[ cacheIndex ] = lastInactiveAction;\r\n\t\tactions.pop();\r\n\r\n\t\taction._cacheIndex = null;\r\n\r\n\r\n\t\tvar clipUuid = action._clip.uuid,\r\n\t\t\tactionsByClip = this._actionsByClip,\r\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\r\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\r\n\r\n\t\t\tlastKnownAction =\r\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\r\n\r\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\r\n\r\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\r\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\r\n\t\tknownActionsForClip.pop();\r\n\r\n\t\taction._byClipCacheIndex = null;\r\n\r\n\r\n\t\tvar actionByRoot = actionsForClip.actionByRoot,\r\n\t\t\trootUuid = ( actions._localRoot || this._root ).uuid;\r\n\r\n\t\tdelete actionByRoot[ rootUuid ];\r\n\r\n\t\tif ( knownActionsForClip.length === 0 ) {\r\n\r\n\t\t\tdelete actionsByClip[ clipUuid ];\r\n\r\n\t\t}\r\n\r\n\t\tthis._removeInactiveBindingsForAction( action );\r\n\r\n\t},\r\n\r\n\t_removeInactiveBindingsForAction: function( action ) {\r\n\r\n\t\tvar bindings = action._propertyBindings;\r\n\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar binding = bindings[ i ];\r\n\r\n\t\t\tif ( -- binding.referenceCount === 0 ) {\r\n\r\n\t\t\t\tthis._removeInactiveBinding( binding );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lendAction: function( action ) {\r\n\r\n\t\t// [ active actions |  inactive actions  ]\r\n\t\t// [  active actions >| inactive actions ]\r\n\t\t//                 s        a\r\n\t\t//                  <-swap->\r\n\t\t//                 a        s\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tprevIndex = action._cacheIndex,\r\n\r\n\t\t\tlastActiveIndex = this._nActiveActions ++,\r\n\r\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\r\n\r\n\t\taction._cacheIndex = lastActiveIndex;\r\n\t\tactions[ lastActiveIndex ] = action;\r\n\r\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\r\n\t\tactions[ prevIndex ] = firstInactiveAction;\r\n\r\n\t},\r\n\r\n\t_takeBackAction: function( action ) {\r\n\r\n\t\t// [  active actions  | inactive actions ]\r\n\t\t// [ active actions |< inactive actions  ]\r\n\t\t//        a        s\r\n\t\t//         <-swap->\r\n\t\t//        s        a\r\n\r\n\t\tvar actions = this._actions,\r\n\t\t\tprevIndex = action._cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\r\n\r\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\r\n\r\n\t\taction._cacheIndex = firstInactiveIndex;\r\n\t\tactions[ firstInactiveIndex ] = action;\r\n\r\n\t\tlastActiveAction._cacheIndex = prevIndex;\r\n\t\tactions[ prevIndex ] = lastActiveAction;\r\n\r\n\t},\r\n\r\n\t// Memory management for PropertyMixer objects\r\n\r\n\t_addInactiveBinding: function( binding, rootUuid, trackName ) {\r\n\r\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n\t\t\tbindings = this._bindings;\r\n\r\n\t\tif ( bindingByName === undefined ) {\r\n\r\n\t\t\tbindingByName = {};\r\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\r\n\r\n\t\t}\r\n\r\n\t\tbindingByName[ trackName ] = binding;\r\n\r\n\t\tbinding._cacheIndex = bindings.length;\r\n\t\tbindings.push( binding );\r\n\r\n\t},\r\n\r\n\t_removeInactiveBinding: function( binding ) {\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tpropBinding = binding.binding,\r\n\t\t\trootUuid = propBinding.rootNode.uuid,\r\n\t\t\ttrackName = propBinding.path,\r\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\r\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\r\n\t\t\tcacheIndex = binding._cacheIndex;\r\n\r\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\r\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\r\n\t\tbindings.pop();\r\n\r\n\t\tdelete bindingByName[ trackName ];\r\n\r\n\t\tremove_empty_map: {\r\n\r\n\t\t\tfor ( var _ in bindingByName ) break remove_empty_map;\r\n\r\n\t\t\tdelete bindingsByRoot[ rootUuid ];\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_lendBinding: function( binding ) {\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tprevIndex = binding._cacheIndex,\r\n\r\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\r\n\r\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\r\n\r\n\t\tbinding._cacheIndex = lastActiveIndex;\r\n\t\tbindings[ lastActiveIndex ] = binding;\r\n\r\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\r\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\r\n\r\n\t},\r\n\r\n\t_takeBackBinding: function( binding ) {\r\n\r\n\t\tvar bindings = this._bindings,\r\n\t\t\tprevIndex = binding._cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\r\n\r\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\r\n\r\n\t\tbinding._cacheIndex = firstInactiveIndex;\r\n\t\tbindings[ firstInactiveIndex ] = binding;\r\n\r\n\t\tlastActiveBinding._cacheIndex = prevIndex;\r\n\t\tbindings[ prevIndex ] = lastActiveBinding;\r\n\r\n\t},\r\n\r\n\r\n\t// Memory management of Interpolants for weight and time scale\r\n\r\n\t_lendControlInterpolant: function() {\r\n\r\n\t\tvar interpolants = this._controlInterpolants,\r\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++,\r\n\t\t\tinterpolant = interpolants[ lastActiveIndex ];\r\n\r\n\t\tif ( interpolant === undefined ) {\r\n\r\n\t\t\tinterpolant = new THREE.LinearInterpolant(\r\n\t\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\r\n\t\t\t\t\t\t1, this._controlInterpolantsResultBuffer );\r\n\r\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\r\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\r\n\r\n\t\t}\r\n\r\n\t\treturn interpolant;\r\n\r\n\t},\r\n\r\n\t_takeBackControlInterpolant: function( interpolant ) {\r\n\r\n\t\tvar interpolants = this._controlInterpolants,\r\n\t\t\tprevIndex = interpolant.__cacheIndex,\r\n\r\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\r\n\r\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\r\n\r\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\r\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\r\n\r\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\r\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\r\n\r\n\t},\r\n\r\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 )\r\n\r\n} );\r\n\r\n// File:src/animation/AnimationObjectGroup.js\r\n\r\n/**\r\n *\r\n * A group of objects that receives a shared animation state.\r\n *\r\n * Usage:\r\n *\r\n * \t-\tAdd objects you would otherwise pass as 'root' to the\r\n * \t\tconstructor or the .clipAction method of AnimationMixer.\r\n *\r\n * \t-\tInstead pass this object as 'root'.\r\n *\r\n * \t-\tYou can also add and remove objects later when the mixer\r\n * \t\tis running.\r\n *\r\n * Note:\r\n *\r\n *  \tObjects of this class appear as one object to the mixer,\r\n *  \tso cache control of the individual objects must be done\r\n *  \ton the group.\r\n *\r\n * Limitation:\r\n *\r\n * \t- \tThe animated properties must be compatible among the\r\n * \t\tall objects in the group.\r\n *\r\n *  -\tA single property can either be controlled through a\r\n *  \ttarget group or directly, but not both.\r\n *\r\n * @author tschw\r\n */\r\n\r\nTHREE.AnimationObjectGroup = function( var_args ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\t// cached objects followed by the active ones\r\n\tthis._objects = Array.prototype.slice.call( arguments );\r\n\r\n\tthis.nCachedObjects_ = 0;\t\t\t// threshold\r\n\t// note: read by PropertyBinding.Composite\r\n\r\n\tvar indices = {};\r\n\tthis._indicesByUUID = indices;\t\t// for bookkeeping\r\n\r\n\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\tindices[ arguments[ i ].uuid ] = i;\r\n\r\n\t}\r\n\r\n\tthis._paths = [];\t\t\t\t\t// inside: string\r\n\tthis._parsedPaths = [];\t\t\t\t// inside: { we don't care, here }\r\n\tthis._bindings = []; \t\t\t\t// inside: Array< PropertyBinding >\r\n\tthis._bindingsIndicesByPath = {}; \t// inside: indices in these arrays\r\n\r\n\tvar scope = this;\r\n\r\n\tthis.stats = {\r\n\r\n\t\tobjects: {\r\n\t\t\tget total() { return scope._objects.length; },\r\n\t\t\tget inUse() { return this.total - scope.nCachedObjects_;  }\r\n\t\t},\r\n\r\n\t\tget bindingsPerObject() { return scope._bindings.length; }\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.AnimationObjectGroup.prototype = {\r\n\r\n\tconstructor: THREE.AnimationObjectGroup,\r\n\r\n\tadd: function( var_args ) {\r\n\r\n\t\tvar objects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tpaths = this._paths,\r\n\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index === undefined ) {\r\n\r\n\t\t\t\t// unknown object -> add it to the ACTIVE region\r\n\r\n\t\t\t\tindex = nObjects ++;\r\n\t\t\t\tindicesByUUID[ uuid ] = index;\r\n\t\t\t\tobjects.push( object );\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tbindings[ j ].push(\r\n\t\t\t\t\t\t\tnew THREE.PropertyBinding(\r\n\t\t\t\t\t\t\t\tobject, paths[ j ], parsedPaths[ j ] ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( index < nCachedObjects ) {\r\n\r\n\t\t\t\tvar knownObject = objects[ index ];\r\n\r\n\t\t\t\t// move existing object to the ACTIVE region\r\n\r\n\t\t\t\tvar firstActiveIndex = -- nCachedObjects,\r\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\r\n\r\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\r\n\t\t\t\tobjects[ index ] = lastCachedObject;\r\n\r\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\r\n\t\t\t\tobjects[ firstActiveIndex ] = object;\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tvar bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\r\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\r\n\r\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\r\n\r\n\t\t\t\t\tif ( binding === undefined ) {\r\n\r\n\t\t\t\t\t\t// since we do not bother to create new bindings\r\n\t\t\t\t\t\t// for objects that are cached, the binding may\r\n\t\t\t\t\t\t// or may not exist\r\n\r\n\t\t\t\t\t\tbinding = new THREE.PropertyBinding(\r\n\t\t\t\t\t\t\t\tobject, paths[ j ], parsedPaths[ j ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( objects[ index ] !== knownObject) {\r\n\r\n\t\t\t\tconsole.error( \"Different objects with the same UUID \" +\r\n\t\t\t\t\t\t\"detected. Clean the caches or recreate your \" +\r\n\t\t\t\t\t\t\"infrastructure when reloading scenes...\" );\r\n\r\n\t\t\t} // else the object is already where we want it to be\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\tremove: function( var_args ) {\r\n\r\n\t\tvar objects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\r\n\r\n\t\t\t\t// move existing object into the CACHED region\r\n\r\n\t\t\t\tvar lastCachedIndex = nCachedObjects ++,\r\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\r\n\r\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\r\n\t\t\t\tobjects[ index ] = firstActiveObject;\r\n\r\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\r\n\t\t\t\tobjects[ lastCachedIndex ] = object;\r\n\r\n\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\tvar bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\r\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\r\n\r\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\r\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\t// remove & forget\r\n\tuncache: function( var_args ) {\r\n\r\n\t\tvar objects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tindicesByUUID = this._indicesByUUID,\r\n\t\t\tbindings = this._bindings,\r\n\t\t\tnBindings = bindings.length;\r\n\r\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = arguments[ i ],\r\n\t\t\t\tuuid = object.uuid,\r\n\t\t\t\tindex = indicesByUUID[ uuid ];\r\n\r\n\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\tdelete indicesByUUID[ uuid ];\r\n\r\n\t\t\t\tif ( index < nCachedObjects ) {\r\n\r\n\t\t\t\t\t// object is cached, shrink the CACHED region\r\n\r\n\t\t\t\t\tvar firstActiveIndex = -- nCachedObjects,\r\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\r\n\t\t\t\t\t\tlastIndex = -- nObjects,\r\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\r\n\r\n\t\t\t\t\t// last cached object takes this object's place\r\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\r\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\r\n\r\n\t\t\t\t\t// last object goes to the activated slot and pop\r\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\r\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\r\n\t\t\t\t\tobjects.pop();\r\n\r\n\t\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tvar bindingsForPath = bindings[ j ],\r\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\r\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\r\n\r\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\r\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\r\n\t\t\t\t\t\tbindingsForPath.pop();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// object is active, just swap with the last and pop\r\n\r\n\t\t\t\t\tvar lastIndex = -- nObjects,\r\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\r\n\r\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\r\n\t\t\t\t\tobjects[ index ] = lastObject;\r\n\t\t\t\t\tobjects.pop();\r\n\r\n\t\t\t\t\t// accounting is done, now do the same for all bindings\r\n\r\n\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n\t\t\t\t\t\tvar bindingsForPath = bindings[ j ];\r\n\r\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\r\n\t\t\t\t\t\tbindingsForPath.pop();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} // cached or active\r\n\r\n\t\t\t} // if object is known\r\n\r\n\t\t} // for arguments\r\n\r\n\t\tthis.nCachedObjects_ = nCachedObjects;\r\n\r\n\t},\r\n\r\n\t// Internal interface used by befriended PropertyBinding.Composite:\r\n\r\n\tsubscribe_: function( path, parsedPath ) {\r\n\t\t// returns an array of bindings for the given path that is changed\r\n\t\t// according to the contained objects in the group\r\n\r\n\t\tvar indicesByPath = this._bindingsIndicesByPath,\r\n\t\t\tindex = indicesByPath[ path ],\r\n\t\t\tbindings = this._bindings;\r\n\r\n\t\tif ( index !== undefined ) return bindings[ index ];\r\n\r\n\t\tvar paths = this._paths,\r\n\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\tobjects = this._objects,\r\n\t\t\tnObjects = objects.length,\r\n\t\t\tnCachedObjects = this.nCachedObjects_,\r\n\t\t\tbindingsForPath = new Array( nObjects );\r\n\r\n\t\tindex = bindings.length;\r\n\r\n\t\tindicesByPath[ path ] = index;\r\n\r\n\t\tpaths.push( path );\r\n\t\tparsedPaths.push( parsedPath );\r\n\t\tbindings.push( bindingsForPath );\r\n\r\n\t\tfor ( var i = nCachedObjects,\r\n\t\t\t\tn = objects.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar object = objects[ i ];\r\n\r\n\t\t\tbindingsForPath[ i ] =\r\n\t\t\t\t\tnew THREE.PropertyBinding( object, path, parsedPath );\r\n\r\n\t\t}\r\n\r\n\t\treturn bindingsForPath;\r\n\r\n\t},\r\n\r\n\tunsubscribe_: function( path ) {\r\n\t\t// tells the group to forget about a property path and no longer\r\n\t\t// update the array previously obtained with 'subscribe_'\r\n\r\n\t\tvar indicesByPath = this._bindingsIndicesByPath,\r\n\t\t\tindex = indicesByPath[ path ];\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tvar paths = this._paths,\r\n\t\t\t\tparsedPaths = this._parsedPaths,\r\n\t\t\t\tbindings = this._bindings,\r\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\r\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\r\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\r\n\r\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\r\n\r\n\t\t\tbindings[ index ] = lastBindings;\r\n\t\t\tbindings.pop();\r\n\r\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\r\n\t\t\tparsedPaths.pop();\r\n\r\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\r\n\t\t\tpaths.pop();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// File:src/animation/AnimationUtils.js\r\n\r\n/**\r\n * @author tschw\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n */\r\n\r\nTHREE.AnimationUtils = {\r\n\r\n\t// same as Array.prototype.slice, but also works on typed arrays\r\n\tarraySlice: function( array, from, to ) {\r\n\r\n\t\tif ( THREE.AnimationUtils.isTypedArray( array ) ) {\r\n\r\n\t\t\treturn new array.constructor( array.subarray( from, to ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn array.slice( from, to );\r\n\r\n\t},\r\n\r\n\t// converts an array to a specific type\r\n\tconvertArray: function( array, type, forceClone ) {\r\n\r\n\t\tif ( ! array || // let 'undefined' and 'null' pass\r\n\t\t\t\t! forceClone && array.constructor === type ) return array;\r\n\r\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\r\n\r\n\t\t\treturn new type( array ); // create typed array\r\n\r\n\t\t}\r\n\r\n\t\treturn Array.prototype.slice.call( array ); // create Array\r\n\r\n\t},\r\n\r\n\tisTypedArray: function( object ) {\r\n\r\n\t\treturn ArrayBuffer.isView( object ) &&\r\n\t\t\t\t! ( object instanceof DataView );\r\n\r\n\t},\r\n\r\n\t// returns an array by which times and values can be sorted\r\n\tgetKeyframeOrder: function( times ) {\r\n\r\n\t\tfunction compareTime( i, j ) {\r\n\r\n\t\t\treturn times[ i ] - times[ j ];\r\n\r\n\t\t}\r\n\r\n\t\tvar n = times.length;\r\n\t\tvar result = new Array( n );\r\n\t\tfor ( var i = 0; i !== n; ++ i ) result[ i ] = i;\r\n\r\n\t\tresult.sort( compareTime );\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\r\n\tsortedArray: function( values, stride, order ) {\r\n\r\n\t\tvar nValues = values.length;\r\n\t\tvar result = new values.constructor( nValues );\r\n\r\n\t\tfor ( var i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\r\n\r\n\t\t\tvar srcOffset = order[ i ] * stride;\r\n\r\n\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\t// function for parsing AOS keyframe formats\r\n\tflattenJSON: function( jsonKeys, times, values, valuePropertyName ) {\r\n\r\n\t\tvar i = 1, key = jsonKeys[ 0 ];\r\n\r\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\r\n\r\n\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( key === undefined ) return; // no data\r\n\r\n\t\tvar value = key[ valuePropertyName ];\r\n\t\tif ( value === undefined ) return; // no data\r\n\r\n\t\tif ( Array.isArray( value ) ) {\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t} else if ( value.toArray !== undefined ) {\r\n\t\t\t// ...assume THREE.Math-ish\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalue.toArray( values, values.length );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t} else {\r\n\t\t\t// otherwise push as-is\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\tvalue = key[ valuePropertyName ];\r\n\r\n\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\ttimes.push( key.time );\r\n\t\t\t\t\tvalues.push( value );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tkey = jsonKeys[ i ++ ];\r\n\r\n\t\t\t} while ( key !== undefined );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/animation/KeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A timed sequence of keyframes for a specific property.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.KeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tif( name === undefined ) throw new Error( \"track name is undefined\" );\r\n\r\n\tif( times === undefined || times.length === 0 ) {\r\n\r\n\t\tthrow new Error( \"no keyframes in track named \" + name );\r\n\r\n\t}\r\n\r\n\tthis.name = name;\r\n\r\n\tthis.times = THREE.AnimationUtils.convertArray( times, this.TimeBufferType );\r\n\tthis.values = THREE.AnimationUtils.convertArray( values, this.ValueBufferType );\r\n\r\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\r\n\r\n\tthis.validate();\r\n\tthis.optimize();\r\n\r\n};\r\n\r\nTHREE.KeyframeTrack.prototype = {\r\n\r\n\tconstructor: THREE.KeyframeTrack,\r\n\r\n\tTimeBufferType: Float32Array,\r\n\tValueBufferType: Float32Array,\r\n\r\n\tDefaultInterpolation: THREE.InterpolateLinear,\r\n\r\n\tInterpolantFactoryMethodDiscrete: function( result ) {\r\n\r\n\t\treturn new THREE.DiscreteInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodLinear: function( result ) {\r\n\r\n\t\treturn new THREE.LinearInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodSmooth: function( result ) {\r\n\r\n\t\treturn new THREE.CubicInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tsetInterpolation: function( interpolation ) {\r\n\r\n\t\tvar factoryMethod;\r\n\r\n\t\tswitch ( interpolation ) {\r\n\r\n\t\t\tcase THREE.InterpolateDiscrete:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.InterpolateLinear:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.InterpolateSmooth:\r\n\r\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tif ( factoryMethod === undefined ) {\r\n\r\n\t\t\tvar message = \"unsupported interpolation for \" +\r\n\t\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\r\n\r\n\t\t\tif ( this.createInterpolant === undefined ) {\r\n\r\n\t\t\t\t// fall back to default, unless the default itself is messed up\r\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\r\n\r\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconsole.warn( message );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.createInterpolant = factoryMethod;\r\n\r\n\t},\r\n\r\n\tgetInterpolation: function() {\r\n\r\n\t\tswitch ( this.createInterpolant ) {\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\r\n\r\n\t\t\t\treturn THREE.InterpolateDiscrete;\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodLinear:\r\n\r\n\t\t\t\treturn THREE.InterpolateLinear;\r\n\r\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\r\n\r\n\t\t\t\treturn THREE.InterpolateSmooth;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetValueSize: function() {\r\n\r\n\t\treturn this.values.length / this.times.length;\r\n\r\n\t},\r\n\r\n\t// move all keyframes either forwards or backwards in time\r\n\tshift: function( timeOffset ) {\r\n\r\n\t\tif( timeOffset !== 0.0 ) {\r\n\r\n\t\t\tvar times = this.times;\r\n\r\n\t\t\tfor( var i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\ttimes[ i ] += timeOffset;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\r\n\tscale: function( timeScale ) {\r\n\r\n\t\tif( timeScale !== 1.0 ) {\r\n\r\n\t\t\tvar times = this.times;\r\n\r\n\t\t\tfor( var i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\ttimes[ i ] *= timeScale;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\r\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\r\n\ttrim: function( startTime, endTime ) {\r\n\r\n\t\tvar times = this.times,\r\n\t\t\tnKeys = times.length,\r\n\t\t\tfrom = 0,\r\n\t\t\tto = nKeys - 1;\r\n\r\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) ++ from;\r\n\t\twhile ( to !== -1 && times[ to ] > endTime ) -- to;\r\n\r\n\t\t++ to; // inclusive -> exclusive bound\r\n\r\n\t\tif( from !== 0 || to !== nKeys ) {\r\n\r\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\r\n\t\t\tif ( from >= to ) to = Math.max( to , 1 ), from = to - 1;\r\n\r\n\t\t\tvar stride = this.getValueSize();\r\n\t\t\tthis.times = THREE.AnimationUtils.arraySlice( times, from, to );\r\n\t\t\tthis.values = THREE.AnimationUtils.\r\n\t\t\t\t\tarraySlice( this.values, from * stride, to * stride );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\r\n\tvalidate: function() {\r\n\r\n\t\tvar valid = true;\r\n\r\n\t\tvar valueSize = this.getValueSize();\r\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\r\n\r\n\t\t\tconsole.error( \"invalid value size in track\", this );\r\n\t\t\tvalid = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar times = this.times,\r\n\t\t\tvalues = this.values,\r\n\r\n\t\t\tnKeys = times.length;\r\n\r\n\t\tif( nKeys === 0 ) {\r\n\r\n\t\t\tconsole.error( \"track is empty\", this );\r\n\t\t\tvalid = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar prevTime = null;\r\n\r\n\t\tfor( var i = 0; i !== nKeys; i ++ ) {\r\n\r\n\t\t\tvar currTime = times[ i ];\r\n\r\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\r\n\r\n\t\t\t\tconsole.error( \"time is not a valid number\", this, i, currTime );\r\n\t\t\t\tvalid = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif( prevTime !== null && prevTime > currTime ) {\r\n\r\n\t\t\t\tconsole.error( \"out of order keys\", this, i, currTime, prevTime );\r\n\t\t\t\tvalid = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprevTime = currTime;\r\n\r\n\t\t}\r\n\r\n\t\tif ( values !== undefined ) {\r\n\r\n\t\t\tif ( THREE.AnimationUtils.isTypedArray( values ) ) {\r\n\r\n\t\t\t\tfor ( var i = 0, n = values.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tvar value = values[ i ];\r\n\r\n\t\t\t\t\tif ( isNaN( value ) ) {\r\n\r\n\t\t\t\t\t\tconsole.error( \"value is not a valid number\", this, i, value );\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn valid;\r\n\r\n\t},\r\n\r\n\t// removes equivalent sequential keys as common in morph target sequences\r\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\r\n\toptimize: function() {\r\n\r\n\t\tvar times = this.times,\r\n\t\t\tvalues = this.values,\r\n\t\t\tstride = this.getValueSize(),\r\n\r\n\t\t\twriteIndex = 1;\r\n\r\n\t\tfor( var i = 1, n = times.length - 1; i <= n; ++ i ) {\r\n\r\n\t\t\tvar keep = false;\r\n\r\n\t\t\tvar time = times[ i ];\r\n\t\t\tvar timeNext = times[ i + 1 ];\r\n\r\n\t\t\t// remove adjacent keyframes scheduled at the same time\r\n\r\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\r\n\r\n\t\t\t\t// remove unnecessary keyframes same as their neighbors\r\n\t\t\t\tvar offset = i * stride,\r\n\t\t\t\t\toffsetP = offset - stride,\r\n\t\t\t\t\toffsetN = offset + stride;\r\n\r\n\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\t\tvar value = values[ offset + j ];\r\n\r\n\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\r\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\r\n\r\n\t\t\t\t\t\tkeep = true;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// in-place compaction\r\n\r\n\t\t\tif ( keep ) {\r\n\r\n\t\t\t\tif ( i !== writeIndex ) {\r\n\r\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\r\n\r\n\t\t\t\t\tvar readOffset = i * stride,\r\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\r\n\r\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\r\n\r\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t++ writeIndex;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( writeIndex !== times.length ) {\r\n\r\n\t\t\tthis.times = THREE.AnimationUtils.arraySlice( times, 0, writeIndex );\r\n\t\t\tthis.values = THREE.AnimationUtils.arraySlice( values, 0, writeIndex * stride );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// Static methods:\r\n\r\nObject.assign( THREE.KeyframeTrack, {\r\n\r\n\t// Serialization (in static context, because of constructor invocation\r\n\t// and automatic invocation of .toJSON):\r\n\r\n\tparse: function( json ) {\r\n\r\n\t\tif( json.type === undefined ) {\r\n\r\n\t\t\tthrow new Error( \"track type undefined, can not parse\" );\r\n\r\n\t\t}\r\n\r\n\t\tvar trackType = THREE.KeyframeTrack._getTrackTypeForValueTypeName( json.type );\r\n\r\n\t\tif ( json.times === undefined ) {\r\n\r\n\t\t\tvar times = [], values = [];\r\n\r\n\t\t\tTHREE.AnimationUtils.flattenJSON( json.keys, times, values, 'value' );\r\n\r\n\t\t\tjson.times = times;\r\n\t\t\tjson.values = values;\r\n\r\n\t\t}\r\n\r\n\t\t// derived classes can define a static parse method\r\n\t\tif ( trackType.parse !== undefined ) {\r\n\r\n\t\t\treturn trackType.parse( json );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// by default, we asssume a constructor compatible with the base\r\n\t\t\treturn new trackType(\r\n\t\t\t\t\tjson.name, json.times, json.values, json.interpolation );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function( track ) {\r\n\r\n\t\tvar trackType = track.constructor;\r\n\r\n\t\tvar json;\r\n\r\n\t\t// derived classes can define a static toJSON method\r\n\t\tif ( trackType.toJSON !== undefined ) {\r\n\r\n\t\t\tjson = trackType.toJSON( track );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// by default, we assume the data can be serialized as-is\r\n\t\t\tjson = {\r\n\r\n\t\t\t\t'name': track.name,\r\n\t\t\t\t'times': THREE.AnimationUtils.convertArray( track.times, Array ),\r\n\t\t\t\t'values': THREE.AnimationUtils.convertArray( track.values, Array )\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar interpolation = track.getInterpolation();\r\n\r\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\r\n\r\n\t\t\t\tjson.interpolation = interpolation;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tjson.type = track.ValueTypeName; // mandatory\r\n\r\n\t\treturn json;\r\n\r\n\t},\r\n\r\n\t_getTrackTypeForValueTypeName: function( typeName ) {\r\n\r\n\t\tswitch( typeName.toLowerCase() ) {\r\n\r\n\t\t\tcase \"scalar\":\r\n\t\t\tcase \"double\":\r\n\t\t\tcase \"float\":\r\n\t\t\tcase \"number\":\r\n\t\t\tcase \"integer\":\r\n\r\n\t\t\t\treturn THREE.NumberKeyframeTrack;\r\n\r\n\t\t\tcase \"vector\":\r\n\t\t\tcase \"vector2\":\r\n\t\t\tcase \"vector3\":\r\n\t\t\tcase \"vector4\":\r\n\r\n\t\t\t\treturn THREE.VectorKeyframeTrack;\r\n\r\n\t\t\tcase \"color\":\r\n\r\n\t\t\t\treturn THREE.ColorKeyframeTrack;\r\n\r\n\t\t\tcase \"quaternion\":\r\n\r\n\t\t\t\treturn THREE.QuaternionKeyframeTrack;\r\n\r\n\t\t\tcase \"bool\":\r\n\t\t\tcase \"boolean\":\r\n\r\n\t\t\t\treturn THREE.BooleanKeyframeTrack;\r\n\r\n\t\t\tcase \"string\":\r\n\r\n\t\t\t\treturn THREE.StringKeyframeTrack;\r\n\r\n\t\t}\r\n\r\n\t\tthrow new Error( \"Unsupported typeName: \" + typeName );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/animation/PropertyBinding.js\r\n\r\n/**\r\n *\r\n * A reference to a real property in the scene graph.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.PropertyBinding = function ( rootNode, path, parsedPath ) {\r\n\r\n\tthis.path = path;\r\n\tthis.parsedPath = parsedPath ||\r\n\t\t\tTHREE.PropertyBinding.parseTrackName( path );\r\n\r\n\tthis.node = THREE.PropertyBinding.findNode(\r\n\t\t\trootNode, this.parsedPath.nodeName ) || rootNode;\r\n\r\n\tthis.rootNode = rootNode;\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.prototype = {\r\n\r\n\tconstructor: THREE.PropertyBinding,\r\n\r\n\tgetValue: function getValue_unbound( targetArray, offset ) {\r\n\r\n\t\tthis.bind();\r\n\t\tthis.getValue( targetArray, offset );\r\n\r\n\t\t// Note: This class uses a State pattern on a per-method basis:\r\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\r\n\t\t// prototype version of these methods with one that represents\r\n\t\t// the bound state. When the property is not found, the methods\r\n\t\t// become no-ops.\r\n\r\n\t},\r\n\r\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\r\n\r\n\t\tthis.bind();\r\n\t\tthis.setValue( sourceArray, offset );\r\n\r\n\t},\r\n\r\n\t// create getter / setter pair for a property in the scene graph\r\n\tbind: function() {\r\n\r\n\t\tvar targetObject = this.node,\r\n\t\t\tparsedPath = this.parsedPath,\r\n\r\n\t\t\tobjectName = parsedPath.objectName,\r\n\t\t\tpropertyName = parsedPath.propertyName,\r\n\t\t\tpropertyIndex = parsedPath.propertyIndex;\r\n\r\n\t\tif ( ! targetObject ) {\r\n\r\n\t\t\ttargetObject = THREE.PropertyBinding.findNode(\r\n\t\t\t\t\tthis.rootNode, parsedPath.nodeName ) || this.rootNode;\r\n\r\n\t\t\tthis.node = targetObject;\r\n\r\n\t\t}\r\n\r\n\t\t// set fail state so we can just 'return' on error\r\n\t\tthis.getValue = this._getValue_unavailable;\r\n\t\tthis.setValue = this._setValue_unavailable;\r\n\r\n \t\t// ensure there is a value node\r\n\t\tif ( ! targetObject ) {\r\n\r\n\t\t\tconsole.error( \"  trying to update node for track: \" + this.path + \" but it wasn't found.\" );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif( objectName ) {\r\n\r\n\t\t\tvar objectIndex = parsedPath.objectIndex;\r\n\r\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\r\n\t\t\tswitch ( objectName ) {\r\n\r\n\t\t\t\tcase 'materials':\r\n\r\n\t\t\t\t\tif( ! targetObject.material ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to material as node does not have a material', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif( ! targetObject.material.materials ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to material.materials as node.material does not have a materials array', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttargetObject = targetObject.material.materials;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'bones':\r\n\r\n\t\t\t\t\tif( ! targetObject.skeleton ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to bones as node does not have a skeleton', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\r\n\t\t\t\t\t// and convert the integer string to a true integer.\r\n\r\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\r\n\r\n\t\t\t\t\t// support resolving morphTarget names into indices.\r\n\t\t\t\t\tfor ( var i = 0; i < targetObject.length; i ++ ) {\r\n\r\n\t\t\t\t\t\tif ( targetObject[i].name === objectIndex ) {\r\n\r\n\t\t\t\t\t\t\tobjectIndex = i;\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\r\n\r\n\t\t\t\t\t\tconsole.error( '  can not bind to objectName of node, undefined', this );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( objectIndex !== undefined ) {\r\n\r\n\t\t\t\tif( targetObject[ objectIndex ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.error( \"  trying to bind to objectIndex of objectName, but is undefined:\", this, targetObject );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// resolve property\r\n\t\tvar nodeProperty = targetObject[ propertyName ];\r\n\r\n\t\tif ( ! nodeProperty ) {\r\n\r\n\t\t\tvar nodeName = parsedPath.nodeName;\r\n\r\n\t\t\tconsole.error( \"  trying to update property for track: \" + nodeName +\r\n\t\t\t\t\t'.' + propertyName + \" but it wasn't found.\", targetObject );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// determine versioning scheme\r\n\t\tvar versioning = this.Versioning.None;\r\n\r\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\r\n\r\n\t\t\tversioning = this.Versioning.NeedsUpdate;\r\n\t\t\tthis.targetObject = targetObject;\r\n\r\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\r\n\r\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\r\n\t\t\tthis.targetObject = targetObject;\r\n\r\n\t\t}\r\n\r\n\t\t// determine how the property gets bound\r\n\t\tvar bindingType = this.BindingType.Direct;\r\n\r\n\t\tif ( propertyIndex !== undefined ) {\r\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\r\n\r\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\r\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\r\n\r\n\t\t\t\t// support resolving morphTarget names into indices.\r\n\t\t\t\tif ( ! targetObject.geometry ) {\r\n\r\n\t\t\t\t\tconsole.error( '  can not bind to morphTargetInfluences becasuse node does not have a geometry', this );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( ! targetObject.geometry.morphTargets ) {\r\n\r\n\t\t\t\t\tconsole.error( '  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets', this );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphTargets.length; i ++ ) {\r\n\r\n\t\t\t\t\tif ( targetObject.geometry.morphTargets[i].name === propertyIndex ) {\r\n\r\n\t\t\t\t\t\tpropertyIndex = i;\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbindingType = this.BindingType.ArrayElement;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\t\t\tthis.propertyIndex = propertyIndex;\r\n\r\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\r\n\t\t\t// must use copy for Object3D.Euler/Quaternion\r\n\r\n\t\t\tbindingType = this.BindingType.HasFromToArray;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\r\n\t\t} else if ( nodeProperty.length !== undefined ) {\r\n\r\n\t\t\tbindingType = this.BindingType.EntireArray;\r\n\r\n\t\t\tthis.resolvedProperty = nodeProperty;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.propertyName = propertyName;\r\n\r\n\t\t}\r\n\r\n\t\t// select getter / setter\r\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\r\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\r\n\r\n\t},\r\n\r\n\tunbind: function() {\r\n\r\n\t\tthis.node = null;\r\n\r\n\t\t// back to the prototype version of getValue / setValue\r\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\r\n\t\tthis.getValue = this._getValue_unbound;\r\n\t\tthis.setValue = this._setValue_unbound;\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( THREE.PropertyBinding.prototype, { // prototype, continued\r\n\r\n\t// these are used to \"bind\" a nonexistent property\r\n\t_getValue_unavailable: function() {},\r\n\t_setValue_unavailable: function() {},\r\n\r\n\t// initial state of these methods that calls 'bind'\r\n\t_getValue_unbound: THREE.PropertyBinding.prototype.getValue,\r\n\t_setValue_unbound: THREE.PropertyBinding.prototype.setValue,\r\n\r\n\tBindingType: {\r\n\t\tDirect: 0,\r\n\t\tEntireArray: 1,\r\n\t\tArrayElement: 2,\r\n\t\tHasFromToArray: 3\r\n\t},\r\n\r\n\tVersioning: {\r\n\t\tNone: 0,\r\n\t\tNeedsUpdate: 1,\r\n\t\tMatrixWorldNeedsUpdate: 2\r\n\t},\r\n\r\n\tGetterByBindingType: [\r\n\r\n\t\tfunction getValue_direct( buffer, offset ) {\r\n\r\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_array( buffer, offset ) {\r\n\r\n\t\t\tvar source = this.resolvedProperty;\r\n\r\n\t\t\tfor ( var i = 0, n = source.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_arrayElement( buffer, offset ) {\r\n\r\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\r\n\r\n\t\t},\r\n\r\n\t\tfunction getValue_toArray( buffer, offset ) {\r\n\r\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\r\n\r\n\t\t}\r\n\r\n\t],\r\n\r\n\tSetterByBindingTypeAndVersioning: [\r\n\r\n\t\t[\r\n\t\t\t// Direct\r\n\r\n\t\t\tfunction setValue_direct( buffer, offset ) {\r\n\r\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// EntireArray\r\n\r\n\t\t\tfunction setValue_array( buffer, offset ) {\r\n\r\n\t\t\t\tvar dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tvar dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tvar dest = this.resolvedProperty;\r\n\r\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// ArrayElement\r\n\r\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t], [\r\n\r\n\t\t\t// HasToFromArray\r\n\r\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\t\t\t\tthis.targetObject.needsUpdate = true;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\r\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t]\r\n\r\n\t]\r\n\r\n} );\r\n\r\nTHREE.PropertyBinding.Composite =\r\n\t\tfunction( targetGroup, path, optionalParsedPath ) {\r\n\r\n\tvar parsedPath = optionalParsedPath ||\r\n\t\t\tTHREE.PropertyBinding.parseTrackName( path );\r\n\r\n\tthis._targetGroup = targetGroup;\r\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.Composite.prototype = {\r\n\r\n\tconstructor: THREE.PropertyBinding.Composite,\r\n\r\n\tgetValue: function( array, offset ) {\r\n\r\n\t\tthis.bind(); // bind all binding\r\n\r\n\t\tvar firstValidIndex = this._targetGroup.nCachedObjects_,\r\n\t\t\tbinding = this._bindings[ firstValidIndex ];\r\n\r\n\t\t// and only call .getValue on the first\r\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\r\n\r\n\t},\r\n\r\n\tsetValue: function( array, offset ) {\r\n\r\n\t\tvar bindings = this._bindings;\r\n\r\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\r\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].setValue( array, offset );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tbind: function() {\r\n\r\n\t\tvar bindings = this._bindings;\r\n\r\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\r\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].bind();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tunbind: function() {\r\n\r\n\t\tvar bindings = this._bindings;\r\n\r\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\r\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\r\n\r\n\t\t\tbindings[ i ].unbind();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.create = function( root, path, parsedPath ) {\r\n\r\n\tif ( ! ( root instanceof THREE.AnimationObjectGroup ) ) {\r\n\r\n\t\treturn new THREE.PropertyBinding( root, path, parsedPath );\r\n\r\n\t} else {\r\n\r\n\t\treturn new THREE.PropertyBinding.Composite( root, path, parsedPath );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.parseTrackName = function( trackName ) {\r\n\r\n\t// matches strings in the form of:\r\n\t//    nodeName.property\r\n\t//    nodeName.property[accessor]\r\n\t//    nodeName.material.property[accessor]\r\n\t//    uuid.property[accessor]\r\n\t//    uuid.objectName[objectIndex].propertyName[propertyIndex]\r\n\t//    parentName/nodeName.property\r\n\t//    parentName/parentName/nodeName.property[index]\r\n\t//\t  .bone[Armature.DEF_cog].position\r\n\t// created and tested via https://regex101.com/#javascript\r\n\r\n\tvar re = /^(([\\w]+\\/)*)([\\w-\\d]+)?(\\.([\\w]+)(\\[([\\w\\d\\[\\]\\_.:\\- ]+)\\])?)?(\\.([\\w.]+)(\\[([\\w\\d\\[\\]\\_. ]+)\\])?)$/;\r\n\tvar matches = re.exec(trackName);\r\n\r\n\tif( ! matches ) {\r\n\t\tthrow new Error( \"cannot parse trackName at all: \" + trackName );\r\n\t}\r\n\r\n    if (matches.index === re.lastIndex) {\r\n        re.lastIndex++;\r\n    }\r\n\r\n\tvar results = {\r\n\t\t// directoryName: matches[1], // (tschw) currently unused\r\n\t\tnodeName: matches[3], \t// allowed to be null, specified root node.\r\n\t\tobjectName: matches[5],\r\n\t\tobjectIndex: matches[7],\r\n\t\tpropertyName: matches[9],\r\n\t\tpropertyIndex: matches[11]\t// allowed to be null, specifies that the whole property is set.\r\n\t};\r\n\r\n\tif( results.propertyName === null || results.propertyName.length === 0 ) {\r\n\t\tthrow new Error( \"can not parse propertyName from trackName: \" + trackName );\r\n\t}\r\n\r\n\treturn results;\r\n\r\n};\r\n\r\nTHREE.PropertyBinding.findNode = function( root, nodeName ) {\r\n\r\n\tif( ! nodeName || nodeName === \"\" || nodeName === \"root\" || nodeName === \".\" || nodeName === -1 || nodeName === root.name || nodeName === root.uuid ) {\r\n\r\n\t\treturn root;\r\n\r\n\t}\r\n\r\n\t// search into skeleton bones.\r\n\tif( root.skeleton ) {\r\n\r\n\t\tvar searchSkeleton = function( skeleton ) {\r\n\r\n\t\t\tfor( var i = 0; i < skeleton.bones.length; i ++ ) {\r\n\r\n\t\t\t\tvar bone = skeleton.bones[i];\r\n\r\n\t\t\t\tif( bone.name === nodeName ) {\r\n\r\n\t\t\t\t\treturn bone;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t};\r\n\r\n\t\tvar bone = searchSkeleton( root.skeleton );\r\n\r\n\t\tif( bone ) {\r\n\r\n\t\t\treturn bone;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t// search into node subtree.\r\n\tif( root.children ) {\r\n\r\n\t\tvar searchNodeSubtree = function( children ) {\r\n\r\n\t\t\tfor( var i = 0; i < children.length; i ++ ) {\r\n\r\n\t\t\t\tvar childNode = children[i];\r\n\r\n\t\t\t\tif( childNode.name === nodeName || childNode.uuid === nodeName ) {\r\n\r\n\t\t\t\t\treturn childNode;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = searchNodeSubtree( childNode.children );\r\n\r\n\t\t\t\tif( result ) return result;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t};\r\n\r\n\t\tvar subTreeNode = searchNodeSubtree( root.children );\r\n\r\n\t\tif( subTreeNode ) {\r\n\r\n\t\t\treturn subTreeNode;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n};\r\n\r\n// File:src/animation/PropertyMixer.js\r\n\r\n/**\r\n *\r\n * Buffered scene graph property that allows weighted accumulation.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.PropertyMixer = function ( binding, typeName, valueSize ) {\r\n\r\n\tthis.binding = binding;\r\n\tthis.valueSize = valueSize;\r\n\r\n\tvar bufferType = Float64Array,\r\n\t\tmixFunction;\r\n\r\n\tswitch ( typeName ) {\r\n\r\n\t\tcase 'quaternion':\t\t\tmixFunction = this._slerp;\t\tbreak;\r\n\r\n\t\tcase 'string':\r\n\t\tcase 'bool':\r\n\r\n\t\t\tbufferType = Array,\t\tmixFunction = this._select;\t\tbreak;\r\n\r\n\t\tdefault:\t\t\t\t\tmixFunction = this._lerp;\r\n\r\n\t}\r\n\r\n\tthis.buffer = new bufferType( valueSize * 4 );\r\n\t// layout: [ incoming | accu0 | accu1 | orig ]\r\n\t//\r\n\t// interpolators can use .buffer as their .result\r\n\t// the data then goes to 'incoming'\r\n\t//\r\n\t// 'accu0' and 'accu1' are used frame-interleaved for\r\n\t// the cumulative result and are compared to detect\r\n\t// changes\r\n\t//\r\n\t// 'orig' stores the original state of the property\r\n\r\n\tthis._mixBufferRegion = mixFunction;\r\n\r\n\tthis.cumulativeWeight = 0;\r\n\r\n\tthis.useCount = 0;\r\n\tthis.referenceCount = 0;\r\n\r\n};\r\n\r\nTHREE.PropertyMixer.prototype = {\r\n\r\n\tconstructor: THREE.PropertyMixer,\r\n\r\n\t// accumulate data in the 'incoming' region into 'accu<i>'\r\n\taccumulate: function( accuIndex, weight ) {\r\n\r\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\r\n\t\t// the weight and shouldn't have made the call in the first place\r\n\r\n\t\tvar buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\t\t\toffset = accuIndex * stride + stride,\r\n\r\n\t\t\tcurrentWeight = this.cumulativeWeight;\r\n\r\n\t\tif ( currentWeight === 0 ) {\r\n\r\n\t\t\t// accuN := incoming * weight\r\n\r\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentWeight = weight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// accuN := accuN + incoming * weight\r\n\r\n\t\t\tcurrentWeight += weight;\r\n\t\t\tvar mix = weight / currentWeight;\r\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cumulativeWeight = currentWeight;\r\n\r\n\t},\r\n\r\n\t// apply the state of 'accu<i>' to the binding when accus differ\r\n\tapply: function( accuIndex ) {\r\n\r\n\t\tvar stride = this.valueSize,\r\n\t\t\tbuffer = this.buffer,\r\n\t\t\toffset = accuIndex * stride + stride,\r\n\r\n\t\t\tweight = this.cumulativeWeight,\r\n\r\n\t\t\tbinding = this.binding;\r\n\r\n\t\tthis.cumulativeWeight = 0;\r\n\r\n\t\tif ( weight < 1 ) {\r\n\r\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\r\n\r\n\t\t\tvar originalValueOffset = stride * 3;\r\n\r\n\t\t\tthis._mixBufferRegion(\r\n\t\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = stride, e = stride + stride; i !== e; ++ i ) {\r\n\r\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\r\n\r\n\t\t\t\t// value has changed -> update scene graph\r\n\r\n\t\t\t\tbinding.setValue( buffer, offset );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// remember the state of the bound property and copy it to both accus\r\n\tsaveOriginalState: function() {\r\n\r\n\t\tvar binding = this.binding;\r\n\r\n\t\tvar buffer = this.buffer,\r\n\t\t\tstride = this.valueSize,\r\n\r\n\t\t\toriginalValueOffset = stride * 3;\r\n\r\n\t\tbinding.getValue( buffer, originalValueOffset );\r\n\r\n\t\t// accu[0..1] := orig -- initially detect changes against the original\r\n\t\tfor ( var i = stride, e = originalValueOffset; i !== e; ++ i ) {\r\n\r\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\r\n\r\n\t\t}\r\n\r\n\t\tthis.cumulativeWeight = 0;\r\n\r\n\t},\r\n\r\n\t// apply the state previously taken via 'saveOriginalState' to the binding\r\n\trestoreOriginalState: function() {\r\n\r\n\t\tvar originalValueOffset = this.valueSize * 3;\r\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\r\n\r\n\t},\r\n\r\n\r\n\t// mix functions\r\n\r\n\t_select: function( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tif ( t >= 0.5 ) {\r\n\r\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_slerp: function( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tTHREE.Quaternion.slerpFlat( buffer, dstOffset,\r\n\t\t\t\tbuffer, dstOffset, buffer, srcOffset, t );\r\n\r\n\t},\r\n\r\n\t_lerp: function( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n\t\tvar s = 1 - t;\r\n\r\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\r\n\r\n\t\t\tvar j = dstOffset + i;\r\n\r\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/animation/tracks/BooleanKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of Boolean keyframe values.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.BooleanKeyframeTrack = function ( name, times, values ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values );\r\n\r\n};\r\n\r\nTHREE.BooleanKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.BooleanKeyframeTrack,\r\n\r\n\tValueTypeName: 'bool',\r\n\tValueBufferType: Array,\r\n\r\n\tDefaultInterpolation: THREE.InterpolateDiscrete,\r\n\r\n\tInterpolantFactoryMethodLinear: undefined,\r\n\tInterpolantFactoryMethodSmooth: undefined\r\n\r\n\t// Note: Actually this track could have a optimized / compressed\r\n\t// representation of a single value and a custom interpolant that\r\n\t// computes \"firstValue ^ isOdd( index )\".\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/ColorKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of keyframe values that represent color.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.ColorKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.ColorKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.ColorKeyframeTrack,\r\n\r\n\tValueTypeName: 'color'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n\r\n\t// Note: Very basic implementation and nothing special yet.\r\n\t// However, this is the place for color space parameterization.\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/NumberKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of numeric keyframe values.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.NumberKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.NumberKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.NumberKeyframeTrack,\r\n\r\n\tValueTypeName: 'number',\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/QuaternionKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of quaternion keyframe values.\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.QuaternionKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.QuaternionKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.QuaternionKeyframeTrack,\r\n\r\n\tValueTypeName: 'quaternion',\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\tDefaultInterpolation: THREE.InterpolateLinear,\r\n\r\n\tInterpolantFactoryMethodLinear: function( result ) {\r\n\r\n\t\treturn new THREE.QuaternionLinearInterpolant(\r\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\r\n\r\n\t},\r\n\r\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/StringKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track that interpolates Strings\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.StringKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.StringKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.StringKeyframeTrack,\r\n\r\n\tValueTypeName: 'string',\r\n\tValueBufferType: Array,\r\n\r\n\tDefaultInterpolation: THREE.InterpolateDiscrete,\r\n\r\n\tInterpolantFactoryMethodLinear: undefined,\r\n\r\n\tInterpolantFactoryMethodSmooth: undefined\r\n\r\n} );\r\n\r\n// File:src/animation/tracks/VectorKeyframeTrack.js\r\n\r\n/**\r\n *\r\n * A Track of vectored keyframe values.\r\n *\r\n *\r\n * @author Ben Houston / http://clara.io/\r\n * @author David Sarno / http://lighthaus.us/\r\n * @author tschw\r\n */\r\n\r\nTHREE.VectorKeyframeTrack = function ( name, times, values, interpolation ) {\r\n\r\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n};\r\n\r\nTHREE.VectorKeyframeTrack.prototype =\r\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\r\n\r\n\tconstructor: THREE.VectorKeyframeTrack,\r\n\r\n\tValueTypeName: 'vector'\r\n\r\n\t// ValueBufferType is inherited\r\n\r\n\t// DefaultInterpolation is inherited\r\n\r\n} );\r\n\r\n// File:src/audio/Audio.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\r\n */\r\n\r\nTHREE.Audio = function ( listener ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Audio';\r\n\r\n\tthis.context = listener.context;\r\n\tthis.source = this.context.createBufferSource();\r\n\tthis.source.onended = this.onEnded.bind( this );\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( listener.getInput() );\r\n\r\n\tthis.autoplay = false;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.playbackRate = 1;\r\n\tthis.isPlaying = false;\r\n\tthis.hasPlaybackControl = true;\r\n\tthis.sourceType = 'empty';\r\n\r\n\tthis.filters = [];\r\n\r\n};\r\n\r\nTHREE.Audio.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Audio,\r\n\r\n\tgetOutput: function () {\r\n\r\n\t\treturn this.gain;\r\n\r\n\t},\r\n\r\n\tsetNodeSource: function ( audioNode ) {\r\n\r\n\t\tthis.hasPlaybackControl = false;\r\n\t\tthis.sourceType = 'audioNode';\r\n\t\tthis.source = audioNode;\r\n\t\tthis.connect();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetBuffer: function ( audioBuffer ) {\r\n\r\n\t\tthis.source.buffer = audioBuffer;\r\n\t\tthis.sourceType = 'buffer';\r\n\r\n\t\tif ( this.autoplay ) this.play();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tplay: function () {\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar source = this.context.createBufferSource();\r\n\r\n\t\tsource.buffer = this.source.buffer;\r\n\t\tsource.loop = this.source.loop;\r\n\t\tsource.onended = this.source.onended;\r\n\t\tsource.start( 0, this.startTime );\r\n\t\tsource.playbackRate.value = this.playbackRate;\r\n\r\n\t\tthis.isPlaying = true;\r\n\r\n\t\tthis.source = source;\r\n\r\n\t\treturn this.connect();\r\n\r\n\t},\r\n\r\n\tpause: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.source.stop();\r\n\t\tthis.startTime = this.context.currentTime;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.source.stop();\r\n\t\tthis.startTime = 0;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconnect: function () {\r\n\r\n\t\tif ( this.filters.length > 0 ) {\r\n\r\n\t\t\tthis.source.connect( this.filters[ 0 ] );\r\n\r\n\t\t\tfor ( var i = 1, l = this.filters.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.source.connect( this.getOutput() );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdisconnect: function () {\r\n\r\n\t\tif ( this.filters.length > 0 ) {\r\n\r\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\r\n\r\n\t\t\tfor ( var i = 1, l = this.filters.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.source.disconnect( this.getOutput() );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetFilters: function () {\r\n\r\n\t\treturn this.filters;\r\n\r\n\t},\r\n\r\n\tsetFilters: function ( value ) {\r\n\r\n\t\tif ( ! value ) value = [];\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.disconnect();\r\n\t\t\tthis.filters = value;\r\n\t\t\tthis.connect();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.filters = value;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetFilter: function () {\r\n\r\n\t\treturn this.getFilters()[ 0 ];\r\n\r\n\t},\r\n\r\n\tsetFilter: function ( filter ) {\r\n\r\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\r\n\r\n\t},\r\n\r\n\tsetPlaybackRate: function ( value ) {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.playbackRate = value;\r\n\r\n\t\tif ( this.isPlaying === true ) {\r\n\r\n\t\t\tthis.source.playbackRate.value = this.playbackRate;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetPlaybackRate: function () {\r\n\r\n\t\treturn this.playbackRate;\r\n\r\n\t},\r\n\r\n\tonEnded: function () {\r\n\r\n\t\tthis.isPlaying = false;\r\n\r\n\t},\r\n\r\n\tgetLoop: function () {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.source.loop;\r\n\r\n\t},\r\n\r\n\tsetLoop: function ( value ) {\r\n\r\n\t\tif ( this.hasPlaybackControl === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.source.loop = value;\r\n\r\n\t},\r\n\r\n\tgetVolume: function () {\r\n\r\n\t\treturn this.gain.gain.value;\r\n\r\n\t},\r\n\r\n\r\n\tsetVolume: function ( value ) {\r\n\r\n\t\tthis.gain.gain.value = value;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/audio/AudioAnalyser.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AudioAnalyser = function ( audio, fftSize ) {\r\n\r\n\tthis.analyser = audio.context.createAnalyser();\r\n\tthis.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\r\n\r\n\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\r\n\r\n\taudio.getOutput().connect( this.analyser );\r\n\r\n};\r\n\r\nObject.assign( THREE.AudioAnalyser.prototype, {\r\n\r\n\tgetFrequencyData: function () {\r\n\r\n\t\tthis.analyser.getByteFrequencyData( this.data );\r\n\r\n\t\treturn this.data;\r\n\r\n\t},\r\n\r\n\tgetAverageFrequency: function () {\r\n\r\n\t\tvar value = 0, data = this.getFrequencyData();\r\n\r\n\t\tfor ( var i = 0; i < data.length; i ++ ) {\r\n\r\n\t\t\tvalue += data[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn value / data.length;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/audio/AudioContext.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nObject.defineProperty( THREE, 'AudioContext', {\r\n\r\n\tget: ( function () {\r\n\r\n\t\tvar context;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( context === undefined ) {\r\n\r\n\t\t\t\tcontext = new ( window.AudioContext || window.webkitAudioContext )();\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn context;\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n} );\r\n\r\n// File:src/audio/PositionalAudio.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PositionalAudio = function ( listener ) {\r\n\r\n\tTHREE.Audio.call( this, listener );\r\n\r\n\tthis.panner = this.context.createPanner();\r\n\tthis.panner.connect( this.gain );\r\n\r\n};\r\n\r\nTHREE.PositionalAudio.prototype = Object.assign( Object.create( THREE.Audio.prototype ), {\r\n\r\n\tconstructor: THREE.PositionalAudio,\r\n\r\n\tgetOutput: function () {\r\n\r\n\t\treturn this.panner;\r\n\r\n\t},\r\n\r\n\tgetRefDistance: function () {\r\n\r\n\t\treturn this.panner.refDistance;\r\n\r\n\t},\r\n\r\n\tsetRefDistance: function ( value ) {\r\n\r\n\t\tthis.panner.refDistance = value;\r\n\r\n\t},\r\n\r\n\tgetRolloffFactor: function () {\r\n\r\n\t\treturn this.panner.rolloffFactor;\r\n\r\n\t},\r\n\r\n\tsetRolloffFactor: function ( value ) {\r\n\r\n\t\tthis.panner.rolloffFactor = value;\r\n\r\n\t},\r\n\r\n\tgetDistanceModel: function () {\r\n\r\n\t\treturn this.panner.distanceModel;\r\n\r\n\t},\r\n\r\n\tsetDistanceModel: function ( value ) {\r\n\r\n\t\tthis.panner.distanceModel = value;\r\n\r\n\t},\r\n\r\n\tgetMaxDistance: function () {\r\n\r\n\t\treturn this.panner.maxDistance;\r\n\r\n\t},\r\n\r\n\tsetMaxDistance: function ( value ) {\r\n\r\n\t\tthis.panner.maxDistance = value;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: ( function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\r\n\t\treturn function updateMatrixWorld( force ) {\r\n\r\n\t\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\t\tposition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tthis.panner.setPosition( position.x, position.y, position.z );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n\r\n} );\r\n\r\n// File:src/audio/AudioListener.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AudioListener = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'AudioListener';\r\n\r\n\tthis.context = THREE.AudioContext;\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( this.context.destination );\r\n\r\n\tthis.filter = null;\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.AudioListener,\r\n\r\n\tgetInput: function () {\r\n\r\n\t\treturn this.gain;\r\n\r\n\t},\r\n\r\n\tremoveFilter: function ( ) {\r\n\r\n\t\tif ( this.filter !== null ) {\r\n\r\n\t\t\tthis.gain.disconnect( this.filter );\r\n\t\t\tthis.filter.disconnect( this.context.destination );\r\n\t\t\tthis.gain.connect( this.context.destination );\r\n\t\t\tthis.filter = null;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetFilter: function () {\r\n\r\n\t\treturn this.filter;\r\n\r\n\t},\r\n\r\n\tsetFilter: function ( value ) {\r\n\r\n\t\tif ( this.filter !== null ) {\r\n\r\n\t\t\tthis.gain.disconnect( this.filter );\r\n\t\t\tthis.filter.disconnect( this.context.destination );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.gain.disconnect( this.context.destination );\r\n\r\n\t\t}\r\n\r\n\t\tthis.filter = value;\r\n\t\tthis.gain.connect( this.filter );\r\n\t\tthis.filter.connect( this.context.destination );\r\n\r\n\t},\r\n\r\n\tgetMasterVolume: function () {\r\n\r\n\t\treturn this.gain.gain.value;\r\n\r\n\t},\r\n\r\n\tsetMasterVolume: function ( value ) {\r\n\r\n\t\tthis.gain.gain.value = value;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: ( function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\t\tvar scale = new THREE.Vector3();\r\n\r\n\t\tvar orientation = new THREE.Vector3();\r\n\r\n\t\treturn function updateMatrixWorld( force ) {\r\n\r\n\t\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\t\tvar listener = this.context.listener;\r\n\t\t\tvar up = this.up;\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, quaternion, scale );\r\n\r\n\t\t\torientation.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n\t\t\tlistener.setPosition( position.x, position.y, position.z );\r\n\t\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n} );\r\n\r\n// File:src/cameras/Camera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.Camera = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Camera';\r\n\r\n\tthis.matrixWorldInverse = new THREE.Matrix4();\r\n\tthis.projectionMatrix = new THREE.Matrix4();\r\n\r\n};\r\n\r\nTHREE.Camera.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Camera.prototype.constructor = THREE.Camera;\r\n\r\nTHREE.Camera.prototype.getWorldDirection = function () {\r\n\r\n\tvar quaternion = new THREE.Quaternion();\r\n\r\n\treturn function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.lookAt = function () {\r\n\r\n\t// This routine does not support cameras with rotated and/or translated parent(s)\r\n\r\n\tvar m1 = new THREE.Matrix4();\r\n\r\n\treturn function ( vector ) {\r\n\r\n\t\tm1.lookAt( this.position, vector, this.up );\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.clone = function () {\r\n\r\n\treturn new this.constructor().copy( this );\r\n\r\n};\r\n\r\nTHREE.Camera.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\r\n\tthis.projectionMatrix.copy( source.projectionMatrix );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/cameras/CubeCamera.js\r\n\r\n/**\r\n * Camera for rendering cube maps\r\n *\t- renders scene into axis-aligned cube\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CubeCamera = function ( near, far, cubeResolution ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'CubeCamera';\r\n\r\n\tvar fov = 90, aspect = 1;\r\n\r\n\tvar cameraPX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPX.up.set( 0, - 1, 0 );\r\n\tcameraPX.lookAt( new THREE.Vector3( 1, 0, 0 ) );\r\n\tthis.add( cameraPX );\r\n\r\n\tvar cameraNX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNX.up.set( 0, - 1, 0 );\r\n\tcameraNX.lookAt( new THREE.Vector3( - 1, 0, 0 ) );\r\n\tthis.add( cameraNX );\r\n\r\n\tvar cameraPY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPY.up.set( 0, 0, 1 );\r\n\tcameraPY.lookAt( new THREE.Vector3( 0, 1, 0 ) );\r\n\tthis.add( cameraPY );\r\n\r\n\tvar cameraNY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNY.up.set( 0, 0, - 1 );\r\n\tcameraNY.lookAt( new THREE.Vector3( 0, - 1, 0 ) );\r\n\tthis.add( cameraNY );\r\n\r\n\tvar cameraPZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPZ.up.set( 0, - 1, 0 );\r\n\tcameraPZ.lookAt( new THREE.Vector3( 0, 0, 1 ) );\r\n\tthis.add( cameraPZ );\r\n\r\n\tvar cameraNZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNZ.up.set( 0, - 1, 0 );\r\n\tcameraNZ.lookAt( new THREE.Vector3( 0, 0, - 1 ) );\r\n\tthis.add( cameraNZ );\r\n\r\n\tvar options = { format: THREE.RGBFormat, magFilter: THREE.LinearFilter, minFilter: THREE.LinearFilter };\r\n\r\n\tthis.renderTarget = new THREE.WebGLRenderTargetCube( cubeResolution, cubeResolution, options );\r\n\r\n\tthis.updateCubeMap = function ( renderer, scene ) {\r\n\r\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\r\n\r\n\t\tvar renderTarget = this.renderTarget;\r\n\t\tvar generateMipmaps = renderTarget.texture.generateMipmaps;\r\n\r\n\t\trenderTarget.texture.generateMipmaps = false;\r\n\r\n\t\trenderTarget.activeCubeFace = 0;\r\n\t\trenderer.render( scene, cameraPX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 1;\r\n\t\trenderer.render( scene, cameraNX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 2;\r\n\t\trenderer.render( scene, cameraPY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 3;\r\n\t\trenderer.render( scene, cameraNY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 4;\r\n\t\trenderer.render( scene, cameraPZ, renderTarget );\r\n\r\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\r\n\r\n\t\trenderTarget.activeCubeFace = 5;\r\n\t\trenderer.render( scene, cameraNZ, renderTarget );\r\n\r\n\t\trenderer.setRenderTarget( null );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.CubeCamera.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.CubeCamera.prototype.constructor = THREE.CubeCamera;\r\n\r\n// File:src/cameras/OrthographicCamera.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.OrthographicCamera = function ( left, right, top, bottom, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'OrthographicCamera';\r\n\r\n\tthis.zoom = 1;\r\n\r\n\tthis.left = left;\r\n\tthis.right = right;\r\n\tthis.top = top;\r\n\tthis.bottom = bottom;\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 0.1;\r\n\tthis.far = ( far !== undefined ) ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype = Object.assign( Object.create( THREE.Camera.prototype ), {\r\n\r\n\tconstructor: THREE.OrthographicCamera,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Camera.prototype.copy.call( this, source );\r\n\r\n\t\tthis.left = source.left;\r\n\t\tthis.right = source.right;\r\n\t\tthis.top = source.top;\r\n\t\tthis.bottom = source.bottom;\r\n\t\tthis.near = source.near;\r\n\t\tthis.far = source.far;\r\n\r\n\t\tthis.zoom = source.zoom;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateProjectionMatrix: function () {\r\n\r\n\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n\t\tvar cx = ( this.right + this.left ) / 2;\r\n\t\tvar cy = ( this.top + this.bottom ) / 2;\r\n\r\n\t\tthis.projectionMatrix.makeOrthographic( cx - dx, cx + dx, cy + dy, cy - dy, this.near, this.far );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.zoom = this.zoom;\r\n\t\tdata.object.left = this.left;\r\n\t\tdata.object.right = this.right;\r\n\t\tdata.object.top = this.top;\r\n\t\tdata.object.bottom = this.bottom;\r\n\t\tdata.object.near = this.near;\r\n\t\tdata.object.far = this.far;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/cameras/PerspectiveCamera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author greggman / http://games.greggman.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author tschw\r\n */\r\n\r\nTHREE.PerspectiveCamera = function( fov, aspect, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'PerspectiveCamera';\r\n\r\n\tthis.fov = fov !== undefined ? fov : 50;\r\n\tthis.zoom = 1;\r\n\r\n\tthis.near = near !== undefined ? near : 0.1;\r\n\tthis.far = far !== undefined ? far : 2000;\r\n\tthis.focus = 10;\r\n\r\n\tthis.aspect = aspect !== undefined ? aspect : 1;\r\n\tthis.view = null;\r\n\r\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\r\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype = Object.assign( Object.create( THREE.Camera.prototype ), {\r\n\r\n\tconstructor: THREE.PerspectiveCamera,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Camera.prototype.copy.call( this, source );\r\n\r\n\t\tthis.fov = source.fov;\r\n\t\tthis.zoom = source.zoom;\r\n\r\n\t\tthis.near = source.near;\r\n\t\tthis.far = source.far;\r\n\t\tthis.focus = source.focus;\r\n\r\n\t\tthis.aspect = source.aspect;\r\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\r\n\r\n\t\tthis.filmGauge = source.filmGauge;\r\n\t\tthis.filmOffset = source.filmOffset;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\r\n\t *\r\n\t * The default film gauge is 35, so that the focal length can be specified for\r\n\t * a 35mm (full frame) camera.\r\n\t *\r\n\t * Values for focal length and film gauge must have the same unit.\r\n\t */\r\n\tsetFocalLength: function ( focalLength ) {\r\n\r\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\r\n\t\tvar vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\r\n\r\n\t\tthis.fov = THREE.Math.RAD2DEG * 2 * Math.atan( vExtentSlope );\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Calculates the focal length from the current .fov and .filmGauge.\r\n\t */\r\n\tgetFocalLength: function () {\r\n\r\n\t\tvar vExtentSlope = Math.tan( THREE.Math.DEG2RAD * 0.5 * this.fov );\r\n\r\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\r\n\r\n\t},\r\n\r\n\tgetEffectiveFOV: function () {\r\n\r\n\t\treturn THREE.Math.RAD2DEG * 2 * Math.atan(\r\n\t\t\t\tMath.tan( THREE.Math.DEG2RAD * 0.5 * this.fov ) / this.zoom );\r\n\r\n\t},\r\n\r\n\tgetFilmWidth: function () {\r\n\r\n\t\t// film not completely covered in portrait format (aspect < 1)\r\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\r\n\r\n\t},\r\n\r\n\tgetFilmHeight: function () {\r\n\r\n\t\t// film not completely covered in landscape format (aspect > 1)\r\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\r\n\t * multi-monitor/multi-machine setups.\r\n\t *\r\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n\t * the monitors are in grid like this\r\n\t *\r\n\t *   +---+---+---+\r\n\t *   | A | B | C |\r\n\t *   +---+---+---+\r\n\t *   | D | E | F |\r\n\t *   +---+---+---+\r\n\t *\r\n\t * then for each monitor you would call it like this\r\n\t *\r\n\t *   var w = 1920;\r\n\t *   var h = 1080;\r\n\t *   var fullWidth = w * 3;\r\n\t *   var fullHeight = h * 2;\r\n\t *\r\n\t *   --A--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n\t *   --B--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n\t *   --C--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n\t *   --D--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n\t *   --E--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n\t *   --F--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n\t *\r\n\t *   Note there is no reason monitors have to be the same size or in a grid.\r\n\t */\r\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n\t\tthis.aspect = fullWidth / fullHeight;\r\n\r\n\t\tthis.view = {\r\n\t\t\tfullWidth: fullWidth,\r\n\t\t\tfullHeight: fullHeight,\r\n\t\t\toffsetX: x,\r\n\t\t\toffsetY: y,\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tclearViewOffset: function() {\r\n\r\n\t\tthis.view = null;\r\n\t\tthis.updateProjectionMatrix();\r\n\r\n\t},\r\n\r\n\tupdateProjectionMatrix: function () {\r\n\r\n\t\tvar near = this.near,\r\n\t\t\ttop = near * Math.tan(\r\n\t\t\t\t\tTHREE.Math.DEG2RAD * 0.5 * this.fov ) / this.zoom,\r\n\t\t\theight = 2 * top,\r\n\t\t\twidth = this.aspect * height,\r\n\t\t\tleft = - 0.5 * width,\r\n\t\t\tview = this.view;\r\n\r\n\t\tif ( view !== null ) {\r\n\r\n\t\t\tvar fullWidth = view.fullWidth,\r\n\t\t\t\tfullHeight = view.fullHeight;\r\n\r\n\t\t\tleft += view.offsetX * width / fullWidth;\r\n\t\t\ttop -= view.offsetY * height / fullHeight;\r\n\t\t\twidth *= view.width / fullWidth;\r\n\t\t\theight *= view.height / fullHeight;\r\n\r\n\t\t}\r\n\r\n\t\tvar skew = this.filmOffset;\r\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\r\n\r\n\t\tthis.projectionMatrix.makeFrustum(\r\n\t\t\t\tleft, left + width, top - height, top, near, this.far );\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.fov = this.fov;\r\n\t\tdata.object.zoom = this.zoom;\r\n\r\n\t\tdata.object.near = this.near;\r\n\t\tdata.object.far = this.far;\r\n\t\tdata.object.focus = this.focus;\r\n\r\n\t\tdata.object.aspect = this.aspect;\r\n\r\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\r\n\r\n\t\tdata.object.filmGauge = this.filmGauge;\r\n\t\tdata.object.filmOffset = this.filmOffset;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/cameras/StereoCamera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.StereoCamera = function () {\r\n\r\n\tthis.type = 'StereoCamera';\r\n\r\n\tthis.aspect = 1;\r\n\r\n\tthis.cameraL = new THREE.PerspectiveCamera();\r\n\tthis.cameraL.layers.enable( 1 );\r\n\tthis.cameraL.matrixAutoUpdate = false;\r\n\r\n\tthis.cameraR = new THREE.PerspectiveCamera();\r\n\tthis.cameraR.layers.enable( 2 );\r\n\tthis.cameraR.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nObject.assign( THREE.StereoCamera.prototype, {\r\n\r\n\tupdate: ( function () {\r\n\r\n\t\tvar focus, fov, aspect, near, far;\r\n\r\n\t\tvar eyeRight = new THREE.Matrix4();\r\n\t\tvar eyeLeft = new THREE.Matrix4();\r\n\r\n\t\treturn function update ( camera ) {\r\n\r\n\t\t\tvar needsUpdate = focus !== camera.focus || fov !== camera.fov ||\r\n\t\t\t\t\t\t\t\t\t\t\t\taspect !== camera.aspect * this.aspect || near !== camera.near ||\r\n\t\t\t\t\t\t\t\t\t\t\t\tfar !== camera.far;\r\n\r\n\t\t\tif ( needsUpdate ) {\r\n\r\n\t\t\t\tfocus = camera.focus;\r\n\t\t\t\tfov = camera.fov;\r\n\t\t\t\taspect = camera.aspect * this.aspect;\r\n\t\t\t\tnear = camera.near;\r\n\t\t\t\tfar = camera.far;\r\n\r\n\t\t\t\t// Off-axis stereoscopic effect based on\r\n\t\t\t\t// http://paulbourke.net/stereographics/stereorender/\r\n\r\n\t\t\t\tvar projectionMatrix = camera.projectionMatrix.clone();\r\n\t\t\t\tvar eyeSep = 0.064 / 2;\r\n\t\t\t\tvar eyeSepOnProjection = eyeSep * near / focus;\r\n\t\t\t\tvar ymax = near * Math.tan( THREE.Math.DEG2RAD * fov * 0.5 );\r\n\t\t\t\tvar xmin, xmax;\r\n\r\n\t\t\t\t// translate xOffset\r\n\r\n\t\t\t\teyeLeft.elements[ 12 ] = - eyeSep;\r\n\t\t\t\teyeRight.elements[ 12 ] = eyeSep;\r\n\r\n\t\t\t\t// for left eye\r\n\r\n\t\t\t\txmin = - ymax * aspect + eyeSepOnProjection;\r\n\t\t\t\txmax = ymax * aspect + eyeSepOnProjection;\r\n\r\n\t\t\t\tprojectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\r\n\t\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n\t\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\r\n\r\n\t\t\t\t// for right eye\r\n\r\n\t\t\t\txmin = - ymax * aspect - eyeSepOnProjection;\r\n\t\t\t\txmax = ymax * aspect - eyeSepOnProjection;\r\n\r\n\t\t\t\tprojectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\r\n\t\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n\t\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( eyeLeft );\r\n\t\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( eyeRight );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n} );\r\n\r\n// File:src/lights/Light.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Light = function ( color, intensity ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Light';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\tthis.intensity = intensity !== undefined ? intensity : 1;\r\n\r\n\tthis.receiveShadow = undefined;\r\n\r\n};\r\n\r\nTHREE.Light.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Light,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.color.copy( source.color );\r\n\t\tthis.intensity = source.intensity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\tdata.object.intensity = this.intensity;\r\n\r\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\r\n\r\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\r\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\r\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\r\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/lights/LightShadow.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LightShadow = function ( camera ) {\r\n\r\n\tthis.camera = camera;\r\n\r\n\tthis.bias = 0;\r\n\tthis.radius = 1;\r\n\r\n\tthis.mapSize = new THREE.Vector2( 512, 512 );\r\n\r\n\tthis.map = null;\r\n\tthis.matrix = new THREE.Matrix4();\r\n\r\n};\r\n\r\nObject.assign( THREE.LightShadow.prototype, {\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.camera = source.camera.clone();\r\n\r\n\t\tthis.bias = source.bias;\r\n\t\tthis.radius = source.radius;\r\n\r\n\t\tthis.mapSize.copy( source.mapSize );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/lights/AmbientLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AmbientLight = function ( color, intensity ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'AmbientLight';\r\n\r\n\tthis.castShadow = undefined;\r\n\r\n};\r\n\r\nTHREE.AmbientLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\r\n\r\n\tconstructor: THREE.AmbientLight\r\n\r\n} );\r\n\r\n// File:src/lights/DirectionalLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DirectionalLight = function ( color, intensity ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'DirectionalLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tthis.shadow = new THREE.DirectionalLightShadow();\r\n\r\n};\r\n\r\nTHREE.DirectionalLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\r\n\r\n\tconstructor: THREE.DirectionalLight,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\t\tthis.target = source.target.clone();\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/lights/DirectionalLightShadow.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.DirectionalLightShadow = function ( light ) {\r\n\r\n\tTHREE.LightShadow.call( this, new THREE.OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\r\n\r\n};\r\n\r\nTHREE.DirectionalLightShadow.prototype = Object.assign( Object.create( THREE.LightShadow.prototype ), {\r\n\r\n\tconstructor: THREE.DirectionalLightShadow\r\n\r\n} );\r\n\r\n// File:src/lights/HemisphereLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.HemisphereLight = function ( skyColor, groundColor, intensity ) {\r\n\r\n\tTHREE.Light.call( this, skyColor, intensity );\r\n\r\n\tthis.type = 'HemisphereLight';\r\n\r\n\tthis.castShadow = undefined;\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.groundColor = new THREE.Color( groundColor );\r\n\r\n};\r\n\r\nTHREE.HemisphereLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\r\n\r\n\tconstructor: THREE.HemisphereLight,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\t\tthis.groundColor.copy( source.groundColor );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/lights/PointLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\n\r\nTHREE.PointLight = function ( color, intensity, distance, decay ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'PointLight';\r\n\r\n\tObject.defineProperty( this, 'power', {\r\n\t\tget: function () {\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\r\n\t\t\treturn this.intensity * 4 * Math.PI;\r\n\r\n\t\t},\r\n\t\tset: function ( power ) {\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\r\n\t\t\tthis.intensity = power / ( 4 * Math.PI );\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.shadow = new THREE.LightShadow( new THREE.PerspectiveCamera( 90, 1, 0.5, 500 ) );\r\n\r\n};\r\n\r\nTHREE.PointLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\r\n\r\n\tconstructor: THREE.PointLight,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\t\tthis.distance = source.distance;\r\n\t\tthis.decay = source.decay;\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/lights/SpotLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpotLight = function ( color, intensity, distance, angle, penumbra, decay ) {\r\n\r\n\tTHREE.Light.call( this, color, intensity );\r\n\r\n\tthis.type = 'SpotLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tObject.defineProperty( this, 'power', {\r\n\t\tget: function () {\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\r\n\t\t\treturn this.intensity * Math.PI;\r\n\t\t},\r\n\t\tset: function ( power ) {\r\n\t\t\t// intensity = power per solid angle.\r\n\t\t\t// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\r\n\t\t\tthis.intensity = power / Math.PI;\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.shadow = new THREE.SpotLightShadow();\r\n\r\n};\r\n\r\nTHREE.SpotLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\r\n\r\n\tconstructor: THREE.SpotLight,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\t\tthis.distance = source.distance;\r\n\t\tthis.angle = source.angle;\r\n\t\tthis.penumbra = source.penumbra;\r\n\t\tthis.decay = source.decay;\r\n\r\n\t\tthis.target = source.target.clone();\r\n\r\n\t\tthis.shadow = source.shadow.clone();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/lights/SpotLightShadow.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.SpotLightShadow = function () {\r\n\r\n\tTHREE.LightShadow.call( this, new THREE.PerspectiveCamera( 50, 1, 0.5, 500 ) );\r\n\r\n};\r\n\r\nTHREE.SpotLightShadow.prototype = Object.assign( Object.create( THREE.LightShadow.prototype ), {\r\n\r\n\tconstructor: THREE.SpotLightShadow,\r\n\r\n\tupdate: function ( light ) {\r\n\r\n\t\tvar fov = THREE.Math.RAD2DEG * 2 * light.angle;\r\n\t\tvar aspect = this.mapSize.width / this.mapSize.height;\r\n\t\tvar far = light.distance || 500;\r\n\r\n\t\tvar camera = this.camera;\r\n\r\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\r\n\r\n\t\t\tcamera.fov = fov;\r\n\t\t\tcamera.aspect = aspect;\r\n\t\t\tcamera.far = far;\r\n\t\t\tcamera.updateProjectionMatrix();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/loaders/AudioLoader.js\r\n\r\n/**\r\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\r\n */\r\n\r\nTHREE.AudioLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.AudioLoader.prototype = {\r\n\r\n\tconstructor: THREE.AudioLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\tvar context = THREE.AudioContext;\r\n\r\n\t\t\tcontext.decodeAudioData( buffer, function ( audioBuffer ) {\r\n\r\n\t\t\t\tonLoad( audioBuffer );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/Cache.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Cache = {\r\n\r\n\tenabled: false,\r\n\r\n\tfiles: {},\r\n\r\n\tadd: function ( key, file ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\r\n\r\n\t\tthis.files[ key ] = file;\r\n\r\n\t},\r\n\r\n\tget: function ( key ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\r\n\r\n\t\treturn this.files[ key ];\r\n\r\n\t},\r\n\r\n\tremove: function ( key ) {\r\n\r\n\t\tdelete this.files[ key ];\r\n\r\n\t},\r\n\r\n\tclear: function () {\r\n\r\n\t\tthis.files = {};\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/Loader.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Loader = function () {\r\n\r\n\tthis.onLoadStart = function () {};\r\n\tthis.onLoadProgress = function () {};\r\n\tthis.onLoadComplete = function () {};\r\n\r\n};\r\n\r\nTHREE.Loader.prototype = {\r\n\r\n\tconstructor: THREE.Loader,\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tvar parts = url.split( '/' );\r\n\r\n\t\tif ( parts.length === 1 ) return './';\r\n\r\n\t\tparts.pop();\r\n\r\n\t\treturn parts.join( '/' ) + '/';\r\n\r\n\t},\r\n\r\n\tinitMaterials: function ( materials, texturePath, crossOrigin ) {\r\n\r\n\t\tvar array = [];\r\n\r\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\r\n\r\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\r\n\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tcreateMaterial: ( function () {\r\n\r\n\t\tvar color, textureLoader, materialLoader;\r\n\r\n\t\treturn function ( m, texturePath, crossOrigin ) {\r\n\r\n\t\t\tif ( color === undefined ) color = new THREE.Color();\r\n\t\t\tif ( textureLoader === undefined ) textureLoader = new THREE.TextureLoader();\r\n\t\t\tif ( materialLoader === undefined ) materialLoader = new THREE.MaterialLoader();\r\n\r\n\t\t\t// convert from old material format\r\n\r\n\t\t\tvar textures = {};\r\n\r\n\t\t\tfunction loadTexture( path, repeat, offset, wrap, anisotropy ) {\r\n\r\n\t\t\t\tvar fullPath = texturePath + path;\r\n\t\t\t\tvar loader = THREE.Loader.Handlers.get( fullPath );\r\n\r\n\t\t\t\tvar texture;\r\n\r\n\t\t\t\tif ( loader !== null ) {\r\n\r\n\t\t\t\t\ttexture = loader.load( fullPath );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttextureLoader.setCrossOrigin( crossOrigin );\r\n\t\t\t\t\ttexture = textureLoader.load( fullPath );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( repeat !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.repeat.fromArray( repeat );\r\n\r\n\t\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = THREE.RepeatWrapping;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( offset !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.offset.fromArray( offset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( wrap !== undefined ) {\r\n\r\n\t\t\t\t\tif ( wrap[ 0 ] === 'repeat' ) texture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\t\tif ( wrap[ 0 ] === 'mirror' ) texture.wrapS = THREE.MirroredRepeatWrapping;\r\n\r\n\t\t\t\t\tif ( wrap[ 1 ] === 'repeat' ) texture.wrapT = THREE.RepeatWrapping;\r\n\t\t\t\t\tif ( wrap[ 1 ] === 'mirror' ) texture.wrapT = THREE.MirroredRepeatWrapping;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( anisotropy !== undefined ) {\r\n\r\n\t\t\t\t\ttexture.anisotropy = anisotropy;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar uuid = THREE.Math.generateUUID();\r\n\r\n\t\t\t\ttextures[ uuid ] = texture;\r\n\r\n\t\t\t\treturn uuid;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//\r\n\r\n\t\t\tvar json = {\r\n\t\t\t\tuuid: THREE.Math.generateUUID(),\r\n\t\t\t\ttype: 'MeshLambertMaterial'\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var name in m ) {\r\n\r\n\t\t\t\tvar value = m[ name ];\r\n\r\n\t\t\t\tswitch ( name ) {\r\n\t\t\t\t\tcase 'DbgColor':\r\n\t\t\t\t\tcase 'DbgIndex':\r\n\t\t\t\t\tcase 'opticalDensity':\r\n\t\t\t\t\tcase 'illumination':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'DbgName':\r\n\t\t\t\t\t\tjson.name = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'blending':\r\n\t\t\t\t\t\tjson.blending = THREE[ value ];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorAmbient':\r\n\t\t\t\t\tcase 'mapAmbient':\r\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial:', name, 'is no longer supported.' );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorDiffuse':\r\n\t\t\t\t\t\tjson.color = color.fromArray( value ).getHex();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorSpecular':\r\n\t\t\t\t\t\tjson.specular = color.fromArray( value ).getHex();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'colorEmissive':\r\n\t\t\t\t\t\tjson.emissive = color.fromArray( value ).getHex();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'specularCoef':\r\n\t\t\t\t\t\tjson.shininess = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'shading':\r\n\t\t\t\t\t\tif ( value.toLowerCase() === 'basic' ) json.type = 'MeshBasicMaterial';\r\n\t\t\t\t\t\tif ( value.toLowerCase() === 'phong' ) json.type = 'MeshPhongMaterial';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapDiffuse':\r\n\t\t\t\t\t\tjson.map = loadTexture( value, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapDiffuseRepeat':\r\n\t\t\t\t\tcase 'mapDiffuseOffset':\r\n\t\t\t\t\tcase 'mapDiffuseWrap':\r\n\t\t\t\t\tcase 'mapDiffuseAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapLight':\r\n\t\t\t\t\t\tjson.lightMap = loadTexture( value, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapLightRepeat':\r\n\t\t\t\t\tcase 'mapLightOffset':\r\n\t\t\t\t\tcase 'mapLightWrap':\r\n\t\t\t\t\tcase 'mapLightAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAO':\r\n\t\t\t\t\t\tjson.aoMap = loadTexture( value, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAORepeat':\r\n\t\t\t\t\tcase 'mapAOOffset':\r\n\t\t\t\t\tcase 'mapAOWrap':\r\n\t\t\t\t\tcase 'mapAOAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapBump':\r\n\t\t\t\t\t\tjson.bumpMap = loadTexture( value, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapBumpScale':\r\n\t\t\t\t\t\tjson.bumpScale = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapBumpRepeat':\r\n\t\t\t\t\tcase 'mapBumpOffset':\r\n\t\t\t\t\tcase 'mapBumpWrap':\r\n\t\t\t\t\tcase 'mapBumpAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapNormal':\r\n\t\t\t\t\t\tjson.normalMap = loadTexture( value, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapNormalFactor':\r\n\t\t\t\t\t\tjson.normalScale = [ value, value ];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapNormalRepeat':\r\n\t\t\t\t\tcase 'mapNormalOffset':\r\n\t\t\t\t\tcase 'mapNormalWrap':\r\n\t\t\t\t\tcase 'mapNormalAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapSpecular':\r\n\t\t\t\t\t\tjson.specularMap = loadTexture( value, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapSpecularRepeat':\r\n\t\t\t\t\tcase 'mapSpecularOffset':\r\n\t\t\t\t\tcase 'mapSpecularWrap':\r\n\t\t\t\t\tcase 'mapSpecularAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAlpha':\r\n\t\t\t\t\t\tjson.alphaMap = loadTexture( value, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'mapAlphaRepeat':\r\n\t\t\t\t\tcase 'mapAlphaOffset':\r\n\t\t\t\t\tcase 'mapAlphaWrap':\r\n\t\t\t\t\tcase 'mapAlphaAnisotropy':\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'flipSided':\r\n\t\t\t\t\t\tjson.side = THREE.BackSide;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'doubleSided':\r\n\t\t\t\t\t\tjson.side = THREE.DoubleSide;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'transparency':\r\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial: transparency has been renamed to opacity' );\r\n\t\t\t\t\t\tjson.opacity = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'depthTest':\r\n\t\t\t\t\tcase 'depthWrite':\r\n\t\t\t\t\tcase 'colorWrite':\r\n\t\t\t\t\tcase 'opacity':\r\n\t\t\t\t\tcase 'reflectivity':\r\n\t\t\t\t\tcase 'transparent':\r\n\t\t\t\t\tcase 'visible':\r\n\t\t\t\t\tcase 'wireframe':\r\n\t\t\t\t\t\tjson[ name ] = value;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'vertexColors':\r\n\t\t\t\t\t\tif ( value === true ) json.vertexColors = THREE.VertexColors;\r\n\t\t\t\t\t\tif ( value === 'face' ) json.vertexColors = THREE.FaceColors;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.error( 'THREE.Loader.createMaterial: Unsupported', name, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.type === 'MeshBasicMaterial' ) delete json.emissive;\r\n\t\t\tif ( json.type !== 'MeshPhongMaterial' ) delete json.specular;\r\n\r\n\t\t\tif ( json.opacity < 1 ) json.transparent = true;\r\n\r\n\t\t\tmaterialLoader.setTextures( textures );\r\n\r\n\t\t\treturn materialLoader.parse( json );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n};\r\n\r\nTHREE.Loader.Handlers = {\r\n\r\n\thandlers: [],\r\n\r\n\tadd: function ( regex, loader ) {\r\n\r\n\t\tthis.handlers.push( regex, loader );\r\n\r\n\t},\r\n\r\n\tget: function ( file ) {\r\n\r\n\t\tvar handlers = this.handlers;\r\n\r\n\t\tfor ( var i = 0, l = handlers.length; i < l; i += 2 ) {\r\n\r\n\t\t\tvar regex = handlers[ i ];\r\n\t\t\tvar loader  = handlers[ i + 1 ];\r\n\r\n\t\t\tif ( regex.test( file ) ) {\r\n\r\n\t\t\t\treturn loader;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/XHRLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.XHRLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.XHRLoader.prototype = {\r\n\r\n\tconstructor: THREE.XHRLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = THREE.Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tif ( onLoad ) {\r\n\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tonLoad( cached );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tvar request = new XMLHttpRequest();\r\n\t\trequest.overrideMimeType( 'text/plain' );\r\n\t\trequest.open( 'GET', url, true );\r\n\r\n\t\trequest.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\tvar response = event.target.response;\r\n\r\n\t\t\tTHREE.Cache.add( url, response );\r\n\r\n\t\t\tif ( this.status === 200 ) {\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( response );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} else if ( this.status === 0 ) {\r\n\r\n\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\r\n\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\r\n\r\n\t\t\t\tconsole.warn( 'THREE.XHRLoader: HTTP Status 0 received.' );\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( response );\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\trequest.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\r\n\r\n\t\trequest.send( null );\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\treturn request;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t},\r\n\r\n\tsetResponseType: function ( value ) {\r\n\r\n\t\tthis.responseType = value;\r\n\r\n\t},\r\n\r\n\tsetWithCredentials: function ( value ) {\r\n\r\n\t\tthis.withCredentials = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/FontLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.FontLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.FontLoader.prototype = {\r\n\r\n\tconstructor: THREE.FontLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tvar json;\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tjson = JSON.parse( text );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\r\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar font = scope.parse( json );\r\n\r\n\t\t\tif ( onLoad ) onLoad( font );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\treturn new THREE.Font( json );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ImageLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ImageLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.ImageLoader.prototype = {\r\n\r\n\tconstructor: THREE.ImageLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.path !== undefined ) url = this.path + url;\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = THREE.Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\tif ( onLoad ) {\r\n\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tonLoad( cached );\r\n\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tvar image = document.createElement( 'img' );\r\n\r\n\t\timage.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\tTHREE.Cache.add( url, this );\r\n\r\n\t\t\tif ( onLoad ) onLoad( this );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\timage.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\timage.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\timage.src = url;\r\n\r\n\t\treturn image;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/JSONLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.JSONLoader = function ( manager ) {\r\n\r\n\tif ( typeof manager === 'boolean' ) {\r\n\r\n\t\tconsole.warn( 'THREE.JSONLoader: showStatus parameter has been removed from constructor.' );\r\n\t\tmanager = undefined;\r\n\r\n\t}\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\tthis.withCredentials = false;\r\n\r\n};\r\n\r\nTHREE.JSONLoader.prototype = {\r\n\r\n\tconstructor: THREE.JSONLoader,\r\n\r\n\t// Deprecated\r\n\r\n\tget statusDomElement () {\r\n\r\n\t\tif ( this._statusDomElement === undefined ) {\r\n\r\n\t\t\tthis._statusDomElement = document.createElement( 'div' );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'THREE.JSONLoader: .statusDomElement has been removed.' );\r\n\t\treturn this._statusDomElement;\r\n\r\n\t},\r\n\r\n\tload: function( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar texturePath = this.texturePath && ( typeof this.texturePath === \"string\" ) ? this.texturePath : THREE.Loader.prototype.extractUrlBase( url );\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setWithCredentials( this.withCredentials );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tvar json = JSON.parse( text );\r\n\t\t\tvar metadata = json.metadata;\r\n\r\n\t\t\tif ( metadata !== undefined ) {\r\n\r\n\t\t\t\tvar type = metadata.type;\r\n\r\n\t\t\t\tif ( type !== undefined ) {\r\n\r\n\t\t\t\t\tif ( type.toLowerCase() === 'object' ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.ObjectLoader instead.' );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( type.toLowerCase() === 'scene' ) {\r\n\r\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.SceneLoader instead.' );\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar object = scope.parse( json, texturePath );\r\n\t\t\tonLoad( object.geometry, object.materials );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tthis.texturePath = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json, texturePath ) {\r\n\r\n\t\tvar geometry = new THREE.Geometry(),\r\n\t\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\r\n\r\n\t\tparseModel( scale );\r\n\r\n\t\tparseSkin();\r\n\t\tparseMorphing( scale );\r\n\t\tparseAnimations();\r\n\r\n\t\tgeometry.computeFaceNormals();\r\n\t\tgeometry.computeBoundingSphere();\r\n\r\n\t\tfunction parseModel( scale ) {\r\n\r\n\t\t\tfunction isBitSet( value, position ) {\r\n\r\n\t\t\t\treturn value & ( 1 << position );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar i, j, fi,\r\n\r\n\t\t\toffset, zLength,\r\n\r\n\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\r\n\r\n\t\t\ttype,\r\n\t\t\tisQuad,\r\n\t\t\thasMaterial,\r\n\t\t\thasFaceVertexUv,\r\n\t\t\thasFaceNormal, hasFaceVertexNormal,\r\n\t\t\thasFaceColor, hasFaceVertexColor,\r\n\r\n\t\tvertex, face, faceA, faceB, hex, normal,\r\n\r\n\t\t\tuvLayer, uv, u, v,\r\n\r\n\t\t\tfaces = json.faces,\r\n\t\t\tvertices = json.vertices,\r\n\t\t\tnormals = json.normals,\r\n\t\t\tcolors = json.colors,\r\n\r\n\t\t\tnUvLayers = 0;\r\n\r\n\t\t\tif ( json.uvs !== undefined ) {\r\n\r\n\t\t\t\t// disregard empty arrays\r\n\r\n\t\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\r\n\r\n\t\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset = 0;\r\n\t\t\tzLength = vertices.length;\r\n\r\n\t\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\t\tvertex = new THREE.Vector3();\r\n\r\n\t\t\t\tvertex.x = vertices[ offset ++ ] * scale;\r\n\t\t\t\tvertex.y = vertices[ offset ++ ] * scale;\r\n\t\t\t\tvertex.z = vertices[ offset ++ ] * scale;\r\n\r\n\t\t\t\tgeometry.vertices.push( vertex );\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset = 0;\r\n\t\t\tzLength = faces.length;\r\n\r\n\t\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\t\ttype = faces[ offset ++ ];\r\n\r\n\r\n\t\t\t\tisQuad              = isBitSet( type, 0 );\r\n\t\t\t\thasMaterial         = isBitSet( type, 1 );\r\n\t\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\r\n\t\t\t\thasFaceNormal       = isBitSet( type, 4 );\r\n\t\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\r\n\t\t\t\thasFaceColor\t     = isBitSet( type, 6 );\r\n\t\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\r\n\r\n\t\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\r\n\r\n\t\t\t\tif ( isQuad ) {\r\n\r\n\t\t\t\t\tfaceA = new THREE.Face3();\r\n\t\t\t\t\tfaceA.a = faces[ offset ];\r\n\t\t\t\t\tfaceA.b = faces[ offset + 1 ];\r\n\t\t\t\t\tfaceA.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\t\tfaceB = new THREE.Face3();\r\n\t\t\t\t\tfaceB.a = faces[ offset + 1 ];\r\n\t\t\t\t\tfaceB.b = faces[ offset + 2 ];\r\n\t\t\t\t\tfaceB.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\t\toffset += 4;\r\n\r\n\t\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tfaceA.materialIndex = materialIndex;\r\n\t\t\t\t\t\tfaceB.materialIndex = materialIndex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = [];\r\n\r\n\t\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\t\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tfaceA.normal.set(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tfaceB.normal.copy( faceA.normal );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\r\n\r\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\r\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\t\tfaceA.color.setHex( hex );\r\n\t\t\t\t\t\tfaceB.color.setHex( hex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new THREE.Color( hex ) );\r\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new THREE.Color( hex ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.faces.push( faceA );\r\n\t\t\t\t\tgeometry.faces.push( faceB );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface = new THREE.Face3();\r\n\t\t\t\t\tface.a = faces[ offset ++ ];\r\n\t\t\t\t\tface.b = faces[ offset ++ ];\r\n\t\t\t\t\tface.c = faces[ offset ++ ];\r\n\r\n\t\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\r\n\t\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tface.normal.set(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tface.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\tface.vertexColors.push( new THREE.Color( colors[ colorIndex ] ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.faces.push( face );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseSkin() {\r\n\r\n\t\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\r\n\r\n\t\t\tif ( json.skinWeights ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\t\tvar x =                               json.skinWeights[ i ];\r\n\t\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\r\n\t\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\r\n\t\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\r\n\r\n\t\t\t\t\tgeometry.skinWeights.push( new THREE.Vector4( x, y, z, w ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.skinIndices ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\t\tvar a =                               json.skinIndices[ i ];\r\n\t\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\r\n\t\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\r\n\t\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\r\n\r\n\t\t\t\t\tgeometry.skinIndices.push( new THREE.Vector4( a, b, c, d ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.bones = json.bones;\r\n\r\n\t\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\r\n\r\n\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\r\n\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseMorphing( scale ) {\r\n\r\n\t\t\tif ( json.morphTargets !== undefined ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tgeometry.morphTargets[ i ] = {};\r\n\t\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\r\n\t\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\r\n\r\n\t\t\t\t\tvar dstVertices = geometry.morphTargets[ i ].vertices;\r\n\t\t\t\t\tvar srcVertices = json.morphTargets[ i ].vertices;\r\n\r\n\t\t\t\t\tfor ( var v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\r\n\r\n\t\t\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\r\n\t\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\r\n\t\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\r\n\r\n\t\t\t\t\t\tdstVertices.push( vertex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.morphColors !== undefined && json.morphColors.length > 0 ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.' );\r\n\r\n\t\t\t\tvar faces = geometry.faces;\r\n\t\t\t\tvar morphColors = json.morphColors[ 0 ].colors;\r\n\r\n\t\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tfaces[ i ].color.fromArray( morphColors, i * 3 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseAnimations() {\r\n\r\n\t\t\tvar outputAnimations = [];\r\n\r\n\t\t\t// parse old style Bone/Hierarchy animations\r\n\t\t\tvar animations = [];\r\n\r\n\t\t\tif ( json.animation !== undefined ) {\r\n\r\n\t\t\t\tanimations.push( json.animation );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.animations !== undefined ) {\r\n\r\n\t\t\t\tif ( json.animations.length ) {\r\n\r\n\t\t\t\t\tanimations = animations.concat( json.animations );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tanimations.push( json.animations );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0; i < animations.length; i ++ ) {\r\n\r\n\t\t\t\tvar clip = THREE.AnimationClip.parseAnimation( animations[ i ], geometry.bones );\r\n\t\t\t\tif ( clip ) outputAnimations.push( clip );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// parse implicit morph animations\r\n\t\t\tif ( geometry.morphTargets ) {\r\n\r\n\t\t\t\t// TODO: Figure out what an appropraite FPS is for morph target animations -- defaulting to 10, but really it is completely arbitrary.\r\n\t\t\t\tvar morphAnimationClips = THREE.AnimationClip.CreateClipsFromMorphTargetSequences( geometry.morphTargets, 10 );\r\n\t\t\t\toutputAnimations = outputAnimations.concat( morphAnimationClips );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( outputAnimations.length > 0 ) geometry.animations = outputAnimations;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.materials === undefined || json.materials.length === 0 ) {\r\n\r\n\t\t\treturn { geometry: geometry };\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar materials = THREE.Loader.prototype.initMaterials( json.materials, texturePath, this.crossOrigin );\r\n\r\n\t\t\treturn { geometry: geometry, materials: materials };\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/LoadingManager.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LoadingManager = function ( onLoad, onProgress, onError ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar isLoading = false, itemsLoaded = 0, itemsTotal = 0;\r\n\r\n\tthis.onStart = undefined;\r\n\tthis.onLoad = onLoad;\r\n\tthis.onProgress = onProgress;\r\n\tthis.onError = onError;\r\n\r\n\tthis.itemStart = function ( url ) {\r\n\r\n\t\titemsTotal ++;\r\n\r\n\t\tif ( isLoading === false ) {\r\n\r\n\t\t\tif ( scope.onStart !== undefined ) {\r\n\r\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisLoading = true;\r\n\r\n\t};\r\n\r\n\tthis.itemEnd = function ( url ) {\r\n\r\n\t\titemsLoaded ++;\r\n\r\n\t\tif ( scope.onProgress !== undefined ) {\r\n\r\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t}\r\n\r\n\t\tif ( itemsLoaded === itemsTotal ) {\r\n\r\n\t\t\tisLoading = false;\r\n\r\n\t\t\tif ( scope.onLoad !== undefined ) {\r\n\r\n\t\t\t\tscope.onLoad();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.itemError = function ( url ) {\r\n\r\n\t\tif ( scope.onError !== undefined ) {\r\n\r\n\t\t\tscope.onError( url );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.DefaultLoadingManager = new THREE.LoadingManager();\r\n\r\n// File:src/loaders/BufferGeometryLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometryLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.BufferGeometryLoader.prototype = {\r\n\r\n\tconstructor: THREE.BufferGeometryLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\tvar index = json.data.index;\r\n\r\n\t\tvar TYPED_ARRAYS = {\r\n\t\t\t'Int8Array': Int8Array,\r\n\t\t\t'Uint8Array': Uint8Array,\r\n\t\t\t'Uint8ClampedArray': Uint8ClampedArray,\r\n\t\t\t'Int16Array': Int16Array,\r\n\t\t\t'Uint16Array': Uint16Array,\r\n\t\t\t'Int32Array': Int32Array,\r\n\t\t\t'Uint32Array': Uint32Array,\r\n\t\t\t'Float32Array': Float32Array,\r\n\t\t\t'Float64Array': Float64Array\r\n\t\t};\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tvar typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\r\n\t\t\tgeometry.setIndex( new THREE.BufferAttribute( typedArray, 1 ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = json.data.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\t\t\tvar typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\r\n\r\n\t\t\tgeometry.addAttribute( key, new THREE.BufferAttribute( typedArray, attribute.itemSize, attribute.normalized ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = json.data.groups || json.data.drawcalls || json.data.offsets;\r\n\r\n\t\tif ( groups !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, n = groups.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar group = groups[ i ];\r\n\r\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar boundingSphere = json.data.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== undefined ) {\r\n\r\n\t\t\tvar center = new THREE.Vector3();\r\n\r\n\t\t\tif ( boundingSphere.center !== undefined ) {\r\n\r\n\t\t\t\tcenter.fromArray( boundingSphere.center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.boundingSphere = new THREE.Sphere( center, boundingSphere.radius );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/MaterialLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MaterialLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\tthis.textures = {};\r\n\r\n};\r\n\r\nTHREE.MaterialLoader.prototype = {\r\n\r\n\tconstructor: THREE.MaterialLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetTextures: function ( value ) {\r\n\r\n\t\tthis.textures = value;\r\n\r\n\t},\r\n\r\n\tgetTexture: function ( name ) {\r\n\r\n\t\tvar textures = this.textures;\r\n\r\n\t\tif ( textures[ name ] === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\r\n\r\n\t\t}\r\n\r\n\t\treturn textures[ name ];\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar material = new THREE[ json.type ];\r\n\r\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\r\n\t\tif ( json.name !== undefined ) material.name = json.name;\r\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\r\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\r\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\r\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\r\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\r\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\r\n\t\tif ( json.shading !== undefined ) material.shading = json.shading;\r\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\r\n\t\tif ( json.side !== undefined ) material.side = json.side;\r\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\r\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\r\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\r\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\r\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\r\n\r\n\t\t// for PointsMaterial\r\n\t\tif ( json.size !== undefined ) material.size = json.size;\r\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\r\n\r\n\t\t// maps\r\n\r\n\t\tif ( json.map !== undefined ) material.map = this.getTexture( json.map );\r\n\r\n\t\tif ( json.alphaMap !== undefined ) {\r\n\r\n\t\t\tmaterial.alphaMap = this.getTexture( json.alphaMap );\r\n\t\t\tmaterial.transparent = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = this.getTexture( json.bumpMap );\r\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\r\n\r\n\t\tif ( json.normalMap !== undefined ) material.normalMap = this.getTexture( json.normalMap );\r\n\t\tif ( json.normalScale !== undefined ) {\r\n\r\n\t\t\tvar normalScale = json.normalScale;\r\n\r\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\r\n\r\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\r\n\r\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.normalScale = new THREE.Vector2().fromArray( normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = this.getTexture( json.displacementMap );\r\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\r\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\r\n\r\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = this.getTexture( json.roughnessMap );\r\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = this.getTexture( json.metalnessMap );\r\n\r\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = this.getTexture( json.emissiveMap );\r\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\r\n\r\n\t\tif ( json.specularMap !== undefined ) material.specularMap = this.getTexture( json.specularMap );\r\n\r\n\t\tif ( json.envMap !== undefined ) {\r\n\r\n\t\t\tmaterial.envMap = this.getTexture( json.envMap );\r\n\t\t\tmaterial.combine = THREE.MultiplyOperation;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.reflectivity ) material.reflectivity = json.reflectivity;\r\n\r\n\t\tif ( json.lightMap !== undefined ) material.lightMap = this.getTexture( json.lightMap );\r\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\r\n\r\n\t\tif ( json.aoMap !== undefined ) material.aoMap = this.getTexture( json.aoMap );\r\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\r\n\r\n\t\t// MultiMaterial\r\n\r\n\t\tif ( json.materials !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ObjectLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ObjectLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\tthis.texturePath = '';\r\n\r\n};\r\n\r\nTHREE.ObjectLoader.prototype = {\r\n\r\n\tconstructor: THREE.ObjectLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.texturePath === '' ) {\r\n\r\n\t\t\tthis.texturePath = url.substring( 0, url.lastIndexOf( '/' ) + 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tscope.parse( JSON.parse( text ), onLoad );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tthis.texturePath = value;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json, onLoad ) {\r\n\r\n\t\tvar geometries = this.parseGeometries( json.geometries );\r\n\r\n\t\tvar images = this.parseImages( json.images, function () {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t} );\r\n\r\n\t\tvar textures  = this.parseTextures( json.textures, images );\r\n\t\tvar materials = this.parseMaterials( json.materials, textures );\r\n\r\n\t\tvar object = this.parseObject( json.object, geometries, materials );\r\n\r\n\t\tif ( json.animations ) {\r\n\r\n\t\t\tobject.animations = this.parseAnimations( json.animations );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t},\r\n\r\n\tparseGeometries: function ( json ) {\r\n\r\n\t\tvar geometries = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar geometryLoader = new THREE.JSONLoader();\r\n\t\t\tvar bufferGeometryLoader = new THREE.BufferGeometryLoader();\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar geometry;\r\n\t\t\t\tvar data = json[ i ];\r\n\r\n\t\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\t\tcase 'PlaneGeometry':\r\n\t\t\t\t\tcase 'PlaneBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BoxGeometry':\r\n\t\t\t\t\tcase 'BoxBufferGeometry':\r\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.depth,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.depthSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CircleGeometry':\r\n\t\t\t\t\tcase 'CircleBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CylinderGeometry':\r\n\t\t\t\t\tcase 'CylinderBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radiusTop,\r\n\t\t\t\t\t\t\tdata.radiusBottom,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'ConeGeometry':\r\n\t\t\t\t\tcase 'ConeBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE [ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'SphereGeometry':\r\n\t\t\t\t\tcase 'SphereBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'DodecahedronGeometry':\r\n\t\t\t\t\tcase 'IcosahedronGeometry':\r\n\t\t\t\t\tcase 'OctahedronGeometry':\r\n\t\t\t\t\tcase 'TetrahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'RingGeometry':\r\n\t\t\t\t\tcase 'RingBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.innerRadius,\r\n\t\t\t\t\t\t\tdata.outerRadius,\r\n\t\t\t\t\t\t\tdata.thetaSegments,\r\n\t\t\t\t\t\t\tdata.phiSegments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusGeometry':\r\n\t\t\t\t\tcase 'TorusBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.arc\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusKnotGeometry':\r\n\t\t\t\t\tcase 'TorusKnotBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.p,\r\n\t\t\t\t\t\t\tdata.q\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'LatheGeometry':\r\n\t\t\t\t\tcase 'LatheBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.points,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Geometry':\r\n\r\n\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data, this.texturePath ).geometry;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\r\n\r\n\t\t\t\tgeometries[ data.uuid ] = geometry;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometries;\r\n\r\n\t},\r\n\r\n\tparseMaterials: function ( json, textures ) {\r\n\r\n\t\tvar materials = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar loader = new THREE.MaterialLoader();\r\n\t\t\tloader.setTextures( textures );\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar material = loader.parse( json[ i ] );\r\n\t\t\t\tmaterials[ material.uuid ] = material;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn materials;\r\n\r\n\t},\r\n\r\n\tparseAnimations: function ( json ) {\r\n\r\n\t\tvar animations = [];\r\n\r\n\t\tfor ( var i = 0; i < json.length; i ++ ) {\r\n\r\n\t\t\tvar clip = THREE.AnimationClip.parse( json[ i ] );\r\n\r\n\t\t\tanimations.push( clip );\r\n\r\n\t\t}\r\n\r\n\t\treturn animations;\r\n\r\n\t},\r\n\r\n\tparseImages: function ( json, onLoad ) {\r\n\r\n\t\tvar scope = this;\r\n\t\tvar images = {};\r\n\r\n\t\tfunction loadImage( url ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\treturn loader.load( url, function () {\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json !== undefined && json.length > 0 ) {\r\n\r\n\t\t\tvar manager = new THREE.LoadingManager( onLoad );\r\n\r\n\t\t\tvar loader = new THREE.ImageLoader( manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar image = json[ i ];\r\n\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.texturePath + image.url;\r\n\r\n\t\t\t\timages[ image.uuid ] = loadImage( path );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn images;\r\n\r\n\t},\r\n\r\n\tparseTextures: function ( json, images ) {\r\n\r\n\t\tfunction parseConstant( value ) {\r\n\r\n\t\t\tif ( typeof( value ) === 'number' ) return value;\r\n\r\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\r\n\r\n\t\t\treturn THREE[ value ];\r\n\r\n\t\t}\r\n\r\n\t\tvar textures = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar data = json[ i ];\r\n\r\n\t\t\t\tif ( data.image === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( images[ data.image ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar texture = new THREE.Texture( images[ data.image ] );\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\ttexture.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\r\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping );\r\n\t\t\t\tif ( data.offset !== undefined ) texture.offset = new THREE.Vector2( data.offset[ 0 ], data.offset[ 1 ] );\r\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat = new THREE.Vector2( data.repeat[ 0 ], data.repeat[ 1 ] );\r\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter );\r\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter );\r\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\r\n\t\t\t\tif ( Array.isArray( data.wrap ) ) {\r\n\r\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ] );\r\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextures[ data.uuid ] = texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn textures;\r\n\r\n\t},\r\n\r\n\tparseObject: function () {\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\r\n\t\treturn function ( data, geometries, materials ) {\r\n\r\n\t\t\tvar object;\r\n\r\n\t\t\tfunction getGeometry( name ) {\r\n\r\n\t\t\t\tif ( geometries[ name ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn geometries[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction getMaterial( name ) {\r\n\r\n\t\t\t\tif ( name === undefined ) return undefined;\r\n\r\n\t\t\t\tif ( materials[ name ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn materials[ name ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\tcase 'Scene':\r\n\r\n\t\t\t\t\tobject = new THREE.Scene();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PerspectiveCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\r\n\t\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\r\n\t\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\r\n\t\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\r\n\t\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\r\n\t\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'OrthographicCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'AmbientLight':\r\n\r\n\t\t\t\t\tobject = new THREE.AmbientLight( data.color, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'DirectionalLight':\r\n\r\n\t\t\t\t\tobject = new THREE.DirectionalLight( data.color, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointLight':\r\n\r\n\t\t\t\t\tobject = new THREE.PointLight( data.color, data.intensity, data.distance, data.decay );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpotLight':\r\n\r\n\t\t\t\t\tobject = new THREE.SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'HemisphereLight':\r\n\r\n\t\t\t\t\tobject = new THREE.HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Mesh':\r\n\r\n\t\t\t\t\tvar geometry = getGeometry( data.geometry );\r\n\t\t\t\t\tvar material = getMaterial( data.material );\r\n\r\n\t\t\t\t\tif ( geometry.bones && geometry.bones.length > 0 ) {\r\n\r\n\t\t\t\t\t\tobject = new THREE.SkinnedMesh( geometry, material );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tobject = new THREE.Mesh( geometry, material );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'LOD':\r\n\r\n\t\t\t\t\tobject = new THREE.LOD();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Line':\r\n\r\n\t\t\t\t\tobject = new THREE.Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointCloud':\r\n\t\t\t\tcase 'Points':\r\n\r\n\t\t\t\t\tobject = new THREE.Points( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Sprite':\r\n\r\n\t\t\t\t\tobject = new THREE.Sprite( getMaterial( data.material ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Group':\r\n\r\n\t\t\t\t\tobject = new THREE.Group();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tobject = new THREE.Object3D();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.uuid = data.uuid;\r\n\r\n\t\t\tif ( data.name !== undefined ) object.name = data.name;\r\n\t\t\tif ( data.matrix !== undefined ) {\r\n\r\n\t\t\t\tmatrix.fromArray( data.matrix );\r\n\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\r\n\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\r\n\t\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\r\n\r\n\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\r\n\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\r\n\r\n\t\t\tif ( data.children !== undefined ) {\r\n\r\n\t\t\t\tfor ( var child in data.children ) {\r\n\r\n\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.type === 'LOD' ) {\r\n\r\n\t\t\t\tvar levels = data.levels;\r\n\r\n\t\t\t\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\t\t\t\tvar level = levels[ l ];\r\n\t\t\t\t\tvar child = object.getObjectByProperty( 'uuid', level.object );\r\n\r\n\t\t\t\t\tif ( child !== undefined ) {\r\n\r\n\t\t\t\t\t\tobject.addLevel( child, level.distance );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn object;\r\n\r\n\t\t};\r\n\r\n\t}()\r\n\r\n};\r\n\r\n// File:src/loaders/TextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.TextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.TextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.TextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar texture = new THREE.Texture();\r\n\r\n\t\tvar loader = new THREE.ImageLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\ttexture.image = image;\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad !== undefined ) {\r\n\r\n\t\t\t\tonLoad( texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/CubeTextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CubeTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.CubeTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.CubeTextureLoader,\r\n\r\n\tload: function ( urls, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar texture = new THREE.CubeTexture();\r\n\r\n\t\tvar loader = new THREE.ImageLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setPath( this.path );\r\n\r\n\t\tvar loaded = 0;\r\n\r\n\t\tfunction loadTexture( i ) {\r\n\r\n\t\t\tloader.load( urls[ i ], function ( image ) {\r\n\r\n\t\t\t\ttexture.images[ i ] = image;\r\n\r\n\t\t\t\tloaded ++;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, undefined, onError );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < urls.length; ++ i ) {\r\n\r\n\t\t\tloadTexture( i );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/BinaryTextureLoader.js\r\n\r\n/**\r\n * @author Nikos M. / https://github.com/foo123/\r\n *\r\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n */\r\n\r\nTHREE.DataTextureLoader = THREE.BinaryTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\nTHREE.BinaryTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.BinaryTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar texture = new THREE.DataTexture();\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\tvar texData = scope._parser( buffer );\r\n\r\n\t\t\tif ( ! texData ) return;\r\n\r\n\t\t\tif ( undefined !== texData.image ) {\r\n\r\n\t\t\t\ttexture.image = texData.image;\r\n\r\n\t\t\t} else if ( undefined !== texData.data ) {\r\n\r\n\t\t\t\ttexture.image.width = texData.width;\r\n\t\t\t\ttexture.image.height = texData.height;\r\n\t\t\t\ttexture.image.data = texData.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.wrapS = undefined !== texData.wrapS ? texData.wrapS : THREE.ClampToEdgeWrapping;\r\n\t\t\ttexture.wrapT = undefined !== texData.wrapT ? texData.wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\t\t\ttexture.magFilter = undefined !== texData.magFilter ? texData.magFilter : THREE.LinearFilter;\r\n\t\t\ttexture.minFilter = undefined !== texData.minFilter ? texData.minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\t\t\ttexture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\r\n\r\n\t\t\tif ( undefined !== texData.format ) {\r\n\r\n\t\t\t\ttexture.format = texData.format;\r\n\r\n\t\t\t}\r\n\t\t\tif ( undefined !== texData.type ) {\r\n\r\n\t\t\t\ttexture.type = texData.type;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( undefined !== texData.mipmaps ) {\r\n\r\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( 1 === texData.mipmapCount ) {\r\n\r\n\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad ) onLoad( texture, texData );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/CompressedTextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n */\r\n\r\nTHREE.CompressedTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\n\r\nTHREE.CompressedTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.CompressedTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar images = [];\r\n\r\n\t\tvar texture = new THREE.CompressedTexture();\r\n\t\ttexture.image = images;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setPath( this.path );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tfunction loadTexture( i ) {\r\n\r\n\t\t\tloader.load( url[ i ], function ( buffer ) {\r\n\r\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\timages[ i ] = {\r\n\t\t\t\t\twidth: texDatas.width,\r\n\t\t\t\t\theight: texDatas.height,\r\n\t\t\t\t\tformat: texDatas.format,\r\n\t\t\t\t\tmipmaps: texDatas.mipmaps\r\n\t\t\t\t};\r\n\r\n\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\r\n\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\tif ( Array.isArray( url ) ) {\r\n\r\n\t\t\tvar loaded = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\r\n\r\n\t\t\t\tloadTexture( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// compressed cubemap texture stored in a single DDS file\r\n\r\n\t\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\tif ( texDatas.isCubemap ) {\r\n\r\n\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\r\n\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\r\n\r\n\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\r\n\r\n\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\r\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\r\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\r\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture.image.width = texDatas.width;\r\n\t\t\t\t\ttexture.image.height = texDatas.height;\r\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\r\n\r\n\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/materials/Material.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Material = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.MaterialIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Material';\r\n\r\n\tthis.fog = true;\r\n\tthis.lights = true;\r\n\r\n\tthis.blending = THREE.NormalBlending;\r\n\tthis.side = THREE.FrontSide;\r\n\tthis.shading = THREE.SmoothShading; // THREE.FlatShading, THREE.SmoothShading\r\n\tthis.vertexColors = THREE.NoColors; // THREE.NoColors, THREE.VertexColors, THREE.FaceColors\r\n\r\n\tthis.opacity = 1;\r\n\tthis.transparent = false;\r\n\r\n\tthis.blendSrc = THREE.SrcAlphaFactor;\r\n\tthis.blendDst = THREE.OneMinusSrcAlphaFactor;\r\n\tthis.blendEquation = THREE.AddEquation;\r\n\tthis.blendSrcAlpha = null;\r\n\tthis.blendDstAlpha = null;\r\n\tthis.blendEquationAlpha = null;\r\n\r\n\tthis.depthFunc = THREE.LessEqualDepth;\r\n\tthis.depthTest = true;\r\n\tthis.depthWrite = true;\r\n\r\n\tthis.clippingPlanes = null;\r\n\tthis.clipShadows = false;\r\n\r\n\tthis.colorWrite = true;\r\n\r\n\tthis.precision = null; // override the renderer's default precision for this material\r\n\r\n\tthis.polygonOffset = false;\r\n\tthis.polygonOffsetFactor = 0;\r\n\tthis.polygonOffsetUnits = 0;\r\n\r\n\tthis.alphaTest = 0;\r\n\tthis.premultipliedAlpha = false;\r\n\r\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis._needsUpdate = true;\r\n\r\n};\r\n\r\nTHREE.Material.prototype = {\r\n\r\n\tconstructor: THREE.Material,\r\n\r\n\tget needsUpdate() {\r\n\r\n\t\treturn this._needsUpdate;\r\n\r\n\t},\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.update();\r\n\t\tthis._needsUpdate = value;\r\n\r\n\t},\r\n\r\n\tsetValues: function ( values ) {\r\n\r\n\t\tif ( values === undefined ) return;\r\n\r\n\t\tfor ( var key in values ) {\r\n\r\n\t\t\tvar newValue = values[ key ];\r\n\r\n\t\t\tif ( newValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar currentValue = this[ key ];\r\n\r\n\t\t\tif ( currentValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( currentValue instanceof THREE.Color ) {\r\n\r\n\t\t\t\tcurrentValue.set( newValue );\r\n\r\n\t\t\t} else if ( currentValue instanceof THREE.Vector3 && newValue instanceof THREE.Vector3 ) {\r\n\r\n\t\t\t\tcurrentValue.copy( newValue );\r\n\r\n\t\t\t} else if ( key === 'overdraw' ) {\r\n\r\n\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\r\n\t\t\t\tthis[ key ] = Number( newValue );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis[ key ] = newValue;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar isRoot = meta === undefined;\r\n\r\n\t\tif ( isRoot ) {\r\n\r\n\t\t\tmeta = {\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {}\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Material',\r\n\t\t\t\tgenerator: 'Material.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Material serialization\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.color instanceof THREE.Color ) data.color = this.color.getHex();\r\n\r\n\t\tif ( this.roughness !== 0.5 ) data.roughness = this.roughness;\r\n\t\tif ( this.metalness !== 0.5 ) data.metalness = this.metalness;\r\n\r\n\t\tif ( this.emissive instanceof THREE.Color ) data.emissive = this.emissive.getHex();\r\n\t\tif ( this.specular instanceof THREE.Color ) data.specular = this.specular.getHex();\r\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\r\n\r\n\t\tif ( this.map instanceof THREE.Texture ) data.map = this.map.toJSON( meta ).uuid;\r\n\t\tif ( this.alphaMap instanceof THREE.Texture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\r\n\t\tif ( this.lightMap instanceof THREE.Texture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\r\n\t\tif ( this.bumpMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\r\n\t\t\tdata.bumpScale = this.bumpScale;\r\n\r\n\t\t}\r\n\t\tif ( this.normalMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\r\n\t\t\tdata.normalScale = this.normalScale.toArray();\r\n\r\n\t\t}\r\n\t\tif ( this.displacementMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\r\n\t\t\tdata.displacementScale = this.displacementScale;\r\n\t\t\tdata.displacementBias = this.displacementBias;\r\n\r\n\t\t}\r\n\t\tif ( this.roughnessMap instanceof THREE.Texture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\r\n\t\tif ( this.metalnessMap instanceof THREE.Texture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.emissiveMap instanceof THREE.Texture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\r\n\t\tif ( this.specularMap instanceof THREE.Texture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\r\n\r\n\t\tif ( this.envMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\r\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.size !== undefined ) data.size = this.size;\r\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\r\n\r\n\t\tif ( this.blending !== THREE.NormalBlending ) data.blending = this.blending;\r\n\t\tif ( this.shading !== THREE.SmoothShading ) data.shading = this.shading;\r\n\t\tif ( this.side !== THREE.FrontSide ) data.side = this.side;\r\n\t\tif ( this.vertexColors !== THREE.NoColors ) data.vertexColors = this.vertexColors;\r\n\r\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\r\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\r\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\r\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\r\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\r\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\r\n\r\n\t\t// TODO: Copied from Object3D.toJSON\r\n\r\n\t\tfunction extractFromCache ( cache ) {\r\n\r\n\t\t\tvar values = [];\r\n\r\n\t\t\tfor ( var key in cache ) {\r\n\r\n\t\t\t\tvar data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t\tif ( isRoot ) {\r\n\r\n\t\t\tvar textures = extractFromCache( meta.textures );\r\n\t\t\tvar images = extractFromCache( meta.images );\r\n\r\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\r\n\t\t\tif ( images.length > 0 ) data.images = images;\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.fog = source.fog;\r\n\t\tthis.lights = source.lights;\r\n\r\n\t\tthis.blending = source.blending;\r\n\t\tthis.side = source.side;\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\r\n\t\tthis.opacity = source.opacity;\r\n\t\tthis.transparent = source.transparent;\r\n\r\n\t\tthis.blendSrc = source.blendSrc;\r\n\t\tthis.blendDst = source.blendDst;\r\n\t\tthis.blendEquation = source.blendEquation;\r\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\r\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\r\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\r\n\r\n\t\tthis.depthFunc = source.depthFunc;\r\n\t\tthis.depthTest = source.depthTest;\r\n\t\tthis.depthWrite = source.depthWrite;\r\n\r\n\t\tthis.colorWrite = source.colorWrite;\r\n\r\n\t\tthis.precision = source.precision;\r\n\r\n\t\tthis.polygonOffset = source.polygonOffset;\r\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\r\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\r\n\r\n\t\tthis.alphaTest = source.alphaTest;\r\n\r\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\r\n\r\n\t\tthis.overdraw = source.overdraw;\r\n\r\n\t\tthis.visible = source.visible;\r\n\t\tthis.clipShadows = source.clipShadows;\r\n\r\n\t\tvar srcPlanes = source.clippingPlanes,\r\n\t\t\tdstPlanes = null;\r\n\r\n\t\tif ( srcPlanes !== null ) {\r\n\r\n\t\t\tvar n = srcPlanes.length;\r\n\t\t\tdstPlanes = new Array( n );\r\n\r\n\t\t\tfor ( var i = 0; i !== n; ++ i )\r\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tthis.clippingPlanes = dstPlanes;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdate: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'update' } );\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( THREE.Material.prototype, THREE.EventDispatcher.prototype );\r\n\r\nTHREE.MaterialIdCount = 0;\r\n\r\n// File:src/materials/LineBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  linewidth: <float>,\r\n *  linecap: \"round\",\r\n *  linejoin: \"round\"\r\n * }\r\n */\r\n\r\nTHREE.LineBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\tthis.linecap = 'round';\r\n\tthis.linejoin = 'round';\r\n\r\n\tthis.lights = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial;\r\n\r\nTHREE.LineBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.linewidth = source.linewidth;\r\n\tthis.linecap = source.linecap;\r\n\tthis.linejoin = source.linejoin;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/LineDashedMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  linewidth: <float>,\r\n *\r\n *  scale: <float>,\r\n *  dashSize: <float>,\r\n *  gapSize: <float>\r\n * }\r\n */\r\n\r\nTHREE.LineDashedMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineDashedMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.scale = 1;\r\n\tthis.dashSize = 3;\r\n\tthis.gapSize = 1;\r\n\r\n\tthis.lights = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineDashedMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial;\r\n\r\nTHREE.LineDashedMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.linewidth = source.linewidth;\r\n\r\n\tthis.scale = source.scale;\r\n\tthis.dashSize = source.dashSize;\r\n\tthis.gapSize = source.gapSize;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // emissive\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.lights = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial;\r\n\r\nTHREE.MeshBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshDepthMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author bhouston / https://clara.io\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * parameters = {\r\n *\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshDepthMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshDepthMaterial';\r\n\r\n\tthis.depthPacking = THREE.BasicDepthPacking;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false;\r\n\tthis.lights = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial;\r\n\r\nTHREE.MeshDepthMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.depthPacking = source.depthPacking;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshLambertMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshLambertMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshLambertMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshLambertMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial;\r\n\r\nTHREE.MeshLambertMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshNormalMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshNormalMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this, parameters );\r\n\r\n\tthis.type = 'MeshNormalMaterial';\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false;\r\n\tthis.lights = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshNormalMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial;\r\n\r\nTHREE.MeshNormalMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshPhongMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  specular: <hex>,\r\n *  shininess: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshPhongMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshPhongMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.specular = new THREE.Color( 0x111111 );\r\n\tthis.shininess = 30;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshPhongMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial;\r\n\r\nTHREE.MeshPhongMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.specular.copy( source.specular );\r\n\tthis.shininess = source.shininess;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshStandardMaterial.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  roughness: <float>,\r\n *  metalness: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissive: <hex>,\r\n *  emissiveIntensity: <float>\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  roughnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  metalnessMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n *  envMapIntensity: <float>\r\n *\r\n *  refractionRatio: <float>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshStandardMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.defines = { 'STANDARD': '' };\r\n\r\n\tthis.type = 'MeshStandardMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.roughness = 0.5;\r\n\tthis.metalness = 0.5;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.emissiveIntensity = 1.0;\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.roughnessMap = null;\r\n\r\n\tthis.metalnessMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.envMapIntensity = 1.0;\r\n\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshStandardMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshStandardMaterial.prototype.constructor = THREE.MeshStandardMaterial;\r\n\r\nTHREE.MeshStandardMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.defines = { 'STANDARD': '' };\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.roughness = source.roughness;\r\n\tthis.metalness = source.metalness;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\tthis.emissiveIntensity = source.emissiveIntensity;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.roughnessMap = source.roughnessMap;\r\n\r\n\tthis.metalnessMap = source.metalnessMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.envMapIntensity = source.envMapIntensity;\r\n\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshPhysicalMaterial.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n *\r\n * parameters = {\r\n *  reflectivity: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshPhysicalMaterial = function ( parameters ) {\r\n\r\n\tTHREE.MeshStandardMaterial.call( this );\r\n\r\n\tthis.defines = { 'PHYSICAL': '' };\r\n\r\n\tthis.type = 'MeshPhysicalMaterial';\r\n\r\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshPhysicalMaterial.prototype = Object.create( THREE.MeshStandardMaterial.prototype );\r\nTHREE.MeshPhysicalMaterial.prototype.constructor = THREE.MeshPhysicalMaterial;\r\n\r\nTHREE.MeshPhysicalMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.MeshStandardMaterial.prototype.copy.call( this, source );\r\n\r\n\tthis.defines = { 'PHYSICAL': '' };\r\n\r\n\tthis.reflectivity = source.reflectivity;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MultiMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MultiMaterial = function ( materials ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.type = 'MultiMaterial';\r\n\r\n\tthis.materials = materials instanceof Array ? materials : [];\r\n\r\n\tthis.visible = true;\r\n\r\n};\r\n\r\nTHREE.MultiMaterial.prototype = {\r\n\r\n\tconstructor: THREE.MultiMaterial,\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.2,\r\n\t\t\t\ttype: 'material',\r\n\t\t\t\tgenerator: 'MaterialExporter'\r\n\t\t\t},\r\n\t\t\tuuid: this.uuid,\r\n\t\t\ttype: this.type,\r\n\t\t\tmaterials: []\r\n\t\t};\r\n\r\n\t\tvar materials = this.materials;\r\n\r\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar material = materials[ i ].toJSON( meta );\r\n\t\t\tdelete material.metadata;\r\n\r\n\t\t\toutput.materials.push( material );\r\n\r\n\t\t}\r\n\r\n\t\toutput.visible = this.visible;\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar material = new this.constructor();\r\n\r\n\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\r\n\r\n\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tmaterial.visible = this.visible;\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/materials/PointsMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  size: <float>,\r\n *  sizeAttenuation: <bool>\r\n * }\r\n */\r\n\r\nTHREE.PointsMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'PointsMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.size = 1;\r\n\tthis.sizeAttenuation = true;\r\n\r\n\tthis.lights = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.PointsMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.PointsMaterial.prototype.constructor = THREE.PointsMaterial;\r\n\r\nTHREE.PointsMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.size = source.size;\r\n\tthis.sizeAttenuation = source.sizeAttenuation;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/ShaderMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  defines: { \"label\" : \"value\" },\r\n *  uniforms: { \"parameter1\": { type: \"1f\", value: 1.0 }, \"parameter2\": { type: \"1i\" value2: 2 } },\r\n *\r\n *  fragmentShader: <string>,\r\n *  vertexShader: <string>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  lights: <bool>,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>\r\n * }\r\n */\r\n\r\nTHREE.ShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'ShaderMaterial';\r\n\r\n\tthis.defines = {};\r\n\tthis.uniforms = {};\r\n\r\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\r\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false; // set to use scene fog\r\n\tthis.lights = false; // set to use scene lights\r\n\tthis.clipping = false; // set to use user-defined clipping planes\r\n\r\n\tthis.skinning = false; // set to use skinning attribute streams\r\n\tthis.morphTargets = false; // set to use morph targets\r\n\tthis.morphNormals = false; // set to use morph normals\r\n\r\n\tthis.extensions = {\r\n\t\tderivatives: false, // set to use derivatives\r\n\t\tfragDepth: false, // set to use fragment depth values\r\n\t\tdrawBuffers: false, // set to use draw buffers\r\n\t\tshaderTextureLOD: false // set to use shader texture LOD\r\n\t};\r\n\r\n\t// When rendered geometry doesn't include these attributes but the material does,\r\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\r\n\tthis.defaultAttributeValues = {\r\n\t\t'color': [ 1, 1, 1 ],\r\n\t\t'uv': [ 0, 0 ],\r\n\t\t'uv2': [ 0, 0 ]\r\n\t};\r\n\r\n\tthis.index0AttributeName = undefined;\r\n\r\n\tif ( parameters !== undefined ) {\r\n\r\n\t\tif ( parameters.attributes !== undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ShaderMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial;\r\n\r\nTHREE.ShaderMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.fragmentShader = source.fragmentShader;\r\n\tthis.vertexShader = source.vertexShader;\r\n\r\n\tthis.uniforms = THREE.UniformsUtils.clone( source.uniforms );\r\n\r\n\tthis.defines = source.defines;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\tthis.lights = source.lights;\r\n\tthis.clipping = source.clipping;\r\n\r\n\tthis.skinning = source.skinning;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\tthis.extensions = source.extensions;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.ShaderMaterial.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Material.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.uniforms = this.uniforms;\r\n\tdata.vertexShader = this.vertexShader;\r\n\tdata.fragmentShader = this.fragmentShader;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/materials/RawShaderMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.RawShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.ShaderMaterial.call( this, parameters );\r\n\r\n\tthis.type = 'RawShaderMaterial';\r\n\r\n};\r\n\r\nTHREE.RawShaderMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\r\nTHREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial;\r\n\r\n// File:src/materials/SpriteMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *\tuvOffset: new THREE.Vector2(),\r\n *\tuvScale: new THREE.Vector2()\r\n * }\r\n */\r\n\r\nTHREE.SpriteMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'SpriteMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\tthis.map = null;\r\n\r\n\tthis.rotation = 0;\r\n\r\n\tthis.fog = false;\r\n\tthis.lights = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.SpriteMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial;\r\n\r\nTHREE.SpriteMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.map = source.map;\r\n\r\n\tthis.rotation = source.rotation;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/ShadowMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ShadowMaterial = function () {\r\n\r\n\tTHREE.ShaderMaterial.call( this, {\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\t{\r\n\t\t\t\topacity: { value: 1.0 }\r\n\t\t\t}\r\n\t\t] ),\r\n\t\tvertexShader: THREE.ShaderChunk[ 'shadow_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'shadow_frag' ]\r\n\t} );\r\n\r\n\tthis.lights = true;\r\n\tthis.transparent = true;\r\n\r\n\tObject.defineProperties( this, {\r\n\t\topacity: {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function () {\r\n\t\t\t\treturn this.uniforms.opacity.value;\r\n\t\t\t},\r\n\t\t\tset: function ( value ) {\r\n\t\t\t\tthis.uniforms.opacity.value = value;\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n\r\n};\r\n\r\nTHREE.ShadowMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\r\nTHREE.ShadowMaterial.prototype.constructor = THREE.ShadowMaterial;\r\n\r\n// File:src/textures/Texture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */\r\n\r\nTHREE.Texture = function ( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.TextureIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.sourceFile = '';\r\n\r\n\tthis.image = image !== undefined ? image : THREE.Texture.DEFAULT_IMAGE;\r\n\tthis.mipmaps = [];\r\n\r\n\tthis.mapping = mapping !== undefined ? mapping : THREE.Texture.DEFAULT_MAPPING;\r\n\r\n\tthis.wrapS = wrapS !== undefined ? wrapS : THREE.ClampToEdgeWrapping;\r\n\tthis.wrapT = wrapT !== undefined ? wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.LinearFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\r\n\tthis.format = format !== undefined ? format : THREE.RGBAFormat;\r\n\tthis.type = type !== undefined ? type : THREE.UnsignedByteType;\r\n\r\n\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.generateMipmaps = true;\r\n\tthis.premultiplyAlpha = false;\r\n\tthis.flipY = true;\r\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\r\n\r\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\r\n\t//\r\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\r\n\t// update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.\r\n\tthis.encoding = encoding !== undefined ? encoding :  THREE.LinearEncoding;\r\n\r\n\tthis.version = 0;\r\n\tthis.onUpdate = null;\r\n\r\n};\r\n\r\nTHREE.Texture.DEFAULT_IMAGE = undefined;\r\nTHREE.Texture.DEFAULT_MAPPING = THREE.UVMapping;\r\n\r\nTHREE.Texture.prototype = {\r\n\r\n\tconstructor: THREE.Texture,\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.image = source.image;\r\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\r\n\r\n\t\tthis.mapping = source.mapping;\r\n\r\n\t\tthis.wrapS = source.wrapS;\r\n\t\tthis.wrapT = source.wrapT;\r\n\r\n\t\tthis.magFilter = source.magFilter;\r\n\t\tthis.minFilter = source.minFilter;\r\n\r\n\t\tthis.anisotropy = source.anisotropy;\r\n\r\n\t\tthis.format = source.format;\r\n\t\tthis.type = source.type;\r\n\r\n\t\tthis.offset.copy( source.offset );\r\n\t\tthis.repeat.copy( source.repeat );\r\n\r\n\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\r\n\t\tthis.flipY = source.flipY;\r\n\t\tthis.unpackAlignment = source.unpackAlignment;\r\n\t\tthis.encoding = source.encoding;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tif ( meta.textures[ this.uuid ] !== undefined ) {\r\n\r\n\t\t\treturn meta.textures[ this.uuid ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getDataURL( image ) {\r\n\r\n\t\t\tvar canvas;\r\n\r\n\t\t\tif ( image.toDataURL !== undefined ) {\r\n\r\n\t\t\t\tcanvas = image;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcanvas = document.createElement( 'canvas' );\r\n\t\t\t\tcanvas.width = image.width;\r\n\t\t\t\tcanvas.height = image.height;\r\n\r\n\t\t\t\tcanvas.getContext( '2d' ).drawImage( image, 0, 0, image.width, image.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\r\n\r\n\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn canvas.toDataURL( 'image/png' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Texture',\r\n\t\t\t\tgenerator: 'Texture.toJSON'\r\n\t\t\t},\r\n\r\n\t\t\tuuid: this.uuid,\r\n\t\t\tname: this.name,\r\n\r\n\t\t\tmapping: this.mapping,\r\n\r\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\r\n\t\t\toffset: [ this.offset.x, this.offset.y ],\r\n\t\t\twrap: [ this.wrapS, this.wrapT ],\r\n\r\n\t\t\tminFilter: this.minFilter,\r\n\t\t\tmagFilter: this.magFilter,\r\n\t\t\tanisotropy: this.anisotropy\r\n\t\t};\r\n\r\n\t\tif ( this.image !== undefined ) {\r\n\r\n\t\t\t// TODO: Move to THREE.Image\r\n\r\n\t\t\tvar image = this.image;\r\n\r\n\t\t\tif ( image.uuid === undefined ) {\r\n\r\n\t\t\t\timage.uuid = THREE.Math.generateUUID(); // UGH\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( meta.images[ image.uuid ] === undefined ) {\r\n\r\n\t\t\t\tmeta.images[ image.uuid ] = {\r\n\t\t\t\t\tuuid: image.uuid,\r\n\t\t\t\t\turl: getDataURL( image )\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\toutput.image = image.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tmeta.textures[ this.uuid ] = output;\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t},\r\n\r\n\ttransformUv: function ( uv ) {\r\n\r\n\t\tif ( this.mapping !== THREE.UVMapping )  return;\r\n\r\n\t\tuv.multiply( this.repeat );\r\n\t\tuv.add( this.offset );\r\n\r\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapS ) {\r\n\r\n\t\t\t\tcase THREE.RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapT ) {\r\n\r\n\t\t\t\tcase THREE.RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.flipY ) {\r\n\r\n\t\t\tuv.y = 1 - uv.y;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( THREE.Texture.prototype, THREE.EventDispatcher.prototype );\r\n\r\nTHREE.TextureIdCount = 0;\r\n\r\n// File:src/textures/DepthTexture.js\r\n\r\n/**\r\n * @author Matt DesLauriers / @mattdesl\r\n */\r\n\r\nTHREE.DepthTexture = function ( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\r\n  THREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, THREE.DepthFormat, type, anisotropy );\r\n\r\n  this.image = { width: width, height: height };\r\n\r\n  this.type = type !== undefined ? type : THREE.UnsignedShortType;\r\n\r\n  this.magFilter = magFilter !== undefined ? magFilter : THREE.NearestFilter;\r\n  this.minFilter = minFilter !== undefined ? minFilter : THREE.NearestFilter;\r\n\r\n  this.flipY = false;\r\n  this.generateMipmaps  = false;\r\n\r\n};\r\n\r\nTHREE.DepthTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.DepthTexture.prototype.constructor = THREE.DepthTexture;\r\n\r\n// File:src/textures/CanvasTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CanvasTexture = function ( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n};\r\n\r\nTHREE.CanvasTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CanvasTexture.prototype.constructor = THREE.CanvasTexture;\r\n\r\n// File:src/textures/CubeTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CubeTexture = function ( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\r\n\r\n\timages = images !== undefined ? images : [];\r\n\tmapping = mapping !== undefined ? mapping : THREE.CubeReflectionMapping;\r\n\r\n\tTHREE.Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.flipY = false;\r\n\r\n};\r\n\r\nTHREE.CubeTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CubeTexture.prototype.constructor = THREE.CubeTexture;\r\n\r\nObject.defineProperty( THREE.CubeTexture.prototype, 'images', {\r\n\r\n\tget: function () {\r\n\r\n\t\treturn this.image;\r\n\r\n\t},\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tthis.image = value;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/textures/CompressedTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CompressedTexture = function ( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.image = { width: width, height: height };\r\n\tthis.mipmaps = mipmaps;\r\n\r\n\t// no flipping for cube textures\r\n\t// (also flipping doesn't work for compressed textures )\r\n\r\n\tthis.flipY = false;\r\n\r\n\t// can't generate mipmaps for compressed textures\r\n\t// mips must be embedded in DDS files\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n};\r\n\r\nTHREE.CompressedTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture;\r\n\r\n// File:src/textures/DataTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DataTexture = function ( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n\tthis.image = { data: data, width: width, height: height };\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.NearestFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.NearestFilter;\r\n\r\n\tthis.flipY = false;\r\n\tthis.generateMipmaps  = false;\r\n\r\n};\r\n\r\nTHREE.DataTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.DataTexture.prototype.constructor = THREE.DataTexture;\r\n\r\n// File:src/textures/VideoTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.VideoTexture = function ( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n\tvar scope = this;\r\n\r\n\tfunction update() {\r\n\r\n\t\trequestAnimationFrame( update );\r\n\r\n\t\tif ( video.readyState >= video.HAVE_CURRENT_DATA ) {\r\n\r\n\t\t\tscope.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tupdate();\r\n\r\n};\r\n\r\nTHREE.VideoTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.VideoTexture.prototype.constructor = THREE.VideoTexture;\r\n\r\n// File:src/objects/Group.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Group = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Group';\r\n\r\n};\r\n\r\nTHREE.Group.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Group\r\n\r\n} );\r\n\r\n// File:src/objects/Points.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Points = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Points';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new THREE.PointsMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n};\r\n\r\nTHREE.Points.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Points,\r\n\r\n\traycast: ( function () {\r\n\r\n\t\tvar inverseMatrix = new THREE.Matrix4();\r\n\t\tvar ray = new THREE.Ray();\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\t\tvar object = this;\r\n\t\t\tvar geometry = this.geometry;\r\n\t\t\tvar matrixWorld = this.matrixWorld;\r\n\t\t\tvar threshold = raycaster.params.Points.threshold;\r\n\r\n\t\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( matrixWorld );\r\n\r\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n\t\t\t//\r\n\r\n\t\t\tinverseMatrix.getInverse( matrixWorld );\r\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\t\tvar localThresholdSq = localThreshold * localThreshold;\r\n\t\t\tvar position = new THREE.Vector3();\r\n\r\n\t\t\tfunction testPoint( point, index ) {\r\n\r\n\t\t\t\tvar rayPointDistanceSq = ray.distanceSqToPoint( point );\r\n\r\n\t\t\t\tif ( rayPointDistanceSq < localThresholdSq ) {\r\n\r\n\t\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\r\n\t\t\t\t\tintersectPoint.applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\r\n\t\t\t\t\t\tpoint: intersectPoint.clone(),\r\n\t\t\t\t\t\tindex: index,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tobject: object\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\t\tvar index = geometry.index;\r\n\t\t\t\tvar attributes = geometry.attributes;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = indices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvar a = indices[ i ];\r\n\r\n\t\t\t\t\t\tposition.fromArray( positions, a * 3 );\r\n\r\n\t\t\t\t\t\ttestPoint( position, a );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\tposition.fromArray( positions, i * 3 );\r\n\r\n\t\t\t\t\t\ttestPoint( position, i );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar vertices = geometry.vertices;\r\n\r\n\t\t\t\tfor ( var i = 0, l = vertices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\ttestPoint( vertices[ i ], i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}() ),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/Line.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Line = function ( geometry, material, mode ) {\r\n\r\n\tif ( mode === 1 ) {\r\n\r\n\t\tconsole.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\r\n\t\treturn new THREE.LineSegments( geometry, material );\r\n\r\n\t}\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Line';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new THREE.LineBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n};\r\n\r\nTHREE.Line.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Line,\r\n\r\n\traycast: ( function () {\r\n\r\n\t\tvar inverseMatrix = new THREE.Matrix4();\r\n\t\tvar ray = new THREE.Ray();\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\t\tvar precision = raycaster.linePrecision;\r\n\t\t\tvar precisionSq = precision * precision;\r\n\r\n\t\t\tvar geometry = this.geometry;\r\n\t\t\tvar matrixWorld = this.matrixWorld;\r\n\r\n\t\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( matrixWorld );\r\n\r\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n\t\t\t//\r\n\r\n\t\t\tinverseMatrix.getInverse( matrixWorld );\r\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\t\tvar vStart = new THREE.Vector3();\r\n\t\t\tvar vEnd = new THREE.Vector3();\r\n\t\t\tvar interSegment = new THREE.Vector3();\r\n\t\t\tvar interRay = new THREE.Vector3();\r\n\t\t\tvar step = this instanceof THREE.LineSegments ? 2 : 1;\r\n\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\t\tvar index = geometry.index;\r\n\t\t\t\tvar attributes = geometry.attributes;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\t\tvar a = indices[ i ];\r\n\t\t\t\t\t\tvar b = indices[ i + 1 ];\r\n\r\n\t\t\t\t\t\tvStart.fromArray( positions, a * 3 );\r\n\t\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\r\n\r\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\t\tvStart.fromArray( positions, 3 * i );\r\n\t\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\r\n\r\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\tvar vertices = geometry.vertices;\r\n\t\t\t\tvar nbVertices = vertices.length;\r\n\r\n\t\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\r\n\r\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}() ),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/LineSegments.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LineSegments = function ( geometry, material ) {\r\n\r\n\tTHREE.Line.call( this, geometry, material );\r\n\r\n\tthis.type = 'LineSegments';\r\n\r\n};\r\n\r\nTHREE.LineSegments.prototype = Object.assign( Object.create( THREE.Line.prototype ), {\r\n\r\n\tconstructor: THREE.LineSegments\r\n\r\n} );\r\n\r\n// File:src/objects/Mesh.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author jonobr1 / http://jonobr1.com/\r\n */\r\n\r\nTHREE.Mesh = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Mesh';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.BufferGeometry();\r\n\tthis.material = material !== undefined ? material : new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n\tthis.drawMode = THREE.TrianglesDrawMode;\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Mesh,\r\n\r\n\tsetDrawMode: function ( value ) {\r\n\r\n\t\tthis.drawMode = value;\r\n\r\n\t},\r\n\r\n\tupdateMorphTargets: function () {\r\n\r\n\t\tif ( this.geometry.morphTargets !== undefined && this.geometry.morphTargets.length > 0 ) {\r\n\r\n\t\t\tthis.morphTargetBase = - 1;\r\n\t\t\tthis.morphTargetInfluences = [];\r\n\t\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\t\tfor ( var m = 0, ml = this.geometry.morphTargets.length; m < ml; m ++ ) {\r\n\r\n\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\t\tthis.morphTargetDictionary[ this.geometry.morphTargets[ m ].name ] = m;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetMorphTargetIndexByName: function ( name ) {\r\n\r\n\t\tif ( this.morphTargetDictionary[ name ] !== undefined ) {\r\n\r\n\t\t\treturn this.morphTargetDictionary[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'THREE.Mesh.getMorphTargetIndexByName: morph target ' + name + ' does not exist. Returning 0.' );\r\n\r\n\t\treturn 0;\r\n\r\n\t},\r\n\r\n\traycast: ( function () {\r\n\r\n\t\tvar inverseMatrix = new THREE.Matrix4();\r\n\t\tvar ray = new THREE.Ray();\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\tvar vA = new THREE.Vector3();\r\n\t\tvar vB = new THREE.Vector3();\r\n\t\tvar vC = new THREE.Vector3();\r\n\r\n\t\tvar tempA = new THREE.Vector3();\r\n\t\tvar tempB = new THREE.Vector3();\r\n\t\tvar tempC = new THREE.Vector3();\r\n\r\n\t\tvar uvA = new THREE.Vector2();\r\n\t\tvar uvB = new THREE.Vector2();\r\n\t\tvar uvC = new THREE.Vector2();\r\n\r\n\t\tvar barycoord = new THREE.Vector3();\r\n\r\n\t\tvar intersectionPoint = new THREE.Vector3();\r\n\t\tvar intersectionPointWorld = new THREE.Vector3();\r\n\r\n\t\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\r\n\r\n\t\t\tTHREE.Triangle.barycoordFromPoint( point, p1, p2, p3, barycoord );\r\n\r\n\t\t\tuv1.multiplyScalar( barycoord.x );\r\n\t\t\tuv2.multiplyScalar( barycoord.y );\r\n\t\t\tuv3.multiplyScalar( barycoord.z );\r\n\r\n\t\t\tuv1.add( uv2 ).add( uv3 );\r\n\r\n\t\t\treturn uv1.clone();\r\n\r\n\t\t}\r\n\r\n\t\tfunction checkIntersection( object, raycaster, ray, pA, pB, pC, point ) {\r\n\r\n\t\t\tvar intersect;\r\n\t\t\tvar material = object.material;\r\n\r\n\t\t\tif ( material.side === THREE.BackSide ) {\r\n\r\n\t\t\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== THREE.DoubleSide, point );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( intersect === null ) return null;\r\n\r\n\t\t\tintersectionPointWorld.copy( point );\r\n\t\t\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdistance: distance,\r\n\t\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\t\tobject: object\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tfunction checkBufferGeometryIntersection( object, raycaster, ray, positions, uvs, a, b, c ) {\r\n\r\n\t\t\tvA.fromArray( positions, a * 3 );\r\n\t\t\tvB.fromArray( positions, b * 3 );\r\n\t\t\tvC.fromArray( positions, c * 3 );\r\n\r\n\t\t\tvar intersection = checkIntersection( object, raycaster, ray, vA, vB, vC, intersectionPoint );\r\n\r\n\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\tif ( uvs ) {\r\n\r\n\t\t\t\t\tuvA.fromArray( uvs, a * 2 );\r\n\t\t\t\t\tuvB.fromArray( uvs, b * 2 );\r\n\t\t\t\t\tuvC.fromArray( uvs, c * 2 );\r\n\r\n\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint,  vA, vB, vC,  uvA, uvB, uvC );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tintersection.face = new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) );\r\n\t\t\t\tintersection.faceIndex = a;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn intersection;\r\n\r\n\t\t}\r\n\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\t\tvar geometry = this.geometry;\r\n\t\t\tvar material = this.material;\r\n\t\t\tvar matrixWorld = this.matrixWorld;\r\n\r\n\t\t\tif ( material === undefined ) return;\r\n\r\n\t\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( matrixWorld );\r\n\r\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n\t\t\t//\r\n\r\n\t\t\tinverseMatrix.getInverse( matrixWorld );\r\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\t\t// Check boundingBox before continuing\r\n\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\t\tif ( ray.intersectsBox( geometry.boundingBox ) === false ) return;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar uvs, intersection;\r\n\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\t\tvar a, b, c;\r\n\t\t\t\tvar index = geometry.index;\r\n\t\t\t\tvar attributes = geometry.attributes;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tif ( attributes.uv !== undefined ) {\r\n\r\n\t\t\t\t\tuvs = attributes.uv.array;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\ta = indices[ i ];\r\n\t\t\t\t\t\tb = indices[ i + 1 ];\r\n\t\t\t\t\t\tc = indices[ i + 2 ];\r\n\r\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, positions, uvs, a, b, c );\r\n\r\n\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indices buffer semantics\r\n\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\r\n\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 9 ) {\r\n\r\n\t\t\t\t\t\ta = i / 3;\r\n\t\t\t\t\t\tb = a + 1;\r\n\t\t\t\t\t\tc = a + 2;\r\n\r\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, positions, uvs, a, b, c );\r\n\r\n\t\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\t\tintersection.index = a; // triangle number in positions buffer semantics\r\n\t\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\tvar fvA, fvB, fvC;\r\n\t\t\t\tvar isFaceMaterial = material instanceof THREE.MultiMaterial;\r\n\t\t\t\tvar materials = isFaceMaterial === true ? material.materials : null;\r\n\r\n\t\t\t\tvar vertices = geometry.vertices;\r\n\t\t\t\tvar faces = geometry.faces;\r\n\t\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\r\n\t\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\r\n\r\n\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tvar face = faces[ f ];\r\n\t\t\t\t\tvar faceMaterial = isFaceMaterial === true ? materials[ face.materialIndex ] : material;\r\n\r\n\t\t\t\t\tif ( faceMaterial === undefined ) continue;\r\n\r\n\t\t\t\t\tfvA = vertices[ face.a ];\r\n\t\t\t\t\tfvB = vertices[ face.b ];\r\n\t\t\t\t\tfvC = vertices[ face.c ];\r\n\r\n\t\t\t\t\tif ( faceMaterial.morphTargets === true ) {\r\n\r\n\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\r\n\t\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\r\n\r\n\t\t\t\t\t\tvA.set( 0, 0, 0 );\r\n\t\t\t\t\t\tvB.set( 0, 0, 0 );\r\n\t\t\t\t\t\tvC.set( 0, 0, 0 );\r\n\r\n\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\r\n\r\n\t\t\t\t\t\t\tif ( influence === 0 ) continue;\r\n\r\n\t\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\r\n\r\n\t\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], fvA ), influence );\r\n\t\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], fvB ), influence );\r\n\t\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], fvC ), influence );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvA.add( fvA );\r\n\t\t\t\t\t\tvB.add( fvB );\r\n\t\t\t\t\t\tvC.add( fvC );\r\n\r\n\t\t\t\t\t\tfvA = vA;\r\n\t\t\t\t\t\tfvB = vB;\r\n\t\t\t\t\t\tfvC = vC;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tintersection = checkIntersection( this, raycaster, ray, fvA, fvB, fvC, intersectionPoint );\r\n\r\n\t\t\t\t\tif ( intersection ) {\r\n\r\n\t\t\t\t\t\tif ( uvs ) {\r\n\r\n\t\t\t\t\t\t\tvar uvs_f = uvs[ f ];\r\n\t\t\t\t\t\t\tuvA.copy( uvs_f[ 0 ] );\r\n\t\t\t\t\t\t\tuvB.copy( uvs_f[ 1 ] );\r\n\t\t\t\t\t\t\tuvC.copy( uvs_f[ 2 ] );\r\n\r\n\t\t\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, fvA, fvB, fvC, uvA, uvB, uvC );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tintersection.face = face;\r\n\t\t\t\t\t\tintersection.faceIndex = f;\r\n\t\t\t\t\t\tintersects.push( intersection );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}() ),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/Bone.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Bone = function ( skin ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Bone';\r\n\r\n\tthis.skin = skin;\r\n\r\n};\r\n\r\nTHREE.Bone.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Bone,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.skin = source.skin;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/Skeleton.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author michael guerrero / http://realitymeltdown.com\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Skeleton = function ( bones, boneInverses, useVertexTexture ) {\r\n\r\n\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\r\n\r\n\tthis.identityMatrix = new THREE.Matrix4();\r\n\r\n\t// copy the bone array\r\n\r\n\tbones = bones || [];\r\n\r\n\tthis.bones = bones.slice( 0 );\r\n\r\n\t// create a bone texture or an array of floats\r\n\r\n\tif ( this.useVertexTexture ) {\r\n\r\n\t\t// layout (1 matrix = 4 pixels)\r\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\r\n\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\r\n\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\r\n\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\r\n\r\n\r\n\t\tvar size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\r\n\t\tsize = THREE.Math.nextPowerOfTwo( Math.ceil( size ) );\r\n\t\tsize = Math.max( size, 4 );\r\n\r\n\t\tthis.boneTextureWidth = size;\r\n\t\tthis.boneTextureHeight = size;\r\n\r\n\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\r\n\t\tthis.boneTexture = new THREE.DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType );\r\n\r\n\t} else {\r\n\r\n\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\r\n\r\n\t}\r\n\r\n\t// use the supplied bone inverses or calculate the inverses\r\n\r\n\tif ( boneInverses === undefined ) {\r\n\r\n\t\tthis.calculateInverses();\r\n\r\n\t} else {\r\n\r\n\t\tif ( this.bones.length === boneInverses.length ) {\r\n\r\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\r\n\r\n\t\t\tthis.boneInverses = [];\r\n\r\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t\tthis.boneInverses.push( new THREE.Matrix4() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( THREE.Skeleton.prototype, {\r\n\r\n\tcalculateInverses: function () {\r\n\r\n\t\tthis.boneInverses = [];\r\n\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\tvar inverse = new THREE.Matrix4();\r\n\r\n\t\t\tif ( this.bones[ b ] ) {\r\n\r\n\t\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.boneInverses.push( inverse );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tpose: function () {\r\n\r\n\t\tvar bone;\r\n\r\n\t\t// recover the bind-time world matrices\r\n\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\tbone = this.bones[ b ];\r\n\r\n\t\t\tif ( bone ) {\r\n\r\n\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// compute the local matrices, positions, rotations and scales\r\n\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\tbone = this.bones[ b ];\r\n\r\n\t\t\tif ( bone ) {\r\n\r\n\t\t\t\tif ( bone.parent ) {\r\n\r\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\r\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: ( function () {\r\n\r\n\t\tvar offsetMatrix = new THREE.Matrix4();\r\n\r\n\t\treturn function update() {\r\n\r\n\t\t\t// flatten bone matrices to array\r\n\r\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t\t// compute the offset between the current and the original transform\r\n\r\n\t\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\r\n\r\n\t\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\r\n\t\t\t\toffsetMatrix.toArray( this.boneMatrices, b * 16 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.useVertexTexture ) {\r\n\r\n\t\t\t\tthis.boneTexture.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Skeleton( this.bones, this.boneInverses, this.useVertexTexture );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/SkinnedMesh.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkinnedMesh = function ( geometry, material, useVertexTexture ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'SkinnedMesh';\r\n\r\n\tthis.bindMode = \"attached\";\r\n\tthis.bindMatrix = new THREE.Matrix4();\r\n\tthis.bindMatrixInverse = new THREE.Matrix4();\r\n\r\n\t// init bones\r\n\r\n\t// TODO: remove bone creation as there is no reason (other than\r\n\t// convenience) for THREE.SkinnedMesh to do this.\r\n\r\n\tvar bones = [];\r\n\r\n\tif ( this.geometry && this.geometry.bones !== undefined ) {\r\n\r\n\t\tvar bone, gbone;\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tbone = new THREE.Bone( this );\r\n\t\t\tbones.push( bone );\r\n\r\n\t\t\tbone.name = gbone.name;\r\n\t\t\tbone.position.fromArray( gbone.pos );\r\n\t\t\tbone.quaternion.fromArray( gbone.rotq );\r\n\t\t\tif ( gbone.scl !== undefined ) bone.scale.fromArray( gbone.scl );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tif ( gbone.parent !== - 1 && gbone.parent !== null &&\r\n\t\t\t\t\tbones[ gbone.parent ] !== undefined ) {\r\n\r\n\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.add( bones[ b ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.normalizeSkinWeights();\r\n\r\n\tthis.updateMatrixWorld( true );\r\n\tthis.bind( new THREE.Skeleton( bones, undefined, useVertexTexture ), this.matrixWorld );\r\n\r\n};\r\n\r\n\r\nTHREE.SkinnedMesh.prototype = Object.assign( Object.create( THREE.Mesh.prototype ), {\r\n\r\n\tconstructor: THREE.SkinnedMesh,\r\n\r\n\tbind: function( skeleton, bindMatrix ) {\r\n\r\n\t\tthis.skeleton = skeleton;\r\n\r\n\t\tif ( bindMatrix === undefined ) {\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.skeleton.calculateInverses();\r\n\r\n\t\t\tbindMatrix = this.matrixWorld;\r\n\r\n\t\t}\r\n\r\n\t\tthis.bindMatrix.copy( bindMatrix );\r\n\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\r\n\r\n\t},\r\n\r\n\tpose: function () {\r\n\r\n\t\tthis.skeleton.pose();\r\n\r\n\t},\r\n\r\n\tnormalizeSkinWeights: function () {\r\n\r\n\t\tif ( this.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tfor ( var i = 0; i < this.geometry.skinWeights.length; i ++ ) {\r\n\r\n\t\t\t\tvar sw = this.geometry.skinWeights[ i ];\r\n\r\n\t\t\t\tvar scale = 1.0 / sw.lengthManhattan();\r\n\r\n\t\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\t\tsw.multiplyScalar( scale );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsw.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( this.geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar vec = new THREE.Vector4();\r\n\r\n\t\t\tvar skinWeight = this.geometry.attributes.skinWeight;\r\n\r\n\t\t\tfor ( var i = 0; i < skinWeight.count; i ++ ) {\r\n\r\n\t\t\t\tvec.x = skinWeight.getX( i );\r\n\t\t\t\tvec.y = skinWeight.getY( i );\r\n\t\t\t\tvec.z = skinWeight.getZ( i );\r\n\t\t\t\tvec.w = skinWeight.getW( i );\r\n\r\n\t\t\t\tvar scale = 1.0 / vec.lengthManhattan();\r\n\r\n\t\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\t\tvec.multiplyScalar( scale );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvec.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tskinWeight.setXYZW( i, vec.x, vec.y, vec.z, vec.w );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function( force ) {\r\n\r\n\t\tTHREE.Mesh.prototype.updateMatrixWorld.call( this, true );\r\n\r\n\t\tif ( this.bindMode === \"attached\" ) {\r\n\r\n\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\r\n\t\t} else if ( this.bindMode === \"detached\" ) {\r\n\r\n\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.SkinnedMesh unrecognized bindMode: ' + this.bindMode );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function() {\r\n\r\n\t\treturn new this.constructor( this.geometry, this.material, this.useVertexTexture ).copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/LOD.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LOD = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'LOD';\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tlevels: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: []\r\n\t\t}\r\n\t} );\r\n\r\n};\r\n\r\n\r\nTHREE.LOD.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.LOD,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source, false );\r\n\r\n\t\tvar levels = source.levels;\r\n\r\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar level = levels[ i ];\r\n\r\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddLevel: function ( object, distance ) {\r\n\r\n\t\tif ( distance === undefined ) distance = 0;\r\n\r\n\t\tdistance = Math.abs( distance );\r\n\r\n\t\tvar levels = this.levels;\r\n\r\n\t\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\t\tif ( distance < levels[ l ].distance ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\r\n\r\n\t\tthis.add( object );\r\n\r\n\t},\r\n\r\n\tgetObjectForDistance: function ( distance ) {\r\n\r\n\t\tvar levels = this.levels;\r\n\r\n\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\tif ( distance < levels[ i ].distance ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn levels[ i - 1 ].object;\r\n\r\n\t},\r\n\r\n\traycast: ( function () {\r\n\r\n\t\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\r\n\r\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\r\n\t\t};\r\n\r\n\t}() ),\r\n\r\n\tupdate: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\r\n\t\treturn function update( camera ) {\r\n\r\n\t\t\tvar levels = this.levels;\r\n\r\n\t\t\tif ( levels.length > 1 ) {\r\n\r\n\t\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\t\tvar distance = v1.distanceTo( v2 );\r\n\r\n\t\t\t\tlevels[ 0 ].object.visible = true;\r\n\r\n\t\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tif ( distance >= levels[ i ].distance ) {\r\n\r\n\t\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\r\n\t\t\t\t\t\tlevels[ i ].object.visible = true;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( ; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tlevels[ i ].object.visible = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t\tdata.object.levels = [];\r\n\r\n\t\tvar levels = this.levels;\r\n\r\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar level = levels[ i ];\r\n\r\n\t\t\tdata.object.levels.push( {\r\n\t\t\t\tobject: level.object.uuid,\r\n\t\t\t\tdistance: level.distance\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/Sprite.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Sprite = function ( material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Sprite';\r\n\r\n\tthis.material = ( material !== undefined ) ? material : new THREE.SpriteMaterial();\r\n\r\n};\r\n\r\nTHREE.Sprite.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.Sprite,\r\n\r\n\traycast: ( function () {\r\n\r\n\t\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tvar distanceSq = raycaster.ray.distanceSqToPoint( matrixPosition );\r\n\t\t\tvar guessSizeSq = this.scale.x * this.scale.y / 4;\r\n\r\n\t\t\tif ( distanceSq > guessSizeSq ) {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tintersects.push( {\r\n\r\n\t\t\t\tdistance: Math.sqrt( distanceSq ),\r\n\t\t\t\tpoint: this.position,\r\n\t\t\t\tface: null,\r\n\t\t\t\tobject: this\r\n\r\n\t\t\t} );\r\n\r\n\t\t};\r\n\r\n\t}() ),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.material ).copy( this );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/objects/LensFlare.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlare = function ( texture, size, distance, blending, color ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.lensFlares = [];\r\n\r\n\tthis.positionScreen = new THREE.Vector3();\r\n\tthis.customUpdateCallback = undefined;\r\n\r\n\tif ( texture !== undefined ) {\r\n\r\n\t\tthis.add( texture, size, distance, blending, color );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LensFlare.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\r\n\r\n\tconstructor: THREE.LensFlare,\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\t\tthis.positionScreen.copy( source.positionScreen );\r\n\t\tthis.customUpdateCallback = source.customUpdateCallback;\r\n\r\n\t\tfor ( var i = 0, l = source.lensFlares.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.lensFlares.push( source.lensFlares[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( texture, size, distance, blending, color, opacity ) {\r\n\r\n\t\tif ( size === undefined ) size = - 1;\r\n\t\tif ( distance === undefined ) distance = 0;\r\n\t\tif ( opacity === undefined ) opacity = 1;\r\n\t\tif ( color === undefined ) color = new THREE.Color( 0xffffff );\r\n\t\tif ( blending === undefined ) blending = THREE.NormalBlending;\r\n\r\n\t\tdistance = Math.min( distance, Math.max( 0, distance ) );\r\n\r\n\t\tthis.lensFlares.push( {\r\n\t\t\ttexture: texture,\t// THREE.Texture\r\n\t\t\tsize: size, \t\t// size in pixels (-1 = use texture.width)\r\n\t\t\tdistance: distance, \t// distance (0-1) from light source (0=at light source)\r\n\t\t\tx: 0, y: 0, z: 0,\t// screen position (-1 => 1) z = 0 is in front z = 1 is back\r\n\t\t\tscale: 1, \t\t// scale\r\n\t\t\trotation: 0, \t\t// rotation\r\n\t\t\topacity: opacity,\t// opacity\r\n\t\t\tcolor: color,\t\t// color\r\n\t\t\tblending: blending\t// blending\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\t/*\r\n\t * Update lens flares update positions on all flares based on the screen position\r\n\t * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\r\n\t */\r\n\r\n\tupdateLensFlares: function () {\r\n\r\n\t\tvar f, fl = this.lensFlares.length;\r\n\t\tvar flare;\r\n\t\tvar vecX = - this.positionScreen.x * 2;\r\n\t\tvar vecY = - this.positionScreen.y * 2;\r\n\r\n\t\tfor ( f = 0; f < fl; f ++ ) {\r\n\r\n\t\t\tflare = this.lensFlares[ f ];\r\n\r\n\t\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\r\n\t\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\r\n\r\n\t\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\r\n\t\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/scenes/Scene.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Scene = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Scene';\r\n\r\n\tthis.fog = null;\r\n\tthis.overrideMaterial = null;\r\n\r\n\tthis.autoUpdate = true; // checked by the renderer\r\n\r\n};\r\n\r\nTHREE.Scene.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Scene.prototype.constructor = THREE.Scene;\r\n\r\nTHREE.Scene.prototype.copy = function ( source, recursive ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source, recursive );\r\n\r\n\tif ( source.fog !== null ) this.fog = source.fog.clone();\r\n\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\r\n\r\n\tthis.autoUpdate = source.autoUpdate;\r\n\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/scenes/Fog.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Fog = function ( color, near, far ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 1;\r\n\tthis.far = ( far !== undefined ) ? far : 1000;\r\n\r\n};\r\n\r\nTHREE.Fog.prototype.clone = function () {\r\n\r\n\treturn new THREE.Fog( this.color.getHex(), this.near, this.far );\r\n\r\n};\r\n\r\n// File:src/scenes/FogExp2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.FogExp2 = function ( color, density ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\r\n\r\n};\r\n\r\nTHREE.FogExp2.prototype.clone = function () {\r\n\r\n\treturn new THREE.FogExp2( this.color.getHex(), this.density );\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderChunk.js\r\n\r\nTHREE.ShaderChunk = {};\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_fragment' ] = \"#ifdef USE_ALPHAMAP\\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_pars_fragment' ] = \"#ifdef USE_ALPHAMAP\\n\tuniform sampler2D alphaMap;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphatest_fragment' ] = \"#ifdef ALPHATEST\\n\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/aomap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'aomap_fragment' ] = \"#ifdef USE_AOMAP\\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'aomap_pars_fragment' ] = \"#ifdef USE_AOMAP\\n\tuniform sampler2D aoMap;\\n\tuniform float aoMapIntensity;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/begin_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'begin_vertex' ] = \"\\nvec3 transformed = vec3( position );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'beginnormal_vertex' ] = \"\\nvec3 objectNormal = vec3( normal );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/bsdfs.glsl\r\n\r\nTHREE.ShaderChunk[ 'bsdfs' ] = \"bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\\n\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\t\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\t\t}\\n\t\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\tfloat a2 = pow2( alpha );\\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\tfloat a2 = pow2( alpha );\\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\tfloat a2 = pow2( alpha );\\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\tfloat alpha = pow2( roughness );\\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\tvec3 F = F_Schlick( specularColor, dotLH );\\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\tfloat D = D_GGX( alpha, dotNH );\\n\treturn F * ( G * D );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\tvec4 r = roughness * c0 + c1;\\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\tvec3 F = F_Schlick( specularColor, dotLH );\\n\tfloat G = G_BlinnPhong_Implicit( );\\n\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'bumpmap_pars_fragment' ] = \"#ifdef USE_BUMPMAP\\n\tuniform sampler2D bumpMap;\\n\tuniform float bumpScale;\\n\tvec2 dHdxy_fwd() {\\n\t\tvec2 dSTdx = dFdx( vUv );\\n\t\tvec2 dSTdy = dFdy( vUv );\\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\t\treturn vec2( dBx, dBy );\\n\t}\\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\t\tvec3 vSigmaX = dFdx( surf_pos );\\n\t\tvec3 vSigmaY = dFdy( surf_pos );\\n\t\tvec3 vN = surf_norm;\\n\t\tvec3 R1 = cross( vSigmaY, vN );\\n\t\tvec3 R2 = cross( vN, vSigmaX );\\n\t\tfloat fDet = dot( vSigmaX, R1 );\\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/clipping_planes_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'clipping_planes_fragment' ] = \"#if NUM_CLIPPING_PLANES > 0\\n\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\\n\t\tvec4 plane = clippingPlanes[ i ];\\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/clipping_planes_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'clipping_planes_pars_fragment' ] = \"#if NUM_CLIPPING_PLANES > 0\\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\t\tvarying vec3 vViewPosition;\\n\t#endif\\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/clipping_planes_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'clipping_planes_pars_vertex' ] = \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\tvarying vec3 vViewPosition;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/clipping_planes_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'clipping_planes_vertex' ] = \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_fragment' ] = \"#ifdef USE_COLOR\\n\tdiffuseColor.rgb *= vColor;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_fragment' ] = \"#ifdef USE_COLOR\\n\tvarying vec3 vColor;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_vertex' ] = \"#ifdef USE_COLOR\\n\tvarying vec3 vColor;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_vertex' ] = \"#ifdef USE_COLOR\\n\tvColor.xyz = color.xyz;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/common.glsl\r\n\r\nTHREE.ShaderChunk[ 'common' ] = \"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\tvec3 color;\\n\tvec3 direction;\\n\tbool visible;\\n};\\nstruct ReflectedLight {\\n\tvec3 directDiffuse;\\n\tvec3 directSpecular;\\n\tvec3 indirectDiffuse;\\n\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\tvec3 position;\\n\tvec3 normal;\\n\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/cube_uv_reflection_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'cube_uv_reflection_fragment' ] = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\tvec3 absDirection = abs(direction);\\n\tint face = -1;\\n\tif( absDirection.x > absDirection.z ) {\\n\t\tif(absDirection.x > absDirection.y )\\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\\n\t\telse\\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\\n\t}\\n\telse {\\n\t\tif(absDirection.z > absDirection.y )\\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\\n\t\telse\\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\\n\t}\\n\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\tfloat dxRoughness = dFdx(roughness);\\n\tfloat dyRoughness = dFdy(roughness);\\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\tfloat mipLevel = 0.5 * log2(d);\\n\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\tbool bRes = mipLevel == 0.0;\\n\tscale =  bRes && (scale < a) ? a : scale;\\n\tvec3 r;\\n\tvec2 offset;\\n\tint face = getFaceFromDirection(direction);\\n\tfloat rcpPowScale = 1.0 / powScale;\\n\tif( face == 0) {\\n\t\tr = vec3(direction.x, -direction.z, direction.y);\\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n\t}\\n\telse if( face == 1) {\\n\t\tr = vec3(direction.y, direction.x, direction.z);\\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n\t}\\n\telse if( face == 2) {\\n\t\tr = vec3(direction.z, direction.x, direction.y);\\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n\t}\\n\telse if( face == 3) {\\n\t\tr = vec3(direction.x, direction.z, direction.y);\\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n\t}\\n\telse if( face == 4) {\\n\t\tr = vec3(direction.y, direction.x, -direction.z);\\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n\t}\\n\telse {\\n\t\tr = vec3(direction.z, -direction.x, direction.y);\\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n\t}\\n\tr = normalize(r);\\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\tvec2 base = offset + vec2( texelOffset );\\n\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\tfloat r1 = floor(roughnessVal);\\n\tfloat r2 = r1 + 1.0;\\n\tfloat t = fract(roughnessVal);\\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\tfloat s = mipInfo.y;\\n\tfloat level0 = mipInfo.x;\\n\tfloat level1 = level0 + 1.0;\\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\tvec4 result = mix(color10, color20, t);\\n\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'defaultnormal_vertex' ] = \"#ifdef FLIP_SIDED\\n\tobjectNormal = -objectNormal;\\n#endif\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'displacementmap_vertex' ] = \"#ifdef USE_DISPLACEMENTMAP\\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'displacementmap_pars_vertex' ] = \"#ifdef USE_DISPLACEMENTMAP\\n\tuniform sampler2D displacementMap;\\n\tuniform float displacementScale;\\n\tuniform float displacementBias;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'emissivemap_fragment' ] = \"#ifdef USE_EMISSIVEMAP\\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'emissivemap_pars_fragment' ] = \"#ifdef USE_EMISSIVEMAP\\n\tuniform sampler2D emissiveMap;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/encodings_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'encodings_pars_fragment' ] = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n  return value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n  float maxComponent = max( max( value.r, value.g ), value.b );\\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n  float maxRGB = max( value.x, max( value.g, value.b ) );\\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n  M            = ceil( M * 255.0 ) / 255.0;\\n  return vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n    float maxRGB = max( value.x, max( value.g, value.b ) );\\n    float D      = max( maxRange / maxRGB, 1.0 );\\n    D            = min( floor( D ) / 255.0, 1.0 );\\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n  vec4 vResult;\\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n  vResult.w = fract(Le);\\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n  return vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n  float Le = value.z * 255.0 + value.w;\\n  vec3 Xp_Y_XYZp;\\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n  return vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/encodings_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'encodings_fragment' ] = \"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_fragment' ] = \"#ifdef USE_ENVMAP\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\t\t#else\\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\t\t#endif\\n\t#else\\n\t\tvec3 reflectVec = vReflect;\\n\t#endif\\n\t#ifdef DOUBLE_SIDED\\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t#else\\n\t\tfloat flipNormal = 1.0;\\n\t#endif\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\tvec2 sampleUV;\\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\\n\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\t#endif\\n\tenvColor = envMapTexelToLinear( envColor );\\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\t#elif defined( ENVMAP_BLENDING_MIX )\\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\t#elif defined( ENVMAP_BLENDING_ADD )\\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_fragment' ] = \"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\tuniform float reflectivity;\\n\tuniform float envMapIntenstiy;\\n#endif\\n#ifdef USE_ENVMAP\\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\t\tvarying vec3 vWorldPosition;\\n\t#endif\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tuniform samplerCube envMap;\\n\t#else\\n\t\tuniform sampler2D envMap;\\n\t#endif\\n\tuniform float flipEnvMap;\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\t\tuniform float refractionRatio;\\n\t#else\\n\t\tvarying vec3 vReflect;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_vertex' ] = \"#ifdef USE_ENVMAP\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\t\tvarying vec3 vWorldPosition;\\n\t#else\\n\t\tvarying vec3 vReflect;\\n\t\tuniform float refractionRatio;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_vertex' ] = \"#ifdef USE_ENVMAP\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\t\tvWorldPosition = worldPosition.xyz;\\n\t#else\\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\\n\t\t#else\\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\t\t#endif\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_fragment' ] = \"#ifdef USE_FOG\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\t#else\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\t#endif\\n\t#ifdef FOG_EXP2\\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\\n\t#else\\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\t#endif\\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_pars_fragment' ] = \"#ifdef USE_FOG\\n\tuniform vec3 fogColor;\\n\t#ifdef FOG_EXP2\\n\t\tuniform float fogDensity;\\n\t#else\\n\t\tuniform float fogNear;\\n\t\tuniform float fogFar;\\n\t#endif\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_fragment' ] = \"#ifdef USE_LIGHTMAP\\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_pars_fragment' ] = \"#ifdef USE_LIGHTMAP\\n\tuniform sampler2D lightMap;\\n\tuniform float lightMapIntensity;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_lambert_vertex' ] = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\t\tdotNL = dot( geometry.normal, directLight.direction );\\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\t\t#endif\\n\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\t\t#endif\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_pars.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_pars' ] = \"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\tvec3 irradiance = ambientLightColor;\\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\tirradiance *= PI;\\n\t#endif\\n\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\tstruct DirectionalLight {\\n\t\tvec3 direction;\\n\t\tvec3 color;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\t\tdirectLight.color = directionalLight.color;\\n\t\tdirectLight.direction = directionalLight.direction;\\n\t\tdirectLight.visible = true;\\n\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\tstruct PointLight {\\n\t\tvec3 position;\\n\t\tvec3 color;\\n\t\tfloat distance;\\n\t\tfloat decay;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\t\tvec3 lVector = pointLight.position - geometry.position;\\n\t\tdirectLight.direction = normalize( lVector );\\n\t\tfloat lightDistance = length( lVector );\\n\t\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\\n\t\t\tdirectLight.color = pointLight.color;\\n\t\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\t\t\tdirectLight.visible = true;\\n\t\t} else {\\n\t\t\tdirectLight.color = vec3( 0.0 );\\n\t\t\tdirectLight.visible = false;\\n\t\t}\\n\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\tstruct SpotLight {\\n\t\tvec3 position;\\n\t\tvec3 direction;\\n\t\tvec3 color;\\n\t\tfloat distance;\\n\t\tfloat decay;\\n\t\tfloat coneCos;\\n\t\tfloat penumbraCos;\\n\t\tint shadow;\\n\t\tfloat shadowBias;\\n\t\tfloat shadowRadius;\\n\t\tvec2 shadowMapSize;\\n\t};\\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\t\tvec3 lVector = spotLight.position - geometry.position;\\n\t\tdirectLight.direction = normalize( lVector );\\n\t\tfloat lightDistance = length( lVector );\\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\t\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\t\t\tdirectLight.color = spotLight.color;\\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\t\t\tdirectLight.visible = true;\\n\t\t} else {\\n\t\t\tdirectLight.color = vec3( 0.0 );\\n\t\t\tdirectLight.visible = false;\\n\t\t}\\n\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\tstruct HemisphereLight {\\n\t\tvec3 direction;\\n\t\tvec3 skyColor;\\n\t\tvec3 groundColor;\\n\t};\\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\t\tirradiance *= PI;\\n\t\t#endif\\n\t\treturn irradiance;\\n\t}\\n#endif\\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t\t#else\\n\t\t\tfloat flipNormal = 1.0;\\n\t\t#endif\\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\t\t#ifdef ENVMAP_TYPE_CUBE\\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\t\t\t#endif\\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\t\t\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\t\t#else\\n\t\t\tvec4 envMapColor = vec4( 0.0 );\\n\t\t#endif\\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\\n\t}\\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\t}\\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\t\t#else\\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\t\t#endif\\n\t\t#ifdef DOUBLE_SIDED\\n\t\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t\t#else\\n\t\t\tfloat flipNormal = 1.0;\\n\t\t#endif\\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\t\t#ifdef ENVMAP_TYPE_CUBE\\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\t\t\t#endif\\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\t\t\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\t\tvec2 sampleUV;\\n\t\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\t\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\t\t\t#endif\\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\t\t#ifdef TEXTURE_LOD_EXT\\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\t\t\t#else\\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\t\t\t#endif\\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\t\t#endif\\n\t\treturn envMapColor.rgb * envMapIntensity;\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_fragment' ] = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_pars_fragment' ] = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\tvec3\tdiffuseColor;\\n\tvec3\tspecularColor;\\n\tfloat\tspecularShininess;\\n\tfloat\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\tvec3 irradiance = dotNL * directLight.color;\\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\tirradiance *= PI;\\n\t#endif\\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\t(0)\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_physical_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_physical_fragment' ] = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\tmaterial.specularColor = mix( vec3( 0.16 * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_physical_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_physical_pars_fragment' ] = \"struct PhysicalMaterial {\\n\tvec3\tdiffuseColor;\\n\tfloat\tspecularRoughness;\\n\tvec3\tspecularColor;\\n\t#ifndef STANDARD\\n\t#endif\\n};\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\tvec3 irradiance = dotNL * directLight.color;\\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\tirradiance *= PI;\\n\t#endif\\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\treflectedLight.indirectSpecular += radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n}\\n#define RE_Direct\t\t\t\tRE_Direct_Physical\\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_template.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_template' ] = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\tPointLight pointLight;\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tpointLight = pointLights[ i ];\\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\tSpotLight spotLight;\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tspotLight = spotLights[ i ];\\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\tDirectionalLight directionalLight;\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tdirectionalLight = directionalLights[ i ];\\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\t\t#ifdef USE_SHADOWMAP\\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\t\t#endif\\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\t#ifdef USE_LIGHTMAP\\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\t\t\tlightMapIrradiance *= PI;\\n\t\t#endif\\n\t\tirradiance += lightMapIrradiance;\\n\t#endif\\n\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\t\t}\\n\t#endif\\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\\n\t#endif\\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\\n\tRE_IndirectSpecular( radiance, geometry, material, reflectedLight );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_fragment' ] = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_fragment' ] = \"#ifdef USE_LOGDEPTHBUF\\n\tuniform float logDepthBufFC;\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvarying float vFragDepth;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_vertex' ] = \"#ifdef USE_LOGDEPTHBUF\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvarying float vFragDepth;\\n\t#endif\\n\tuniform float logDepthBufFC;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_vertex' ] = \"#ifdef USE_LOGDEPTHBUF\\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\t\tvFragDepth = 1.0 + gl_Position.w;\\n\t#else\\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_fragment' ] = \"#ifdef USE_MAP\\n\tvec4 texelColor = texture2D( map, vUv );\\n\ttexelColor = mapTexelToLinear( texelColor );\\n\tdiffuseColor *= texelColor;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_pars_fragment' ] = \"#ifdef USE_MAP\\n\tuniform sampler2D map;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_fragment' ] = \"#ifdef USE_MAP\\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_pars_fragment' ] = \"#ifdef USE_MAP\\n\tuniform vec4 offsetRepeat;\\n\tuniform sampler2D map;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/metalnessmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'metalnessmap_fragment' ] = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\tmetalnessFactor *= texelMetalness.r;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/metalnessmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'metalnessmap_pars_fragment' ] = \"#ifdef USE_METALNESSMAP\\n\tuniform sampler2D metalnessMap;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphnormal_vertex' ] = \"#ifdef USE_MORPHNORMALS\\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_pars_vertex' ] = \"#ifdef USE_MORPHTARGETS\\n\t#ifndef USE_MORPHNORMALS\\n\tuniform float morphTargetInfluences[ 8 ];\\n\t#else\\n\tuniform float morphTargetInfluences[ 4 ];\\n\t#endif\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_vertex' ] = \"#ifdef USE_MORPHTARGETS\\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\t#ifndef USE_MORPHNORMALS\\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/normal_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'normal_fragment' ] = \"#ifdef FLAT_SHADED\\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\tvec3 normal = normalize( vNormal );\\n\t#ifdef DOUBLE_SIDED\\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\t#endif\\n#endif\\n#ifdef USE_NORMALMAP\\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'normalmap_pars_fragment' ] = \"#ifdef USE_NORMALMAP\\n\tuniform sampler2D normalMap;\\n\tuniform vec2 normalScale;\\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\\n\t\tvec2 st0 = dFdx( vUv.st );\\n\t\tvec2 st1 = dFdy( vUv.st );\\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\t\tvec3 N = normalize( surf_norm );\\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\t\tmapN.xy = normalScale * mapN.xy;\\n\t\tmat3 tsn = mat3( S, T, N );\\n\t\treturn normalize( tsn * mapN );\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/packing.glsl\r\n\r\nTHREE.ShaderChunk[ 'packing' ] = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n  return normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n  return 1.0 - 2.0 * rgb.xyz;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthoDepth( const in float viewZ, const in float near, const in float far ) {\\n  return ( viewZ + near ) / ( near - far );\\n}\\nfloat OrthoDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n  return linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/premultiplied_alpha_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'premultiplied_alpha_fragment' ] = \"#ifdef PREMULTIPLIED_ALPHA\\n\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/project_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'project_vertex' ] = \"#ifdef USE_SKINNING\\n\tvec4 mvPosition = modelViewMatrix * skinned;\\n#else\\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n#endif\\ngl_Position = projectionMatrix * mvPosition;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/roughnessmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'roughnessmap_fragment' ] = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\troughnessFactor *= texelRoughness.r;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/roughnessmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'roughnessmap_pars_fragment' ] = \"#ifdef USE_ROUGHNESSMAP\\n\tuniform sampler2D roughnessMap;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_fragment' ] = \"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\t#endif\\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\t}\\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\t\tvec2 f = fract( uv * size + 0.5 );\\n\t\tfloat a = mix( lb, lt, f.y );\\n\t\tfloat b = mix( rb, rt, f.y );\\n\t\tfloat c = mix( a, b, f.x );\\n\t\treturn c;\\n\t}\\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\t\tshadowCoord.xyz /= shadowCoord.w;\\n\t\tshadowCoord.z += shadowBias;\\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\t\tbool inFrustum = all( inFrustumVec );\\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\t\tbool frustumTest = all( frustumTestVec );\\n\t\tif ( frustumTest ) {\\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\\n\t\t\treturn (\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\t\t\t) * ( 1.0 / 9.0 );\\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\\n\t\t\treturn (\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\t\t\t) * ( 1.0 / 9.0 );\\n\t\t#else\\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\t\t#endif\\n\t\t}\\n\t\treturn 1.0;\\n\t}\\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\t\tvec3 absV = abs( v );\\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\t\tabsV *= scaleToCube;\\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\t\tvec2 planar = v.xy;\\n\t\tfloat almostATexel = 1.5 * texelSizeY;\\n\t\tfloat almostOne = 1.0 - almostATexel;\\n\t\tif ( absV.z >= almostOne ) {\\n\t\t\tif ( v.z > 0.0 )\\n\t\t\t\tplanar.x = 4.0 - v.x;\\n\t\t} else if ( absV.x >= almostOne ) {\\n\t\t\tfloat signX = sign( v.x );\\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\\n\t\t} else if ( absV.y >= almostOne ) {\\n\t\t\tfloat signY = sign( v.y );\\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\t\t\tplanar.y = v.z * signY - 2.0;\\n\t\t}\\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\t}\\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\t\tvec3 lightToPosition = shadowCoord.xyz;\\n\t\tvec3 bd3D = normalize( lightToPosition );\\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\t\t\treturn (\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\t\t\t) * ( 1.0 / 9.0 );\\n\t\t#else\\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\t\t#endif\\n\t}\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_vertex' ] = \"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_vertex' ] = \"#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\t}\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmask_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmask_pars_fragment' ] = \"float getShadowMask() {\\n\tfloat shadow = 1.0;\\n\t#ifdef USE_SHADOWMAP\\n\t#if NUM_DIR_LIGHTS > 0\\n\tDirectionalLight directionalLight;\\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\t\tdirectionalLight = directionalLights[ i ];\\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#if NUM_SPOT_LIGHTS > 0\\n\tSpotLight spotLight;\\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\t\tspotLight = spotLights[ i ];\\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#if NUM_POINT_LIGHTS > 0\\n\tPointLight pointLight;\\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\t\tpointLight = pointLights[ i ];\\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\t}\\n\t#endif\\n\t#endif\\n\treturn shadow;\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinbase_vertex' ] = \"#ifdef USE_SKINNING\\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_pars_vertex' ] = \"#ifdef USE_SKINNING\\n\tuniform mat4 bindMatrix;\\n\tuniform mat4 bindMatrixInverse;\\n\t#ifdef BONE_TEXTURE\\n\t\tuniform sampler2D boneTexture;\\n\t\tuniform int boneTextureWidth;\\n\t\tuniform int boneTextureHeight;\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\t\t\tfloat j = i * 4.0;\\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\\n\t\t\ty = dy * ( y + 0.5 );\\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\t\t\treturn bone;\\n\t\t}\\n\t#else\\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\\n\t\t\treturn bone;\\n\t\t}\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_vertex' ] = \"#ifdef USE_SKINNING\\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\tvec4 skinned = vec4( 0.0 );\\n\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\tskinned  = bindMatrixInverse * skinned;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinnormal_vertex' ] = \"#ifdef USE_SKINNING\\n\tmat4 skinMatrix = mat4( 0.0 );\\n\tskinMatrix += skinWeight.x * boneMatX;\\n\tskinMatrix += skinWeight.y * boneMatY;\\n\tskinMatrix += skinWeight.z * boneMatZ;\\n\tskinMatrix += skinWeight.w * boneMatW;\\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_fragment' ] = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\tspecularStrength = texelSpecular.r;\\n#else\\n\tspecularStrength = 1.0;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_pars_fragment' ] = \"#ifdef USE_SPECULARMAP\\n\tuniform sampler2D specularMap;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/tonemapping_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'tonemapping_fragment' ] = \"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/tonemapping_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'tonemapping_pars_fragment' ] = \"#define saturate(a) clamp( a, 0.0, 1.0 )\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n  return toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n  color *= toneMappingExposure;\\n  return saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n  color *= toneMappingExposure;\\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n  color *= toneMappingExposure;\\n  color = max( vec3( 0.0 ), color - 0.004 );\\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_pars_fragment' ] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tvarying vec2 vUv2;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_pars_vertex' ] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tattribute vec2 uv2;\\n\tvarying vec2 vUv2;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_vertex' ] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\tvUv2 = uv2;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_pars_fragment' ] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvarying vec2 vUv;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_pars_vertex' ] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvarying vec2 vUv;\\n\tuniform vec4 offsetRepeat;\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_vertex' ] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'worldpos_vertex' ] = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\t#ifdef USE_SKINNING\\n\t\tvec4 worldPosition = modelMatrix * skinned;\\n\t#else\\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n\t#endif\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/UniformsUtils.js\r\n\r\n/**\r\n * Uniform Utilities\r\n */\r\n\r\nTHREE.UniformsUtils = {\r\n\r\n\tmerge: function ( uniforms ) {\r\n\r\n\t\tvar merged = {};\r\n\r\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\r\n\r\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\r\n\r\n\t\t\tfor ( var p in tmp ) {\r\n\r\n\t\t\t\tmerged[ p ] = tmp[ p ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn merged;\r\n\r\n\t},\r\n\r\n\tclone: function ( uniforms_src ) {\r\n\r\n\t\tvar uniforms_dst = {};\r\n\r\n\t\tfor ( var u in uniforms_src ) {\r\n\r\n\t\t\tuniforms_dst[ u ] = {};\r\n\r\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\r\n\r\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\r\n\r\n\t\t\t\tif ( parameter_src instanceof THREE.Color ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector2 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector3 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Matrix3 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Matrix4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Texture ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\r\n\r\n\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms_dst;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/UniformsLib.js\r\n\r\n/**\r\n * Uniforms library for shared webgl shaders\r\n */\r\n\r\nTHREE.UniformsLib = {\r\n\r\n\tcommon: {\r\n\r\n\t\t\"diffuse\": { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\": { type: \"1f\", value: 1.0 },\r\n\r\n\t\t\"map\": { type: \"t\", value: null },\r\n\t\t\"offsetRepeat\": { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\r\n\r\n\t\t\"specularMap\": { type: \"t\", value: null },\r\n\t\t\"alphaMap\": { type: \"t\", value: null },\r\n\r\n\t\t\"envMap\": { type: \"t\", value: null },\r\n\t\t\"flipEnvMap\": { type: \"1f\", value: - 1 },\r\n\t\t\"reflectivity\": { type: \"1f\", value: 1.0 },\r\n\t\t\"refractionRatio\": { type: \"1f\", value: 0.98 }\r\n\r\n\t},\r\n\r\n\taomap: {\r\n\r\n\t\t\"aoMap\": { type: \"t\", value: null },\r\n\t\t\"aoMapIntensity\": { type: \"1f\", value: 1 }\r\n\r\n\t},\r\n\r\n\tlightmap: {\r\n\r\n\t\t\"lightMap\": { type: \"t\", value: null },\r\n\t\t\"lightMapIntensity\": { type: \"1f\", value: 1 }\r\n\r\n\t},\r\n\r\n\temissivemap: {\r\n\r\n\t\t\"emissiveMap\": { type: \"t\", value: null }\r\n\r\n\t},\r\n\r\n\tbumpmap: {\r\n\r\n\t\t\"bumpMap\": { type: \"t\", value: null },\r\n\t\t\"bumpScale\": { type: \"1f\", value: 1 }\r\n\r\n\t},\r\n\r\n\tnormalmap: {\r\n\r\n\t\t\"normalMap\": { type: \"t\", value: null },\r\n\t\t\"normalScale\": { type: \"v2\", value: new THREE.Vector2( 1, 1 ) }\r\n\r\n\t},\r\n\r\n\tdisplacementmap: {\r\n\r\n\t\t\"displacementMap\": { type: \"t\", value: null },\r\n\t\t\"displacementScale\": { type: \"1f\", value: 1 },\r\n\t\t\"displacementBias\": { type: \"1f\", value: 0 }\r\n\r\n\t},\r\n\r\n\troughnessmap: {\r\n\r\n\t\t\"roughnessMap\": { type: \"t\", value: null }\r\n\r\n\t},\r\n\r\n\tmetalnessmap: {\r\n\r\n\t\t\"metalnessMap\": { type: \"t\", value: null }\r\n\r\n\t},\r\n\r\n\tfog: {\r\n\r\n\t\t\"fogDensity\": { type: \"1f\", value: 0.00025 },\r\n\t\t\"fogNear\": { type: \"1f\", value: 1 },\r\n\t\t\"fogFar\": { type: \"1f\", value: 2000 },\r\n\t\t\"fogColor\": { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tlights: {\r\n\r\n\t\t\"ambientLightColor\": { type: \"3fv\", value: [] },\r\n\r\n\t\t\"directionalLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"direction\": { type: \"v3\" },\r\n\t\t\t\"color\": { type: \"c\" },\r\n\r\n\t\t\t\"shadow\": { type: \"1i\" },\r\n\t\t\t\"shadowBias\": { type: \"1f\" },\r\n\t\t\t\"shadowRadius\": { type: \"1f\" },\r\n\t\t\t\"shadowMapSize\": { type: \"v2\" }\r\n\t\t} },\r\n\r\n\t\t\"directionalShadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"directionalShadowMatrix\": { type: \"m4v\", value: [] },\r\n\r\n\t\t\"spotLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"color\": { type: \"c\" },\r\n\t\t\t\"position\": { type: \"v3\" },\r\n\t\t\t\"direction\": { type: \"v3\" },\r\n\t\t\t\"distance\": { type: \"1f\" },\r\n\t\t\t\"coneCos\": { type: \"1f\" },\r\n\t\t\t\"penumbraCos\": { type: \"1f\" },\r\n\t\t\t\"decay\": { type: \"1f\" },\r\n\r\n\t\t\t\"shadow\": { type: \"1i\" },\r\n\t\t\t\"shadowBias\": { type: \"1f\" },\r\n\t\t\t\"shadowRadius\": { type: \"1f\" },\r\n\t\t\t\"shadowMapSize\": { type: \"v2\" }\r\n\t\t} },\r\n\r\n\t\t\"spotShadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"spotShadowMatrix\": { type: \"m4v\", value: [] },\r\n\r\n\t\t\"pointLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"color\": { type: \"c\" },\r\n\t\t\t\"position\": { type: \"v3\" },\r\n\t\t\t\"decay\": { type: \"1f\" },\r\n\t\t\t\"distance\": { type: \"1f\" },\r\n\r\n\t\t\t\"shadow\": { type: \"1i\" },\r\n\t\t\t\"shadowBias\": { type: \"1f\" },\r\n\t\t\t\"shadowRadius\": { type: \"1f\" },\r\n\t\t\t\"shadowMapSize\": { type: \"v2\" }\r\n\t\t} },\r\n\r\n\t\t\"pointShadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"pointShadowMatrix\": { type: \"m4v\", value: [] },\r\n\r\n\t\t\"hemisphereLights\": { type: \"sa\", value: [], properties: {\r\n\t\t\t\"direction\": { type: \"v3\" },\r\n\t\t\t\"skyColor\": { type: \"c\" },\r\n\t\t\t\"groundColor\": { type: \"c\" }\r\n\t\t} }\r\n\r\n\t},\r\n\r\n\tpoints: {\r\n\r\n\t\t\"diffuse\": { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\": { type: \"1f\", value: 1.0 },\r\n\t\t\"size\": { type: \"1f\", value: 1.0 },\r\n\t\t\"scale\": { type: \"1f\", value: 1.0 },\r\n\t\t\"map\": { type: \"t\", value: null },\r\n\t\t\"offsetRepeat\": { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) }\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderLib/cube_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'cube_frag' ] = \"uniform samplerCube tCube;\\nuniform float tFlip;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\t#include <logdepthbuf_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/cube_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'cube_vert' ] = \"varying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\tvWorldPosition = transformDirection( position, modelMatrix );\\n\t#include <begin_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/depth_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'depth_frag' ] = \"#if DEPTH_PACKING == 3200\\n\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( 1.0 );\\n\t#if DEPTH_PACKING == 3200\\n\t\tdiffuseColor.a = opacity;\\n\t#endif\\n\t#include <map_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <logdepthbuf_fragment>\\n\t#if DEPTH_PACKING == 3200\\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\\n\t#elif DEPTH_PACKING == 3201\\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\t#endif\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/depth_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'depth_vert' ] = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <begin_vertex>\\n\t#include <displacementmap_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/distanceRGBA_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'distanceRGBA_frag' ] = \"uniform vec3 lightPos;\\nvarying vec4 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\t#include <clipping_planes_fragment>\\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/distanceRGBA_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'distanceRGBA_vert' ] = \"varying vec4 vWorldPosition;\\n#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <skinbase_vertex>\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <clipping_planes_vertex>\\n\tvWorldPosition = worldPosition;\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/equirect_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'equirect_frag' ] = \"uniform sampler2D tEquirect;\\nuniform float tFlip;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec3 direction = normalize( vWorldPosition );\\n\tvec2 sampleUV;\\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\t#include <logdepthbuf_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/equirect_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'equirect_vert' ] = \"varying vec3 vWorldPosition;\\n#include <common>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\tvWorldPosition = transformDirection( position, modelMatrix );\\n\t#include <begin_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/linedashed_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'linedashed_frag' ] = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\t\tdiscard;\\n\t}\\n\tvec3 outgoingLight = vec3( 0.0 );\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\t#include <logdepthbuf_fragment>\\n\t#include <color_fragment>\\n\toutgoingLight = diffuseColor.rgb;\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/linedashed_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'linedashed_vert' ] = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <color_vertex>\\n\tvLineDistance = scale * lineDistance;\\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\tgl_Position = projectionMatrix * mvPosition;\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshbasic_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshbasic_frag' ] = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\tReflectedLight reflectedLight;\\n\treflectedLight.directDiffuse = vec3( 0.0 );\\n\treflectedLight.directSpecular = vec3( 0.0 );\\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\\n\treflectedLight.indirectSpecular = vec3( 0.0 );\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\t#include <envmap_fragment>\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshbasic_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshbasic_vert' ] = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <skinbase_vertex>\\n\t#ifdef USE_ENVMAP\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n\t#endif\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <clipping_planes_vertex>\\n\t#include <envmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshlambert_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshlambert_frag' ] = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\tvec3 totalEmissiveRadiance = emissive;\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\t#include <emissivemap_fragment>\\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\t#include <lightmap_fragment>\\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\t#ifdef DOUBLE_SIDED\\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\t#else\\n\t\treflectedLight.directDiffuse = vLightFront;\\n\t#endif\\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\t#include <envmap_fragment>\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshlambert_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshlambert_vert' ] = \"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <envmap_vertex>\\n\t#include <lights_lambert_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshphong_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshphong_frag' ] = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\tvec3 totalEmissiveRadiance = emissive;\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\t#include <normal_fragment>\\n\t#include <emissivemap_fragment>\\n\t#include <lights_phong_fragment>\\n\t#include <lights_template>\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\t#include <envmap_fragment>\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshphong_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshphong_vert' ] = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\tvNormal = normalize( transformedNormal );\\n#endif\\n\t#include <begin_vertex>\\n\t#include <displacementmap_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n\tvViewPosition = - mvPosition.xyz;\\n\t#include <worldpos_vertex>\\n\t#include <envmap_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshphysical_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshphysical_frag' ] = \"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\nuniform float envMapIntensity;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\tvec3 totalEmissiveRadiance = emissive;\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_fragment>\\n\t#include <color_fragment>\\n\t#include <alphamap_fragment>\\n\t#include <alphatest_fragment>\\n\t#include <specularmap_fragment>\\n\t#include <roughnessmap_fragment>\\n\t#include <metalnessmap_fragment>\\n\t#include <normal_fragment>\\n\t#include <emissivemap_fragment>\\n\t#include <lights_physical_fragment>\\n\t#include <lights_template>\\n\t#include <aomap_fragment>\\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/meshphysical_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'meshphysical_vert' ] = \"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <uv_vertex>\\n\t#include <uv2_vertex>\\n\t#include <color_vertex>\\n\t#include <beginnormal_vertex>\\n\t#include <morphnormal_vertex>\\n\t#include <skinbase_vertex>\\n\t#include <skinnormal_vertex>\\n\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\tvNormal = normalize( transformedNormal );\\n#endif\\n\t#include <begin_vertex>\\n\t#include <displacementmap_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <skinning_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n\tvViewPosition = - mvPosition.xyz;\\n\t#include <worldpos_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/normal_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'normal_frag' ] = \"uniform float opacity;\\nvarying vec3 vNormal;\\n#include <common>\\n#include <packing>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\\n\t#include <logdepthbuf_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/normal_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'normal_vert' ] = \"varying vec3 vNormal;\\n#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\tvNormal = normalize( normalMatrix * normal );\\n\t#include <begin_vertex>\\n\t#include <morphtarget_vertex>\\n\t#include <project_vertex>\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/points_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'points_frag' ] = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\t#include <clipping_planes_fragment>\\n\tvec3 outgoingLight = vec3( 0.0 );\\n\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\t#include <logdepthbuf_fragment>\\n\t#include <map_particle_fragment>\\n\t#include <color_fragment>\\n\t#include <alphatest_fragment>\\n\toutgoingLight = diffuseColor.rgb;\\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\t#include <premultiplied_alpha_fragment>\\n\t#include <tonemapping_fragment>\\n\t#include <encodings_fragment>\\n\t#include <fog_fragment>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/points_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'points_vert' ] = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\t#include <color_vertex>\\n\t#include <begin_vertex>\\n\t#include <project_vertex>\\n\t#ifdef USE_SIZEATTENUATION\\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\t#else\\n\t\tgl_PointSize = size;\\n\t#endif\\n\t#include <logdepthbuf_vertex>\\n\t#include <clipping_planes_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/shadow_frag.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadow_frag' ] = \"uniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib/shadow_vert.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadow_vert' ] = \"#include <shadowmap_pars_vertex>\\nvoid main() {\\n\t#include <begin_vertex>\\n\t#include <project_vertex>\\n\t#include <worldpos_vertex>\\n\t#include <shadowmap_vertex>\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderLib.js\r\n\r\n/**\r\n * Webgl Shader Library for three.js\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n */\r\n\r\n\r\nTHREE.ShaderLib = {\r\n\r\n\t'basic': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ 'common' ],\r\n\t\t\tTHREE.UniformsLib[ 'aomap' ],\r\n\t\t\tTHREE.UniformsLib[ 'fog' ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'meshbasic_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'meshbasic_frag' ]\r\n\r\n\t},\r\n\r\n\t'lambert': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ 'common' ],\r\n\t\t\tTHREE.UniformsLib[ 'aomap' ],\r\n\t\t\tTHREE.UniformsLib[ 'lightmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'emissivemap' ],\r\n\t\t\tTHREE.UniformsLib[ 'fog' ],\r\n\t\t\tTHREE.UniformsLib[ 'lights' ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'meshlambert_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'meshlambert_frag' ]\r\n\r\n\t},\r\n\r\n\t'phong': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ 'common' ],\r\n\t\t\tTHREE.UniformsLib[ 'aomap' ],\r\n\t\t\tTHREE.UniformsLib[ 'lightmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'emissivemap' ],\r\n\t\t\tTHREE.UniformsLib[ 'bumpmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'normalmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'displacementmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'fog' ],\r\n\t\t\tTHREE.UniformsLib[ 'lights' ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\"specular\" : { type: \"c\", value: new THREE.Color( 0x111111 ) },\r\n\t\t\t\t\"shininess\": { type: \"1f\", value: 30 }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'meshphong_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'meshphong_frag' ]\r\n\r\n\t},\r\n\r\n\t'standard': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ 'common' ],\r\n\t\t\tTHREE.UniformsLib[ 'aomap' ],\r\n\t\t\tTHREE.UniformsLib[ 'lightmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'emissivemap' ],\r\n\t\t\tTHREE.UniformsLib[ 'bumpmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'normalmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'displacementmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'roughnessmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'metalnessmap' ],\r\n\t\t\tTHREE.UniformsLib[ 'fog' ],\r\n\t\t\tTHREE.UniformsLib[ 'lights' ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\"roughness\": { type: \"1f\", value: 0.5 },\r\n\t\t\t\t\"metalness\": { type: \"1f\", value: 0 },\r\n\t\t\t\t\"envMapIntensity\" : { type: \"1f\", value: 1 } // temporary\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'meshphysical_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'meshphysical_frag' ]\r\n\r\n\t},\r\n\r\n\t'points': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ 'points' ],\r\n\t\t\tTHREE.UniformsLib[ 'fog' ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'points_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'points_frag' ]\r\n\r\n\t},\r\n\r\n\t'dashed': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ 'common' ],\r\n\t\t\tTHREE.UniformsLib[ 'fog' ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"scale\"    : { type: \"1f\", value: 1 },\r\n\t\t\t\t\"dashSize\" : { type: \"1f\", value: 1 },\r\n\t\t\t\t\"totalSize\": { type: \"1f\", value: 2 }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'linedashed_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'linedashed_frag' ]\r\n\r\n\t},\r\n\r\n\t'depth': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ 'common' ],\r\n\t\t\tTHREE.UniformsLib[ 'displacementmap' ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'depth_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'depth_frag' ]\r\n\r\n\t},\r\n\r\n\t'normal': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"opacity\" : { type: \"1f\", value: 1.0 }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'normal_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'normal_frag' ]\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'cube': {\r\n\r\n\t\tuniforms: {\r\n\t\t\t\"tCube\": { type: \"t\", value: null },\r\n\t\t\t\"tFlip\": { type: \"1f\", value: - 1 }\r\n\t\t},\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'cube_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'cube_frag' ]\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'equirect': {\r\n\r\n\t\tuniforms: {\r\n\t\t\t\"tEquirect\": { type: \"t\", value: null },\r\n\t\t\t\"tFlip\": { type: \"1f\", value: - 1 }\r\n\t\t},\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'equirect_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'equirect_frag' ]\r\n\r\n\t},\r\n\r\n\t'distanceRGBA': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"lightPos\": { type: \"v3\", value: new THREE.Vector3() }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: THREE.ShaderChunk[ 'distanceRGBA_vert' ],\r\n\t\tfragmentShader: THREE.ShaderChunk[ 'distanceRGBA_frag' ]\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ShaderLib[ 'physical' ] = {\r\n\r\n\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\tTHREE.ShaderLib[ 'standard' ].uniforms,\r\n\r\n\t\t{\r\n\t\t\t// future\r\n\t\t}\r\n\r\n\t] ),\r\n\r\n\tvertexShader: THREE.ShaderChunk[ 'meshphysical_vert' ],\r\n\tfragmentShader: THREE.ShaderChunk[ 'meshphysical_frag' ]\r\n\r\n};\r\n\r\n\r\n// File:src/renderers/WebGLRenderer.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n * @author tschw\r\n */\r\n\r\nTHREE.WebGLRenderer = function ( parameters ) {\r\n\r\n\tconsole.log( 'THREE.WebGLRenderer', THREE.REVISION );\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElement( 'canvas' ),\r\n\t_context = parameters.context !== undefined ? parameters.context : null,\r\n\r\n\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n\t_depth = parameters.depth !== undefined ? parameters.depth : true,\r\n\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false;\r\n\r\n\tvar lights = [];\r\n\r\n\tvar opaqueObjects = [];\r\n\tvar opaqueObjectsLastIndex = - 1;\r\n\tvar transparentObjects = [];\r\n\tvar transparentObjectsLastIndex = - 1;\r\n\r\n\tvar morphInfluences = new Float32Array( 8 );\r\n\r\n\tvar sprites = [];\r\n\tvar lensFlares = [];\r\n\r\n\t// public properties\r\n\r\n\tthis.domElement = _canvas;\r\n\tthis.context = null;\r\n\r\n\t// clearing\r\n\r\n\tthis.autoClear = true;\r\n\tthis.autoClearColor = true;\r\n\tthis.autoClearDepth = true;\r\n\tthis.autoClearStencil = true;\r\n\r\n\t// scene graph\r\n\r\n\tthis.sortObjects = true;\r\n\r\n\t// user-defined clipping\r\n\r\n\tthis.clippingPlanes = [];\r\n\tthis.localClippingEnabled = false;\r\n\r\n\t// physically based shading\r\n\r\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\r\n\tthis.gammaInput = false;\r\n\tthis.gammaOutput = false;\r\n\r\n\t// physical lights\r\n\r\n\tthis.physicallyCorrectLights = false;\r\n\r\n\t// tone mapping\r\n\r\n\tthis.toneMapping = THREE.LinearToneMapping;\r\n\tthis.toneMappingExposure = 1.0;\r\n\tthis.toneMappingWhitePoint = 1.0;\r\n\r\n\t// morphs\r\n\r\n\tthis.maxMorphTargets = 8;\r\n\tthis.maxMorphNormals = 4;\r\n\r\n\t// flags\r\n\r\n\tthis.autoScaleCubemaps = true;\r\n\r\n\t// internal properties\r\n\r\n\tvar _this = this,\r\n\r\n\t// internal state cache\r\n\r\n\t_currentProgram = null,\r\n\t_currentRenderTarget = null,\r\n\t_currentFramebuffer = null,\r\n\t_currentMaterialId = - 1,\r\n\t_currentGeometryProgram = '',\r\n\t_currentCamera = null,\r\n\r\n\t_currentScissor = new THREE.Vector4(),\r\n\t_currentScissorTest = null,\r\n\r\n\t_currentViewport = new THREE.Vector4(),\r\n\r\n\t//\r\n\r\n\t_usedTextureUnits = 0,\r\n\r\n\t//\r\n\r\n\t_clearColor = new THREE.Color( 0x000000 ),\r\n\t_clearAlpha = 0,\r\n\r\n\t_width = _canvas.width,\r\n\t_height = _canvas.height,\r\n\r\n\t_pixelRatio = 1,\r\n\r\n\t_scissor = new THREE.Vector4( 0, 0, _width, _height ),\r\n\t_scissorTest = false,\r\n\r\n\t_viewport = new THREE.Vector4( 0, 0, _width, _height ),\r\n\r\n\t// frustum\r\n\r\n\t_frustum = new THREE.Frustum(),\r\n\r\n\t// clipping\r\n\r\n\t_clipping = new THREE.WebGLClipping(),\r\n\t_clippingEnabled = false,\r\n\t_localClippingEnabled = false,\r\n\r\n\t_sphere = new THREE.Sphere(),\r\n\r\n\t// camera matrices cache\r\n\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\r\n\t_vector3 = new THREE.Vector3(),\r\n\r\n\t// light arrays cache\r\n\r\n\t_lights = {\r\n\r\n\t\thash: '',\r\n\r\n\t\tambient: [ 0, 0, 0 ],\r\n\t\tdirectional: [],\r\n\t\tdirectionalShadowMap: [],\r\n\t\tdirectionalShadowMatrix: [],\r\n\t\tspot: [],\r\n\t\tspotShadowMap: [],\r\n\t\tspotShadowMatrix: [],\r\n\t\tpoint: [],\r\n\t\tpointShadowMap: [],\r\n\t\tpointShadowMatrix: [],\r\n\t\themi: [],\r\n\r\n\t\tshadows: []\r\n\r\n\t},\r\n\r\n\t// info\r\n\r\n\t_infoMemory = {\r\n\r\n\t\tgeometries: 0,\r\n\t\ttextures: 0\r\n\r\n\t},\r\n\r\n\t_infoRender = {\r\n\r\n\t\tcalls: 0,\r\n\t\tvertices: 0,\r\n\t\tfaces: 0,\r\n\t\tpoints: 0\r\n\r\n\t};\r\n\r\n\tthis.info = {\r\n\r\n\t\trender: _infoRender,\r\n\t\tmemory: _infoMemory,\r\n\t\tprograms: null\r\n\r\n\t};\r\n\r\n\r\n\t// initialize\r\n\r\n\tvar _gl;\r\n\r\n\ttry {\r\n\r\n\t\tvar attributes = {\r\n\t\t\talpha: _alpha,\r\n\t\t\tdepth: _depth,\r\n\t\t\tstencil: _stencil,\r\n\t\t\tantialias: _antialias,\r\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\r\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\r\n\t\t};\r\n\r\n\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\r\n\r\n\t\tif ( _gl === null ) {\r\n\r\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context.';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\r\n\r\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\r\n\r\n\t\t\t_gl.getShaderPrecisionFormat = function () {\r\n\r\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\r\n\r\n\t} catch ( error ) {\r\n\r\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error );\r\n\r\n\t}\r\n\r\n\tvar _isWebGL2 = (typeof WebGL2RenderingContext !== 'undefined' && _gl instanceof WebGL2RenderingContext);\r\n\tvar extensions = new THREE.WebGLExtensions( _gl );\r\n\r\n\textensions.get( 'WEBGL_depth_texture' );\r\n\textensions.get( 'OES_texture_float' );\r\n\textensions.get( 'OES_texture_float_linear' );\r\n\textensions.get( 'OES_texture_half_float' );\r\n\textensions.get( 'OES_texture_half_float_linear' );\r\n\textensions.get( 'OES_standard_derivatives' );\r\n\textensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\tif ( extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\tTHREE.BufferGeometry.MaxIndex = 4294967296;\r\n\r\n\t}\r\n\r\n\tvar capabilities = new THREE.WebGLCapabilities( _gl, extensions, parameters );\r\n\r\n\tvar state = new THREE.WebGLState( _gl, extensions, paramThreeToGL );\r\n\tvar properties = new THREE.WebGLProperties();\r\n\tvar objects = new THREE.WebGLObjects( _gl, properties, this.info );\r\n\tvar programCache = new THREE.WebGLPrograms( this, capabilities );\r\n\tvar lightCache = new THREE.WebGLLights();\r\n\r\n\tthis.info.programs = programCache.programs;\r\n\r\n\tvar bufferRenderer = new THREE.WebGLBufferRenderer( _gl, extensions, _infoRender );\r\n\tvar indexedBufferRenderer = new THREE.WebGLIndexedBufferRenderer( _gl, extensions, _infoRender );\r\n\r\n\t//\r\n\r\n\tfunction getTargetPixelRatio() {\r\n\r\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\r\n\r\n\t}\r\n\r\n\tfunction glClearColor( r, g, b, a ) {\r\n\r\n\t\tif ( _premultipliedAlpha === true ) {\r\n\r\n\t\t\tr *= a; g *= a; b *= a;\r\n\r\n\t\t}\r\n\r\n\t\tstate.clearColor( r, g, b, a );\r\n\r\n\t}\r\n\r\n\tfunction setDefaultGLState() {\r\n\r\n\t\tstate.init();\r\n\r\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\r\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t}\r\n\r\n\tfunction resetGLState() {\r\n\r\n\t\t_currentProgram = null;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\t\t_currentMaterialId = - 1;\r\n\r\n\t\tstate.reset();\r\n\r\n\t}\r\n\r\n\tsetDefaultGLState();\r\n\r\n\tthis.context = _gl;\r\n\tthis.capabilities = capabilities;\r\n\tthis.extensions = extensions;\r\n\tthis.properties = properties;\r\n\tthis.state = state;\r\n\r\n\t// shadow map\r\n\r\n\tvar shadowMap = new THREE.WebGLShadowMap( this, _lights, objects );\r\n\r\n\tthis.shadowMap = shadowMap;\r\n\r\n\r\n\t// Plugins\r\n\r\n\tvar spritePlugin = new THREE.SpritePlugin( this, sprites );\r\n\tvar lensFlarePlugin = new THREE.LensFlarePlugin( this, lensFlares );\r\n\r\n\t// API\r\n\r\n\tthis.getContext = function () {\r\n\r\n\t\treturn _gl;\r\n\r\n\t};\r\n\r\n\tthis.getContextAttributes = function () {\r\n\r\n\t\treturn _gl.getContextAttributes();\r\n\r\n\t};\r\n\r\n\tthis.forceContextLoss = function () {\r\n\r\n\t\textensions.get( 'WEBGL_lose_context' ).loseContext();\r\n\r\n\t};\r\n\r\n\tthis.getMaxAnisotropy = ( function () {\r\n\r\n\t\tvar value;\r\n\r\n\t\treturn function getMaxAnisotropy() {\r\n\r\n\t\t\tif ( value !== undefined ) return value;\r\n\r\n\t\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tvalue = _gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvalue = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\r\n\t\t};\r\n\r\n\t} )();\r\n\r\n\tthis.getPrecision = function () {\r\n\r\n\t\treturn capabilities.precision;\r\n\r\n\t};\r\n\r\n\tthis.getPixelRatio = function () {\r\n\r\n\t\treturn _pixelRatio;\r\n\r\n\t};\r\n\r\n\tthis.setPixelRatio = function ( value ) {\r\n\r\n\t\tif ( value === undefined ) return;\r\n\r\n\t\t_pixelRatio = value;\r\n\r\n\t\tthis.setSize( _viewport.z, _viewport.w, false );\r\n\r\n\t};\r\n\r\n\tthis.getSize = function () {\r\n\r\n\t\treturn {\r\n\t\t\twidth: _width,\r\n\t\t\theight: _height\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( width, height, updateStyle ) {\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_canvas.width = width * _pixelRatio;\r\n\t\t_canvas.height = height * _pixelRatio;\r\n\r\n\t\tif ( updateStyle !== false ) {\r\n\r\n\t\t\t_canvas.style.width = width + 'px';\r\n\t\t\t_canvas.style.height = height + 'px';\r\n\r\n\t\t}\r\n\r\n\t\tthis.setViewport( 0, 0, width, height );\r\n\r\n\t};\r\n\r\n\tthis.setViewport = function ( x, y, width, height ) {\r\n\r\n\t\tstate.viewport( _viewport.set( x, y, width, height ) );\r\n\r\n\t};\r\n\r\n\tthis.setScissor = function ( x, y, width, height ) {\r\n\r\n\t\tstate.scissor( _scissor.set( x, y, width, height ) );\r\n\r\n\t};\r\n\r\n\tthis.setScissorTest = function ( boolean ) {\r\n\r\n\t\tstate.setScissorTest( _scissorTest = boolean );\r\n\r\n\t};\r\n\r\n\t// Clearing\r\n\r\n\tthis.getClearColor = function () {\r\n\r\n\t\treturn _clearColor;\r\n\r\n\t};\r\n\r\n\tthis.setClearColor = function ( color, alpha ) {\r\n\r\n\t\t_clearColor.set( color );\r\n\r\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.getClearAlpha = function () {\r\n\r\n\t\treturn _clearAlpha;\r\n\r\n\t};\r\n\r\n\tthis.setClearAlpha = function ( alpha ) {\r\n\r\n\t\t_clearAlpha = alpha;\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.clear = function ( color, depth, stencil ) {\r\n\r\n\t\tvar bits = 0;\r\n\r\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\r\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\r\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\r\n\r\n\t\t_gl.clear( bits );\r\n\r\n\t};\r\n\r\n\tthis.clearColor = function () {\r\n\r\n\t\tthis.clear( true, false, false );\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function () {\r\n\r\n\t\tthis.clear( false, true, false );\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function () {\r\n\r\n\t\tthis.clear( false, false, true );\r\n\r\n\t};\r\n\r\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\t\tthis.clear( color, depth, stencil );\r\n\r\n\t};\r\n\r\n\t// Reset\r\n\r\n\tthis.resetGLState = resetGLState;\r\n\r\n\tthis.dispose = function() {\r\n\r\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\r\n\r\n\t};\r\n\r\n\t// Events\r\n\r\n\tfunction onContextLost( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tresetGLState();\r\n\t\tsetDefaultGLState();\r\n\r\n\t\tproperties.clear();\r\n\r\n\t}\r\n\r\n\tfunction onTextureDispose( event ) {\r\n\r\n\t\tvar texture = event.target;\r\n\r\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\tdeallocateTexture( texture );\r\n\r\n\t\t_infoMemory.textures --;\r\n\r\n\r\n\t}\r\n\r\n\tfunction onRenderTargetDispose( event ) {\r\n\r\n\t\tvar renderTarget = event.target;\r\n\r\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\tdeallocateRenderTarget( renderTarget );\r\n\r\n\t\t_infoMemory.textures --;\r\n\r\n\t}\r\n\r\n\tfunction onMaterialDispose( event ) {\r\n\r\n\t\tvar material = event.target;\r\n\r\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\tdeallocateMaterial( material );\r\n\r\n\t}\r\n\r\n\t// Buffer deallocation\r\n\r\n\tfunction deallocateTexture( texture ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\r\n\r\n\t\t\t// cube texture\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// 2D texture\r\n\r\n\t\t\tif ( textureProperties.__webglInit === undefined ) return;\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t\t// remove all webgl properties\r\n\t\tproperties.delete( texture );\r\n\r\n\t}\r\n\r\n\tfunction deallocateRenderTarget( renderTarget ) {\r\n\r\n\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\t\tvar textureProperties = properties.get( renderTarget.texture );\r\n\r\n\t\tif ( ! renderTarget ) return;\r\n\r\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t\tif ( renderTarget.depthTexture ) {\r\n\r\n\t\t\trenderTarget.depthTexture.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\r\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.delete( renderTarget.texture );\r\n\t\tproperties.delete( renderTarget );\r\n\r\n\t}\r\n\r\n\tfunction deallocateMaterial( material ) {\r\n\r\n\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\tproperties.delete( material );\r\n\r\n\t}\r\n\r\n\r\n\tfunction releaseMaterialProgramReference( material ) {\r\n\r\n\t\tvar programInfo = properties.get( material ).program;\r\n\r\n\t\tmaterial.program = undefined;\r\n\r\n\t\tif ( programInfo !== undefined ) {\r\n\r\n\t\t\tprogramCache.releaseProgram( programInfo );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Buffer rendering\r\n\r\n\tthis.renderBufferImmediate = function ( object, program, material ) {\r\n\r\n\t\tstate.initAttributes();\r\n\r\n\t\tvar buffers = properties.get( object );\r\n\r\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\r\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\r\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\r\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\r\n\r\n\t\tvar attributes = program.getAttributes();\r\n\r\n\t\tif ( object.hasPositions ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.position );\r\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasNormals ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\r\n\r\n\t\t\tif ( material.type !== 'MeshPhongMaterial' && material.type !== 'MeshStandardMaterial' && material.type !== 'MeshPhysicalMaterial' && material.shading === THREE.FlatShading ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\r\n\r\n\t\t\t\t\tvar array = object.normalArray;\r\n\r\n\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\r\n\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\r\n\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\r\n\r\n\t\t\t\t\tarray[ i + 0 ] = nx;\r\n\t\t\t\t\tarray[ i + 1 ] = ny;\r\n\t\t\t\t\tarray[ i + 2 ] = nz;\r\n\r\n\t\t\t\t\tarray[ i + 3 ] = nx;\r\n\t\t\t\t\tarray[ i + 4 ] = ny;\r\n\t\t\t\t\tarray[ i + 5 ] = nz;\r\n\r\n\t\t\t\t\tarray[ i + 6 ] = nx;\r\n\t\t\t\t\tarray[ i + 7 ] = ny;\r\n\t\t\t\t\tarray[ i + 8 ] = nz;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.normal );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasUvs && material.map ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.uv );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasColors && material.vertexColors !== THREE.NoColors ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.color );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\r\n\r\n\t\tobject.count = 0;\r\n\r\n\t};\r\n\r\n\tthis.renderBufferDirect = function ( camera, fog, geometry, material, object, group ) {\r\n\r\n\t\tsetMaterial( material );\r\n\r\n\t\tvar program = setProgram( camera, fog, material, object );\r\n\r\n\t\tvar updateBuffers = false;\r\n\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + material.wireframe;\r\n\r\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\r\n\r\n\t\t\t_currentGeometryProgram = geometryProgram;\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tvar morphTargetInfluences = object.morphTargetInfluences;\r\n\r\n\t\tif ( morphTargetInfluences !== undefined ) {\r\n\r\n\t\t\tvar activeInfluences = [];\r\n\r\n\t\t\tfor ( var i = 0, l = morphTargetInfluences.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar influence = morphTargetInfluences[ i ];\r\n\t\t\t\tactiveInfluences.push( [ influence, i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tactiveInfluences.sort( absNumericalSort );\r\n\r\n\t\t\tif ( activeInfluences.length > 8 ) {\r\n\r\n\t\t\t\tactiveInfluences.length = 8;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar morphAttributes = geometry.morphAttributes;\r\n\r\n\t\t\tfor ( var i = 0, l = activeInfluences.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar influence = activeInfluences[ i ];\r\n\t\t\t\tmorphInfluences[ i ] = influence[ 0 ];\r\n\r\n\t\t\t\tif ( influence[ 0 ] !== 0 ) {\r\n\r\n\t\t\t\t\tvar index = influence[ 1 ];\r\n\r\n\t\t\t\t\tif ( material.morphTargets === true && morphAttributes.position ) geometry.addAttribute( 'morphTarget' + i, morphAttributes.position[ index ] );\r\n\t\t\t\t\tif ( material.morphNormals === true && morphAttributes.normal ) geometry.addAttribute( 'morphNormal' + i, morphAttributes.normal[ index ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( material.morphTargets === true ) geometry.removeAttribute( 'morphTarget' + i );\r\n\t\t\t\t\tif ( material.morphNormals === true ) geometry.removeAttribute( 'morphNormal' + i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprogram.getUniforms().setValue(\r\n\t\t\t\t\t_gl, 'morphTargetInfluences', morphInfluences );\r\n\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar position = geometry.attributes.position;\r\n\r\n\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\tindex = objects.getWireframeAttribute( geometry );\r\n\r\n\t\t}\r\n\r\n\t\tvar renderer;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\trenderer = indexedBufferRenderer;\r\n\t\t\trenderer.setIndex( index );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer = bufferRenderer;\r\n\r\n\t\t}\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\tsetupVertexAttributes( material, program, geometry );\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, objects.getAttributeBuffer( index ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tvar dataStart = 0;\r\n\t\tvar dataCount = Infinity;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tdataCount = index.count;\r\n\r\n\t\t} else if ( position !== undefined ) {\r\n\r\n\t\t\tdataCount = position.count;\r\n\r\n\t\t}\r\n\r\n\t\tvar rangeStart = geometry.drawRange.start;\r\n\t\tvar rangeCount = geometry.drawRange.count;\r\n\r\n\t\tvar groupStart = group !== null ? group.start : 0;\r\n\t\tvar groupCount = group !== null ? group.count : Infinity;\r\n\r\n\t\tvar drawStart = Math.max( dataStart, rangeStart, groupStart );\r\n\t\tvar drawEnd = Math.min( dataStart + dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\r\n\r\n\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\r\n\r\n\t\t//\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\r\n\t\t\t\trenderer.setMode( _gl.LINES );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tswitch ( object.drawMode ) {\r\n\r\n\t\t\t\t\tcase THREE.TrianglesDrawMode:\r\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.TriangleStripDrawMode:\r\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_STRIP );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.TriangleFanDrawMode:\r\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_FAN );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar lineWidth = material.linewidth;\r\n\r\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\r\n\r\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\r\n\r\n\t\t\tif ( object instanceof THREE.LineSegments ) {\r\n\r\n\t\t\t\trenderer.setMode( _gl.LINES );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.Points ) {\r\n\r\n\t\t\trenderer.setMode( _gl.POINTS );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry instanceof THREE.InstancedBufferGeometry ) {\r\n\r\n\t\t\tif ( geometry.maxInstancedCount > 0 ) {\r\n\r\n\t\t\t\trenderer.renderInstances( geometry, drawStart, drawCount );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render( drawStart, drawCount );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( geometry instanceof THREE.InstancedBufferGeometry ) {\r\n\r\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( startIndex === undefined ) startIndex = 0;\r\n\r\n\t\tstate.initAttributes();\r\n\r\n\t\tvar geometryAttributes = geometry.attributes;\r\n\r\n\t\tvar programAttributes = program.getAttributes();\r\n\r\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\r\n\r\n\t\tfor ( var name in programAttributes ) {\r\n\r\n\t\t\tvar programAttribute = programAttributes[ name ];\r\n\r\n\t\t\tif ( programAttribute >= 0 ) {\r\n\r\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\r\n\r\n\t\t\t\tif ( geometryAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tvar type = _gl.FLOAT;\r\n\t\t\t\t\tvar array = geometryAttribute.array;\r\n\t\t\t\t\tvar normalized = geometryAttribute.normalized;\r\n\r\n\t\t\t\t\tif ( array instanceof Float32Array ) {\r\n\r\n\t\t\t\t\t\ttype = _gl.FLOAT;\r\n\r\n\t\t\t\t\t} else if ( array instanceof Float64Array ) {\r\n\r\n\t\t\t\t\t\tconsole.warn(\"Unsupported data buffer format: Float64Array\");\r\n\r\n\t\t\t\t\t} else if ( array instanceof Uint16Array ) {\r\n\r\n\t\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\r\n\t\t\t\t\t} else if ( array instanceof Int16Array ) {\r\n\r\n\t\t\t\t\t\ttype = _gl.SHORT;\r\n\r\n\t\t\t\t\t} else if ( array instanceof Uint32Array ) {\r\n\r\n\t\t\t\t\t\ttype = _gl.UNSIGNED_INT;\r\n\r\n\t\t\t\t\t} else if ( array instanceof Int32Array ) {\r\n\r\n\t\t\t\t\t\ttype = _gl.INT;\r\n\r\n\t\t\t\t\t} else if ( array instanceof Int8Array ) {\r\n\r\n\t\t\t\t\t\ttype = _gl.BYTE;\r\n\r\n\t\t\t\t\t} else if ( array instanceof Uint8Array ) {\r\n\r\n\t\t\t\t\t\ttype = _gl.UNSIGNED_BYTE;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\r\n\t\t\t\t\tvar buffer = objects.getAttributeBuffer( geometryAttribute );\r\n\r\n\t\t\t\t\tif ( geometryAttribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\tvar data = geometryAttribute.data;\r\n\t\t\t\t\t\tvar stride = data.stride;\r\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\r\n\r\n\t\t\t\t\t\tif ( data instanceof THREE.InstancedInterleavedBuffer ) {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute, extension );\r\n\r\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * data.array.BYTES_PER_ELEMENT, ( startIndex * stride + offset ) * data.array.BYTES_PER_ELEMENT );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( geometryAttribute instanceof THREE.InstancedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute, extension );\r\n\r\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, startIndex * size * geometryAttribute.array.BYTES_PER_ELEMENT );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\r\n\r\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\r\n\r\n\t\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\t\tswitch ( value.length ) {\r\n\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t}\r\n\r\n\t// Sorting\r\n\r\n\tfunction absNumericalSort( a, b ) {\r\n\r\n\t\treturn Math.abs( b[ 0 ] ) - Math.abs( a[ 0 ] );\r\n\r\n\t}\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\r\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\r\n\t\t} else if ( a.material.id !== b.material.id ) {\r\n\r\n\t\t\treturn a.material.id - b.material.id;\r\n\r\n\t\t} else if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn a.z - b.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction reversePainterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\r\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\r\n\t\t} if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Rendering\r\n\r\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\r\n\r\n\t\tif ( camera instanceof THREE.Camera === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\t// reset caching for this frame\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\t\t_currentMaterialId = - 1;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t// update camera matrices and frustum\r\n\r\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\tlights.length = 0;\r\n\r\n\t\topaqueObjectsLastIndex = - 1;\r\n\t\ttransparentObjectsLastIndex = - 1;\r\n\r\n\t\tsprites.length = 0;\r\n\t\tlensFlares.length = 0;\r\n\r\n\t\t_localClippingEnabled = this.localClippingEnabled;\r\n\t\t_clippingEnabled = _clipping.init(\r\n\t\t\t\tthis.clippingPlanes, _localClippingEnabled, camera );\r\n\r\n\t\tprojectObject( scene, camera );\r\n\r\n\r\n\t\topaqueObjects.length = opaqueObjectsLastIndex + 1;\r\n\t\ttransparentObjects.length = transparentObjectsLastIndex + 1;\r\n\r\n\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\topaqueObjects.sort( painterSortStable );\r\n\t\t\ttransparentObjects.sort( reversePainterSortStable );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( _clippingEnabled ) _clipping.beginShadows();\r\n\r\n\t\tsetupShadows( lights );\r\n\r\n\t\tshadowMap.render( scene, camera );\r\n\r\n\t\tsetupLights( lights, camera );\r\n\r\n\t\tif ( _clippingEnabled ) _clipping.endShadows();\r\n\r\n\t\t//\r\n\r\n\t\t_infoRender.calls = 0;\r\n\t\t_infoRender.vertices = 0;\r\n\t\t_infoRender.faces = 0;\r\n\t\t_infoRender.points = 0;\r\n\r\n\t\tif ( renderTarget === undefined ) {\r\n\r\n\t\t\trenderTarget = null;\r\n\r\n\t\t}\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\r\n\t\tif ( this.autoClear || forceClear ) {\r\n\r\n\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( scene.overrideMaterial ) {\r\n\r\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\r\n\r\n\t\t\trenderObjects( opaqueObjects, camera, fog, overrideMaterial );\r\n\t\t\trenderObjects( transparentObjects, camera, fog, overrideMaterial );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// opaque pass (front-to-back order)\r\n\r\n\t\t\tstate.setBlending( THREE.NoBlending );\r\n\t\t\trenderObjects( opaqueObjects, camera, fog );\r\n\r\n\t\t\t// transparent pass (back-to-front order)\r\n\r\n\t\t\trenderObjects( transparentObjects, camera, fog );\r\n\r\n\t\t}\r\n\r\n\t\t// custom render plugins (post pass)\r\n\r\n\t\tspritePlugin.render( scene, camera );\r\n\t\tlensFlarePlugin.render( scene, camera, _currentViewport );\r\n\r\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tvar texture = renderTarget.texture;\r\n\r\n\t\t\tif ( texture.generateMipmaps && isPowerOfTwo( renderTarget ) &&\r\n\t\t\t\t\ttexture.minFilter !== THREE.NearestFilter &&\r\n\t\t\t\t\ttexture.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\t\tupdateRenderTargetMipmap( renderTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\r\n\t\tstate.setDepthTest( true );\r\n\t\tstate.setDepthWrite( true );\r\n\t\tstate.setColorWrite( true );\r\n\r\n\t\t// _gl.finish();\r\n\r\n\t};\r\n\r\n\tfunction pushRenderItem( object, geometry, material, z, group ) {\r\n\r\n\t\tvar array, index;\r\n\r\n\t\t// allocate the next position in the appropriate array\r\n\r\n\t\tif ( material.transparent ) {\r\n\r\n\t\t\tarray = transparentObjects;\r\n\t\t\tindex = ++ transparentObjectsLastIndex;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray = opaqueObjects;\r\n\t\t\tindex = ++ opaqueObjectsLastIndex;\r\n\r\n\t\t}\r\n\r\n\t\t// recycle existing render item or grow the array\r\n\r\n\t\tvar renderItem = array[ index ];\r\n\r\n\t\tif ( renderItem !== undefined ) {\r\n\r\n\t\t\trenderItem.id = object.id;\r\n\t\t\trenderItem.object = object;\r\n\t\t\trenderItem.geometry = geometry;\r\n\t\t\trenderItem.material = material;\r\n\t\t\trenderItem.z = _vector3.z;\r\n\t\t\trenderItem.group = group;\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderItem = {\r\n\t\t\t\tid: object.id,\r\n\t\t\t\tobject: object,\r\n\t\t\t\tgeometry: geometry,\r\n\t\t\t\tmaterial: material,\r\n\t\t\t\tz: _vector3.z,\r\n\t\t\t\tgroup: group\r\n\t\t\t};\r\n\r\n\t\t\t// assert( index === array.length );\r\n\t\t\tarray.push( renderItem );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// TODO Duplicated code (Frustum)\r\n\r\n\tfunction isObjectViewable( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( geometry.boundingSphere === null )\r\n\t\t\tgeometry.computeBoundingSphere();\r\n\r\n\t\t_sphere.copy( geometry.boundingSphere ).\r\n\t\t\tapplyMatrix4( object.matrixWorld );\r\n\r\n\t\treturn isSphereViewable( _sphere );\r\n\r\n\t}\r\n\r\n\tfunction isSpriteViewable( sprite ) {\r\n\r\n\t\t_sphere.center.set( 0, 0, 0 );\r\n\t\t_sphere.radius = 0.7071067811865476;\r\n\t\t_sphere.applyMatrix4( sprite.matrixWorld );\r\n\r\n\t\treturn isSphereViewable( _sphere );\r\n\r\n\t}\r\n\r\n\tfunction isSphereViewable( sphere ) {\r\n\r\n\t\tif ( ! _frustum.intersectsSphere( sphere ) ) return false;\r\n\r\n\t\tvar numPlanes = _clipping.numPlanes;\r\n\r\n\t\tif ( numPlanes === 0 ) return true;\r\n\r\n\t\tvar planes = _this.clippingPlanes,\r\n\r\n\t\t\tcenter = sphere.center,\r\n\t\t\tnegRad = - sphere.radius,\r\n\t\t\ti = 0;\r\n\r\n\t\tdo {\r\n\r\n\t\t\t// out when deeper than radius in the negative halfspace\r\n\t\t\tif ( planes[ i ].distanceToPoint( center ) < negRad ) return false;\r\n\r\n\t\t} while ( ++ i !== numPlanes );\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tfunction projectObject( object, camera ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tif ( object.layers.test( camera.layers ) ) {\r\n\r\n\t\t\tif ( object instanceof THREE.Light ) {\r\n\r\n\t\t\t\tlights.push( object );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\r\n\r\n\t\t\t\tif ( object.frustumCulled === false || isSpriteViewable( object ) === true ) {\r\n\r\n\t\t\t\t\tsprites.push( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object instanceof THREE.LensFlare ) {\r\n\r\n\t\t\t\tlensFlares.push( object );\r\n\r\n\t\t\t} else if ( object instanceof THREE.ImmediateRenderObject ) {\r\n\r\n\t\t\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpushRenderItem( object, null, object.material, _vector3.z, null );\r\n\r\n\t\t\t} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\r\n\r\n\t\t\t\tif ( object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\t\tobject.skeleton.update();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( object.frustumCulled === false || isObjectViewable( object ) === true ) {\r\n\r\n\t\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\t\tif ( material.visible === true ) {\r\n\r\n\t\t\t\t\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar geometry = objects.update( object );\r\n\r\n\t\t\t\t\t\tif ( material instanceof THREE.MultiMaterial ) {\r\n\r\n\t\t\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\t\t\tvar materials = material.materials;\r\n\r\n\t\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tvar group = groups[ i ];\r\n\t\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\r\n\t\t\t\t\t\t\t\t\tpushRenderItem( object, geometry, groupMaterial, _vector3.z, group );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tpushRenderItem( object, geometry, material, _vector3.z, null );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar children = object.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ], camera );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjects( renderList, camera, fog, overrideMaterial ) {\r\n\r\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar renderItem = renderList[ i ];\r\n\r\n\t\t\tvar object = renderItem.object;\r\n\t\t\tvar geometry = renderItem.geometry;\r\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\r\n\t\t\tvar group = renderItem.group;\r\n\r\n\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\r\n\t\t\tif ( object instanceof THREE.ImmediateRenderObject ) {\r\n\r\n\t\t\t\tsetMaterial( material );\r\n\r\n\t\t\t\tvar program = setProgram( camera, fog, material, object );\r\n\r\n\t\t\t\t_currentGeometryProgram = '';\r\n\r\n\t\t\t\tobject.render( function ( object ) {\r\n\r\n\t\t\t\t\t_this.renderBufferImmediate( object, program, material );\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_this.renderBufferDirect( camera, fog, geometry, material, object, group );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction initMaterial( material, fog, object ) {\r\n\r\n\t\tvar materialProperties = properties.get( material );\r\n\r\n\t\tvar parameters = programCache.getParameters(\r\n\t\t\t\tmaterial, _lights, fog, _clipping.numPlanes, object );\r\n\r\n\t\tvar code = programCache.getProgramCode( material, parameters );\r\n\r\n\t\tvar program = materialProperties.program;\r\n\t\tvar programChange = true;\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\t// new material\r\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\t} else if ( program.code !== code ) {\r\n\r\n\t\t\t// changed glsl or parameters\r\n\t\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\t} else if ( parameters.shaderID !== undefined ) {\r\n\r\n\t\t\t// same glsl and uniform list\r\n\t\t\treturn;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// only rebuild uniform list\r\n\t\t\tprogramChange = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( programChange ) {\r\n\r\n\t\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\t\tvar shader = THREE.ShaderLib[ parameters.shaderID ];\r\n\r\n\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\tname: material.type,\r\n\t\t\t\t\tuniforms: THREE.UniformsUtils.clone( shader.uniforms ),\r\n\t\t\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\t\t\tfragmentShader: shader.fragmentShader\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\tname: material.type,\r\n\t\t\t\t\tuniforms: material.uniforms,\r\n\t\t\t\t\tvertexShader: material.vertexShader,\r\n\t\t\t\t\tfragmentShader: material.fragmentShader\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.__webglShader = materialProperties.__webglShader;\r\n\r\n\t\t\tprogram = programCache.acquireProgram( material, parameters, code );\r\n\r\n\t\t\tmaterialProperties.program = program;\r\n\t\t\tmaterial.program = program;\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = program.getAttributes();\r\n\r\n\t\tif ( material.morphTargets ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphTargets = 0;\r\n\r\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\r\n\t\t\t\tif ( attributes[ 'morphTarget' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphNormals = 0;\r\n\r\n\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\r\n\t\t\t\tif ( attributes[ 'morphNormal' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar uniforms = materialProperties.__webglShader.uniforms;\r\n\r\n\t\tif ( ! ( material instanceof THREE.ShaderMaterial ) &&\r\n\t\t\t\t! ( material instanceof THREE.RawShaderMaterial ) ||\r\n\t\t\t\tmaterial.clipping === true ) {\r\n\r\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\r\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.lights ) {\r\n\r\n\t\t\t// store the light setup it was created for\r\n\r\n\t\t\tmaterialProperties.lightsHash = _lights.hash;\r\n\r\n\t\t\t// wire up the material to this renderer's lighting state\r\n\r\n\t\t\tuniforms.ambientLightColor.value = _lights.ambient;\r\n\t\t\tuniforms.directionalLights.value = _lights.directional;\r\n\t\t\tuniforms.spotLights.value = _lights.spot;\r\n\t\t\tuniforms.pointLights.value = _lights.point;\r\n\t\t\tuniforms.hemisphereLights.value = _lights.hemi;\r\n\r\n\t\t\tuniforms.directionalShadowMap.value = _lights.directionalShadowMap;\r\n\t\t\tuniforms.directionalShadowMatrix.value = _lights.directionalShadowMatrix;\r\n\t\t\tuniforms.spotShadowMap.value = _lights.spotShadowMap;\r\n\t\t\tuniforms.spotShadowMatrix.value = _lights.spotShadowMatrix;\r\n\t\t\tuniforms.pointShadowMap.value = _lights.pointShadowMap;\r\n\t\t\tuniforms.pointShadowMatrix.value = _lights.pointShadowMatrix;\r\n\r\n\t\t}\r\n\r\n\t\tvar progUniforms = materialProperties.program.getUniforms(),\r\n\t\t\tuniformsList =\r\n\t\t\t\t\tTHREE.WebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\r\n\r\n\t\tmaterialProperties.uniformsList = uniformsList;\r\n\t\tmaterialProperties.dynamicUniforms =\r\n\t\t\t\tTHREE.WebGLUniforms.splitDynamic( uniformsList, uniforms );\r\n\r\n\t}\r\n\r\n\tfunction setMaterial( material ) {\r\n\r\n\t\tif ( material.side !== THREE.DoubleSide )\r\n\t\t\tstate.enable( _gl.CULL_FACE );\r\n\t\telse\r\n\t\t\tstate.disable( _gl.CULL_FACE );\r\n\r\n\t\tstate.setFlipSided( material.side === THREE.BackSide );\r\n\r\n\t\tif ( material.transparent === true ) {\r\n\r\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.setBlending( THREE.NoBlending );\r\n\r\n\t\t}\r\n\r\n\t\tstate.setDepthFunc( material.depthFunc );\r\n\t\tstate.setDepthTest( material.depthTest );\r\n\t\tstate.setDepthWrite( material.depthWrite );\r\n\t\tstate.setColorWrite( material.colorWrite );\r\n\t\tstate.setPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t}\r\n\r\n\tfunction setProgram( camera, fog, material, object ) {\r\n\r\n\t\t_usedTextureUnits = 0;\r\n\r\n\t\tvar materialProperties = properties.get( material );\r\n\r\n\t\tif ( _clippingEnabled ) {\r\n\r\n\t\t\tif ( _localClippingEnabled || camera !== _currentCamera ) {\r\n\r\n\t\t\t\tvar useCache =\r\n\t\t\t\t\t\tcamera === _currentCamera &&\r\n\t\t\t\t\t\tmaterial.id === _currentMaterialId;\r\n\r\n\t\t\t\t// we might want to call this function with some ClippingGroup\r\n\t\t\t\t// object instead of the material, once it becomes feasible\r\n\t\t\t\t// (#8465, #8379)\r\n\t\t\t\t_clipping.setState(\r\n\t\t\t\t\t\tmaterial.clippingPlanes, material.clipShadows,\r\n\t\t\t\t\t\tcamera, materialProperties, useCache );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( materialProperties.numClippingPlanes !== undefined &&\r\n\t\t\t\tmaterialProperties.numClippingPlanes !== _clipping.numPlanes ) {\r\n\r\n\t\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialProperties.program === undefined ) {\r\n\r\n\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( materialProperties.lightsHash !== undefined &&\r\n\t\t\tmaterialProperties.lightsHash !== _lights.hash ) {\r\n\r\n\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.needsUpdate ) {\r\n\r\n\t\t\tinitMaterial( material, fog, object );\r\n\t\t\tmaterial.needsUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar refreshProgram = false;\r\n\t\tvar refreshMaterial = false;\r\n\t\tvar refreshLights = false;\r\n\r\n\t\tvar program = materialProperties.program,\r\n\t\t\tp_uniforms = program.getUniforms(),\r\n\t\t\tm_uniforms = materialProperties.__webglShader.uniforms;\r\n\r\n\t\tif ( program.id !== _currentProgram ) {\r\n\r\n\t\t\t_gl.useProgram( program.program );\r\n\t\t\t_currentProgram = program.id;\r\n\r\n\t\t\trefreshProgram = true;\r\n\t\t\trefreshMaterial = true;\r\n\t\t\trefreshLights = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.id !== _currentMaterialId ) {\r\n\r\n\t\t\t_currentMaterialId = material.id;\r\n\r\n\t\t\trefreshMaterial = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\r\n\r\n\t\t\tp_uniforms.set( _gl, camera, 'projectionMatrix' );\r\n\r\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\r\n\r\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\r\n\t\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( camera !== _currentCamera ) {\r\n\r\n\t\t\t\t_currentCamera = camera;\r\n\r\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\r\n\t\t\t\t// now, in case this material supports lights - or later, when\r\n\t\t\t\t// the next material that does gets activated:\r\n\r\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\r\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// load material specific uniforms\r\n\t\t\t// (shader material also gets them for the sake of genericity)\r\n\r\n\t\t\tif ( material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\r\n\t\t\t\t material.envMap ) {\r\n\r\n\t\t\t\tvar uCamPos = p_uniforms.map.cameraPosition;\r\n\r\n\t\t\t\tif ( uCamPos !== undefined ) {\r\n\r\n\t\t\t\t\tuCamPos.setValue( _gl,\r\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\r\n\t\t\t\t material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material.skinning ) {\r\n\r\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp_uniforms.set( _gl, _this, 'toneMappingExposure' );\r\n\t\t\tp_uniforms.set( _gl, _this, 'toneMappingWhitePoint' );\r\n\r\n\t\t}\r\n\r\n\t\t// skinning uniforms must be set even if material didn't change\r\n\t\t// auto-setting of texture unit for bone texture must go before other textures\r\n\t\t// not sure why, but otherwise weird things happen\r\n\r\n\t\tif ( material.skinning ) {\r\n\r\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\r\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\r\n\r\n\t\t\tvar skeleton = object.skeleton;\r\n\r\n\t\t\tif ( skeleton ) {\r\n\r\n\t\t\t\tif ( capabilities.floatVertexTextures && skeleton.useVertexTexture ) {\r\n\r\n\t\t\t\t\tp_uniforms.set( _gl, skeleton, 'boneTexture' );\r\n\t\t\t\t\tp_uniforms.set( _gl, skeleton, 'boneTextureWidth' );\r\n\t\t\t\t\tp_uniforms.set( _gl, skeleton, 'boneTextureHeight' );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshMaterial ) {\r\n\r\n\t\t\tif ( material.lights ) {\r\n\r\n\t\t\t\t// the current material requires lighting info\r\n\r\n\t\t\t\t// note: all lighting uniforms are always set correctly\r\n\t\t\t\t// they simply reference the renderer's state for their\r\n\t\t\t\t// values\r\n\t\t\t\t//\r\n\t\t\t\t// use the current material's .needsUpdate flags to set\r\n\t\t\t\t// the GL state when required\r\n\r\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh uniforms common to several materials\r\n\r\n\t\t\tif ( fog && material.fog ) {\r\n\r\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshDepthMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh single material specific uniforms\r\n\r\n\t\t\tif ( material instanceof THREE.LineBasicMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\t\t\t\trefreshUniformsDash( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.PointsMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPoints( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshLambertMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshPhysicalMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPhysical( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshStandardMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsStandard( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshDepthMaterial ) {\r\n\r\n\t\t\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\t\t\tm_uniforms.displacementMap.value = material.displacementMap;\r\n\t\t\t\t\tm_uniforms.displacementScale.value = material.displacementScale;\r\n\t\t\t\t\tm_uniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\r\n\r\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tTHREE.WebGLUniforms.upload(\r\n\t\t\t\t\t_gl, materialProperties.uniformsList, m_uniforms, _this );\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// common matrices\r\n\r\n\t\tp_uniforms.set( _gl, object, 'modelViewMatrix' );\r\n\t\tp_uniforms.set( _gl, object, 'normalMatrix' );\r\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\r\n\r\n\r\n\t\t// dynamic uniforms\r\n\r\n\t\tvar dynUniforms = materialProperties.dynamicUniforms;\r\n\r\n\t\tif ( dynUniforms !== null ) {\r\n\r\n\t\t\tTHREE.WebGLUniforms.evalDynamic(\r\n\t\t\t\t\tdynUniforms, m_uniforms, object, camera );\r\n\r\n\t\t\tTHREE.WebGLUniforms.upload( _gl, dynUniforms, m_uniforms, _this );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\t// Uniforms (refresh uniforms objects)\r\n\r\n\tfunction refreshUniformsCommon ( uniforms, material ) {\r\n\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\r\n\t\tif ( material.emissive ) {\r\n\r\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\t\tuniforms.specularMap.value = material.specularMap;\r\n\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\tif ( material.aoMap ) {\r\n\r\n\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. specular map\r\n\t\t// 3. normal map\r\n\t\t// 4. bump map\r\n\t\t// 5. alpha map\r\n\t\t// 6. emissive map\r\n\r\n\t\tvar uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t} else if ( material.displacementMap ) {\r\n\r\n\t\t\tuvScaleMap = material.displacementMap;\r\n\r\n\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t} else if ( material.roughnessMap ) {\r\n\r\n\t\t\tuvScaleMap = material.roughnessMap;\r\n\r\n\t\t} else if ( material.metalnessMap ) {\r\n\r\n\t\t\tuvScaleMap = material.metalnessMap;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t} else if ( material.emissiveMap ) {\r\n\r\n\t\t\tuvScaleMap = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\t// backwards compatibility\r\n\t\t\tif ( uvScaleMap instanceof THREE.WebGLRenderTarget ) {\r\n\r\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar offset = uvScaleMap.offset;\r\n\t\t\tvar repeat = uvScaleMap.repeat;\r\n\r\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.envMap.value = material.envMap;\r\n\r\n\t\t// don't flip CubeTexture envMaps, flip everything else:\r\n\t\t//  WebGLRenderTargetCube will be flipped for backwards compatibility\r\n\t\t//  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\r\n\t\t// this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\r\n\t\tuniforms.flipEnvMap.value = ( ! ( material.envMap instanceof THREE.CubeTexture ) ) ? 1 : - 1;\r\n\r\n\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLine ( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDash ( uniforms, material ) {\r\n\r\n\t\tuniforms.dashSize.value = material.dashSize;\r\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\r\n\t\tuniforms.scale.value = material.scale;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPoints ( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\t\tuniforms.size.value = material.size * _pixelRatio;\r\n\t\tuniforms.scale.value = _canvas.clientHeight * 0.5;\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\r\n\t\tif ( material.map !== null ) {\r\n\r\n\t\t\tvar offset = material.map.offset;\r\n\t\t\tvar repeat = material.map.repeat;\r\n\r\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsFog ( uniforms, fog ) {\r\n\r\n\t\tuniforms.fogColor.value = fog.color;\r\n\r\n\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\tuniforms.fogNear.value = fog.near;\r\n\t\t\tuniforms.fogFar.value = fog.far;\r\n\r\n\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\tuniforms.fogDensity.value = fog.density;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLambert ( uniforms, material ) {\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhong ( uniforms, material ) {\r\n\r\n\t\tuniforms.specular.value = material.specular;\r\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsStandard ( uniforms, material ) {\r\n\r\n\t\tuniforms.roughness.value = material.roughness;\r\n\t\tuniforms.metalness.value = material.metalness;\r\n\r\n\t\tif ( material.roughnessMap ) {\r\n\r\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.metalnessMap ) {\r\n\r\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.envMap ) {\r\n\r\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\r\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhysical ( uniforms, material ) {\r\n\r\n\t\trefreshUniformsStandard( uniforms, material );\r\n\r\n\t}\r\n\r\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\r\n\tfunction markUniformsLightsNeedsUpdate ( uniforms, value ) {\r\n\r\n\t\tuniforms.ambientLightColor.needsUpdate = value;\r\n\r\n\t\tuniforms.directionalLights.needsUpdate = value;\r\n\t\tuniforms.pointLights.needsUpdate = value;\r\n\t\tuniforms.spotLights.needsUpdate = value;\r\n\t\tuniforms.hemisphereLights.needsUpdate = value;\r\n\r\n\t}\r\n\r\n\t// Lighting\r\n\r\n\tfunction setupShadows ( lights ) {\r\n\r\n\t\tvar lightShadowsLength = 0;\r\n\r\n\t\tfor ( var i = 0, l = lights.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar light = lights[ i ];\r\n\r\n\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t_lights.shadows[ lightShadowsLength ++ ] = light;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_lights.shadows.length = lightShadowsLength;\r\n\r\n\t}\r\n\r\n\tfunction setupLights ( lights, camera ) {\r\n\r\n\t\tvar l, ll, light,\r\n\t\tr = 0, g = 0, b = 0,\r\n\t\tcolor,\r\n\t\tintensity,\r\n\t\tdistance,\r\n\t\tshadowMap,\r\n\r\n\t\tviewMatrix = camera.matrixWorldInverse,\r\n\r\n\t\tdirectionalLength = 0,\r\n\t\tpointLength = 0,\r\n\t\tspotLength = 0,\r\n\t\themiLength = 0;\r\n\r\n\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tlight = lights[ l ];\r\n\r\n\t\t\tcolor = light.color;\r\n\t\t\tintensity = light.intensity;\r\n\t\t\tdistance = light.distance;\r\n\r\n\t\t\tshadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\r\n\r\n\t\t\tif ( light instanceof THREE.AmbientLight ) {\r\n\r\n\t\t\t\tr += color.r * intensity;\r\n\t\t\t\tg += color.g * intensity;\r\n\t\t\t\tb += color.b * intensity;\r\n\r\n\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tuniforms.direction.sub( _vector3 );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tuniforms.shadow = light.castShadow;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\r\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\r\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_lights.directionalShadowMap[ directionalLength ] = shadowMap;\r\n\t\t\t\t_lights.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\r\n\t\t\t\t_lights.directional[ directionalLength ++ ] = uniforms;\r\n\r\n\t\t\t} else if ( light instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\r\n\t\t\t\tuniforms.distance = distance;\r\n\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tuniforms.direction.sub( _vector3 );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\r\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\r\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n\t\t\t\tuniforms.shadow = light.castShadow;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\r\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\r\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_lights.spotShadowMap[ spotLength ] = shadowMap;\r\n\t\t\t\t_lights.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\r\n\t\t\t\t_lights.spot[ spotLength ++ ] = uniforms;\r\n\r\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n\t\t\t\tuniforms.distance = light.distance;\r\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n\t\t\t\tuniforms.shadow = light.castShadow;\r\n\r\n\t\t\t\tif ( light.castShadow ) {\r\n\r\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\r\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\r\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t_lights.pointShadowMap[ pointLength ] = shadowMap;\r\n\r\n\t\t\t\tif ( _lights.pointShadowMatrix[ pointLength ] === undefined ) {\r\n\r\n\t\t\t\t\t_lights.pointShadowMatrix[ pointLength ] = new THREE.Matrix4();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// for point lights we set the shadow matrix to be a translation-only matrix\r\n\t\t\t\t// equal to inverse of the light's position\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld ).negate();\r\n\t\t\t\t_lights.pointShadowMatrix[ pointLength ].identity().setPosition( _vector3 );\r\n\r\n\t\t\t\t_lights.point[ pointLength ++ ] = uniforms;\r\n\r\n\t\t\t} else if ( light instanceof THREE.HemisphereLight ) {\r\n\r\n\t\t\t\tvar uniforms = lightCache.get( light );\r\n\r\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\r\n\t\t\t\tuniforms.direction.normalize();\r\n\r\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\r\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\r\n\r\n\t\t\t\t_lights.hemi[ hemiLength ++ ] = uniforms;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_lights.ambient[ 0 ] = r;\r\n\t\t_lights.ambient[ 1 ] = g;\r\n\t\t_lights.ambient[ 2 ] = b;\r\n\r\n\t\t_lights.directional.length = directionalLength;\r\n\t\t_lights.spot.length = spotLength;\r\n\t\t_lights.point.length = pointLength;\r\n\t\t_lights.hemi.length = hemiLength;\r\n\r\n\t\t_lights.hash = directionalLength + ',' + pointLength + ',' + spotLength + ',' + hemiLength + ',' + _lights.shadows.length;\r\n\r\n\t}\r\n\r\n\t// GL state setting\r\n\r\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\r\n\r\n\t\tstate.setCullFace( cullFace );\r\n\t\tstate.setFlipSided( frontFaceDirection === THREE.FrontFaceDirectionCW );\r\n\r\n\t};\r\n\r\n\t// Textures\r\n\r\n\tfunction allocTextureUnit() {\r\n\r\n\t\tvar textureUnit = _usedTextureUnits;\r\n\r\n\t\tif ( textureUnit >= capabilities.maxTextures ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\r\n\r\n\t\t}\r\n\r\n\t\t_usedTextureUnits += 1;\r\n\r\n\t\treturn textureUnit;\r\n\r\n\t}\r\n\r\n\tfunction setTextureParameters ( textureType, texture, isPowerOfTwoImage ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( isPowerOfTwoImage ) {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\r\n\r\n\t\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.', texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\r\n\r\n\t\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.', texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\tif ( extension ) {\r\n\r\n\t\t\tif ( texture.type === THREE.FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\r\n\t\t\tif ( texture.type === THREE.HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\r\n\r\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\r\n\r\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, _this.getMaxAnisotropy() ) );\r\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction uploadTexture( textureProperties, texture, slot ) {\r\n\r\n\t\tif ( textureProperties.__webglInit === undefined ) {\r\n\r\n\t\t\ttextureProperties.__webglInit = true;\r\n\r\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\t_infoMemory.textures ++;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\r\n\r\n\t\tvar image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\r\n\r\n\t\tif ( textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( image ) === false ) {\r\n\r\n\t\t\timage = makePowerOfTwo( image );\r\n\r\n\t\t}\r\n\r\n\t\tvar isPowerOfTwoImage = isPowerOfTwo( image ),\r\n\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isPowerOfTwoImage );\r\n\r\n\t\tvar mipmap, mipmaps = texture.mipmaps;\r\n\r\n\t\tif ( texture instanceof THREE.DepthTexture ) {\r\n\r\n\t\t\t// populate depth texture with dummy data\r\n\r\n\t\t\tvar internalFormat = _gl.DEPTH_COMPONENT;\r\n\r\n\t\t\tif ( texture.type === THREE.FloatType ) {\r\n\r\n\t\t\t\tif ( !_isWebGL2 ) throw new Error('Float Depth Texture only supported in WebGL2.0');\r\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT32F;\r\n\r\n\t\t\t} else if ( _isWebGL2 ) {\r\n\r\n\t\t\t\t// WebGL 2.0 requires signed internalformat for glTexImage2D\r\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT16;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, internalFormat, image.width, image.height, 0, glFormat, glType, null );\r\n\r\n\t\t} else if ( texture instanceof THREE.DataTexture ) {\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( texture instanceof THREE.CompressedTexture ) {\r\n\r\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmipmap = mipmaps[ i ];\r\n\r\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\" );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// regular Texture (image, video, canvas)\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( texture.generateMipmaps && isPowerOfTwoImage ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\r\n\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t}\r\n\r\n\tfunction setTexture2D( texture, slot ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tvar image = texture.image;\r\n\r\n\t\t\tif ( image === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( image.complete === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n\t}\r\n\r\n\tfunction clampToMaxSize ( image, maxSize ) {\r\n\r\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\r\n\r\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\r\n\t\t\t// premultiplied alpha.\r\n\r\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = Math.floor( image.width * scale );\r\n\t\t\tcanvas.height = Math.floor( image.height * scale );\r\n\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\r\n\r\n\t\t\treturn canvas;\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction isPowerOfTwo( image ) {\r\n\r\n\t\treturn THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height );\r\n\r\n\t}\r\n\r\n\tfunction textureNeedsPowerOfTwo( texture ) {\r\n\r\n\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) return true;\r\n\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) return true;\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tfunction makePowerOfTwo( image ) {\r\n\r\n\t\tif ( image instanceof HTMLImageElement || image instanceof HTMLCanvasElement ) {\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = THREE.Math.nearestPowerOfTwo( image.width );\r\n\t\t\tcanvas.height = THREE.Math.nearestPowerOfTwo( image.height );\r\n\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.drawImage( image, 0, 0, canvas.width, canvas.height );\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is not power of two (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\r\n\r\n\t\t\treturn canvas;\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction setTextureCube ( texture, slot ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.image.length === 6 ) {\r\n\r\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\r\n\r\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\r\n\r\n\t\t\t\t\t_infoMemory.textures ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\r\n\t\t\t\tvar isCompressed = texture instanceof THREE.CompressedTexture;\r\n\t\t\t\tvar isDataTexture = texture.image[ 0 ] instanceof THREE.DataTexture;\r\n\r\n\t\t\t\tvar cubeImage = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( _this.autoScaleCubemaps && ! isCompressed && ! isDataTexture ) {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar image = cubeImage[ 0 ],\r\n\t\t\t\tisPowerOfTwoImage = isPowerOfTwo( image ),\r\n\t\t\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\t\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage );\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( ! isCompressed ) {\r\n\r\n\t\t\t\t\t\tif ( isDataTexture ) {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\r\n\r\n\t\t\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\" );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texture.generateMipmaps && isPowerOfTwoImage ) {\r\n\r\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setTextureCubeDynamic ( texture, slot ) {\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\r\n\r\n\t}\r\n\r\n\tthis.allocTextureUnit = allocTextureUnit;\r\n\r\n\t//this.setTexture2D = setTexture2D;\r\n\tthis.setTexture2D = ( function() {\r\n\r\n\t\tvar warned = false;\r\n\r\n\t\t// backwards compatibility: peel texture.texture\r\n\t\treturn function( texture, slot ) {\r\n\r\n\t\t\tif ( texture instanceof THREE.WebGLRenderTarget ) {\r\n\r\n\t\t\t\tif ( ! warned ) {\r\n\r\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\r\n\t\t\t\t\twarned = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture = texture.texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tsetTexture2D( texture, slot );\r\n\r\n\t\t};\r\n\r\n\t}() );\r\n\r\n\tthis.setTexture = ( function() {\r\n\r\n\t\tvar warned = false;\r\n\r\n\t\treturn function( texture, slot ) {\r\n\r\n\t\t\tif ( ! warned ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\" );\r\n\t\t\t\twarned = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_this.setTexture2D( texture, slot );\r\n\r\n\t\t};\r\n\r\n\t}() );\r\n\r\n\tthis.setTextureCube = ( function() {\r\n\r\n\t\tvar warned = false;\r\n\r\n\t\treturn function( texture, slot ) {\r\n\r\n\t\t\t// backwards compatibility: peel texture.texture\r\n\t\t\tif ( texture instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\t\tif ( ! warned ) {\r\n\r\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\r\n\t\t\t\t\twarned = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture = texture.texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\r\n\t\t\t// TODO: unify these code paths\r\n\t\t\tif ( texture instanceof THREE.CubeTexture ||\r\n\t\t\t\t ( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\r\n\r\n\t\t\t\t// CompressedTexture can have Array in image :/\r\n\r\n\t\t\t\t// this function alone should take care of cube textures\r\n\t\t\t\tsetTextureCube( texture, slot );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// assumed: texture property of THREE.WebGLRenderTargetCube\r\n\r\n\t\t\t\tsetTextureCubeDynamic( texture, slot );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}() );\r\n\r\n\t// Render targets\r\n\r\n\t// Setup storage for target texture and bind it to correct framebuffer\r\n\tfunction setupFrameBufferTexture ( framebuffer, renderTarget, attachment, textureTarget ) {\r\n\r\n\t\tvar glFormat = paramThreeToGL( renderTarget.texture.format );\r\n\t\tvar glType = paramThreeToGL( renderTarget.texture.type );\r\n\t\tstate.texImage2D( textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n\t}\r\n\r\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\r\n\tfunction setupRenderBufferStorage ( renderbuffer, renderTarget ) {\r\n\r\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// FIXME: We don't support !depth !stencil\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\r\n\r\n\t}\r\n\r\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\r\n\tfunction setupDepthTexture ( framebuffer, renderTarget ) {\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\t\tif ( isCube ) throw new Error('Depth Texture with cube render targets is not supported!');\r\n\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\r\n\t\tif ( !( renderTarget.depthTexture instanceof THREE.DepthTexture ) ) {\r\n\r\n\t\t\tthrow new Error('renderTarget.depthTexture must be an instance of THREE.DepthTexture');\r\n\r\n\t\t}\r\n\r\n\t\t// upload an empty depth texture with framebuffer size\r\n\t\tif ( !properties.get( renderTarget.depthTexture ).__webglTexture ||\r\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\r\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\r\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\r\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\r\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\r\n\t\t}\r\n\r\n\t\t_this.setTexture2D( renderTarget.depthTexture, 0 );\r\n\r\n\t\tvar webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\r\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\r\n\r\n\t}\r\n\r\n\t// Setup GL resources for a non-texture depth buffer\r\n\tfunction setupDepthRenderbuffer( renderTarget ) {\r\n\r\n\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\r\n\t\tif ( renderTarget.depthTexture ) {\r\n\r\n\t\t\tif ( isCube ) throw new Error('target.depthTexture not supported in Cube render targets');\r\n\r\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\r\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\r\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\r\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n\t}\r\n\r\n\t// Set up GL resources for the render target\r\n\tfunction setupRenderTarget( renderTarget ) {\r\n\r\n\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\t\tvar textureProperties = properties.get( renderTarget.texture );\r\n\r\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t_infoMemory.textures ++;\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\t\tvar isTargetPowerOfTwo = THREE.Math.isPowerOfTwo( renderTarget.width ) && THREE.Math.isPowerOfTwo( renderTarget.height );\r\n\r\n\t\t// Setup framebuffer\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\r\n\r\n\t\t}\r\n\r\n\t\t// Setup color buffer\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\r\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo );\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( renderTarget.texture.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo );\r\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\r\n\r\n\t\t\tif ( renderTarget.texture.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\r\n\r\n\t\t}\r\n\r\n\t\t// Setup depth and stencil buffers\r\n\r\n\t\tif ( renderTarget.depthBuffer ) {\r\n\r\n\t\t\tsetupDepthRenderbuffer( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.getCurrentRenderTarget = function() {\r\n\r\n\t\treturn _currentRenderTarget;\r\n\r\n\t};\r\n\r\n\tthis.setRenderTarget = function ( renderTarget ) {\r\n\r\n\t\t_currentRenderTarget = renderTarget;\r\n\r\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\r\n\r\n\t\t\tsetupRenderTarget( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\t\tvar framebuffer;\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer[ renderTarget.activeCubeFace ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_currentScissor.copy( renderTarget.scissor );\r\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\r\n\r\n\t\t\t_currentViewport.copy( renderTarget.viewport );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tframebuffer = null;\r\n\r\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio );\r\n\t\t\t_currentScissorTest = _scissorTest;\r\n\r\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio );\r\n\r\n\t\t}\r\n\r\n\t\tif ( _currentFramebuffer !== framebuffer ) {\r\n\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t\t_currentFramebuffer = framebuffer;\r\n\r\n\t\t}\r\n\r\n\t\tstate.scissor( _currentScissor );\r\n\t\tstate.setScissorTest( _currentScissorTest );\r\n\r\n\t\tstate.viewport( _currentViewport );\r\n\r\n\t\tif ( isCube ) {\r\n\r\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\r\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, renderTarget.activeMipMapLevel );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer ) {\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTarget === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n\t\tif ( framebuffer ) {\r\n\r\n\t\t\tvar restore = false;\r\n\r\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\r\n\t\t\t\trestore = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tvar texture = renderTarget.texture;\r\n\r\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && paramThreeToGL( texture.format ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texture.type !== THREE.UnsignedByteType &&\r\n\t\t\t\t     paramThreeToGL( texture.type ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) &&\r\n\t\t\t\t     ! ( texture.type === THREE.FloatType && extensions.get( 'WEBGL_color_buffer_float' ) ) &&\r\n\t\t\t\t     ! ( texture.type === THREE.HalfFloatType && extensions.get( 'EXT_color_buffer_half_float' ) ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\r\n\r\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\r\n\r\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\r\n\r\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, paramThreeToGL( texture.format ), paramThreeToGL( texture.type ), buffer );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} finally {\r\n\r\n\t\t\t\tif ( restore ) {\r\n\r\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction updateRenderTargetMipmap( renderTarget ) {\r\n\r\n\t\tvar target = renderTarget instanceof THREE.WebGLRenderTargetCube ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\r\n\t\tvar texture = properties.get( renderTarget.texture ).__webglTexture;\r\n\r\n\t\tstate.bindTexture( target, texture );\r\n\t\t_gl.generateMipmap( target );\r\n\t\tstate.bindTexture( target, null );\r\n\r\n\t}\r\n\r\n\t// Fallback filters for non-power-of-2 textures\r\n\r\n\tfunction filterFallback ( f ) {\r\n\r\n\t\tif ( f === THREE.NearestFilter || f === THREE.NearestMipMapNearestFilter || f === THREE.NearestMipMapLinearFilter ) {\r\n\r\n\t\t\treturn _gl.NEAREST;\r\n\r\n\t\t}\r\n\r\n\t\treturn _gl.LINEAR;\r\n\r\n\t}\r\n\r\n\t// Map three.js constants to WebGL constants\r\n\r\n\tfunction paramThreeToGL ( p ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( p === THREE.RepeatWrapping ) return _gl.REPEAT;\r\n\t\tif ( p === THREE.ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\r\n\t\tif ( p === THREE.MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\r\n\r\n\t\tif ( p === THREE.NearestFilter ) return _gl.NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.LinearFilter ) return _gl.LINEAR;\r\n\t\tif ( p === THREE.LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.UnsignedByteType ) return _gl.UNSIGNED_BYTE;\r\n\t\tif ( p === THREE.UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\r\n\t\tif ( p === THREE.UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\r\n\t\tif ( p === THREE.UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\r\n\r\n\t\tif ( p === THREE.ByteType ) return _gl.BYTE;\r\n\t\tif ( p === THREE.ShortType ) return _gl.SHORT;\r\n\t\tif ( p === THREE.UnsignedShortType ) return _gl.UNSIGNED_SHORT;\r\n\t\tif ( p === THREE.IntType ) return _gl.INT;\r\n\t\tif ( p === THREE.UnsignedIntType ) return _gl.UNSIGNED_INT;\r\n\t\tif ( p === THREE.FloatType ) return _gl.FLOAT;\r\n\r\n\t\textension = extensions.get( 'OES_texture_half_float' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.HalfFloatType ) return extension.HALF_FLOAT_OES;\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === THREE.AlphaFormat ) return _gl.ALPHA;\r\n\t\tif ( p === THREE.RGBFormat ) return _gl.RGB;\r\n\t\tif ( p === THREE.RGBAFormat ) return _gl.RGBA;\r\n\t\tif ( p === THREE.LuminanceFormat ) return _gl.LUMINANCE;\r\n\t\tif ( p === THREE.LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\r\n\t\tif ( p === THREE.DepthFormat ) return _gl.DEPTH_COMPONENT;\r\n\r\n\t\tif ( p === THREE.AddEquation ) return _gl.FUNC_ADD;\r\n\t\tif ( p === THREE.SubtractEquation ) return _gl.FUNC_SUBTRACT;\r\n\t\tif ( p === THREE.ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\r\n\r\n\t\tif ( p === THREE.ZeroFactor ) return _gl.ZERO;\r\n\t\tif ( p === THREE.OneFactor ) return _gl.ONE;\r\n\t\tif ( p === THREE.SrcColorFactor ) return _gl.SRC_COLOR;\r\n\t\tif ( p === THREE.OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaFactor ) return _gl.SRC_ALPHA;\r\n\t\tif ( p === THREE.OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\r\n\t\tif ( p === THREE.DstAlphaFactor ) return _gl.DST_ALPHA;\r\n\t\tif ( p === THREE.OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\r\n\r\n\t\tif ( p === THREE.DstColorFactor ) return _gl.DST_COLOR;\r\n\t\tif ( p === THREE.OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_ETC1_Format ) return extension.COMPRESSED_RGB_ETC1_WEBGL;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.MinEquation ) return extension.MIN_EXT;\r\n\t\t\tif ( p === THREE.MaxEquation ) return extension.MAX_EXT;\r\n\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/WebGLRenderTarget.js\r\n\r\n/**\r\n * @author szimek / https://github.com/szimek/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author Marius Kintel / https://github.com/kintel\r\n */\r\n\r\n/*\r\n In options, we can specify:\r\n * Texture parameters for an auto-generated target texture\r\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\r\n*/\r\nTHREE.WebGLRenderTarget = function ( width, height, options ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\tthis.scissor = new THREE.Vector4( 0, 0, width, height );\r\n\tthis.scissorTest = false;\r\n\r\n\tthis.viewport = new THREE.Vector4( 0, 0, width, height );\r\n\r\n\toptions = options || {};\r\n\r\n\tif ( options.minFilter === undefined ) options.minFilter = THREE.LinearFilter;\r\n\r\n\tthis.texture = new THREE.Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\r\n\r\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n\tthis.depthTexture = null;\r\n\r\n};\r\n\r\nObject.assign( THREE.WebGLRenderTarget.prototype, THREE.EventDispatcher.prototype, {\r\n\r\n\tsetSize: function ( width, height ) {\r\n\r\n\t\tif ( this.width !== width || this.height !== height ) {\r\n\r\n\t\t\tthis.width = width;\r\n\t\t\tthis.height = height;\r\n\r\n\t\t\tthis.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis.viewport.set( 0, 0, width, height );\r\n\t\tthis.scissor.set( 0, 0, width, height );\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.width = source.width;\r\n\t\tthis.height = source.height;\r\n\r\n\t\tthis.viewport.copy( source.viewport );\r\n\r\n\t\tthis.texture = source.texture.clone();\r\n\r\n\t\tthis.depthBuffer = source.depthBuffer;\r\n\t\tthis.stencilBuffer = source.stencilBuffer;\r\n\t\tthis.depthTexture = source.depthTexture;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/renderers/WebGLRenderTargetCube.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com\r\n */\r\n\r\nTHREE.WebGLRenderTargetCube = function ( width, height, options ) {\r\n\r\n\tTHREE.WebGLRenderTarget.call( this, width, height, options );\r\n\r\n\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\r\n\tthis.activeMipMapLevel = 0;\r\n\r\n};\r\n\r\nTHREE.WebGLRenderTargetCube.prototype = Object.create( THREE.WebGLRenderTarget.prototype );\r\nTHREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube;\r\n\r\n// File:src/renderers/webgl/WebGLBufferRenderer.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\r\n\tvar mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\t_gl.drawArrays( mode, start, count );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( geometry ) {\r\n\r\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar position = geometry.attributes.position;\r\n\r\n\t\tvar count = 0;\r\n\r\n\t\tif ( position instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\tcount = position.data.count;\r\n\r\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcount = position.count;\r\n\r\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\r\n\r\n\t\t}\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count * geometry.maxInstancedCount;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += geometry.maxInstancedCount * count / 3;\r\n\r\n\t}\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLClipping.js\r\n\r\nTHREE.WebGLClipping = function() {\r\n\r\n\tvar scope = this,\r\n\r\n\t\tglobalState = null,\r\n\t\tnumGlobalPlanes = 0,\r\n\t\tlocalClippingEnabled = false,\r\n\t\trenderingShadows = false,\r\n\r\n\t\tplane = new THREE.Plane(),\r\n\t\tviewNormalMatrix = new THREE.Matrix3(),\r\n\r\n\t\tuniform = { value: null, needsUpdate: false };\r\n\r\n\tthis.uniform = uniform;\r\n\tthis.numPlanes = 0;\r\n\r\n\tthis.init = function( planes, enableLocalClipping, camera ) {\r\n\r\n\t\tvar enabled =\r\n\t\t\tplanes.length !== 0 ||\r\n\t\t\tenableLocalClipping ||\r\n\t\t\t// enable state of previous frame - the clipping code has to\r\n\t\t\t// run another frame in order to reset the state:\r\n\t\t\tnumGlobalPlanes !== 0 ||\r\n\t\t\tlocalClippingEnabled;\r\n\r\n\t\tlocalClippingEnabled = enableLocalClipping;\r\n\r\n\t\tglobalState = projectPlanes( planes, camera, 0 );\r\n\t\tnumGlobalPlanes = planes.length;\r\n\r\n\t\treturn enabled;\r\n\r\n\t};\r\n\r\n\tthis.beginShadows = function() {\r\n\r\n\t\trenderingShadows = true;\r\n\t\tprojectPlanes( null );\r\n\r\n\t};\r\n\r\n\tthis.endShadows = function() {\r\n\r\n\t\trenderingShadows = false;\r\n\t\tresetGlobalState();\r\n\r\n\t};\r\n\r\n\tthis.setState = function( planes, clipShadows, camera, cache, fromCache ) {\r\n\r\n\t\tif ( ! localClippingEnabled ||\r\n\t\t\t\tplanes === null || planes.length === 0 ||\r\n\t\t\t\trenderingShadows && ! clipShadows ) {\r\n\t\t\t// there's no local clipping\r\n\r\n\t\t\tif ( renderingShadows ) {\r\n\t\t\t\t// there's no global clipping\r\n\r\n\t\t\t\tprojectPlanes( null );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresetGlobalState();\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar nGlobal = renderingShadows ? 0 : numGlobalPlanes,\r\n\t\t\t\tlGlobal = nGlobal * 4,\r\n\r\n\t\t\t\tdstArray = cache.clippingState || null;\r\n\r\n\t\t\tuniform.value = dstArray; // ensure unique state\r\n\r\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\r\n\r\n\t\t\tfor ( var i = 0; i !== lGlobal; ++ i ) {\r\n\r\n\t\t\t\tdstArray[ i ] = globalState[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcache.clippingState = dstArray;\r\n\t\t\tthis.numPlanes += nGlobal;\r\n\r\n\t\t}\r\n\r\n\r\n\t};\r\n\r\n\tfunction resetGlobalState() {\r\n\r\n\t\tif ( uniform.value !== globalState ) {\r\n\r\n\t\t\tuniform.value = globalState;\r\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\r\n\r\n\t\t}\r\n\r\n\t\tscope.numPlanes = numGlobalPlanes;\r\n\r\n\t}\r\n\r\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\r\n\r\n\t\tvar nPlanes = planes !== null ? planes.length : 0,\r\n\t\t\tdstArray = null;\r\n\r\n\t\tif ( nPlanes !== 0 ) {\r\n\r\n\t\t\tdstArray = uniform.value;\r\n\r\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\r\n\r\n\t\t\t\tvar flatSize = dstOffset + nPlanes * 4,\r\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\r\n\r\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\r\n\r\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\r\n\r\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var i = 0, i4 = dstOffset;\r\n\t\t\t\t\t\t\t\t\ti !== nPlanes; ++ i, i4 += 4 ) {\r\n\r\n\t\t\t\t\tplane.copy( planes[ i ] ).\r\n\t\t\t\t\t\t\tapplyMatrix4( viewMatrix, viewNormalMatrix );\r\n\r\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\r\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniform.value = dstArray;\r\n\t\t\tuniform.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tscope.numPlanes = nPlanes;\r\n\t\treturn dstArray;\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// File:src/renderers/webgl/WebGLIndexedBufferRenderer.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLIndexedBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\r\n\tvar mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tvar type, size;\r\n\r\n\tfunction setIndex( index ) {\r\n\r\n\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\t\ttype = _gl.UNSIGNED_INT;\r\n\t\t\tsize = 4;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\t\t\tsize = 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\t_gl.drawElements( mode, count, type, start * size );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( geometry, start, count ) {\r\n\r\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\textension.drawElementsInstancedANGLE( mode, count, type, start * size, geometry.maxInstancedCount );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count * geometry.maxInstancedCount;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += geometry.maxInstancedCount * count / 3;\r\n\t}\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.setIndex = setIndex;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLExtensions.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLExtensions = function ( gl ) {\r\n\r\n\tvar extensions = {};\r\n\r\n\tthis.get = function ( name ) {\r\n\r\n\t\tif ( extensions[ name ] !== undefined ) {\r\n\r\n\t\t\treturn extensions[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tvar extension;\r\n\r\n\t\tswitch ( name ) {\r\n\r\n\t\t\tcase 'WEBGL_depth_texture':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'EXT_texture_filter_anisotropic':\r\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_etc1':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_etc1' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\textension = gl.getExtension( name );\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\textensions[ name ] = extension;\r\n\r\n\t\treturn extension;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLCapabilities.js\r\n\r\nTHREE.WebGLCapabilities = function ( gl, extensions, parameters ) {\r\n\r\n\tfunction getMaxPrecision( precision ) {\r\n\r\n\t\tif ( precision === 'highp' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\r\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'highp';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprecision = 'mediump';\r\n\r\n\t\t}\r\n\r\n\t\tif ( precision === 'mediump' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\r\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'mediump';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn 'lowp';\r\n\r\n\t}\r\n\r\n\tthis.getMaxPrecision = getMaxPrecision;\r\n\r\n\tthis.precision = parameters.precision !== undefined ? parameters.precision : 'highp';\r\n\tthis.logarithmicDepthBuffer = parameters.logarithmicDepthBuffer !== undefined ? parameters.logarithmicDepthBuffer : false;\r\n\r\n\tthis.maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\tthis.maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\r\n\tthis.maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\r\n\tthis.maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\r\n\r\n\tthis.maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\r\n\tthis.maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\r\n\tthis.maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\r\n\tthis.maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\r\n\r\n\tthis.vertexTextures = this.maxVertexTextures > 0;\r\n\tthis.floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\r\n\tthis.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures;\r\n\r\n\tvar _maxPrecision = getMaxPrecision( this.precision );\r\n\r\n\tif ( _maxPrecision !== this.precision ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer:', this.precision, 'not supported, using', _maxPrecision, 'instead.' );\r\n\t\tthis.precision = _maxPrecision;\r\n\r\n\t}\r\n\r\n\tif ( this.logarithmicDepthBuffer ) {\r\n\r\n\t\tthis.logarithmicDepthBuffer = !! extensions.get( 'EXT_frag_depth' );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLGeometries.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLGeometries = function ( gl, properties, info ) {\r\n\r\n\tvar geometries = {};\r\n\r\n\tfunction get( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( geometries[ geometry.id ] !== undefined ) {\r\n\r\n\t\t\treturn geometries[ geometry.id ];\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tvar buffergeometry;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tbuffergeometry = geometry;\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\r\n\r\n\t\t\t\tgeometry._bufferGeometry = new THREE.BufferGeometry().setFromObject( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbuffergeometry = geometry._bufferGeometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometries[ geometry.id ] = buffergeometry;\r\n\r\n\t\tinfo.memory.geometries ++;\r\n\r\n\t\treturn buffergeometry;\r\n\r\n\t}\r\n\r\n\tfunction onGeometryDispose( event ) {\r\n\r\n\t\tvar geometry = event.target;\r\n\t\tvar buffergeometry = geometries[ geometry.id ];\r\n\r\n\t\tif ( buffergeometry.index !== null ) {\r\n\r\n\t\t\tdeleteAttribute( buffergeometry.index );\r\n\r\n\t\t}\r\n\r\n\t\tdeleteAttributes( buffergeometry.attributes );\r\n\r\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tdelete geometries[ geometry.id ];\r\n\r\n\t\t// TODO\r\n\r\n\t\tvar property = properties.get( geometry );\r\n\r\n\t\tif ( property.wireframe ) {\r\n\r\n\t\t\tdeleteAttribute( property.wireframe );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.delete( geometry );\r\n\r\n\t\tvar bufferproperty = properties.get( buffergeometry );\r\n\r\n\t\tif ( bufferproperty.wireframe ) {\r\n\r\n\t\t\tdeleteAttribute( bufferproperty.wireframe );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.delete( buffergeometry );\r\n\r\n\t\t//\r\n\r\n\t\tinfo.memory.geometries --;\r\n\r\n\t}\r\n\r\n\tfunction getAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\r\n\t\t}\r\n\r\n\t\treturn properties.get( attribute ).__webglBuffer;\r\n\r\n\t}\r\n\r\n\tfunction deleteAttribute( attribute ) {\r\n\r\n\t\tvar buffer = getAttributeBuffer( attribute );\r\n\r\n\t\tif ( buffer !== undefined ) {\r\n\r\n\t\t\tgl.deleteBuffer( buffer );\r\n\t\t\tremoveAttributeBuffer( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction deleteAttributes( attributes ) {\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tdeleteAttribute( attributes[ name ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction removeAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\tproperties.delete( attribute.data );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tproperties.delete( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.get = get;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLLights.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLLights = function () {\r\n\r\n\tvar lights = {};\r\n\r\n\tthis.get = function ( light ) {\r\n\r\n\t\tif ( lights[ light.id ] !== undefined ) {\r\n\r\n\t\t\treturn lights[ light.id ];\r\n\r\n\t\t}\r\n\r\n\t\tvar uniforms;\r\n\r\n\t\tswitch ( light.type ) {\r\n\r\n\t\t\tcase 'DirectionalLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tdirection: new THREE.Vector3(),\r\n\t\t\t\t\tcolor: new THREE.Color(),\r\n\r\n\t\t\t\t\tshadow: false,\r\n\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\tshadowMapSize: new THREE.Vector2()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'SpotLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tposition: new THREE.Vector3(),\r\n\t\t\t\t\tdirection: new THREE.Vector3(),\r\n\t\t\t\t\tcolor: new THREE.Color(),\r\n\t\t\t\t\tdistance: 0,\r\n\t\t\t\t\tconeCos: 0,\r\n\t\t\t\t\tpenumbraCos: 0,\r\n\t\t\t\t\tdecay: 0,\r\n\r\n\t\t\t\t\tshadow: false,\r\n\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\tshadowMapSize: new THREE.Vector2()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'PointLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tposition: new THREE.Vector3(),\r\n\t\t\t\t\tcolor: new THREE.Color(),\r\n\t\t\t\t\tdistance: 0,\r\n\t\t\t\t\tdecay: 0,\r\n\r\n\t\t\t\t\tshadow: false,\r\n\t\t\t\t\tshadowBias: 0,\r\n\t\t\t\t\tshadowRadius: 1,\r\n\t\t\t\t\tshadowMapSize: new THREE.Vector2()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'HemisphereLight':\r\n\t\t\t\tuniforms = {\r\n\t\t\t\t\tdirection: new THREE.Vector3(),\r\n\t\t\t\t\tskyColor: new THREE.Color(),\r\n\t\t\t\t\tgroundColor: new THREE.Color()\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tlights[ light.id ] = uniforms;\r\n\r\n\t\treturn uniforms;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLObjects.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLObjects = function ( gl, properties, info ) {\r\n\r\n\tvar geometries = new THREE.WebGLGeometries( gl, properties, info );\r\n\r\n\t//\r\n\r\n\tfunction update( object ) {\r\n\r\n\t\t// TODO: Avoid updating twice (when using shadowMap). Maybe add frame counter.\r\n\r\n\t\tvar geometry = geometries.get( object );\r\n\r\n\t\tif ( object.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tgeometry.updateFromObject( object );\r\n\r\n\t\t}\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tupdateAttribute( index, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tupdateAttribute( attributes[ name ], gl.ARRAY_BUFFER );\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tvar morphAttributes = geometry.morphAttributes;\r\n\r\n\t\tfor ( var name in morphAttributes ) {\r\n\r\n\t\t\tvar array = morphAttributes[ name ];\r\n\r\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tupdateAttribute( array[ i ], gl.ARRAY_BUFFER );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n\tfunction updateAttribute( attribute, bufferType ) {\r\n\r\n\t\tvar data = ( attribute instanceof THREE.InterleavedBufferAttribute ) ? attribute.data : attribute;\r\n\r\n\t\tvar attributeProperties = properties.get( data );\r\n\r\n\t\tif ( attributeProperties.__webglBuffer === undefined ) {\r\n\r\n\t\t\tcreateBuffer( attributeProperties, data, bufferType );\r\n\r\n\t\t} else if ( attributeProperties.version !== data.version ) {\r\n\r\n\t\t\tupdateBuffer( attributeProperties, data, bufferType );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createBuffer( attributeProperties, data, bufferType ) {\r\n\r\n\t\tattributeProperties.__webglBuffer = gl.createBuffer();\r\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\r\n\t\tvar usage = data.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\r\n\r\n\t\tgl.bufferData( bufferType, data.array, usage );\r\n\r\n\t\tattributeProperties.version = data.version;\r\n\r\n\t}\r\n\r\n\tfunction updateBuffer( attributeProperties, data, bufferType ) {\r\n\r\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\r\n\t\tif ( data.dynamic === false || data.updateRange.count === - 1 ) {\r\n\r\n\t\t\t// Not using update ranges\r\n\r\n\t\t\tgl.bufferSubData( bufferType, 0, data.array );\r\n\r\n\t\t} else if ( data.updateRange.count === 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.bufferSubData( bufferType, data.updateRange.offset * data.array.BYTES_PER_ELEMENT,\r\n\t\t\t\t\t\t\t  data.array.subarray( data.updateRange.offset, data.updateRange.offset + data.updateRange.count ) );\r\n\r\n\t\t\tdata.updateRange.count = 0; // reset range\r\n\r\n\t\t}\r\n\r\n\t\tattributeProperties.version = data.version;\r\n\r\n\t}\r\n\r\n\tfunction getAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\r\n\t\t}\r\n\r\n\t\treturn properties.get( attribute ).__webglBuffer;\r\n\r\n\t}\r\n\r\n\tfunction getWireframeAttribute( geometry ) {\r\n\r\n\t\tvar property = properties.get( geometry );\r\n\r\n\t\tif ( property.wireframe !== undefined ) {\r\n\r\n\t\t\treturn property.wireframe;\r\n\r\n\t\t}\r\n\r\n\t\tvar indices = [];\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar attributes = geometry.attributes;\r\n\t\tvar position = attributes.position;\r\n\r\n\t\t// console.time( 'wireframe' );\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tvar edges = {};\r\n\t\t\tvar array = index.array;\r\n\r\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\tvar a = array[ i + 0 ];\r\n\t\t\t\tvar b = array[ i + 1 ];\r\n\t\t\t\tvar c = array[ i + 2 ];\r\n\r\n\t\t\t\tif ( checkEdge( edges, a, b ) ) indices.push( a, b );\r\n\t\t\t\tif ( checkEdge( edges, b, c ) ) indices.push( b, c );\r\n\t\t\t\tif ( checkEdge( edges, c, a ) ) indices.push( c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar array = attributes.position.array;\r\n\r\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\r\n\r\n\t\t\t\tvar a = i + 0;\r\n\t\t\t\tvar b = i + 1;\r\n\t\t\t\tvar c = i + 2;\r\n\r\n\t\t\t\tindices.push( a, b, b, c, c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// console.timeEnd( 'wireframe' );\r\n\r\n\t\tvar TypeArray = position.count > 65535 ? Uint32Array : Uint16Array;\r\n\t\tvar attribute = new THREE.BufferAttribute( new TypeArray( indices ), 1 );\r\n\r\n\t\tupdateAttribute( attribute, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n\t\tproperty.wireframe = attribute;\r\n\r\n\t\treturn attribute;\r\n\r\n\t}\r\n\r\n\tfunction checkEdge( edges, a, b ) {\r\n\r\n\t\tif ( a > b ) {\r\n\r\n\t\t\tvar tmp = a;\r\n\t\t\ta = b;\r\n\t\t\tb = tmp;\r\n\r\n\t\t}\r\n\r\n\t\tvar list = edges[ a ];\r\n\r\n\t\tif ( list === undefined ) {\r\n\r\n\t\t\tedges[ a ] = [ b ];\r\n\t\t\treturn true;\r\n\r\n\t\t} else if ( list.indexOf( b ) === -1 ) {\r\n\r\n\t\t\tlist.push( b );\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tthis.getAttributeBuffer = getAttributeBuffer;\r\n\tthis.getWireframeAttribute = getWireframeAttribute;\r\n\r\n\tthis.update = update;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLProgram.js\r\n\r\nTHREE.WebGLProgram = ( function () {\r\n\r\n\tvar programIdCount = 0;\r\n\r\n\tfunction getEncodingComponents( encoding ) {\r\n\r\n\t\tswitch ( encoding ) {\r\n\r\n\t\t\tcase THREE.LinearEncoding:\r\n\t\t\t\treturn [ 'Linear','( value )' ];\r\n\t\t\tcase THREE.sRGBEncoding:\r\n\t\t\t\treturn [ 'sRGB','( value )' ];\r\n\t\t\tcase THREE.RGBEEncoding:\r\n\t\t\t\treturn [ 'RGBE','( value )' ];\r\n\t\t\tcase THREE.RGBM7Encoding:\r\n\t\t\t\treturn [ 'RGBM','( value, 7.0 )' ];\r\n\t\t\tcase THREE.RGBM16Encoding:\r\n\t\t\t\treturn [ 'RGBM','( value, 16.0 )' ];\r\n\t\t\tcase THREE.RGBDEncoding:\r\n\t\t\t\treturn [ 'RGBD','( value, 256.0 )' ];\r\n\t\t\tcase THREE.GammaEncoding:\r\n\t\t\t\treturn [ 'Gamma','( value, float( GAMMA_FACTOR ) )' ];\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error( 'unsupported encoding: ' + encoding );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTexelDecodingFunction( functionName, encoding ) {\r\n\r\n\t\tvar components = getEncodingComponents( encoding );\r\n\t\treturn \"vec4 \" + functionName + \"( vec4 value ) { return \" + components[ 0 ] + \"ToLinear\" + components[ 1 ] + \"; }\";\r\n\r\n\t}\r\n\r\n\tfunction getTexelEncodingFunction( functionName, encoding ) {\r\n\r\n\t\tvar components = getEncodingComponents( encoding );\r\n\t\treturn \"vec4 \" + functionName + \"( vec4 value ) { return LinearTo\" + components[ 0 ] + components[ 1 ] + \"; }\";\r\n\r\n\t}\r\n\r\n\tfunction getToneMappingFunction( functionName, toneMapping ) {\r\n\r\n\t\tvar toneMappingName;\r\n\r\n\t\tswitch ( toneMapping ) {\r\n\r\n\t\t\tcase THREE.LinearToneMapping:\r\n\t\t\t\ttoneMappingName = \"Linear\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.ReinhardToneMapping:\r\n\t\t\t\ttoneMappingName = \"Reinhard\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.Uncharted2ToneMapping:\r\n\t\t\t\ttoneMappingName = \"Uncharted2\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase THREE.CineonToneMapping:\r\n\t\t\t\ttoneMappingName = \"OptimizedCineon\";\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error( 'unsupported toneMapping: ' + toneMapping );\r\n\r\n\t\t}\r\n\r\n\t\treturn \"vec3 \" + functionName + \"( vec3 color ) { return \" + toneMappingName + \"ToneMapping( color ); }\";\r\n\r\n\t}\r\n\r\n\tfunction generateExtensions( extensions, parameters, rendererExtensions ) {\r\n\r\n\t\textensions = extensions || {};\r\n\r\n\t\tvar chunks = [\r\n\t\t\t( extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.normalMap || parameters.flatShading ) ? '#extension GL_OES_standard_derivatives : enable' : '',\r\n\t\t\t( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\r\n\t\t\t( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\r\n\t\t\t( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : '',\r\n\t\t];\r\n\r\n\t\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t}\r\n\r\n\tfunction generateDefines( defines ) {\r\n\r\n\t\tvar chunks = [];\r\n\r\n\t\tfor ( var name in defines ) {\r\n\r\n\t\t\tvar value = defines[ name ];\r\n\r\n\t\t\tif ( value === false ) continue;\r\n\r\n\t\t\tchunks.push( '#define ' + name + ' ' + value );\r\n\r\n\t\t}\r\n\r\n\t\treturn chunks.join( '\\n' );\r\n\r\n\t}\r\n\r\n\tfunction fetchAttributeLocations( gl, program, identifiers ) {\r\n\r\n\t\tvar attributes = {};\r\n\r\n\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\r\n\r\n\t\tfor ( var i = 0; i < n; i ++ ) {\r\n\r\n\t\t\tvar info = gl.getActiveAttrib( program, i );\r\n\t\t\tvar name = info.name;\r\n\r\n\t\t\t// console.log(\"THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:\", name, i );\r\n\r\n\t\t\tattributes[ name ] = gl.getAttribLocation( program, name );\r\n\r\n\t\t}\r\n\r\n\t\treturn attributes;\r\n\r\n\t}\r\n\r\n\tfunction filterEmptyLine( string ) {\r\n\r\n\t\treturn string !== '';\r\n\r\n\t}\r\n\r\n\tfunction replaceLightNums( string, parameters ) {\r\n\r\n\t\treturn string\r\n\t\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\r\n\t\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\r\n\t\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\r\n\t\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights );\r\n\r\n\t}\r\n\r\n\tfunction parseIncludes( string ) {\r\n\r\n\t\tvar pattern = /#include +<([\\w\\d.]+)>/g;\r\n\r\n\t\tfunction replace( match, include ) {\r\n\r\n\t\t\tvar replace = THREE.ShaderChunk[ include ];\r\n\r\n\t\t\tif ( replace === undefined ) {\r\n\r\n\t\t\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn parseIncludes( replace );\r\n\r\n\t\t}\r\n\r\n\t\treturn string.replace( pattern, replace );\r\n\r\n\t}\r\n\r\n\tfunction unrollLoops( string ) {\r\n\r\n\t\tvar pattern = /for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\r\n\r\n\t\tfunction replace( match, start, end, snippet ) {\r\n\r\n\t\t\tvar unroll = '';\r\n\r\n\t\t\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\r\n\r\n\t\t\t\tunroll += snippet.replace( /\\[ i \\]/g, '[ ' + i + ' ]' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn unroll;\r\n\r\n\t\t}\r\n\r\n\t\treturn string.replace( pattern, replace );\r\n\r\n\t}\r\n\r\n\treturn function WebGLProgram( renderer, code, material, parameters ) {\r\n\r\n\t\tvar gl = renderer.context;\r\n\r\n\t\tvar extensions = material.extensions;\r\n\t\tvar defines = material.defines;\r\n\r\n\t\tvar vertexShader = material.__webglShader.vertexShader;\r\n\t\tvar fragmentShader = material.__webglShader.fragmentShader;\r\n\r\n\t\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\r\n\r\n\t\tif ( parameters.shadowMapType === THREE.PCFShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\r\n\r\n\t\t} else if ( parameters.shadowMapType === THREE.PCFSoftShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\r\n\r\n\t\t}\r\n\r\n\t\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\r\n\t\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\r\n\t\tif ( parameters.envMap ) {\r\n\r\n\t\t\tswitch ( material.envMap.mapping ) {\r\n\r\n\t\t\t\tcase THREE.CubeReflectionMapping:\r\n\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.CubeUVReflectionMapping:\r\n\t\t\t\tcase THREE.CubeUVRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.EquirectangularReflectionMapping:\r\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.SphericalReflectionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( material.envMap.mapping ) {\r\n\r\n\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( material.combine ) {\r\n\r\n\t\t\t\tcase THREE.MultiplyOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MixOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.AddOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\r\n\r\n\t\t// console.log( 'building new program ' );\r\n\r\n\t\t//\r\n\r\n\t\tvar customExtensions = generateExtensions( extensions, parameters, renderer.extensions );\r\n\r\n\t\tvar customDefines = generateDefines( defines );\r\n\r\n\t\t//\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar prefixVertex, prefixFragment;\r\n\r\n\t\tif ( material instanceof THREE.RawShaderMaterial ) {\r\n\r\n\t\t\tprefixVertex = '';\r\n\t\t\tprefixFragment = '';\r\n\r\n\t\t} else {\r\n\r\n\t\t\tprefixVertex = [\r\n\r\n\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\r\n\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\r\n\r\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t\t'#define MAX_BONES ' + parameters.maxBones,\r\n\r\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\r\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n\t\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\r\n\t\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\r\n\r\n\t\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\r\n\t\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\r\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\t\t'#define NUM_CLIPPING_PLANES ' + parameters.numClippingPlanes,\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\r\n\t\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t\t'uniform mat4 modelMatrix;',\r\n\t\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t'uniform mat3 normalMatrix;',\r\n\t\t\t\t'uniform vec3 cameraPosition;',\r\n\r\n\t\t\t\t'attribute vec3 position;',\r\n\t\t\t\t'attribute vec3 normal;',\r\n\t\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t\t'#ifdef USE_COLOR',\r\n\r\n\t\t\t\t'\tattribute vec3 color;',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'#ifdef USE_MORPHTARGETS',\r\n\r\n\t\t\t\t'\tattribute vec3 morphTarget0;',\r\n\t\t\t\t'\tattribute vec3 morphTarget1;',\r\n\t\t\t\t'\tattribute vec3 morphTarget2;',\r\n\t\t\t\t'\tattribute vec3 morphTarget3;',\r\n\r\n\t\t\t\t'\t#ifdef USE_MORPHNORMALS',\r\n\r\n\t\t\t\t'\t\tattribute vec3 morphNormal0;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal1;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal2;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal3;',\r\n\r\n\t\t\t\t'\t#else',\r\n\r\n\t\t\t\t'\t\tattribute vec3 morphTarget4;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget5;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget6;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget7;',\r\n\r\n\t\t\t\t'\t#endif',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'#ifdef USE_SKINNING',\r\n\r\n\t\t\t\t'\tattribute vec4 skinIndex;',\r\n\t\t\t\t'\tattribute vec4 skinWeight;',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'\\n'\r\n\r\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\t\tprefixFragment = [\r\n\r\n\t\t\t\tcustomExtensions,\r\n\r\n\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\r\n\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\r\n\r\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\r\n\r\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\r\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n\t\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\t\t'#define NUM_CLIPPING_PLANES ' + parameters.numClippingPlanes,\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\r\n\t\t\t\tparameters.premultipliedAlpha ? \"#define PREMULTIPLIED_ALPHA\" : '',\r\n\r\n\t\t\t\tparameters.physicallyCorrectLights ? \"#define PHYSICALLY_CORRECT_LIGHTS\" : '',\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t\tparameters.envMap && renderer.extensions.get( 'EXT_shader_texture_lod' ) ? '#define TEXTURE_LOD_EXT' : '',\r\n\r\n\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t'uniform vec3 cameraPosition;',\r\n\r\n\t\t\t\t( parameters.toneMapping !== THREE.NoToneMapping ) ? \"#define TONE_MAPPING\" : '',\r\n\t\t\t\t( parameters.toneMapping !== THREE.NoToneMapping ) ? THREE.ShaderChunk[ 'tonemapping_pars_fragment' ] : '',  // this code is required here because it is used by the toneMapping() function defined below\r\n\t\t\t\t( parameters.toneMapping !== THREE.NoToneMapping ) ? getToneMappingFunction( \"toneMapping\", parameters.toneMapping ) : '',\r\n\r\n\t\t\t\t( parameters.outputEncoding || parameters.mapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding ) ? THREE.ShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\r\n\t\t\t\tparameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\r\n\t\t\t\tparameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\r\n\t\t\t\tparameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\r\n\t\t\t\tparameters.outputEncoding ? getTexelEncodingFunction( \"linearToOutputTexel\", parameters.outputEncoding ) : '',\r\n\r\n\t\t\t\tparameters.depthPacking ? \"#define DEPTH_PACKING \" + material.depthPacking : '',\r\n\r\n\t\t\t\t'\\n'\r\n\r\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\t}\r\n\r\n\t\tvertexShader = parseIncludes( vertexShader, parameters );\r\n\t\tvertexShader = replaceLightNums( vertexShader, parameters );\r\n\r\n\t\tfragmentShader = parseIncludes( fragmentShader, parameters );\r\n\t\tfragmentShader = replaceLightNums( fragmentShader, parameters );\r\n\r\n\t\tif ( material instanceof THREE.ShaderMaterial === false ) {\r\n\r\n\t\t\tvertexShader = unrollLoops( vertexShader );\r\n\t\t\tfragmentShader = unrollLoops( fragmentShader );\r\n\r\n\t\t}\r\n\r\n\t\tvar vertexGlsl = prefixVertex + vertexShader;\r\n\t\tvar fragmentGlsl = prefixFragment + fragmentShader;\r\n\r\n\t\t// console.log( '*VERTEX*', vertexGlsl );\r\n\t\t// console.log( '*FRAGMENT*', fragmentGlsl );\r\n\r\n\t\tvar glVertexShader = THREE.WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\r\n\t\tvar glFragmentShader = THREE.WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\r\n\r\n\t\tgl.attachShader( program, glVertexShader );\r\n\t\tgl.attachShader( program, glFragmentShader );\r\n\r\n\t\t// Force a particular attribute to index 0.\r\n\r\n\t\tif ( material.index0AttributeName !== undefined ) {\r\n\r\n\t\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\r\n\r\n\t\t} else if ( parameters.morphTargets === true ) {\r\n\r\n\t\t\t// programs with morphTargets displace position out of attribute 0\r\n\t\t\tgl.bindAttribLocation( program, 0, 'position' );\r\n\r\n\t\t}\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\tvar programLog = gl.getProgramInfoLog( program );\r\n\t\tvar vertexLog = gl.getShaderInfoLog( glVertexShader );\r\n\t\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader );\r\n\r\n\t\tvar runnable = true;\r\n\t\tvar haveDiagnostics = true;\r\n\r\n\t\t// console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\r\n\t\t// console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\r\n\r\n\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\r\n\r\n\t\t\trunnable = false;\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\r\n\r\n\t\t} else if ( programLog !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\r\n\r\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\r\n\r\n\t\t\thaveDiagnostics = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( haveDiagnostics ) {\r\n\r\n\t\t\tthis.diagnostics = {\r\n\r\n\t\t\t\trunnable: runnable,\r\n\t\t\t\tmaterial: material,\r\n\r\n\t\t\t\tprogramLog: programLog,\r\n\r\n\t\t\t\tvertexShader: {\r\n\r\n\t\t\t\t\tlog: vertexLog,\r\n\t\t\t\t\tprefix: prefixVertex\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfragmentShader: {\r\n\r\n\t\t\t\t\tlog: fragmentLog,\r\n\t\t\t\t\tprefix: prefixFragment\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// clean up\r\n\r\n\t\tgl.deleteShader( glVertexShader );\r\n\t\tgl.deleteShader( glFragmentShader );\r\n\r\n\t\t// set up caching for uniform locations\r\n\r\n\t\tvar cachedUniforms;\r\n\r\n\t\tthis.getUniforms = function() {\r\n\r\n\t\t\tif ( cachedUniforms === undefined ) {\r\n\r\n\t\t\t\tcachedUniforms =\r\n\t\t\t\t\t\tnew THREE.WebGLUniforms( gl, program, renderer );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cachedUniforms;\r\n\r\n\t\t};\r\n\r\n\t\t// set up caching for attribute locations\r\n\r\n\t\tvar cachedAttributes;\r\n\r\n\t\tthis.getAttributes = function() {\r\n\r\n\t\t\tif ( cachedAttributes === undefined ) {\r\n\r\n\t\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cachedAttributes;\r\n\r\n\t\t};\r\n\r\n\t\t// free resource\r\n\r\n\t\tthis.destroy = function() {\r\n\r\n\t\t\tgl.deleteProgram( program );\r\n\t\t\tthis.program = undefined;\r\n\r\n\t\t};\r\n\r\n\t\t// DEPRECATED\r\n\r\n\t\tObject.defineProperties( this, {\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tget: function() {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\r\n\t\t\t\t\treturn this.getUniforms();\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tattributes: {\r\n\t\t\t\tget: function() {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\r\n\t\t\t\t\treturn this.getAttributes();\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\r\n\t\t//\r\n\r\n\t\tthis.id = programIdCount ++;\r\n\t\tthis.code = code;\r\n\t\tthis.usedTimes = 1;\r\n\t\tthis.program = program;\r\n\t\tthis.vertexShader = glVertexShader;\r\n\t\tthis.fragmentShader = glFragmentShader;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/WebGLPrograms.js\r\n\r\nTHREE.WebGLPrograms = function ( renderer, capabilities ) {\r\n\r\n\tvar programs = [];\r\n\r\n\tvar shaderIDs = {\r\n\t\tMeshDepthMaterial: 'depth',\r\n\t\tMeshNormalMaterial: 'normal',\r\n\t\tMeshBasicMaterial: 'basic',\r\n\t\tMeshLambertMaterial: 'lambert',\r\n\t\tMeshPhongMaterial: 'phong',\r\n\t\tMeshStandardMaterial: 'physical',\r\n\t\tMeshPhysicalMaterial: 'physical',\r\n\t\tLineBasicMaterial: 'basic',\r\n\t\tLineDashedMaterial: 'dashed',\r\n\t\tPointsMaterial: 'points'\r\n\t};\r\n\r\n\tvar parameterNames = [\r\n\t\t\"precision\", \"supportsVertexTextures\", \"map\", \"mapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\",\r\n\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"displacementMap\", \"specularMap\",\r\n\t\t\"roughnessMap\", \"metalnessMap\",\r\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\r\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\r\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\r\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\r\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\",\r\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\r\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"depthPacking\"\r\n\t];\r\n\r\n\r\n\tfunction allocateBones ( object ) {\r\n\r\n\t\tif ( capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\r\n\t\t\treturn 1024;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// default for when object is not specified\r\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\r\n\t\t\t//\r\n\t\t\t//  - leave some extra space for other uniforms\r\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\r\n\t\t\t//    (up to 54 should be safe)\r\n\r\n\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\r\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\r\n\t\t\tvar maxBones = nVertexMatrices;\r\n\r\n\t\t\tif ( object !== undefined && object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\r\n\r\n\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn maxBones;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTextureEncodingFromMap( map, gammaOverrideLinear ) {\r\n\r\n\t\tvar encoding;\r\n\r\n\t\tif ( ! map ) {\r\n\r\n\t\t\tencoding = THREE.LinearEncoding;\r\n\r\n\t\t} else if ( map instanceof THREE.Texture ) {\r\n\r\n\t\t\tencoding = map.encoding;\r\n\r\n\t\t} else if ( map instanceof THREE.WebGLRenderTarget ) {\r\n\r\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\r\n\t\t\tencoding = map.texture.encoding;\r\n\r\n\t\t}\r\n\r\n\t\t// add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\r\n\t\tif ( encoding === THREE.LinearEncoding && gammaOverrideLinear ) {\r\n\r\n\t\t\tencoding = THREE.GammaEncoding;\r\n\r\n\t\t}\r\n\r\n\t\treturn encoding;\r\n\r\n\t}\r\n\r\n\tthis.getParameters = function ( material, lights, fog, nClipPlanes, object ) {\r\n\r\n\t\tvar shaderID = shaderIDs[ material.type ];\r\n\r\n\t\t// heuristics to create shader parameters according to lights in the scene\r\n\t\t// (not to blow over maxLights budget)\r\n\r\n\t\tvar maxBones = allocateBones( object );\r\n\t\tvar precision = renderer.getPrecision();\r\n\r\n\t\tif ( material.precision !== null ) {\r\n\r\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\r\n\r\n\t\t\tif ( precision !== material.precision ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar currentRenderTarget = renderer.getCurrentRenderTarget();\r\n\r\n\t\tvar parameters = {\r\n\r\n\t\t\tshaderID: shaderID,\r\n\r\n\t\t\tprecision: precision,\r\n\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\r\n\t\t\toutputEncoding: getTextureEncodingFromMap( ( ! currentRenderTarget ) ? null : currentRenderTarget.texture, renderer.gammaOutput ),\r\n\t\t\tmap: !! material.map,\r\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map, renderer.gammaInput ),\r\n\t\t\tenvMap: !! material.envMap,\r\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\r\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( material.envMap, renderer.gammaInput ),\r\n\t\t\tenvMapCubeUV: ( !! material.envMap ) && ( ( material.envMap.mapping === THREE.CubeUVReflectionMapping ) || ( material.envMap.mapping === THREE.CubeUVRefractionMapping ) ),\r\n\t\t\tlightMap: !! material.lightMap,\r\n\t\t\taoMap: !! material.aoMap,\r\n\t\t\temissiveMap: !! material.emissiveMap,\r\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap, renderer.gammaInput ),\r\n\t\t\tbumpMap: !! material.bumpMap,\r\n\t\t\tnormalMap: !! material.normalMap,\r\n\t\t\tdisplacementMap: !! material.displacementMap,\r\n\t\t\troughnessMap: !! material.roughnessMap,\r\n\t\t\tmetalnessMap: !! material.metalnessMap,\r\n\t\t\tspecularMap: !! material.specularMap,\r\n\t\t\talphaMap: !! material.alphaMap,\r\n\r\n\t\t\tcombine: material.combine,\r\n\r\n\t\t\tvertexColors: material.vertexColors,\r\n\r\n\t\t\tfog: fog,\r\n\t\t\tuseFog: material.fog,\r\n\t\t\tfogExp: fog instanceof THREE.FogExp2,\r\n\r\n\t\t\tflatShading: material.shading === THREE.FlatShading,\r\n\r\n\t\t\tsizeAttenuation: material.sizeAttenuation,\r\n\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\r\n\r\n\t\t\tskinning: material.skinning,\r\n\t\t\tmaxBones: maxBones,\r\n\t\t\tuseVertexTexture: capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture,\r\n\r\n\t\t\tmorphTargets: material.morphTargets,\r\n\t\t\tmorphNormals: material.morphNormals,\r\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\r\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\r\n\r\n\t\t\tnumDirLights: lights.directional.length,\r\n\t\t\tnumPointLights: lights.point.length,\r\n\t\t\tnumSpotLights: lights.spot.length,\r\n\t\t\tnumHemiLights: lights.hemi.length,\r\n\r\n\t\t\tnumClippingPlanes: nClipPlanes,\r\n\r\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && lights.shadows.length > 0,\r\n\t\t\tshadowMapType: renderer.shadowMap.type,\r\n\r\n\t\t\ttoneMapping: renderer.toneMapping,\r\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\r\n\r\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\r\n\r\n\t\t\talphaTest: material.alphaTest,\r\n\t\t\tdoubleSided: material.side === THREE.DoubleSide,\r\n\t\t\tflipSided: material.side === THREE.BackSide,\r\n\r\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false\r\n\r\n\t\t};\r\n\r\n\t\treturn parameters;\r\n\r\n\t};\r\n\r\n\tthis.getProgramCode = function ( material, parameters ) {\r\n\r\n\t\tvar array = [];\r\n\r\n\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\tarray.push( parameters.shaderID );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray.push( material.fragmentShader );\r\n\t\t\tarray.push( material.vertexShader );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.defines !== undefined ) {\r\n\r\n\t\t\tfor ( var name in material.defines ) {\r\n\r\n\t\t\t\tarray.push( name );\r\n\t\t\t\tarray.push( material.defines[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\r\n\r\n\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn array.join();\r\n\r\n\t};\r\n\r\n\tthis.acquireProgram = function ( material, parameters, code ) {\r\n\r\n\t\tvar program;\r\n\r\n\t\t// Check if code has been already compiled\r\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\r\n\r\n\t\t\tvar programInfo = programs[ p ];\r\n\r\n\t\t\tif ( programInfo.code === code ) {\r\n\r\n\t\t\t\tprogram = programInfo;\r\n\t\t\t\t++ program.usedTimes;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tprogram = new THREE.WebGLProgram( renderer, code, material, parameters );\r\n\t\t\tprograms.push( program );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t};\r\n\r\n\tthis.releaseProgram = function( program ) {\r\n\r\n\t\tif ( -- program.usedTimes === 0 ) {\r\n\r\n\t\t\t// Remove from unordered set\r\n\t\t\tvar i = programs.indexOf( program );\r\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\r\n\t\t\tprograms.pop();\r\n\r\n\t\t\t// Free WebGL resources\r\n\t\t\tprogram.destroy();\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Exposed for resource monitoring & error feedback via renderer.info:\r\n\tthis.programs = programs;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLProperties.js\r\n\r\n/**\r\n* @author fordacious / fordacious.github.io\r\n*/\r\n\r\nTHREE.WebGLProperties = function () {\r\n\r\n\tvar properties = {};\r\n\r\n\tthis.get = function ( object ) {\r\n\r\n\t\tvar uuid = object.uuid;\r\n\t\tvar map = properties[ uuid ];\r\n\r\n\t\tif ( map === undefined ) {\r\n\r\n\t\t\tmap = {};\r\n\t\t\tproperties[ uuid ] = map;\r\n\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\r\n\t};\r\n\r\n\tthis.delete = function ( object ) {\r\n\r\n\t\tdelete properties[ object.uuid ];\r\n\r\n\t};\r\n\r\n\tthis.clear = function () {\r\n\r\n\t\tproperties = {};\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLShader.js\r\n\r\nTHREE.WebGLShader = ( function () {\r\n\r\n\tfunction addLineNumbers( string ) {\r\n\r\n\t\tvar lines = string.split( '\\n' );\r\n\r\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn lines.join( '\\n' );\r\n\r\n\t}\r\n\r\n\treturn function WebGLShader( gl, type, string ) {\r\n\r\n\t\tvar shader = gl.createShader( type );\r\n\r\n\t\tgl.shaderSource( shader, string );\r\n\t\tgl.compileShader( shader );\r\n\r\n\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\r\n\r\n\t\t}\r\n\r\n\t\t// --enable-privileged-webgl-extension\r\n\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\r\n\t\treturn shader;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/WebGLShadowMap.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WebGLShadowMap = function ( _renderer, _lights, _objects ) {\r\n\r\n\tvar _gl = _renderer.context,\r\n\t_state = _renderer.state,\r\n\t_frustum = new THREE.Frustum(),\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\r\n\t_lightShadows = _lights.shadows,\r\n\r\n\t_shadowMapSize = new THREE.Vector2(),\r\n\r\n\t_lookTarget = new THREE.Vector3(),\r\n\t_lightPositionWorld = new THREE.Vector3(),\r\n\r\n\t_renderList = [],\r\n\r\n\t_MorphingFlag = 1,\r\n\t_SkinningFlag = 2,\r\n\r\n\t_NumberOfMaterialVariants = ( _MorphingFlag | _SkinningFlag ) + 1,\r\n\r\n\t_depthMaterials = new Array( _NumberOfMaterialVariants ),\r\n\t_distanceMaterials = new Array( _NumberOfMaterialVariants ),\r\n\r\n\t_materialCache = {};\r\n\r\n\tvar cubeDirections = [\r\n\t\tnew THREE.Vector3( 1, 0, 0 ), new THREE.Vector3( - 1, 0, 0 ), new THREE.Vector3( 0, 0, 1 ),\r\n\t\tnew THREE.Vector3( 0, 0, - 1 ), new THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, - 1, 0 )\r\n\t];\r\n\r\n\tvar cubeUps = [\r\n\t\tnew THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 1, 0 ),\r\n\t\tnew THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 0, 1 ),\tnew THREE.Vector3( 0, 0, - 1 )\r\n\t];\r\n\r\n\tvar cube2DViewPorts = [\r\n\t\tnew THREE.Vector4(), new THREE.Vector4(), new THREE.Vector4(),\r\n\t\tnew THREE.Vector4(), new THREE.Vector4(), new THREE.Vector4()\r\n\t];\r\n\r\n\t// init\r\n\r\n\tvar depthMaterialTemplate = new THREE.MeshDepthMaterial();\r\n\tdepthMaterialTemplate.depthPacking = THREE.RGBADepthPacking;\r\n\tdepthMaterialTemplate.clipping = true;\r\n\r\n\tvar distanceShader = THREE.ShaderLib[ \"distanceRGBA\" ];\r\n\tvar distanceUniforms = THREE.UniformsUtils.clone( distanceShader.uniforms );\r\n\r\n\tfor ( var i = 0; i !== _NumberOfMaterialVariants; ++ i ) {\r\n\r\n\t\tvar useMorphing = ( i & _MorphingFlag ) !== 0;\r\n\t\tvar useSkinning = ( i & _SkinningFlag ) !== 0;\r\n\r\n\t\tvar depthMaterial = depthMaterialTemplate.clone();\r\n\t\tdepthMaterial.morphTargets = useMorphing;\r\n\t\tdepthMaterial.skinning = useSkinning;\r\n\r\n\t\t_depthMaterials[ i ] = depthMaterial;\r\n\r\n\t\tvar distanceMaterial = new THREE.ShaderMaterial( {\r\n\t\t\tdefines: {\r\n\t\t\t\t'USE_SHADOWMAP': ''\r\n\t\t\t},\r\n\t\t\tuniforms: distanceUniforms,\r\n\t\t\tvertexShader: distanceShader.vertexShader,\r\n\t\t\tfragmentShader: distanceShader.fragmentShader,\r\n\t\t\tmorphTargets: useMorphing,\r\n\t\t\tskinning: useSkinning,\r\n\t\t\tclipping: true\r\n\t\t} );\r\n\r\n\t\t_distanceMaterials[ i ] = distanceMaterial;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tthis.enabled = false;\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.needsUpdate = false;\r\n\r\n\tthis.type = THREE.PCFShadowMap;\r\n\r\n\tthis.renderReverseSided = true;\r\n\tthis.renderSingleSided = true;\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\r\n\r\n\t\tif ( _lightShadows.length === 0 ) return;\r\n\r\n\t\t// Set GL state for depth map.\r\n\t\t_state.clearColor( 1, 1, 1, 1 );\r\n\t\t_state.disable( _gl.BLEND );\r\n\t\t_state.setDepthTest( true );\r\n\t\t_state.setScissorTest( false );\r\n\r\n\t\t// render depth map\r\n\r\n\t\tvar faceCount, isPointLight;\r\n\r\n\t\tfor ( var i = 0, il = _lightShadows.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar light = _lightShadows[ i ];\r\n\t\t\tvar shadow = light.shadow;\r\n\r\n\t\t\tif ( shadow === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar shadowCamera = shadow.camera;\r\n\r\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\r\n\r\n\t\t\tif ( light instanceof THREE.PointLight ) {\r\n\r\n\t\t\t\tfaceCount = 6;\r\n\t\t\t\tisPointLight = true;\r\n\r\n\t\t\t\tvar vpWidth = _shadowMapSize.x;\r\n\t\t\t\tvar vpHeight = _shadowMapSize.y;\r\n\r\n\t\t\t\t// These viewports map a cube-map onto a 2D texture with the\r\n\t\t\t\t// following orientation:\r\n\t\t\t\t//\r\n\t\t\t\t//  xzXZ\r\n\t\t\t\t//   y Y\r\n\t\t\t\t//\r\n\t\t\t\t// X - Positive x direction\r\n\t\t\t\t// x - Negative x direction\r\n\t\t\t\t// Y - Positive y direction\r\n\t\t\t\t// y - Negative y direction\r\n\t\t\t\t// Z - Positive z direction\r\n\t\t\t\t// z - Negative z direction\r\n\r\n\t\t\t\t// positive X\r\n\t\t\t\tcube2DViewPorts[ 0 ].set( vpWidth * 2, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// negative X\r\n\t\t\t\tcube2DViewPorts[ 1 ].set( 0, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// positive Z\r\n\t\t\t\tcube2DViewPorts[ 2 ].set( vpWidth * 3, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// negative Z\r\n\t\t\t\tcube2DViewPorts[ 3 ].set( vpWidth, vpHeight, vpWidth, vpHeight );\r\n\t\t\t\t// positive Y\r\n\t\t\t\tcube2DViewPorts[ 4 ].set( vpWidth * 3, 0, vpWidth, vpHeight );\r\n\t\t\t\t// negative Y\r\n\t\t\t\tcube2DViewPorts[ 5 ].set( vpWidth, 0, vpWidth, vpHeight );\r\n\r\n\t\t\t\t_shadowMapSize.x *= 4.0;\r\n\t\t\t\t_shadowMapSize.y *= 2.0;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfaceCount = 1;\r\n\t\t\t\tisPointLight = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( shadow.map === null ) {\r\n\r\n\t\t\t\tvar pars = { minFilter: THREE.NearestFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat };\r\n\r\n\t\t\t\tshadow.map = new THREE.WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\r\n\r\n\t\t\t\tshadowCamera.updateProjectionMatrix();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( shadow instanceof THREE.SpotLightShadow ) {\r\n\r\n\t\t\t\tshadow.update( light );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar shadowMap = shadow.map;\r\n\t\t\tvar shadowMatrix = shadow.matrix;\r\n\r\n\t\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\tshadowCamera.position.copy( _lightPositionWorld );\r\n\r\n\t\t\t_renderer.setRenderTarget( shadowMap );\r\n\t\t\t_renderer.clear();\r\n\r\n\t\t\t// render shadow map for each cube face (if omni-directional) or\r\n\t\t\t// run a single pass if not\r\n\r\n\t\t\tfor ( var face = 0; face < faceCount; face ++ ) {\r\n\r\n\t\t\t\tif ( isPointLight ) {\r\n\r\n\t\t\t\t\t_lookTarget.copy( shadowCamera.position );\r\n\t\t\t\t\t_lookTarget.add( cubeDirections[ face ] );\r\n\t\t\t\t\tshadowCamera.up.copy( cubeUps[ face ] );\r\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\r\n\r\n\t\t\t\t\tvar vpDimensions = cube2DViewPorts[ face ];\r\n\t\t\t\t\t_state.viewport( vpDimensions );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t_lookTarget.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tshadowCamera.updateMatrixWorld();\r\n\t\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\r\n\r\n\t\t\t\t// compute shadow matrix\r\n\r\n\t\t\t\tshadowMatrix.set(\r\n\t\t\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t\t\t);\r\n\r\n\t\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n\t\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\r\n\t\t\t\t// update camera matrices and frustum\r\n\r\n\t\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n\t\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\t\t\t// set object matrices & frustum culling\r\n\r\n\t\t\t\t_renderList.length = 0;\r\n\r\n\t\t\t\tprojectObject( scene, camera, shadowCamera );\r\n\r\n\t\t\t\t// render shadow map\r\n\t\t\t\t// render regular objects\r\n\r\n\t\t\t\tfor ( var j = 0, jl = _renderList.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar object = _renderList[ j ];\r\n\t\t\t\t\tvar geometry = _objects.update( object );\r\n\t\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\t\tif ( material instanceof THREE.MultiMaterial ) {\r\n\r\n\t\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\t\tvar materials = material.materials;\r\n\r\n\t\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar group = groups[ k ];\r\n\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\r\n\t\t\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, groupMaterial, isPointLight, _lightPositionWorld );\r\n\t\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, material, isPointLight, _lightPositionWorld );\r\n\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Restore GL state.\r\n\t\tvar clearColor = _renderer.getClearColor(),\r\n\t\tclearAlpha = _renderer.getClearAlpha();\r\n\t\t_renderer.setClearColor( clearColor, clearAlpha );\r\n\r\n\t\tscope.needsUpdate = false;\r\n\r\n\t};\r\n\r\n\tfunction getDepthMaterial( object, material, isPointLight, lightPositionWorld ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tvar result = null;\r\n\r\n\t\tvar materialVariants = _depthMaterials;\r\n\t\tvar customMaterial = object.customDepthMaterial;\r\n\r\n\t\tif ( isPointLight ) {\r\n\r\n\t\t\tmaterialVariants = _distanceMaterials;\r\n\t\t\tcustomMaterial = object.customDistanceMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! customMaterial ) {\r\n\r\n\t\t\tvar useMorphing = geometry.morphTargets !== undefined &&\r\n\t\t\t\t\tgeometry.morphTargets.length > 0 && material.morphTargets;\r\n\r\n\t\t\tvar useSkinning = object instanceof THREE.SkinnedMesh && material.skinning;\r\n\r\n\t\t\tvar variantIndex = 0;\r\n\r\n\t\t\tif ( useMorphing ) variantIndex |= _MorphingFlag;\r\n\t\t\tif ( useSkinning ) variantIndex |= _SkinningFlag;\r\n\r\n\t\t\tresult = materialVariants[ variantIndex ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\tresult = customMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _renderer.localClippingEnabled &&\r\n\t\t\t material.clipShadows === true &&\r\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\r\n\r\n\t\t\t// in this case we need a unique material instance reflecting the\r\n\t\t\t// appropriate state\r\n\r\n\t\t\tvar keyA = result.uuid, keyB = material.uuid;\r\n\r\n\t\t\tvar materialsForVariant = _materialCache[ keyA ];\r\n\r\n\t\t\tif ( materialsForVariant === undefined ) {\r\n\r\n\t\t\t\tmaterialsForVariant = {};\r\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar cachedMaterial = materialsForVariant[ keyB ];\r\n\r\n\t\t\tif ( cachedMaterial === undefined ) {\r\n\r\n\t\t\t\tcachedMaterial = result.clone();\r\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tresult = cachedMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tresult.visible = material.visible;\r\n\t\tresult.wireframe = material.wireframe;\r\n\r\n\t\tvar side = material.side;\r\n\r\n\t\tif ( scope.renderSingleSided && side == THREE.DoubleSide ) {\r\n\r\n\t\t\tside = THREE.FrontSide;\r\n\r\n\t\t}\r\n\r\n\t\tif ( scope.renderReverseSided ) {\r\n\r\n\t\t\tif ( side === THREE.FrontSide ) side = THREE.BackSide;\r\n\t\t\telse if ( side === THREE.BackSide ) side = THREE.FrontSide;\r\n\r\n\t\t}\r\n\r\n\t\tresult.side = side;\r\n\r\n\t\tresult.clipShadows = material.clipShadows;\r\n\t\tresult.clippingPlanes = material.clippingPlanes;\r\n\r\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\r\n\t\tresult.linewidth = material.linewidth;\r\n\r\n\t\tif ( isPointLight && result.uniforms.lightPos !== undefined ) {\r\n\r\n\t\t\tresult.uniforms.lightPos.value.copy( lightPositionWorld );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tfunction projectObject( object, camera, shadowCamera ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tif ( object.layers.test( camera.layers ) && ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) ) {\r\n\r\n\t\t\tif ( object.castShadow && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\r\n\r\n\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\tif ( material.visible === true ) {\r\n\r\n\t\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\t\t\t_renderList.push( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar children = object.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ], camera, shadowCamera );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLState.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLState = function ( gl, extensions, paramThreeToGL ) {\r\n\r\n\tvar _this = this;\r\n\r\n\tthis.buffers = {\r\n\t\tcolor: new THREE.WebGLColorBuffer( gl, this ),\r\n\t\tdepth: new THREE.WebGLDepthBuffer( gl, this ),\r\n\t\tstencil: new THREE.WebGLStencilBuffer( gl, this )\r\n\t};\r\n\r\n\tvar maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\r\n\tvar newAttributes = new Uint8Array( maxVertexAttributes );\r\n\tvar enabledAttributes = new Uint8Array( maxVertexAttributes );\r\n\tvar attributeDivisors = new Uint8Array( maxVertexAttributes );\r\n\r\n\tvar capabilities = {};\r\n\r\n\tvar compressedTextureFormats = null;\r\n\r\n\tvar currentBlending = null;\r\n\tvar currentBlendEquation = null;\r\n\tvar currentBlendSrc = null;\r\n\tvar currentBlendDst = null;\r\n\tvar currentBlendEquationAlpha = null;\r\n\tvar currentBlendSrcAlpha = null;\r\n\tvar currentBlendDstAlpha = null;\r\n\tvar currentPremultipledAlpha = false;\r\n\r\n\tvar currentFlipSided = null;\r\n\tvar currentCullFace = null;\r\n\r\n\tvar currentLineWidth = null;\r\n\r\n\tvar currentPolygonOffsetFactor = null;\r\n\tvar currentPolygonOffsetUnits = null;\r\n\r\n\tvar currentScissorTest = null;\r\n\r\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\r\n\tvar currentTextureSlot = null;\r\n\tvar currentBoundTextures = {};\r\n\r\n\tvar currentScissor = new THREE.Vector4();\r\n\tvar currentViewport = new THREE.Vector4();\r\n\r\n\tfunction createTexture( type, target, count ) {\r\n\r\n\t\tvar data = new Uint8Array( 3 );\r\n\t\tvar texture = gl.createTexture();\r\n\r\n\t\tgl.bindTexture( type, texture );\r\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\r\n\t\tfor ( var i = 0; i < count; i ++ ) {\r\n\r\n\t\t\tgl.texImage2D( target + i, 0, gl.RGB, 1, 1, 0, gl.RGB, gl.UNSIGNED_BYTE, data );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n\tvar emptyTextures = {};\r\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\r\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\r\n\r\n\t//\r\n\r\n\tthis.init = function () {\r\n\r\n\t\tthis.clearColor( 0, 0, 0, 1 );\r\n\t\tthis.clearDepth( 1 );\r\n\t\tthis.clearStencil( 0 );\r\n\r\n\t\tthis.enable( gl.DEPTH_TEST );\r\n\t\tthis.setDepthFunc( THREE.LessEqualDepth );\r\n\r\n\t\tthis.setFlipSided( false );\r\n\t\tthis.setCullFace( THREE.CullFaceBack );\r\n\t\tthis.enable( gl.CULL_FACE );\r\n\r\n\t\tthis.enable( gl.BLEND );\r\n\t\tthis.setBlending( THREE.NormalBlending );\r\n\r\n\t};\r\n\r\n\tthis.initAttributes = function () {\r\n\r\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\r\n\r\n\t\t\tnewAttributes[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enableAttribute = function ( attribute ) {\r\n\r\n\t\tnewAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\tenabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( attributeDivisors[ attribute ] !== 0 ) {\r\n\r\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t\textension.vertexAttribDivisorANGLE( attribute, 0 );\r\n\t\t\tattributeDivisors[ attribute ] = 0;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enableAttributeAndDivisor = function ( attribute, meshPerAttribute, extension ) {\r\n\r\n\t\tnewAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\tenabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\r\n\r\n\t\t\textension.vertexAttribDivisorANGLE( attribute, meshPerAttribute );\r\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.disableUnusedAttributes = function () {\r\n\r\n\t\tfor ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enable = function ( id ) {\r\n\r\n\t\tif ( capabilities[ id ] !== true ) {\r\n\r\n\t\t\tgl.enable( id );\r\n\t\t\tcapabilities[ id ] = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.disable = function ( id ) {\r\n\r\n\t\tif ( capabilities[ id ] !== false ) {\r\n\r\n\t\t\tgl.disable( id );\r\n\t\t\tcapabilities[ id ] = false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getCompressedTextureFormats = function () {\r\n\r\n\t\tif ( compressedTextureFormats === null ) {\r\n\r\n\t\t\tcompressedTextureFormats = [];\r\n\r\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\r\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ||\r\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_etc1' ) ) {\r\n\r\n\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\r\n\r\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\r\n\r\n\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn compressedTextureFormats;\r\n\r\n\t};\r\n\r\n\tthis.setBlending = function ( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\r\n\r\n\t\tif ( blending !== THREE.NoBlending ) {\r\n\r\n\t\t\tthis.enable( gl.BLEND );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.BLEND );\r\n\t\t\tcurrentBlending = blending; // no blending, that is\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\r\n\r\n\t\t\tif ( blending === THREE.AdditiveBlending ) {\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE, gl.ONE, gl.ONE );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( blending === THREE.SubtractiveBlending ) {\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( blending === THREE.MultiplyBlending ) {\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( premultipliedAlpha ) {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentBlending = blending;\r\n\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending === THREE.CustomBlending ) {\r\n\r\n\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\r\n\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\r\n\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\r\n\r\n\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\r\n\r\n\t\t\t\tgl.blendEquationSeparate( paramThreeToGL( blendEquation ), paramThreeToGL( blendEquationAlpha ) );\r\n\r\n\t\t\t\tcurrentBlendEquation = blendEquation;\r\n\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\r\n\r\n\t\t\t\tgl.blendFuncSeparate( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ), paramThreeToGL( blendSrcAlpha ), paramThreeToGL( blendDstAlpha ) );\r\n\r\n\t\t\t\tcurrentBlendSrc = blendSrc;\r\n\t\t\t\tcurrentBlendDst = blendDst;\r\n\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\r\n\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcurrentBlendEquation = null;\r\n\t\t\tcurrentBlendSrc = null;\r\n\t\t\tcurrentBlendDst = null;\r\n\t\t\tcurrentBlendEquationAlpha = null;\r\n\t\t\tcurrentBlendSrcAlpha = null;\r\n\t\t\tcurrentBlendDstAlpha = null;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// TODO Deprecate\r\n\r\n\tthis.setColorWrite = function ( colorWrite ) {\r\n\r\n\t\tthis.buffers.color.setMask( colorWrite );\r\n\r\n\t};\r\n\r\n\tthis.setDepthTest = function ( depthTest ) {\r\n\r\n\t\tthis.buffers.depth.setTest( depthTest );\r\n\r\n\t};\r\n\r\n\tthis.setDepthWrite = function ( depthWrite ) {\r\n\r\n\t\tthis.buffers.depth.setMask( depthWrite );\r\n\r\n\t};\r\n\r\n\tthis.setDepthFunc = function ( depthFunc ) {\r\n\r\n\t\tthis.buffers.depth.setFunc( depthFunc );\r\n\r\n\t};\r\n\r\n\tthis.setStencilTest = function ( stencilTest ) {\r\n\r\n\t\tthis.buffers.stencil.setTest( stencilTest );\r\n\r\n\t};\r\n\r\n\tthis.setStencilWrite = function ( stencilWrite ) {\r\n\r\n\t\tthis.buffers.stencil.setMask( stencilWrite );\r\n\r\n\t};\r\n\r\n\tthis.setStencilFunc = function ( stencilFunc, stencilRef, stencilMask ) {\r\n\r\n\t\tthis.buffers.stencil.setFunc( stencilFunc, stencilRef, stencilMask );\r\n\r\n\t};\r\n\r\n\tthis.setStencilOp = function ( stencilFail, stencilZFail, stencilZPass ) {\r\n\r\n\t\tthis.buffers.stencil.setOp( stencilFail, stencilZFail, stencilZPass );\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.setFlipSided = function ( flipSided ) {\r\n\r\n\t\tif ( currentFlipSided !== flipSided ) {\r\n\r\n\t\t\tif ( flipSided ) {\r\n\r\n\t\t\t\tgl.frontFace( gl.CW );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.frontFace( gl.CCW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentFlipSided = flipSided;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setCullFace = function ( cullFace ) {\r\n\r\n\t\tif ( cullFace !== THREE.CullFaceNone ) {\r\n\r\n\t\t\tthis.enable( gl.CULL_FACE );\r\n\r\n\t\t\tif ( cullFace !== currentCullFace ) {\r\n\r\n\t\t\t\tif ( cullFace === THREE.CullFaceBack ) {\r\n\r\n\t\t\t\t\tgl.cullFace( gl.BACK );\r\n\r\n\t\t\t\t} else if ( cullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t\t\tgl.cullFace( gl.FRONT );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.CULL_FACE );\r\n\r\n\t\t}\r\n\r\n\t\tcurrentCullFace = cullFace;\r\n\r\n\t};\r\n\r\n\tthis.setLineWidth = function ( width ) {\r\n\r\n\t\tif ( width !== currentLineWidth ) {\r\n\r\n\t\t\tgl.lineWidth( width );\r\n\r\n\t\t\tcurrentLineWidth = width;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setPolygonOffset = function ( polygonOffset, factor, units ) {\r\n\r\n\t\tif ( polygonOffset ) {\r\n\r\n\t\t\tthis.enable( gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\r\n\r\n\t\t\t\tgl.polygonOffset( factor, units );\r\n\r\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\r\n\t\t\t\tcurrentPolygonOffsetUnits = units;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getScissorTest = function () {\r\n\r\n\t\treturn currentScissorTest;\r\n\r\n\t};\r\n\r\n\tthis.setScissorTest = function ( scissorTest ) {\r\n\r\n\t\tcurrentScissorTest = scissorTest;\r\n\r\n\t\tif ( scissorTest ) {\r\n\r\n\t\t\tthis.enable( gl.SCISSOR_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.SCISSOR_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// texture\r\n\r\n\tthis.activeTexture = function ( webglSlot ) {\r\n\r\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\r\n\r\n\t\tif ( currentTextureSlot !== webglSlot ) {\r\n\r\n\t\t\tgl.activeTexture( webglSlot );\r\n\t\t\tcurrentTextureSlot = webglSlot;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.bindTexture = function ( webglType, webglTexture ) {\r\n\r\n\t\tif ( currentTextureSlot === null ) {\r\n\r\n\t\t\t_this.activeTexture();\r\n\r\n\t\t}\r\n\r\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\r\n\t\tif ( boundTexture === undefined ) {\r\n\r\n\t\t\tboundTexture = { type: undefined, texture: undefined };\r\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\r\n\r\n\t\t}\r\n\r\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\r\n\r\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\r\n\r\n\t\t\tboundTexture.type = webglType;\r\n\t\t\tboundTexture.texture = webglTexture;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.compressedTexImage2D = function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( error );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.texImage2D = function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.texImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( error );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// TODO Deprecate\r\n\r\n\tthis.clearColor = function ( r, g, b, a ) {\r\n\r\n\t\tthis.buffers.color.setClear( r, g, b, a );\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function ( depth ) {\r\n\r\n\t\tthis.buffers.depth.setClear( depth );\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function ( stencil ) {\r\n\r\n\t\tthis.buffers.stencil.setClear( stencil );\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.scissor = function ( scissor ) {\r\n\r\n\t\tif ( currentScissor.equals( scissor ) === false ) {\r\n\r\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\r\n\t\t\tcurrentScissor.copy( scissor );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.viewport = function ( viewport ) {\r\n\r\n\t\tif ( currentViewport.equals( viewport ) === false ) {\r\n\r\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\r\n\t\t\tcurrentViewport.copy( viewport );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcapabilities = {};\r\n\r\n\t\tcompressedTextureFormats = null;\r\n\r\n\t\tcurrentTextureSlot = null;\r\n\t\tcurrentBoundTextures = {};\r\n\r\n\t\tcurrentBlending = null;\r\n\r\n\t\tcurrentFlipSided = null;\r\n\t\tcurrentCullFace = null;\r\n\r\n\t\tthis.buffers.color.reset();\r\n\t\tthis.buffers.depth.reset();\r\n\t\tthis.buffers.stencil.reset();\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.WebGLColorBuffer = function ( gl, state ) {\r\n\r\n\tvar locked = false;\r\n\r\n\tvar color = new THREE.Vector4();\r\n\tvar currentColorMask = null;\r\n\tvar currentColorClear = new THREE.Vector4();\r\n\r\n\tthis.setMask = function ( colorMask ) {\r\n\r\n\t\tif ( currentColorMask !== colorMask && ! locked ) {\r\n\r\n\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\r\n\t\t\tcurrentColorMask = colorMask;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setLocked = function ( lock ) {\r\n\r\n\t\tlocked = lock;\r\n\r\n\t};\r\n\r\n\tthis.setClear = function ( r, g, b, a ) {\r\n\r\n\t\tcolor.set( r, g, b, a );\r\n\r\n\t\tif ( currentColorClear.equals( color ) === false ) {\r\n\r\n\t\t\tgl.clearColor( r, g, b, a );\r\n\t\t\tcurrentColorClear.copy( color );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tlocked = false;\r\n\r\n\t\tcurrentColorMask = null;\r\n\t\tcurrentColorClear = new THREE.Vector4();\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.WebGLDepthBuffer = function( gl, state ) {\r\n\r\n\tvar locked = false;\r\n\r\n\tvar currentDepthMask = null;\r\n\tvar currentDepthFunc = null;\r\n\tvar currentDepthClear = null;\r\n\r\n\tthis.setTest = function ( depthTest ) {\r\n\r\n\t\tif ( depthTest ) {\r\n\r\n\t\t\tstate.enable( gl.DEPTH_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.disable( gl.DEPTH_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setMask = function( depthMask ){\r\n\r\n\t\tif ( currentDepthMask !== depthMask && ! locked ) {\r\n\r\n\t\t\tgl.depthMask( depthMask );\r\n\t\t\tcurrentDepthMask = depthMask;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setFunc = function ( depthFunc ) {\r\n\r\n\t\tif ( currentDepthFunc !== depthFunc ) {\r\n\r\n\t\t\tif ( depthFunc ) {\r\n\r\n\t\t\t\tswitch ( depthFunc ) {\r\n\r\n\t\t\t\t\tcase THREE.NeverDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.AlwaysDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.LessDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LESS );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.LessEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.EqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.GreaterEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.GreaterDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.NotEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentDepthFunc = depthFunc;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setLocked = function ( lock ) {\r\n\r\n\t\tlocked = lock;\r\n\r\n\t};\r\n\r\n\tthis.setClear = function ( depth ) {\r\n\r\n\t\tif ( currentDepthClear !== depth ) {\r\n\r\n\t\t\tgl.clearDepth( depth );\r\n\t\t\tcurrentDepthClear = depth;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tlocked = false;\r\n\r\n\t\tcurrentDepthMask = null;\r\n\t\tcurrentDepthFunc = null;\r\n\t\tcurrentDepthClear = null;\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.WebGLStencilBuffer = function ( gl, state ) {\r\n\r\n\tvar locked = false;\r\n\r\n\tvar currentStencilMask = null;\r\n\tvar currentStencilFunc = null;\r\n\tvar currentStencilRef = null;\r\n\tvar currentStencilFuncMask = null;\r\n\tvar currentStencilFail  = null;\r\n\tvar currentStencilZFail = null;\r\n\tvar currentStencilZPass = null;\r\n\tvar currentStencilClear = null;\r\n\r\n\tthis.setTest = function ( stencilTest ) {\r\n\r\n\t\tif ( stencilTest ) {\r\n\r\n\t\t\tstate.enable( gl.STENCIL_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.disable( gl.STENCIL_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setMask = function ( stencilMask ) {\r\n\r\n\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\r\n\r\n\t\t\tgl.stencilMask( stencilMask );\r\n\t\t\tcurrentStencilMask = stencilMask;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setFunc = function ( stencilFunc, stencilRef, stencilMask ) {\r\n\r\n\t\tif ( currentStencilFunc !== stencilFunc ||\r\n\t\t     currentStencilRef \t!== stencilRef \t||\r\n\t\t     currentStencilFuncMask !== stencilMask ) {\r\n\r\n\t\t\tgl.stencilFunc( stencilFunc,  stencilRef, stencilMask );\r\n\r\n\t\t\tcurrentStencilFunc = stencilFunc;\r\n\t\t\tcurrentStencilRef  = stencilRef;\r\n\t\t\tcurrentStencilFuncMask = stencilMask;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setOp\t = function ( stencilFail, stencilZFail, stencilZPass ) {\r\n\r\n\t\tif ( currentStencilFail\t !== stencilFail \t||\r\n\t\t     currentStencilZFail !== stencilZFail ||\r\n\t\t     currentStencilZPass !== stencilZPass ) {\r\n\r\n\t\t\tgl.stencilOp( stencilFail,  stencilZFail, stencilZPass );\r\n\r\n\t\t\tcurrentStencilFail  = stencilFail;\r\n\t\t\tcurrentStencilZFail = stencilZFail;\r\n\t\t\tcurrentStencilZPass = stencilZPass;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setLocked = function ( lock ) {\r\n\r\n\t\tlocked = lock;\r\n\r\n\t};\r\n\r\n\tthis.setClear = function ( stencil ) {\r\n\r\n\t\tif ( currentStencilClear !== stencil ) {\r\n\r\n\t\t\tgl.clearStencil( stencil );\r\n\t\t\tcurrentStencilClear = stencil;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tlocked = false;\r\n\r\n\t\tcurrentStencilMask = null;\r\n\t\tcurrentStencilFunc = null;\r\n\t\tcurrentStencilRef = null;\r\n\t\tcurrentStencilFuncMask = null;\r\n\t\tcurrentStencilFail = null;\r\n\t\tcurrentStencilZFail = null;\r\n\t\tcurrentStencilZPass = null;\r\n\t\tcurrentStencilClear = null;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLUniforms.js\r\n\r\n/**\r\n *\r\n * Uniforms of a program.\r\n * Those form a tree structure with a special top-level container for the root,\r\n * which you get by calling 'new WebGLUniforms( gl, program, renderer )'.\r\n *\r\n *\r\n * Properties of inner nodes including the top-level container:\r\n *\r\n * .seq - array of nested uniforms\r\n * .map - nested uniforms by name\r\n *\r\n *\r\n * Methods of all nodes except the top-level container:\r\n *\r\n * .setValue( gl, value, [renderer] )\r\n *\r\n * \t\tuploads a uniform value(s)\r\n *  \tthe 'renderer' parameter is needed for sampler uniforms\r\n *\r\n *\r\n * Static methods of the top-level container (renderer factorizations):\r\n *\r\n * .upload( gl, seq, values, renderer )\r\n *\r\n * \t\tsets uniforms in 'seq' to 'values[id].value'\r\n *\r\n * .seqWithValue( seq, values ) : filteredSeq\r\n *\r\n * \t\tfilters 'seq' entries with corresponding entry in values\r\n *\r\n * .splitDynamic( seq, values ) : filteredSeq\r\n *\r\n * \t\tfilters 'seq' entries with dynamic entry and removes them from 'seq'\r\n *\r\n *\r\n * Methods of the top-level container (renderer factorizations):\r\n *\r\n * .setValue( gl, name, value )\r\n *\r\n * \t\tsets uniform with  name 'name' to 'value'\r\n *\r\n * .set( gl, obj, prop )\r\n *\r\n * \t\tsets uniform from object and property with same name than uniform\r\n *\r\n * .setOptional( gl, obj, prop )\r\n *\r\n * \t\tlike .set for an optional property of the object\r\n *\r\n *\r\n * @author tschw\r\n *\r\n */\r\n\r\nTHREE.WebGLUniforms = ( function() { // scope\r\n\r\n\t// --- Base for inner nodes (including the root) ---\r\n\r\n\tvar UniformContainer = function() {\r\n\r\n\t\t\tthis.seq = [];\r\n\t\t\tthis.map = {};\r\n\r\n\t\t},\r\n\r\n\t// --- Utilities ---\r\n\r\n\t// Array Caches (provide typed arrays for temporary by size)\r\n\r\n\t\tarrayCacheF32 = [],\r\n\t\tarrayCacheI32 = [],\r\n\r\n\t\tuncacheTemporaryArrays = function() {\r\n\r\n\t\t\tarrayCacheF32.length = 0;\r\n\t\t\tarrayCacheI32.length = 0;\r\n\r\n\t\t},\r\n\r\n\t// Flattening for arrays of vectors and matrices\r\n\r\n\t\tflatten = function( array, nBlocks, blockSize ) {\r\n\r\n\t\t\tvar firstElem = array[ 0 ];\r\n\r\n\t\t\tif ( firstElem <= 0 || firstElem > 0 ) return array;\r\n\t\t\t// unoptimized: ! isNaN( firstElem )\r\n\t\t\t// see http://jacksondunstan.com/articles/983\r\n\r\n\t\t\tvar n = nBlocks * blockSize,\r\n\t\t\t\tr = arrayCacheF32[ n ];\r\n\r\n\t\t\tif ( r === undefined ) {\r\n\r\n\t\t\t\tr = new Float32Array( n );\r\n\t\t\t\tarrayCacheF32[ n ] = r;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( nBlocks !== 0 ) {\r\n\r\n\t\t\t\tfirstElem.toArray( r, 0 );\r\n\r\n\t\t\t\tfor ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\r\n\r\n\t\t\t\t\toffset += blockSize;\r\n\t\t\t\t\tarray[ i ].toArray( r, offset );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn r;\r\n\r\n\t\t},\r\n\r\n\t// Texture unit allocation\r\n\r\n\t\tallocTexUnits = function( renderer, n ) {\r\n\r\n\t\t\tvar r = arrayCacheI32[ n ];\r\n\r\n\t\t\tif ( r === undefined ) {\r\n\r\n\t\t\t\tr = new Int32Array( n );\r\n\t\t\t\tarrayCacheI32[ n ] = r;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0; i !== n; ++ i )\r\n\t\t\t\tr[ i ] = renderer.allocTextureUnit();\r\n\r\n\t\t\treturn r;\r\n\r\n\t\t},\r\n\r\n\t// --- Setters ---\r\n\r\n\t// Note: Defining these methods externally, because they come in a bunch\r\n\t// and this way their names minify.\r\n\r\n\t\t// Single scalar\r\n\r\n\t\tsetValue1f = function( gl, v ) { gl.uniform1f( this.addr, v ); },\r\n\t\tsetValue1i = function( gl, v ) { gl.uniform1i( this.addr, v ); },\r\n\r\n\t\t// Single float vector (from flat array or THREE.VectorN)\r\n\r\n\t\tsetValue2fv = function( gl, v ) {\r\n\r\n\t\t\tif ( v.x === undefined ) gl.uniform2fv( this.addr, v );\r\n\t\t\telse gl.uniform2f( this.addr, v.x, v.y );\r\n\r\n\t\t},\r\n\r\n\t\tsetValue3fv = function( gl, v ) {\r\n\r\n\t\t\tif ( v.x !== undefined )\r\n\t\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\r\n\t\t\telse if ( v.r !== undefined )\r\n\t\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\r\n\t\t\telse\r\n\t\t\t\tgl.uniform3fv( this.addr, v );\r\n\r\n\t\t},\r\n\r\n\t\tsetValue4fv = function( gl, v ) {\r\n\r\n\t\t\tif ( v.x === undefined ) gl.uniform4fv( this.addr, v );\r\n\t\t\telse gl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\r\n\r\n\t\t},\r\n\r\n\t\t// Single matrix (from flat array or MatrixN)\r\n\r\n\t\tsetValue2fm = function( gl, v ) {\r\n\r\n\t\t\tgl.uniformMatrix2fv( this.addr, false, v.elements || v );\r\n\r\n\t\t},\r\n\r\n\t\tsetValue3fm = function( gl, v ) {\r\n\r\n\t\t\tgl.uniformMatrix3fv( this.addr, false, v.elements || v );\r\n\r\n\t\t},\r\n\r\n\t\tsetValue4fm = function( gl, v ) {\r\n\r\n\t\t\tgl.uniformMatrix4fv( this.addr, false, v.elements || v );\r\n\r\n\t\t},\r\n\r\n\t\t// Single texture (2D / Cube)\r\n\r\n\t\tsetValueT1 = function( gl, v, renderer ) {\r\n\r\n\t\t\tvar unit = renderer.allocTextureUnit();\r\n\t\t\tgl.uniform1i( this.addr, unit );\r\n\t\t\tif ( v ) renderer.setTexture2D( v, unit );\r\n\r\n\t\t},\r\n\r\n\t\tsetValueT6 = function( gl, v, renderer ) {\r\n\r\n\t\t\tvar unit = renderer.allocTextureUnit();\r\n\t\t\tgl.uniform1i( this.addr, unit );\r\n\t\t\tif ( v ) renderer.setTextureCube( v, unit );\r\n\r\n\t\t},\r\n\r\n\t\t// Integer / Boolean vectors or arrays thereof (always flat arrays)\r\n\r\n\t\tsetValue2iv = function( gl, v ) { gl.uniform2iv( this.addr, v ); },\r\n\t\tsetValue3iv = function( gl, v ) { gl.uniform3iv( this.addr, v ); },\r\n\t\tsetValue4iv = function( gl, v ) { gl.uniform4iv( this.addr, v ); },\r\n\r\n\t\t// Helper to pick the right setter for the singular case\r\n\r\n\t\tgetSingularSetter = function( type ) {\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase 0x1406: return setValue1f; // FLOAT\r\n\t\t\t\tcase 0x8b50: return setValue2fv; // _VEC2\r\n\t\t\t\tcase 0x8b51: return setValue3fv; // _VEC3\r\n\t\t\t\tcase 0x8b52: return setValue4fv; // _VEC4\r\n\r\n\t\t\t\tcase 0x8b5a: return setValue2fm; // _MAT2\r\n\t\t\t\tcase 0x8b5b: return setValue3fm; // _MAT3\r\n\t\t\t\tcase 0x8b5c: return setValue4fm; // _MAT4\r\n\r\n\t\t\t\tcase 0x8b5e: return setValueT1; // SAMPLER_2D\r\n\t\t\t\tcase 0x8b60: return setValueT6; // SAMPLER_CUBE\r\n\r\n\t\t\t\tcase 0x1404: case 0x8b56: return setValue1i; // INT, BOOL\r\n\t\t\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\r\n\t\t\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\r\n\t\t\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\t// Array of scalars\r\n\r\n\t\tsetValue1fv = function( gl, v ) { gl.uniform1fv( this.addr, v ); },\r\n\t\tsetValue1iv = function( gl, v ) { gl.uniform1iv( this.addr, v ); },\r\n\r\n\t\t// Array of vectors (flat or from THREE classes)\r\n\r\n\t\tsetValueV2a = function( gl, v ) {\r\n\r\n\t\t\tgl.uniform2fv( this.addr, flatten( v, this.size, 2 ) );\r\n\r\n\t\t},\r\n\r\n\t\tsetValueV3a = function( gl, v ) {\r\n\r\n\t\t\tgl.uniform3fv( this.addr, flatten( v, this.size, 3 ) );\r\n\r\n\t\t},\r\n\r\n\t\tsetValueV4a = function( gl, v ) {\r\n\r\n\t\t\tgl.uniform4fv( this.addr, flatten( v, this.size, 4 ) );\r\n\r\n\t\t},\r\n\r\n\t\t// Array of matrices (flat or from THREE clases)\r\n\r\n\t\tsetValueM2a = function( gl, v ) {\r\n\r\n\t\t\tgl.uniformMatrix2fv( this.addr, false, flatten( v, this.size, 4 ) );\r\n\r\n\t\t},\r\n\r\n\t\tsetValueM3a = function( gl, v ) {\r\n\r\n\t\t\tgl.uniformMatrix3fv( this.addr, false, flatten( v, this.size, 9 ) );\r\n\r\n\t\t},\r\n\r\n\t\tsetValueM4a = function( gl, v ) {\r\n\r\n\t\t\tgl.uniformMatrix4fv( this.addr, false, flatten( v, this.size, 16 ) );\r\n\r\n\t\t},\r\n\r\n\t\t// Array of textures (2D / Cube)\r\n\r\n\t\tsetValueT1a = function( gl, v, renderer ) {\r\n\r\n\t\t\tvar n = v.length,\r\n\t\t\t\tunits = allocTexUnits( renderer, n );\r\n\r\n\t\t\tgl.uniform1iv( this.addr, units );\r\n\r\n\t\t\tfor ( var i = 0; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar tex = v[ i ];\r\n\t\t\t\tif ( tex ) renderer.setTexture2D( tex, units[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsetValueT6a = function( gl, v, renderer ) {\r\n\r\n\t\t\tvar n = v.length,\r\n\t\t\t\tunits = allocTexUnits( renderer, n );\r\n\r\n\t\t\tgl.uniform1iv( this.addr, units );\r\n\r\n\t\t\tfor ( var i = 0; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar tex = v[ i ];\r\n\t\t\t\tif ( tex ) renderer.setTextureCube( tex, units[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\r\n\t\t// Helper to pick the right setter for a pure (bottom-level) array\r\n\r\n\t\tgetPureArraySetter = function( type ) {\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase 0x1406: return setValue1fv; // FLOAT\r\n\t\t\t\tcase 0x8b50: return setValueV2a; // _VEC2\r\n\t\t\t\tcase 0x8b51: return setValueV3a; // _VEC3\r\n\t\t\t\tcase 0x8b52: return setValueV4a; // _VEC4\r\n\r\n\t\t\t\tcase 0x8b5a: return setValueM2a; // _MAT2\r\n\t\t\t\tcase 0x8b5b: return setValueM3a; // _MAT3\r\n\t\t\t\tcase 0x8b5c: return setValueM4a; // _MAT4\r\n\r\n\t\t\t\tcase 0x8b5e: return setValueT1a; // SAMPLER_2D\r\n\t\t\t\tcase 0x8b60: return setValueT6a; // SAMPLER_CUBE\r\n\r\n\t\t\t\tcase 0x1404: case 0x8b56: return setValue1iv; // INT, BOOL\r\n\t\t\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\r\n\t\t\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\r\n\t\t\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t// --- Uniform Classes ---\r\n\r\n\t\tSingleUniform = function SingleUniform( id, activeInfo, addr ) {\r\n\r\n\t\t\tthis.id = id;\r\n\t\t\tthis.addr = addr;\r\n\t\t\tthis.setValue = getSingularSetter( activeInfo.type );\r\n\r\n\t\t\t// this.path = activeInfo.name; // DEBUG\r\n\r\n\t\t},\r\n\r\n\t\tPureArrayUniform = function( id, activeInfo, addr ) {\r\n\r\n\t\t\tthis.id = id;\r\n\t\t\tthis.addr = addr;\r\n\t\t\tthis.size = activeInfo.size;\r\n\t\t\tthis.setValue = getPureArraySetter( activeInfo.type );\r\n\r\n\t\t\t// this.path = activeInfo.name; // DEBUG\r\n\r\n\t\t},\r\n\r\n\t\tStructuredUniform = function( id ) {\r\n\r\n\t\t\tthis.id = id;\r\n\r\n\t\t\tUniformContainer.call( this ); // mix-in\r\n\r\n\t\t};\r\n\r\n\tStructuredUniform.prototype.setValue = function( gl, value ) {\r\n\r\n\t\t// Note: Don't need an extra 'renderer' parameter, since samplers\r\n\t\t// are not allowed in structured uniforms.\r\n\r\n\t\tvar seq = this.seq;\r\n\r\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar u = seq[ i ];\r\n\t\t\tu.setValue( gl, value[ u.id ] );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// --- Top-level ---\r\n\r\n\t// Parser - builds up the property tree from the path strings\r\n\r\n\tvar RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g,\r\n\t\t// extracts\r\n\t\t// \t- the identifier (member name or array index)\r\n\t\t//  - followed by an optional right bracket (found when array index)\r\n\t\t//  - followed by an optional left bracket or dot (type of subscript)\r\n\t\t//\r\n\t\t// Note: These portions can be read in a non-overlapping fashion and\r\n\t\t// allow straightforward parsing of the hierarchy that WebGL encodes\r\n\t\t// in the uniform names.\r\n\r\n\t\taddUniform = function( container, uniformObject ) {\r\n\r\n\t\t\tcontainer.seq.push( uniformObject );\r\n\t\t\tcontainer.map[ uniformObject.id ] = uniformObject;\r\n\r\n\t\t},\r\n\r\n\t\tparseUniform = function( activeInfo, addr, container ) {\r\n\r\n\t\t\tvar path = activeInfo.name,\r\n\t\t\t\tpathLength = path.length;\r\n\r\n\t\t\t// reset RegExp object, because of the early exit of a previous run\r\n\t\t\tRePathPart.lastIndex = 0;\r\n\r\n\t\t\tfor (; ;) {\r\n\r\n\t\t\t\tvar match = RePathPart.exec( path ),\r\n\t\t\t\t\tmatchEnd = RePathPart.lastIndex,\r\n\r\n\t\t\t\t\tid = match[ 1 ],\r\n\t\t\t\t\tidIsIndex = match[ 2 ] === ']',\r\n\t\t\t\t\tsubscript = match[ 3 ];\r\n\r\n\t\t\t\tif ( idIsIndex ) id = id | 0; // convert to integer\r\n\r\n\t\t\t\tif ( subscript === undefined ||\r\n\t\t\t\t\t\tsubscript === '[' && matchEnd + 2 === pathLength ) {\r\n\t\t\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\r\n\r\n\t\t\t\t\taddUniform( container, subscript === undefined ?\r\n\t\t\t\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\r\n\t\t\t\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// step into inner node / create it in case it doesn't exist\r\n\r\n\t\t\t\t\tvar map = container.map,\r\n\t\t\t\t\t\tnext = map[ id ];\r\n\r\n\t\t\t\t\tif ( next === undefined ) {\r\n\r\n\t\t\t\t\t\tnext = new StructuredUniform( id );\r\n\t\t\t\t\t\taddUniform( container, next );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcontainer = next;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t// Root Container\r\n\r\n\t\tWebGLUniforms = function WebGLUniforms( gl, program, renderer ) {\r\n\r\n\t\t\tUniformContainer.call( this );\r\n\r\n\t\t\tthis.renderer = renderer;\r\n\r\n\t\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\r\n\r\n\t\t\tfor ( var i = 0; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar info = gl.getActiveUniform( program, i ),\r\n\t\t\t\t\tpath = info.name,\r\n\t\t\t\t\taddr = gl.getUniformLocation( program, path );\r\n\r\n\t\t\t\tparseUniform( info, addr, this );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\tWebGLUniforms.prototype.setValue = function( gl, name, value ) {\r\n\r\n\t\tvar u = this.map[ name ];\r\n\r\n\t\tif ( u !== undefined ) u.setValue( gl, value, this.renderer );\r\n\r\n\t};\r\n\r\n\tWebGLUniforms.prototype.set = function( gl, object, name ) {\r\n\r\n\t\tvar u = this.map[ name ];\r\n\r\n\t\tif ( u !== undefined ) u.setValue( gl, object[ name ], this.renderer );\r\n\r\n\t};\r\n\r\n\tWebGLUniforms.prototype.setOptional = function( gl, object, name ) {\r\n\r\n\t\tvar v = object[ name ];\r\n\r\n\t\tif ( v !== undefined ) this.setValue( gl, name, v );\r\n\r\n\t};\r\n\r\n\r\n\t// Static interface\r\n\r\n\tWebGLUniforms.upload = function( gl, seq, values, renderer ) {\r\n\r\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar u = seq[ i ],\r\n\t\t\t\tv = values[ u.id ];\r\n\r\n\t\t\tif ( v.needsUpdate !== false ) {\r\n\t\t\t\t// note: always updating when .needsUpdate is undefined\r\n\r\n\t\t\t\tu.setValue( gl, v.value, renderer );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tWebGLUniforms.seqWithValue = function( seq, values ) {\r\n\r\n\t\tvar r = [];\r\n\r\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar u = seq[ i ];\r\n\t\t\tif ( u.id in values ) r.push( u );\r\n\r\n\t\t}\r\n\r\n\t\treturn r;\r\n\r\n\t};\r\n\r\n\tWebGLUniforms.splitDynamic = function( seq, values ) {\r\n\r\n\t\tvar r = null,\r\n\t\t\tn = seq.length,\r\n\t\t\tw = 0;\r\n\r\n\t\tfor ( var i = 0; i !== n; ++ i ) {\r\n\r\n\t\t\tvar u = seq[ i ],\r\n\t\t\t\tv = values[ u.id ];\r\n\r\n\t\t\tif ( v && v.dynamic === true ) {\r\n\r\n\t\t\t\tif ( r === null ) r = [];\r\n\t\t\t\tr.push( u );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// in-place compact 'seq', removing the matches\r\n\t\t\t\tif ( w < i ) seq[ w ] = u;\r\n\t\t\t\t++ w;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( w < n ) seq.length = w;\r\n\r\n\t\treturn r;\r\n\r\n\t};\r\n\r\n\tWebGLUniforms.evalDynamic = function( seq, values, object, camera ) {\r\n\r\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n\t\t\tvar v = values[ seq[ i ].id ],\r\n\t\t\t\tf = v.onUpdateCallback;\r\n\r\n\t\t\tif ( f !== undefined ) f.call( v, object, camera );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn WebGLUniforms;\r\n\r\n} )();\r\n\r\n\r\n// File:src/renderers/webgl/plugins/LensFlarePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlarePlugin = function ( renderer, flares ) {\r\n\r\n\tvar gl = renderer.context;\r\n\tvar state = renderer.state;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar shader, program, attributes, uniforms;\r\n\r\n\tvar tempTexture, occlusionTexture;\r\n\r\n\tfunction init() {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t- 1, - 1,  0, 0,\r\n\t\t\t 1, - 1,  1, 0,\r\n\t\t\t 1,  1,  1, 1,\r\n\t\t\t- 1,  1,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\t// buffers\r\n\r\n\t\tvertexBuffer     = gl.createBuffer();\r\n\t\telementBuffer    = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\t// textures\r\n\r\n\t\ttempTexture      = gl.createTexture();\r\n\t\tocclusionTexture = gl.createTexture();\r\n\r\n\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\tshader = {\r\n\r\n\t\t\tvertexShader: [\r\n\r\n\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\"uniform float rotation;\",\r\n\r\n\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\r\n\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\"attribute vec2 uv;\",\r\n\r\n\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\"vUV = uv;\",\r\n\r\n\t\t\t\t\t\"vec2 pos = position;\",\r\n\r\n\t\t\t\t\t\"if ( renderType == 2 ) {\",\r\n\r\n\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\r\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\r\n\r\n\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\r\n\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\r\n\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\r\n\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\r\n\r\n\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\r\n\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\r\n\t\t\t\t\"}\"\r\n\r\n\t\t\t].join( \"\\n\" ),\r\n\r\n\t\t\tfragmentShader: [\r\n\r\n\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\"uniform vec3 color;\",\r\n\r\n\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t// pink square\r\n\r\n\t\t\t\t\t\"if ( renderType == 0 ) {\",\r\n\r\n\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\r\n\r\n\t\t\t\t\t// restore\r\n\r\n\t\t\t\t\t\"} else if ( renderType == 1 ) {\",\r\n\r\n\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\r\n\t\t\t\t\t// flare\r\n\r\n\t\t\t\t\t\"} else {\",\r\n\r\n\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\r\n\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\r\n\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\"}\"\r\n\r\n\t\t\t].join( \"\\n\" )\r\n\r\n\t\t};\r\n\r\n\t\tprogram = createProgram( shader );\r\n\r\n\t\tattributes = {\r\n\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\r\n\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\r\n\t\t};\r\n\r\n\t\tuniforms = {\r\n\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\r\n\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\r\n\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\r\n\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\r\n\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\r\n\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\r\n\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\r\n\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\r\n\t\t};\r\n\r\n\t}\r\n\r\n\t/*\r\n\t * Render lens flares\r\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\r\n\t *         reads these back and calculates occlusion.\r\n\t */\r\n\r\n\tthis.render = function ( scene, camera, viewport ) {\r\n\r\n\t\tif ( flares.length === 0 ) return;\r\n\r\n\t\tvar tempPosition = new THREE.Vector3();\r\n\r\n\t\tvar invAspect = viewport.w / viewport.z,\r\n\t\t\thalfViewportWidth = viewport.z * 0.5,\r\n\t\t\thalfViewportHeight = viewport.w * 0.5;\r\n\r\n\t\tvar size = 16 / viewport.w,\r\n\t\t\tscale = new THREE.Vector2( size * invAspect, size );\r\n\r\n\t\tvar screenPosition = new THREE.Vector3( 1, 1, 0 ),\r\n\t\t\tscreenPositionPixels = new THREE.Vector2( 1, 1 );\r\n\r\n\t\tvar validArea = new THREE.Box2();\r\n\r\n\t\tvalidArea.min.set( 0, 0 );\r\n\t\tvalidArea.max.set( viewport.z - 16, viewport.w - 16 );\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tstate.initAttributes();\r\n\t\tstate.enableAttribute( attributes.vertex );\r\n\t\tstate.enableAttribute( attributes.uv );\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\t// loop through all lens flares to update their occlusion and positions\r\n\t\t// setup gl and common used attribs/uniforms\r\n\r\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\r\n\t\tgl.uniform1i( uniforms.map, 1 );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tstate.disable( gl.CULL_FACE );\r\n\t\tstate.setDepthWrite( false );\r\n\r\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\r\n\r\n\t\t\tsize = 16 / viewport.w;\r\n\t\t\tscale.set( size * invAspect, size );\r\n\r\n\t\t\t// calc object screen position\r\n\r\n\t\t\tvar flare = flares[ i ];\r\n\r\n\t\t\ttempPosition.set( flare.matrixWorld.elements[ 12 ], flare.matrixWorld.elements[ 13 ], flare.matrixWorld.elements[ 14 ] );\r\n\r\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\r\n\t\t\ttempPosition.applyProjection( camera.projectionMatrix );\r\n\r\n\t\t\t// setup arrays for gl programs\r\n\r\n\t\t\tscreenPosition.copy( tempPosition );\r\n\r\n\t\t\t// horizontal and vertical coordinate of the lower left corner of the pixels to copy\r\n\r\n\t\t\tscreenPositionPixels.x = viewport.x + ( screenPosition.x * halfViewportWidth ) + halfViewportWidth - 8;\r\n\t\t\tscreenPositionPixels.y = viewport.y + ( screenPosition.y * halfViewportHeight ) + halfViewportHeight - 8;\r\n\r\n\t\t\t// screen cull\r\n\r\n\t\t\tif ( validArea.containsPoint( screenPositionPixels ) === true ) {\r\n\r\n\t\t\t\t// save current RGB to temp texture\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, null );\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x, screenPositionPixels.y, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// render pink quad\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\r\n\t\t\t\tstate.disable( gl.BLEND );\r\n\t\t\t\tstate.enable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// copy result to occlusionMap\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x, screenPositionPixels.y, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// restore graphics\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\r\n\t\t\t\tstate.disable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// update object positions\r\n\r\n\t\t\t\tflare.positionScreen.copy( screenPosition );\r\n\r\n\t\t\t\tif ( flare.customUpdateCallback ) {\r\n\r\n\t\t\t\t\tflare.customUpdateCallback( flare );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tflare.updateLensFlares();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// render flares\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\r\n\t\t\t\tstate.enable( gl.BLEND );\r\n\r\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\r\n\r\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\r\n\r\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\r\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\r\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\r\n\r\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewport.w;\r\n\r\n\t\t\t\t\t\tscale.x = size * invAspect;\r\n\t\t\t\t\t\tscale.y = size;\r\n\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\r\n\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\r\n\r\n\t\t\t\t\t\tstate.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\r\n\t\t\t\t\t\trenderer.setTexture2D( sprite.texture, 1 );\r\n\r\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tstate.enable( gl.CULL_FACE );\r\n\t\tstate.enable( gl.DEPTH_TEST );\r\n\t\tstate.setDepthWrite( true );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram ( shader ) {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\r\n\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\r\n\r\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\r\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\r\n\r\n\t\tgl.compileShader( fragmentShader );\r\n\t\tgl.compileShader( vertexShader );\r\n\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\t\tgl.attachShader( program, vertexShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/plugins/SpritePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpritePlugin = function ( renderer, sprites ) {\r\n\r\n\tvar gl = renderer.context;\r\n\tvar state = renderer.state;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar program, attributes, uniforms;\r\n\r\n\tvar texture;\r\n\r\n\t// decompose matrixWorld\r\n\r\n\tvar spritePosition = new THREE.Vector3();\r\n\tvar spriteRotation = new THREE.Quaternion();\r\n\tvar spriteScale = new THREE.Vector3();\r\n\r\n\tfunction init() {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t- 0.5, - 0.5,  0, 0,\r\n\t\t\t  0.5, - 0.5,  1, 0,\r\n\t\t\t  0.5,   0.5,  1, 1,\r\n\t\t\t- 0.5,   0.5,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\tvertexBuffer  = gl.createBuffer();\r\n\t\telementBuffer = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\tprogram = createProgram();\r\n\r\n\t\tattributes = {\r\n\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\r\n\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\r\n\t\t};\r\n\r\n\t\tuniforms = {\r\n\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\r\n\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\r\n\r\n\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\r\n\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\r\n\r\n\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\r\n\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\r\n\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\r\n\r\n\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\r\n\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\r\n\r\n\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\r\n\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\r\n\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\r\n\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\r\n\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\r\n\r\n\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\r\n\t\t};\r\n\r\n\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\tcanvas.width = 8;\r\n\t\tcanvas.height = 8;\r\n\r\n\t\tvar context = canvas.getContext( '2d' );\r\n\t\tcontext.fillStyle = 'white';\r\n\t\tcontext.fillRect( 0, 0, 8, 8 );\r\n\r\n\t\ttexture = new THREE.Texture( canvas );\r\n\t\ttexture.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( sprites.length === 0 ) return;\r\n\r\n\t\t// setup gl\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tstate.initAttributes();\r\n\t\tstate.enableAttribute( attributes.position );\r\n\t\tstate.enableAttribute( attributes.uv );\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\tstate.disable( gl.CULL_FACE );\r\n\t\tstate.enable( gl.BLEND );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\tgl.uniform1i( uniforms.map, 0 );\r\n\r\n\t\tvar oldFogType = 0;\r\n\t\tvar sceneFogType = 0;\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\tif ( fog ) {\r\n\r\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\r\n\r\n\t\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\r\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\r\n\t\t\t\toldFogType = 1;\r\n\t\t\t\tsceneFogType = 1;\r\n\r\n\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\r\n\t\t\t\toldFogType = 2;\r\n\t\t\t\tsceneFogType = 2;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\r\n\t\t\toldFogType = 0;\r\n\t\t\tsceneFogType = 0;\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// update positions and sort\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\r\n\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\r\n\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\r\n\r\n\t\t}\r\n\r\n\t\tsprites.sort( painterSortStable );\r\n\r\n\t\t// render all sprites\r\n\r\n\t\tvar scale = [];\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\t\t\tvar material = sprite.material;\r\n\r\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\r\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\r\n\r\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\r\n\r\n\t\t\tscale[ 0 ] = spriteScale.x;\r\n\t\t\tscale[ 1 ] = spriteScale.y;\r\n\r\n\t\t\tvar fogType = 0;\r\n\r\n\t\t\tif ( scene.fog && material.fog ) {\r\n\r\n\t\t\t\tfogType = sceneFogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( oldFogType !== fogType ) {\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\r\n\t\t\t\toldFogType = fogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.map !== null ) {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\r\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\r\n\r\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\r\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\r\n\r\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\t\t\tstate.setDepthTest( material.depthTest );\r\n\t\t\tstate.setDepthWrite( material.depthWrite );\r\n\r\n\t\t\tif ( material.map ) {\r\n\r\n\t\t\t\trenderer.setTexture2D( material.map, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setTexture2D( texture, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tstate.enable( gl.CULL_FACE );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram () {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\r\n\t\tgl.shaderSource( vertexShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t'uniform float rotation;',\r\n\t\t\t'uniform vec2 scale;',\r\n\t\t\t'uniform vec2 uvOffset;',\r\n\t\t\t'uniform vec2 uvScale;',\r\n\r\n\t\t\t'attribute vec2 position;',\r\n\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vUV = uvOffset + uv * uvScale;',\r\n\r\n\t\t\t\t'vec2 alignedPosition = position * scale;',\r\n\r\n\t\t\t\t'vec2 rotatedPosition;',\r\n\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\r\n\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\r\n\r\n\t\t\t\t'vec4 finalPosition;',\r\n\r\n\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\r\n\t\t\t\t'finalPosition.xy += rotatedPosition;',\r\n\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\r\n\r\n\t\t\t\t'gl_Position = finalPosition;',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.shaderSource( fragmentShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform vec3 color;',\r\n\t\t\t'uniform sampler2D map;',\r\n\t\t\t'uniform float opacity;',\r\n\r\n\t\t\t'uniform int fogType;',\r\n\t\t\t'uniform vec3 fogColor;',\r\n\t\t\t'uniform float fogDensity;',\r\n\t\t\t'uniform float fogNear;',\r\n\t\t\t'uniform float fogFar;',\r\n\t\t\t'uniform float alphaTest;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vec4 texture = texture2D( map, vUV );',\r\n\r\n\t\t\t\t'if ( texture.a < alphaTest ) discard;',\r\n\r\n\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\r\n\r\n\t\t\t\t'if ( fogType > 0 ) {',\r\n\r\n\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\r\n\t\t\t\t\t'float fogFactor = 0.0;',\r\n\r\n\t\t\t\t\t'if ( fogType == 1 ) {',\r\n\r\n\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\r\n\r\n\t\t\t\t\t'} else {',\r\n\r\n\t\t\t\t\t\t'const float LOG2 = 1.442695;',\r\n\t\t\t\t\t\t'fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\r\n\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\r\n\r\n\t\t\t\t\t'}',\r\n\r\n\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\r\n\r\n\t\t\t\t'}',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.compileShader( vertexShader );\r\n\t\tgl.compileShader( fragmentShader );\r\n\r\n\t\tgl.attachShader( program, vertexShader );\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\t\t\r\n\t\tif ( a.renderOrder !== b.renderOrder ) {\r\n\r\n\t\t\treturn a.renderOrder - b.renderOrder;\r\n\r\n\t\t} else if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn b.id - a.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/Three.Legacy.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nObject.assign( THREE, {\r\n\tFace4: function ( a, b, c, d, normal, color, materialIndex ) {\r\n\t\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\r\n\t\treturn new THREE.Face3( a, b, c, normal, color, materialIndex );\r\n\t},\r\n\tLineStrip: 0,\r\n\tLinePieces: 1,\r\n\tMeshFaceMaterial: THREE.MultiMaterial,\r\n\tPointCloud: function ( geometry, material ) {\r\n\t\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\r\n\t\treturn new THREE.Points( geometry, material );\r\n\t},\r\n\tParticle: THREE.Sprite,\r\n\tParticleSystem: function ( geometry, material ) {\r\n\t\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\r\n\t\treturn new THREE.Points( geometry, material );\r\n\t},\r\n\tPointCloudMaterial: function ( parameters ) {\r\n\t\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\treturn new THREE.PointsMaterial( parameters );\r\n\t},\r\n\tParticleBasicMaterial: function ( parameters ) {\r\n\t\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\treturn new THREE.PointsMaterial( parameters );\r\n\t},\r\n\tParticleSystemMaterial: function ( parameters ) {\r\n\t\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\treturn new THREE.PointsMaterial( parameters );\r\n\t},\r\n\tVertex: function ( x, y, z ) {\r\n\t\tconsole.warn( 'THREE.Vertex has been removed. Use THREE.Vector3 instead.' );\r\n\t\treturn new THREE.Vector3( x, y, z );\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.assign( THREE.Box2.prototype, {\r\n\tempty: function () {\r\n\t\tconsole.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\r\n\t\treturn this.isEmpty();\r\n\t},\r\n\tisIntersectionBox: function ( box ) {\r\n\t\tconsole.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.Box3.prototype, {\r\n\tempty: function () {\r\n\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\r\n\t\treturn this.isEmpty();\r\n\t},\r\n\tisIntersectionBox: function ( box ) {\r\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\t},\r\n\tisIntersectionSphere: function ( sphere ) {\r\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n\t\treturn this.intersectsSphere( sphere );\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.Matrix3.prototype, {\r\n\tmultiplyVector3: function ( vector ) {\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix3( this );\r\n\t},\r\n\tmultiplyVector3Array: function ( a ) {\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\treturn this.applyToVector3Array( a );\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.Matrix4.prototype, {\r\n\textractPosition: function ( m ) {\r\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n\t\treturn this.copyPosition( m );\r\n\t},\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n\t\treturn this.makeRotationFromQuaternion( q );\r\n\t},\r\n\tmultiplyVector3: function ( vector ) {\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.' );\r\n\t\treturn vector.applyProjection( this );\r\n\t},\r\n\tmultiplyVector4: function ( vector ) {\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\t},\r\n\tmultiplyVector3Array: function ( a ) {\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\treturn this.applyToVector3Array( a );\r\n\t},\r\n\trotateAxis: function ( v ) {\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n\t\tv.transformDirection( this );\r\n\t},\r\n\tcrossVector: function ( vector ) {\r\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\t},\r\n\ttranslate: function ( v ) {\r\n\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\r\n\t},\r\n\trotateX: function ( angle ) {\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\t},\r\n\trotateY: function ( angle ) {\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\t},\r\n\trotateZ: function ( angle ) {\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\t},\r\n\trotateByAxis: function ( axis, angle ) {\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.Plane.prototype, {\r\n\tisIntersectionLine: function ( line ) {\r\n\t\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\r\n\t\treturn this.intersectsLine( line );\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.Quaternion.prototype, {\r\n\tmultiplyVector3: function ( vector ) {\r\n\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n\t\treturn vector.applyQuaternion( this );\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.Ray.prototype, {\r\n\tisIntersectionBox: function ( box ) {\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n\t\treturn this.intersectsBox( box );\r\n\t},\r\n\tisIntersectionPlane: function ( plane ) {\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\r\n\t\treturn this.intersectsPlane( plane );\r\n\t},\r\n\tisIntersectionSphere: function ( sphere ) {\r\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n\t\treturn this.intersectsSphere( sphere );\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.Vector3.prototype, {\r\n\tsetEulerFromRotationMatrix: function () {\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\t},\r\n\tsetEulerFromQuaternion: function () {\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\t},\r\n\tgetPositionFromMatrix: function ( m ) {\r\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n\t\treturn this.setFromMatrixPosition( m );\r\n\t},\r\n\tgetScaleFromMatrix: function ( m ) {\r\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n\t\treturn this.setFromMatrixScale( m );\r\n\t},\r\n\tgetColumnFromMatrix: function ( index, matrix ) {\r\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n\t\treturn this.setFromMatrixColumn( matrix, index );\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.assign( THREE.Object3D.prototype, {\r\n\tgetChildByName: function ( name ) {\r\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n\t\treturn this.getObjectByName( name );\r\n\t},\r\n\trenderDepth: function ( value ) {\r\n\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\r\n\t},\r\n\ttranslate: function ( distance, axis ) {\r\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n\t\treturn this.translateOnAxis( axis, distance );\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.Object3D.prototype, {\r\n\teulerOrder: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n\t\t\treturn this.rotation.order;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n\t\t\tthis.rotation.order = value;\r\n\t\t}\r\n\t},\r\n\tuseQuaternion: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.LOD.prototype, {\r\n\tobjects: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\r\n\t\t\treturn this.levels;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nTHREE.PerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\r\n\r\n\tconsole.warn( \"THREE.PerspectiveCamera.setLens is deprecated. \" +\r\n\t\t\t\"Use .setFocalLength and .filmGauge for a photographic setup.\" );\r\n\r\n\tif ( filmGauge !== undefined ) this.filmGauge = filmGauge;\r\n\tthis.setFocalLength( focalLength );\r\n\r\n};\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.Light.prototype, {\r\n\tonlyShadow: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\r\n\t\t}\r\n\t},\r\n\tshadowCameraFov: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\r\n\t\t\tthis.shadow.camera.fov = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraLeft: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\r\n\t\t\tthis.shadow.camera.left = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraRight: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\r\n\t\t\tthis.shadow.camera.right = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraTop: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\r\n\t\t\tthis.shadow.camera.top = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraBottom: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\r\n\t\t\tthis.shadow.camera.bottom = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraNear: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\r\n\t\t\tthis.shadow.camera.near = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraFar: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\r\n\t\t\tthis.shadow.camera.far = value;\r\n\t\t}\r\n\t},\r\n\tshadowCameraVisible: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\r\n\t\t}\r\n\t},\r\n\tshadowBias: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\r\n\t\t\tthis.shadow.bias = value;\r\n\t\t}\r\n\t},\r\n\tshadowDarkness: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\r\n\t\t}\r\n\t},\r\n\tshadowMapWidth: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\r\n\t\t\tthis.shadow.mapSize.width = value;\r\n\t\t}\r\n\t},\r\n\tshadowMapHeight: {\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\r\n\t\t\tthis.shadow.mapSize.height = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.BufferAttribute.prototype, {\r\n\tlength: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\t\treturn this.array.length;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.BufferGeometry.prototype, {\r\n\taddIndex: function ( index ) {\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\r\n\t\tthis.setIndex( index );\r\n\t},\r\n\taddDrawCall: function ( start, count, indexOffset ) {\r\n\t\tif ( indexOffset !== undefined ) {\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\r\n\t\t}\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\r\n\t\tthis.addGroup( start, count );\r\n\t},\r\n\tclearDrawCalls: function () {\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\r\n\t\tthis.clearGroups();\r\n\t},\r\n\tcomputeTangents: function () {\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\r\n\t},\r\n\tcomputeOffsets: function () {\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.BufferGeometry.prototype, {\r\n\tdrawcalls: {\r\n\t\tget: function () {\r\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\t\t}\r\n\t},\r\n\toffsets: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.Material.prototype, {\r\n\twrapAround: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\t\t}\r\n\t},\r\n\twrapRGB: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapRGB has been removed.' );\r\n\t\t\treturn new THREE.Color();\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.MeshPhongMaterial.prototype, {\r\n\tmetal: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.ShaderMaterial.prototype, {\r\n\tderivatives: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n\t\t\treturn this.extensions.derivatives;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n\t\t\tthis.extensions.derivatives = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nTHREE.EventDispatcher.prototype = Object.assign( Object.create( {\r\n\r\n\t// Note: Extra base ensures these properties are not 'assign'ed.\r\n\r\n\tconstructor: THREE.EventDispatcher,\r\n\r\n\tapply: function ( target ) {\r\n\r\n\t\tconsole.warn( \"THREE.EventDispatcher: .apply is deprecated, \" +\r\n\t\t\t\t\"just inherit or Object.assign the prototype to mix-in.\" );\r\n\r\n\t\tObject.assign( target, this );\r\n\r\n\t}\r\n\r\n} ), THREE.EventDispatcher.prototype );\r\n\r\n//\r\n\r\nObject.assign( THREE.WebGLRenderer.prototype, {\r\n\tsupportsFloatTextures: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_texture_float' );\r\n\t},\r\n\tsupportsHalfFloatTextures: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_texture_half_float' );\r\n\t},\r\n\tsupportsStandardDerivatives: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\r\n\t\treturn this.extensions.get( 'OES_standard_derivatives' );\r\n\t},\r\n\tsupportsCompressedTextureS3TC: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\r\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\t},\r\n\tsupportsCompressedTexturePVRTC: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\r\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\t},\r\n\tsupportsBlendMinMax: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\r\n\t\treturn this.extensions.get( 'EXT_blend_minmax' );\r\n\t},\r\n\tsupportsVertexTextures: function () {\r\n\t\treturn this.capabilities.vertexTextures;\r\n\t},\r\n\tsupportsInstancedArrays: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\r\n\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\r\n\t},\r\n\tenableScissorTest: function ( boolean ) {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\r\n\t\tthis.setScissorTest( boolean );\r\n\t},\r\n\tinitMaterial: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\t},\r\n\taddPrePlugin: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\t},\r\n\taddPostPlugin: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\t},\r\n\tupdateShadowMap: function () {\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.WebGLRenderer.prototype, {\r\n\tshadowMapEnabled: {\r\n\t\tget: function () {\r\n\t\t\treturn this.shadowMap.enabled;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\r\n\t\t\tthis.shadowMap.enabled = value;\r\n\t\t}\r\n\t},\r\n\tshadowMapType: {\r\n\t\tget: function () {\r\n\t\t\treturn this.shadowMap.type;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\r\n\t\t\tthis.shadowMap.type = value;\r\n\t\t}\r\n\t},\r\n\tshadowMapCullFace: {\r\n\t\tget: function () {\r\n\t\t\treturn this.shadowMap.cullFace;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.' );\r\n\t\t\tthis.shadowMap.cullFace = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\nObject.defineProperties( THREE.WebGLShadowMap.prototype, {\r\n\tcullFace: {\r\n\t\tget: function () {\r\n\t\t\treturn this.renderReverseSided ? THREE.CullFaceFront : THREE.CullFaceBack;\r\n\t\t},\r\n\t\tset: function ( cullFace ) {\r\n\t\t\tvar value = ( cullFace !== THREE.CullFaceBack );\r\n\t\t\tconsole.warn( \"WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to \" + value + \".\" );\r\n\t\t\tthis.renderReverseSided = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.defineProperties( THREE.WebGLRenderTarget.prototype, {\r\n\twrapS: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n\t\t\treturn this.texture.wrapS;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n\t\t\tthis.texture.wrapS = value;\r\n\t\t}\r\n\t},\r\n\twrapT: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n\t\t\treturn this.texture.wrapT;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n\t\t\tthis.texture.wrapT = value;\r\n\t\t}\r\n\t},\r\n\tmagFilter: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n\t\t\treturn this.texture.magFilter;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n\t\t\tthis.texture.magFilter = value;\r\n\t\t}\r\n\t},\r\n\tminFilter: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n\t\t\treturn this.texture.minFilter;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n\t\t\tthis.texture.minFilter = value;\r\n\t\t}\r\n\t},\r\n\tanisotropy: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n\t\t\treturn this.texture.anisotropy;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n\t\t\tthis.texture.anisotropy = value;\r\n\t\t}\r\n\t},\r\n\toffset: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n\t\t\treturn this.texture.offset;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n\t\t\tthis.texture.offset = value;\r\n\t\t}\r\n\t},\r\n\trepeat: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n\t\t\treturn this.texture.repeat;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n\t\t\tthis.texture.repeat = value;\r\n\t\t}\r\n\t},\r\n\tformat: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n\t\t\treturn this.texture.format;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n\t\t\tthis.texture.format = value;\r\n\t\t}\r\n\t},\r\n\ttype: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n\t\t\treturn this.texture.type;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n\t\t\tthis.texture.type = value;\r\n\t\t}\r\n\t},\r\n\tgenerateMipmaps: {\r\n\t\tget: function () {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n\t\t\treturn this.texture.generateMipmaps;\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n\t\t\tthis.texture.generateMipmaps = value;\r\n\t\t}\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nObject.assign( THREE.Audio.prototype, {\r\n\tload: function ( file ) {\r\n\t\tconsole.warn( 'THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.' );\r\n\t\tvar scope = this;\r\n\t\tvar audioLoader = new THREE.AudioLoader();\r\n\t\taudioLoader.load( file, function ( buffer ) {\r\n\t\t\tscope.setBuffer( buffer );\r\n\t\t} );\r\n\t\treturn this;\r\n\t}\r\n} );\r\n\r\nObject.assign( THREE.AudioAnalyser.prototype, {\r\n\tgetData: function ( file ) {\r\n\t\tconsole.warn( 'THREE.AudioAnalyser: .getData() is now .getFrequencyData().' );\r\n\t\treturn this.getFrequencyData();\r\n\t}\r\n} );\r\n\r\n//\r\n\r\nTHREE.GeometryUtils = {\r\n\r\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n\r\n\t\tvar matrix;\r\n\r\n\t\tif ( geometry2 instanceof THREE.Mesh ) {\r\n\r\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\r\n\t\t\tmatrix = geometry2.matrix;\r\n\t\t\tgeometry2 = geometry2.geometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\r\n\t},\r\n\r\n\tcenter: function ( geometry ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n\t\treturn geometry.center();\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ImageUtils = {\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\tloadTexture: function ( url, mapping, onLoad, onError ) {\r\n\r\n\t\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\r\n\r\n\t\tvar loader = new THREE.TextureLoader();\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\tvar texture = loader.load( url, onLoad, undefined, onError );\r\n\r\n\t\tif ( mapping ) texture.mapping = mapping;\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadTextureCube: function ( urls, mapping, onLoad, onError ) {\r\n\r\n\t\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\r\n\r\n\t\tvar loader = new THREE.CubeTextureLoader();\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\tvar texture = loader.load( urls, onLoad, undefined, onError );\r\n\r\n\t\tif ( mapping ) texture.mapping = mapping;\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadCompressedTexture: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n\t},\r\n\r\n\tloadCompressedTextureCube: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.Projector = function () {\r\n\r\n\tconsole.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\r\n\r\n\tthis.projectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\r\n\t\tvector.project( camera );\r\n\r\n\t};\r\n\r\n\tthis.unprojectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\r\n\t\tvector.unproject( camera );\r\n\r\n\t};\r\n\r\n\tthis.pickingRay = function ( vector, camera ) {\r\n\r\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\r\n\r\n\t};\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.CanvasRenderer = function () {\r\n\r\n\tconsole.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\r\n\r\n\tthis.domElement = document.createElement( 'canvas' );\r\n\tthis.clear = function () {};\r\n\tthis.render = function () {};\r\n\tthis.setClearColor = function () {};\r\n\tthis.setSize = function () {};\r\n\r\n};\r\n\r\n// File:src/extras/CurveUtils.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.CurveUtils = {\r\n\r\n\ttangentQuadraticBezier: function ( t, p0, p1, p2 ) {\r\n\r\n\t\treturn 2 * ( 1 - t ) * ( p1 - p0 ) + 2 * t * ( p2 - p1 );\r\n\r\n\t},\r\n\r\n\t// Puay Bing, thanks for helping with this derivative!\r\n\r\n\ttangentCubicBezier: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\treturn - 3 * p0 * ( 1 - t ) * ( 1 - t )  +\r\n\t\t\t3 * p1 * ( 1 - t ) * ( 1 - t ) - 6 * t * p1 * ( 1 - t ) +\r\n\t\t\t6 * t *  p2 * ( 1 - t ) - 3 * t * t * p2 +\r\n\t\t\t3 * t * t * p3;\r\n\r\n\t},\r\n\r\n\ttangentSpline: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\t// To check if my formulas are correct\r\n\r\n\t\tvar h00 = 6 * t * t - 6 * t; \t// derived from 2t^3  3t^2 + 1\r\n\t\tvar h10 = 3 * t * t - 4 * t + 1; // t^3  2t^2 + t\r\n\t\tvar h01 = - 6 * t * t + 6 * t; \t//  2t3 + 3t2\r\n\t\tvar h11 = 3 * t * t - 2 * t;\t// t3  t2\r\n\r\n\t\treturn h00 + h10 + h01 + h11;\r\n\r\n\t},\r\n\r\n\t// Catmull-Rom\r\n\r\n\tinterpolate: function( p0, p1, p2, p3, t ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5;\r\n\t\tvar v1 = ( p3 - p1 ) * 0.5;\r\n\t\tvar t2 = t * t;\r\n\t\tvar t3 = t * t2;\r\n\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/SceneUtils.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SceneUtils = {\r\n\r\n\tcreateMultiMaterialObject: function ( geometry, materials ) {\r\n\r\n\t\tvar group = new THREE.Group();\r\n\r\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\t\tgroup.add( new THREE.Mesh( geometry, materials[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn group;\r\n\r\n\t},\r\n\r\n\tdetach: function ( child, parent, scene ) {\r\n\r\n\t\tchild.applyMatrix( parent.matrixWorld );\r\n\t\tparent.remove( child );\r\n\t\tscene.add( child );\r\n\r\n\t},\r\n\r\n\tattach: function ( child, scene, parent ) {\r\n\r\n\t\tvar matrixWorldInverse = new THREE.Matrix4();\r\n\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\r\n\t\tchild.applyMatrix( matrixWorldInverse );\r\n\r\n\t\tscene.remove( child );\r\n\t\tparent.add( child );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/ShapeUtils.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.ShapeUtils = {\r\n\r\n\t// calculate area of the contour polygon\r\n\r\n\tarea: function ( contour ) {\r\n\r\n\t\tvar n = contour.length;\r\n\t\tvar a = 0.0;\r\n\r\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\r\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\r\n\t\t}\r\n\r\n\t\treturn a * 0.5;\r\n\r\n\t},\r\n\r\n\ttriangulate: ( function () {\r\n\r\n\t\t/**\r\n\t\t * This code is a quick port of code written in C++ which was submitted to\r\n\t\t * flipcode.com by John W. Ratcliff  // July 22, 2000\r\n\t\t * See original code and more information here:\r\n\t\t * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\r\n\t\t *\r\n\t\t * ported to actionscript by Zevan Rosser\r\n\t\t * www.actionsnippet.com\r\n\t\t *\r\n\t\t * ported to javascript by Joshua Koo\r\n\t\t * http://www.lab4games.net/zz85/blog\r\n\t\t *\r\n\t\t */\r\n\r\n\t\tfunction snip( contour, u, v, w, n, verts ) {\r\n\r\n\t\t\tvar p;\r\n\t\t\tvar ax, ay, bx, by;\r\n\t\t\tvar cx, cy, px, py;\r\n\r\n\t\t\tax = contour[ verts[ u ] ].x;\r\n\t\t\tay = contour[ verts[ u ] ].y;\r\n\r\n\t\t\tbx = contour[ verts[ v ] ].x;\r\n\t\t\tby = contour[ verts[ v ] ].y;\r\n\r\n\t\t\tcx = contour[ verts[ w ] ].x;\r\n\t\t\tcy = contour[ verts[ w ] ].y;\r\n\r\n\t\t\tif ( Number.EPSILON > ( ( ( bx - ax ) * ( cy - ay ) ) - ( ( by - ay ) * ( cx - ax ) ) ) ) return false;\r\n\r\n\t\t\tvar aX, aY, bX, bY, cX, cY;\r\n\t\t\tvar apx, apy, bpx, bpy, cpx, cpy;\r\n\t\t\tvar cCROSSap, bCROSScp, aCROSSbp;\r\n\r\n\t\t\taX = cx - bx;  aY = cy - by;\r\n\t\t\tbX = ax - cx;  bY = ay - cy;\r\n\t\t\tcX = bx - ax;  cY = by - ay;\r\n\r\n\t\t\tfor ( p = 0; p < n; p ++ ) {\r\n\r\n\t\t\t\tpx = contour[ verts[ p ] ].x;\r\n\t\t\t\tpy = contour[ verts[ p ] ].y;\r\n\r\n\t\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\r\n\t\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\r\n\t\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\r\n\r\n\t\t\t\tapx = px - ax;  apy = py - ay;\r\n\t\t\t\tbpx = px - bx;  bpy = py - by;\r\n\t\t\t\tcpx = px - cx;  cpy = py - cy;\r\n\r\n\t\t\t\t// see if p is inside triangle abc\r\n\r\n\t\t\t\taCROSSbp = aX * bpy - aY * bpx;\r\n\t\t\t\tcCROSSap = cX * apy - cY * apx;\r\n\t\t\t\tbCROSScp = bX * cpy - bY * cpx;\r\n\r\n\t\t\t\tif ( ( aCROSSbp >= - Number.EPSILON ) && ( bCROSScp >= - Number.EPSILON ) && ( cCROSSap >= - Number.EPSILON ) ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// takes in an contour array and returns\r\n\r\n\t\treturn function ( contour, indices ) {\r\n\r\n\t\t\tvar n = contour.length;\r\n\r\n\t\t\tif ( n < 3 ) return null;\r\n\r\n\t\t\tvar result = [],\r\n\t\t\t\tverts = [],\r\n\t\t\t\tvertIndices = [];\r\n\r\n\t\t\t/* we want a counter-clockwise polygon in verts */\r\n\r\n\t\t\tvar u, v, w;\r\n\r\n\t\t\tif ( THREE.ShapeUtils.area( contour ) > 0.0 ) {\r\n\r\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar nv = n;\r\n\r\n\t\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\r\n\r\n\t\t\tvar count = 2 * nv;   /* error detection */\r\n\r\n\t\t\tfor ( v = nv - 1; nv > 2; ) {\r\n\r\n\t\t\t\t/* if we loop, it is probably a non-simple polygon */\r\n\r\n\t\t\t\tif ( ( count -- ) <= 0 ) {\r\n\r\n\t\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\r\n\r\n\t\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\r\n\t\t\t\t\t//return null;\r\n\t\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\r\n\t\t\t\t\tconsole.warn( 'THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()' );\r\n\r\n\t\t\t\t\tif ( indices ) return vertIndices;\r\n\t\t\t\t\treturn result;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\r\n\r\n\t\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\r\n\t\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\r\n\t\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\r\n\r\n\t\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\r\n\r\n\t\t\t\t\tvar a, b, c, s, t;\r\n\r\n\t\t\t\t\t/* true names of the vertices */\r\n\r\n\t\t\t\t\ta = verts[ u ];\r\n\t\t\t\t\tb = verts[ v ];\r\n\t\t\t\t\tc = verts[ w ];\r\n\r\n\t\t\t\t\t/* output Triangle */\r\n\r\n\t\t\t\t\tresult.push( [ contour[ a ],\r\n\t\t\t\t\t\tcontour[ b ],\r\n\t\t\t\t\t\tcontour[ c ] ] );\r\n\r\n\r\n\t\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\r\n\r\n\t\t\t\t\t/* remove v from the remaining polygon */\r\n\r\n\t\t\t\t\tfor ( s = v, t = v + 1; t < nv; s ++, t ++ ) {\r\n\r\n\t\t\t\t\t\tverts[ s ] = verts[ t ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnv --;\r\n\r\n\t\t\t\t\t/* reset error detection counter */\r\n\r\n\t\t\t\t\tcount = 2 * nv;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( indices ) return vertIndices;\r\n\t\t\treturn result;\r\n\r\n\t\t}\r\n\r\n\t} )(),\r\n\r\n\ttriangulateShape: function ( contour, holes ) {\r\n\r\n\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\r\n\r\n\t\t\t// inOtherPt needs to be collinear to the inSegment\r\n\t\t\tif ( inSegPt1.x !== inSegPt2.x ) {\r\n\r\n\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\r\n\r\n\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\r\n\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\r\n\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\r\n\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\r\n\r\n\t\t\tif ( Math.abs( limit ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t// not parallel\r\n\r\n\t\t\t\tvar perpSeg2;\r\n\t\t\t\tif ( limit > 0 ) {\r\n\r\n\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// i.e. to reduce rounding errors\r\n\t\t\t\t// intersection at endpoint of segment#1?\r\n\t\t\t\tif ( perpSeg2 === 0 ) {\r\n\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( perpSeg2 === limit ) {\r\n\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn [ inSeg1Pt2 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// intersection at endpoint of segment#2?\r\n\t\t\t\tif ( perpSeg1 === 0 )\t\treturn [ inSeg2Pt1 ];\r\n\t\t\t\tif ( perpSeg1 === limit )\treturn [ inSeg2Pt2 ];\r\n\r\n\t\t\t\t// return real intersection point\r\n\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\r\n\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\r\n\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// parallel or collinear\r\n\t\t\t\tif ( ( perpSeg1 !== 0 ) ||\r\n\t\t\t\t\t ( seg2dy * seg1seg2dx !== seg2dx * seg1seg2dy ) ) \t\t\treturn [];\r\n\r\n\t\t\t\t// they are collinear or degenerate\r\n\t\t\t\tvar seg1Pt = ( ( seg1dx === 0 ) && ( seg1dy === 0 ) );\t// segment1 is just a point?\r\n\t\t\t\tvar seg2Pt = ( ( seg2dx === 0 ) && ( seg2dy === 0 ) );\t// segment2 is just a point?\r\n\t\t\t\t// both segments are points\r\n\t\t\t\tif ( seg1Pt && seg2Pt ) {\r\n\r\n\t\t\t\t\tif ( ( inSeg1Pt1.x !== inSeg2Pt1.x ) ||\r\n\t\t\t\t\t\t ( inSeg1Pt1.y !== inSeg2Pt1.y ) )\t\treturn [];\t// they are distinct  points\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];                 \t\t\t\t\t\t// they are the same point\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// segment#1  is a single point\r\n\t\t\t\tif ( seg1Pt ) {\r\n\r\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// segment#2  is a single point\r\n\t\t\t\tif ( seg2Pt ) {\r\n\r\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\r\n\t\t\t\t\treturn [ inSeg2Pt1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// they are collinear segments, which might overlap\r\n\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\r\n\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\r\n\t\t\t\tif ( seg1dx !== 0 ) {\r\n\r\n\t\t\t\t\t// the segments are NOT on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// the segments are on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( seg1minVal <= seg2minVal ) {\r\n\r\n\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\r\n\t\t\t\t\tif ( seg1maxVal === seg2minVal )\t{\r\n\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg2min ];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg2min, seg2max ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\r\n\t\t\t\t\tif ( seg1minVal === seg2maxVal )\t{\r\n\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg1min ];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg1min, seg2max ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\r\n\r\n\t\t\t// The order of legs is important\r\n\r\n\t\t\t// translation of all points, so that Vertex is at (0,0)\r\n\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\r\n\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\r\n\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\r\n\r\n\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\r\n\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\r\n\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\r\n\r\n\t\t\tif ( Math.abs( from2toAngle ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t// angle != 180 deg.\r\n\r\n\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\r\n\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\r\n\r\n\t\t\t\tif ( from2toAngle > 0 ) {\r\n\r\n\t\t\t\t\t// main angle < 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// main angle > 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// angle == 180 deg.\r\n\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\r\n\t\t\t\treturn\t( from2otherAngle > 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction removeHoles( contour, holes ) {\r\n\r\n\t\t\tvar shape = contour.concat(); // work on this shape\r\n\t\t\tvar hole;\r\n\r\n\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\r\n\r\n\t\t\t\t// Check if hole point lies within angle around shape point\r\n\t\t\t\tvar lastShapeIdx = shape.length - 1;\r\n\r\n\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\r\n\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\r\n\r\n\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\r\n\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\r\n\r\n\t\t\t\tvar insideAngle = isPointInsideAngle( shape[ inShapeIdx ], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[ inHoleIdx ] );\r\n\t\t\t\tif ( ! insideAngle ) {\r\n\r\n\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if shape point lies within angle around hole point\r\n\t\t\t\tvar lastHoleIdx = hole.length - 1;\r\n\r\n\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\r\n\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\r\n\r\n\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\r\n\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\r\n\r\n\t\t\t\tinsideAngle = isPointInsideAngle( hole[ inHoleIdx ], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[ inShapeIdx ] );\r\n\t\t\t\tif ( ! insideAngle ) {\r\n\r\n\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\ttrue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\r\n\r\n\t\t\t\t// checks for intersections with shape edges\r\n\t\t\t\tvar sIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\r\n\r\n\t\t\t\t\tnextIdx = sIdx + 1; nextIdx %= shape.length;\r\n\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[ sIdx ], shape[ nextIdx ], true );\r\n\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar indepHoles = [];\r\n\r\n\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\r\n\r\n\t\t\t\t// checks for intersections with hole edges\r\n\t\t\t\tvar ihIdx, chkHole,\r\n\t\t\t\t\thIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\r\n\r\n\t\t\t\t\tchkHole = holes[ indepHoles[ ihIdx ]];\r\n\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\r\n\r\n\t\t\t\t\t\tnextIdx = hIdx + 1; nextIdx %= chkHole.length;\r\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[ hIdx ], chkHole[ nextIdx ], true );\r\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar holeIndex, shapeIndex,\r\n\t\t\t\tshapePt, holePt,\r\n\t\t\t\tholeIdx, cutKey, failedCuts = [],\r\n\t\t\t\ttmpShape1, tmpShape2,\r\n\t\t\t\ttmpHole1, tmpHole2;\r\n\r\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tindepHoles.push( h );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar minShapeIndex = 0;\r\n\t\t\tvar counter = indepHoles.length * 2;\r\n\t\t\twhile ( indepHoles.length > 0 ) {\r\n\r\n\t\t\t\tcounter --;\r\n\t\t\t\tif ( counter < 0 ) {\r\n\r\n\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// search for shape-vertex and hole-vertex,\r\n\t\t\t\t// which can be connected without intersections\r\n\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\r\n\r\n\t\t\t\t\tshapePt = shape[ shapeIndex ];\r\n\t\t\t\t\tholeIndex\t= - 1;\r\n\r\n\t\t\t\t\t// search for hole which can be reached without intersections\r\n\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\r\n\r\n\t\t\t\t\t\tholeIdx = indepHoles[ h ];\r\n\r\n\t\t\t\t\t\t// prevent multiple checks\r\n\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\r\n\t\t\t\t\t\tif ( failedCuts[ cutKey ] !== undefined )\t\t\tcontinue;\r\n\r\n\t\t\t\t\t\thole = holes[ holeIdx ];\r\n\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\r\n\r\n\t\t\t\t\t\t\tholePt = hole[ h2 ];\r\n\t\t\t\t\t\t\tif ( ! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\r\n\r\n\t\t\t\t\t\t\tholeIndex = h2;\r\n\t\t\t\t\t\t\tindepHoles.splice( h, 1 );\r\n\r\n\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex + 1 );\r\n\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\r\n\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\r\n\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex + 1 );\r\n\r\n\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\r\n\r\n\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\r\n\r\n\t\t\t\t\t\t\t// Debug only, to show the selected cuts\r\n\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\r\n\t\t\t\t\t\tfailedCuts[ cutKey ] = true;\t\t\t// remember failure\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn shape; \t\t\t/* shape with no holes */\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar i, il, f, face,\r\n\t\t\tkey, index,\r\n\t\t\tallPointsMap = {};\r\n\r\n\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\r\n\r\n\t\tvar allpoints = contour.concat();\r\n\r\n\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( allpoints, holes[ h ] );\r\n\r\n\t\t}\r\n\r\n\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\r\n\r\n\t\t// prepare all points map\r\n\r\n\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\r\n\r\n\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\r\n\r\n\t\t\tif ( allPointsMap[ key ] !== undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Shape: Duplicate point\", key );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tallPointsMap[ key ] = i;\r\n\r\n\t\t}\r\n\r\n\t\t// remove holes by cutting paths to holes and adding them to the shape\r\n\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\r\n\r\n\t\tvar triangles = THREE.ShapeUtils.triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\r\n\t\t//console.log( \"triangles\",triangles, triangles.length );\r\n\r\n\t\t// check all face vertices against all points map\r\n\r\n\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = triangles[ i ];\r\n\r\n\t\t\tfor ( f = 0; f < 3; f ++ ) {\r\n\r\n\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\r\n\r\n\t\t\t\tindex = allPointsMap[ key ];\r\n\r\n\t\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\t\tface[ f ] = index;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn triangles.concat();\r\n\r\n\t},\r\n\r\n\tisClockWise: function ( pts ) {\r\n\r\n\t\treturn THREE.ShapeUtils.area( pts ) < 0;\r\n\r\n\t},\r\n\r\n\t// Bezier Curves formulas obtained from\r\n\t// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\r\n\r\n\t// Quad Bezier Functions\r\n\r\n\tb2: ( function () {\r\n\r\n\t\tfunction b2p0( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn k * k * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b2p1( t, p ) {\r\n\r\n\t\t\treturn 2 * ( 1 - t ) * t * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b2p2( t, p ) {\r\n\r\n\t\t\treturn t * t * p;\r\n\r\n\t\t}\r\n\r\n\t\treturn function ( t, p0, p1, p2 ) {\r\n\r\n\t\t\treturn b2p0( t, p0 ) + b2p1( t, p1 ) + b2p2( t, p2 );\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\t// Cubic Bezier Functions\r\n\r\n\tb3: ( function () {\r\n\r\n\t\tfunction b3p0( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn k * k * k * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b3p1( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn 3 * k * k * t * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b3p2( t, p ) {\r\n\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn 3 * k * t * t * p;\r\n\r\n\t\t}\r\n\r\n\t\tfunction b3p3( t, p ) {\r\n\r\n\t\t\treturn t * t * t * p;\r\n\r\n\t\t}\r\n\r\n\t\treturn function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\t\treturn b3p0( t, p0 ) + b3p1( t, p1 ) + b3p2( t, p2 ) + b3p3( t, p3 );\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n};\r\n\r\n// File:src/extras/core/Curve.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Extensible curve object\r\n *\r\n * Some common of Curve methods\r\n * .getPoint(t), getTangent(t)\r\n * .getPointAt(u), getTagentAt(u)\r\n * .getPoints(), .getSpacedPoints()\r\n * .getLength()\r\n * .updateArcLengths()\r\n *\r\n * This following classes subclasses THREE.Curve:\r\n *\r\n * -- 2d classes --\r\n * THREE.LineCurve\r\n * THREE.QuadraticBezierCurve\r\n * THREE.CubicBezierCurve\r\n * THREE.SplineCurve\r\n * THREE.ArcCurve\r\n * THREE.EllipseCurve\r\n *\r\n * -- 3d classes --\r\n * THREE.LineCurve3\r\n * THREE.QuadraticBezierCurve3\r\n * THREE.CubicBezierCurve3\r\n * THREE.SplineCurve3\r\n *\r\n * A series of curves can be represented as a THREE.CurvePath\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tAbstract Curve base class\r\n **************************************************************/\r\n\r\nTHREE.Curve = function () {\r\n\r\n};\r\n\r\nTHREE.Curve.prototype = {\r\n\r\n\tconstructor: THREE.Curve,\r\n\r\n\t// Virtual base class method to overwrite and implement in subclasses\r\n\t//\t- t [0 .. 1]\r\n\r\n\tgetPoint: function ( t ) {\r\n\r\n\t\tconsole.warn( \"THREE.Curve: Warning, getPoint() not implemented!\" );\r\n\t\treturn null;\r\n\r\n\t},\r\n\r\n\t// Get point at relative position in curve according to arc length\r\n\t// - u [0 .. 1]\r\n\r\n\tgetPointAt: function ( u ) {\r\n\r\n\t\tvar t = this.getUtoTmapping( u );\r\n\t\treturn this.getPoint( t );\r\n\r\n\t},\r\n\r\n\t// Get sequence of points using getPoint( t )\r\n\r\n\tgetPoints: function ( divisions ) {\r\n\r\n\t\tif ( ! divisions ) divisions = 5;\r\n\r\n\t\tvar d, pts = [];\r\n\r\n\t\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\t\tpts.push( this.getPoint( d / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn pts;\r\n\r\n\t},\r\n\r\n\t// Get sequence of points using getPointAt( u )\r\n\r\n\tgetSpacedPoints: function ( divisions ) {\r\n\r\n\t\tif ( ! divisions ) divisions = 5;\r\n\r\n\t\tvar d, pts = [];\r\n\r\n\t\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\t\tpts.push( this.getPointAt( d / divisions ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn pts;\r\n\r\n\t},\r\n\r\n\t// Get total curve arc length\r\n\r\n\tgetLength: function () {\r\n\r\n\t\tvar lengths = this.getLengths();\r\n\t\treturn lengths[ lengths.length - 1 ];\r\n\r\n\t},\r\n\r\n\t// Get list of cumulative segment lengths\r\n\r\n\tgetLengths: function ( divisions ) {\r\n\r\n\t\tif ( ! divisions ) divisions = ( this.__arcLengthDivisions ) ? ( this.__arcLengthDivisions ) : 200;\r\n\r\n\t\tif ( this.cacheArcLengths\r\n\t\t\t&& ( this.cacheArcLengths.length === divisions + 1 )\r\n\t\t\t&& ! this.needsUpdate ) {\r\n\r\n\t\t\t//console.log( \"cached\", this.cacheArcLengths );\r\n\t\t\treturn this.cacheArcLengths;\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t\tvar cache = [];\r\n\t\tvar current, last = this.getPoint( 0 );\r\n\t\tvar p, sum = 0;\r\n\r\n\t\tcache.push( 0 );\r\n\r\n\t\tfor ( p = 1; p <= divisions; p ++ ) {\r\n\r\n\t\t\tcurrent = this.getPoint ( p / divisions );\r\n\t\t\tsum += current.distanceTo( last );\r\n\t\t\tcache.push( sum );\r\n\t\t\tlast = current;\r\n\r\n\t\t}\r\n\r\n\t\tthis.cacheArcLengths = cache;\r\n\r\n\t\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\r\n\r\n\t},\r\n\r\n\tupdateArcLengths: function() {\r\n\r\n\t\tthis.needsUpdate = true;\r\n\t\tthis.getLengths();\r\n\r\n\t},\r\n\r\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\r\n\r\n\tgetUtoTmapping: function ( u, distance ) {\r\n\r\n\t\tvar arcLengths = this.getLengths();\r\n\r\n\t\tvar i = 0, il = arcLengths.length;\r\n\r\n\t\tvar targetArcLength; // The targeted u distance value to get\r\n\r\n\t\tif ( distance ) {\r\n\r\n\t\t\ttargetArcLength = distance;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\r\n\r\n\t\t}\r\n\r\n\t\t//var time = Date.now();\r\n\r\n\t\t// binary search for the index with largest value smaller than target u distance\r\n\r\n\t\tvar low = 0, high = il - 1, comparison;\r\n\r\n\t\twhile ( low <= high ) {\r\n\r\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\r\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\r\n\r\n\t\t\tif ( comparison < 0 ) {\r\n\r\n\t\t\t\tlow = i + 1;\r\n\r\n\t\t\t} else if ( comparison > 0 ) {\r\n\r\n\t\t\t\thigh = i - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thigh = i;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t\t// DONE\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\ti = high;\r\n\r\n\t\t//console.log('b' , i, low, high, Date.now()- time);\r\n\r\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\r\n\r\n\t\t\tvar t = i / ( il - 1 );\r\n\t\t\treturn t;\r\n\r\n\t\t}\r\n\r\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\r\n\r\n\t\tvar lengthBefore = arcLengths[ i ];\r\n\t\tvar lengthAfter = arcLengths[ i + 1 ];\r\n\r\n\t\tvar segmentLength = lengthAfter - lengthBefore;\r\n\r\n\t\t// determine where we are between the 'before' and 'after' points\r\n\r\n\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\r\n\t\t// add that fractional amount to t\r\n\r\n\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\r\n\r\n\t\treturn t;\r\n\r\n\t},\r\n\r\n\t// Returns a unit vector tangent at t\r\n\t// In case any sub curve does not implement its tangent derivation,\r\n\t// 2 points a small delta apart will be used to find its gradient\r\n\t// which seems to give a reasonable approximation\r\n\r\n\tgetTangent: function( t ) {\r\n\r\n\t\tvar delta = 0.0001;\r\n\t\tvar t1 = t - delta;\r\n\t\tvar t2 = t + delta;\r\n\r\n\t\t// Capping in case of danger\r\n\r\n\t\tif ( t1 < 0 ) t1 = 0;\r\n\t\tif ( t2 > 1 ) t2 = 1;\r\n\r\n\t\tvar pt1 = this.getPoint( t1 );\r\n\t\tvar pt2 = this.getPoint( t2 );\r\n\r\n\t\tvar vec = pt2.clone().sub( pt1 );\r\n\t\treturn vec.normalize();\r\n\r\n\t},\r\n\r\n\tgetTangentAt: function ( u ) {\r\n\r\n\t\tvar t = this.getUtoTmapping( u );\r\n\t\treturn this.getTangent( t );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// TODO: Transformation for Curves?\r\n\r\n/**************************************************************\r\n *\t3D Curves\r\n **************************************************************/\r\n\r\n// A Factory method for creating new curve subclasses\r\n\r\nTHREE.Curve.create = function ( constructor, getPointFunc ) {\r\n\r\n\tconstructor.prototype = Object.create( THREE.Curve.prototype );\r\n\tconstructor.prototype.constructor = constructor;\r\n\tconstructor.prototype.getPoint = getPointFunc;\r\n\r\n\treturn constructor;\r\n\r\n};\r\n\r\n// File:src/extras/core/CurvePath.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tCurved Path - a curve path is simply a array of connected\r\n *  curves, but retains the api of a curve\r\n **************************************************************/\r\n\r\nTHREE.CurvePath = function () {\r\n\r\n\tthis.curves = [];\r\n\r\n\tthis.autoClose = false; // Automatically closes the path\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype = Object.assign( Object.create( THREE.Curve.prototype ), {\r\n\r\n\tconstructor: THREE.CurvePath,\r\n\r\n\tadd: function ( curve ) {\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t},\r\n\r\n\tclosePath: function () {\r\n\r\n\t\t// TODO Test\r\n\t\t// and verify for vector3 (needs to implement equals)\r\n\t\t// Add a line curve if start and end of lines are not connected\r\n\t\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\r\n\t\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\r\n\r\n\t\tif ( ! startPoint.equals( endPoint ) ) {\r\n\r\n\t\t\tthis.curves.push( new THREE.LineCurve( endPoint, startPoint ) );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t// To get accurate point with reference to\r\n\t// entire path distance at time t,\r\n\t// following has to be done:\r\n\r\n\t// 1. Length of each sub path have to be known\r\n\t// 2. Locate and identify type of curve\r\n\t// 3. Get t for the curve\r\n\t// 4. Return curve.getPointAt(t')\r\n\r\n\tgetPoint: function ( t ) {\r\n\r\n\t\tvar d = t * this.getLength();\r\n\t\tvar curveLengths = this.getCurveLengths();\r\n\t\tvar i = 0;\r\n\r\n\t\t// To think about boundaries points.\r\n\r\n\t\twhile ( i < curveLengths.length ) {\r\n\r\n\t\t\tif ( curveLengths[ i ] >= d ) {\r\n\r\n\t\t\t\tvar diff = curveLengths[ i ] - d;\r\n\t\t\t\tvar curve = this.curves[ i ];\r\n\r\n\t\t\t\tvar u = 1 - diff / curve.getLength();\r\n\r\n\t\t\t\treturn curve.getPointAt( u );\r\n\r\n\t\t\t}\r\n\r\n\t\t\ti ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t\t// loop where sum != 0, sum > d , sum+1 <d\r\n\r\n\t},\r\n\r\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n\t// getPoint() depends on getLength\r\n\r\n\tgetLength: function () {\r\n\r\n\t\tvar lens = this.getCurveLengths();\r\n\t\treturn lens[ lens.length - 1 ];\r\n\r\n\t},\r\n\r\n\t// Compute lengths and cache them\r\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\r\n\tgetCurveLengths: function () {\r\n\r\n\t\t// We use cache values if curves and cache array are same length\r\n\r\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\r\n\r\n\t\t\treturn this.cacheLengths;\r\n\r\n\t\t}\r\n\r\n\t\t// Get length of sub-curve\r\n\t\t// Push sums into cached array\r\n\r\n\t\tvar lengths = [], sums = 0;\r\n\r\n\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\r\n\r\n\t\t\tsums += this.curves[ i ].getLength();\r\n\t\t\tlengths.push( sums );\r\n\r\n\t\t}\r\n\r\n\t\tthis.cacheLengths = lengths;\r\n\r\n\t\treturn lengths;\r\n\r\n\t},\r\n\r\n\t/**************************************************************\r\n\t *\tCreate Geometries Helpers\r\n\t **************************************************************/\r\n\r\n\t/// Generate geometry from path points (for Line or Points objects)\r\n\r\n\tcreatePointsGeometry: function ( divisions ) {\r\n\r\n\t\tvar pts = this.getPoints( divisions );\r\n\t\treturn this.createGeometry( pts );\r\n\r\n\t},\r\n\r\n\t// Generate geometry from equidistant sampling along the path\r\n\r\n\tcreateSpacedPointsGeometry: function ( divisions ) {\r\n\r\n\t\tvar pts = this.getSpacedPoints( divisions );\r\n\t\treturn this.createGeometry( pts );\r\n\r\n\t},\r\n\r\n\tcreateGeometry: function ( points ) {\r\n\r\n\t\tvar geometry = new THREE.Geometry();\r\n\r\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar point = points[ i ];\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3( point.x, point.y, point.z || 0 ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/extras/core/Font.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Font = function ( data ) {\r\n\r\n\tthis.data = data;\r\n\r\n};\r\n\r\nObject.assign( THREE.Font.prototype, {\r\n\r\n\tgenerateShapes: function ( text, size, divisions ) {\r\n\r\n\t\tfunction createPaths( text ) {\r\n\r\n\t\t\tvar chars = String( text ).split( '' );\r\n\t\t\tvar scale = size / data.resolution;\r\n\t\t\tvar offset = 0;\r\n\r\n\t\t\tvar paths = [];\r\n\r\n\t\t\tfor ( var i = 0; i < chars.length; i ++ ) {\r\n\r\n\t\t\t\tvar ret = createPath( chars[ i ], scale, offset );\r\n\t\t\t\toffset += ret.offset;\r\n\r\n\t\t\t\tpaths.push( ret.path );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn paths;\r\n\r\n\t\t}\r\n\r\n\t\tfunction createPath( c, scale, offset ) {\r\n\r\n\t\t\tvar glyph = data.glyphs[ c ] || data.glyphs[ '?' ];\r\n\r\n\t\t\tif ( ! glyph ) return;\r\n\r\n\t\t\tvar path = new THREE.Path();\r\n\r\n\t\t\tvar pts = [], b2 = THREE.ShapeUtils.b2, b3 = THREE.ShapeUtils.b3;\r\n\t\t\tvar x, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2, laste;\r\n\r\n\t\t\tif ( glyph.o ) {\r\n\r\n\t\t\t\tvar outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\r\n\t\t\t\tfor ( var i = 0, l = outline.length; i < l; ) {\r\n\r\n\t\t\t\t\tvar action = outline[ i ++ ];\r\n\r\n\t\t\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\t\t\tcase 'm': // moveTo\r\n\r\n\t\t\t\t\t\t\tx = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\ty = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.moveTo( x, y );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'l': // lineTo\r\n\r\n\t\t\t\t\t\t\tx = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\ty = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.lineTo( x, y );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'q': // quadraticCurveTo\r\n\r\n\t\t\t\t\t\t\tcpx  = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy  = outline[ i ++ ] * scale;\r\n\t\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\r\n\t\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\t\t\tfor ( var i2 = 1; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\t\t\tb2( t, cpx0, cpx1, cpx );\r\n\t\t\t\t\t\t\t\t\tb2( t, cpy0, cpy1, cpy );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\tcase 'b': // bezierCurveTo\r\n\r\n\t\t\t\t\t\t\tcpx  = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy  = outline[ i ++ ] * scale;\r\n\t\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scale;\r\n\t\t\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offset;\r\n\t\t\t\t\t\t\tcpy2 = outline[ i ++ ] * scale;\r\n\r\n\t\t\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\r\n\t\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\t\t\tfor ( var i2 = 1; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\t\t\tb3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\t\t\t\t\t\tb3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn { offset: glyph.ha * scale, path: path };\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( size === undefined ) size = 100;\r\n\t\tif ( divisions === undefined ) divisions = 4;\r\n\r\n\t\tvar data = this.data;\r\n\r\n\t\tvar paths = createPaths( text );\r\n\t\tvar shapes = [];\r\n\r\n\t\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\r\n\t\t}\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/extras/core/Path.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Creates free form 2d path using series of points, lines or curves.\r\n *\r\n **/\r\n\r\nTHREE.Path = function ( points ) {\r\n\r\n\tTHREE.CurvePath.call( this );\r\n\r\n\tthis.actions = [];\r\n\r\n\tif ( points ) {\r\n\r\n\t\tthis.fromPoints( points );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Path.prototype = Object.assign( Object.create( THREE.CurvePath.prototype ), {\r\n\r\n\tconstructor: THREE.Path,\r\n\r\n\t// TODO Clean up PATH API\r\n\r\n\t// Create path using straight lines to connect all points\r\n\t// - vectors: array of Vector2\r\n\r\n\tfromPoints: function ( vectors ) {\r\n\r\n\t\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\r\n\r\n\t\tfor ( var i = 1, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.lineTo( vectors[ i ].x, vectors[ i ].y );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmoveTo: function ( x, y ) {\r\n\r\n\t\tthis.actions.push( { action: 'moveTo', args: [ x, y ] } );\r\n\r\n\t},\r\n\r\n\tlineTo: function ( x, y ) {\r\n\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\t\tvar curve = new THREE.LineCurve( new THREE.Vector2( x0, y0 ), new THREE.Vector2( x, y ) );\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.actions.push( { action: 'lineTo', args: [ x, y ] } );\r\n\r\n\t},\r\n\r\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\r\n\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\t\tvar curve = new THREE.QuadraticBezierCurve(\r\n\t\t\tnew THREE.Vector2( x0, y0 ),\r\n\t\t\tnew THREE.Vector2( aCPx, aCPy ),\r\n\t\t\tnew THREE.Vector2( aX, aY )\r\n\t\t);\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.actions.push( { action: 'quadraticCurveTo', args: [ aCPx, aCPy, aX, aY ] } );\r\n\r\n\t},\r\n\r\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\r\n\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\t\tvar curve = new THREE.CubicBezierCurve(\r\n\t\t\tnew THREE.Vector2( x0, y0 ),\r\n\t\t\tnew THREE.Vector2( aCP1x, aCP1y ),\r\n\t\t\tnew THREE.Vector2( aCP2x, aCP2y ),\r\n\t\t\tnew THREE.Vector2( aX, aY )\r\n\t\t);\r\n\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.actions.push( { action: 'bezierCurveTo', args: [ aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ] } );\r\n\r\n\t},\r\n\r\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\r\n\r\n\t\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\t\tvar npts = [ new THREE.Vector2( x0, y0 ) ];\r\n\t\tArray.prototype.push.apply( npts, pts );\r\n\r\n\t\tvar curve = new THREE.SplineCurve( npts );\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tthis.actions.push( { action: 'splineThru', args: args } );\r\n\r\n\t},\r\n\r\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\r\n\t\t\taStartAngle, aEndAngle, aClockwise );\r\n\r\n\t},\r\n\r\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n\t},\r\n\r\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n\t},\r\n\r\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\t\tvar args = [\r\n\t\t\taX, aY,\r\n\t\t\txRadius, yRadius,\r\n\t\t\taStartAngle, aEndAngle,\r\n\t\t\taClockwise,\r\n\t\t\taRotation || 0 // aRotation is optional.\r\n\t\t];\r\n\r\n\t\tvar curve = new THREE.EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\t\tthis.curves.push( curve );\r\n\r\n\t\tvar lastPoint = curve.getPoint( 1 );\r\n\t\targs.push( lastPoint.x );\r\n\t\targs.push( lastPoint.y );\r\n\r\n\t\tthis.actions.push( { action: 'ellipse', args: args } );\r\n\r\n\t},\r\n\r\n\tgetSpacedPoints: function ( divisions ) {\r\n\r\n\t\tif ( ! divisions ) divisions = 40;\r\n\r\n\t\tvar points = [];\r\n\r\n\t\tfor ( var i = 0; i < divisions; i ++ ) {\r\n\r\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\r\n\r\n\t\t\t//if ( !this.getPoint( i / divisions ) ) throw \"DIE\";\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.autoClose ) {\r\n\r\n\t\t\tpoints.push( points[ 0 ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\tgetPoints: function ( divisions ) {\r\n\r\n\t\tdivisions = divisions || 12;\r\n\r\n\t\tvar b2 = THREE.ShapeUtils.b2;\r\n\t\tvar b3 = THREE.ShapeUtils.b3;\r\n\r\n\t\tvar points = [];\r\n\r\n\t\tvar cpx, cpy, cpx2, cpy2, cpx1, cpy1, cpx0, cpy0,\r\n\t\t\tlaste, tx, ty;\r\n\r\n\t\tfor ( var i = 0, l = this.actions.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar item = this.actions[ i ];\r\n\r\n\t\t\tvar action = item.action;\r\n\t\t\tvar args = item.args;\r\n\r\n\t\t\tswitch ( action ) {\r\n\r\n\t\t\tcase 'moveTo':\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'lineTo':\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'quadraticCurveTo':\r\n\r\n\t\t\t\tcpx  = args[ 2 ];\r\n\t\t\t\tcpy  = args[ 3 ];\r\n\r\n\t\t\t\tcpx1 = args[ 0 ];\r\n\t\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\t\tvar t = j / divisions;\r\n\r\n\t\t\t\t\ttx = b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\t\tty = b2( t, cpy0, cpy1, cpy );\r\n\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'bezierCurveTo':\r\n\r\n\t\t\t\tcpx  = args[ 4 ];\r\n\t\t\t\tcpy  = args[ 5 ];\r\n\r\n\t\t\t\tcpx1 = args[ 0 ];\r\n\t\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\t\tcpx2 = args[ 2 ];\r\n\t\t\t\tcpy2 = args[ 3 ];\r\n\r\n\t\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tfor ( var j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\t\tvar t = j / divisions;\r\n\r\n\t\t\t\t\ttx = b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\t\tty = b3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'splineThru':\r\n\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\tvar last = new THREE.Vector2( laste[ laste.length - 2 ], laste[ laste.length - 1 ] );\r\n\t\t\t\tvar spts = [ last ];\r\n\r\n\t\t\t\tvar n = divisions * args[ 0 ].length;\r\n\r\n\t\t\t\tspts = spts.concat( args[ 0 ] );\r\n\r\n\t\t\t\tvar spline = new THREE.SplineCurve( spts );\r\n\r\n\t\t\t\tfor ( var j = 1; j <= n; j ++ ) {\r\n\r\n\t\t\t\t\tpoints.push( spline.getPointAt( j / n ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'arc':\r\n\r\n\t\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\t\taRadius = args[ 2 ],\r\n\t\t\t\t\taStartAngle = args[ 3 ], aEndAngle = args[ 4 ],\r\n\t\t\t\t\taClockwise = !! args[ 5 ];\r\n\r\n\t\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\t\tvar angle;\r\n\t\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\t\tfor ( var j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\t\tvar t = j / tdivisions;\r\n\r\n\t\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\t\ttx = aX + aRadius * Math.cos( angle );\r\n\t\t\t\t\tty = aY + aRadius * Math.sin( angle );\r\n\r\n\t\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//console.log(points);\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'ellipse':\r\n\r\n\t\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\t\txRadius = args[ 2 ],\r\n\t\t\t\t\tyRadius = args[ 3 ],\r\n\t\t\t\t\taStartAngle = args[ 4 ], aEndAngle = args[ 5 ],\r\n\t\t\t\t\taClockwise = !! args[ 6 ],\r\n\t\t\t\t\taRotation = args[ 7 ];\r\n\r\n\r\n\t\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\t\tvar angle;\r\n\t\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\t\tvar cos, sin;\r\n\t\t\t\tif ( aRotation !== 0 ) {\r\n\r\n\t\t\t\t\tcos = Math.cos( aRotation );\r\n\t\t\t\t\tsin = Math.sin( aRotation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\t\tvar t = j / tdivisions;\r\n\r\n\t\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\t\ttx = aX + xRadius * Math.cos( angle );\r\n\t\t\t\t\tty = aY + yRadius * Math.sin( angle );\r\n\r\n\t\t\t\t\tif ( aRotation !== 0 ) {\r\n\r\n\t\t\t\t\t\tvar x = tx, y = ty;\r\n\r\n\t\t\t\t\t\t// Rotate the point about the center of the ellipse.\r\n\t\t\t\t\t\ttx = ( x - aX ) * cos - ( y - aY ) * sin + aX;\r\n\t\t\t\t\t\tty = ( x - aX ) * sin + ( y - aY ) * cos + aY;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//console.log(points);\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t} // end switch\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\t// Normalize to remove the closing point by default.\r\n\t\tvar lastPoint = points[ points.length - 1 ];\r\n\t\tif ( Math.abs( lastPoint.x - points[ 0 ].x ) < Number.EPSILON &&\r\n\t\t\t\t Math.abs( lastPoint.y - points[ 0 ].y ) < Number.EPSILON )\r\n\t\t\tpoints.splice( points.length - 1, 1 );\r\n\r\n\t\tif ( this.autoClose ) {\r\n\r\n\t\t\tpoints.push( points[ 0 ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn points;\r\n\r\n\t},\r\n\r\n\ttoShapes: function ( isCCW, noHoles ) {\r\n\r\n\t\tfunction extractSubpaths( inActions ) {\r\n\r\n\t\t\tvar subPaths = [], lastPath = new THREE.Path();\r\n\r\n\t\t\tfor ( var i = 0, l = inActions.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar item = inActions[ i ];\r\n\r\n\t\t\t\tvar args = item.args;\r\n\t\t\t\tvar action = item.action;\r\n\r\n\t\t\t\tif ( action === 'moveTo' ) {\r\n\r\n\t\t\t\t\tif ( lastPath.actions.length !== 0 ) {\r\n\r\n\t\t\t\t\t\tsubPaths.push( lastPath );\r\n\t\t\t\t\t\tlastPath = new THREE.Path();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlastPath[ action ].apply( lastPath, args );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( lastPath.actions.length !== 0 ) {\r\n\r\n\t\t\t\tsubPaths.push( lastPath );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// console.log(subPaths);\r\n\r\n\t\t\treturn\tsubPaths;\r\n\r\n\t\t}\r\n\r\n\t\tfunction toShapesNoHoles( inSubpaths ) {\r\n\r\n\t\t\tvar shapes = [];\r\n\r\n\t\t\tfor ( var i = 0, l = inSubpaths.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar tmpPath = inSubpaths[ i ];\r\n\r\n\t\t\t\tvar tmpShape = new THREE.Shape();\r\n\t\t\t\ttmpShape.actions = tmpPath.actions;\r\n\t\t\t\ttmpShape.curves = tmpPath.curves;\r\n\r\n\t\t\t\tshapes.push( tmpShape );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(\"shape\", shapes);\r\n\r\n\t\t\treturn shapes;\r\n\r\n\t\t}\r\n\r\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\r\n\r\n\t\t\tvar polyLen = inPolygon.length;\r\n\r\n\t\t\t// inPt on polygon contour => immediate success    or\r\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\r\n\t\t\t//  with the horizontal line through inPt, left of inPt\r\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\r\n\t\t\tvar inside = false;\r\n\t\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\r\n\t\t\t\tvar edgeLowPt  = inPolygon[ p ];\r\n\t\t\t\tvar edgeHighPt = inPolygon[ q ];\r\n\r\n\t\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n\t\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\r\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\r\n\r\n\t\t\t\t\t// not parallel\r\n\t\t\t\t\tif ( edgeDy < 0 ) {\r\n\r\n\t\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\r\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\r\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\r\n\r\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\r\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// parallel or collinear\r\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\r\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n\t\t\t\t\t// continue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn\tinside;\r\n\r\n\t\t}\r\n\r\n\t\tvar isClockWise = THREE.ShapeUtils.isClockWise;\r\n\r\n\t\tvar subPaths = extractSubpaths( this.actions );\r\n\t\tif ( subPaths.length === 0 ) return [];\r\n\r\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\t\tvar solid, tmpPath, tmpShape, shapes = [];\r\n\r\n\t\tif ( subPaths.length === 1 ) {\r\n\r\n\t\t\ttmpPath = subPaths[ 0 ];\r\n\t\t\ttmpShape = new THREE.Shape();\r\n\t\t\ttmpShape.actions = tmpPath.actions;\r\n\t\t\ttmpShape.curves = tmpPath.curves;\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t\treturn shapes;\r\n\r\n\t\t}\r\n\r\n\t\tvar holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\r\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\r\n\t\t// console.log(\"Holes first\", holesFirst);\r\n\r\n\t\tvar betterShapeHoles = [];\r\n\t\tvar newShapes = [];\r\n\t\tvar newShapeHoles = [];\r\n\t\tvar mainIdx = 0;\r\n\t\tvar tmpPoints;\r\n\r\n\t\tnewShapes[ mainIdx ] = undefined;\r\n\t\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\t\tfor ( var i = 0, l = subPaths.length; i < l; i ++ ) {\r\n\r\n\t\t\ttmpPath = subPaths[ i ];\r\n\t\t\ttmpPoints = tmpPath.getPoints();\r\n\t\t\tsolid = isClockWise( tmpPoints );\r\n\t\t\tsolid = isCCW ? ! solid : solid;\r\n\r\n\t\t\tif ( solid ) {\r\n\r\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\r\n\r\n\t\t\t\tnewShapes[ mainIdx ] = { s: new THREE.Shape(), p: tmpPoints };\r\n\t\t\t\tnewShapes[ mainIdx ].s.actions = tmpPath.actions;\r\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\r\n\r\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\r\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\t\t\t\t//console.log('cw', i);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\r\n\r\n\t\t\t\t//console.log('ccw', i);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// only Holes? -> probably all Shapes with wrong orientation\r\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\t\tif ( newShapes.length > 1 ) {\r\n\r\n\t\t\tvar ambiguous = false;\r\n\t\t\tvar toChange = [];\r\n\r\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\t\tvar sho = newShapeHoles[ sIdx ];\r\n\r\n\t\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\r\n\t\t\t\t\tvar ho = sho[ hIdx ];\r\n\t\t\t\t\tvar hole_unassigned = true;\r\n\r\n\t\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\r\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\r\n\r\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\t\t\t\thole_unassigned = false;\r\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tambiguous = true;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\r\n\t\t\tif ( toChange.length > 0 ) {\r\n\r\n\t\t\t\t// console.log(\"to change: \", toChange);\r\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar tmpHoles;\r\n\r\n\t\tfor ( var i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\r\n\t\t\ttmpShape = newShapes[ i ].s;\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t\ttmpHoles = newShapeHoles[ i ];\r\n\r\n\t\t\tfor ( var j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//console.log(\"shape\", shapes);\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/extras/core/Shape.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Defines a 2d shape plane using paths.\r\n **/\r\n\r\n// STEP 1 Create a path.\r\n// STEP 2 Turn path into shape.\r\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\r\n// STEP 3a - Extract points from each shape, turn to vertices\r\n// STEP 3b - Triangulate each shape, add faces.\r\n\r\nTHREE.Shape = function () {\r\n\r\n\tTHREE.Path.apply( this, arguments );\r\n\r\n\tthis.holes = [];\r\n\r\n};\r\n\r\nTHREE.Shape.prototype = Object.assign( Object.create( THREE.Path.prototype ), {\r\n\r\n\tconstructor: THREE.Shape,\r\n\r\n\t// Convenience method to return ExtrudeGeometry\r\n\r\n\textrude: function ( options ) {\r\n\r\n\t\treturn new THREE.ExtrudeGeometry( this, options );\r\n\r\n\t},\r\n\r\n\t// Convenience method to return ShapeGeometry\r\n\r\n\tmakeGeometry: function ( options ) {\r\n\r\n\t\treturn new THREE.ShapeGeometry( this, options );\r\n\r\n\t},\r\n\r\n\tgetPointsHoles: function ( divisions ) {\r\n\r\n\t\tvar holesPts = [];\r\n\r\n\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\r\n\r\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\r\n\r\n\t\t}\r\n\r\n\t\treturn holesPts;\r\n\r\n\t},\r\n\r\n\t// Get points of shape and holes (keypoints based on segments parameter)\r\n\r\n\textractAllPoints: function ( divisions ) {\r\n\r\n\t\treturn {\r\n\r\n\t\t\tshape: this.getPoints( divisions ),\r\n\t\t\tholes: this.getPointsHoles( divisions )\r\n\r\n\t\t};\r\n\r\n\t},\r\n\r\n\textractPoints: function ( divisions ) {\r\n\r\n\t\treturn this.extractAllPoints( divisions );\r\n\r\n\t}\r\n\r\n} );\r\n\r\n// File:src/extras/curves/LineCurve.js\r\n\r\n/**************************************************************\r\n *\tLine\r\n **************************************************************/\r\n\r\nTHREE.LineCurve = function ( v1, v2 ) {\r\n\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.LineCurve.prototype.constructor = THREE.LineCurve;\r\n\r\nTHREE.LineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar point = this.v2.clone().sub( this.v1 );\r\n\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\n// Line curve is linear, so we can overwrite default getPointAt\r\n\r\nTHREE.LineCurve.prototype.getPointAt = function ( u ) {\r\n\r\n\treturn this.getPoint( u );\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangent = this.v2.clone().sub( this.v1 );\r\n\r\n\treturn tangent.normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.QuadraticBezierCurve = function ( v0, v1, v2 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.QuadraticBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve;\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar b2 = THREE.ShapeUtils.b2;\r\n\r\n\treturn new THREE.Vector2(\r\n\t\tb2( t, this.v0.x, this.v1.x, this.v2.x ),\r\n\t\tb2( t, this.v0.y, this.v1.y, this.v2.y )\r\n\t);\r\n\r\n};\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangentQuadraticBezier = THREE.CurveUtils.tangentQuadraticBezier;\r\n\r\n\treturn new THREE.Vector2(\r\n\t\ttangentQuadraticBezier( t, this.v0.x, this.v1.x, this.v2.x ),\r\n\t\ttangentQuadraticBezier( t, this.v0.y, this.v1.y, this.v2.y )\r\n\t).normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/CubicBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve = function ( v0, v1, v2, v3 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\tthis.v3 = v3;\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve;\r\n\r\nTHREE.CubicBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar b3 = THREE.ShapeUtils.b3;\r\n\r\n\treturn new THREE.Vector2( \r\n\t\tb3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\r\n\t\tb3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y )\r\n\t);\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangentCubicBezier = THREE.CurveUtils.tangentCubicBezier;\r\n\r\n\treturn new THREE.Vector2( \r\n\t\ttangentCubicBezier( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\r\n\t\ttangentCubicBezier( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y )\r\n\t).normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/SplineCurve.js\r\n\r\n/**************************************************************\r\n *\tSpline curve\r\n **************************************************************/\r\n\r\nTHREE.SplineCurve = function ( points /* array of Vector2 */ ) {\r\n\r\n\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n};\r\n\r\nTHREE.SplineCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.SplineCurve.prototype.constructor = THREE.SplineCurve;\r\n\r\nTHREE.SplineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar points = this.points;\r\n\tvar point = ( points.length - 1 ) * t;\r\n\r\n\tvar intPoint = Math.floor( point );\r\n\tvar weight = point - intPoint;\r\n\r\n\tvar point0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\r\n\tvar point1 = points[ intPoint ];\r\n\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\tvar interpolate = THREE.CurveUtils.interpolate;\r\n\r\n\treturn new THREE.Vector2(\r\n\t\tinterpolate( point0.x, point1.x, point2.x, point3.x, weight ),\r\n\t\tinterpolate( point0.y, point1.y, point2.y, point3.y, weight )\r\n\t);\r\n\r\n};\r\n\r\n// File:src/extras/curves/EllipseCurve.js\r\n\r\n/**************************************************************\r\n *\tEllipse curve\r\n **************************************************************/\r\n\r\nTHREE.EllipseCurve = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tthis.aX = aX;\r\n\tthis.aY = aY;\r\n\r\n\tthis.xRadius = xRadius;\r\n\tthis.yRadius = yRadius;\r\n\r\n\tthis.aStartAngle = aStartAngle;\r\n\tthis.aEndAngle = aEndAngle;\r\n\r\n\tthis.aClockwise = aClockwise;\r\n\t\r\n\tthis.aRotation = aRotation || 0;\r\n\r\n};\r\n\r\nTHREE.EllipseCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve;\r\n\r\nTHREE.EllipseCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\r\n\r\n\tif ( deltaAngle < 0 ) deltaAngle += Math.PI * 2;\r\n\tif ( deltaAngle > Math.PI * 2 ) deltaAngle -= Math.PI * 2;\r\n\r\n\tvar angle;\r\n\r\n\tif ( this.aClockwise === true ) {\r\n\r\n\t\tangle = this.aEndAngle + ( 1 - t ) * ( Math.PI * 2 - deltaAngle );\r\n\r\n\t} else {\r\n\r\n\t\tangle = this.aStartAngle + t * deltaAngle;\r\n\r\n\t}\r\n\t\r\n\tvar x = this.aX + this.xRadius * Math.cos( angle );\r\n\tvar y = this.aY + this.yRadius * Math.sin( angle );\r\n\r\n\tif ( this.aRotation !== 0 ) {\r\n\r\n\t\tvar cos = Math.cos( this.aRotation );\r\n\t\tvar sin = Math.sin( this.aRotation );\r\n\r\n\t\tvar tx = x, ty = y;\r\n\r\n\t\t// Rotate the point about the center of the ellipse.\r\n\t\tx = ( tx - this.aX ) * cos - ( ty - this.aY ) * sin + this.aX;\r\n\t\ty = ( tx - this.aX ) * sin + ( ty - this.aY ) * cos + this.aY;\r\n\r\n\t}\r\n\r\n\treturn new THREE.Vector2( x, y );\r\n\r\n};\r\n\r\n// File:src/extras/curves/ArcCurve.js\r\n\r\n/**************************************************************\r\n *\tArc curve\r\n **************************************************************/\r\n\r\nTHREE.ArcCurve = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tTHREE.EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n};\r\n\r\nTHREE.ArcCurve.prototype = Object.create( THREE.EllipseCurve.prototype );\r\nTHREE.ArcCurve.prototype.constructor = THREE.ArcCurve;\r\n\r\n// File:src/extras/curves/LineCurve3.js\r\n\r\n/**************************************************************\r\n *\tLine3D\r\n **************************************************************/\r\n\r\nTHREE.LineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v1, v2 ) {\r\n\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.subVectors( this.v2, this.v1 ); // diff\r\n\t\tvector.multiplyScalar( t );\r\n\t\tvector.add( this.v1 );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.QuadraticBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar b2 = THREE.ShapeUtils.b2;\t\t\r\n\r\n\t\treturn new THREE.Vector3(\r\n\t\t\tb2( t, this.v0.x, this.v1.x, this.v2.x ),\r\n\t\t\tb2( t, this.v0.y, this.v1.y, this.v2.y ),\r\n\t\t\tb2( t, this.v0.z, this.v1.z, this.v2.z )\r\n\t\t);\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/CubicBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2, v3 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\t\tthis.v3 = v3;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar b3 = THREE.ShapeUtils.b3;\r\n\r\n\t\treturn new THREE.Vector3(\r\n\t\t\tb3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\r\n\t\t\tb3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y ),\r\n\t\t\tb3( t, this.v0.z, this.v1.z, this.v2.z, this.v3.z )\r\n\t\t);\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/SplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tSpline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.SplineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( points /* array of Vector3 */ ) {\r\n\r\n\t\tconsole.warn( 'THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3' );\r\n\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar points = this.points;\r\n\t\tvar point = ( points.length - 1 ) * t;\r\n\r\n\t\tvar intPoint = Math.floor( point );\r\n\t\tvar weight = point - intPoint;\r\n\r\n\t\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ];\r\n\t\tvar point1 = points[ intPoint ];\r\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\t\tvar interpolate = THREE.CurveUtils.interpolate;\r\n\r\n\t\treturn new THREE.Vector3(\r\n\t\t\tinterpolate( point0.x, point1.x, point2.x, point3.x, weight ),\r\n\t\t\tinterpolate( point0.y, point1.y, point2.y, point3.y, weight ),\r\n\t\t\tinterpolate( point0.z, point1.z, point2.z, point3.z, weight )\r\n\t\t);\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/CatmullRomCurve3.js\r\n\r\n/**\r\n * @author zz85 https://github.com/zz85\r\n *\r\n * Centripetal CatmullRom Curve - which is useful for avoiding\r\n * cusps and self-intersections in non-uniform catmull rom curves.\r\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\r\n *\r\n * curve.type accepts centripetal(default), chordal and catmullrom\r\n * curve.tension is used for catmullrom which defaults to 0.5\r\n */\r\n\r\nTHREE.CatmullRomCurve3 = ( function() {\r\n\r\n\tvar\r\n\t\ttmp = new THREE.Vector3(),\r\n\t\tpx = new CubicPoly(),\r\n\t\tpy = new CubicPoly(),\r\n\t\tpz = new CubicPoly();\r\n\r\n\t/*\r\n\tBased on an optimized c++ solution in\r\n\t - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\r\n\t - http://ideone.com/NoEbVM\r\n\r\n\tThis CubicPoly class could be used for reusing some variables and calculations,\r\n\tbut for three.js curve use, it could be possible inlined and flatten into a single function call\r\n\twhich can be placed in CurveUtils.\r\n\t*/\r\n\r\n\tfunction CubicPoly() {\r\n\r\n\t}\r\n\r\n\t/*\r\n\t * Compute coefficients for a cubic polynomial\r\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\r\n\t * such that\r\n\t *   p(0) = x0, p(1) = x1\r\n\t *  and\r\n\t *   p'(0) = t0, p'(1) = t1.\r\n\t */\r\n\tCubicPoly.prototype.init = function( x0, x1, t0, t1 ) {\r\n\r\n\t\tthis.c0 = x0;\r\n\t\tthis.c1 = t0;\r\n\t\tthis.c2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\r\n\t\tthis.c3 = 2 * x0 - 2 * x1 + t0 + t1;\r\n\r\n\t};\r\n\r\n\tCubicPoly.prototype.initNonuniformCatmullRom = function( x0, x1, x2, x3, dt0, dt1, dt2 ) {\r\n\r\n\t\t// compute tangents when parameterized in [t1,t2]\r\n\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\r\n\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\r\n\r\n\t\t// rescale tangents for parametrization in [0,1]\r\n\t\tt1 *= dt1;\r\n\t\tt2 *= dt1;\r\n\r\n\t\t// initCubicPoly\r\n\t\tthis.init( x1, x2, t1, t2 );\r\n\r\n\t};\r\n\r\n\t// standard Catmull-Rom spline: interpolate between x1 and x2 with previous/following points x1/x4\r\n\tCubicPoly.prototype.initCatmullRom = function( x0, x1, x2, x3, tension ) {\r\n\r\n\t\tthis.init( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\r\n\r\n\t};\r\n\r\n\tCubicPoly.prototype.calc = function( t ) {\r\n\r\n\t\tvar t2 = t * t;\r\n\t\tvar t3 = t2 * t;\r\n\t\treturn this.c0 + this.c1 * t + this.c2 * t2 + this.c3 * t3;\r\n\r\n\t};\r\n\r\n\t// Subclass Three.js curve\r\n\treturn THREE.Curve.create(\r\n\r\n\t\tfunction ( p /* array of Vector3 */ ) {\r\n\r\n\t\t\tthis.points = p || [];\r\n\t\t\tthis.closed = false;\r\n\r\n\t\t},\r\n\r\n\t\tfunction ( t ) {\r\n\r\n\t\t\tvar points = this.points,\r\n\t\t\t\tpoint, intPoint, weight, l;\r\n\r\n\t\t\tl = points.length;\r\n\r\n\t\t\tif ( l < 2 ) console.log( 'duh, you need at least 2 points' );\r\n\r\n\t\t\tpoint = ( l - ( this.closed ? 0 : 1 ) ) * t;\r\n\t\t\tintPoint = Math.floor( point );\r\n\t\t\tweight = point - intPoint;\r\n\r\n\t\t\tif ( this.closed ) {\r\n\r\n\t\t\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\r\n\r\n\t\t\t} else if ( weight === 0 && intPoint === l - 1 ) {\r\n\r\n\t\t\t\tintPoint = l - 2;\r\n\t\t\t\tweight = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar p0, p1, p2, p3; // 4 points\r\n\r\n\t\t\tif ( this.closed || intPoint > 0 ) {\r\n\r\n\t\t\t\tp0 = points[ ( intPoint - 1 ) % l ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// extrapolate first point\r\n\t\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\r\n\t\t\t\tp0 = tmp;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp1 = points[ intPoint % l ];\r\n\t\t\tp2 = points[ ( intPoint + 1 ) % l ];\r\n\r\n\t\t\tif ( this.closed || intPoint + 2 < l ) {\r\n\r\n\t\t\t\tp3 = points[ ( intPoint + 2 ) % l ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// extrapolate last point\r\n\t\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\r\n\t\t\t\tp3 = tmp;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.type === undefined || this.type === 'centripetal' || this.type === 'chordal' ) {\r\n\r\n\t\t\t\t// init Centripetal / Chordal Catmull-Rom\r\n\t\t\t\tvar pow = this.type === 'chordal' ? 0.5 : 0.25;\r\n\t\t\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\r\n\t\t\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\r\n\t\t\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\r\n\r\n\t\t\t\t// safety check for repeated points\r\n\t\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\r\n\t\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\r\n\t\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\r\n\r\n\t\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\r\n\t\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\r\n\t\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\r\n\r\n\t\t\t} else if ( this.type === 'catmullrom' ) {\r\n\r\n\t\t\t\tvar tension = this.tension !== undefined ? this.tension : 0.5;\r\n\t\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, tension );\r\n\t\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, tension );\r\n\t\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, tension );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar v = new THREE.Vector3(\r\n\t\t\t\tpx.calc( weight ),\r\n\t\t\t\tpy.calc( weight ),\r\n\t\t\t\tpz.calc( weight )\r\n\t\t\t);\r\n\r\n\t\t\treturn v;\r\n\r\n\t\t}\r\n\r\n\t);\r\n\r\n} )();\r\n\r\n// File:src/extras/curves/ClosedSplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tClosed Spline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.ClosedSplineCurve3 = function ( points ) {\r\n\r\n\tconsole.warn( 'THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3.' );\r\n\r\n\tTHREE.CatmullRomCurve3.call( this, points );\r\n\tthis.type = 'catmullrom';\r\n\tthis.closed = true;\r\n\r\n};\r\n\r\nTHREE.ClosedSplineCurve3.prototype = Object.create( THREE.CatmullRomCurve3.prototype );\r\n\r\n// File:src/extras/geometries/BoxGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\r\n */\r\n\r\nTHREE.BoxGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'BoxGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tdepth: depth,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tdepthSegments: depthSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.BoxGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry;\r\n\r\nTHREE.CubeGeometry = THREE.BoxGeometry;\r\n\r\n// File:src/extras/geometries/BoxBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\nTHREE.BoxBufferGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'BoxBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tdepth: depth,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tdepthSegments: depthSegments\r\n\t};\r\n\r\n\tvar scope = this;\r\n\r\n\t// segments\r\n\twidthSegments = Math.floor( widthSegments ) || 1;\r\n\theightSegments = Math.floor( heightSegments ) || 1;\r\n\tdepthSegments = Math.floor( depthSegments ) || 1;\r\n\r\n\t// these are used to calculate buffer length\r\n\tvar vertexCount = calculateVertexCount( widthSegments, heightSegments, depthSegments );\r\n\tvar indexCount = calculateIndexCount( widthSegments, heightSegments, depthSegments );\r\n\r\n\t// buffers\r\n\tvar indices = new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount );\r\n\tvar vertices = new Float32Array( vertexCount * 3 );\r\n\tvar normals = new Float32Array( vertexCount * 3 );\r\n\tvar uvs = new Float32Array( vertexCount * 2 );\r\n\r\n\t// offset variables\r\n\tvar vertexBufferOffset = 0;\r\n\tvar uvBufferOffset = 0;\r\n\tvar indexBufferOffset = 0;\r\n\tvar numberOfVertices = 0;\r\n\r\n\t// group variables\r\n\tvar groupStart = 0;\r\n\r\n\t// build each side of the box geometry\r\n\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height,   width,  depthSegments, heightSegments, 0 ); // px\r\n\tbuildPlane( 'z', 'y', 'x',   1, - 1, depth, height, - width,  depthSegments, heightSegments, 1 ); // nx\r\n\tbuildPlane( 'x', 'z', 'y',   1,   1, width, depth,    height, widthSegments, depthSegments,  2 ); // py\r\n\tbuildPlane( 'x', 'z', 'y',   1, - 1, width, depth,  - height, widthSegments, depthSegments,  3 ); // ny\r\n\tbuildPlane( 'x', 'y', 'z',   1, - 1, width, height,   depth,  widthSegments, heightSegments, 4 ); // pz\r\n\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth,  widthSegments, heightSegments, 5 ); // nz\r\n\r\n\t// build geometry\r\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\t// helper functions\r\n\r\n\tfunction calculateVertexCount ( w, h, d ) {\r\n\r\n\t\tvar vertices = 0;\r\n\r\n\t\t// calculate the amount of vertices for each side (plane)\r\n\t\tvertices += (w + 1) * (h + 1) * 2; // xy\r\n\t\tvertices += (w + 1) * (d + 1) * 2; // xz\r\n\t\tvertices += (d + 1) * (h + 1) * 2; // zy\r\n\r\n\t\treturn vertices;\r\n\r\n\t}\r\n\r\n\tfunction calculateIndexCount ( w, h, d ) {\r\n\r\n\t\tvar index = 0;\r\n\r\n\t\t// calculate the amount of squares for each side\r\n\t\tindex += w * h * 2; // xy\r\n\t\tindex += w * d * 2; // xz\r\n\t\tindex += d * h * 2; // zy\r\n\r\n\t\treturn index * 6; // two triangles per square => six vertices per square\r\n\r\n\t}\r\n\r\n\tfunction buildPlane ( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\r\n\r\n\t\tvar segmentWidth\t= width / gridX;\r\n\t\tvar segmentHeight = height / gridY;\r\n\r\n\t\tvar widthHalf = width / 2;\r\n\t\tvar heightHalf = height / 2;\r\n\t\tvar depthHalf = depth / 2;\r\n\r\n\t\tvar gridX1 = gridX + 1;\r\n\t\tvar gridY1 = gridY + 1;\r\n\r\n\t\tvar vertexCounter = 0;\r\n\t\tvar groupCount = 0;\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\t// generate vertices, normals and uvs\r\n\r\n\t\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\t\tvar y = iy * segmentHeight - heightHalf;\r\n\r\n\t\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\t\tvar x = ix * segmentWidth - widthHalf;\r\n\r\n\t\t\t\t// set values to correct vector component\r\n\t\t\t\tvector[ u ] = x * udir;\r\n\t\t\t\tvector[ v ] = y * vdir;\r\n\t\t\t\tvector[ w ] = depthHalf;\r\n\r\n\t\t\t\t// now apply vector to vertex buffer\r\n\t\t\t\tvertices[ vertexBufferOffset ] = vector.x;\r\n\t\t\t\tvertices[ vertexBufferOffset + 1 ] = vector.y;\r\n\t\t\t\tvertices[ vertexBufferOffset + 2 ] = vector.z;\r\n\r\n\t\t\t\t// set values to correct vector component\r\n\t\t\t\tvector[ u ] = 0;\r\n\t\t\t\tvector[ v ] = 0;\r\n\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\r\n\r\n\t\t\t\t// now apply vector to normal buffer\r\n\t\t\t\tnormals[ vertexBufferOffset ] = vector.x;\r\n\t\t\t\tnormals[ vertexBufferOffset + 1 ] = vector.y;\r\n\t\t\t\tnormals[ vertexBufferOffset + 2 ] = vector.z;\r\n\r\n\t\t\t\t// uvs\r\n\t\t\t\tuvs[ uvBufferOffset ] = ix / gridX;\r\n\t\t\t\tuvs[ uvBufferOffset + 1 ] = 1 - ( iy / gridY );\r\n\r\n\t\t\t\t// update offsets and counters\r\n\t\t\t\tvertexBufferOffset += 3;\r\n\t\t\t\tuvBufferOffset += 2;\r\n\t\t\t\tvertexCounter += 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// 1. you need three indices to draw a single face\r\n\t\t// 2. a single segment consists of two faces\r\n\t\t// 3. so we need to generate six (2*3) indices per segment\r\n\r\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\t\t// indices\r\n\t\t\t\tvar a = numberOfVertices + ix + gridX1 * iy;\r\n\t\t\t\tvar b = numberOfVertices + ix + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\t\t// face one\r\n\t\t\t\tindices[ indexBufferOffset ] = a;\r\n\t\t\t\tindices[ indexBufferOffset + 1 ] = b;\r\n\t\t\t\tindices[ indexBufferOffset + 2 ] = d;\r\n\r\n\t\t\t\t// face two\r\n\t\t\t\tindices[ indexBufferOffset + 3 ] = b;\r\n\t\t\t\tindices[ indexBufferOffset + 4 ] = c;\r\n\t\t\t\tindices[ indexBufferOffset + 5 ] = d;\r\n\r\n\t\t\t\t// update offsets and counters\r\n\t\t\t\tindexBufferOffset += 6;\r\n\t\t\t\tgroupCount += 6;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// add a group to the geometry. this will ensure multi material support\r\n\t\tscope.addGroup( groupStart, groupCount, materialIndex );\r\n\r\n\t\t// calculate new start value for groups\r\n\t\tgroupStart += groupCount;\r\n\r\n\t\t// update total number of vertices\r\n\t\tnumberOfVertices += vertexCounter;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.BoxBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.BoxBufferGeometry.prototype.constructor = THREE.BoxBufferGeometry;\r\n\r\n// File:src/extras/geometries/CircleGeometry.js\r\n\r\n/**\r\n * @author hughes\r\n */\r\n\r\nTHREE.CircleGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CircleGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\r\n\r\n};\r\n\r\nTHREE.CircleGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry;\r\n\r\n// File:src/extras/geometries/CircleBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.CircleBufferGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'CircleBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tvar vertices = segments + 2;\r\n\r\n\tvar positions = new Float32Array( vertices * 3 );\r\n\tvar normals = new Float32Array( vertices * 3 );\r\n\tvar uvs = new Float32Array( vertices * 2 );\r\n\r\n\t// center data is already zero, but need to set a few extras\r\n\tnormals[ 2 ] = 1.0;\r\n\tuvs[ 0 ] = 0.5;\r\n\tuvs[ 1 ] = 0.5;\r\n\r\n\tfor ( var s = 0, i = 3, ii = 2 ; s <= segments; s ++, i += 3, ii += 2 ) {\r\n\r\n\t\tvar segment = thetaStart + s / segments * thetaLength;\r\n\r\n\t\tpositions[ i ] = radius * Math.cos( segment );\r\n\t\tpositions[ i + 1 ] = radius * Math.sin( segment );\r\n\r\n\t\tnormals[ i + 2 ] = 1; // normal z\r\n\r\n\t\tuvs[ ii ] = ( positions[ i ] / radius + 1 ) / 2;\r\n\t\tuvs[ ii + 1 ] = ( positions[ i + 1 ] / radius + 1 ) / 2;\r\n\r\n\t}\r\n\r\n\tvar indices = [];\r\n\r\n\tfor ( var i = 1; i <= segments; i ++ ) {\r\n\r\n\t\tindices.push( i, i + 1, 0 );\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new THREE.BufferAttribute( new Uint16Array( indices ), 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.CircleBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.CircleBufferGeometry.prototype.constructor = THREE.CircleBufferGeometry;\r\n\r\n// File:src/extras/geometries/CylinderBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\nTHREE.CylinderBufferGeometry = function( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'CylinderBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tvar scope = this;\r\n\r\n\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\r\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\r\n\theight = height !== undefined ? height : 100;\r\n\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\theightSegments = Math.floor( heightSegments ) || 1;\r\n\r\n\topenEnded = openEnded !== undefined ? openEnded : false;\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0.0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : 2.0 * Math.PI;\r\n\r\n\t// used to calculate buffer length\r\n\r\n\tvar nbCap = 0;\r\n\r\n\tif ( openEnded === false ) {\r\n\r\n\t\tif ( radiusTop > 0 ) nbCap ++;\r\n\t\tif ( radiusBottom > 0 ) nbCap ++;\r\n\r\n\t}\r\n\r\n\tvar vertexCount = calculateVertexCount();\r\n\tvar indexCount = calculateIndexCount();\r\n\r\n\t// buffers\r\n\r\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ), 1 );\r\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\t// helper variables\r\n\r\n\tvar index = 0,\r\n\t    indexOffset = 0,\r\n\t    indexArray = [],\r\n\t    halfHeight = height / 2;\r\n\r\n\t// group variables\r\n\tvar groupStart = 0;\r\n\r\n\t// generate geometry\r\n\r\n\tgenerateTorso();\r\n\r\n\tif ( openEnded === false ) {\r\n\r\n\t\tif ( radiusTop > 0 ) generateCap( true );\r\n\t\tif ( radiusBottom > 0 ) generateCap( false );\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.addAttribute( 'position', vertices );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\t// helper functions\r\n\r\n\tfunction calculateVertexCount() {\r\n\r\n\t\tvar count = ( radialSegments + 1 ) * ( heightSegments + 1 );\r\n\r\n\t\tif ( openEnded === false ) {\r\n\r\n\t\t\tcount += ( ( radialSegments + 1 ) * nbCap ) + ( radialSegments * nbCap );\r\n\r\n\t\t}\r\n\r\n\t\treturn count;\r\n\r\n\t}\r\n\r\n\tfunction calculateIndexCount() {\r\n\r\n\t\tvar count = radialSegments * heightSegments * 2 * 3;\r\n\r\n\t\tif ( openEnded === false ) {\r\n\r\n\t\t\tcount += radialSegments * nbCap * 3;\r\n\r\n\t\t}\r\n\r\n\t\treturn count;\r\n\r\n\t}\r\n\r\n\tfunction generateTorso() {\r\n\r\n\t\tvar x, y;\r\n\t\tvar normal = new THREE.Vector3();\r\n\t\tvar vertex = new THREE.Vector3();\r\n\r\n\t\tvar groupCount = 0;\r\n\r\n\t\t// this will be used to calculate the normal\r\n\t\tvar tanTheta = ( radiusBottom - radiusTop ) / height;\r\n\r\n\t\t// generate vertices, normals and uvs\r\n\r\n\t\tfor ( y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\t\tvar indexRow = [];\r\n\r\n\t\t\tvar v = y / heightSegments;\r\n\r\n\t\t\t// calculate the radius of the current row\r\n\t\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\r\n\t\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\t\tvar u = x / radialSegments;\r\n\r\n\t\t\t\t// vertex\r\n\t\t\t\tvertex.x = radius * Math.sin( u * thetaLength + thetaStart );\r\n\t\t\t\tvertex.y = - v * height + halfHeight;\r\n\t\t\t\tvertex.z = radius * Math.cos( u * thetaLength + thetaStart );\r\n\t\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t\t// normal\r\n\t\t\t\tnormal.copy( vertex );\r\n\r\n\t\t\t\t// handle special case if radiusTop/radiusBottom is zero\r\n\r\n\t\t\t\tif ( ( radiusTop === 0 && y === 0 ) || ( radiusBottom === 0 && y === heightSegments ) ) {\r\n\r\n\t\t\t\t\tnormal.x = Math.sin( u * thetaLength + thetaStart );\r\n\t\t\t\t\tnormal.z = Math.cos( u * thetaLength + thetaStart );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnormal.setY( Math.sqrt( normal.x * normal.x + normal.z * normal.z ) * tanTheta ).normalize();\r\n\t\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\r\n\r\n\t\t\t\t// uv\r\n\t\t\t\tuvs.setXY( index, u, 1 - v );\r\n\r\n\t\t\t\t// save index of vertex in respective row\r\n\t\t\t\tindexRow.push( index );\r\n\r\n\t\t\t\t// increase index\r\n\t\t\t\tindex ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// now save vertices of the row in our index array\r\n\t\t\tindexArray.push( indexRow );\r\n\r\n\t\t}\r\n\r\n\t\t// generate indices\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tfor ( y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\t\t\t// we use the index array to access the correct indices\r\n\t\t\t\tvar i1 = indexArray[ y ][ x ];\r\n\t\t\t\tvar i2 = indexArray[ y + 1 ][ x ];\r\n\t\t\t\tvar i3 = indexArray[ y + 1 ][ x + 1 ];\r\n\t\t\t\tvar i4 = indexArray[ y ][ x + 1 ];\r\n\r\n\t\t\t\t// face one\r\n\t\t\t\tindices.setX( indexOffset, i1 ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, i2 ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, i4 ); indexOffset ++;\r\n\r\n\t\t\t\t// face two\r\n\t\t\t\tindices.setX( indexOffset, i2 ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, i3 ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, i4 ); indexOffset ++;\r\n\r\n\t\t\t\t// update counters\r\n\t\t\t\tgroupCount += 6;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// add a group to the geometry. this will ensure multi material support\r\n\t\tscope.addGroup( groupStart, groupCount, 0 );\r\n\r\n\t\t// calculate new start value for groups\r\n\t\tgroupStart += groupCount;\r\n\r\n\t}\r\n\r\n\tfunction generateCap( top ) {\r\n\r\n\t\tvar x, centerIndexStart, centerIndexEnd;\r\n\r\n\t\tvar uv = new THREE.Vector2();\r\n\t\tvar vertex = new THREE.Vector3();\r\n\r\n\t\tvar groupCount = 0;\r\n\r\n\t\tvar radius = ( top === true ) ? radiusTop : radiusBottom;\r\n\t\tvar sign = ( top === true ) ? 1 : - 1;\r\n\r\n\t\t// save the index of the first center vertex\r\n\t\tcenterIndexStart = index;\r\n\r\n\t\t// first we generate the center vertex data of the cap.\r\n\t\t// because the geometry needs one set of uvs per face,\r\n\t\t// we must generate a center vertex per face/segment\r\n\r\n\t\tfor ( x = 1; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertices.setXYZ( index, 0, halfHeight * sign, 0 );\r\n\r\n\t\t\t// normal\r\n\t\t\tnormals.setXYZ( index, 0, sign, 0 );\r\n\r\n\t\t\t// uv\r\n\t\t\tuv.x = 0.5;\r\n\t\t\tuv.y = 0.5;\r\n\r\n\t\t\tuvs.setXY( index, uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\t// save the index of the last center vertex\r\n\t\tcenterIndexEnd = index;\r\n\r\n\t\t// now we generate the surrounding vertices, normals and uvs\r\n\r\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / radialSegments;\r\n\t\t\tvar theta = u * thetaLength + thetaStart;\r\n\r\n\t\t\tvar cosTheta = Math.cos( theta );\r\n\t\t\tvar sinTheta = Math.sin( theta );\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertex.x = radius * sinTheta;\r\n\t\t\tvertex.y = halfHeight * sign;\r\n\t\t\tvertex.z = radius * cosTheta;\r\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\t\t\tnormals.setXYZ( index, 0, sign, 0 );\r\n\r\n\t\t\t// uv\r\n\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\r\n\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\r\n\t\t\tuvs.setXY( index, uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\t// generate indices\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tvar c = centerIndexStart + x;\r\n\t\t\tvar i = centerIndexEnd + x;\r\n\r\n\t\t\tif ( top === true ) {\r\n\r\n\t\t\t\t// face top\r\n\t\t\t\tindices.setX( indexOffset, i ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, i + 1 ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, c ); indexOffset ++;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// face bottom\r\n\t\t\t\tindices.setX( indexOffset, i + 1 ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, i ); indexOffset ++;\r\n\t\t\t\tindices.setX( indexOffset, c ); indexOffset ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// update counters\r\n\t\t\tgroupCount += 3;\r\n\r\n\t\t}\r\n\r\n\t\t// add a group to the geometry. this will ensure multi material support\r\n\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\r\n\r\n\t\t// calculate new start value for groups\r\n\t\tgroupStart += groupCount;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.CylinderBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.CylinderBufferGeometry.prototype.constructor = THREE.CylinderBufferGeometry;\r\n\r\n// File:src/extras/geometries/CylinderGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CylinderGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.CylinderGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry;\r\n\r\n// File:src/extras/geometries/ConeBufferGeometry.js\r\n\r\n/*\r\n * @author: abelnation / http://github.com/abelnation\r\n */\r\n\r\nTHREE.ConeBufferGeometry = function (\r\n\tradius, height,\r\n\tradialSegments, heightSegments,\r\n\topenEnded, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.CylinderBufferGeometry.call( this,\r\n\t\t0, radius, height,\r\n\t\tradialSegments, heightSegments,\r\n\t\topenEnded, thetaStart, thetaLength );\r\n\r\n\tthis.type = 'ConeBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n};\r\n\r\nTHREE.ConeBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.ConeBufferGeometry.prototype.constructor = THREE.ConeBufferGeometry;\r\n\r\n// File:src/extras/geometries/ConeGeometry.js\r\n\r\n/**\r\n * @author abelnation / http://github.com/abelnation\r\n */\r\n\r\nTHREE.ConeGeometry = function (\r\n\tradius, height,\r\n\tradialSegments, heightSegments,\r\n\topenEnded, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.CylinderGeometry.call( this,\r\n\t\t0, radius, height,\r\n\t\tradialSegments, heightSegments,\r\n\t\topenEnded, thetaStart, thetaLength );\r\n\r\n\tthis.type = 'ConeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n};\r\n\r\nTHREE.ConeGeometry.prototype = Object.create( THREE.CylinderGeometry.prototype );\r\nTHREE.ConeGeometry.prototype.constructor = THREE.ConeGeometry;\r\n\r\n// File:src/extras/geometries/EdgesGeometry.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.EdgesGeometry = function ( geometry, thresholdAngle ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\r\n\r\n\tvar thresholdDot = Math.cos( THREE.Math.DEG2RAD * thresholdAngle );\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\r\n\tfunction sortFunction( a, b ) {\r\n\r\n\t\treturn a - b;\r\n\r\n\t}\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\tvar geometry2;\r\n\r\n\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tgeometry2 = new THREE.Geometry();\r\n\t\tgeometry2.fromBufferGeometry( geometry );\r\n\r\n\t} else {\r\n\r\n\t\tgeometry2 = geometry.clone();\r\n\r\n\t}\r\n\r\n\tgeometry2.mergeVertices();\r\n\tgeometry2.computeFaceNormals();\r\n\r\n\tvar vertices = geometry2.vertices;\r\n\tvar faces = geometry2.faces;\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tvar face = faces[ i ];\r\n\r\n\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\tvar key = edge.toString();\r\n\r\n\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\thash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thash[ key ].face2 = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar coords = [];\r\n\r\n\tfor ( var key in hash ) {\r\n\r\n\t\tvar h = hash[ key ];\r\n\r\n\t\tif ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) <= thresholdDot ) {\r\n\r\n\t\t\tvar vertex = vertices[ h.vert1 ];\r\n\t\t\tcoords.push( vertex.x );\r\n\t\t\tcoords.push( vertex.y );\r\n\t\t\tcoords.push( vertex.z );\r\n\r\n\t\t\tvertex = vertices[ h.vert2 ];\r\n\t\t\tcoords.push( vertex.x );\r\n\t\t\tcoords.push( vertex.y );\r\n\t\t\tcoords.push( vertex.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( coords ), 3 ) );\r\n\r\n};\r\n\r\nTHREE.EdgesGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.EdgesGeometry.prototype.constructor = THREE.EdgesGeometry;\r\n\r\n// File:src/extras/geometries/ExtrudeGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n * Creates extruded geometry from a path shape.\r\n *\r\n * parameters = {\r\n *\r\n *  curveSegments: <int>, // number of points on the curves\r\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\r\n *  amount: <int>, // Depth to extrude the shape\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n *  bevelSize: <float>, // how far from shape outline is bevel\r\n *  bevelSegments: <int>, // number of bevel layers\r\n *\r\n *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\r\n *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\r\n *\r\n *  uvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ExtrudeGeometry = function ( shapes, options ) {\r\n\r\n\tif ( typeof( shapes ) === \"undefined\" ) {\r\n\r\n\t\tshapes = [];\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ExtrudeGeometry';\r\n\r\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\t// can't really use automatic vertex normals\r\n\t// as then front and back sides get smoothed too\r\n\t// should do separate smoothing just for sides\r\n\r\n\t//this.computeVertexNormals();\r\n\r\n\t//console.log( \"took\", ( Date.now() - startTime ) );\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry;\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\r\n\tvar sl = shapes.length;\r\n\r\n\tfor ( var s = 0; s < sl; s ++ ) {\r\n\r\n\t\tvar shape = shapes[ s ];\r\n\t\tthis.addShape( shape, options );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tvar amount = options.amount !== undefined ? options.amount : 100;\r\n\r\n\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\r\n\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\r\n\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\r\n\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\r\n\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar steps = options.steps !== undefined ? options.steps : 1;\r\n\r\n\tvar extrudePath = options.extrudePath;\r\n\tvar extrudePts, extrudeByPath = false;\r\n\r\n\t// Use default WorldUVGenerator if no UV generators are specified.\r\n\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;\r\n\r\n\tvar splineTube, binormal, normal, position2;\r\n\tif ( extrudePath ) {\r\n\r\n\t\textrudePts = extrudePath.getSpacedPoints( steps );\r\n\r\n\t\textrudeByPath = true;\r\n\t\tbevelEnabled = false; // bevels not supported for path extrusion\r\n\r\n\t\t// SETUP TNB variables\r\n\r\n\t\t// Reuse TNB from TubeGeomtry for now.\r\n\t\t// TODO1 - have a .isClosed in spline?\r\n\r\n\t\tsplineTube = options.frames !== undefined ? options.frames : new THREE.TubeGeometry.FrenetFrames( extrudePath, steps, false );\r\n\r\n\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\r\n\t\tbinormal = new THREE.Vector3();\r\n\t\tnormal = new THREE.Vector3();\r\n\t\tposition2 = new THREE.Vector3();\r\n\r\n\t}\r\n\r\n\t// Safeguards if bevels are not enabled\r\n\r\n\tif ( ! bevelEnabled ) {\r\n\r\n\t\tbevelSegments = 0;\r\n\t\tbevelThickness = 0;\r\n\t\tbevelSize = 0;\r\n\r\n\t}\r\n\r\n\t// Variables initialization\r\n\r\n\tvar ahole, h, hl; // looping of holes\r\n\tvar scope = this;\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.ShapeUtils.isClockWise( vertices );\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\r\n\t\t\tif ( THREE.ShapeUtils.isClockWise( ahole ) ) {\r\n\r\n\t\t\t\tholes[ h ] = ahole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\r\n\r\n\t}\r\n\r\n\r\n\tvar faces = THREE.ShapeUtils.triangulateShape( vertices, holes );\r\n\r\n\t/* Vertices */\r\n\r\n\tvar contour = vertices; // vertices has all points but contour has only points of circumference\r\n\r\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\tvertices = vertices.concat( ahole );\r\n\r\n\t}\r\n\r\n\r\n\tfunction scalePt2 ( pt, vec, size ) {\r\n\r\n\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\r\n\r\n\t\treturn vec.clone().multiplyScalar( size ).add( pt );\r\n\r\n\t}\r\n\r\n\tvar b, bs, t, z,\r\n\t\tvert, vlen = vertices.length,\r\n\t\tface, flen = faces.length;\r\n\r\n\r\n\t// Find directions for point movement\r\n\r\n\r\n\tfunction getBevelVec( inPt, inPrev, inNext ) {\r\n\r\n\t\t// computes for inPt the corresponding point inPt' on a new contour\r\n\t\t//   shifted by 1 unit (length of normalized vector) to the left\r\n\t\t// if we walk along contour clockwise, this new contour is outside the old one\r\n\t\t//\r\n\t\t// inPt' is the intersection of the two lines parallel to the two\r\n\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\r\n\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\r\n\r\n\t\t// good reading for geometry algorithms (here: line-line intersection)\r\n\t\t// http://geomalgorithms.com/a05-_intersect-1.html\r\n\r\n\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\r\n\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\r\n\r\n\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\r\n\t\t// check for collinear edges\r\n\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\r\n\r\n\t\t\t// not collinear\r\n\r\n\t\t\t// length of vectors for normalizing\r\n\r\n\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\r\n\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\r\n\t\t\t// shift adjacent points by unit vectors to the left\r\n\r\n\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\r\n\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\r\n\t\t\t// scaling factor for v_prev to intersection point\r\n\r\n\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\r\n\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\t\t// vector from inPt to intersection point\r\n\r\n\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\r\n\t\t\t// Don't normalize!, otherwise sharp corners become ugly\r\n\t\t\t//  but prevent crazy spikes\r\n\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\r\n\t\t\tif ( v_trans_lensq <= 2 ) {\r\n\r\n\t\t\t\treturn\tnew THREE.Vector2( v_trans_x, v_trans_y );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// handle special case of collinear edges\r\n\r\n\t\t\tvar direction_eq = false;\t\t// assumes: opposite\r\n\t\t\tif ( v_prev_x > Number.EPSILON ) {\r\n\r\n\t\t\t\tif ( v_next_x > Number.EPSILON ) {\r\n\r\n\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\r\n\r\n\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( direction_eq ) {\r\n\r\n\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\r\n\t\t\t\tv_trans_x = - v_prev_y;\r\n\t\t\t\tv_trans_y =  v_prev_x;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\r\n\t\t\t\tv_trans_x = v_prev_x;\r\n\t\t\t\tv_trans_y = v_prev_y;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn\tnew THREE.Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\r\n\t}\r\n\r\n\r\n\tvar contourMovements = [];\r\n\r\n\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\tif ( j === il ) j = 0;\r\n\t\tif ( k === il ) k = 0;\r\n\r\n\t\t//  (j)---(i)---(k)\r\n\t\t// console.log('i,j,k', i, j , k)\r\n\r\n\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\r\n\t}\r\n\r\n\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\r\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\toneHoleMovements = [];\r\n\r\n\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\t\tif ( j === il ) j = 0;\r\n\t\t\tif ( k === il ) k = 0;\r\n\r\n\t\t\t//  (j)---(i)---(k)\r\n\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\r\n\t\t}\r\n\r\n\t\tholesMovements.push( oneHoleMovements );\r\n\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\r\n\t}\r\n\r\n\r\n\t// Loop bevelSegments, 1 for the front, 1 for the back\r\n\r\n\tfor ( b = 0; b < bevelSegments; b ++ ) {\r\n\r\n\t\t//for ( b = bevelSegments; b > 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\r\n\t\t//z = bevelThickness * t;\r\n\t\tbs = bevelSize * ( Math.sin ( t * Math.PI / 2 ) ); // curved\r\n\t\t//bs = bevelSize * t; // linear\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\r\n\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tbs = bevelSize;\r\n\r\n\t// Back facing vertices\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\tv( vert.x, vert.y, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\r\n\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\r\n\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\r\n\r\n\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Add stepped vertices...\r\n\t// Including front facing vertices\r\n\r\n\tvar s;\r\n\r\n\tfor ( s = 1; s <= steps; s ++ ) {\r\n\r\n\t\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\tv( vert.x, vert.y, amount / steps * s );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\r\n\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\r\n\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\r\n\r\n\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Add bevel segments planes\r\n\r\n\t//for ( b = 1; b <= bevelSegments; b ++ ) {\r\n\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\t\t//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\r\n\t\tbs = bevelSize * Math.sin ( t * Math.PI / 2 );\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/* Faces */\r\n\r\n\t// Top and bottom faces\r\n\r\n\tbuildLidFaces();\r\n\r\n\t// Sides faces\r\n\r\n\tbuildSideFaces();\r\n\r\n\r\n\t/////  Internal functions\r\n\r\n\tfunction buildLidFaces() {\r\n\r\n\t\tif ( bevelEnabled ) {\r\n\r\n\t\t\tvar layer = 0; // steps + 1\r\n\t\t\tvar offset = vlen * layer;\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlayer = steps + bevelSegments * 2;\r\n\t\t\toffset = vlen * layer;\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Create faces for the z-sides of the shape\r\n\r\n\tfunction buildSideFaces() {\r\n\r\n\t\tvar layeroffset = 0;\r\n\t\tsidewalls( contour, layeroffset );\r\n\t\tlayeroffset += contour.length;\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\tsidewalls( ahole, layeroffset );\r\n\r\n\t\t\t//, true\r\n\t\t\tlayeroffset += ahole.length;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction sidewalls( contour, layeroffset ) {\r\n\r\n\t\tvar j, k;\r\n\t\ti = contour.length;\r\n\r\n\t\twhile ( -- i >= 0 ) {\r\n\r\n\t\t\tj = i;\r\n\t\t\tk = i - 1;\r\n\t\t\tif ( k < 0 ) k = contour.length - 1;\r\n\r\n\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\r\n\r\n\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\r\n\r\n\t\t\tfor ( s = 0; s < sl; s ++ ) {\r\n\r\n\t\t\t\tvar slen1 = vlen * s;\r\n\t\t\t\tvar slen2 = vlen * ( s + 1 );\r\n\r\n\t\t\t\tvar a = layeroffset + j + slen1,\r\n\t\t\t\t\tb = layeroffset + k + slen1,\r\n\t\t\t\t\tc = layeroffset + k + slen2,\r\n\t\t\t\t\td = layeroffset + j + slen2;\r\n\r\n\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tfunction v( x, y, z ) {\r\n\r\n\t\tscope.vertices.push( new THREE.Vector3( x, y, z ) );\r\n\r\n\t}\r\n\r\n\tfunction f3( a, b, c ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\r\n\t\tscope.faces.push( new THREE.Face3( a, b, c, null, null, 0 ) );\r\n\r\n\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\r\n\r\n\t\tscope.faceVertexUvs[ 0 ].push( uvs );\r\n\r\n\t}\r\n\r\n\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\t\td += shapesOffset;\r\n\r\n\t\tscope.faces.push( new THREE.Face3( a, b, d, null, null, 1 ) );\r\n\t\tscope.faces.push( new THREE.Face3( b, c, d, null, null, 1 ) );\r\n\r\n\t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\r\n\r\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\r\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.WorldUVGenerator = {\r\n\r\n\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\r\n\t\treturn [\r\n\t\t\tnew THREE.Vector2( a.x, a.y ),\r\n\t\t\tnew THREE.Vector2( b.x, b.y ),\r\n\t\t\tnew THREE.Vector2( c.x, c.y )\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\t\tvar d = vertices[ indexD ];\r\n\r\n\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.x, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.x, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.x, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.x, 1 - d.z )\r\n\t\t\t];\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.y, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.y, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.y, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.y, 1 - d.z )\r\n\t\t\t];\r\n\r\n\t\t}\r\n\r\n\t}\r\n};\r\n\r\n// File:src/extras/geometries/ShapeGeometry.js\r\n\r\n/**\r\n * @author jonobr1 / http://jonobr1.com\r\n *\r\n * Creates a one-sided polygonal geometry from a path shape. Similar to\r\n * ExtrudeGeometry.\r\n *\r\n * parameters = {\r\n *\r\n *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\r\n *\r\n *\tmaterial: <int> // material index for front and back faces\r\n *\tuvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ShapeGeometry = function ( shapes, options ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ShapeGeometry';\r\n\r\n\tif ( Array.isArray( shapes ) === false ) shapes = [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.ShapeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry;\r\n\r\n/**\r\n * Add an array of shapes to THREE.ShapeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\r\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\tthis.addShape( shapes[ i ], options );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tif ( options === undefined ) options = {};\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar material = options.material;\r\n\tvar uvgen = options.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : options.UVGenerator;\r\n\r\n\t//\r\n\r\n\tvar i, l, hole;\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.ShapeUtils.isClockWise( vertices );\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe...\r\n\r\n\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\t\thole = holes[ i ];\r\n\r\n\t\t\tif ( THREE.ShapeUtils.isClockWise( hole ) ) {\r\n\r\n\t\t\t\tholes[ i ] = hole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false;\r\n\r\n\t}\r\n\r\n\tvar faces = THREE.ShapeUtils.triangulateShape( vertices, holes );\r\n\r\n\t// Vertices\r\n\r\n\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\thole = holes[ i ];\r\n\t\tvertices = vertices.concat( hole );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar vert, vlen = vertices.length;\r\n\tvar face, flen = faces.length;\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = vertices[ i ];\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( vert.x, vert.y, 0 ) );\r\n\r\n\t}\r\n\r\n\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\tface = faces[ i ];\r\n\r\n\t\tvar a = face[ 0 ] + shapesOffset;\r\n\t\tvar b = face[ 1 ] + shapesOffset;\r\n\t\tvar c = face[ 2 ] + shapesOffset;\r\n\r\n\t\tthis.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\r\n\t\tthis.faceVertexUvs[ 0 ].push( uvgen.generateTopUV( this, a, b, c ) );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/LatheBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\n // points - to create a closed torus, one must use a set of points\r\n //    like so: [ a, b, c, d, a ], see first is the same as last.\r\n // segments - the number of circumference segments to create\r\n // phiStart - the starting radian\r\n // phiLength - the radian (0 to 2PI) range of the lathed section\r\n //    2PI is a closed lathe, less than 2PI is a portion.\r\n\r\nTHREE.LatheBufferGeometry = function ( points, segments, phiStart, phiLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'LatheBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tsegments = Math.floor( segments ) || 12;\r\n\tphiStart = phiStart || 0;\r\n\tphiLength = phiLength || Math.PI * 2;\r\n\r\n\t// clamp phiLength so it's in range of [ 0, 2PI ]\r\n\tphiLength = THREE.Math.clamp( phiLength, 0, Math.PI * 2 );\r\n\r\n\t// these are used to calculate buffer length\r\n\tvar vertexCount = ( segments + 1 ) * points.length;\r\n\tvar indexCount = segments * points.length * 2 * 3;\r\n\r\n\t// buffers\r\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ) , 1 );\r\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\t// helper variables\r\n\tvar index = 0, indexOffset = 0, base;\r\n\tvar inversePointLength = 1.0 / ( points.length - 1 );\r\n\tvar inverseSegments = 1.0 / segments;\r\n\tvar vertex = new THREE.Vector3();\r\n\tvar uv = new THREE.Vector2();\r\n\tvar i, j;\r\n\r\n\t// generate vertices and uvs\r\n\r\n\tfor ( i = 0; i <= segments; i ++ ) {\r\n\r\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\r\n\r\n\t\tvar sin = Math.sin( phi );\r\n\t\tvar cos = Math.cos( phi );\r\n\r\n\t\tfor ( j = 0; j <= ( points.length - 1 ); j ++ ) {\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertex.x = points[ j ].x * sin;\r\n\t\t\tvertex.y = points[ j ].y;\r\n\t\t\tvertex.z = points[ j ].x * cos;\r\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// uv\r\n\t\t\tuv.x = i / segments;\r\n\t\t\tuv.y = j / ( points.length - 1 );\r\n\t\t\tuvs.setXY( index, uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( i = 0; i < segments; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < ( points.length - 1 ); j ++ ) {\r\n\r\n\t\t\tbase = j + i * points.length;\r\n\r\n\t\t\t// indices\r\n\t\t\tvar a = base;\r\n\t\t\tvar b = base + points.length;\r\n\t\t\tvar c = base + points.length + 1;\r\n\t\t\tvar d = base + 1;\r\n\r\n\t\t\t// face one\r\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t\t// face two\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.addAttribute( 'position', vertices );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\t// generate normals\r\n\r\n\tthis.computeVertexNormals();\r\n\r\n\t// if the geometry is closed, we need to average the normals along the seam.\r\n\t// because the corresponding vertices are identical (but still have different UVs).\r\n\r\n\tif( phiLength === Math.PI * 2 ) {\r\n\r\n\t\tvar normals = this.attributes.normal.array;\r\n\t\tvar n1 = new THREE.Vector3();\r\n\t\tvar n2 = new THREE.Vector3();\r\n\t\tvar n = new THREE.Vector3();\r\n\r\n\t\t// this is the buffer offset for the last line of vertices\r\n\t\tbase = segments * points.length * 3;\r\n\r\n\t\tfor( i = 0, j = 0; i < points.length; i ++, j += 3 ) {\r\n\r\n\t\t\t// select the normal of the vertex in the first line\r\n\t\t\tn1.x = normals[ j + 0 ];\r\n\t\t\tn1.y = normals[ j + 1 ];\r\n\t\t\tn1.z = normals[ j + 2 ];\r\n\r\n\t\t\t// select the normal of the vertex in the last line\r\n\t\t\tn2.x = normals[ base + j + 0 ];\r\n\t\t\tn2.y = normals[ base + j + 1 ];\r\n\t\t\tn2.z = normals[ base + j + 2 ];\r\n\r\n\t\t\t// average normals\r\n\t\t\tn.addVectors( n1, n2 ).normalize();\r\n\r\n\t\t\t// assign the new values to both normals\r\n\t\t\tnormals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\r\n\t\t\tnormals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\r\n\t\t\tnormals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\r\n\r\n\t\t} // next row\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LatheBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.LatheBufferGeometry.prototype.constructor = THREE.LatheBufferGeometry;\r\n\r\n// File:src/extras/geometries/LatheGeometry.js\r\n\r\n/**\r\n * @author astrodud / http://astrodud.isgreat.org/\r\n * @author zz85 / https://github.com/zz85\r\n * @author bhouston / http://clara.io\r\n */\r\n\r\n// points - to create a closed torus, one must use a set of points\r\n//    like so: [ a, b, c, d, a ], see first is the same as last.\r\n// segments - the number of circumference segments to create\r\n// phiStart - the starting radian\r\n// phiLength - the radian (0 to 2PI) range of the lathed section\r\n//    2PI is a closed lathe, less than 2PI is a portion.\r\n\r\nTHREE.LatheGeometry = function ( points, segments, phiStart, phiLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'LatheGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.LatheBufferGeometry( points, segments, phiStart, phiLength ) );\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.LatheGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry;\r\n\r\n// File:src/extras/geometries/PlaneGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PlaneGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n\r\n};\r\n\r\nTHREE.PlaneGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry;\r\n\r\n// File:src/extras/geometries/PlaneBufferGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneBufferGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'PlaneBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tvar width_half = width / 2;\r\n\tvar height_half = height / 2;\r\n\r\n\tvar gridX = Math.floor( widthSegments ) || 1;\r\n\tvar gridY = Math.floor( heightSegments ) || 1;\r\n\r\n\tvar gridX1 = gridX + 1;\r\n\tvar gridY1 = gridY + 1;\r\n\r\n\tvar segment_width = width / gridX;\r\n\tvar segment_height = height / gridY;\r\n\r\n\tvar vertices = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar normals = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar uvs = new Float32Array( gridX1 * gridY1 * 2 );\r\n\r\n\tvar offset = 0;\r\n\tvar offset2 = 0;\r\n\r\n\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\tvar y = iy * segment_height - height_half;\r\n\r\n\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\tvar x = ix * segment_width - width_half;\r\n\r\n\t\t\tvertices[ offset ] = x;\r\n\t\t\tvertices[ offset + 1 ] = - y;\r\n\r\n\t\t\tnormals[ offset + 2 ] = 1;\r\n\r\n\t\t\tuvs[ offset2 ] = ix / gridX;\r\n\t\t\tuvs[ offset2 + 1 ] = 1 - ( iy / gridY );\r\n\r\n\t\t\toffset += 3;\r\n\t\t\toffset2 += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\toffset = 0;\r\n\r\n\tvar indices = new ( ( vertices.length / 3 ) > 65535 ? Uint32Array : Uint16Array )( gridX * gridY * 6 );\r\n\r\n\tfor ( var iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\tfor ( var ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\tindices[ offset ] = a;\r\n\t\t\tindices[ offset + 1 ] = b;\r\n\t\t\tindices[ offset + 2 ] = d;\r\n\r\n\t\t\tindices[ offset + 3 ] = b;\r\n\t\t\tindices[ offset + 4 ] = c;\r\n\t\t\tindices[ offset + 5 ] = d;\r\n\r\n\t\t\toffset += 6;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n};\r\n\r\nTHREE.PlaneBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry;\r\n\r\n// File:src/extras/geometries/RingBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\nTHREE.RingBufferGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'RingBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tinnerRadius = innerRadius || 20;\r\n\touterRadius = outerRadius || 50;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\r\n\r\n\t// these are used to calculate buffer length\r\n\tvar vertexCount = ( thetaSegments + 1 ) * ( phiSegments + 1 );\r\n\tvar indexCount = thetaSegments * phiSegments * 2 * 3;\r\n\r\n\t// buffers\r\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ) , 1 );\r\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\t// some helper variables\r\n\tvar index = 0, indexOffset = 0, segment;\r\n\tvar radius = innerRadius;\r\n\tvar radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n\tvar vertex = new THREE.Vector3();\r\n\tvar uv = new THREE.Vector2();\r\n\tvar j, i;\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\t// values are generate from the inside of the ring to the outside\r\n\r\n\tfor ( j = 0; j <= phiSegments; j ++ ) {\r\n\r\n\t\tfor ( i = 0; i <= thetaSegments; i ++ ) {\r\n\r\n\t\t\tsegment = thetaStart + i / thetaSegments * thetaLength;\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\tvertex.y = radius * Math.sin( segment );\r\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal\r\n\t\t\tnormals.setXYZ( index, 0, 0, 1 );\r\n\r\n\t\t\t// uv\r\n\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\r\n\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\r\n\t\t\tuvs.setXY( index, uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex++;\r\n\r\n\t\t}\r\n\r\n\t\t// increase the radius for next row of vertices\r\n\t\tradius += radiusStep;\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( j = 0; j < phiSegments; j ++ ) {\r\n\r\n\t\tvar thetaSegmentLevel = j * ( thetaSegments + 1 );\r\n\r\n\t\tfor ( i = 0; i < thetaSegments; i ++ ) {\r\n\r\n\t\t\tsegment = i + thetaSegmentLevel;\r\n\r\n\t\t\t// indices\r\n\t\t\tvar a = segment;\r\n\t\t\tvar b = segment + thetaSegments + 1;\r\n\t\t\tvar c = segment + thetaSegments + 2;\r\n\t\t\tvar d = segment + 1;\r\n\r\n\t\t\t// face one\r\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\r\n\r\n\t\t\t// face two\r\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.addAttribute( 'position', vertices );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n};\r\n\r\nTHREE.RingBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.RingBufferGeometry.prototype.constructor = THREE.RingBufferGeometry;\r\n\r\n// File:src/extras/geometries/RingGeometry.js\r\n\r\n/**\r\n * @author Kaleb Murphy\r\n */\r\n\r\nTHREE.RingGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'RingGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\r\n\r\n};\r\n\r\nTHREE.RingGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.RingGeometry.prototype.constructor = THREE.RingGeometry;\r\n\r\n// File:src/extras/geometries/SphereGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.SphereGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'SphereGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\r\n\r\n};\r\n\r\nTHREE.SphereGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry;\r\n\r\n// File:src/extras/geometries/SphereBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n * based on THREE.SphereGeometry\r\n */\r\n\r\nTHREE.SphereBufferGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'SphereBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\r\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\r\n\tphiStart = phiStart !== undefined ? phiStart : 0;\r\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\r\n\tvar thetaEnd = thetaStart + thetaLength;\r\n\r\n\tvar vertexCount = ( ( widthSegments + 1 ) * ( heightSegments + 1 ) );\r\n\r\n\tvar positions = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\tvar index = 0, vertices = [], normal = new THREE.Vector3();\r\n\r\n\tfor ( var y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\tvar verticesRow = [];\r\n\r\n\t\tvar v = y / heightSegments;\r\n\r\n\t\tfor ( var x = 0; x <= widthSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / widthSegments;\r\n\r\n\t\t\tvar px = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\t\tvar py = radius * Math.cos( thetaStart + v * thetaLength );\r\n\t\t\tvar pz = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\r\n\t\t\tnormal.set( px, py, pz ).normalize();\r\n\r\n\t\t\tpositions.setXYZ( index, px, py, pz );\r\n\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\r\n\t\t\tuvs.setXY( index, u, 1 - v );\r\n\r\n\t\t\tverticesRow.push( index );\r\n\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\tvertices.push( verticesRow );\r\n\r\n\t}\r\n\r\n\tvar indices = [];\r\n\r\n\tfor ( var y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\tfor ( var x = 0; x < widthSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ y ][ x + 1 ];\r\n\t\t\tvar v2 = vertices[ y ][ x ];\r\n\t\t\tvar v3 = vertices[ y + 1 ][ x ];\r\n\t\t\tvar v4 = vertices[ y + 1 ][ x + 1 ];\r\n\r\n\t\t\tif ( y !== 0 || thetaStart > 0 ) indices.push( v1, v2, v4 );\r\n\t\t\tif ( y !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( v2, v3, v4 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new ( positions.count > 65535 ? THREE.Uint32Attribute : THREE.Uint16Attribute )( indices, 1 ) );\r\n\tthis.addAttribute( 'position', positions );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.SphereBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.SphereBufferGeometry.prototype.constructor = THREE.SphereBufferGeometry;\r\n\r\n// File:src/extras/geometries/TextGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * Text = 3D Text\r\n *\r\n * parameters = {\r\n *  font: <THREE.Font>, // font\r\n *\r\n *  size: <float>, // size of the text\r\n *  height: <float>, // thickness to extrude text\r\n *  curveSegments: <int>, // number of points on the curves\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into text bevel goes\r\n *  bevelSize: <float> // how far from text outline is bevel\r\n * }\r\n */\r\n\r\nTHREE.TextGeometry = function ( text, parameters ) {\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar font = parameters.font;\r\n\r\n\tif ( font instanceof THREE.Font === false ) {\r\n\r\n\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\r\n\t\treturn new THREE.Geometry();\r\n\r\n\t}\r\n\r\n\tvar shapes = font.generateShapes( text, parameters.size, parameters.curveSegments );\r\n\r\n\t// translate parameters to ExtrudeGeometry API\r\n\r\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\r\n\r\n\t// defaults\r\n\r\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\r\n\tTHREE.ExtrudeGeometry.call( this, shapes, parameters );\r\n\r\n\tthis.type = 'TextGeometry';\r\n\r\n};\r\n\r\nTHREE.TextGeometry.prototype = Object.create( THREE.ExtrudeGeometry.prototype );\r\nTHREE.TextGeometry.prototype.constructor = THREE.TextGeometry;\r\n\r\n// File:src/extras/geometries/TorusBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n */\r\n\r\nTHREE.TorusBufferGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'TorusBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\ttubularSegments = Math.floor( tubularSegments ) || 6;\r\n\tarc = arc || Math.PI * 2;\r\n\r\n\t// used to calculate buffer length\r\n\tvar vertexCount = ( ( radialSegments + 1 ) * ( tubularSegments + 1 ) );\r\n\tvar indexCount = radialSegments * tubularSegments * 2 * 3;\r\n\r\n\t// buffers\r\n\tvar indices = new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount );\r\n\tvar vertices = new Float32Array( vertexCount * 3 );\r\n\tvar normals = new Float32Array( vertexCount * 3 );\r\n\tvar uvs = new Float32Array( vertexCount * 2 );\r\n\r\n\t// offset variables\r\n\tvar vertexBufferOffset = 0;\r\n\tvar uvBufferOffset = 0;\r\n\tvar indexBufferOffset = 0;\r\n\r\n\t// helper variables\r\n\tvar center = new THREE.Vector3();\r\n\tvar vertex = new THREE.Vector3();\r\n\tvar normal = new THREE.Vector3();\r\n\r\n\tvar j, i;\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tvar u = i / tubularSegments * arc;\r\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n\t\t\tvertex.z = tube * Math.sin( v );\r\n\r\n\t\t\tvertices[ vertexBufferOffset ] = vertex.x;\r\n\t\t\tvertices[ vertexBufferOffset + 1 ] = vertex.y;\r\n\t\t\tvertices[ vertexBufferOffset + 2 ] = vertex.z;\r\n\r\n\t\t\t// this vector is used to calculate the normal\r\n\t\t\tcenter.x = radius * Math.cos( u );\r\n\t\t\tcenter.y = radius * Math.sin( u );\r\n\r\n\t\t\t// normal\r\n\t\t\tnormal.subVectors( vertex, center ).normalize();\r\n\r\n\t\t\tnormals[ vertexBufferOffset ] = normal.x;\r\n\t\t\tnormals[ vertexBufferOffset + 1 ] = normal.y;\r\n\t\t\tnormals[ vertexBufferOffset + 2 ] = normal.z;\r\n\r\n\t\t\t// uv\r\n\t\t\tuvs[ uvBufferOffset ] = i / tubularSegments;\r\n\t\t\tuvs[ uvBufferOffset + 1 ] = j / radialSegments;\r\n\r\n\t\t\t// update offsets\r\n\t\t\tvertexBufferOffset += 3;\r\n\t\t\tuvBufferOffset += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( j = 1; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( i = 1; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\t// indices\r\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\r\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\r\n\r\n\t\t\t// face one\r\n\t\t\tindices[ indexBufferOffset ] = a;\r\n\t\t\tindices[ indexBufferOffset + 1 ] = b;\r\n\t\t\tindices[ indexBufferOffset + 2 ] = d;\r\n\r\n\t\t\t// face two\r\n\t\t\tindices[ indexBufferOffset + 3 ] = b;\r\n\t\t\tindices[ indexBufferOffset + 4 ] = c;\r\n\t\t\tindices[ indexBufferOffset + 5 ] = d;\r\n\r\n\t\t\t// update offset\r\n\t\t\tindexBufferOffset += 6;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n};\r\n\r\nTHREE.TorusBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.TorusBufferGeometry.prototype.constructor = THREE.TorusBufferGeometry;\r\n\r\n// File:src/extras/geometries/TorusGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\r\n */\r\n\r\nTHREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\r\n\r\n};\r\n\r\nTHREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry;\r\n\r\n// File:src/extras/geometries/TorusKnotBufferGeometry.js\r\n\r\n/**\r\n * @author Mugen87 / https://github.com/Mugen87\r\n *\r\n * see: http://www.blackpawn.com/texts/pqtorus/\r\n */\r\nTHREE.TorusKnotBufferGeometry = function ( radius, tube, tubularSegments, radialSegments, p, q ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradialSegments: radialSegments,\r\n\t\tp: p,\r\n\t\tq: q\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\ttubularSegments = Math.floor( tubularSegments ) || 64;\r\n\tradialSegments = Math.floor( radialSegments ) || 8;\r\n\tp = p || 2;\r\n\tq = q || 3;\r\n\r\n\t// used to calculate buffer length\r\n\tvar vertexCount = ( ( radialSegments + 1 ) * ( tubularSegments + 1 ) );\r\n\tvar indexCount = radialSegments * tubularSegments * 2 * 3;\r\n\r\n\t// buffers\r\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ) , 1 );\r\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\t// helper variables\r\n\tvar i, j, index = 0, indexOffset = 0;\r\n\r\n\tvar vertex = new THREE.Vector3();\r\n\tvar normal = new THREE.Vector3();\r\n\tvar uv = new THREE.Vector2();\r\n\r\n\tvar P1 = new THREE.Vector3();\r\n\tvar P2 = new THREE.Vector3();\r\n\r\n\tvar B = new THREE.Vector3();\r\n\tvar T = new THREE.Vector3();\r\n\tvar N = new THREE.Vector3();\r\n\r\n\t// generate vertices, normals and uvs\r\n\r\n\tfor ( i = 0; i <= tubularSegments; ++ i ) {\r\n\r\n\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\r\n\r\n\t\tvar u = i / tubularSegments * p * Math.PI * 2;\r\n\r\n\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\r\n\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\r\n\r\n\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\r\n\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\r\n\r\n\t\t// calculate orthonormal basis\r\n\r\n\t\tT.subVectors( P2, P1 );\r\n\t\tN.addVectors( P2, P1 );\r\n\t\tB.crossVectors( T, N );\r\n\t\tN.crossVectors( B, T );\r\n\r\n\t\t// normalize B, N. T can be ignored, we don't use it\r\n\r\n\t\tB.normalize();\r\n\t\tN.normalize();\r\n\r\n\t\tfor ( j = 0; j <= radialSegments; ++ j ) {\r\n\r\n\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\r\n\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\r\n\r\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\r\n\t\t\tvar cx = - tube * Math.cos( v );\r\n\t\t\tvar cy = tube * Math.sin( v );\r\n\r\n\t\t\t// now calculate the final vertex position.\r\n\t\t\t// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\r\n\r\n\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\r\n\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\r\n\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\r\n\r\n\t\t\t// vertex\r\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\r\n\t\t\tnormal.subVectors( vertex, P1 ).normalize();\r\n\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\r\n\r\n\t\t\t// uv\r\n\t\t\tuv.x = i / tubularSegments;\r\n\t\t\tuv.y = j / radialSegments;\r\n\t\t\tuvs.setXY( index, uv.x, uv.y );\r\n\r\n\t\t\t// increase index\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// generate indices\r\n\r\n\tfor ( j = 1; j <= tubularSegments; j ++ ) {\r\n\r\n\t\tfor ( i = 1; i <= radialSegments; i ++ ) {\r\n\r\n\t\t\t// indices\r\n\t\t\tvar a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\r\n\t\t\tvar b = ( radialSegments + 1 ) * j + ( i - 1 );\r\n\t\t\tvar c = ( radialSegments + 1 ) * j + i;\r\n\t\t\tvar d = ( radialSegments + 1 ) * ( j - 1 ) + i;\r\n\r\n\t\t\t// face one\r\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t\t// face two\r\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\r\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// build geometry\r\n\r\n\tthis.setIndex( indices );\r\n\tthis.addAttribute( 'position', vertices );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\t// this function calculates the current position on the torus curve\r\n\r\n\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\r\n\r\n\t\tvar cu = Math.cos( u );\r\n\t\tvar su = Math.sin( u );\r\n\t\tvar quOverP = q / p * u;\r\n\t\tvar cs = Math.cos( quOverP );\r\n\r\n\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\r\n\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\r\n\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.TorusKnotBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.TorusKnotBufferGeometry.prototype.constructor = THREE.TorusKnotBufferGeometry;\r\n\r\n// File:src/extras/geometries/TorusKnotGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n */\r\n\r\nTHREE.TorusKnotGeometry = function ( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tradialSegments: radialSegments,\r\n\t\tp: p,\r\n\t\tq: q\r\n\t};\r\n\r\n\tif( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\r\n\r\n\tthis.fromBufferGeometry( new THREE.TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.TorusKnotGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry;\r\n\r\n// File:src/extras/geometries/TubeGeometry.js\r\n\r\n/**\r\n * @author WestLangley / https://github.com/WestLangley\r\n * @author zz85 / https://github.com/zz85\r\n * @author miningold / https://github.com/miningold\r\n * @author jonobr1 / https://github.com/jonobr1\r\n *\r\n * Modified from the TorusKnotGeometry by @oosmoxiecode\r\n *\r\n * Creates a tube which extrudes along a 3d spline\r\n *\r\n * Uses parallel transport frames as described in\r\n * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n */\r\n\r\nTHREE.TubeGeometry = function ( path, segments, radius, radialSegments, closed, taper ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TubeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpath: path,\r\n\t\tsegments: segments,\r\n\t\tradius: radius,\r\n\t\tradialSegments: radialSegments,\r\n\t\tclosed: closed,\r\n\t\ttaper: taper\r\n\t};\r\n\r\n\tsegments = segments || 64;\r\n\tradius = radius || 1;\r\n\tradialSegments = radialSegments || 8;\r\n\tclosed = closed || false;\r\n\ttaper = taper || THREE.TubeGeometry.NoTaper;\r\n\r\n\tvar grid = [];\r\n\r\n\tvar scope = this,\r\n\r\n\t\ttangent,\r\n\t\tnormal,\r\n\t\tbinormal,\r\n\r\n\t\tnumpoints = segments + 1,\r\n\r\n\t\tu, v, r,\r\n\r\n\t\tcx, cy,\r\n\t\tpos, pos2 = new THREE.Vector3(),\r\n\t\ti, j,\r\n\t\tip, jp,\r\n\t\ta, b, c, d,\r\n\t\tuva, uvb, uvc, uvd;\r\n\r\n\tvar frames = new THREE.TubeGeometry.FrenetFrames( path, segments, closed ),\r\n\t\ttangents = frames.tangents,\r\n\t\tnormals = frames.normals,\r\n\t\tbinormals = frames.binormals;\r\n\r\n\t// proxy internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\tfunction vert( x, y, z ) {\r\n\r\n\t\treturn scope.vertices.push( new THREE.Vector3( x, y, z ) ) - 1;\r\n\r\n\t}\r\n\r\n\t// construct the grid\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tgrid[ i ] = [];\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\tpos = path.getPointAt( u );\r\n\r\n\t\ttangent = tangents[ i ];\r\n\t\tnormal = normals[ i ];\r\n\t\tbinormal = binormals[ i ];\r\n\r\n\t\tr = radius * taper( u );\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tv = j / radialSegments * 2 * Math.PI;\r\n\r\n\t\t\tcx = - r * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\tcy = r * Math.sin( v );\r\n\r\n\t\t\tpos2.copy( pos );\r\n\t\t\tpos2.x += cx * normal.x + cy * binormal.x;\r\n\t\t\tpos2.y += cx * normal.y + cy * binormal.y;\r\n\t\t\tpos2.z += cx * normal.z + cy * binormal.z;\r\n\r\n\t\t\tgrid[ i ][ j ] = vert( pos2.x, pos2.y, pos2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// construct the mesh\r\n\r\n\tfor ( i = 0; i < segments; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tip = ( closed ) ? ( i + 1 ) % segments : i + 1;\r\n\t\t\tjp = ( j + 1 ) % radialSegments;\r\n\r\n\t\t\ta = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\r\n\t\t\tb = grid[ ip ][ j ];\r\n\t\t\tc = grid[ ip ][ jp ];\r\n\t\t\td = grid[ i ][ jp ];\r\n\r\n\t\t\tuva = new THREE.Vector2( i / segments, j / radialSegments );\r\n\t\t\tuvb = new THREE.Vector2( ( i + 1 ) / segments, j / radialSegments );\r\n\t\t\tuvc = new THREE.Vector2( ( i + 1 ) / segments, ( j + 1 ) / radialSegments );\r\n\t\t\tuvd = new THREE.Vector2( i / segments, ( j + 1 ) / radialSegments );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry;\r\n\r\nTHREE.TubeGeometry.NoTaper = function ( u ) {\r\n\r\n\treturn 1;\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.SinusoidalTaper = function ( u ) {\r\n\r\n\treturn Math.sin( Math.PI * u );\r\n\r\n};\r\n\r\n// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\r\nTHREE.TubeGeometry.FrenetFrames = function ( path, segments, closed ) {\r\n\r\n\tvar\tnormal = new THREE.Vector3(),\r\n\r\n\t\ttangents = [],\r\n\t\tnormals = [],\r\n\t\tbinormals = [],\r\n\r\n\t\tvec = new THREE.Vector3(),\r\n\t\tmat = new THREE.Matrix4(),\r\n\r\n\t\tnumpoints = segments + 1,\r\n\t\ttheta,\r\n\t\tsmallest,\r\n\r\n\t\ttx, ty, tz,\r\n\t\ti, u;\r\n\r\n\r\n\t// expose internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\t// compute the tangent vectors for each segment on the path\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\ttangents[ i ] = path.getTangentAt( u );\r\n\t\ttangents[ i ].normalize();\r\n\r\n\t}\r\n\r\n\tinitialNormal3();\r\n\r\n\t/*\r\n\tfunction initialNormal1(lastBinormal) {\r\n\t\t// fixed start binormal. Has dangers of 0 vectors\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\r\n\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\t}\r\n\r\n\tfunction initialNormal2() {\r\n\r\n\t\t// This uses the Frenet-Serret formula for deriving binormal\r\n\t\tvar t2 = path.getTangentAt( epsilon );\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\r\n\t}\r\n\t*/\r\n\r\n\tfunction initialNormal3() {\r\n\r\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\r\n\t\t// and in the direction of the smallest tangent xyz component\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tsmallest = Number.MAX_VALUE;\r\n\t\ttx = Math.abs( tangents[ 0 ].x );\r\n\t\tty = Math.abs( tangents[ 0 ].y );\r\n\t\ttz = Math.abs( tangents[ 0 ].z );\r\n\r\n\t\tif ( tx <= smallest ) {\r\n\r\n\t\t\tsmallest = tx;\r\n\t\t\tnormal.set( 1, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( ty <= smallest ) {\r\n\r\n\t\t\tsmallest = ty;\r\n\t\t\tnormal.set( 0, 1, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( tz <= smallest ) {\r\n\r\n\t\t\tnormal.set( 0, 0, 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\r\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t}\r\n\r\n\r\n\t// compute the slowly-varying normal and binormal vectors for each segment on the path\r\n\r\n\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\tnormals[ i ] = normals[ i - 1 ].clone();\r\n\r\n\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\r\n\r\n\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\r\n\r\n\t\tif ( vec.length() > Number.EPSILON ) {\r\n\r\n\t\t\tvec.normalize();\r\n\r\n\t\t\ttheta = Math.acos( THREE.Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\r\n\t\t}\r\n\r\n\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t}\r\n\r\n\r\n\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\r\n\tif ( closed ) {\r\n\r\n\t\ttheta = Math.acos( THREE.Math.clamp( normals[ 0 ].dot( normals[ numpoints - 1 ] ), - 1, 1 ) );\r\n\t\ttheta /= ( numpoints - 1 );\r\n\r\n\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ numpoints - 1 ] ) ) > 0 ) {\r\n\r\n\t\t\ttheta = - theta;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\t\t// twist a little...\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/PolyhedronGeometry.js\r\n\r\n/**\r\n * @author clockworkgeek / https://github.com/clockworkgeek\r\n * @author timothypratley / https://github.com/timothypratley\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PolyhedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tvertices: vertices,\r\n\t\tindices: indices,\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\tdetail = detail || 0;\r\n\r\n\tvar that = this;\r\n\r\n\tfor ( var i = 0, l = vertices.length; i < l; i += 3 ) {\r\n\r\n\t\tprepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\r\n\t}\r\n\r\n\tvar p = this.vertices;\r\n\r\n\tvar faces = [];\r\n\r\n\tfor ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\r\n\r\n\t\tvar v1 = p[ indices[ i ] ];\r\n\t\tvar v2 = p[ indices[ i + 1 ] ];\r\n\t\tvar v3 = p[ indices[ i + 2 ] ];\r\n\r\n\t\tfaces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, j );\r\n\r\n\t}\r\n\r\n\tvar centroid = new THREE.Vector3();\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tsubdivide( faces[ i ], detail );\r\n\r\n\t}\r\n\r\n\r\n\t// Handle case when face straddles the seam\r\n\r\n\tfor ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\r\n\r\n\t\tvar uvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\tvar x0 = uvs[ 0 ].x;\r\n\t\tvar x1 = uvs[ 1 ].x;\r\n\t\tvar x2 = uvs[ 2 ].x;\r\n\r\n\t\tvar max = Math.max( x0, x1, x2 );\r\n\t\tvar min = Math.min( x0, x1, x2 );\r\n\r\n\t\tif ( max > 0.9 && min < 0.1 ) {\r\n\r\n\t\t\t// 0.9 is somewhat arbitrary\r\n\r\n\t\t\tif ( x0 < 0.2 ) uvs[ 0 ].x += 1;\r\n\t\t\tif ( x1 < 0.2 ) uvs[ 1 ].x += 1;\r\n\t\t\tif ( x2 < 0.2 ) uvs[ 2 ].x += 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Apply radius\r\n\r\n\tfor ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\r\n\r\n\t\tthis.vertices[ i ].multiplyScalar( radius );\r\n\r\n\t}\r\n\r\n\r\n\t// Merge vertices\r\n\r\n\tthis.mergeVertices();\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n\r\n\t// Project vector onto sphere's surface\r\n\r\n\tfunction prepare( vector ) {\r\n\r\n\t\tvar vertex = vector.normalize().clone();\r\n\t\tvertex.index = that.vertices.push( vertex ) - 1;\r\n\r\n\t\t// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\r\n\r\n\t\tvar u = azimuth( vector ) / 2 / Math.PI + 0.5;\r\n\t\tvar v = inclination( vector ) / Math.PI + 0.5;\r\n\t\tvertex.uv = new THREE.Vector2( u, 1 - v );\r\n\r\n\t\treturn vertex;\r\n\r\n\t}\r\n\r\n\r\n\t// Approximate a curved face with recursively sub-divided triangles.\r\n\r\n\tfunction make( v1, v2, v3, materialIndex ) {\r\n\r\n\t\tvar face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, materialIndex );\r\n\t\tthat.faces.push( face );\r\n\r\n\t\tcentroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\r\n\r\n\t\tvar azi = azimuth( centroid );\r\n\r\n\t\tthat.faceVertexUvs[ 0 ].push( [\r\n\t\t\tcorrectUV( v1.uv, v1, azi ),\r\n\t\t\tcorrectUV( v2.uv, v2, azi ),\r\n\t\t\tcorrectUV( v3.uv, v3, azi )\r\n\t\t] );\r\n\r\n\t}\r\n\r\n\r\n\t// Analytically subdivide a face to the required detail level.\r\n\r\n\tfunction subdivide( face, detail ) {\r\n\r\n\t\tvar cols = Math.pow( 2, detail );\r\n\t\tvar a = prepare( that.vertices[ face.a ] );\r\n\t\tvar b = prepare( that.vertices[ face.b ] );\r\n\t\tvar c = prepare( that.vertices[ face.c ] );\r\n\t\tvar v = [];\r\n\r\n\t\tvar materialIndex = face.materialIndex;\r\n\r\n\t\t// Construct all of the vertices for this subdivision.\r\n\r\n\t\tfor ( var i = 0 ; i <= cols; i ++ ) {\r\n\r\n\t\t\tv[ i ] = [];\r\n\r\n\t\t\tvar aj = prepare( a.clone().lerp( c, i / cols ) );\r\n\t\t\tvar bj = prepare( b.clone().lerp( c, i / cols ) );\r\n\t\t\tvar rows = cols - i;\r\n\r\n\t\t\tfor ( var j = 0; j <= rows; j ++ ) {\r\n\r\n\t\t\t\tif ( j === 0 && i === cols ) {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = aj;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Construct all of the faces.\r\n\r\n\t\tfor ( var i = 0; i < cols ; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\r\n\r\n\t\t\t\tvar k = Math.floor( j / 2 );\r\n\r\n\t\t\t\tif ( j % 2 === 0 ) {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\tv[ i ][ k ],\r\n\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Angle around the Y axis, counter-clockwise when looking from above.\r\n\r\n\tfunction azimuth( vector ) {\r\n\r\n\t\treturn Math.atan2( vector.z, - vector.x );\r\n\r\n\t}\r\n\r\n\r\n\t// Angle above the XZ plane.\r\n\r\n\tfunction inclination( vector ) {\r\n\r\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\r\n\t}\r\n\r\n\r\n\t// Texture fixing helper. Spheres have some odd behaviours.\r\n\r\n\tfunction correctUV( uv, vector, azimuth ) {\r\n\r\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\r\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\r\n\t\treturn uv.clone();\r\n\r\n\t}\r\n\r\n\r\n};\r\n\r\nTHREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry;\r\n\r\n// File:src/extras/geometries/DodecahedronGeometry.js\r\n\r\n/**\r\n * @author Abe Pazos / https://hamoid.com\r\n */\r\n\r\nTHREE.DodecahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\tvar r = 1 / t;\r\n\r\n\tvar vertices = [\r\n\r\n\t\t// (1, 1, 1)\r\n\t\t- 1, - 1, - 1,    - 1, - 1,  1,\r\n\t\t- 1,  1, - 1,    - 1,  1,  1,\r\n\t\t 1, - 1, - 1,     1, - 1,  1,\r\n\t\t 1,  1, - 1,     1,  1,  1,\r\n\r\n\t\t// (0, 1/, )\r\n\t\t 0, - r, - t,     0, - r,  t,\r\n\t\t 0,  r, - t,     0,  r,  t,\r\n\r\n\t\t// (1/, , 0)\r\n\t\t- r, - t,  0,    - r,  t,  0,\r\n\t\t r, - t,  0,     r,  t,  0,\r\n\r\n\t\t// (, 0, 1/)\r\n\t\t- t,  0, - r,     t,  0, - r,\r\n\t\t- t,  0,  r,     t,  0,  r\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\r\n\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\r\n\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\r\n\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\r\n\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\r\n\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\r\n\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\r\n\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\r\n\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\r\n\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\r\n\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\r\n\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'DodecahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.DodecahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry;\r\n\r\n// File:src/extras/geometries/IcosahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.IcosahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\r\n\tvar vertices = [\r\n\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\r\n\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\r\n\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\r\n\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\r\n\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\r\n\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'IcosahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.IcosahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry;\r\n\r\n// File:src/extras/geometries/OctahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.OctahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar vertices = [\r\n\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0, - 1, 0,    0, 0, 1,    0, 0, - 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'OctahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.OctahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry;\r\n\r\n// File:src/extras/geometries/TetrahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.TetrahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar vertices = [\r\n\t\t 1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'TetrahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.TetrahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry;\r\n\r\n// File:src/extras/geometries/ParametricGeometry.js\r\n\r\n/**\r\n * @author zz85 / https://github.com/zz85\r\n * Parametric Surfaces Geometry\r\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\r\n *\r\n * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\r\n *\r\n */\r\n\r\nTHREE.ParametricGeometry = function ( func, slices, stacks ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ParametricGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tfunc: func,\r\n\t\tslices: slices,\r\n\t\tstacks: stacks\r\n\t};\r\n\r\n\tvar verts = this.vertices;\r\n\tvar faces = this.faces;\r\n\tvar uvs = this.faceVertexUvs[ 0 ];\r\n\r\n\tvar i, j, p;\r\n\tvar u, v;\r\n\r\n\tvar sliceCount = slices + 1;\r\n\r\n\tfor ( i = 0; i <= stacks; i ++ ) {\r\n\r\n\t\tv = i / stacks;\r\n\r\n\t\tfor ( j = 0; j <= slices; j ++ ) {\r\n\r\n\t\t\tu = j / slices;\r\n\r\n\t\t\tp = func( u, v );\r\n\t\t\tverts.push( p );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar a, b, c, d;\r\n\tvar uva, uvb, uvc, uvd;\r\n\r\n\tfor ( i = 0; i < stacks; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < slices; j ++ ) {\r\n\r\n\t\t\ta = i * sliceCount + j;\r\n\t\t\tb = i * sliceCount + j + 1;\r\n\t\t\tc = ( i + 1 ) * sliceCount + j + 1;\r\n\t\t\td = ( i + 1 ) * sliceCount + j;\r\n\r\n\t\t\tuva = new THREE.Vector2( j / slices, i / stacks );\r\n\t\t\tuvb = new THREE.Vector2( ( j + 1 ) / slices, i / stacks );\r\n\t\t\tuvc = new THREE.Vector2( ( j + 1 ) / slices, ( i + 1 ) / stacks );\r\n\t\t\tuvd = new THREE.Vector2( j / slices, ( i + 1 ) / stacks );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tuvs.push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tuvs.push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// console.log(this);\r\n\r\n\t// magic bullet\r\n\t// var diff = this.mergeVertices();\r\n\t// console.log('removed ', diff, ' vertices by merging');\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.ParametricGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry;\r\n\r\n// File:src/extras/geometries/WireframeGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WireframeGeometry = function ( geometry ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\r\n\tfunction sortFunction( a, b ) {\r\n\r\n\t\treturn a - b;\r\n\r\n\t}\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\t\tvar faces = geometry.faces;\r\n\t\tvar numEdges = 0;\r\n\r\n\t\t// allocate maximal size\r\n\t\tvar edges = new Uint32Array( 6 * faces.length );\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\tvar vertex = vertices[ edges [ 2 * i + j ] ];\r\n\r\n\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\tcoords[ index + 0 ] = vertex.x;\r\n\t\t\t\tcoords[ index + 1 ] = vertex.y;\r\n\t\t\t\tcoords[ index + 2 ] = vertex.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t} else if ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tif ( geometry.index !== null ) {\r\n\r\n\t\t\t// Indexed BufferGeometry\r\n\r\n\t\t\tvar indices = geometry.index.array;\r\n\t\t\tvar vertices = geometry.attributes.position;\r\n\t\t\tvar groups = geometry.groups;\r\n\t\t\tvar numEdges = 0;\r\n\r\n\t\t\tif ( groups.length === 0 ) {\r\n\r\n\t\t\t\tgeometry.addGroup( 0, indices.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// allocate maximal size\r\n\t\t\tvar edges = new Uint32Array( 2 * indices.length );\r\n\r\n\t\t\tfor ( var o = 0, ol = groups.length; o < ol; ++ o ) {\r\n\r\n\t\t\t\tvar group = groups[ o ];\r\n\r\n\t\t\t\tvar start = group.start;\r\n\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\tedge[ 0 ] = indices[ i + j ];\r\n\t\t\t\t\t\tedge[ 1 ] = indices[ i + ( j + 1 ) % 3 ];\r\n\t\t\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\t\tvar index2 = edges[ 2 * i + j ];\r\n\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices.getX( index2 );\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices.getY( index2 );\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices.getZ( index2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// non-indexed BufferGeometry\r\n\r\n\t\t\tvar vertices = geometry.attributes.position.array;\r\n\t\t\tvar numEdges = vertices.length / 3;\r\n\t\t\tvar numTris = numEdges / 3;\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numTris; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 18 * i + 6 * j;\r\n\r\n\t\t\t\t\tvar index1 = 9 * i + 3 * j;\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index1 ];\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index1 + 1 ];\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index1 + 2 ];\r\n\r\n\t\t\t\t\tvar index2 = 9 * i + 3 * ( ( j + 1 ) % 3 );\r\n\t\t\t\t\tcoords[ index + 3 ] = vertices[ index2 ];\r\n\t\t\t\t\tcoords[ index + 4 ] = vertices[ index2 + 1 ];\r\n\t\t\t\t\tcoords[ index + 5 ] = vertices[ index2 + 2 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.WireframeGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.WireframeGeometry.prototype.constructor = THREE.WireframeGeometry;\r\n\r\n// File:src/extras/helpers/AxisHelper.js\r\n\r\n/**\r\n * @author sroucheray / http://sroucheray.org/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AxisHelper = function ( size ) {\r\n\r\n\tsize = size || 1;\r\n\r\n\tvar vertices = new Float32Array( [\r\n\t\t0, 0, 0,  size, 0, 0,\r\n\t\t0, 0, 0,  0, size, 0,\r\n\t\t0, 0, 0,  0, 0, size\r\n\t] );\r\n\r\n\tvar colors = new Float32Array( [\r\n\t\t1, 0, 0,  1, 0.6, 0,\r\n\t\t0, 1, 0,  0.6, 1, 0,\r\n\t\t0, 0, 1,  0, 0.6, 1\r\n\t] );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n};\r\n\r\nTHREE.AxisHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.AxisHelper.prototype.constructor = THREE.AxisHelper;\r\n\r\n// File:src/extras/helpers/ArrowHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author zz85 / http://github.com/zz85\r\n * @author bhouston / http://clara.io\r\n *\r\n * Creates an arrow for visualizing directions\r\n *\r\n * Parameters:\r\n *  dir - Vector3\r\n *  origin - Vector3\r\n *  length - Number\r\n *  color - color in hex value\r\n *  headLength - Number\r\n *  headWidth - Number\r\n */\r\n\r\nTHREE.ArrowHelper = ( function () {\r\n\r\n\tvar lineGeometry = new THREE.BufferGeometry();\r\n\tlineGeometry.addAttribute( 'position', new THREE.Float32Attribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\r\n\r\n\tvar coneGeometry = new THREE.CylinderBufferGeometry( 0, 0.5, 1, 5, 1 );\r\n\tconeGeometry.translate( 0, - 0.5, 0 );\r\n\r\n\treturn function ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tif ( color === undefined ) color = 0xffff00;\r\n\t\tif ( length === undefined ) length = 1;\r\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\t\tthis.position.copy( origin );\r\n\r\n\t\tthis.line = new THREE.Line( lineGeometry, new THREE.LineBasicMaterial( { color: color } ) );\r\n\t\tthis.line.matrixAutoUpdate = false;\r\n\t\tthis.add( this.line );\r\n\r\n\t\tthis.cone = new THREE.Mesh( coneGeometry, new THREE.MeshBasicMaterial( { color: color } ) );\r\n\t\tthis.cone.matrixAutoUpdate = false;\r\n\t\tthis.add( this.cone );\r\n\r\n\t\tthis.setDirection( dir );\r\n\t\tthis.setLength( length, headLength, headWidth );\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper;\r\n\r\nTHREE.ArrowHelper.prototype.setDirection = ( function () {\r\n\r\n\tvar axis = new THREE.Vector3();\r\n\tvar radians;\r\n\r\n\treturn function setDirection( dir ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tif ( dir.y > 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\r\n\r\n\t\t} else if ( dir.y < - 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\r\n\r\n\t\t\tradians = Math.acos( dir.y );\r\n\r\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\r\n\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\tthis.line.scale.set( 1, Math.max( 0, length - headLength ), 1 );\r\n\tthis.line.updateMatrix();\r\n\r\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\r\n\tthis.cone.position.y = length;\r\n\tthis.cone.updateMatrix();\r\n\r\n};\r\n\r\nTHREE.ArrowHelper.prototype.setColor = function ( color ) {\r\n\r\n\tthis.line.material.color.copy( color );\r\n\tthis.cone.material.color.copy( color );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/BoxHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BoxHelper = function ( object ) {\r\n\r\n\tvar indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\tvar positions = new Float32Array( 8 * 3 );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: 0xffff00 } ) );\r\n\r\n\tif ( object !== undefined ) {\r\n\r\n\t\tthis.update( object );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.BoxHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.BoxHelper.prototype.constructor = THREE.BoxHelper;\r\n\r\nTHREE.BoxHelper.prototype.update = ( function () {\r\n\r\n\tvar box = new THREE.Box3();\r\n\r\n\treturn function ( object ) {\r\n\r\n\t\tif ( object instanceof THREE.Box3 ) {\r\n\r\n\t\t\tbox.copy( object );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tbox.setFromObject( object );\r\n\r\n\t\t}\r\n\r\n\t\tif ( box.isEmpty() ) return;\r\n\r\n\t\tvar min = box.min;\r\n\t\tvar max = box.max;\r\n\r\n\t\t/*\r\n\t\t  5____4\r\n\t\t1/___0/|\r\n\t\t| 6__|_7\r\n\t\t2/___3/\r\n\r\n\t\t0: max.x, max.y, max.z\r\n\t\t1: min.x, max.y, max.z\r\n\t\t2: min.x, min.y, max.z\r\n\t\t3: max.x, min.y, max.z\r\n\t\t4: max.x, max.y, min.z\r\n\t\t5: min.x, max.y, min.z\r\n\t\t6: min.x, min.y, min.z\r\n\t\t7: max.x, min.y, min.z\r\n\t\t*/\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\t\tvar array = position.array;\r\n\r\n\t\tarray[  0 ] = max.x; array[  1 ] = max.y; array[  2 ] = max.z;\r\n\t\tarray[  3 ] = min.x; array[  4 ] = max.y; array[  5 ] = max.z;\r\n\t\tarray[  6 ] = min.x; array[  7 ] = min.y; array[  8 ] = max.z;\r\n\t\tarray[  9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\r\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\r\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\r\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\r\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\tthis.geometry.computeBoundingSphere();\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/extras/helpers/BoundingBoxHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\n// a helper to show the world-axis-aligned bounding box for an object\r\n\r\nTHREE.BoundingBoxHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0x888888;\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.box = new THREE.Box3();\r\n\r\n\tTHREE.Mesh.call( this, new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: color, wireframe: true } ) );\r\n\r\n};\r\n\r\nTHREE.BoundingBoxHelper.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper;\r\n\r\nTHREE.BoundingBoxHelper.prototype.update = function () {\r\n\r\n\tthis.box.setFromObject( this.object );\r\n\r\n\tthis.box.size( this.scale );\r\n\r\n\tthis.box.center( this.position );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/CameraHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n *\t- shows frustum, line of sight and up of the camera\r\n *\t- suitable for fast updates\r\n * \t- based on frustum visualization in lightgl.js shadowmap example\r\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n */\r\n\r\nTHREE.CameraHelper = function ( camera ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tvar material = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } );\r\n\r\n\tvar pointMap = {};\r\n\r\n\t// colors\r\n\r\n\tvar hexFrustum = 0xffaa00;\r\n\tvar hexCone = 0xff0000;\r\n\tvar hexUp = 0x00aaff;\r\n\tvar hexTarget = 0xffffff;\r\n\tvar hexCross = 0x333333;\r\n\r\n\t// near\r\n\r\n\taddLine( \"n1\", \"n2\", hexFrustum );\r\n\taddLine( \"n2\", \"n4\", hexFrustum );\r\n\taddLine( \"n4\", \"n3\", hexFrustum );\r\n\taddLine( \"n3\", \"n1\", hexFrustum );\r\n\r\n\t// far\r\n\r\n\taddLine( \"f1\", \"f2\", hexFrustum );\r\n\taddLine( \"f2\", \"f4\", hexFrustum );\r\n\taddLine( \"f4\", \"f3\", hexFrustum );\r\n\taddLine( \"f3\", \"f1\", hexFrustum );\r\n\r\n\t// sides\r\n\r\n\taddLine( \"n1\", \"f1\", hexFrustum );\r\n\taddLine( \"n2\", \"f2\", hexFrustum );\r\n\taddLine( \"n3\", \"f3\", hexFrustum );\r\n\taddLine( \"n4\", \"f4\", hexFrustum );\r\n\r\n\t// cone\r\n\r\n\taddLine( \"p\", \"n1\", hexCone );\r\n\taddLine( \"p\", \"n2\", hexCone );\r\n\taddLine( \"p\", \"n3\", hexCone );\r\n\taddLine( \"p\", \"n4\", hexCone );\r\n\r\n\t// up\r\n\r\n\taddLine( \"u1\", \"u2\", hexUp );\r\n\taddLine( \"u2\", \"u3\", hexUp );\r\n\taddLine( \"u3\", \"u1\", hexUp );\r\n\r\n\t// target\r\n\r\n\taddLine( \"c\", \"t\", hexTarget );\r\n\taddLine( \"p\", \"c\", hexCross );\r\n\r\n\t// cross\r\n\r\n\taddLine( \"cn1\", \"cn2\", hexCross );\r\n\taddLine( \"cn3\", \"cn4\", hexCross );\r\n\r\n\taddLine( \"cf1\", \"cf2\", hexCross );\r\n\taddLine( \"cf3\", \"cf4\", hexCross );\r\n\r\n\tfunction addLine( a, b, hex ) {\r\n\r\n\t\taddPoint( a, hex );\r\n\t\taddPoint( b, hex );\r\n\r\n\t}\r\n\r\n\tfunction addPoint( id, hex ) {\r\n\r\n\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\tgeometry.colors.push( new THREE.Color( hex ) );\r\n\r\n\t\tif ( pointMap[ id ] === undefined ) {\r\n\r\n\t\t\tpointMap[ id ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tpointMap[ id ].push( geometry.vertices.length - 1 );\r\n\r\n\t}\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n\tthis.camera = camera;\r\n\tthis.camera.updateProjectionMatrix();\r\n\r\n\tthis.matrix = camera.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.pointMap = pointMap;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.CameraHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.CameraHelper.prototype.constructor = THREE.CameraHelper;\r\n\r\nTHREE.CameraHelper.prototype.update = function () {\r\n\r\n\tvar geometry, pointMap;\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar camera = new THREE.Camera();\r\n\r\n\tfunction setPoint( point, x, y, z ) {\r\n\r\n\t\tvector.set( x, y, z ).unproject( camera );\r\n\r\n\t\tvar points = pointMap[ point ];\r\n\r\n\t\tif ( points !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tgeometry.vertices[ points[ i ] ].copy( vector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn function () {\r\n\r\n\t\tgeometry = this.geometry;\r\n\t\tpointMap = this.pointMap;\r\n\r\n\t\tvar w = 1, h = 1;\r\n\r\n\t\t// we need just camera projection matrix\r\n\t\t// world matrix must be identity\r\n\r\n\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\r\n\r\n\t\t// center / target\r\n\r\n\t\tsetPoint( \"c\", 0, 0, - 1 );\r\n\t\tsetPoint( \"t\", 0, 0,  1 );\r\n\r\n\t\t// near\r\n\r\n\t\tsetPoint( \"n1\", - w, - h, - 1 );\r\n\t\tsetPoint( \"n2\",   w, - h, - 1 );\r\n\t\tsetPoint( \"n3\", - w,   h, - 1 );\r\n\t\tsetPoint( \"n4\",   w,   h, - 1 );\r\n\r\n\t\t// far\r\n\r\n\t\tsetPoint( \"f1\", - w, - h, 1 );\r\n\t\tsetPoint( \"f2\",   w, - h, 1 );\r\n\t\tsetPoint( \"f3\", - w,   h, 1 );\r\n\t\tsetPoint( \"f4\",   w,   h, 1 );\r\n\r\n\t\t// up\r\n\r\n\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\r\n\r\n\t\t// cross\r\n\r\n\t\tsetPoint( \"cf1\", - w,   0, 1 );\r\n\t\tsetPoint( \"cf2\",   w,   0, 1 );\r\n\t\tsetPoint( \"cf3\",   0, - h, 1 );\r\n\t\tsetPoint( \"cf4\",   0,   h, 1 );\r\n\r\n\t\tsetPoint( \"cn1\", - w,   0, - 1 );\r\n\t\tsetPoint( \"cn2\",   w,   0, - 1 );\r\n\t\tsetPoint( \"cn3\",   0, - h, - 1 );\r\n\t\tsetPoint( \"cn4\",   0,   h, - 1 );\r\n\r\n\t\tgeometry.verticesNeedUpdate = true;\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/DirectionalLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.DirectionalLightHelper = function ( light, size ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tif ( size === undefined ) size = 1;\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.Float32Attribute( [\r\n\t\t- size,   size, 0,\r\n\t\t  size,   size, 0,\r\n\t\t  size, - size, 0,\r\n\t\t- size, - size, 0,\r\n\t\t- size,   size, 0\r\n\t], 3 ) );\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\r\n\r\n\tthis.add( new THREE.Line( geometry, material ) );\r\n\r\n\tgeometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.Float32Attribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\r\n\r\n\tthis.add( new THREE.Line( geometry, material ));\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper;\r\n\r\nTHREE.DirectionalLightHelper.prototype.dispose = function () {\r\n\r\n\tvar lightPlane = this.children[ 0 ];\r\n\tvar targetLine = this.children[ 1 ];\r\n\r\n\tlightPlane.geometry.dispose();\r\n\tlightPlane.material.dispose();\r\n\ttargetLine.geometry.dispose();\r\n\ttargetLine.material.dispose();\r\n\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype.update = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar v3 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t\tv3.subVectors( v2, v1 );\r\n\r\n\t\tvar lightPlane = this.children[ 0 ];\r\n\t\tvar targetLine = this.children[ 1 ];\r\n\r\n\t\tlightPlane.lookAt( v3 );\r\n\t\tlightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t\ttargetLine.lookAt( v3 );\r\n\t\ttargetLine.scale.z = v3.length();\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/EdgesHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @param object THREE.Mesh whose geometry will be used\r\n * @param hex line color\r\n * @param thresholdAngle the minimum angle (in degrees),\r\n * between the face normals of adjacent faces,\r\n * that is required to render an edge. A value of 10 means\r\n * an edge is only rendered if the angle is at least 10 degrees.\r\n */\r\n\r\nTHREE.EdgesHelper = function ( object, hex, thresholdAngle ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tTHREE.LineSegments.call( this, new THREE.EdgesGeometry( object.geometry, thresholdAngle ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.EdgesHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper;\r\n\r\n// File:src/extras/helpers/FaceNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.FaceNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\t// FaceNormalsHelper only supports THREE.Geometry\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\t//\r\n\r\n\tvar nNormals = 0;\r\n\r\n\tvar objGeometry = this.object.geometry;\r\n\r\n\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\tnNormals = objGeometry.faces.length;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.' );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\r\n\tgeometry.addAttribute( 'position', positions );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n\t//\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.FaceNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper;\r\n\r\nTHREE.FaceNormalsHelper.prototype.update = ( function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar normalMatrix = new THREE.Matrix3();\r\n\r\n\treturn function update() {\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tvar matrixWorld = this.object.matrixWorld;\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tvar objGeometry = this.object.geometry;\r\n\r\n\t\tvar vertices = objGeometry.vertices;\r\n\r\n\t\tvar faces = objGeometry.faces;\r\n\r\n\t\tvar idx = 0;\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tvar normal = face.normal;\r\n\r\n\t\t\tv1.copy( vertices[ face.a ] )\r\n\t\t\t\t.add( vertices[ face.b ] )\r\n\t\t\t\t.add( vertices[ face.c ] )\r\n\t\t\t\t.divideScalar( 3 )\r\n\t\t\t\t.applyMatrix4( matrixWorld );\r\n\r\n\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\tidx = idx + 1;\r\n\r\n\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\tidx = idx + 1;\r\n\r\n\t\t}\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n}() );\r\n\r\n// File:src/extras/helpers/GridHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.GridHelper = function ( size, step, color1, color2 ) {\r\n\r\n\tcolor1 = new THREE.Color( color1 !== undefined ? color1 : 0x444444 );\r\n\tcolor2 = new THREE.Color( color2 !== undefined ? color2 : 0x888888 );\r\n\r\n\tvar vertices = [];\r\n\tvar colors = [];\r\n\r\n\tfor ( var i = - size, j = 0; i <= size; i += step ) {\r\n\r\n\t\tvertices.push( - size, 0, i, size, 0, i );\r\n\t\tvertices.push( i, 0, - size, i, 0, size );\r\n\r\n\t\tvar color = i === 0 ? color1 : color2;\r\n\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\t\tcolor.toArray( colors, j ); j += 3;\r\n\r\n\t}\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.Float32Attribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'color', new THREE.Float32Attribute( colors, 3 ) );\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n};\r\n\r\nTHREE.GridHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.GridHelper.prototype.constructor = THREE.GridHelper;\r\n\r\nTHREE.GridHelper.prototype.setColors = function () {\r\n\r\n\tconsole.error( 'THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.' );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/HemisphereLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.HemisphereLightHelper = function ( light, sphereSize ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.colors = [ new THREE.Color(), new THREE.Color() ];\r\n\r\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\tgeometry.rotateX( - Math.PI / 2 );\r\n\r\n\tfor ( var i = 0, il = 8; i < il; i ++ ) {\r\n\r\n\t\tgeometry.faces[ i ].color = this.colors[ i < 4 ? 0 : 1 ];\r\n\r\n\t}\r\n\r\n\tvar material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, wireframe: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( geometry, material );\r\n\tthis.add( this.lightSphere );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper;\r\n\r\nTHREE.HemisphereLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightSphere.geometry.dispose();\r\n\tthis.lightSphere.material.dispose();\r\n\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tthis.colors[ 0 ].copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\tthis.colors[ 1 ].copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\r\n\r\n\t\tthis.lightSphere.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\t\tthis.lightSphere.geometry.colorsNeedUpdate = true;\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/PointLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PointLightHelper = function ( light, sphereSize ) {\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tvar geometry = new THREE.SphereBufferGeometry( sphereSize, 4, 2 );\r\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.matrix = this.light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\t/*\r\n\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\r\n\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\r\n\tvar d = light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\r\n\tthis.add( this.lightDistance );\r\n\t*/\r\n\r\n};\r\n\r\nTHREE.PointLightHelper.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper;\r\n\r\nTHREE.PointLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.geometry.dispose();\r\n\tthis.material.dispose();\r\n\r\n};\r\n\r\nTHREE.PointLightHelper.prototype.update = function () {\r\n\r\n\tthis.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t/*\r\n\tvar d = this.light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.visible = true;\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\t*/\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SkeletonHelper.js\r\n\r\n/**\r\n * @author Sean Griffin / http://twitter.com/sgrif\r\n * @author Michael Guerrero / http://realitymeltdown.com\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkeletonHelper = function ( object ) {\r\n\r\n\tthis.bones = this.getBoneList( object );\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 0, 1 ) );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 1, 0 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.dynamic = true;\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors, depthTest: false, depthWrite: false, transparent: true } );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n\tthis.root = object;\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\n\r\nTHREE.SkeletonHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper;\r\n\r\nTHREE.SkeletonHelper.prototype.getBoneList = function( object ) {\r\n\r\n\tvar boneList = [];\r\n\r\n\tif ( object instanceof THREE.Bone ) {\r\n\r\n\t\tboneList.push( object );\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < object.children.length; i ++ ) {\r\n\r\n\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\r\n\r\n\t}\r\n\r\n\treturn boneList;\r\n\r\n};\r\n\r\nTHREE.SkeletonHelper.prototype.update = function () {\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tvar matrixWorldInv = new THREE.Matrix4().getInverse( this.root.matrixWorld );\r\n\r\n\tvar boneMatrix = new THREE.Matrix4();\r\n\r\n\tvar j = 0;\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\r\n\t\t\tgeometry.vertices[ j ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\r\n\t\t\tgeometry.vertices[ j + 1 ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tj += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.verticesNeedUpdate = true;\r\n\r\n\tgeometry.computeBoundingSphere();\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SpotLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.SpotLightHelper = function ( light ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar positions = [\r\n\t\t0, 0, 0,   0,   0,   1,\r\n\t\t0, 0, 0,   1,   0,   1,\r\n\t\t0, 0, 0, - 1,   0,   1,\r\n\t\t0, 0, 0,   0,   1,   1,\r\n\t\t0, 0, 0,   0, - 1,   1\r\n\t];\r\n\r\n\tfor ( var i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\r\n\r\n\t\tvar p1 = ( i / l ) * Math.PI * 2;\r\n\t\tvar p2 = ( j / l ) * Math.PI * 2;\r\n\r\n\t\tpositions.push(\r\n\t\t\tMath.cos( p1 ), Math.sin( p1 ), 1,\r\n\t\t\tMath.cos( p2 ), Math.sin( p2 ), 1\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tgeometry.addAttribute( 'position', new THREE.Float32Attribute( positions, 3 ) );\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\r\n\r\n\tthis.cone = new THREE.LineSegments( geometry, material );\r\n\tthis.add( this.cone );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper;\r\n\r\nTHREE.SpotLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.cone.geometry.dispose();\r\n\tthis.cone.material.dispose();\r\n\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar vector2 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tvar coneLength = this.light.distance ? this.light.distance : 1000;\r\n\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\r\n\r\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\r\n\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\r\n\t\tthis.cone.lookAt( vector2.sub( vector ) );\r\n\r\n\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/VertexNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.VertexNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\t//\r\n\r\n\tvar nNormals = 0;\r\n\r\n\tvar objGeometry = this.object.geometry;\r\n\r\n\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\tnNormals = objGeometry.faces.length * 3;\r\n\r\n\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tnNormals = objGeometry.attributes.normal.count;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\r\n\tgeometry.addAttribute( 'position', positions );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n\t//\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.VertexNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper;\r\n\r\nTHREE.VertexNormalsHelper.prototype.update = ( function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar normalMatrix = new THREE.Matrix3();\r\n\r\n\treturn function update() {\r\n\r\n\t\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tvar matrixWorld = this.object.matrixWorld;\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tvar objGeometry = this.object.geometry;\r\n\r\n\t\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar vertices = objGeometry.vertices;\r\n\r\n\t\t\tvar faces = objGeometry.faces;\r\n\r\n\t\t\tvar idx = 0;\r\n\r\n\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar vertex = vertices[ face[ keys[ j ] ] ];\r\n\r\n\t\t\t\t\tvar normal = face.vertexNormals[ j ];\r\n\r\n\t\t\t\t\tv1.copy( vertex ).applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar objPos = objGeometry.attributes.position;\r\n\r\n\t\t\tvar objNorm = objGeometry.attributes.normal;\r\n\r\n\t\t\tvar idx = 0;\r\n\r\n\t\t\t// for simplicity, ignore index and drawcalls, and render every normal\r\n\r\n\t\t\tfor ( var j = 0, jl = objPos.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\tv1.set( objPos.getX( j ), objPos.getY( j ), objPos.getZ( j ) ).applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\tv2.set( objNorm.getX( j ), objNorm.getY( j ), objNorm.getZ( j ) );\r\n\r\n\t\t\t\tv2.applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n}() );\r\n\r\n// File:src/extras/helpers/WireframeHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WireframeHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tTHREE.LineSegments.call( this, new THREE.WireframeGeometry( object.geometry ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.WireframeHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper;\r\n\r\n// File:src/extras/objects/ImmediateRenderObject.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.ImmediateRenderObject = function ( material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.material = material;\r\n\tthis.render = function ( renderCallback ) {};\r\n\r\n};\r\n\r\nTHREE.ImmediateRenderObject.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject;\r\n\r\n// File:src/extras/objects/MorphBlendMesh.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.MorphBlendMesh = function( geometry, material ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.animationsMap = {};\r\n\tthis.animationsList = [];\r\n\r\n\t// prepare default animation\r\n\t// (all frames played together in 1 second)\r\n\r\n\tvar numFrames = this.geometry.morphTargets.length;\r\n\r\n\tvar name = \"__default\";\r\n\r\n\tvar startFrame = 0;\r\n\tvar endFrame = numFrames - 1;\r\n\r\n\tvar fps = numFrames / 1;\r\n\r\n\tthis.createAnimation( name, startFrame, endFrame, fps );\r\n\tthis.setAnimationWeight( name, 1 );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh;\r\n\r\nTHREE.MorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\r\n\r\n\tvar animation = {\r\n\r\n\t\tstart: start,\r\n\t\tend: end,\r\n\r\n\t\tlength: end - start + 1,\r\n\r\n\t\tfps: fps,\r\n\t\tduration: ( end - start ) / fps,\r\n\r\n\t\tlastFrame: 0,\r\n\t\tcurrentFrame: 0,\r\n\r\n\t\tactive: false,\r\n\r\n\t\ttime: 0,\r\n\t\tdirection: 1,\r\n\t\tweight: 1,\r\n\r\n\t\tdirectionBackwards: false,\r\n\t\tmirroredLoop: false\r\n\r\n\t};\r\n\r\n\tthis.animationsMap[ name ] = animation;\r\n\tthis.animationsList.push( animation );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\r\n\r\n\tvar pattern = /([a-z]+)_?(\\d+)/i;\r\n\r\n\tvar firstAnimation, frameRanges = {};\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\tvar chunks = morph.name.match( pattern );\r\n\r\n\t\tif ( chunks && chunks.length > 1 ) {\r\n\r\n\t\t\tvar name = chunks[ 1 ];\r\n\r\n\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\r\n\r\n\t\t\tvar range = frameRanges[ name ];\r\n\r\n\t\t\tif ( i < range.start ) range.start = i;\r\n\t\t\tif ( i > range.end ) range.end = i;\r\n\r\n\t\t\tif ( ! firstAnimation ) firstAnimation = name;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var name in frameRanges ) {\r\n\r\n\t\tvar range = frameRanges[ name ];\r\n\t\tthis.createAnimation( name, range.start, range.end, fps );\r\n\r\n\t}\r\n\r\n\tthis.firstAnimation = firstAnimation;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = 1;\r\n\t\tanimation.directionBackwards = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = - 1;\r\n\t\tanimation.directionBackwards = true;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.fps = fps;\r\n\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.duration = duration;\r\n\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.weight = weight;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = time;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationTime = function ( name ) {\r\n\r\n\tvar time = 0;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\ttime = animation.time;\r\n\r\n\t}\r\n\r\n\treturn time;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\r\n\r\n\tvar duration = - 1;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tduration = animation.duration;\r\n\r\n\t}\r\n\r\n\treturn duration;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.playAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = 0;\r\n\t\tanimation.active = true;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( \"THREE.MorphBlendMesh: animation[\" + name + \"] undefined in .playAnimation()\" );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.stopAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.active = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.update = function ( delta ) {\r\n\r\n\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\r\n\r\n\t\tvar animation = this.animationsList[ i ];\r\n\r\n\t\tif ( ! animation.active ) continue;\r\n\r\n\t\tvar frameTime = animation.duration / animation.length;\r\n\r\n\t\tanimation.time += animation.direction * delta;\r\n\r\n\t\tif ( animation.mirroredLoop ) {\r\n\r\n\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\r\n\r\n\t\t\t\tanimation.direction *= - 1;\r\n\r\n\t\t\t\tif ( animation.time > animation.duration ) {\r\n\r\n\t\t\t\t\tanimation.time = animation.duration;\r\n\t\t\t\t\tanimation.directionBackwards = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( animation.time < 0 ) {\r\n\r\n\t\t\t\t\tanimation.time = 0;\r\n\t\t\t\t\tanimation.directionBackwards = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tanimation.time = animation.time % animation.duration;\r\n\r\n\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\r\n\r\n\t\t}\r\n\r\n\t\tvar keyframe = animation.start + THREE.Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\r\n\t\tvar weight = animation.weight;\r\n\r\n\t\tif ( keyframe !== animation.currentFrame ) {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\r\n\r\n\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\r\n\r\n\t\t\tanimation.lastFrame = animation.currentFrame;\r\n\t\t\tanimation.currentFrame = keyframe;\r\n\r\n\t\t}\r\n\r\n\t\tvar mix = ( animation.time % frameTime ) / frameTime;\r\n\r\n\t\tif ( animation.directionBackwards ) mix = 1 - mix;\r\n\r\n\t\tif ( animation.currentFrame !== animation.lastFrame ) {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\r\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = weight;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// Export the THREE object for **Node.js**, with\r\n// backwards-compatibility for the old `require()` API. If we're in\r\n// the browser, add `_` as a global object via a string identifier,\r\n// for Closure Compiler \"advanced\" mode.\r\nif (typeof exports !== 'undefined') {\r\n  if (typeof module !== 'undefined' && module.exports) {\r\n    exports = module.exports = THREE;\r\n  }\r\n  exports.THREE = THREE;\r\n} else {\r\n  this['THREE'] = THREE;\r\n}\r\n","// stats.js - http://github.com/mrdoob/stats.js\n(function(f,e){\"object\"===typeof exports&&\"undefined\"!==typeof module?module.exports=e():\"function\"===typeof define&&define.amd?define(e):f.Stats=e()})(this,function(){var f=function(){function e(a){c.appendChild(a.dom);return a}function u(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();\nu(++l%c.children.length)},!1);var k=(performance||Date).now(),g=k,a=0,r=e(new f.Panel(\"FPS\",\"#0ff\",\"#002\")),h=e(new f.Panel(\"MS\",\"#0f0\",\"#020\"));if(self.performance&&self.performance.memory)var t=e(new f.Panel(\"MB\",\"#f08\",\"#201\"));u(0);return{REVISION:16,dom:c,addPanel:e,showPanel:u,begin:function(){k=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();h.update(c-k,200);if(c>g+1E3&&(r.update(1E3*a/(c-g),100),g=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/\n1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){k=this.end()},domElement:c,setMode:u}};f.Panel=function(e,f,l){var c=Infinity,k=0,g=Math.round,a=g(window.devicePixelRatio||1),r=80*a,h=48*a,t=3*a,v=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=h;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,h);b.fillStyle=f;b.fillText(e,t,v);\nb.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(h,w){c=Math.min(c,h);k=Math.max(k,h);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=f;b.fillText(g(h)+\" \"+e+\" (\"+g(c)+\"-\"+g(k)+\")\",t,v);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,g((1-h/w)*p))}}};return f});\n","'use strict';\n\nvar domain;\n\n// This constructor is used to store event handlers. Instantiating this is\n// faster than explicitly calling `Object.create(null)` to get a \"clean\" empty\n// object (tested with v8 v4.9).\nfunction EventHandlers() {}\nEventHandlers.prototype = Object.create(null);\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nexport default EventEmitter;\nexport {EventEmitter};\n\n// nodejs oddity\n// require('events') === require('events').EventEmitter\nEventEmitter.EventEmitter = EventEmitter\n\nEventEmitter.usingDomains = false;\n\nEventEmitter.prototype.domain = undefined;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this.domain = null;\n  if (EventEmitter.usingDomains) {\n    // if there is an active domain, then attach to it.\n    if (domain.active && !(this instanceof domain.Domain)) {\n      this.domain = domain.active;\n    }\n  }\n\n  if (!this._events || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = new EventHandlers();\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events, domain;\n  var needDomainExit = false;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  domain = this.domain;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    er = arguments[1];\n    if (domain) {\n      if (!er)\n        er = new Error('Uncaught, unspecified \"error\" event');\n      er.domainEmitter = this;\n      er.domain = domain;\n      er.domainThrown = false;\n      domain.emit('error', er);\n    } else if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n    // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n    // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  if (needDomainExit)\n    domain.exit();\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = new EventHandlers();\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] :\n                                          [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n                            existing.length + ' ' + type + ' listeners added. ' +\n                            'Use emitter.setMaxListeners() to increase limit');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        emitWarning(w);\n      }\n    }\n  }\n\n  return target;\n}\nfunction emitWarning(e) {\n  typeof console.warn === 'function' ? console.warn(e) : console.log(e);\n}\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction _onceWrap(target, type, listener) {\n  var fired = false;\n  function g() {\n    target.removeListener(type, g);\n    if (!fired) {\n      fired = true;\n      listener.apply(target, arguments);\n    }\n  }\n  g.listener = listener;\n  return g;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || (list.listener && list.listener === listener)) {\n        if (--this._eventsCount === 0)\n          this._events = new EventHandlers();\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length; i-- > 0;) {\n          if (list[i] === listener ||\n              (list[i].listener && list[i].listener === listener)) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (list.length === 1) {\n          list[0] = undefined;\n          if (--this._eventsCount === 0) {\n            this._events = new EventHandlers();\n            return this;\n          } else {\n            delete events[type];\n          }\n        } else {\n          spliceOne(list, position);\n        }\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = new EventHandlers();\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = new EventHandlers();\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        for (var i = 0, key; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = new EventHandlers();\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        do {\n          this.removeListener(type, listeners[listeners.length - 1]);\n        } while (listeners[0]);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  var evlistener;\n  var ret;\n  var events = this._events;\n\n  if (!events)\n    ret = [];\n  else {\n    evlistener = events[type];\n    if (!evlistener)\n      ret = [];\n    else if (typeof evlistener === 'function')\n      ret = [evlistener.listener || evlistener];\n    else\n      ret = unwrapListeners(evlistener);\n  }\n\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, i) {\n  var copy = new Array(i);\n  while (i--)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","/**\r\n * Created by Mick on 18.12.2016.\r\n */\r\n\r\nvar Events = require('events');\r\n\r\nconst PRESSED = \"pressed\";\r\nconst RELEASED = \"released\";\r\n//const ISDOWN = \"isdown\";\r\n\r\nclass InputAction extends Events {\r\n  /**\r\n   *\r\n   * @param name: name of this action, e.g. walk_left\r\n   */\r\n  constructor(name, keys, mouseButtons) {\r\n    super();\r\n    this.name = name; // name of the action\r\n    this.keyboard_keys = keys || []; // all keycodes which are triggering this action\r\n    this.mouse_buttons = mouseButtons || [];\r\n\r\n    //current state of the key (pressed, or released)\r\n    this.currentState = false;\r\n    this.previousState = false;\r\n\r\n  }\r\n\r\n  /**\r\n   * gives feedback about whether the key is pressed or not\r\n   * @returns {boolean} true, when it is down\r\n   */\r\n  get isDown() {\r\n    return this.currentState;\r\n  }\r\n\r\n  /**\r\n   * @returns {boolean} is true, when the key was pressed in the last cycle\r\n   */\r\n  get wasPressed() {\r\n    return (this.currentState) && (!this.previousState);\r\n  }\r\n\r\n  /**\r\n   * @returns {boolean} true, when the key was released in this cycle\r\n   */\r\n  get wasReleased() {\r\n    return (!this.currentState) && (this.previousState);\r\n  }\r\n\r\n  /**\r\n   * resets the actions state\r\n   */\r\n  forceRelease() {\r\n    this.currentState = false;\r\n    this.previousState = false;\r\n  }\r\n\r\n  endCycle() {\r\n    this.previousState = this.currentState;\r\n  }\r\n\r\n  /**\r\n   * adds a keyboard key to the action list.\r\n   * if the state of this key chances, also the state of\r\n   * this action changes.\r\n   * @param key: keycode of the key\r\n   */\r\n  addKeyboardKey(keyCode) {\r\n    if (this.keyboard_keys.indexOf(keyCode) == -1) {\r\n      this.keyboard_keys.push(keyCode);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * removes a key from this action\r\n   * @param keyCode the key\r\n   */\r\n  removeKeyboardKey(keyCode) {\r\n    this.keyboard_keys.remove(keyCode);\r\n  }\r\n\r\n  /**\r\n   * checks if a key, which is pressd, is associated with this action.\r\n   * @param keyState the current state of the pressed keys (received from the input handler)\r\n   */\r\n  update(keyState) {\r\n    // save back current state to old state\r\n    this.previousState = this.currentState;\r\n    this.currentState = false;\r\n\r\n    // check if keyboard key is down\r\n    for (let i = 0; i < this.keyboard_keys.length; i++) {\r\n      if (keyState.keyboard_keys[this.keyboard_keys[i]]) {\r\n        this.currentState = true;\r\n        // this.emit(PRESSED,{keyboardKey:this.keyboard_keys[i],source:this});\r\n        break;\r\n      }\r\n    }\r\n\r\n    // check if mouse button is down\r\n    for (let i = 0; i < this.mouse_buttons.length; i++) {\r\n      if (keyState.mouse_buttons[this.mouse_buttons[i]]) {\r\n        this.currentState = true;\r\n        //  this.emit(PRESSED,{mouseKey:this.mouse_buttons[i],source:this});\r\n        break;\r\n      }\r\n    }\r\n    if (this.wasPressed) {\r\n      this.emit(PRESSED, {\r\n        source: this\r\n      });\r\n    } else if (this.wasReleased) {\r\n      this.emit(RELEASED, {\r\n        source: this\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = InputAction;","/**\r\n * Created by Mick on 18.12.2016.\r\n */\r\n\r\nconst Events = require('events');\r\nconst InputAction = require('./inputaction');\r\n\r\nconst MOUSEMOVE = \"mousemove\";\r\nconst RAW_MOUSEMOVE = \"rawmousemove\";\r\nconst MOUSEWHEEL = \"mousewheel\";\r\n\r\nclass InputManager extends Events {\r\n  constructor(targetCanvas) {\r\n    super();\r\n\r\n    // contains every keys, which are pressed since the last update cycle\r\n    this.keyState = {\r\n      keyboard_keys: {},\r\n      mouse_buttons: {}\r\n    };\r\n\r\n    // contains the mouse position\r\n    this.mouse = {\r\n      lastX: 0,\r\n      lastY: 0,\r\n      x: 0,\r\n      y: 0,\r\n      dx: 0,\r\n      dy: 0\r\n    };\r\n\r\n    this.mapping = null;\r\n\r\n    this._init(targetCanvas);\r\n  }\r\n\r\n\r\n  _init(targetCanvas) {\r\n    //add key listeners\r\n    // TODO: nichtmehr auf window lassen\r\n    document.addEventListener(\"keydown\", this._keyDown.bind(this), false);\r\n    document.addEventListener(\"keyup\", this._keyUp.bind(this), false);\r\n\r\n    document.addEventListener(\"mousewheel\", this._mouseWheelMove.bind(this), false);\r\n    document.addEventListener(\"mousedown\", this._mouseDown.bind(this), true);\r\n    document.addEventListener(\"mouseup\", this._mouseUp.bind(this), true);\r\n    document.addEventListener(\"touchstart\", this._mouseDown.bind(this), false);\r\n    document.addEventListener(\"touchend\", this._mouseUp.bind(this), false);\r\n\r\n    // mouse move\r\n    targetCanvas.addEventListener('mousemove', this._onMouseMove.bind(this), false);\r\n    targetCanvas.addEventListener('touchmove', this._onMouseMove.bind(this), false);\r\n  }\r\n\r\n  /**\r\n   * loads a keymapping from json, in expected format:\r\n   *   \"KEY_MAPPING\":{\r\n   *      \"TURN\":{\"keyboard\":[70],\"mouse\":[]},\r\n   *      \"MOUSE_LEFT\":{\"keyboard\":[],\"mouse\":[0]}\r\n   *    },\r\n   * @param KEY_MAPPING\r\n   */\r\n  loadMapping(KEY_MAPPING) {\r\n    // clean the old mapping, if existing\r\n    this.resetMapping();\r\n    // load all keys located in config.json\r\n    const keyMapping = {};\r\n    for (let key in KEY_MAPPING) {\r\n      const cur = KEY_MAPPING[key];\r\n      keyMapping[key] = new InputAction(key, cur.keyboard, cur.mouse);\r\n    }\r\n    this.setMapping(keyMapping);\r\n  }\r\n\r\n  _mouseWheelMove(evt) {\r\n    this.emit(MOUSEWHEEL, {\r\n      delta: evt.deltaY\r\n    });\r\n  }\r\n\r\n  resetMapping() {\r\n    this.keyState = {\r\n      keyboard_keys: {},\r\n      mouse_buttons: {}\r\n    };\r\n\r\n    // contains the mouse position\r\n    this.mouse = {\r\n      lastX: 0,\r\n      lastY: 0,\r\n      x: 0,\r\n      y: 0,\r\n      dx: 0,\r\n      dy: 0\r\n    };\r\n    this.mapping = null;\r\n  }\r\n\r\n  setMapping(mapping) {\r\n    this.mapping = mapping;\r\n  }\r\n\r\n  _keyDown(event) {\r\n    this.keyState.keyboard_keys[event.keyCode] = true;\r\n    //     event.preventDefault();\r\n    this._processKeyInteraction();\r\n  }\r\n\r\n  _keyUp(event) {\r\n    if (this.keyState.keyboard_keys.hasOwnProperty(event.keyCode)) {\r\n      delete this.keyState.keyboard_keys[event.keyCode];\r\n    }\r\n    //   event.preventDefault();\r\n    this._processKeyInteraction();\r\n  }\r\n\r\n  _mouseDown(event) {\r\n\r\n    var btn = this._normalizeMouseKeyCode(event);\r\n    if (btn < 0) return; // unknown input\r\n\r\n    this.keyState.mouse_buttons[btn] = true;\r\n    //  event.preventDefault();\r\n    this._processKeyInteraction();\r\n  }\r\n\r\n  _mouseUp(event) {\r\n    var btn = this._normalizeMouseKeyCode(event);\r\n    if (btn < 0) return; // unknown input\r\n\r\n    if (this.keyState.mouse_buttons.hasOwnProperty(btn)) {\r\n      delete this.keyState.mouse_buttons[btn];\r\n    }\r\n    this._processKeyInteraction();\r\n    //   event.preventDefault();\r\n  }\r\n\r\n  /**\r\n   * takes different mouseup/down event and returns the keycode\r\n   * @param event\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  _normalizeMouseKeyCode(event) {\r\n    if (event.button || event.button == 0) {\r\n      return event.button;\r\n    } else if (event.changedTouches && event.changedTouches.length > 0) {\r\n      return 0;\r\n    } else if (event.data && (event.data.button || event.data.button != 0)) {\r\n      return event.data.button;\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  _processKeyInteraction() {\r\n    //return, if there is no mapping available\r\n    if (!this.mapping) return;\r\n\r\n    //update every key in the mapping\r\n    for (let key in this.mapping) {\r\n      if (!this.mapping.hasOwnProperty(key)) continue;\r\n      this.mapping[key].update(this.keyState);\r\n    }\r\n  }\r\n\r\n\r\n  endCycle() {\r\n    for (let key in this.mapping) {\r\n      if (!this.mapping.hasOwnProperty(key)) continue;\r\n      this.mapping[key].endCycle();\r\n    }\r\n  }\r\n\r\n  _onMouseMove(event) {\r\n    this.mouse.lastX = this.mouse.x;\r\n    this.mouse.lastY = this.mouse.y;\r\n\r\n    this.mouse.x = (event.clientX / window.innerWidth) * 2 - 1;\r\n    this.mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\r\n\r\n    // set the delta mouse movement\r\n    this.mouse.dx = this.mouse.x - this.mouse.lastX;\r\n    this.mouse.dy = this.mouse.y - this.mouse.lastY;\r\n\r\n    if (this.mouse.dx != 0 || this.mouse.dy != 0) {\r\n      this.emit(MOUSEMOVE, this.mouse);\r\n      this.emit(RAW_MOUSEMOVE, event);\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = InputManager;","const THREE = require('three');\r\nconst Stats = require('stats.js');\r\n\r\nconst InputManager = require(\"./inputmanager\");\r\n\r\nconst OFFSET = 0;\r\n\r\nclass ClientGame {\r\n  constructor() {\r\n    this.quit = false;\r\n    this.fps = 60;\r\n    this.then = Date.now();\r\n\r\n    this.renderer = null;\r\n\r\n\r\n    // necessary for the context object\r\n    const self = this;\r\n    /**\r\n     * object passed to all render and update-calls\r\n     */\r\n    this.context = {\r\n      delta: 1,\r\n      get camera() {\r\n        if (!self.currentScene) return null;\r\n        return self.currentScene.camera;\r\n      },\r\n      get fixedFrameTime() {\r\n        return 1000 / self.fps\r\n      },\r\n      get fixedTimeStep() {\r\n        return 1 / self.fps\r\n      },\r\n      inputManager: null,\r\n      assets: {}\r\n    };\r\n\r\n    /**\r\n     * field to hold the next job for scene cahgnes\r\n     */\r\n    this._changeSceneJob = null;\r\n  }\r\n\r\n\r\n  start() {\r\n    this.renderer = new THREE.WebGLRenderer({\r\n      antialias: true\r\n    });\r\n    this.renderer.setClearColor(0x000000, 0);\r\n    this.renderer.domElement.classList = \"scene\";\r\n    this.context.inputManager = new InputManager(this.renderer.domElement);\r\n    // prevent the context menu\r\n    this.renderer.domElement.oncontextmenu = function (e) {\r\n      e.preventDefault();\r\n    };\r\n    // add it to the document\r\n    document.body.appendChild(this.renderer.domElement);\r\n\r\n    // add the resize listene and call it,\r\n    // so that the screen is initially sized correctly\r\n    this.resize();\r\n    window.addEventListener('resize', this.resize.bind(this), false);\r\n\r\n    // add debug stats\r\n    let stats = null;\r\n    if (window.DEBUG) {\r\n      stats = new Stats(); // <-- remove me\r\n      document.body.appendChild(stats.dom); // <-- remove me\r\n    }\r\n    // const clock = new THREE.Clock();\r\n    // this.context.delta = clock.getDelta();\r\n\r\n    /*\r\n     * the main application cycle\r\n     */\r\n    const run = () => {\r\n      if (this.quit) return;\r\n      requestAnimationFrame(run);\r\n\r\n      // change the scene if necessary\r\n      if (this._changeSceneJob) {\r\n        this._changeSceneJob(this.context);\r\n        this._changeSceneJob = null;\r\n      }\r\n      // calculate the delta time\r\n      const now = Date.now();\r\n      const delta = now - this.then;\r\n      const interval = this.context.fixedFrameTime;\r\n      // update the scene and redner if possible\r\n      if (delta > interval) {\r\n        this.context.delta = delta / 1000; // update the delta in the context \r\n        this.update(this.context);\r\n        this.then = now - (delta % interval);\r\n        this.render(this.context);\r\n      }\r\n      if (stats) {\r\n        stats.update();\r\n      }\r\n    };\r\n    // start the update cycle\r\n    run();\r\n  }\r\n\r\n\r\n  /**\r\n   * updates the current scene\r\n   *\r\n   * @param {*} delta\r\n   * @memberof Game\r\n   */\r\n  update(context) {\r\n    if (!this.currentScene || !this.currentScene.isInitialized) return;\r\n    this.currentScene.update(context);\r\n    this.context.inputManager.endCycle();\r\n  }\r\n\r\n  /**\r\n   * renders the current scene\r\n   *\r\n   * @param {*} delta\r\n   * @memberof Game\r\n   */\r\n  render(context) {\r\n    if (!this.currentScene || !this.currentScene.isInitialized) return;\r\n    this.currentScene.render(context);\r\n    const camera = this.context.camera;\r\n    if (!camera) return console.error(\"no cam\");\r\n    this.renderer.render(this.currentScene.stage, camera);\r\n  }\r\n\r\n  /**\r\n   * resizes the canvas\r\n   * use either event or the widht/hgiht\r\n   * @param {Object} evt evt from the window event\r\n   * @param {Number} width of the canvas\r\n   * @param {Number} height of the canvas\r\n   * @memberof Game\r\n   */\r\n  resize(evt, width, height) {\r\n\r\n    const w = (width || window.innerWidth - OFFSET);\r\n    const h = (height || window.innerHeight - OFFSET);\r\n    this.context.width = w;\r\n    this.context.height = h;\r\n\r\n    const camera = this.context.camera;\r\n    if (camera) {\r\n      camera.aspect = w / h;\r\n      camera.updateProjectionMatrix();\r\n    }\r\n    this.renderer.setSize(w, h);\r\n  }\r\n\r\n  /**\r\n   * starts a new scene.\r\n   * it is sheduled before the next game-cycle\r\n   *\r\n   * @param {BaseScene} scene\r\n   * @memberof Game\r\n   */\r\n  setScene(scene) {\r\n    this._changeSceneJob = (context) => {\r\n      // if there is a old scene, stop it and clean it up\r\n      if (this.currentScene) {\r\n        this.currentScene.pause(context);\r\n        this.currentScene.tearDown(context);\r\n      }\r\n      // then start the new scene\r\n      if (!scene.isInitialized) {\r\n        scene.init(context);\r\n      }\r\n\r\n      this.currentScene = scene;\r\n      scene.resume(context);\r\n    }\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = ClientGame;","const THREE = require('three');\r\n\r\n\r\nclass BaseScene {\r\n  constructor() {\r\n    this.isInitialized = false;\r\n    this._camera = null;\r\n\r\n    this.stage = new THREE.Scene();\r\n\r\n\r\n    //The X axis is red. The Y axis is green. The Z axis is blue.\r\n    const axisHelper = new THREE.AxisHelper(5);\r\n    //this.stage.add(axisHelper);\r\n  }\r\n\r\n  get camera() {\r\n    return this._camera;\r\n  }\r\n\r\n  init(context) {\r\n    this.isInitialized = true;\r\n  }\r\n\r\n  resume(context) {\r\n\r\n  }\r\n\r\n  update(context) {\r\n    throw new Error(\"abstract\");\r\n  }\r\n\r\n  render(context) {\r\n    throw new Error(\"abstract\");\r\n  }\r\n\r\n  pause(context) {\r\n\r\n  }\r\n\r\n  cleanUp(context) {}\r\n}\r\n\r\nmodule.exports = BaseScene;","module.exports = {\r\n  MSG: {\r\n    INIT: \"INIT\",\r\n    TEEOFF: \"TEEOFF\",\r\n    CLIENT_CONNECTED: \"CLIENT_CONNECTED\",\r\n    CLIENT_DISCONNECTED: \"CLIENT_DISCONNECTED\",\r\n    POSITION_UPDATE: \"POSITION_UPDATE\",\r\n    CHANGE_MAP: \"CHANGE_MAP\"\r\n  }\r\n}","class EntityManager {\r\n  constructor(stage, options) {\r\n    this.stage = stage;\r\n\r\n    this.entities = new Map();\r\n    this.options = options;\r\n\r\n    /*\r\n     * Contains all usable materials\r\n     */\r\n    this.material = {};\r\n  }\r\n\r\n\r\n\r\n  init(context) {\r\n\r\n  }\r\n\r\n  update(context) {\r\n\r\n  }\r\n\r\n  render(context) {\r\n\r\n  }\r\n\r\n  addEntity(context, entity) {\r\n    entity.init(context);\r\n    this.entities.set(entity.id, entity);\r\n\r\n    this.stage.add(entity.mesh);\r\n  }\r\n\r\n  removeEntity(context, entity) {\r\n    this.stage.remove(entity.mesh);\r\n    this.entities.delete(entity.id);\r\n  }\r\n\r\n  /**\r\n   * get an entity by id\r\n   *\r\n   * @param {String} id\r\n   * @returns {Entity} the searched entity\r\n   * @memberof EntityManager\r\n   */\r\n  get(id) {\r\n    return this.entities.get(id);\r\n  }\r\n}\r\n\r\nmodule.exports = EntityManager;","module.exports = {\r\n  TILESIZE: 1,\r\n  PLAYER_RADIUS: 1 * 0.5,\r\n  TICKS: 1 / 30\r\n};","const THREE = require('three');\r\nconst Statics = require(\"./../common/statics\");\r\n\r\nclass Map {\r\n  constructor() {\r\n\r\n\r\n    /**\r\n     * all tiles, mapped to the position e.g.: x_y\r\n     */\r\n    this.meshes = null;\r\n\r\n    /**\r\n     * the group contianing all tiles\r\n     */\r\n    this.mesh = null;\r\n  }\r\n\r\n  init(context, data) {\r\n    this.data = data;\r\n    this.build(data);\r\n  }\r\n\r\n  build(data) {\r\n    var geometry = new THREE.PlaneGeometry(Statics.TILESIZE, Statics.TILESIZE);\r\n    var material = new THREE.MeshBasicMaterial({\r\n      color: 0xffff00,\r\n      side: THREE.DoubleSide\r\n    });\r\n\r\n    this.meshes = {};\r\n    this.mesh = new THREE.Group();\r\n\r\n\r\n    for (let y = 0; y < data.height; y++) {\r\n      for (let x = 0; x < data.width; x++) {\r\n        const plane = new THREE.Mesh(geometry, material);\r\n\r\n        const tile = data.map[y * x + x];\r\n        // TODO: add the style of the plane\r\n\r\n        this.meshes[x + \"_\" + y] = plane;\r\n        plane.position.set(\r\n          x * Statics.TILESIZE,\r\n          y * Statics.TILESIZE,\r\n          0\r\n        );\r\n        this.mesh.add(plane);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = Map;","class Entity {\r\n  constructor(id, data) {\r\n    /*\r\n     * the id of the entity,\r\n     * it can be named or generated (timebased)\r\n     */\r\n    this.id = id;\r\n    this.data = data || {};\r\n    this.initialized = false;\r\n  }\r\n\r\n  /**\r\n   * override this to initialize the element.\r\n   * the supermethod must be called AT THE END of the inherited init-metehod\r\n   *\r\n   * @param {Context} context\r\n   * @memberof Entity\r\n   */\r\n  init(context) {\r\n    this.initialized = true;\r\n    this.mesh.name = this.id;\r\n    this.mesh.entity = this;\r\n  }\r\n\r\n  get mesh() {\r\n    throw new Error(\"abstract\");\r\n  }\r\n\r\n  get position() {\r\n    return this.body.mesh.position;\r\n  }\r\n\r\n  update(context) {\r\n\r\n  }\r\n\r\n  render(context) {\r\n    if (this.data.position) {\r\n      this.mesh.position.copy(this.data.position);\r\n    }\r\n\r\n    if (this.data.quaternion) {\r\n      this.mesh.quaternion.copy(this.data.quaternion);\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = Entity;","const THREE = require('three');\r\nconst Entity = require('./entity');\r\nconst Statics = require(\"../common/statics\");\r\n\r\nclass Player extends Entity {\r\n  constructor(data) {\r\n    super(data.id);\r\n    this.data = data;\r\n  }\r\n\r\n  init(context) {\r\n    const sphere_geometry = new THREE.SphereGeometry(Statics.PLAYER_RADIUS, 8, 8);\r\n    this._mesh = new THREE.Mesh(\r\n      sphere_geometry,\r\n      new THREE.MeshLambertMaterial({\r\n        color: 0x00ff00\r\n      })\r\n    );\r\n\r\n    this._mesh.player = this;\r\n\r\n    this._mesh.position.set(0, 0, 0.1);\r\n\r\n    super.init(context);\r\n  }\r\n\r\n  get mesh() {\r\n    return this._mesh;\r\n  }\r\n\r\n\r\n\r\n\r\n  update(context) {\r\n\r\n  }\r\n\r\n  postStep() {\r\n\r\n  }\r\n\r\n  render(context) {\r\n    super.render(context);\r\n  }\r\n}\r\n\r\nmodule.exports = Player;","module.exports = function( THREE ) {\n\t/**\n\t * @author qiao / https://github.com/qiao\n\t * @author mrdoob / http://mrdoob.com\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t * @author erich666 / http://erichaines.com\n\t */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\n\tfunction OrbitControls( object, domElement ) {\n\n\t\tthis.object = object;\n\n\t\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new THREE.Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.25;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t\t// Set to false to disable use of the keys\n\t\tthis.enableKeys = true;\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn spherical.phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn spherical.theta;\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\tscope.update();\n\n\t\t\tstate = STATE.NONE;\n\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function() {\n\n\t\t\tvar offset = new THREE.Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\t\tvar quatInverse = quat.clone().inverse();\n\n\t\t\tvar lastPosition = new THREE.Vector3();\n\t\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\t\treturn function update () {\n\n\t\t\t\tvar position = scope.object.position;\n\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3( offset );\n\n\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t\t}\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t// restrict theta to be between desired limits\n\t\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\t\tspherical.makeSafe();\n\n\n\t\t\t\tspherical.radius *= scale;\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t\t// move target to panned location\n\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t\tthis.dispose = function() {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t\t};\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tvar scope = this;\n\n\t\tvar changeEvent = { type: 'change' };\n\t\tvar startEvent = { type: 'start' };\n\t\tvar endEvent = { type: 'end' };\n\n\t\tvar STATE = { NONE : - 1, ROTATE : 0, DOLLY : 1, PAN : 2, TOUCH_ROTATE : 3, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\n\n\t\tvar state = STATE.NONE;\n\n\t\tvar EPS = 0.000001;\n\n\t\t// current position in spherical coordinates\n\t\tvar spherical = new THREE.Spherical();\n\t\tvar sphericalDelta = new THREE.Spherical();\n\n\t\tvar scale = 1;\n\t\tvar panOffset = new THREE.Vector3();\n\t\tvar zoomChanged = false;\n\n\t\tvar rotateStart = new THREE.Vector2();\n\t\tvar rotateEnd = new THREE.Vector2();\n\t\tvar rotateDelta = new THREE.Vector2();\n\n\t\tvar panStart = new THREE.Vector2();\n\t\tvar panEnd = new THREE.Vector2();\n\t\tvar panDelta = new THREE.Vector2();\n\n\t\tvar dollyStart = new THREE.Vector2();\n\t\tvar dollyEnd = new THREE.Vector2();\n\t\tvar dollyDelta = new THREE.Vector2();\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t}\n\n\t\tfunction rotateLeft( angle ) {\n\n\t\t\tsphericalDelta.theta -= angle;\n\n\t\t}\n\n\t\tfunction rotateUp( angle ) {\n\n\t\t\tsphericalDelta.phi -= angle;\n\n\t\t}\n\n\t\tvar panLeft = function() {\n\n\t\t\tvar v = new THREE.Vector3();\n\n\t\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\tvar panUp = function() {\n\n\t\t\tvar v = new THREE.Vector3();\n\n\t\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 ); // get Y column of objectMatrix\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tvar pan = function() {\n\n\t\t\tvar offset = new THREE.Vector3();\n\n\t\t\treturn function pan ( deltaX, deltaY ) {\n\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\t\t// perspective\n\t\t\t\t\tvar position = scope.object.position;\n\t\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\t\tscope.enablePan = false;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}();\n\n\t\tfunction dollyIn( dollyScale ) {\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction dollyOut( dollyScale ) {\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate( event ) {\n\n\t\t\t//console.log( 'handleMouseDownRotate' );\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownDolly( event ) {\n\n\t\t\t//console.log( 'handleMouseDownDolly' );\n\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownPan( event ) {\n\n\t\t\t//console.log( 'handleMouseDownPan' );\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseMoveRotate( event ) {\n\n\t\t\t//console.log( 'handleMouseMoveRotate' );\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMoveDolly( event ) {\n\n\t\t\t//console.log( 'handleMouseMoveDolly' );\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMovePan( event ) {\n\n\t\t\t//console.log( 'handleMouseMovePan' );\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseUp( event ) {\n\n\t\t\t//console.log( 'handleMouseUp' );\n\n\t\t}\n\n\t\tfunction handleMouseWheel( event ) {\n\n\t\t\t//console.log( 'handleMouseWheel' );\n\n\t\t\tif ( event.deltaY < 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleKeyDown( event ) {\n\n\t\t\t//console.log( 'handleKeyDown' );\n\n\t\t\tswitch ( event.keyCode ) {\n\n\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartRotate( event ) {\n\n\t\t\t//console.log( 'handleTouchStartRotate' );\n\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t}\n\n\t\tfunction handleTouchStartDolly( event ) {\n\n\t\t\t//console.log( 'handleTouchStartDolly' );\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tfunction handleTouchStartPan( event ) {\n\n\t\t\t//console.log( 'handleTouchStartPan' );\n\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t}\n\n\t\tfunction handleTouchMoveRotate( event ) {\n\n\t\t\t//console.log( 'handleTouchMoveRotate' );\n\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleTouchMoveDolly( event ) {\n\n\t\t\t//console.log( 'handleTouchMoveDolly' );\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleTouchMovePan( event ) {\n\n\t\t\t//console.log( 'handleTouchMovePan' );\n\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleTouchEnd( event ) {\n\n\t\t\t//console.log( 'handleTouchEnd' );\n\n\t\t}\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( event.button === scope.mouseButtons.ORBIT ) {\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t} else if ( event.button === scope.mouseButtons.ZOOM ) {\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t} else if ( event.button === scope.mouseButtons.PAN ) {\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( state === STATE.ROTATE ) {\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t} else if ( state === STATE.DOLLY ) {\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t} else if ( state === STATE.PAN ) {\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseUp( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\thandleMouseUp( event );\n\n\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( endEvent );\n\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\thandleMouseWheel( event );\n\n\t\t\tscope.dispatchEvent( startEvent ); // not sure why these are here...\n\t\t\tscope.dispatchEvent( endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\t\thandleKeyDown( event );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tswitch ( event.touches.length ) {\n\n\t\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\t// two-fingered touch: dolly\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleTouchStartDolly( event );\n\n\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tswitch ( event.touches.length ) {\n\n\t\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...\n\n\t\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2: // two-fingered touch: dolly\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...\n\n\t\t\t\t\thandleTouchMoveDolly( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return; // is this needed?...\n\n\t\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchEnd( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\thandleTouchEnd( event );\n\n\t\t\tscope.dispatchEvent( endEvent );\n\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onContextMenu( event ) {\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\t\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\t\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t\t// force an update at start\n\n\t\tthis.update();\n\n\t};\n\n\tOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\n\tOrbitControls.prototype.constructor = OrbitControls;\n\n\tObject.defineProperties( OrbitControls.prototype, {\n\n\t\tcenter: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\n\t\t\t\treturn this.target;\n\n\t\t\t}\n\n\t\t},\n\n\t\t// backward compatibility\n\n\t\tnoZoom: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\treturn ! this.enableZoom;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\tthis.enableZoom = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoRotate: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\treturn ! this.enableRotate;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\tthis.enableRotate = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoPan: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\treturn ! this.enablePan;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\tthis.enablePan = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoKeys: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\treturn ! this.enableKeys;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\tthis.enableKeys = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tstaticMoving : {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\treturn ! this.enableDamping;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\tthis.enableDamping = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tdynamicDampingFactor : {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\treturn this.dampingFactor;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\tthis.dampingFactor = value;\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\treturn OrbitControls;\n};\n","const Events = require(\"events\");\r\n\r\nclass Action extends Events {\r\n  constructor() {\r\n    super();\r\n    this.isInitialized = false;\r\n  }\r\n\r\n\r\n  init(context) {\r\n    this.isInitialized = true;\r\n  }\r\n\r\n  update(context) {\r\n\r\n  }\r\n}\r\n\r\nmodule.exports = Action;","const THREE = require('three');\r\nconst Action = require(\"./action\");\r\nconst Statics = require(\"./../common/statics\");\r\n\r\nconst mouseVector = new THREE.Vector2();\r\nclass TeeOffAction extends Action {\r\n  constructor(stage, player) {\r\n    super();\r\n    this.stage = stage;\r\n    this.selectedElement = null;\r\n\r\n\r\n    /**\r\n     * mouse intersection handler\r\n     */\r\n    this.raycaster = null;\r\n\r\n\r\n    /**\r\n     * blocks all other actions and stuff, if this is true\r\n     */\r\n    this.isBusy = false;\r\n\r\n    this.line = null;\r\n\r\n    this.start = new THREE.Vector3(0, 0, 0);\r\n    this.end = new THREE.Vector3(0, 0, 0);\r\n  }\r\n\r\n  init(context) {\r\n\r\n\r\n    const material = new THREE.LineBasicMaterial({\r\n      color: 0x0000ff\r\n    });\r\n\r\n\r\n    const geometry = new THREE.Geometry();\r\n    geometry.vertices.push(this.start);\r\n    geometry.vertices.push(this.end);\r\n\r\n    this.line = new THREE.Line(geometry, material);\r\n    this.line.renderOrder = 10000; // this draws over everything\r\n\r\n    this.raycaster = new THREE.Raycaster();\r\n    super.init(context);\r\n  }\r\n\r\n  update(context) {\r\n    mouseVector.x = context.inputManager.mouse.x;\r\n    mouseVector.y = context.inputManager.mouse.y;\r\n\r\n    this.raycaster.setFromCamera(mouseVector, context.camera);\r\n    var intersects = this.raycaster.intersectObjects(this.stage.children);\r\n\r\n    /*\r\n     * check what is selected\r\n     */\r\n    if (intersects.length > 0) {\r\n      if (this.selectedElement != intersects[0].object && intersects[0].object.player) {\r\n        if (this.selectedElement) {\r\n          this.selectedElement.material.emissive.setHex(this.selectedElement.currentHex);\r\n        }\r\n        this.selectedElement = intersects[0].object;\r\n        this.selectedElement.currentHex = this.selectedElement.material.emissive.getHex();\r\n        this.selectedElement.material.emissive.setHex(0xff0000);\r\n      }\r\n    } else {\r\n      if (this.selectedElement) {\r\n        this.selectedElement.material.emissive.setHex(this.selectedElement.currentHex);\r\n      }\r\n      this.selectedElement = null;\r\n    }\r\n\r\n    if (this.selectedElement) {\r\n      this.start.x = this.selectedElement.position.x;\r\n      this.start.y = this.selectedElement.position.y;\r\n      this.line.position.z = this.selectedElement.position.z + Statics.PLAYER_RADIUS;\r\n    }\r\n\r\n    this.end.x = context.inputManager.mouse.x * 10;\r\n    this.end.y = context.inputManager.mouse.y * 10;\r\n\r\n    this.line.geometry.verticesNeedUpdate = true;\r\n\r\n\r\n\r\n    var vec = new THREE.Vector3(); // create once and reuse\r\n    var pos = new THREE.Vector3(); // create once and reuse\r\n    vec.set(\r\n      (context.inputManager.mouse.x / window.innerWidth) * 2 - 1,\r\n      -(context.inputManager.mouse.y / window.innerHeight) * 2 + 1,\r\n      0.5);\r\n\r\n    vec.unproject(context.camera);\r\n    vec.sub(context.camera.position).normalize();\r\n    var distance = -context.camera.position.z / vec.z;\r\n    this.end.copy(context.camera.position).add(vec.multiplyScalar(distance));\r\n\r\n\r\n\r\n    /*\r\n     * check if action shall be executed\r\n     */\r\n    const m = context.inputManager.mapping;\r\n    if (this.selectedElement && m.USE.wasPressed) {\r\n      this.stage.add(this.line);\r\n      this.isBusy = true;\r\n    }\r\n\r\n    if (this.selectedElement && m.USE.wasReleased) {\r\n      this.isBusy = false;\r\n      this.stage.remove(this.line);\r\n      this.emit(TeeOffAction.TEEOFF, {\r\n        vector: {\r\n          x: 1,\r\n          y: 1\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nTeeOffAction.TEEOFF = \"TEEOFF\";\r\n\r\nmodule.exports = TeeOffAction;","const BaseScene = require('./basescene');\r\nconst COM = require(\"./../common/com\");\r\n\r\n//const KEY_MAPPING = require('./../config/keymapping.json');\r\n//var ColladaLoader = require('three-collada-loader-2');\r\n\r\nconst EntityManager = require('./entitymanager');\r\nconst MATERIAL = require('./../content/materials.json');\r\nconst Map = require(\"./map\");\r\nconst Player = require(\"./playerentity\");\r\nconst KEY_MAPPING = require('./keymapping.json');\r\nconst THREE = require('three');\r\nconst OrbitControls = require('three-orbit-controls')(THREE);\r\n\r\nconst TeeOffAction = require(\"./teeoffaction\");\r\n\r\nclass GameplayScene extends BaseScene {\r\n  constructor(socket) {\r\n    super();\r\n    this.socket = socket;\r\n\r\n    this._camera = null;\r\n\r\n    this.entityManager = new EntityManager(this.stage, {\r\n      material: MATERIAL\r\n    });\r\n\r\n    /**\r\n     * will be filled, when the init message comes\r\n     */\r\n    this.player = null;\r\n\r\n    /**\r\n     * maps id to player\r\n     */\r\n\r\n    this.players = {};\r\n\r\n    /**\r\n     * will  be filled, when the change_map message comes\r\n     */\r\n    this.map = null;\r\n\r\n\r\n    /**\r\n     * the handling of the camera\r\n     */\r\n    this.cameraControls = null;\r\n\r\n\r\n    this.teeOffAction = null;\r\n  }\r\n\r\n  init(context) {\r\n    this.entityManager.init(context);\r\n    context.inputManager.loadMapping(KEY_MAPPING);\r\n    this._camera = new THREE.PerspectiveCamera(75, context.width / context.height, 0.1, 1000);\r\n    this._camera.position.z = 10;\r\n\r\n    this.cameraControls = new OrbitControls(this._camera);\r\n    //   this.cameraControls.update();\r\n    /*\r\n        this.cameraControls.enableDamping = true\r\n        this.cameraControls.dampingFactor = 0.25\r\n        this.cameraControls.enableZoom = false*/\r\n\r\n    const pointLight = new THREE.PointLight(0xFFFFFF, 1, 25);\r\n    pointLight.position.x = 0;\r\n    pointLight.position.y = 0;\r\n    pointLight.position.z = 15;\r\n\r\n    this.stage.add(pointLight);\r\n    super.init(context);\r\n\r\n    this.socket.on(COM.MSG.INIT, (evt) => {\r\n      for (let id in evt.players) {\r\n        const data = evt.players[id];\r\n        // fill the references\r\n        const player = this.addPlayer(context, data);\r\n        // find the player object and save it for easier access\r\n        if (id == evt.you) {\r\n          this.player = player;\r\n        }\r\n      }\r\n    });\r\n\r\n    this.socket.on(COM.MSG.CLIENT_CONNECTED, (evt) => {\r\n      this.addPlayer(context, evt.player);\r\n\r\n    });\r\n\r\n    this.socket.on(COM.MSG.CLIENT_DISCONNECTED, (evt) => {\r\n      this.removePlayer(context, evt.id);\r\n    });\r\n\r\n    this.socket.on(COM.MSG.POSITION_UPDATE, (evt) => {\r\n      for (let id in evt) {\r\n        const update = evt[id];\r\n        this.updatePlayer(context, id, update);\r\n      }\r\n    });\r\n\r\n    this.socket.on(COM.MSG.CHANGE_MAP, (evt) => {\r\n      const map = new Map();\r\n      map.init(context, evt);\r\n      this.stage.add(map.mesh);\r\n    });\r\n\r\n    this.teeOffAction = new TeeOffAction(this.stage);\r\n\r\n    this.teeOffAction.on(TeeOffAction.TEEOFF,\r\n      e => this.socket.emit(COM.MSG.TEEOFF, e)\r\n    );\r\n\r\n  }\r\n\r\n  resume(context) {\r\n    this.teeOffAction.init(context);\r\n  }\r\n\r\n  updatePlayer(context, id, update) {\r\n    const player = this.players[id];\r\n    if (update.position) {\r\n      player.mesh.position.copy(update.position);\r\n    }\r\n\r\n    if (update.quaternion) {\r\n      player.mesh.quaternion.copy(update.quaternion);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * uses an incoming data event, to create a player\r\n   *\r\n   * @param {*} context\r\n   * @param {*} data\r\n   * @returns the created player\r\n   * @memberof GameplayScene\r\n   */\r\n  addPlayer(context, data) {\r\n    const id = data.id;\r\n    const player = new Player(data);\r\n    this.players[id] = player;\r\n    this.entityManager.addEntity(context, player);\r\n    const mesh = player.mesh;\r\n    mesh.position.set(data.position);\r\n    mesh.quaternion.set(data.quaternion);\r\n    return player;\r\n  }\r\n\r\n  removePlayer(context, id) {\r\n    const player = this.players[id];\r\n    this.entityManager.removeEntity(context, player);\r\n    delete this.players[id];\r\n  }\r\n\r\n  update(context) {\r\n    this.entityManager.update(context);\r\n\r\n    this.cameraControls.enabled = !this.teeOffAction.isBusy;\r\n\r\n\r\n    if (this.teeOffAction.isInitialized) {\r\n      this.teeOffAction.update(context);\r\n    }\r\n\r\n  }\r\n\r\n  render(context) {\r\n    this.entityManager.render(context);\r\n  }\r\n\r\n  tearDown(context) {\r\n\r\n  }\r\n}\r\n\r\nmodule.exports = GameplayScene;","/**\r\n * Parses an URI\r\n *\r\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\r\n * @api private\r\n */\r\n\r\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\r\n\r\nvar parts = [\r\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\r\n];\r\n\r\nmodule.exports = function parseuri(str) {\r\n    var src = str,\r\n        b = str.indexOf('['),\r\n        e = str.indexOf(']');\r\n\r\n    if (b != -1 && e != -1) {\r\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\r\n    }\r\n\r\n    var m = re.exec(str || ''),\r\n        uri = {},\r\n        i = 14;\r\n\r\n    while (i--) {\r\n        uri[parts[i]] = m[i] || '';\r\n    }\r\n\r\n    if (b != -1 && e != -1) {\r\n        uri.source = src;\r\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\r\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\r\n        uri.ipv6uri = true;\r\n    }\r\n\r\n    return uri;\r\n};\r\n","export default (typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {});\n","// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nexport function nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nexport var title = 'browser';\nexport var platform = 'browser';\nexport var browser = true;\nexport var env = {};\nexport var argv = [];\nexport var version = ''; // empty string to avoid regexp issues\nexport var versions = {};\nexport var release = {};\nexport var config = {};\n\nfunction noop() {}\n\nexport var on = noop;\nexport var addListener = noop;\nexport var once = noop;\nexport var off = noop;\nexport var removeListener = noop;\nexport var removeAllListeners = noop;\nexport var emit = noop;\n\nexport function binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nexport function cwd () { return '/' }\nexport function chdir (dir) {\n    throw new Error('process.chdir is not supported');\n};\nexport function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nexport function hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3\n  var seconds = Math.floor(clocktime)\n  var nanoseconds = Math.floor((clocktime%1)*1e9)\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0]\n    nanoseconds = nanoseconds - previousTimestamp[1]\n    if (nanoseconds<0) {\n      seconds--\n      nanoseconds += 1e9\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nexport function uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nexport default {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\nvar inited = false;\nfunction init () {\n  inited = true;\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i]\n    revLookup[code.charCodeAt(i)] = i\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62\n  revLookup['_'.charCodeAt(0)] = 63\n}\n\nexport function toByteArray (b64) {\n  if (!inited) {\n    init();\n  }\n  var i, j, l, tmp, placeHolders, arr\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nexport function fromByteArray (uint8) {\n  if (!inited) {\n    init();\n  }\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n","\nexport function read (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexport function write (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nexport default Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n\nimport * as base64 from './base64'\nimport * as ieee754 from './ieee754'\nimport isArray from './isArray'\n\nexport var INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : true\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nvar _kMaxLength = kMaxLength()\nexport {_kMaxLength as kMaxLength};\nfunction typedArraySupport () {\n  return true;\n  // rollup issues\n  // try {\n  //   var arr = new Uint8Array(1)\n  //   arr.__proto__ = {\n  //     __proto__: Uint8Array.prototype,\n  //     foo: function () { return 42 }\n  //   }\n  //   return arr.foo() === 42 && // typed array instances can be augmented\n  //       typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n  //       arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  // } catch (e) {\n  //   return false\n  // }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nexport function Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    // Object.defineProperty(Buffer, Symbol.species, {\n    //   value: null,\n    //   configurable: true\n    // })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (internalIsBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nexport function SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\nBuffer.isBuffer = isBuffer;\nfunction internalIsBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!internalIsBuffer(a) || !internalIsBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!internalIsBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (internalIsBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!internalIsBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!internalIsBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (internalIsBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!internalIsBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = internalIsBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nexport function isBuffer(obj) {\n  return obj != null && (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj))\n}\n\nfunction isFastBuffer (obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer (obj) {\n  return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isFastBuffer(obj.slice(0, 0))\n}\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder) {\n    return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var buf = '';\n    while (str.charAt(++i) !== '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      p.nsp += c;\n      if (i === str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i === str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new self[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, its not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","/**\r\n * Compiles a querystring\r\n * Returns string representation of the object\r\n *\r\n * @param {Object}\r\n * @api private\r\n */\r\n\r\nexports.encode = function (obj) {\r\n  var str = '';\r\n\r\n  for (var i in obj) {\r\n    if (obj.hasOwnProperty(i)) {\r\n      if (str.length) str += '&';\r\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\r\n    }\r\n  }\r\n\r\n  return str;\r\n};\r\n\r\n/**\r\n * Parses a simple querystring into an object\r\n *\r\n * @param {String} qs\r\n * @api private\r\n */\r\n\r\nexports.decode = function(qs){\r\n  var qry = {};\r\n  var pairs = qs.split('&');\r\n  for (var i = 0, l = pairs.length; i < l; i++) {\r\n    var pair = pairs[i].split('=');\r\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\r\n  }\r\n  return qry;\r\n};\r\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(xhr.status);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in self ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * Until https://github.com/tc39/proposal-global is shipped.\n */\nfunction glob () {\n  return typeof self !== 'undefined' ? self\n      : typeof window !== 'undefined' ? window\n      : typeof global !== 'undefined' ? global : {};\n}\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    var global = glob();\n    callbacks = global.___eio = (global.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","export default {};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n} else {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n  var opts = {\n    agent: this.agent,\n    perMessageDeflate: this.perMessageDeflate\n  };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","function noop() {}\n\nconst identity = x => x;\n\nfunction assign(tar, src) {\n\tfor (const k in src) tar[k] = src[k];\n\treturn tar;\n}\n\nfunction is_promise(value) {\n\treturn value && typeof value.then === 'function';\n}\n\nfunction add_location(element, file, line, column, char) {\n\telement.__svelte_meta = {\n\t\tloc: { file, line, column, char }\n\t};\n}\n\nfunction run(fn) {\n\treturn fn();\n}\n\nfunction blank_object() {\n\treturn Object.create(null);\n}\n\nfunction run_all(fns) {\n\tfns.forEach(run);\n}\n\nfunction is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\nfunction safe_not_equal(a, b) {\n\treturn a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\n\nfunction not_equal(a, b) {\n\treturn a != a ? b == b : a !== b;\n}\n\nfunction validate_store(store, name) {\n\tif (!store || typeof store.subscribe !== 'function') {\n\t\tthrow new Error(`'${name}' is not a store with a 'subscribe' method`);\n\t}\n}\n\nfunction subscribe(component, store, callback) {\n\tcomponent.$$.on_destroy.push(store.subscribe(callback));\n}\n\nfunction create_slot(definition, ctx, fn) {\n\tif (definition) {\n\t\tconst slot_ctx = get_slot_context(definition, ctx, fn);\n\t\treturn definition[0](slot_ctx);\n\t}\n}\n\nfunction get_slot_context(definition, ctx, fn) {\n\treturn definition[1]\n\t\t? assign({}, assign(ctx.$$scope.ctx, definition[1](fn ? fn(ctx) : {})))\n\t\t: ctx.$$scope.ctx;\n}\n\nfunction get_slot_changes(definition, ctx, changed, fn) {\n\treturn definition[1]\n\t\t? assign({}, assign(ctx.$$scope.changed || {}, definition[1](fn ? fn(changed) : {})))\n\t\t: ctx.$$scope.changed || {};\n}\n\nfunction exclude_internal_props(props) {\n\tconst result = {};\n\tfor (const k in props) if (k[0] !== '$') result[k] = props[k];\n\treturn result;\n}\n\nconst tasks = new Set();\nlet running = false;\n\nfunction run_tasks() {\n\ttasks.forEach(task => {\n\t\tif (!task[0](window.performance.now())) {\n\t\t\ttasks.delete(task);\n\t\t\ttask[1]();\n\t\t}\n\t});\n\n\trunning = tasks.size > 0;\n\tif (running) requestAnimationFrame(run_tasks);\n}\n\nfunction clear_loops() {\n\t// for testing...\n\ttasks.forEach(task => tasks.delete(task));\n\trunning = false;\n}\n\nfunction loop(fn) {\n\tlet task;\n\n\tif (!running) {\n\t\trunning = true;\n\t\trequestAnimationFrame(run_tasks);\n\t}\n\n\treturn {\n\t\tpromise: new Promise(fulfil => {\n\t\t\ttasks.add(task = [fn, fulfil]);\n\t\t}),\n\t\tabort() {\n\t\t\ttasks.delete(task);\n\t\t}\n\t};\n}\n\nfunction append(target, node) {\n\ttarget.appendChild(node);\n}\n\nfunction insert(target, node, anchor) {\n\ttarget.insertBefore(node, anchor);\n}\n\nfunction detach(node) {\n\tnode.parentNode.removeChild(node);\n}\n\nfunction detach_between(before, after) {\n\twhile (before.nextSibling && before.nextSibling !== after) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction detach_before(after) {\n\twhile (after.previousSibling) {\n\t\tafter.parentNode.removeChild(after.previousSibling);\n\t}\n}\n\nfunction detach_after(before) {\n\twhile (before.nextSibling) {\n\t\tbefore.parentNode.removeChild(before.nextSibling);\n\t}\n}\n\nfunction destroy_each(iterations, detaching) {\n\tfor (let i = 0; i < iterations.length; i += 1) {\n\t\tif (iterations[i]) iterations[i].d(detaching);\n\t}\n}\n\nfunction element(name) {\n\treturn document.createElement(name);\n}\n\nfunction svg_element(name) {\n\treturn document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nfunction text(data) {\n\treturn document.createTextNode(data);\n}\n\nfunction space() {\n\treturn text(' ');\n}\n\nfunction empty() {\n\treturn text('');\n}\n\nfunction listen(node, event, handler, options) {\n\tnode.addEventListener(event, handler, options);\n\treturn () => node.removeEventListener(event, handler, options);\n}\n\nfunction prevent_default(fn) {\n\treturn function(event) {\n\t\tevent.preventDefault();\n\t\treturn fn.call(this, event);\n\t};\n}\n\nfunction stop_propagation(fn) {\n\treturn function(event) {\n\t\tevent.stopPropagation();\n\t\treturn fn.call(this, event);\n\t};\n}\n\nfunction attr(node, attribute, value) {\n\tif (value == null) node.removeAttribute(attribute);\n\telse node.setAttribute(attribute, value);\n}\n\nfunction set_attributes(node, attributes) {\n\tfor (const key in attributes) {\n\t\tif (key === 'style') {\n\t\t\tnode.style.cssText = attributes[key];\n\t\t} else if (key in node) {\n\t\t\tnode[key] = attributes[key];\n\t\t} else {\n\t\t\tattr(node, key, attributes[key]);\n\t\t}\n\t}\n}\n\nfunction set_custom_element_data(node, prop, value) {\n\tif (prop in node) {\n\t\tnode[prop] = value;\n\t} else {\n\t\tattr(node, prop, value);\n\t}\n}\n\nfunction xlink_attr(node, attribute, value) {\n\tnode.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\nfunction get_binding_group_value(group) {\n\tconst value = [];\n\tfor (let i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) value.push(group[i].__value);\n\t}\n\treturn value;\n}\n\nfunction to_number(value) {\n\treturn value === '' ? undefined : +value;\n}\n\nfunction time_ranges_to_array(ranges) {\n\tconst array = [];\n\tfor (let i = 0; i < ranges.length; i += 1) {\n\t\tarray.push({ start: ranges.start(i), end: ranges.end(i) });\n\t}\n\treturn array;\n}\n\nfunction children(element) {\n\treturn Array.from(element.childNodes);\n}\n\nfunction claim_element(nodes, name, attributes, svg) {\n\tfor (let i = 0; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeName === name) {\n\t\t\tfor (let j = 0; j < node.attributes.length; j += 1) {\n\t\t\t\tconst attribute = node.attributes[j];\n\t\t\t\tif (!attributes[attribute.name]) node.removeAttribute(attribute.name);\n\t\t\t}\n\t\t\treturn nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n\t\t}\n\t}\n\n\treturn svg ? svg_element(name) : element(name);\n}\n\nfunction claim_text(nodes, data) {\n\tfor (let i = 0; i < nodes.length; i += 1) {\n\t\tconst node = nodes[i];\n\t\tif (node.nodeType === 3) {\n\t\t\tnode.data = data;\n\t\t\treturn nodes.splice(i, 1)[0];\n\t\t}\n\t}\n\n\treturn text(data);\n}\n\nfunction set_data(text, data) {\n\tdata = '' + data;\n\tif (text.data !== data) text.data = data;\n}\n\nfunction set_input_type(input, type) {\n\ttry {\n\t\tinput.type = type;\n\t} catch (e) {\n\t\t// do nothing\n\t}\n}\n\nfunction set_style(node, key, value) {\n\tnode.style.setProperty(key, value);\n}\n\nfunction select_option(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\n\t\tif (option.__value === value) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n}\n\nfunction select_options(select, value) {\n\tfor (let i = 0; i < select.options.length; i += 1) {\n\t\tconst option = select.options[i];\n\t\toption.selected = ~value.indexOf(option.__value);\n\t}\n}\n\nfunction select_value(select) {\n\tconst selected_option = select.querySelector(':checked') || select.options[0];\n\treturn selected_option && selected_option.__value;\n}\n\nfunction select_multiple_value(select) {\n\treturn [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n\nfunction add_resize_listener(element, fn) {\n\tif (getComputedStyle(element).position === 'static') {\n\t\telement.style.position = 'relative';\n\t}\n\n\tconst object = document.createElement('object');\n\tobject.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n\tobject.type = 'text/html';\n\n\tlet win;\n\n\tobject.onload = () => {\n\t\twin = object.contentDocument.defaultView;\n\t\twin.addEventListener('resize', fn);\n\t};\n\n\tif (/Trident/.test(navigator.userAgent)) {\n\t\telement.appendChild(object);\n\t\tobject.data = 'about:blank';\n\t} else {\n\t\tobject.data = 'about:blank';\n\t\telement.appendChild(object);\n\t}\n\n\treturn {\n\t\tcancel: () => {\n\t\t\twin && win.removeEventListener && win.removeEventListener('resize', fn);\n\t\t\telement.removeChild(object);\n\t\t}\n\t};\n}\n\nfunction toggle_class(element, name, toggle) {\n\telement.classList[toggle ? 'add' : 'remove'](name);\n}\n\nfunction custom_event(type, detail) {\n\tconst e = document.createEvent('CustomEvent');\n\te.initCustomEvent(type, false, false, detail);\n\treturn e;\n}\n\nlet stylesheet;\nlet active = 0;\nlet current_rules = {};\n\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n\tlet hash = 5381;\n\tlet i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn hash >>> 0;\n}\n\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n\tconst step = 16.666 / duration;\n\tlet keyframes = '{\\n';\n\n\tfor (let p = 0; p <= 1; p += step) {\n\t\tconst t = a + (b - a) * ease(p);\n\t\tkeyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n\t}\n\n\tconst rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n\tconst name = `__svelte_${hash(rule)}_${uid}`;\n\n\tif (!current_rules[name]) {\n\t\tif (!stylesheet) {\n\t\t\tconst style = element('style');\n\t\t\tdocument.head.appendChild(style);\n\t\t\tstylesheet = style.sheet;\n\t\t}\n\n\t\tcurrent_rules[name] = true;\n\t\tstylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n\t}\n\n\tconst animation = node.style.animation || '';\n\tnode.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n\n\tactive += 1;\n\treturn name;\n}\n\nfunction delete_rule(node, name) {\n\tnode.style.animation = (node.style.animation || '')\n\t\t.split(', ')\n\t\t.filter(name\n\t\t\t? anim => anim.indexOf(name) < 0 // remove specific animation\n\t\t\t: anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n\t\t)\n\t\t.join(', ');\n\n\tif (name && !--active) clear_rules();\n}\n\nfunction clear_rules() {\n\trequestAnimationFrame(() => {\n\t\tif (active) return;\n\t\tlet i = stylesheet.cssRules.length;\n\t\twhile (i--) stylesheet.deleteRule(i);\n\t\tcurrent_rules = {};\n\t});\n}\n\nfunction create_animation(node, from, fn, params) {\n\tif (!from) return noop;\n\n\tconst to = node.getBoundingClientRect();\n\tif (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom) return noop;\n\n\tconst {\n\t\tdelay = 0,\n\t\tduration = 300,\n\t\teasing = identity,\n\t\tstart: start_time = window.performance.now() + delay,\n\t\tend = start_time + duration,\n\t\ttick = noop,\n\t\tcss\n\t} = fn(node, { from, to }, params);\n\n\tlet running = true;\n\tlet started = false;\n\tlet name;\n\n\tconst css_text = node.style.cssText;\n\n\tfunction start() {\n\t\tif (css) {\n\t\t\tif (delay) node.style.cssText = css_text; // TODO create delayed animation instead?\n\t\t\tname = create_rule(node, 0, 1, duration, 0, easing, css);\n\t\t}\n\n\t\tstarted = true;\n\t}\n\n\tfunction stop() {\n\t\tif (css) delete_rule(node, name);\n\t\trunning = false;\n\t}\n\n\tloop(now => {\n\t\tif (!started && now >= start_time) {\n\t\t\tstart();\n\t\t}\n\n\t\tif (started && now >= end) {\n\t\t\ttick(1, 0);\n\t\t\tstop();\n\t\t}\n\n\t\tif (!running) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (started) {\n\t\t\tconst p = now - start_time;\n\t\t\tconst t = 0 + 1 * easing(p / duration);\n\t\t\ttick(t, 1 - t);\n\t\t}\n\n\t\treturn true;\n\t});\n\n\tif (delay) {\n\t\tif (css) node.style.cssText += css(0, 1);\n\t} else {\n\t\tstart();\n\t}\n\n\ttick(0, 1);\n\n\treturn stop;\n}\n\nfunction fix_position(node) {\n\tconst style = getComputedStyle(node);\n\n\tif (style.position !== 'absolute' && style.position !== 'fixed') {\n\t\tconst { width, height } = style;\n\t\tconst a = node.getBoundingClientRect();\n\t\tnode.style.position = 'absolute';\n\t\tnode.style.width = width;\n\t\tnode.style.height = height;\n\t\tconst b = node.getBoundingClientRect();\n\n\t\tif (a.left !== b.left || a.top !== b.top) {\n\t\t\tconst style = getComputedStyle(node);\n\t\t\tconst transform = style.transform === 'none' ? '' : style.transform;\n\n\t\t\tnode.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n\t\t}\n\t}\n}\n\nlet current_component;\n\nfunction set_current_component(component) {\n\tcurrent_component = component;\n}\n\nfunction get_current_component() {\n\tif (!current_component) throw new Error(`Function called outside component initialization`);\n\treturn current_component;\n}\n\nfunction beforeUpdate(fn) {\n\tget_current_component().$$.before_render.push(fn);\n}\n\nfunction onMount(fn) {\n\tget_current_component().$$.on_mount.push(fn);\n}\n\nfunction afterUpdate(fn) {\n\tget_current_component().$$.after_render.push(fn);\n}\n\nfunction onDestroy(fn) {\n\tget_current_component().$$.on_destroy.push(fn);\n}\n\nfunction createEventDispatcher() {\n\tconst component = current_component;\n\n\treturn (type, detail) => {\n\t\tconst callbacks = component.$$.callbacks[type];\n\n\t\tif (callbacks) {\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = custom_event(type, detail);\n\t\t\tcallbacks.slice().forEach(fn => {\n\t\t\t\tfn.call(component, event);\n\t\t\t});\n\t\t}\n\t};\n}\n\nfunction setContext(key, context) {\n\tget_current_component().$$.context.set(key, context);\n}\n\nfunction getContext(key) {\n\treturn get_current_component().$$.context.get(key);\n}\n\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n\tconst callbacks = component.$$.callbacks[event.type];\n\n\tif (callbacks) {\n\t\tcallbacks.slice().forEach(fn => fn(event));\n\t}\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\n\nlet update_promise;\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\n\nfunction schedule_update() {\n\tif (!update_promise) {\n\t\tupdate_promise = Promise.resolve();\n\t\tupdate_promise.then(flush);\n\t}\n}\n\nfunction tick() {\n\tschedule_update();\n\treturn update_promise;\n}\n\nfunction add_binding_callback(fn) {\n\tbinding_callbacks.push(fn);\n}\n\nfunction add_render_callback(fn) {\n\trender_callbacks.push(fn);\n}\n\nfunction add_flush_callback(fn) {\n\tflush_callbacks.push(fn);\n}\n\nfunction flush() {\n\tconst seen_callbacks = new Set();\n\n\tdo {\n\t\t// first, call beforeUpdate functions\n\t\t// and update components\n\t\twhile (dirty_components.length) {\n\t\t\tconst component = dirty_components.shift();\n\t\t\tset_current_component(component);\n\t\t\tupdate(component.$$);\n\t\t}\n\n\t\twhile (binding_callbacks.length) binding_callbacks.shift()();\n\n\t\t// then, once components are updated, call\n\t\t// afterUpdate functions. This may cause\n\t\t// subsequent updates...\n\t\twhile (render_callbacks.length) {\n\t\t\tconst callback = render_callbacks.pop();\n\t\t\tif (!seen_callbacks.has(callback)) {\n\t\t\t\tcallback();\n\n\t\t\t\t// ...so guard against infinite loops\n\t\t\t\tseen_callbacks.add(callback);\n\t\t\t}\n\t\t}\n\t} while (dirty_components.length);\n\n\twhile (flush_callbacks.length) {\n\t\tflush_callbacks.pop()();\n\t}\n\n\tupdate_promise = null;\n}\n\nfunction update($$) {\n\tif ($$.fragment) {\n\t\t$$.update($$.dirty);\n\t\trun_all($$.before_render);\n\t\t$$.fragment.p($$.dirty, $$.ctx);\n\t\t$$.dirty = null;\n\n\t\t$$.after_render.forEach(add_render_callback);\n\t}\n}\n\nlet promise;\n\nfunction wait() {\n\tif (!promise) {\n\t\tpromise = Promise.resolve();\n\t\tpromise.then(() => {\n\t\t\tpromise = null;\n\t\t});\n\t}\n\n\treturn promise;\n}\n\nfunction dispatch(node, direction, kind) {\n\tnode.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\n\nlet outros;\n\nfunction group_outros() {\n\toutros = {\n\t\tremaining: 0,\n\t\tcallbacks: []\n\t};\n}\n\nfunction check_outros() {\n\tif (!outros.remaining) {\n\t\trun_all(outros.callbacks);\n\t}\n}\n\nfunction on_outro(callback) {\n\toutros.callbacks.push(callback);\n}\n\nfunction create_in_transition(node, fn, params) {\n\tlet config = fn(node, params);\n\tlet running = false;\n\tlet animation_name;\n\tlet task;\n\tlet uid = 0;\n\n\tfunction cleanup() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = identity,\n\t\t\ttick: tick$$1 = noop,\n\t\t\tcss\n\t\t} = config;\n\n\t\tif (css) animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n\t\ttick$$1(0, 1);\n\n\t\tconst start_time = window.performance.now() + delay;\n\t\tconst end_time = start_time + duration;\n\n\t\tif (task) task.abort();\n\t\trunning = true;\n\n\t\ttask = loop(now => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick$$1(1, 0);\n\t\t\t\t\tcleanup();\n\t\t\t\t\treturn running = false;\n\t\t\t\t}\n\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick$$1(t, 1 - t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tlet started = false;\n\n\treturn {\n\t\tstart() {\n\t\t\tif (started) return;\n\n\t\t\tdelete_rule(node);\n\n\t\t\tif (typeof config === 'function') {\n\t\t\t\tconfig = config();\n\t\t\t\twait().then(go);\n\t\t\t} else {\n\t\t\t\tgo();\n\t\t\t}\n\t\t},\n\n\t\tinvalidate() {\n\t\t\tstarted = false;\n\t\t},\n\n\t\tend() {\n\t\t\tif (running) {\n\t\t\t\tcleanup();\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction create_out_transition(node, fn, params) {\n\tlet config = fn(node, params);\n\tlet running = true;\n\tlet animation_name;\n\n\tconst group = outros;\n\n\tgroup.remaining += 1;\n\n\tfunction go() {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = identity,\n\t\t\ttick: tick$$1 = noop,\n\t\t\tcss\n\t\t} = config;\n\n\t\tif (css) animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n\n\t\tconst start_time = window.performance.now() + delay;\n\t\tconst end_time = start_time + duration;\n\n\t\tloop(now => {\n\t\t\tif (running) {\n\t\t\t\tif (now >= end_time) {\n\t\t\t\t\ttick$$1(0, 1);\n\n\t\t\t\t\tif (!--group.remaining) {\n\t\t\t\t\t\t// this will result in `end()` being called,\n\t\t\t\t\t\t// so we don't need to clean up here\n\t\t\t\t\t\trun_all(group.callbacks);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (now >= start_time) {\n\t\t\t\t\tconst t = easing((now - start_time) / duration);\n\t\t\t\t\ttick$$1(1 - t, t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn running;\n\t\t});\n\t}\n\n\tif (typeof config === 'function') {\n\t\twait().then(() => {\n\t\t\tconfig = config();\n\t\t\tgo();\n\t\t});\n\t} else {\n\t\tgo();\n\t}\n\n\treturn {\n\t\tend(reset) {\n\t\t\tif (reset && config.tick) {\n\t\t\t\tconfig.tick(1, 0);\n\t\t\t}\n\n\t\t\tif (running) {\n\t\t\t\tif (animation_name) delete_rule(node, animation_name);\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction create_bidirectional_transition(node, fn, params, intro) {\n\tlet config = fn(node, params);\n\n\tlet t = intro ? 0 : 1;\n\n\tlet running_program = null;\n\tlet pending_program = null;\n\tlet animation_name = null;\n\n\tfunction clear_animation() {\n\t\tif (animation_name) delete_rule(node, animation_name);\n\t}\n\n\tfunction init(program, duration) {\n\t\tconst d = program.b - t;\n\t\tduration *= Math.abs(d);\n\n\t\treturn {\n\t\t\ta: t,\n\t\t\tb: program.b,\n\t\t\td,\n\t\t\tduration,\n\t\t\tstart: program.start,\n\t\t\tend: program.start + duration,\n\t\t\tgroup: program.group\n\t\t};\n\t}\n\n\tfunction go(b) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = 300,\n\t\t\teasing = identity,\n\t\t\ttick: tick$$1 = noop,\n\t\t\tcss\n\t\t} = config;\n\n\t\tconst program = {\n\t\t\tstart: window.performance.now() + delay,\n\t\t\tb\n\t\t};\n\n\t\tif (!b) {\n\t\t\tprogram.group = outros;\n\t\t\toutros.remaining += 1;\n\t\t}\n\n\t\tif (running_program) {\n\t\t\tpending_program = program;\n\t\t} else {\n\t\t\t// if this is an intro, and there's a delay, we need to do\n\t\t\t// an initial tick and/or apply CSS animation immediately\n\t\t\tif (css) {\n\t\t\t\tclear_animation();\n\t\t\t\tanimation_name = create_rule(node, t, b, duration, delay, easing, css);\n\t\t\t}\n\n\t\t\tif (b) tick$$1(0, 1);\n\n\t\t\trunning_program = init(program, duration);\n\t\t\tadd_render_callback(() => dispatch(node, b, 'start'));\n\n\t\t\tloop(now => {\n\t\t\t\tif (pending_program && now > pending_program.start) {\n\t\t\t\t\trunning_program = init(pending_program, duration);\n\t\t\t\t\tpending_program = null;\n\n\t\t\t\t\tdispatch(node, running_program.b, 'start');\n\n\t\t\t\t\tif (css) {\n\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\tanimation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (running_program) {\n\t\t\t\t\tif (now >= running_program.end) {\n\t\t\t\t\t\ttick$$1(t = running_program.b, 1 - t);\n\t\t\t\t\t\tdispatch(node, running_program.b, 'end');\n\n\t\t\t\t\t\tif (!pending_program) {\n\t\t\t\t\t\t\t// we're done\n\t\t\t\t\t\t\tif (running_program.b) {\n\t\t\t\t\t\t\t\t// intro  we can tidy up immediately\n\t\t\t\t\t\t\t\tclear_animation();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// outro  needs to be coordinated\n\t\t\t\t\t\t\t\tif (!--running_program.group.remaining) run_all(running_program.group.callbacks);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trunning_program = null;\n\t\t\t\t\t}\n\n\t\t\t\t\telse if (now >= running_program.start) {\n\t\t\t\t\t\tconst p = now - running_program.start;\n\t\t\t\t\t\tt = running_program.a + running_program.d * easing(p / running_program.duration);\n\t\t\t\t\t\ttick$$1(t, 1 - t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn !!(running_program || pending_program);\n\t\t\t});\n\t\t}\n\t}\n\n\treturn {\n\t\trun(b) {\n\t\t\tif (typeof config === 'function') {\n\t\t\t\twait().then(() => {\n\t\t\t\t\tconfig = config();\n\t\t\t\t\tgo(b);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tgo(b);\n\t\t\t}\n\t\t},\n\n\t\tend() {\n\t\t\tclear_animation();\n\t\t\trunning_program = pending_program = null;\n\t\t}\n\t};\n}\n\nfunction handle_promise(promise, info) {\n\tconst token = info.token = {};\n\n\tfunction update(type, index, key, value) {\n\t\tif (info.token !== token) return;\n\n\t\tinfo.resolved = key && { [key]: value };\n\n\t\tconst child_ctx = assign(assign({}, info.ctx), info.resolved);\n\t\tconst block = type && (info.current = type)(child_ctx);\n\n\t\tif (info.block) {\n\t\t\tif (info.blocks) {\n\t\t\t\tinfo.blocks.forEach((block, i) => {\n\t\t\t\t\tif (i !== index && block) {\n\t\t\t\t\t\tgroup_outros();\n\t\t\t\t\t\ton_outro(() => {\n\t\t\t\t\t\t\tblock.d(1);\n\t\t\t\t\t\t\tinfo.blocks[i] = null;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tblock.o(1);\n\t\t\t\t\t\tcheck_outros();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tinfo.block.d(1);\n\t\t\t}\n\n\t\t\tblock.c();\n\t\t\tif (block.i) block.i(1);\n\t\t\tblock.m(info.mount(), info.anchor);\n\n\t\t\tflush();\n\t\t}\n\n\t\tinfo.block = block;\n\t\tif (info.blocks) info.blocks[index] = block;\n\t}\n\n\tif (is_promise(promise)) {\n\t\tpromise.then(value => {\n\t\t\tupdate(info.then, 1, info.value, value);\n\t\t}, error => {\n\t\t\tupdate(info.catch, 2, info.error, error);\n\t\t});\n\n\t\t// if we previously had a then/catch block, destroy it\n\t\tif (info.current !== info.pending) {\n\t\t\tupdate(info.pending, 0);\n\t\t\treturn true;\n\t\t}\n\t} else {\n\t\tif (info.current !== info.then) {\n\t\t\tupdate(info.then, 1, info.value, promise);\n\t\t\treturn true;\n\t\t}\n\n\t\tinfo.resolved = { [info.value]: promise };\n\t}\n}\n\nfunction destroy_block(block, lookup) {\n\tblock.d(1);\n\tlookup.delete(block.key);\n}\n\nfunction outro_and_destroy_block(block, lookup) {\n\ton_outro(() => {\n\t\tdestroy_block(block, lookup);\n\t});\n\n\tblock.o(1);\n}\n\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n\tblock.f();\n\toutro_and_destroy_block(block, lookup);\n}\n\nfunction update_keyed_each(old_blocks, changed, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n\tlet o = old_blocks.length;\n\tlet n = list.length;\n\n\tlet i = o;\n\tconst old_indexes = {};\n\twhile (i--) old_indexes[old_blocks[i].key] = i;\n\n\tconst new_blocks = [];\n\tconst new_lookup = new Map();\n\tconst deltas = new Map();\n\n\ti = n;\n\twhile (i--) {\n\t\tconst child_ctx = get_context(ctx, list, i);\n\t\tconst key = get_key(child_ctx);\n\t\tlet block = lookup.get(key);\n\n\t\tif (!block) {\n\t\t\tblock = create_each_block(key, child_ctx);\n\t\t\tblock.c();\n\t\t} else if (dynamic) {\n\t\t\tblock.p(changed, child_ctx);\n\t\t}\n\n\t\tnew_lookup.set(key, new_blocks[i] = block);\n\n\t\tif (key in old_indexes) deltas.set(key, Math.abs(i - old_indexes[key]));\n\t}\n\n\tconst will_move = new Set();\n\tconst did_move = new Set();\n\n\tfunction insert(block) {\n\t\tif (block.i) block.i(1);\n\t\tblock.m(node, next);\n\t\tlookup.set(block.key, block);\n\t\tnext = block.first;\n\t\tn--;\n\t}\n\n\twhile (o && n) {\n\t\tconst new_block = new_blocks[n - 1];\n\t\tconst old_block = old_blocks[o - 1];\n\t\tconst new_key = new_block.key;\n\t\tconst old_key = old_block.key;\n\n\t\tif (new_block === old_block) {\n\t\t\t// do nothing\n\t\t\tnext = new_block.first;\n\t\t\to--;\n\t\t\tn--;\n\t\t}\n\n\t\telse if (!new_lookup.has(old_key)) {\n\t\t\t// remove old block\n\t\t\tdestroy(old_block, lookup);\n\t\t\to--;\n\t\t}\n\n\t\telse if (!lookup.has(new_key) || will_move.has(new_key)) {\n\t\t\tinsert(new_block);\n\t\t}\n\n\t\telse if (did_move.has(old_key)) {\n\t\t\to--;\n\n\t\t} else if (deltas.get(new_key) > deltas.get(old_key)) {\n\t\t\tdid_move.add(new_key);\n\t\t\tinsert(new_block);\n\n\t\t} else {\n\t\t\twill_move.add(old_key);\n\t\t\to--;\n\t\t}\n\t}\n\n\twhile (o--) {\n\t\tconst old_block = old_blocks[o];\n\t\tif (!new_lookup.has(old_block.key)) destroy(old_block, lookup);\n\t}\n\n\twhile (n) insert(new_blocks[n - 1]);\n\n\treturn new_blocks;\n}\n\nfunction measure(blocks) {\n\tconst rects = {};\n\tlet i = blocks.length;\n\twhile (i--) rects[blocks[i].key] = blocks[i].node.getBoundingClientRect();\n\treturn rects;\n}\n\nfunction get_spread_update(levels, updates) {\n\tconst update = {};\n\n\tconst to_null_out = {};\n\tconst accounted_for = {};\n\n\tlet i = levels.length;\n\twhile (i--) {\n\t\tconst o = levels[i];\n\t\tconst n = updates[i];\n\n\t\tif (n) {\n\t\t\tfor (const key in o) {\n\t\t\t\tif (!(key in n)) to_null_out[key] = 1;\n\t\t\t}\n\n\t\t\tfor (const key in n) {\n\t\t\t\tif (!accounted_for[key]) {\n\t\t\t\t\tupdate[key] = n[key];\n\t\t\t\t\taccounted_for[key] = 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlevels[i] = n;\n\t\t} else {\n\t\t\tfor (const key in o) {\n\t\t\t\taccounted_for[key] = 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (const key in to_null_out) {\n\t\tif (!(key in update)) update[key] = undefined;\n\t}\n\n\treturn update;\n}\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\n\nfunction spread(args) {\n\tconst attributes = Object.assign({}, ...args);\n\tlet str = '';\n\n\tObject.keys(attributes).forEach(name => {\n\t\tif (invalid_attribute_name_character.test(name)) return;\n\n\t\tconst value = attributes[name];\n\t\tif (value === undefined) return;\n\t\tif (value === true) str += \" \" + name;\n\n\t\tconst escaped = String(value)\n\t\t\t.replace(/\"/g, '&#34;')\n\t\t\t.replace(/'/g, '&#39;');\n\n\t\tstr += \" \" + name + \"=\" + JSON.stringify(escaped);\n\t});\n\n\treturn str;\n}\n\nconst escaped = {\n\t'\"': '&quot;',\n\t\"'\": '&#39;',\n\t'&': '&amp;',\n\t'<': '&lt;',\n\t'>': '&gt;'\n};\n\nfunction escape(html) {\n\treturn String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\n\nfunction each(items, fn) {\n\tlet str = '';\n\tfor (let i = 0; i < items.length; i += 1) {\n\t\tstr += fn(items[i], i);\n\t}\n\treturn str;\n}\n\nconst missing_component = {\n\t$$render: () => ''\n};\n\nfunction validate_component(component, name) {\n\tif (!component || !component.$$render) {\n\t\tif (name === 'svelte:component') name += ' this={...}';\n\t\tthrow new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n\t}\n\n\treturn component;\n}\n\nfunction debug(file, line, column, values) {\n\tconsole.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n\tconsole.log(values); // eslint-disable-line no-console\n\treturn '';\n}\n\nlet on_destroy;\n\nfunction create_ssr_component(fn) {\n\tfunction $$render(result, props, bindings, slots) {\n\t\tconst parent_component = current_component;\n\n\t\tconst $$ = {\n\t\t\ton_destroy,\n\t\t\tcontext: new Map(parent_component ? parent_component.$$.context : []),\n\n\t\t\t// these will be immediately discarded\n\t\t\ton_mount: [],\n\t\t\tbefore_render: [],\n\t\t\tafter_render: [],\n\t\t\tcallbacks: blank_object()\n\t\t};\n\n\t\tset_current_component({ $$ });\n\n\t\tconst html = fn(result, props, bindings, slots);\n\n\t\tset_current_component(parent_component);\n\t\treturn html;\n\t}\n\n\treturn {\n\t\trender: (props = {}, options = {}) => {\n\t\t\ton_destroy = [];\n\n\t\t\tconst result = { head: '', css: new Set() };\n\t\t\tconst html = $$render(result, props, {}, options);\n\n\t\t\trun_all(on_destroy);\n\n\t\t\treturn {\n\t\t\t\thtml,\n\t\t\t\tcss: {\n\t\t\t\t\tcode: Array.from(result.css).map(css => css.code).join('\\n'),\n\t\t\t\t\tmap: null // TODO\n\t\t\t\t},\n\t\t\t\thead: result.head\n\t\t\t};\n\t\t},\n\n\t\t$$render\n\t};\n}\n\nfunction get_store_value(store) {\n\tlet value;\n\tstore.subscribe(_ => value = _)();\n\treturn value;\n}\n\nfunction bind(component, name, callback) {\n\tif (component.$$.props.indexOf(name) === -1) return;\n\tcomponent.$$.bound[name] = callback;\n\tcallback(component.$$.ctx[name]);\n}\n\nfunction mount_component(component, target, anchor) {\n\tconst { fragment, on_mount, on_destroy, after_render } = component.$$;\n\n\tfragment.m(target, anchor);\n\n\t// onMount happens after the initial afterUpdate. Because\n\t// afterUpdate callbacks happen in reverse order (inner first)\n\t// we schedule onMount callbacks before afterUpdate callbacks\n\tadd_render_callback(() => {\n\t\tconst new_on_destroy = on_mount.map(run).filter(is_function);\n\t\tif (on_destroy) {\n\t\t\ton_destroy.push(...new_on_destroy);\n\t\t} else {\n\t\t\t// Edge case - component was destroyed immediately,\n\t\t\t// most likely as a result of a binding initialising\n\t\t\trun_all(new_on_destroy);\n\t\t}\n\t\tcomponent.$$.on_mount = [];\n\t});\n\n\tafter_render.forEach(add_render_callback);\n}\n\nfunction destroy(component, detaching) {\n\tif (component.$$) {\n\t\trun_all(component.$$.on_destroy);\n\t\tcomponent.$$.fragment.d(detaching);\n\n\t\t// TODO null out other refs, including component.$$ (but need to\n\t\t// preserve final state?)\n\t\tcomponent.$$.on_destroy = component.$$.fragment = null;\n\t\tcomponent.$$.ctx = {};\n\t}\n}\n\nfunction make_dirty(component, key) {\n\tif (!component.$$.dirty) {\n\t\tdirty_components.push(component);\n\t\tschedule_update();\n\t\tcomponent.$$.dirty = {};\n\t}\n\tcomponent.$$.dirty[key] = true;\n}\n\nfunction init(component, options, instance, create_fragment, not_equal$$1, prop_names) {\n\tconst parent_component = current_component;\n\tset_current_component(component);\n\n\tconst props = options.props || {};\n\n\tconst $$ = component.$$ = {\n\t\tfragment: null,\n\t\tctx: null,\n\n\t\t// state\n\t\tprops: prop_names,\n\t\tupdate: noop,\n\t\tnot_equal: not_equal$$1,\n\t\tbound: blank_object(),\n\n\t\t// lifecycle\n\t\ton_mount: [],\n\t\ton_destroy: [],\n\t\tbefore_render: [],\n\t\tafter_render: [],\n\t\tcontext: new Map(parent_component ? parent_component.$$.context : []),\n\n\t\t// everything else\n\t\tcallbacks: blank_object(),\n\t\tdirty: null\n\t};\n\n\tlet ready = false;\n\n\t$$.ctx = instance\n\t\t? instance(component, props, (key, value) => {\n\t\t\tif ($$.ctx && not_equal$$1($$.ctx[key], $$.ctx[key] = value)) {\n\t\t\t\tif ($$.bound[key]) $$.bound[key](value);\n\t\t\t\tif (ready) make_dirty(component, key);\n\t\t\t}\n\t\t})\n\t\t: props;\n\n\t$$.update();\n\tready = true;\n\trun_all($$.before_render);\n\t$$.fragment = create_fragment($$.ctx);\n\n\tif (options.target) {\n\t\tif (options.hydrate) {\n\t\t\t$$.fragment.l(children(options.target));\n\t\t} else {\n\t\t\t$$.fragment.c();\n\t\t}\n\n\t\tif (options.intro && component.$$.fragment.i) component.$$.fragment.i();\n\t\tmount_component(component, options.target, options.anchor);\n\t\tflush();\n\t}\n\n\tset_current_component(parent_component);\n}\n\nlet SvelteElement;\nif (typeof HTMLElement !== 'undefined') {\n\tSvelteElement = class extends HTMLElement {\n\t\tconstructor() {\n\t\t\tsuper();\n\t\t\tthis.attachShadow({ mode: 'open' });\n\t\t}\n\n\t\tconnectedCallback() {\n\t\t\tfor (const key in this.$$.slotted) {\n\t\t\t\tthis.appendChild(this.$$.slotted[key]);\n\t\t\t}\n\t\t}\n\n\t\tattributeChangedCallback(attr$$1, oldValue, newValue) {\n\t\t\tthis[attr$$1] = newValue;\n\t\t}\n\n\t\t$destroy() {\n\t\t\tdestroy(this, true);\n\t\t\tthis.$destroy = noop;\n\t\t}\n\n\t\t$on(type, callback) {\n\t\t\t// TODO should this delegate to addEventListener?\n\t\t\tconst callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n\t\t\tcallbacks.push(callback);\n\n\t\t\treturn () => {\n\t\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t\t};\n\t\t}\n\n\t\t$set() {\n\t\t\t// overridden by instance, if it has props\n\t\t}\n\t};\n}\n\nclass SvelteComponent {\n\t$destroy() {\n\t\tdestroy(this, true);\n\t\tthis.$destroy = noop;\n\t}\n\n\t$on(type, callback) {\n\t\tconst callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n\t\tcallbacks.push(callback);\n\n\t\treturn () => {\n\t\t\tconst index = callbacks.indexOf(callback);\n\t\t\tif (index !== -1) callbacks.splice(index, 1);\n\t\t};\n\t}\n\n\t$set() {\n\t\t// overridden by instance, if it has props\n\t}\n}\n\nclass SvelteComponentDev extends SvelteComponent {\n\tconstructor(options) {\n\t\tif (!options || (!options.target && !options.$$inline)) {\n\t\t\tthrow new Error(`'target' is a required option`);\n\t\t}\n\n\t\tsuper();\n\t}\n\n\t$destroy() {\n\t\tsuper.$destroy();\n\t\tthis.$destroy = () => {\n\t\t\tconsole.warn(`Component was already destroyed`); // eslint-disable-line no-console\n\t\t};\n\t}\n}\n\nexport { create_animation, fix_position, handle_promise, append, insert, detach, detach_between, detach_before, detach_after, destroy_each, element, svg_element, text, space, empty, listen, prevent_default, stop_propagation, attr, set_attributes, set_custom_element_data, xlink_attr, get_binding_group_value, to_number, time_ranges_to_array, children, claim_element, claim_text, set_data, set_input_type, set_style, select_option, select_options, select_value, select_multiple_value, add_resize_listener, toggle_class, custom_event, destroy_block, outro_and_destroy_block, fix_and_outro_and_destroy_block, update_keyed_each, measure, current_component, set_current_component, beforeUpdate, onMount, afterUpdate, onDestroy, createEventDispatcher, setContext, getContext, bubble, clear_loops, loop, dirty_components, intros, schedule_update, tick, add_binding_callback, add_render_callback, add_flush_callback, flush, get_spread_update, invalid_attribute_name_character, spread, escaped, escape, each, missing_component, validate_component, debug, create_ssr_component, get_store_value, group_outros, check_outros, on_outro, create_in_transition, create_out_transition, create_bidirectional_transition, noop, identity, assign, is_promise, add_location, run, blank_object, run_all, is_function, safe_not_equal, not_equal, validate_store, subscribe, create_slot, get_slot_context, get_slot_changes, exclude_internal_props, bind, mount_component, init, SvelteElement, SvelteComponent, SvelteComponentDev };\n","<script>\r\n\tlet count = 0;\r\n\r\n\tfunction handleClick() {\r\n\t  count += 1;\r\n\t}\r\n</script>\r\n\r\n<button class=\"b\" on:click={handleClick}>\r\n\tClicked {count} {count === 1 ? 'time' : 'times'}\r\n</button>\r\n\r\n<style>\r\n</style>","window.THREE = require('three');\r\nwindow.DEBUG = true;\r\n\r\nconst ClientGame = require(\"./client/clientgame\");\r\nconst GameplayScene = require(\"./client/gameplayscene\");\r\nconst io = require(\"socket.io-client\");\r\n\r\nconst Test = require(\"./client/views/test.svelte\");\r\n\r\nwindow.onload = () => {\r\n  const socket = io();\r\n  const client = new ClientGame();\r\n  client.start();\r\n\r\n  client.setScene(new GameplayScene(socket));\r\n\r\n  new Test({\r\n    target: document.body\r\n  });\r\n};"],"names":["REVISION","module","THREE","Number","EPSILON","undefined","Math","pow","sign","x","Function","prototype","name","Object","defineProperty","get","toString","match","assign","target","index","arguments","length","source","hasOwnProperty","call","nextKey","output","MOUSE","LEFT","MIDDLE","RIGHT","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoColors","FaceColors","VertexColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","Color","r","g","b","set","setRGB","constructor","value","copy","setHex","setStyle","setScalar","scalar","hex","floor","setHSL","p","q","t","h","s","l","euclideanModulo","clamp","hue2rgb","style","string","parseFloat","console","warn","m","exec","color","components","min","parseInt","handleAlpha","size","charAt","ColorKeywords","clone","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","sqrt","getHex","getHexString","slice","getHSL","optionalTarget","max","saturation","hue","lightness","delta","hsl","getStyle","offsetHSL","add","addColors","color1","color2","addScalar","multiply","multiplyScalar","lerp","alpha","equals","c","fromArray","array","offset","toArray","Quaternion","y","z","w","_x","_y","_z","_w","onChangeCallback","quaternion","setFromEuler","euler","update","Euler","cos","sin","order","s1","c2","c3","c1","s2","s3","setFromAxisAngle","axis","angle","halfAngle","setFromRotationMatrix","elements","m11","te","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","vFrom","vTo","v1","Vector3","dot","EPS","abs","crossVectors","normalize","inverse","conjugate","v","lengthSq","multiplyQuaternions","premultiply","a","qay","qaz","qaw","qby","qbz","qbw","qax","qbx","slerp","qb","cosHalfTheta","sinHalfTheta","atan2","halfTheta","ratioB","ratioA","onChange","callback","qa","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","y0","z0","w0","x1","y1","z1","w1","x0","dir","sqrSin","len","tDir","f","Vector2","setX","setY","setComponent","getComponent","addVectors","addScaledVector","sub","subVectors","subScalar","isFinite","divide","divideScalar","clampScalar","minVal","maxVal","clampLength","ceil","round","roundToZero","negate","lengthManhattan","PI","distanceTo","distanceToSquared","dy","dx","setLength","lerpVectors","v2","fromAttribute","attribute","itemSize","rotateAround","center","setZ","multiplyVectors","applyEuler","error","applyQuaternion","applyAxisAngle","applyMatrix3","e","applyMatrix4","applyProjection","d","qy","qz","qw","qx","ix","iw","iy","iz","project","camera","matrix","Matrix4","multiplyMatrices","projectionMatrix","getInverse","matrixWorld","unproject","transformDirection","cross","ay","az","by","bz","bx","ax","projectOnVector","vector","projectOnPlane","planeNormal","reflect","normal","angleTo","acos","theta","dz","setFromSpherical","phi","radius","sinPhiRadius","setFromMatrixPosition","setFromMatrixColumn","setFromMatrixScale","sx","sy","sz","temp","Vector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","epsilon","epsilon2","xx","yy","zz","xy","xz","yz","_order","DefaultOrder","RotationOrders","asin","setFromQuaternion","makeRotationFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","Line3","start","end","line","distanceSq","distance","at","result","closestPointToPointParameter","point","clampToLine","startP","startEnd","startEnd_startP","startEnd2","closestPointToPoint","Box2","Infinity","setFromPoints","points","makeEmpty","il","i","expandByPoint","setFromCenterAndSize","halfSize","box","isEmpty","expandByVector","expandByScalar","containsPoint","containsBox","getParameter","intersectsBox","clampPoint","distanceToPoint","intersect","union","translate","Box3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromObject","object","updateMatrixWorld","traverse","node","geometry","Geometry","vertices","scope","BufferGeometry","attributes","positions","intersectsSphere","sphere","closestPoint","intersectsPlane","plane","constant","getBoundingSphere","Sphere","Matrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","identity","me","setFromMatrix4","applyToVector3Array","j","applyToBuffer","buffer","getX","getY","getZ","setXYZ","determinant","throwOnDegenerate","t11","t12","t13","det","msg","detInv","transpose","tmp","flattenToArrayOffset","getNormalMatrix","matrix4","transposeIntoArray","n14","n24","n34","n41","n42","n43","n44","copyPosition","extractBasis","xAxis","yAxis","zAxis","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","af","be","bf","ae","cf","de","df","ce","ad","bc","bd","ac","y2","z2","x2","wy","wz","wx","lookAt","eye","up","n","a12","a13","a14","a22","a23","a24","a32","a33","a34","a42","a43","a44","b12","b13","b14","b22","b23","b24","b32","b33","b34","b42","b43","b44","a11","b11","b21","b31","b41","a21","a31","a41","multiplyToArray","getPosition","setPosition","t14","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","ty","tx","makeScale","compose","position","decompose","invSX","invSY","invSZ","makeFrustum","left","right","bottom","top","near","far","makePerspective","fov","aspect","tan","DEG2RAD","ymax","ymin","xmin","xmax","makeOrthographic","Ray","origin","direction","ray","recast","directionDistance","distanceSqToPoint","distanceSqToSegment","v0","optionalPointOnRay","optionalPointOnSegment","segCenter","segDir","diff","a01","sqrDist","extDet","s0","b1","b0","segExtent","invDet","intersectSphere","tca","d2","radius2","thc","t0","t1","distanceToPlane","denominator","intersectPlane","distToPoint","intersectBox","tmax","tymin","tymax","tzmin","tzmax","invdiry","invdirz","invdirx","tmin","intersectTriangle","backfaceCulling","edge1","edge2","DdN","DdQxE2","DdE1xQ","QdN","optionalCenter","maxRadiusSq","empty","radiusSum","deltaLengthSq","getBoundingBox","Frustum","p0","p1","p2","p3","p4","p5","planes","Plane","frustum","setFromMatrix","me1","me2","me3","me5","me6","me7","me9","me10","me11","me13","me14","me15","setComponents","me0","me4","me8","me12","intersectsObject","boundingSphere","computeBoundingSphere","intersectsSprite","sprite","negRadius","d1","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","orthoPoint","perpendicularMagnitude","intersectLine","intersectsLine","endSign","startSign","coplanarPoint","optionalNormalMatrix","m1","normalMatrix","referencePoint","Spherical","other","makeSafe","vec3","RAD2DEG","generateUUID","split","uuid","rnd","random","chars","join","mapLinear","a1","a2","b2","smoothstep","smootherstep","random16","randInt","low","high","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isPowerOfTwo","nearestPowerOfTwo","log","LN2","nextPowerOfTwo","Spline","v3","intPoint","weight","w2","w3","pa","pb","pc","pd","initFromArray","getPoint","k","interpolate","getControlPointsArray","coords","getLength","nSubDivisions","nSamples","oldIntPoint","oldPosition","tmpVec","chunkLengths","totalLength","chunks","total","reparametrizeByArcLength","samplingCoef","indexCurrent","indexNext","realDistance","sampling","newpoints","sl","push","t2","t3","Triangle","resultLengthSq","barycoordFromPoint","dot00","dot11","dot01","denom","dot02","dot12","invDenom","u","setFromPointsAndIndices","i0","i1","i2","triangle","area","midpoint","edgeList","projectedPoint","minDistance","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","_cachedIndex","valueSize","evaluate","pp","validate_interval","seek","linear_scan","forward_scan","afterEnd_","giveUpAt","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","values","stride","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","create","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o1","o0","oP","oN","wP","wN","ppp","sP","sN","DiscreteInterpolant","LinearInterpolant","offset1","offset0","weight1","weight0","QuaternionLinearInterpolant","Clock","autoStart","startTime","oldTime","elapsedTime","running","performance","Date","now","stop","getElapsedTime","getDelta","newTime","EventDispatcher","addEventListener","type","listener","_listeners","listeners","indexOf","hasEventListener","removeEventListener","listenerArray","splice","dispatchEvent","event","Layers","mask","channel","enable","toggle","disable","test","layers","Raycaster","params","Mesh","Line","LOD","Points","threshold","Sprite","defineProperties","PointCloud","raycaster","intersects","recursive","visible","raycast","children","intersectObject","linePrecision","setFromCamera","PerspectiveCamera","OrthographicCamera","sort","ascSort","intersectObjects","objects","Array","isArray","Object3D","Object3DIdCount","parent","DefaultUp","rotation","onRotationChange","onQuaternionChange","enumerable","modelViewMatrix","matrixAutoUpdate","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","castShadow","receiveShadow","frustumCulled","renderOrder","userData","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","q1","rotateX","rotateY","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","remove","getObjectById","id","getObjectByProperty","getObjectByName","child","getWorldPosition","getWorldQuaternion","getWorldRotation","getWorldScale","getWorldDirection","traverseVisible","traverseAncestors","updateMatrix","force","toJSON","meta","isRootObject","geometries","materials","textures","images","metadata","version","generator","JSON","stringify","material","extractFromCache","cache","key","data","parse","Face3","materialIndex","vertexNormals","vertexColors","BufferAttribute","normalized","dynamic","updateRange","count","setDynamic","copyAt","index1","index2","copyArray","copyColorsArray","colors","copyIndicesArray","indices","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","getW","setXY","setXYZW","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","DynamicBufferAttribute","InstancedBufferAttribute","meshPerAttribute","InterleavedBuffer","InstancedInterleavedBuffer","InterleavedBufferAttribute","interleavedBuffer","GeometryIdCount","faces","faceVertexUvs","morphTargets","morphNormals","skinWeights","skinIndices","lineDistances","boundingBox","verticesNeedUpdate","elementsNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","vertex","face","jl","computeBoundingBox","obj","fromBufferGeometry","uv","uv2","uvs2","normals","tempNormals","uvs","tempUVs","tempUVs2","groups","group","addFace","computeFaceNormals","ab","fl","cb","vC","vB","vA","computeVertexNormals","areaWeighted","vl","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","faceNormal","dstNormalsFace","dstNormalsVertex","computeTangents","computeLineDistances","merge","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mesh","mergeVertices","changes","precisionPoints","precision","verticesMap","unique","dupIndex","faceIndicesToRemove","idx","sortFacesByMaterialIndex","_id","materialIndexSort","newUvs2","newUvs1","parameters","faceType","setBit","hasMaterial","hasFaceUv","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","getUvIndex","getNormalIndex","getColorIndex","enabled","normalsHash","hash","colorsHash","uvsHash","uvsCopy","kl","dispose","DirectGeometry","computeGroups","fromGeometry","morphTargetsLength","morphTargetsPosition","morphNormalsLength","morphTargetsNormal","vertexUvs","hasFaceVertexUv2","morphTarget","morphNormal","hasSkinIndices","hasSkinWeights","morphAttributes","drawRange","getIndex","setIndex","addAttribute","getAttribute","removeAttribute","addGroup","clearGroups","setDrawRange","needsUpdate","updateFromObject","__directGeometry","direct","lineDistance","fromDirectGeometry","Uint32Array","Uint16Array","isNaN","pA","pB","pC","normalizeNormals","attribute1","attribute2","attributeSize","attributeArray2","attributeArray1","toNonIndexed","array2","geometry2","MaxIndex","InstancedBufferGeometry","maxInstancedCount","instances","Uniform","onUpdate","onUpdateCallback","AnimationAction","_new","mixer","clip","localRoot","_mixer","_clip","_localRoot","tracks","nTracks","interpolants","createInterpolant","interpolant","interpolantSettings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","loop","_loopCount","_startTime","time","timeScale","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","play","_activateAction","_deactivateAction","reset","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setLoop","mode","setEffectiveWeight","getEffectiveWeight","fadeIn","duration","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeOutDuration","startEndRatio","fadeInDuration","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","action","halt","startTimeScale","endTimeScale","_lendControlInterpolant","times","timeScaleInterpolant","getMixer","getClip","getRoot","_root","_update","deltaTime","timeDirection","accuIndex","timeRunning","_updateTimeScale","_updateTime","_updateWeight","clipTime","propertyMixers","accumulate","interpolantValue","loopCount","_setEndings","handle_stop","pingPong","loopDelta","pending","atStart","atEnd","weightNow","weightThen","AnimationClip","resetDuration","trim","optimize","track","json","jsonTracks","frameTime","fps","KeyframeTrack","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","AnimationUtils","getKeyframeOrder","sortedArray","NumberKeyframeTrack","findByName","objectOrClipArray","clipArray","o","animations","CreateClipsFromMorphTargetSequences","pattern","parts","animationToMorphTargets","animationMorphTargets","clips","parseAnimation","animation","bones","nodeName","trackType","trackName","animationKeys","propertyName","destTracks","flattenJSON","hierarchy","hierarchyTracks","keys","morphTargetNames","animationKey","morphTargetName","addNonemptyTrack","VectorKeyframeTrack","boneName","QuaternionKeyframeTrack","clipName","AnimationMixer","root","_initMemoryManager","_accuIndex","clipAction","optionalRoot","rootUuid","clipObject","clipUuid","actionsForClip","_actionsByClip","prototypeAction","actionByRoot","existingAction","knownActions","_Action","_bindAction","newAction","_addInactiveAction","stopAllAction","_actions","nActions","_nActiveActions","bindings","_bindings","nBindings","_nActiveBindings","actions","useCount","apply","uncacheClip","actionsByClip","actionsToRemove","lastInactiveAction","cacheIndex","pop","_removeInactiveBindingsForAction","uncacheRoot","_removeInactiveAction","_bindingsByRootAndName","bindingByName","bindingsByRoot","binding","restoreOriginalState","_removeInactiveBinding","uncacheAction","bindingsByName","referenceCount","_addInactiveBinding","parsedPath","PropertyMixer","PropertyBinding","path","ValueTypeName","getValueSize","_lendBinding","saveOriginalState","_lendAction","_takeBackBinding","_takeBackAction","_controlInterpolants","_nActiveControlInterpolants","stats","controlInterpolants","knownActionsForClip","lastKnownAction","byClipCacheIndex","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","propBinding","rootNode","lastInactiveBinding","remove_empty_map","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","AnimationObjectGroup","var_args","_objects","nCachedObjects_","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","nObjects","nCachedObjects","indicesByUUID","paths","parsedPaths","lastCachedObject","firstActiveIndex","lastCached","bindingsForPath","knownObject","firstActiveObject","lastCachedIndex","firstActive","uncache","lastIndex","lastObject","last","subscribe_","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","lastBindingsPath","arraySlice","from","to","isTypedArray","subarray","convertArray","forceClone","BYTES_PER_ELEMENT","isView","compareTime","nValues","srcOffset","jsonKeys","valuePropertyName","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","validate","Float32Array","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","factoryMethod","message","getInterpolation","shift","timeOffset","endTime","nKeys","valid","currTime","prevTime","writeIndex","timeNext","offsetP","offsetN","keep","writeOffset","readOffset","_getTrackTypeForValueTypeName","typeName","toLowerCase","ColorKeyframeTrack","BooleanKeyframeTrack","StringKeyframeTrack","parseTrackName","findNode","getValue","targetArray","bind","setValue","sourceArray","objectName","propertyIndex","targetObject","_getValue_unavailable","_setValue_unavailable","objectIndex","skeleton","nodeProperty","Versioning","None","versioning","NeedsUpdate","MatrixWorldNeedsUpdate","BindingType","Direct","bindingType","ArrayElement","resolvedProperty","HasFromToArray","EntireArray","GetterByBindingType","SetterByBindingTypeAndVersioning","unbind","_getValue_unbound","_setValue_unbound","dest","Composite","targetGroup","optionalParsedPath","_targetGroup","firstValidIndex","re","matches","results","bone","searchSkeleton","childNode","searchNodeSubtree","subTreeNode","Float64Array","mixFunction","_slerp","bufferType","_select","_lerp","_mixBufferRegion","cumulativeWeight","currentWeight","mix","originalValueOffset","Audio","context","createBufferSource","onended","onEnded","gain","createGain","connect","getInput","autoplay","playbackRate","isPlaying","hasPlaybackControl","sourceType","filters","getOutput","setNodeSource","audioNode","setBuffer","audioBuffer","pause","currentTime","disconnect","getFilters","setFilters","getFilter","setFilter","filter","setPlaybackRate","getPlaybackRate","getLoop","getVolume","setVolume","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getFrequencyData","getByteFrequencyData","getAverageFrequency","window","AudioContext","webkitAudioContext","PositionalAudio","panner","createPanner","getRefDistance","refDistance","setRefDistance","getRolloffFactor","rolloffFactor","setRolloffFactor","getDistanceModel","distanceModel","setDistanceModel","getMaxDistance","maxDistance","setMaxDistance","AudioListener","destination","removeFilter","getMasterVolume","setMasterVolume","orientation","setOrientation","Camera","matrixWorldInverse","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","format","magFilter","minFilter","renderTarget","WebGLRenderTargetCube","options","updateCubeMap","renderer","scene","texture","generateMipmaps","activeCubeFace","render","setRenderTarget","zoom","updateProjectionMatrix","cx","cy","focus","view","filmGauge","filmOffset","setFocalLength","focalLength","getFilmHeight","atan","vExtentSlope","getFocalLength","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","width","height","offsetX","offsetY","clearViewOffset","skew","StereoCamera","cameraL","cameraR","eyeSep","eyeLeft","eyeRight","eyeSepOnProjection","Light","intensity","groundColor","decay","penumbra","LightShadow","bias","mapSize","map","AmbientLight","DirectionalLight","shadow","DirectionalLightShadow","light","HemisphereLight","skyColor","PointLight","power","SpotLight","SpotLightShadow","AudioLoader","manager","DefaultLoadingManager","load","url","onLoad","onProgress","onError","XHRLoader","loader","setResponseType","decodeAudioData","Cache","files","file","clear","Loader","onLoadStart","onLoadProgress","onLoadComplete","crossOrigin","extractUrlBase","initMaterials","texturePath","createMaterial","textureLoader","materialLoader","TextureLoader","MaterialLoader","repeat","wrap","anisotropy","Handlers","fullPath","setCrossOrigin","wrapS","wrapT","blending","specular","emissive","shininess","loadTexture","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","lightMap","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","aoMap","mapAORepeat","mapAOOffset","mapAOWrap","mapAOAnisotropy","bumpMap","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","bumpScale","normalMap","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","normalScale","specularMap","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","alphaMap","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","side","opacity","transparent","setTextures","handlers","regex","cached","setTimeout","request","overrideMimeType","open","response","status","itemEnd","itemError","responseType","withCredentials","send","itemStart","setPath","setWithCredentials","FontLoader","text","substring","font","Font","ImageLoader","document","createElement","image","src","JSONLoader","_statusDomElement","setTexturePath","parseModel","parseSkin","parseMorphing","parseAnimations","fi","zLength","colorIndex","normalIndex","uvIndex","isQuad","faceA","faceB","uvLayer","nUvLayers","isBitSet","influencesPerVertex","srcVertices","dstVertices","morphColors","concat","outputAnimations","morphAnimationClips","LoadingManager","itemsLoaded","itemsTotal","onStart","isLoading","BufferGeometryLoader","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","typedArray","drawcalls","offsets","getTexture","roughness","metalness","uniforms","vertexShader","fragmentShader","shading","alphaTest","depthTest","depthWrite","colorWrite","wireframe","wireframeLinewidth","sizeAttenuation","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","emissiveIntensity","envMap","combine","reflectivity","lightMapIntensity","aoMapIntensity","ObjectLoader","lastIndexOf","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","widthSegments","heightSegments","depth","depthSegments","segments","thetaStart","thetaLength","radiusTop","radiusBottom","radialSegments","openEnded","phiStart","phiLength","detail","innerRadius","outerRadius","thetaSegments","phiSegments","tube","tubularSegments","arc","bufferGeometryLoader","geometryLoader","loadImage","Texture","mapping","parseConstant","Scene","getGeometry","getMaterial","SkinnedMesh","Group","levels","level","addLevel","CubeTextureLoader","urls","CubeTexture","loaded","DataTextureLoader","BinaryTextureLoader","_parser","DataTexture","texData","mipmaps","mipmapCount","CompressedTextureLoader","CompressedTexture","texDatas","isCubemap","Material","MaterialIdCount","fog","lights","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","clippingPlanes","clipShadows","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","premultipliedAlpha","overdraw","_needsUpdate","setValues","newValue","currentValue","isRoot","dstPlanes","srcPlanes","LineBasicMaterial","linewidth","linecap","linejoin","LineDashedMaterial","dashSize","gapSize","MeshBasicMaterial","refractionRatio","wireframeLinecap","wireframeLinejoin","skinning","MeshDepthMaterial","depthPacking","MeshLambertMaterial","MeshNormalMaterial","MeshPhongMaterial","MeshStandardMaterial","defines","envMapIntensity","MeshPhysicalMaterial","MultiMaterial","PointsMaterial","ShaderMaterial","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","UniformsUtils","RawShaderMaterial","SpriteMaterial","ShadowMaterial","UniformsLib","ShaderChunk","encoding","TextureIdCount","sourceFile","DEFAULT_IMAGE","DEFAULT_MAPPING","premultiplyAlpha","flipY","unpackAlignment","toDataURL","canvas","getContext","drawImage","getDataURL","transformUv","DepthTexture","CanvasTexture","VideoTexture","video","requestAnimationFrame","readyState","HAVE_CURRENT_DATA","inverseMatrix","localThreshold","rayPointDistanceSq","localThresholdSq","intersectPoint","distanceToRay","testPoint","LineSegments","step","vStart","vEnd","interRay","interSegment","distSq","precisionSq","faceIndex","nbVertices","drawMode","updateMorphTargets","setDrawMode","morphTargetBase","morphTargetInfluences","morphTargetDictionary","ml","getMorphTargetIndexByName","uv1","uv3","barycoord","intersectionPointWorld","checkIntersection","intersectionPoint","intersection","uvA","uvB","uvC","uvIntersection","checkBufferGeometryIntersection","fvB","fvC","isFaceMaterial","faceMaterial","fvA","tl","morphInfluences","influence","tempA","targets","tempB","tempC","uvs_f","Bone","skin","Skeleton","boneInverses","useVertexTexture","identityMatrix","boneTextureWidth","boneTextureHeight","boneMatrices","boneTexture","calculateInverses","bl","pose","offsetMatrix","bindMode","bindMatrix","bindMatrixInverse","gbone","pos","rotq","scl","normalizeSkinWeights","sw","skinWeight","vec","getObjectForDistance","matrixPosition","guessSizeSq","LensFlare","lensFlares","positionScreen","customUpdateCallback","updateLensFlares","flare","vecX","vecY","wantedRotation","overrideMaterial","autoUpdate","Fog","FogExp2","density","merged","uniforms_src","uniforms_dst","parameter_src","common","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","properties","ShaderLib","WebGLRenderer","_context","_alpha","_depth","_stencil","stencil","_antialias","antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","domElement","_canvas","autoClear","autoClearColor","autoClearDepth","autoClearStencil","sortObjects","localClippingEnabled","gammaInput","gammaOutput","physicallyCorrectLights","toneMapping","toneMappingExposure","toneMappingWhitePoint","maxMorphTargets","maxMorphNormals","autoScaleCubemaps","_currentProgram","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentGeometryProgram","_currentCamera","_currentScissor","_currentScissorTest","_currentViewport","_usedTextureUnits","_clearColor","_clearAlpha","_width","_height","_pixelRatio","_scissor","_scissorTest","_viewport","_frustum","_clipping","WebGLClipping","_clippingEnabled","_localClippingEnabled","_sphere","_projScreenMatrix","_vector3","_lights","ambient","directional","directionalShadowMap","directionalShadowMatrix","spot","spotShadowMap","spotShadowMatrix","pointShadowMap","pointShadowMatrix","hemi","shadows","_infoMemory","_infoRender","calls","info","memory","programs","_gl","getShaderPrecisionFormat","onContextLost","WebGLExtensions","WebGLCapabilities","WebGLState","paramThreeToGL","WebGLProperties","WebGLObjects","WebGLPrograms","capabilities","WebGLLights","programCache","WebGLBufferRenderer","WebGLIndexedBufferRenderer","state","clearColor","init","scissor","viewport","glClearColor","setDefaultGLState","WebGLShadowMap","shadowMap","SpritePlugin","sprites","LensFlarePlugin","getContextAttributes","forceContextLoss","loseContext","getMaxAnisotropy","extension","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getPrecision","getPixelRatio","setPixelRatio","setSize","getSize","updateStyle","setViewport","setScissor","setScissorTest","boolean","getClearColor","setClearColor","getClearAlpha","setClearAlpha","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearDepth","clearStencil","clearTarget","resetGLState","preventDefault","onTextureDispose","deallocateTexture","onRenderTargetDispose","deallocateRenderTarget","onMaterialDispose","deallocateMaterial","textureProperties","__image__webglTextureCube","deleteTexture","__webglInit","__webglTexture","delete","depthTexture","deleteFramebuffer","renderTargetProperties","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","releaseMaterialProgramReference","program","programInfo","releaseProgram","renderBufferImmediate","initAttributes","hasPositions","buffers","createBuffer","hasNormals","hasUvs","hasColors","getAttributes","bindBuffer","ARRAY_BUFFER","bufferData","positionArray","DYNAMIC_DRAW","enableAttribute","vertexAttribPointer","FLOAT","normalArray","nx","ny","nz","uvArray","colorArray","disableUnusedAttributes","drawArrays","TRIANGLES","renderBufferDirect","setMaterial","setProgram","geometryProgram","updateBuffers","activeInfluences","absNumericalSort","getUniforms","getWireframeAttribute","indexedBufferRenderer","bufferRenderer","setupVertexAttributes","ELEMENT_ARRAY_BUFFER","getAttributeBuffer","dataCount","dataStart","rangeStart","groupStart","rangeCount","groupCount","drawEnd","drawStart","setLineWidth","getTargetPixelRatio","setMode","LINES","TRIANGLE_STRIP","TRIANGLE_FAN","lineWidth","LINE_STRIP","POINTS","renderInstances","drawCount","startIndex","programAttributes","programAttribute","geometryAttributes","geometryAttribute","UNSIGNED_SHORT","SHORT","UNSIGNED_INT","INT","BYTE","UNSIGNED_BYTE","enableAttributeAndDivisor","materialDefaultAttributeValues","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","forceClear","opaqueObjectsLastIndex","transparentObjectsLastIndex","projectObject","opaqueObjects","transparentObjects","_this","painterSortStable","reversePainterSortStable","beginShadows","setupShadows","setupLights","endShadows","renderObjects","setBlending","spritePlugin","lensFlarePlugin","updateRenderTargetMipmap","setDepthTest","setDepthWrite","setColorWrite","renderItem","numPlanes","negRad","isSpriteViewable","ImmediateRenderObject","pushRenderItem","isObjectViewable","groupMaterial","renderList","getParameters","getProgramCode","materialProperties","code","shaderID","programChange","__webglShader","shader","acquireProgram","numSupportedMorphTargets","numSupportedMorphNormals","numClippingPlanes","uniform","lightsHash","ambientLightColor","directionalLights","spotLights","pointLights","hemisphereLights","uniformsList","WebGLUniforms","seqWithValue","progUniforms","seq","dynamicUniforms","splitDynamic","CULL_FACE","setFlipSided","setDepthFunc","setPolygonOffset","setState","useCache","initMaterial","p_uniforms","m_uniforms","useProgram","refreshProgram","refreshMaterial","refreshLights","logarithmicDepthBuffer","cameraPosition","uCamPos","setOptional","floatVertexTextures","markUniformsLightsNeedsUpdate","refreshUniformsFog","refreshUniformsCommon","refreshUniformsLine","refreshUniformsDash","refreshUniformsPoints","refreshUniformsLambert","refreshUniformsPhong","refreshUniformsPhysical","refreshUniformsStandard","upload","dynUniforms","evalDynamic","diffuse","uvScaleMap","WebGLRenderTarget","offsetRepeat","flipEnvMap","totalSize","clientHeight","fogColor","fogNear","fogFar","fogDensity","lightShadowsLength","ll","viewMatrix","directionalLength","pointLength","spotLength","hemiLength","lightCache","shadowBias","shadowRadius","shadowMapSize","coneCos","penumbraCos","setFaceCulling","cullFace","frontFaceDirection","setCullFace","textureUnit","maxTextures","textureType","isPowerOfTwoImage","texParameteri","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","CLAMP_TO_EDGE","filterFallback","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","slot","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","clampToMaxSize","maxTextureSize","textureNeedsPowerOfTwo","makePowerOfTwo","glFormat","glType","setTextureParameters","DEPTH_COMPONENT","_isWebGL2","internalFormat","DEPTH_COMPONENT32F","DEPTH_COMPONENT16","texImage2D","mipmap","getCompressedTextureFormats","compressedTexImage2D","generateMipmap","__version","complete","uploadTexture","maxSize","TEXTURE_CUBE_MAP","isCompressed","isDataTexture","cubeImage","maxCubemapSize","TEXTURE_CUBE_MAP_POSITIVE_X","allocTextureUnit","setTexture2D","warned","setTexture","setTextureCube","setTextureCubeDynamic","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","renderbuffer","bindRenderbuffer","RENDERBUFFER","depthBuffer","stencilBuffer","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL","DEPTH_STENCIL_ATTACHMENT","RGBA4","isCube","webglDepthTexture","setupDepthTexture","createRenderbuffer","setupRenderBufferStorage","createFramebuffer","isTargetPowerOfTwo","setupFrameBufferTexture","COLOR_ATTACHMENT0","setupDepthRenderbuffer","getCurrentRenderTarget","setupRenderTarget","scissorTest","activeMipMapLevel","readRenderTargetPixels","restore","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","NEAREST","LINEAR","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","HALF_FLOAT_OES","ALPHA","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","MIN_EXT","MAX_EXT","drawArraysInstancedANGLE","globalState","numGlobalPlanes","renderingShadows","viewNormalMatrix","enableLocalClipping","projectPlanes","resetGlobalState","fromCache","lGlobal","nGlobal","dstArray","clippingState","skipTransform","nPlanes","flatSize","i4","drawElements","drawElementsInstancedANGLE","gl","getExtension","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","getMaxPrecision","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_ATTRIBS","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","vertexTextures","floatFragmentTextures","_maxPrecision","WebGLGeometries","onGeometryDispose","buffergeometry","_bufferGeometry","deleteAttribute","deleteAttributes","property","bufferproperty","__webglBuffer","deleteBuffer","removeAttributeBuffer","updateAttribute","attributeProperties","updateBuffer","STATIC_DRAW","usage","bufferSubData","checkEdge","edges","list","WebGLProgram","functionName","getEncodingComponents","toneMappingName","rendererExtensions","envMapCubeUV","flatShading","filterEmptyLine","identifiers","getProgramParameter","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","replace","numDirLights","numSpotLights","numPointLights","numHemiLights","include","snippet","unroll","shadowMapType","shadowMapTypeDefine","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","generateExtensions","generateDefines","createProgram","prefixFragment","prefixVertex","customDefines","supportsVertexTextures","gammaFactorDefine","maxBones","doubleSided","flipSided","shadowMapEnabled","customExtensions","useFog","fogExp","getToneMappingFunction","outputEncoding","mapEncoding","envMapEncoding","emissiveMapEncoding","getTexelDecodingFunction","getTexelEncodingFunction","parseIncludes","replaceLightNums","unrollLoops","WebGLShader","vertexGlsl","fragmentGlsl","attachShader","glVertexShader","glFragmentShader","bindAttribLocation","linkProgram","getProgramInfoLog","getShaderInfoLog","LINK_STATUS","runnable","getError","VALIDATE_STATUS","programLog","vertexLog","fragmentLog","haveDiagnostics","diagnostics","prefix","deleteShader","cachedUniforms","cachedAttributes","fetchAttributeLocations","destroy","deleteProgram","programIdCount","usedTimes","nVertexUniforms","nVertexMatrices","gammaOverrideLinear","nClipPlanes","shaderIDs","allocateBones","getTextureEncodingFromMap","currentRenderTarget","envMapMode","parameterNames","pl","lines","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","addLineNumbers","_renderer","_state","_lightShadows","_shadowMapSize","_lookTarget","_lightPositionWorld","_renderList","_MorphingFlag","_SkinningFlag","_NumberOfMaterialVariants","_depthMaterials","_distanceMaterials","_materialCache","depthMaterialTemplate","distanceShader","depthMaterial","useMorphing","useSkinning","distanceUniforms","distanceMaterial","renderReverseSided","renderSingleSided","BLEND","isPointLight","faceCount","cube2DViewPorts","vpWidth","vpHeight","pars","shadowCamera","cubeDirections","cubeUps","vpDimensions","shadowMatrix","getDepthMaterial","clearAlpha","lightPositionWorld","customDepthMaterial","materialVariants","customMaterial","customDistanceMaterial","variantIndex","keyB","keyA","materialsForVariant","cachedMaterial","lightPos","WebGLColorBuffer","WebGLDepthBuffer","WebGLStencilBuffer","maxVertexAttributes","emptyTextures","DEPTH_TEST","newAttributes","enabledAttributes","enableVertexAttribArray","attributeDivisors","vertexAttribDivisorANGLE","disableVertexAttribArray","compressedTextureFormats","COMPRESSED_TEXTURE_FORMATS","formats","currentBlending","currentPremultipledAlpha","blendEquationSeparate","blendFuncSeparate","blendFunc","currentBlendEquation","currentBlendEquationAlpha","currentBlendSrc","currentBlendDst","currentBlendSrcAlpha","currentBlendDstAlpha","setMask","setTest","setFunc","setStencilTest","stencilTest","setStencilWrite","stencilWrite","setStencilFunc","stencilFunc","stencilRef","stencilMask","setStencilOp","stencilFail","stencilZFail","stencilZPass","setOp","currentFlipSided","frontFace","CW","CCW","currentCullFace","BACK","FRONT","FRONT_AND_BACK","currentLineWidth","factor","units","POLYGON_OFFSET_FILL","currentPolygonOffsetFactor","currentPolygonOffsetUnits","getScissorTest","currentScissorTest","SCISSOR_TEST","webglSlot","currentTextureSlot","webglType","webglTexture","currentBoundTextures","boundTexture","setClear","currentScissor","currentViewport","colorMask","currentColorMask","locked","setLocked","lock","currentColorClear","depthMask","currentDepthMask","currentDepthFunc","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","currentDepthClear","STENCIL_TEST","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","stencilOp","currentStencilClear","UniformContainer","arrayCacheF32","arrayCacheI32","flatten","nBlocks","blockSize","firstElem","allocTexUnits","setValue1f","uniform1f","addr","setValue1i","uniform1i","setValue2fv","uniform2fv","uniform2f","setValue3fv","uniform3f","uniform3fv","setValue4fv","uniform4fv","uniform4f","setValue2fm","uniformMatrix2fv","setValue3fm","uniformMatrix3fv","setValue4fm","uniformMatrix4fv","setValueT1","unit","setValueT6","setValue2iv","uniform2iv","setValue3iv","uniform3iv","setValue4iv","uniform4iv","getSingularSetter","setValue1fv","uniform1fv","setValue1iv","uniform1iv","setValueV2a","setValueV3a","setValueV4a","setValueM2a","setValueM3a","setValueM4a","setValueT1a","tex","setValueT6a","getPureArraySetter","SingleUniform","activeInfo","PureArrayUniform","StructuredUniform","addUniform","container","uniformObject","parseUniform","pathLength","RePathPart","matchEnd","idIsIndex","subscript","next","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","flares","elementBuffer","occlusionTexture","vertexBuffer","tempTexture","renderType","occlusionMap","screenPosition","halfViewportWidth","halfViewportHeight","invAspect","screenPositionPixels","validArea","tempPosition","TEXTURE1","copyTexImage2D","uvOffset","uvScale","fogType","fillStyle","fillRect","oldFogType","sceneFogType","spritePosition","spriteRotation","spriteScale","Face4","LineStrip","LinePieces","MeshFaceMaterial","Particle","ParticleSystem","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial","Vertex","isIntersectionBox","isIntersectionSphere","multiplyVector3","multiplyVector3Array","extractPosition","multiplyVector4","rotateAxis","crossVector","rotateByAxis","isIntersectionLine","isIntersectionPlane","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","getChildByName","renderDepth","eulerOrder","useQuaternion","setLens","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraNear","shadowCameraFar","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","addIndex","addDrawCall","indexOffset","clearDrawCalls","computeOffsets","wrapAround","wrapRGB","metal","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","shadowMapCullFace","audioLoader","getData","GeometryUtils","geometry1","ImageUtils","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","Projector","projectVector","unprojectVector","pickingRay","CanvasRenderer","CurveUtils","tangentQuadraticBezier","tangentCubicBezier","tangentSpline","h10","h01","h11","SceneUtils","createMultiMaterialObject","detach","attach","ShapeUtils","contour","triangulate","verts","px","py","aY","bX","bY","cX","cY","apy","bpx","bpy","cpx","cpy","bCROSScp","aCROSSbp","aX","apx","cCROSSap","vertIndices","nv","snip","triangulateShape","holes","inSegPt1","inSegPt2","inOtherPt","inSeg1Pt1","inSeg1Pt2","inSeg2Pt1","inSeg2Pt2","inExcludeAdjacentSegs","seg1dy","seg2dy","seg2dx","seg1dx","seg1seg2dx","seg1seg2dy","limit","perpSeg1","perpSeg2","factorSeg1","seg1Pt","seg2Pt","point_in_segment_2D_colin","seg1max","seg1minVal","seg1maxVal","seg2max","seg2minVal","seg2maxVal","seg1min","seg2min","inVertex","inLegFromPt","inLegToPt","legFromPtY","legToPtY","otherPtY","legFromPtX","legToPtX","otherPtX","from2toAngle","other2toAngle","inShapeIdx","inHoleIdx","shape","prevShapeIdx","lastShapeIdx","nextShapeIdx","isPointInsideAngle","hole","insideAngle","prevHoleIdx","lastHoleIdx","nextHoleIdx","inShapePt","inHolePt","nextIdx","sIdx","intersect_segments_2D","chkHole","hIdx","ihIdx","indepHoles","shapeIndex","shapePt","holePt","holeIdx","cutKey","failedCuts","tmpShape1","tmpShape2","tmpHole1","tmpHole2","hl","counter","minShapeIndex","holeIndex","h2","isCutLineInsideAngles","intersectsShapeEdge","intersectsHoleEdge","allPointsMap","allpoints","removeHoles","shapeWithoutHoles","triangles","isClockWise","pts","b2p1","b2p2","b3","b3p1","b3p2","b3p3","Curve","getPointAt","getUtoTmapping","getPoints","divisions","getSpacedPoints","getLengths","lengths","__arcLengthDivisions","cacheArcLengths","sum","current","updateArcLengths","arcLengths","targetArcLength","comparison","lengthAfter","lengthBefore","segmentLength","segmentFraction","getTangent","pt2","pt1","getTangentAt","getPointFunc","CurvePath","curves","autoClose","curve","closePath","startPoint","endPoint","LineCurve","getCurveLengths","curveLengths","lens","cacheLengths","sums","createPointsGeometry","createGeometry","createSpacedPointsGeometry","generateShapes","String","resolution","createPath","ret","glyphs","glyph","Path","cpx0","cpy0","cpx1","cpy1","cpx2","cpy2","laste","_cachedOutline","outline","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","ha","createPaths","shapes","toShapes","fromPoints","args","lastargs","aCPx","aCPy","QuadraticBezierCurve","aCP1x","aCP1y","aCP2x","aCP2y","CubicBezierCurve","splineThru","npts","SplineCurve","aRadius","aStartAngle","aEndAngle","aClockwise","absarc","absellipse","ellipse","xRadius","yRadius","aRotation","EllipseCurve","lastPoint","item","spts","spline","tdivisions","deltaAngle","isCCW","noHoles","inActions","lastPath","subPaths","inSubpaths","Shape","tmpShape","tmpPath","inPt","inPolygon","polyLen","edgeHighPt","edgeLowPt","edgeDy","edgeDx","perpEdge","inside","extractSubpaths","holesFirst","newShapes","mainIdx","newShapeHoles","tmpPoints","solid","sLen","betterShapeHoles","sho","s2Idx","isPointInsidePolygon","ho","toChange","froms","tos","hole_unassigned","ambiguous","tmpHoles","extrude","ExtrudeGeometry","makeGeometry","ShapeGeometry","getPointsHoles","holesPts","extractAllPoints","extractPoints","point0","point1","point2","point3","ArcCurve","LineCurve3","QuadraticBezierCurve3","CubicBezierCurve3","SplineCurve3","CatmullRomCurve3","pz","CubicPoly","c0","initNonuniformCatmullRom","x3","dt0","dt1","dt2","initCatmullRom","tension","calc","closed","ClosedSplineCurve3","BoxGeometry","BoxBufferGeometry","CubeGeometry","calculateVertexCount","calculateIndexCount","indexCount","vertexCount","buildPlane","udir","vdir","gridX","gridY","gridY1","segmentHeight","heightHalf","gridX1","segmentWidth","widthHalf","depthHalf","vertexBufferOffset","uvBufferOffset","vertexCounter","numberOfVertices","indexBufferOffset","CircleGeometry","CircleBufferGeometry","ii","segment","CylinderBufferGeometry","nbCap","indexArray","halfHeight","generateTorso","generateCap","tanTheta","indexRow","i3","centerIndexStart","centerIndexEnd","sinTheta","cosTheta","CylinderGeometry","ConeBufferGeometry","ConeGeometry","EdgesGeometry","thresholdAngle","edge","sortFunction","vert1","vert2","face1","face2","thresholdDot","addShapeList","addShape","amount","bevelThickness","bevelSize","bevelSegments","bevelEnabled","curveSegments","steps","extrudePath","extrudeByPath","UVGenerator","WorldUVGenerator","binormal","position2","extrudePts","splineTube","frames","TubeGeometry","FrenetFrames","shapePoints","reverse","ahole","pt","bs","vert","vlen","flen","inPrev","inNext","v_trans_y","shrink_by","v_prev_y","v_next_y","v_prev_x","v_next_x","collinear0","v_prev_lensq","v_prev_len","v_next_len","ptNextShift_x","ptPrevShift_x","ptNextShift_y","ptPrevShift_y","v_trans_x","sf","v_trans_lensq","direction_eq","contourMovements","getBevelVec","oneHoleMovements","verticesMovements","holesMovements","scalePt2","binormals","buildLidFaces","buildSideFaces","layer","f3","sidewalls","layeroffset","slen1","slen2","f4","shapesOffset","uvgen","generateTopUV","wallContour","stepIndex","stepsLength","contourIndex1","contourIndex2","generateSideWallUV","indexA","indexB","indexC","indexD","LatheBufferGeometry","base","inverseSegments","n1","n2","LatheGeometry","PlaneGeometry","PlaneBufferGeometry","segment_height","height_half","segment_width","width_half","offset2","RingBufferGeometry","radiusStep","thetaSegmentLevel","RingGeometry","SphereGeometry","SphereBufferGeometry","verticesRow","v4","thetaEnd","TextGeometry","TorusBufferGeometry","TorusGeometry","TorusKnotBufferGeometry","calculatePositionOnCurve","P1","P2","T","N","B","quOverP","cs","cu","su","TorusKnotGeometry","heightScale","taper","NoTaper","tangent","numpoints","pos2","ip","jp","uva","uvb","uvc","uvd","tangents","grid","SinusoidalTaper","mat","smallest","tz","initialNormal3","MAX_VALUE","PolyhedronGeometry","prepare","subdivide","that","azimuth","inclination","centroid","correctUV","azi","cols","rows","aj","bj","make","DodecahedronGeometry","IcosahedronGeometry","OctahedronGeometry","TetrahedronGeometry","ParametricGeometry","func","slices","stacks","sliceCount","WireframeGeometry","numEdges","ol","numTris","AxisHelper","ArrowHelper","lineGeometry","coneGeometry","headLength","headWidth","cone","setDirection","setColor","BoxHelper","BoundingBoxHelper","CameraHelper","addLine","hexFrustum","hexCone","hexUp","hexTarget","hexCross","addPoint","pointMap","setPoint","DirectionalLightHelper","lightPlane","targetLine","EdgesHelper","FaceNormalsHelper","objGeometry","nNormals","GridHelper","setColors","HemisphereLightHelper","sphereSize","lightSphere","PointLightHelper","SkeletonHelper","getBoneList","boneList","boneMatrix","matrixWorldInv","SpotLightHelper","coneLength","coneWidth","vector2","VertexNormalsHelper","objPos","objNorm","WireframeHelper","renderCallback","MorphBlendMesh","animationsMap","animationsList","numFrames","createAnimation","startFrame","endFrame","setAnimationWeight","lastFrame","currentFrame","active","directionBackwards","mirroredLoop","autoCreateAnimations","frameRanges","morph","firstAnimation","setAnimationDirectionForward","setAnimationDirectionBackward","setAnimationFPS","setAnimationDuration","setAnimationTime","getAnimationTime","getAnimationDuration","playAnimation","stopAnimation","keyframe","exports","this","appendChild","dom","display","cssText","Panel","self","addPanel","showPanel","begin","usedJSHeapSize","jsHeapSizeLimit","devicePixelRatio","textBaseline","fillText","globalAlpha","domain","EventHandlers","EventEmitter","usingDomains","_events","_maxListeners","defaultMaxListeners","Domain","getPrototypeOf","_eventsCount","setMaxListeners","TypeError","$getMaxListeners","getMaxListeners","emitNone","handler","isFn","arrayClone","emitOne","arg1","emitTwo","arg2","emitThree","arg3","emitMany","emit","er","events","doError","Error","domainEmitter","domainThrown","err","_addListener","prepend","existing","newListener","unshift","emitter","emitWarning","addListener","on","prependListener","_onceWrap","fired","removeListener","once","prependOnceListener","originalListener","spliceOne","removeAllListeners","evlistener","unwrapListeners","listenerCount","eventNames","Reflect","ownKeys","arr","PRESSED","RELEASED","InputAction","mouseButtons","keyboard_keys","mouse_buttons","currentState","previousState","keyCode","keyState","wasPressed","wasReleased","Events","MOUSEMOVE","RAW_MOUSEMOVE","MOUSEWHEEL","InputManager","targetCanvas","mouse","lastX","lastY","_init","_keyDown","_keyUp","_mouseWheelMove","_mouseDown","_mouseUp","_onMouseMove","KEY_MAPPING","resetMapping","keyMapping","cur","keyboard","setMapping","evt","deltaY","_processKeyInteraction","btn","_normalizeMouseKeyCode","button","changedTouches","endCycle","clientX","innerWidth","clientY","innerHeight","OFFSET","ClientGame","quit","then","currentScene","fixedFrameTime","fixedTimeStep","inputManager","assets","_changeSceneJob","classList","oncontextmenu","body","resize","DEBUG","Stats","run","interval","isInitialized","stage","tearDown","resume","BaseScene","_camera","axisHelper","MSG","INIT","TEEOFF","CLIENT_CONNECTED","CLIENT_DISCONNECTED","POSITION_UPDATE","CHANGE_MAP","EntityManager","entities","Map","entity","TILESIZE","PLAYER_RADIUS","TICKS","meshes","build","Statics","tile","Entity","initialized","Player","sphere_geometry","_mesh","player","OrbitControls","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","UP","BOTTOM","ORBIT","ZOOM","PAN","target0","position0","zoom0","getPolarAngle","spherical","getAzimuthalAngle","changeEvent","STATE","NONE","quat","quatInverse","lastPosition","lastQuaternion","rotateLeft","getAutoRotationAngle","sphericalDelta","panOffset","zoomChanged","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","rotateUp","panLeft","objectMatrix","panUp","pan","deltaX","element","targetDistance","clientWidth","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","handleMouseWheel","handleKeyDown","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","stopPropagation","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","Action","mouseVector","TeeOffAction","selectedElement","isBusy","currentHex","USE","require$$0","GameplayScene","socket","entityManager","MATERIAL","players","cameraControls","teeOffAction","loadMapping","pointLight","COM","addPlayer","you","removePlayer","updatePlayer","addEntity","removeEntity","parseuri","str","uri","host","authority","ipv6uri","global","defaultSetTimout","defaultClearTimeout","cachedSetTimeout","cachedClearTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","nextTick","Item","title","platform","browser","env","argv","versions","release","config","noop","off","cwd","chdir","umask","performanceNow","mozNow","msNow","oNow","webkitNow","getTime","hrtime","previousTimestamp","clocktime","seconds","nanoseconds","uptime","dif","val","long","fmtLong","fmtShort","ms","plural","createDebug","debug","coerce","selectColor","namespace","charCodeAt","curr","prev","formatter","formatters","formatArgs","logFn","useColors","namespaces","save","skips","RegExp","substr","names","instance","stack","chrome","storage","local","localstorage","process","navigator","userAgent","documentElement","WebkitAppearance","firebug","exception","table","$1","humanize","lastC","removeItem","localStorage","loc","location","protocol","port","ipv6","href","Emitter","mixin","fn","_callbacks","callbacks","hasListeners","lookup","revLookup","Arr","inited","toByteArray","b64","placeHolders","L","tripletToBase64","num","encodeChunk","uint8","fromByteArray","extraBytes","maxChunkLength","len2","read","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","write","rt","INSPECT_MAX_BYTES","Buffer","TYPED_ARRAY_SUPPORT","kMaxLength","RangeError","__proto__","arg","encodingOrOffset","allocUnsafe","poolSize","_augment","ArrayBuffer","fromArrayBuffer","fromString","fromObject","assertSize","alloc","fill","checked","allocUnsafeSlow","isEncoding","byteLength","actual","fromArrayLike","byteOffset","internalIsBuffer","isnan","isBuffer","_isBuffer","compare","buf","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","swap16","swap32","swap64","inspect","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","arrayIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","includes","hexWrite","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","_arr","base64","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","fromCharCode","out","toHex","bytes","newBuf","sliceLen","checkOffset","ext","readUIntLE","noAssert","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","ieee754","readFloatBE","readDoubleLE","readDoubleBE","checkInt","writeUIntLE","maxBytes","writeUIntBE","writeUInt8","objectWriteUInt16","littleEndian","writeUInt16LE","writeUInt16BE","objectWriteUInt32","writeUInt32LE","writeUInt32BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","checkIEEE754","writeFloat","writeFloatLE","writeFloatBE","writeDouble","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","base64clean","stringtrim","leadSurrogate","byteArray","hi","lo","isFastBuffer","isSlowBuffer","isBuf","withNativeBuffer","Buffer.isBuffer","withNativeArrayBuffer","withNativeBlob","Blob","withNativeFile","File","packet","packetData","pack","_deconstructPacket","attachments","placeholder","_placeholder","newData","_reconstructPacket","_removeBlobs","curKey","containingObject","pendingBlobs","fileReader","FileReader","onload","bloblessData","readAsArrayBuffer","Encoder","Decoder","ERROR_PACKET","ERROR","encode","BINARY_EVENT","BINARY_ACK","encodeAsBinary","encodeAsString","nsp","payload","tryStringify","writeEncoding","deconstruction","binary","deconstructPacket","removeBlobs","reconstructor","decodeString","BinaryReconstructor","reconPack","takeBinaryData","types","tryParse","isPayloadValid","finishedReconstruction","binData","reconstructPacket","XMLHttpRequest","opts","xdomain","xscheme","enablesXDR","hasCORS","XDomainRequest","has","hasBinary","arraybuffer","abv","after","err_cb","bail","proxy","stringFromCharCode","ucs2decode","extra","ucs2encode","checkScalarValue","strict","toUpperCase","createByte","encodeCodePoint","symbol","utf8encode","byteString","readContinuationByte","byteIndex","byteCount","continuationByte","decodeSymbol","byte1","byte2","byte3","byte4","utf8decode","decode","bufferLength","encoded1","encoded2","encoded3","encoded4","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","blobSupportsArrayBufferView","blobBuilderSupported","append","getBlob","mapArrayBufferViews","ary","chunk","BlobBuilderConstructor","bb","forEach","part","BlobConstructor","base64encoder","isAndroid","isPhantomJS","dontSendBlobs","packets","close","ping","pong","upgrade","packetslist","supportsBinary","encodeArrayBuffer","encodeBlob","encodeBase64Object","encoded","utf8","encodeBase64Packet","contentArray","encodeBlobAsArrayBuffer","fr","encodePacket","blob","readAsDataURL","b64data","typed","basic","btoa","binaryType","decodeBase64Packet","tryDecode","asArray","rest","sliceBuffer","isBinary","encodePayloadAsBlob","encodePayloadAsArrayBuffer","setLengthHeader","encodeOne","doneCallback","each","done","eachWithIndex","el","decodePayloadAsBinary","chr","decodePacket","encodedPackets","reduce","acc","resultArray","bufferIndex","isString","lenStr","binaryIdentifier","lengthAry","bufferTail","tailArray","msgLength","Transport","hostname","secure","query","timestampParam","timestampRequests","agent","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","isReactNative","extraHeaders","localAddress","desc","description","doOpen","doClose","onClose","onOpen","writable","onData","parser","onPacket","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","alphabet","seed","decoded","yeast","Polling","hasXHR2","require$$1","xhr","forceBase64","inherit","poll","onPause","polling","doPoll","decodePayload","callbackfn","encodePayload","doWrite","schema","sid","parseqs","XHR","Request","requestTimeout","isSSL","xd","xs","req","method","sendXhr","pollXhr","async","setDisableHeaderCheck","setRequestHeader","hasXDR","onerror","responseText","onreadystatechange","contentType","getResponseHeader","requestsCount","requests","onSuccess","cleanup","fromError","abort","attachEvent","unloadHandler","terminationEvent","JSONPPolling","rNewline","rEscapedNewline","glob","___eio","script","parentNode","removeChild","form","iframe","insertAt","getElementsByTagName","insertBefore","head","isUAgecko","iframeId","className","setAttribute","initIframe","html","submit","BrowserWebSocket","NodeWebSocket","WebSocket","MozWebSocket","WebSocketImpl","WS","perMessageDeflate","usingBrowserWebSocket","protocols","check","headers","ws","supports","addEventListeners","onopen","onclose","onmessage","ev","compress","websocket","jsonp","forceJSONP","JSONP","Socket","transports","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","onlyBinaryUpgrades","product","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","createTransport","EIO","transport","setTransport","onDrain","probe","failed","onTransportOpen","upgradeLosesBinary","upgrading","flush","freezeTransport","onTransportClose","onupgrade","onHandshake","setPing","filterUpgrades","onHeartbeat","sendPacket","waitForUpgrade","cleanupAndClose","reason","filteredUpgrades","connect_error","connect_timeout","connecting","reconnect","reconnect_attempt","reconnect_failed","reconnect_error","reconnecting","io","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","autoConnect","subEvents","subs","hasBin","EVENT","_typeof","CONNECT","onpacket","sameNamespace","rootNamespaceError","onconnect","onevent","ACK","onack","DISCONNECT","ondisconnect","ack","sent","emitBuffered","Backoff","jitter","attempts","rand","deviation","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","lastPing","packetBuffer","encoder","decoder","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","eio","skipReconnect","openSub","errorSub","timer","onping","onpong","ondata","ondecoded","onConnecting","processPacketQueue","subsLength","delay","onreconnect","attempt","newConnection","forceNew","multiplex","blank_object","run_all","fns","is_function","thing","safe_not_equal","insert","anchor","createTextNode","space","listen","childNodes","set_data","current_component","set_current_component","component","dirty_components","update_promise","binding_callbacks","render_callbacks","flush_callbacks","schedule_update","Promise","resolve","add_render_callback","seen_callbacks","Set","$$","fragment","dirty","before_render","ctx","after_render","mount_component","on_mount","on_destroy","new_on_destroy","detaching","make_dirty","create_fragment","not_equal$$1","prop_names","parent_component","props","not_equal","bound","ready","hydrate","intro","SvelteElement","HTMLElement","attachShadow","slotted","attr$$1","oldValue","$destroy","SvelteComponent","SvelteComponentDev","$$inline","handleClick","client","setScene","Test"],"mappings":";;;;;;;;;;;;;yDAAA;;IAMA,UAAY,CAAEA,SAAU,IAAZ,CAAZ;AAIA,CAI8E,CAE7EC,cAAA,CAAiBC,KAAjB,CAEA;CAID,GAAKC,OAAOC,OAAP,GAAmBC,SAAxB,CAAoC,CAEnCF,OAAOC,OAAP,CAAiBE,KAAKC,GAAL,CAAU,CAAV,CAAa,CAAE,EAAf,CAAjB,CAEA;CAID,GAAKD,KAAKE,IAAL,GAAcH,SAAnB,CAA+B;CAI9BC,KAAKE,IAAL,CAAY,SAAWC,CAAX,CAAe,CAE1B,SAAa,CAAN,CAAY,CAAE,CAAd,CAAoBA,EAAI,CAAN,CAAY,CAAZ,CAAgB,CAAEA,CAA3C,CAEA,CAJD,CAMA,CAED,GAAKC,SAASC,SAAT,CAAmBC,IAAnB,GAA4BP,SAAjC,CAA6C;;CAK5CQ,OAAOC,cAAP,CAAuBJ,SAASC,SAAhC,CAA2C,MAA3C,CAAmD,CAElDI,IAAK,cAAY,CAEhB,YAAYC,QAAL,GAAgBC,KAAhB,CAAuB,2BAAvB,EAAsD,CAAtD,CAAP,CAEA,CANiD,CAAnD,EAUA,CAED,GAAKJ,OAAOK,MAAP,GAAkBb,SAAvB,CAAmC;;CAKlC,CAAE,UAAY,CAEbQ,OAAOK,MAAP,CAAgB,SAAWC,MAAX,CAAoB,CAEnC,AAEA,GAAKA,SAAWd,SAAX,EAAwBc,SAAW,IAAxC,CAA+C,CAE9C,mBAAM,CAAe,4CAAf,CAAN,CAEA,CAED,WAAaN,OAAQM,MAAR,CAAb,CAEA,IAAM,UAAY,CAAlB,CAAqBC,MAAQC,UAAUC,MAAvC,CAA+CF,OAA/C,CAA0D,CAEzD,WAAaC,UAAWD,KAAX,CAAb,CAEA,GAAKG,SAAWlB,SAAX,EAAwBkB,SAAW,IAAxC,CAA+C,CAE9C,IAAM,WAAN,UAAA,CAA8B,CAE7B,GAAKV,OAAOF,SAAP,CAAiBa,cAAjB,CAAgCC,IAAhC,CAAsCF,MAAtC,CAA8CG,OAA9C,CAAL,CAA+D,CAE9DC,OAAQD,OAAR,EAAoBH,OAAQG,OAAR,CAApB,CAEA,CAED,CAED,CAED,CAED,aAAA,CAEA,CAlCD,CAoCA,CAtCD,IAwCA;CAIDb,OAAOK,MAAP,CAAehB,KAAf,CAAsB;CAIrB0B,MAAO,CAAEC,KAAM,CAAR,CAAWC,OAAQ,CAAnB,CAAsBC,MAAO,CAA7B,CAJc;CAQrBC,aAAc,CARO,CASrBC,aAAc,CATO,CAUrBC,cAAe,CAVM,CAWrBC,kBAAmB,CAXE,CAarBC,qBAAsB,CAbD,CAcrBC,sBAAuB,CAdF;CAkBrBC,eAAgB,CAlBK,CAmBrBC,aAAc,CAnBO,CAoBrBC,iBAAkB,CApBG;;CA0BrBC,UAAW,CA1BU,CA2BrBC,SAAU,CA3BW,CA4BrBC,WAAY,CA5BS;CAgCrBC,YAAa,CAhCQ,CAiCrBC,cAAe,CAjCM;CAqCrBC,SAAU,CArCW,CAsCrBC,WAAY,CAtCS,CAuCrBC,aAAc,CAvCO;CA2CrBC,WAAY,CA3CS,CA4CrBC,eAAgB,CA5CK,CA6CrBC,iBAAkB,CA7CG,CA8CrBC,oBAAqB,CA9CA,CA+CrBC,iBAAkB,CA/CG,CAgDrBC,eAAgB,CAhDK;;;CAsDrBC,YAAa,GAtDQ,CAuDrBC,iBAAkB,GAvDG,CAwDrBC,wBAAyB,GAxDJ,CAyDrBC,YAAa,GAzDQ,CA0DrBC,YAAa,GA1DQ;CA8DrBC,WAAY,GA9DS,CA+DrBC,UAAW,GA/DU,CAgErBC,eAAgB,GAhEK,CAiErBC,uBAAwB,GAjEH,CAkErBC,eAAgB,GAlEK,CAmErBC,uBAAwB,GAnEH,CAoErBC,eAAgB,GApEK,CAqErBC,uBAAwB,GArEH;;;;;;;CA+ErBC,eAAgB,GA/EK,CAgFrBC,uBAAwB,GAhFH,CAiFrBC,uBAAwB,GAjFH;CAqFrBC,WAAY,CArFS,CAsFrBC,YAAa,CAtFQ,CAuFrBC,UAAW,CAvFU,CAwFrBC,eAAgB,CAxFK,CAyFrBC,WAAY,CAzFS,CA0FrBC,kBAAmB,CA1FE,CA2FrBC,aAAc,CA3FO,CA4FrBC,cAAe,CA5FM;CAiGrBC,kBAAmB,CAjGE,CAkGrBC,aAAc,CAlGO,CAmGrBC,aAAc,CAnGO;CAuGrBC,cAAe,CAvGM;CAwGrBC,kBAAmB,CAxGE;CAyGrBC,oBAAqB,CAzGA,CA0GrBC,sBAAuB,CA1GF;CA2GrBC,kBAAmB,CA3GE;;CA+GrBC,UAAW,GA/GU,CAiHrBC,sBAAuB,GAjHF,CAkHrBC,sBAAuB,GAlHF,CAoHrBC,iCAAkC,GApHb,CAqHrBC,iCAAkC,GArHb,CAuHrBC,2BAA4B,GAvHP,CAwHrBC,wBAAyB,GAxHJ,CAyHrBC,wBAAyB,GAzHJ;CA6HrBC,eAAgB,IA7HK,CA8HrBC,oBAAqB,IA9HA,CA+HrBC,uBAAwB,IA/HH;CAmIrBC,cAAe,IAnIM,CAoIrBC,2BAA4B,IApIP,CAqIrBC,0BAA2B,IArIN,CAsIrBC,aAAc,IAtIO,CAuIrBC,0BAA2B,IAvIN,CAwIrBC,yBAA0B,IAxIL;CA4IrBC,iBAAkB,IA5IG,CA6IrBC,SAAU,IA7IW,CA8IrBC,UAAW,IA9IU,CA+IrBC,kBAAmB,IA/IE,CAgJrBC,QAAS,IAhJY,CAiJrBC,gBAAiB,IAjJI,CAkJrBC,UAAW,IAlJU,CAmJrBC,cAAe,IAnJM;;CAwJrBC,sBAAuB,IAxJF,CAyJrBC,sBAAuB,IAzJF,CA0JrBC,qBAAsB,IA1JD;CA8JrBC,YAAa,IA9JQ,CA+JrBC,UAAW,IA/JU,CAgKrBC,WAAY,IAhKS,CAiKrBC,gBAAiB,IAjKI,CAkKrBC,qBAAsB,IAlKD;CAoKrBC,WAAYtH,MAAMmH,UApKG;CAqKrBI,YAAa,IArKQ;CAyKrBC,qBAAsB,IAzKD,CA0KrBC,sBAAuB,IA1KF,CA2KrBC,sBAAuB,IA3KF,CA4KrBC,sBAAuB,IA5KF;CAgLrBC,wBAAyB,IAhLJ,CAiLrBC,wBAAyB,IAjLJ,CAkLrBC,yBAA0B,IAlLL,CAmLrBC,yBAA0B,IAnLL;CAuLrBC,gBAAiB,IAvLI;CA2LrBC,SAAU,IA3LW,CA4LrBC,WAAY,IA5LS,CA6LrBC,aAAc,IA7LO;CAiMrBC,oBAAqB,IAjMA,CAkMrBC,kBAAmB,IAlME,CAmMrBC,kBAAmB,IAnME;CAuMrBC,oBAAqB,IAvMA,CAwMrBC,gBAAiB,IAxMI,CAyMrBC,iBAAkB,IAzMG;CA6MrBC,kBAAmB,CA7ME,CA8MrBC,sBAAuB,CA9MF,CA+MrBC,oBAAqB,CA/MA;CAmNrBC,eAAgB,IAnNK;CAoNrBC,aAAc,IApNO,CAqNrBC,cAAe,IArNM;;;CAyNrBC,aAAc,IAzNO;CA0NrBC,eAAgB,IA1NK,CA2NrBC,cAAe,IA3NM,CA4NrBC,eAAgB,IA5NK,CA6NrBC,aAAc,IA7NO;;CAiOrBC,kBAAmB,IAjOE;CAkOrBC,iBAAkB;CAlOG,CAAtB;;;IA4OAtJ,MAAMuJ,KAAN,CAAc,SAAWC,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAqB,CAElC,GAAKD,IAAMtJ,SAAN,EAAmBuJ,IAAMvJ,SAA9B,CAA0C;CAGzC,YAAYwJ,GAAL,CAAUH,CAAV,CAAP,CAEA,CAED,YAAYI,MAAL,CAAaJ,CAAb,CAAgBC,CAAhB,CAAmBC,CAAnB,CAAP,CAEA,CAXD,CAaA1J,MAAMuJ,KAAN,CAAY9I,SAAZ,CAAwB,CAEvBoJ,YAAa7J,MAAMuJ,KAFI,CAIvBC,EAAG,CAJoB,CAIjBC,EAAG,CAJc,CAIXC,EAAG,CAJQ,CAMvBC,IAAK,aAAWG,KAAX,CAAmB,CAEvB,GAAKA,uBAAuBP,KAA5B,CAAoC,CAEnC,KAAKQ,IAAL,CAAWD,KAAX,EAEA,CAJD,QAIY,YAAA,GAAiB,QAAtB,CAAiC,CAEvC,KAAKE,MAAL,CAAaF,KAAb,EAEA,CAJM,QAIK,YAAA,GAAiB,QAAtB,CAAiC,CAEvC,KAAKG,QAAL,CAAeH,KAAf,EAEA,CAED,WAAA,CAEA,CAxBsB,CA0BvBI,UAAW,mBAAWC,MAAX,CAAoB,CAE9B,KAAKX,CAAL,CAASW,MAAT,CACA,KAAKV,CAAL,CAASU,MAAT,CACA,KAAKT,CAAL,CAASS,MAAT,CAEA,CAhCsB,CAkCvBH,OAAQ,gBAAWI,GAAX,CAAiB,CAExBA,IAAMhK,KAAKiK,KAAL,CAAYD,GAAZ,CAAN,CAEA,KAAKZ,CAAL,CAAS,CAAEY,KAAO,EAAP,CAAY,GAAd,EAAsB,GAA/B,CACA,KAAKX,CAAL,CAAS,CAAEW,KAAO,CAAP,CAAW,GAAb,EAAqB,GAA9B,CACA,KAAKV,CAAL,CAAS,CAAEU,IAAM,GAAR,EAAgB,GAAzB,CAEA,WAAA,CAEA,CA5CsB,CA8CvBR,OAAQ,gBAAWJ,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAqB,CAE5B,KAAKF,CAAL,CAASA,CAAT,CACA,KAAKC,CAAL,CAASA,CAAT,CACA,KAAKC,CAAL,CAASA,CAAT,CAEA,WAAA,CAEA,CAtDsB,CAwDvBY,OAAQ,UAAY,CAEnB,gBAAA,CAAkBC,CAAlB,CAAqBC,CAArB,CAAwBC,CAAxB,CAA4B,CAE3B,GAAKA,EAAI,CAAT,CAAaA,GAAK,CAAL,CACb,GAAKA,EAAI,CAAT,CAAaA,GAAK,CAAL,CACb,GAAKA,EAAI,EAAI,CAAb,CAAiB,SAAW,CAAED,EAAID,CAAN,EAAY,CAAZ,CAAgBE,CAA3B,CACjB,GAAKA,EAAI,EAAI,CAAb,CAAiB,QAAA,CACjB,GAAKA,EAAI,EAAI,CAAb,CAAiB,SAAW,CAAED,EAAID,CAAN,EAAY,CAAZ,EAAkB,EAAI,CAAJ,CAAQE,CAA1B,CAAX,CACjB,QAAA,CAEA,CAED,gBAAkBC,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAqB;CAG3BF,EAAI1K,MAAMI,IAAN,CAAWyK,eAAX,CAA4BH,CAA5B,CAA+B,CAA/B,CAAJ,CACAC,EAAI3K,MAAMI,IAAN,CAAW0K,KAAX,CAAkBH,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,CAAJ,CACAC,EAAI5K,MAAMI,IAAN,CAAW0K,KAAX,CAAkBF,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,CAAJ,CAEA,GAAKD,IAAM,CAAX,CAAe,CAEd,KAAKnB,CAAL,CAAS,KAAKC,CAAL,CAAS,KAAKC,CAAL,CAASkB,CAA3B,CAEA,CAJD,IAIO,CAEN,MAAQA,GAAK,GAAL,CAAWA,GAAM,EAAID,CAAV,CAAX,CAA2BC,EAAID,CAAJ,CAAUC,EAAID,CAAjD,CACA,MAAU,EAAIC,CAAN,CAAYL,CAApB,CAEA,KAAKf,CAAL,CAASuB,QAASP,CAAT,CAAYD,CAAZ,CAAeG,EAAI,EAAI,CAAvB,CAAT,CACA,KAAKjB,CAAL,CAASsB,QAASP,CAAT,CAAYD,CAAZ,CAAeG,CAAf,CAAT,CACA,KAAKhB,CAAL,CAASqB,QAASP,CAAT,CAAYD,CAAZ,CAAeG,EAAI,EAAI,CAAvB,CAAT,CAEA,CAED,WAAA,CAEA,CAxBD,CA0BA,CAvCO,EAxDe,CAiGvBT,SAAU,kBAAWe,KAAX,CAAmB,CAE5B,oBAAA,CAAsBC,MAAtB,CAA+B,CAE9B,GAAKA,SAAW9K,SAAhB,CAA4B,OAE5B,GAAK+K,WAAYD,MAAZ,EAAuB,CAA5B,CAAgC,CAE/BE,QAAQC,IAAR,CAAc,mCAAqCJ,KAArC,CAA6C,mBAA3D,EAEA,CAED,CAGD,KAAA,CAEA,GAAKK,EAAI,kCAAkCC,IAAlC,CAAwCN,KAAxC,CAAT,CAA2D;CAI1D,SAAA,CACA,SAAWK,EAAG,CAAH,CAAX,CACA,eAAiBA,EAAG,CAAH,CAAjB,CAEA,OAAS3K,IAAT,EAEC,IAAK,KAAL,CACA,IAAK,MAAL,CAEC,GAAK6K,MAAQ,gEAAgED,IAAhE,CAAsEE,UAAtE,CAAb,CAAkG;CAGjG,KAAKhC,CAAL,CAASpJ,KAAKqL,GAAL,CAAU,GAAV,CAAeC,SAAUH,MAAO,CAAP,CAAV,CAAsB,EAAtB,CAAf,EAA8C,GAAvD,CACA,KAAK9B,CAAL,CAASrJ,KAAKqL,GAAL,CAAU,GAAV,CAAeC,SAAUH,MAAO,CAAP,CAAV,CAAsB,EAAtB,CAAf,EAA8C,GAAvD,CACA,KAAK7B,CAAL,CAAStJ,KAAKqL,GAAL,CAAU,GAAV,CAAeC,SAAUH,MAAO,CAAP,CAAV,CAAsB,EAAtB,CAAf,EAA8C,GAAvD,CAEAI,YAAaJ,MAAO,CAAP,CAAb,EAEA,WAAA,CAEA,CAED,GAAKA,MAAQ,sEAAsED,IAAtE,CAA4EE,UAA5E,CAAb,CAAwG;CAGvG,KAAKhC,CAAL,CAASpJ,KAAKqL,GAAL,CAAU,GAAV,CAAeC,SAAUH,MAAO,CAAP,CAAV,CAAsB,EAAtB,CAAf,EAA8C,GAAvD,CACA,KAAK9B,CAAL,CAASrJ,KAAKqL,GAAL,CAAU,GAAV,CAAeC,SAAUH,MAAO,CAAP,CAAV,CAAsB,EAAtB,CAAf,EAA8C,GAAvD,CACA,KAAK7B,CAAL,CAAStJ,KAAKqL,GAAL,CAAU,GAAV,CAAeC,SAAUH,MAAO,CAAP,CAAV,CAAsB,EAAtB,CAAf,EAA8C,GAAvD,CAEAI,YAAaJ,MAAO,CAAP,CAAb,EAEA,WAAA,CAEA,CAED,MAED,IAAK,KAAL,CACA,IAAK,MAAL,CAEC,GAAKA,MAAQ,gFAAgFD,IAAhF,CAAsFE,UAAtF,CAAb,CAAkH;CAGjH,MAAQN,WAAYK,MAAO,CAAP,CAAZ,EAA2B,GAAnC,CACA,MAAQG,SAAUH,MAAO,CAAP,CAAV,CAAsB,EAAtB,EAA6B,GAArC,CACA,MAAQG,SAAUH,MAAO,CAAP,CAAV,CAAsB,EAAtB,EAA6B,GAArC,CAEAI,YAAaJ,MAAO,CAAP,CAAb,EAEA,YAAYjB,MAAL,CAAaI,CAAb,CAAgBC,CAAhB,CAAmBC,CAAnB,CAAP,CAEA,CAED,MAjDF,CAqDA,CA7DD,QA6DYS,EAAI,qBAAqBC,IAArB,CAA2BN,KAA3B,CAAT,CAA8C;CAIpD,QAAUK,EAAG,CAAH,CAAV,CACA,SAAWjB,IAAIhJ,MAAf,CAEA,GAAKwK,OAAS,CAAd,CAAkB;CAGjB,KAAKpC,CAAL,CAASkC,SAAUtB,IAAIyB,MAAJ,CAAY,CAAZ,EAAkBzB,IAAIyB,MAAJ,CAAY,CAAZ,CAA5B,CAA6C,EAA7C,EAAoD,GAA7D,CACA,KAAKpC,CAAL,CAASiC,SAAUtB,IAAIyB,MAAJ,CAAY,CAAZ,EAAkBzB,IAAIyB,MAAJ,CAAY,CAAZ,CAA5B,CAA6C,EAA7C,EAAoD,GAA7D,CACA,KAAKnC,CAAL,CAASgC,SAAUtB,IAAIyB,MAAJ,CAAY,CAAZ,EAAkBzB,IAAIyB,MAAJ,CAAY,CAAZ,CAA5B,CAA6C,EAA7C,EAAoD,GAA7D,CAEA,WAAA,CAEA,CATD,QASYD,OAAS,CAAd,CAAkB;CAGxB,KAAKpC,CAAL,CAASkC,SAAUtB,IAAIyB,MAAJ,CAAY,CAAZ,EAAkBzB,IAAIyB,MAAJ,CAAY,CAAZ,CAA5B,CAA6C,EAA7C,EAAoD,GAA7D,CACA,KAAKpC,CAAL,CAASiC,SAAUtB,IAAIyB,MAAJ,CAAY,CAAZ,EAAkBzB,IAAIyB,MAAJ,CAAY,CAAZ,CAA5B,CAA6C,EAA7C,EAAoD,GAA7D,CACA,KAAKnC,CAAL,CAASgC,SAAUtB,IAAIyB,MAAJ,CAAY,CAAZ,EAAkBzB,IAAIyB,MAAJ,CAAY,CAAZ,CAA5B,CAA6C,EAA7C,EAAoD,GAA7D,CAEA,WAAA,CAEA,CAED,CAED,GAAKb,OAASA,MAAM5J,MAAN,CAAe,CAA7B,CAAiC;CAGhC,QAAUpB,MAAM8L,aAAN,CAAqBd,KAArB,CAAV,CAEA,GAAKZ,MAAQjK,SAAb,CAAyB;CAGxB,KAAK6J,MAAL,CAAaI,GAAb,EAEA,CALD,IAKO;CAGNe,QAAQC,IAAR,CAAc,8BAAgCJ,KAA9C,EAEA,CAED,CAED,WAAA,CAEA,CAjOsB,CAmOvBe,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,CAAsB,KAAKL,CAA3B,CAA8B,KAAKC,CAAnC,CAAsC,KAAKC,CAA3C,CAAP,CAEA,CAvOsB,CAyOvBK,KAAM,cAAWwB,KAAX,CAAmB,CAExB,KAAK/B,CAAL,CAAS+B,MAAM/B,CAAf,CACA,KAAKC,CAAL,CAAS8B,MAAM9B,CAAf,CACA,KAAKC,CAAL,CAAS6B,MAAM7B,CAAf,CAEA,WAAA,CAEA,CAjPsB,CAmPvBsC,kBAAmB,2BAAWT,KAAX,CAAkBU,WAAlB,CAAgC,CAElD,GAAKA,cAAgB9L,SAArB,CAAiC8L,YAAc,GAAd,CAEjC,KAAKzC,CAAL,CAASpJ,KAAKC,GAAL,CAAUkL,MAAM/B,CAAhB,CAAmByC,WAAnB,CAAT,CACA,KAAKxC,CAAL,CAASrJ,KAAKC,GAAL,CAAUkL,MAAM9B,CAAhB,CAAmBwC,WAAnB,CAAT,CACA,KAAKvC,CAAL,CAAStJ,KAAKC,GAAL,CAAUkL,MAAM7B,CAAhB,CAAmBuC,WAAnB,CAAT,CAEA,WAAA,CAEA,CA7PsB,CA+PvBC,kBAAmB,2BAAWX,KAAX,CAAkBU,WAAlB,CAAgC,CAElD,GAAKA,cAAgB9L,SAArB,CAAiC8L,YAAc,GAAd,CAEjC,gBAAoBA,YAAc,CAAhB,CAAwB,IAAMA,WAA9B,CAA8C,GAAhE,CAEA,KAAKzC,CAAL,CAASpJ,KAAKC,GAAL,CAAUkL,MAAM/B,CAAhB,CAAmB2C,WAAnB,CAAT,CACA,KAAK1C,CAAL,CAASrJ,KAAKC,GAAL,CAAUkL,MAAM9B,CAAhB,CAAmB0C,WAAnB,CAAT,CACA,KAAKzC,CAAL,CAAStJ,KAAKC,GAAL,CAAUkL,MAAM7B,CAAhB,CAAmByC,WAAnB,CAAT,CAEA,WAAA,CAEA,CA3QsB,CA6QvBC,qBAAsB,+BAAY,CAEjC,MAAQ,KAAK5C,CAAb,CAAgBC,EAAI,KAAKA,CAAzB,CAA4BC,EAAI,KAAKA,CAArC,CAEA,KAAKF,CAAL,CAASA,EAAIA,CAAb,CACA,KAAKC,CAAL,CAASA,EAAIA,CAAb,CACA,KAAKC,CAAL,CAASA,EAAIA,CAAb,CAEA,WAAA,CAEA,CAvRsB,CAyRvB2C,qBAAsB,+BAAY,CAEjC,KAAK7C,CAAL,CAASpJ,KAAKkM,IAAL,CAAW,KAAK9C,CAAhB,CAAT,CACA,KAAKC,CAAL,CAASrJ,KAAKkM,IAAL,CAAW,KAAK7C,CAAhB,CAAT,CACA,KAAKC,CAAL,CAAStJ,KAAKkM,IAAL,CAAW,KAAK5C,CAAhB,CAAT,CAEA,WAAA,CAEA,CAjSsB,CAmSvB6C,OAAQ,iBAAY,CAEnB,YAAc/C,CAAL,CAAS,GAAX,EAAoB,EAApB,CAA2B,KAAKC,CAAL,CAAS,GAAX,EAAoB,CAA7C,CAAmD,KAAKC,CAAL,CAAS,GAAX,EAAoB,CAA5E,CAEA,CAvSsB,CAySvB8C,aAAc,uBAAY,CAEzB,OAAO,CAAE,SAAW,KAAKD,MAAL,GAAczL,QAAd,CAAwB,EAAxB,CAAb,EAA4C2L,KAA5C,CAAmD,CAAE,CAArD,CAAP,CAEA,CA7SsB,CA+SvBC,OAAQ,gBAAWC,cAAX,CAA4B;CAInC,QAAUA,gBAAkB,CAAEjC,EAAG,CAAL,CAAQC,EAAG,CAAX,CAAcC,EAAG,CAAjB,CAA5B,CAEA,MAAQ,KAAKpB,CAAb,CAAgBC,EAAI,KAAKA,CAAzB,CAA4BC,EAAI,KAAKA,CAArC,CAEA,QAAUtJ,KAAKwM,GAAL,CAAUpD,CAAV,CAAaC,CAAb,CAAgBC,CAAhB,CAAV,CACA,QAAUtJ,KAAKqL,GAAL,CAAUjC,CAAV,CAAaC,CAAb,CAAgBC,CAAhB,CAAV,CAEA,OAAA,CAASmD,UAAT,CACA,cAAgB,CAAEpB,IAAMmB,GAAR,EAAgB,GAAhC,CAEA,GAAKnB,MAAQmB,GAAb,CAAmB,CAElBE,IAAM,CAAN,CACAD,WAAa,CAAb,CAEA,CALD,IAKO,CAEN,UAAYD,IAAMnB,GAAlB,CAEAoB,WAAaE,WAAa,GAAb,CAAmBC,OAAUJ,IAAMnB,GAAhB,CAAnB,CAA2CuB,OAAU,EAAIJ,GAAJ,CAAUnB,GAApB,CAAxD,CAEA,OAASmB,GAAT,EAEC,MAAA,CAAQE,IAAM,CAAErD,EAAIC,CAAN,EAAYsD,KAAZ,EAAsBvD,EAAIC,CAAJ,CAAQ,CAAR,CAAY,CAAlC,CAAN,CAA6C,MACrD,MAAA,CAAQoD,IAAM,CAAEpD,EAAIF,CAAN,EAAYwD,KAAZ,CAAoB,CAA1B,CAA6B,MACrC,MAAA,CAAQF,IAAM,CAAEtD,EAAIC,CAAN,EAAYuD,KAAZ,CAAoB,CAA1B,CAA6B,MAJtC,CAQAF,KAAO,CAAP,CAEA,CAEDG,IAAIvC,CAAJ,CAAQoC,GAAR,CACAG,IAAItC,CAAJ,CAAQkC,UAAR,CACAI,IAAIrC,CAAJ,CAAQmC,SAAR,CAEA,UAAA,CAEA,CA1VsB,CA4VvBG,SAAU,mBAAY,CAErB,OAAO,QAAa,KAAK1D,CAAL,CAAS,GAAX,CAAmB,CAA9B,EAAoC,GAApC,EAA8C,KAAKC,CAAL,CAAS,GAAX,CAAmB,CAA/D,EAAqE,GAArE,EAA+E,KAAKC,CAAL,CAAS,GAAX,CAAmB,CAAhG,EAAsG,GAA7G,CAEA,CAhWsB,CAkWvByD,UAAW,mBAAWzC,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAqB,CAE/B,QAAU,KAAK8B,MAAL,EAAV,CAEAO,IAAIvC,CAAJ,EAASA,CAAT,CAAYuC,IAAItC,CAAJ,EAASA,CAAT,CAAYsC,IAAIrC,CAAJ,EAASA,CAAT,CAExB,KAAKN,MAAL,CAAa2C,IAAIvC,CAAjB,CAAoBuC,IAAItC,CAAxB,CAA2BsC,IAAIrC,CAA/B,EAEA,WAAA,CAEA,CA5WsB,CA8WvBwC,IAAK,aAAW7B,KAAX,CAAmB,CAEvB,KAAK/B,CAAL,EAAU+B,MAAM/B,CAAhB,CACA,KAAKC,CAAL,EAAU8B,MAAM9B,CAAhB,CACA,KAAKC,CAAL,EAAU6B,MAAM7B,CAAhB,CAEA,WAAA,CAEA,CAtXsB,CAwXvB2D,UAAW,mBAAWC,MAAX,CAAmBC,MAAnB,CAA4B,CAEtC,KAAK/D,CAAL,CAAS8D,OAAO9D,CAAP,CAAW+D,OAAO/D,CAA3B,CACA,KAAKC,CAAL,CAAS6D,OAAO7D,CAAP,CAAW8D,OAAO9D,CAA3B,CACA,KAAKC,CAAL,CAAS4D,OAAO5D,CAAP,CAAW6D,OAAO7D,CAA3B,CAEA,WAAA,CAEA,CAhYsB,CAkYvB8D,UAAW,mBAAW7C,CAAX,CAAe,CAEzB,KAAKnB,CAAL,EAAUmB,CAAV,CACA,KAAKlB,CAAL,EAAUkB,CAAV,CACA,KAAKjB,CAAL,EAAUiB,CAAV,CAEA,WAAA,CAEA,CA1YsB,CA4YvB8C,SAAU,kBAAWlC,KAAX,CAAmB,CAE5B,KAAK/B,CAAL,EAAU+B,MAAM/B,CAAhB,CACA,KAAKC,CAAL,EAAU8B,MAAM9B,CAAhB,CACA,KAAKC,CAAL,EAAU6B,MAAM7B,CAAhB,CAEA,WAAA,CAEA,CApZsB,CAsZvBgE,eAAgB,wBAAW/C,CAAX,CAAe,CAE9B,KAAKnB,CAAL,EAAUmB,CAAV,CACA,KAAKlB,CAAL,EAAUkB,CAAV,CACA,KAAKjB,CAAL,EAAUiB,CAAV,CAEA,WAAA,CAEA,CA9ZsB,CAgavBgD,KAAM,cAAWpC,KAAX,CAAkBqC,KAAlB,CAA0B,CAE/B,KAAKpE,CAAL,EAAU,CAAE+B,MAAM/B,CAAN,CAAU,KAAKA,CAAjB,EAAuBoE,KAAjC,CACA,KAAKnE,CAAL,EAAU,CAAE8B,MAAM9B,CAAN,CAAU,KAAKA,CAAjB,EAAuBmE,KAAjC,CACA,KAAKlE,CAAL,EAAU,CAAE6B,MAAM7B,CAAN,CAAU,KAAKA,CAAjB,EAAuBkE,KAAjC,CAEA,WAAA,CAEA,CAxasB,CA0avBC,OAAQ,gBAAWC,CAAX,CAAe,CAEtB,SAAWtE,CAAF,GAAQ,KAAKA,CAAf,EAAwBsE,EAAErE,CAAF,GAAQ,KAAKA,CAArC,EAA8CqE,EAAEpE,CAAF,GAAQ,KAAKA,CAAlE,CAEA,CA9asB,CAgbvBqE,UAAW,mBAAWC,KAAX,CAAkBC,MAAlB,CAA2B,CAErC,GAAKA,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5B,KAAKzE,CAAL,CAASwE,MAAOC,MAAP,CAAT,CACA,KAAKxE,CAAL,CAASuE,MAAOC,OAAS,CAAhB,CAAT,CACA,KAAKvE,CAAL,CAASsE,MAAOC,OAAS,CAAhB,CAAT,CAEA,WAAA,CAEA,CA1bsB,CA4bvBC,QAAS,iBAAWF,KAAX,CAAkBC,MAAlB,CAA2B,CAEnC,GAAKD,QAAU7N,SAAf,CAA2B6N,MAAQ,EAAR,CAC3B,GAAKC,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5BD,MAAOC,MAAP,EAAkB,KAAKzE,CAAvB,CACAwE,MAAOC,OAAS,CAAhB,EAAsB,KAAKxE,CAA3B,CACAuE,MAAOC,OAAS,CAAhB,EAAsB,KAAKvE,CAA3B,CAEA,YAAA,CAEA,CAvcsB,CAAxB,CA2cA1J,MAAM8L,aAAN,CAAsB,CAAE,YAAa,QAAf,CAAyB,eAAgB,QAAzC,CAAmD,OAAQ,QAA3D,CAAqE,aAAc,QAAnF,CAA6F,QAAS,QAAtG,CACtB,QAAS,QADa,CACH,SAAU,QADP,CACiB,QAAS,QAD1B,CACoC,iBAAkB,QADtD,CACgE,OAAQ,QADxE,CACkF,aAAc,QADhG,CAEtB,QAAS,QAFa,CAEH,YAAa,QAFV,CAEoB,YAAa,QAFjC,CAE2C,aAAc,QAFzD,CAEmE,YAAa,QAFhF,CAE0F,QAAS,QAFnG,CAGtB,iBAAkB,QAHI,CAGM,WAAY,QAHlB,CAG4B,UAAW,QAHvC,CAGiD,OAAQ,QAHzD,CAGmE,WAAY,QAH/E,CAGyF,WAAY,QAHrG,CAItB,gBAAiB,QAJK,CAIK,WAAY,QAJjB,CAI2B,YAAa,QAJxC,CAIkD,WAAY,QAJ9D,CAIwE,YAAa,QAJrF,CAI+F,cAAe,QAJ9G,CAKtB,iBAAkB,QALI,CAKM,aAAc,QALpB,CAK8B,aAAc,QAL5C,CAKsD,UAAW,QALjE,CAK2E,aAAc,QALzF,CAKmG,eAAgB,QALnH,CAMtB,gBAAiB,QANK,CAMK,gBAAiB,QANtB,CAMgC,gBAAiB,QANjD,CAM2D,gBAAiB,QAN5E,CAMsF,aAAc,QANpG,CAOtB,WAAY,QAPU,CAOA,cAAe,QAPf,CAOyB,UAAW,QAPpC,CAO8C,UAAW,QAPzD,CAOmE,aAAc,QAPjF,CAO2F,YAAa,QAPxG,CAQtB,cAAe,QARO,CAQG,cAAe,QARlB,CAQ4B,UAAW,QARvC,CAQiD,YAAa,QAR9D,CAQwE,aAAc,QARtF,CAQgG,OAAQ,QARxG,CAStB,YAAa,QATS,CASC,OAAQ,QATT,CASmB,QAAS,QAT5B,CASsC,cAAe,QATrD,CAS+D,OAAQ,QATvE,CASiF,WAAY,QAT7F,CASuG,UAAW,QATlH,CAUtB,YAAa,QAVS,CAUC,SAAU,QAVX,CAUqB,QAAS,QAV9B,CAUwC,QAAS,QAVjD,CAU2D,WAAY,QAVvE,CAUiF,gBAAiB,QAVlG,CAU4G,YAAa,QAVzH,CAWtB,eAAgB,QAXM,CAWI,YAAa,QAXjB,CAW2B,aAAc,QAXzC,CAWmD,YAAa,QAXhE,CAW0E,uBAAwB,QAXlG,CAW4G,YAAa,QAXzH,CAYtB,aAAc,QAZQ,CAYE,YAAa,QAZf,CAYyB,YAAa,QAZtC,CAYgD,cAAe,QAZ/D,CAYyE,gBAAiB,QAZ1F,CAYoG,eAAgB,QAZpH,CAatB,iBAAkB,QAbI,CAaM,iBAAkB,QAbxB,CAakC,iBAAkB,QAbpD,CAa8D,cAAe,QAb7E,CAauF,OAAQ,QAb/F,CAayG,YAAa,QAbtH,CActB,QAAS,QAda,CAcH,UAAW,QAdR,CAckB,SAAU,QAd5B,CAcsC,mBAAoB,QAd1D,CAcoE,aAAc,QAdlF,CAc4F,eAAgB,QAd5G,CAetB,eAAgB,QAfM,CAeI,iBAAkB,QAftB,CAegC,kBAAmB,QAfnD,CAe6D,oBAAqB,QAflF,CAe4F,kBAAmB,QAf/G,CAgBtB,kBAAmB,QAhBG,CAgBO,eAAgB,QAhBvB,CAgBiC,YAAa,QAhB9C,CAgBwD,YAAa,QAhBrE,CAgB+E,WAAY,QAhB3F,CAgBqG,cAAe,QAhBpH,CAiBtB,OAAQ,QAjBc,CAiBJ,UAAW,QAjBP,CAiBiB,QAAS,QAjB1B,CAiBoC,YAAa,QAjBjD,CAiB2D,SAAU,QAjBrE,CAiB+E,YAAa,QAjB5F,CAiBsG,SAAU,QAjBhH,CAkBtB,gBAAiB,QAlBK,CAkBK,YAAa,QAlBlB,CAkB4B,gBAAiB,QAlB7C,CAkBuD,gBAAiB,QAlBxE,CAkBkF,aAAc,QAlBhG,CAkB0G,YAAa,QAlBvH,CAmBtB,OAAQ,QAnBc,CAmBJ,OAAQ,QAnBJ,CAmBc,OAAQ,QAnBtB,CAmBgC,aAAc,QAnB9C,CAmBwD,SAAU,QAnBlE,CAmB4E,MAAO,QAnBnF,CAmB6F,YAAa,QAnB1G,CAoBtB,YAAa,QApBS,CAoBC,cAAe,QApBhB,CAoB0B,SAAU,QApBpC,CAoB8C,aAAc,QApB5D,CAoBsE,WAAY,QApBlF,CAoB4F,WAAY,QApBxG,CAqBtB,SAAU,QArBY,CAqBF,SAAU,QArBR,CAqBkB,UAAW,QArB7B,CAqBuC,YAAa,QArBpD,CAqB8D,YAAa,QArB3E,CAqBqF,YAAa,QArBlG,CAqB4G,OAAQ,QArBpH,CAsBtB,cAAe,QAtBO,CAsBG,YAAa,QAtBhB,CAsB0B,MAAO,QAtBjC,CAsB2C,OAAQ,QAtBnD,CAsB6D,UAAW,QAtBxE,CAsBkF,SAAU,QAtB5F,CAsBsG,YAAa,QAtBnH,CAuBtB,SAAU,QAvBY,CAuBF,QAAS,QAvBP,CAuBiB,QAAS,QAvB1B,CAuBoC,aAAc,QAvBlD,CAuB4D,SAAU,QAvBtE,CAuBgF,cAAe,QAvB/F,CAAtB;;;;;;IAkCA9L,MAAMmO,UAAN,CAAmB,SAAW5N,CAAX,CAAc6N,CAAd,CAAiBC,CAAjB,CAAoBC,CAApB,CAAwB,CAE1C,KAAKC,EAAL,CAAUhO,GAAK,CAAf,CACA,KAAKiO,EAAL,CAAUJ,GAAK,CAAf,CACA,KAAKK,EAAL,CAAUJ,GAAK,CAAf,CACA,KAAKK,EAAL,CAAYJ,IAAMnO,SAAR,CAAsBmO,CAAtB,CAA0B,CAApC,CAEA,CAPD,CASAtO,MAAMmO,UAAN,CAAiB1N,SAAjB,CAA6B,CAE5BoJ,YAAa7J,MAAMmO,UAFS,CAI5B,KAAA,EAAS,CAER,YAAYI,EAAZ,CAEA,CAR2B,CAU5B,KAAA,CAAQzE,KAAR,CAAgB,CAEf,KAAKyE,EAAL,CAAUzE,KAAV,CACA,KAAK6E,gBAAL,GAEA,CAf2B,CAiB5B,KAAA,EAAS,CAER,YAAYH,EAAZ,CAEA,CArB2B,CAuB5B,KAAA,CAAQ1E,KAAR,CAAgB,CAEf,KAAK0E,EAAL,CAAU1E,KAAV,CACA,KAAK6E,gBAAL,GAEA,CA5B2B,CA8B5B,KAAA,EAAS,CAER,YAAYF,EAAZ,CAEA,CAlC2B,CAoC5B,KAAA,CAAQ3E,KAAR,CAAgB,CAEf,KAAK2E,EAAL,CAAU3E,KAAV,CACA,KAAK6E,gBAAL,GAEA,CAzC2B,CA2C5B,KAAA,EAAS,CAER,YAAYD,EAAZ,CAEA,CA/C2B,CAiD5B,KAAA,CAAQ5E,KAAR,CAAgB,CAEf,KAAK4E,EAAL,CAAU5E,KAAV,CACA,KAAK6E,gBAAL,GAEA,CAtD2B,CAwD5BhF,IAAK,aAAWpJ,CAAX,CAAc6N,CAAd,CAAiBC,CAAjB,CAAoBC,CAApB,CAAwB,CAE5B,KAAKC,EAAL,CAAUhO,CAAV,CACA,KAAKiO,EAAL,CAAUJ,CAAV,CACA,KAAKK,EAAL,CAAUJ,CAAV,CACA,KAAKK,EAAL,CAAUJ,CAAV,CAEA,KAAKK,gBAAL,GAEA,WAAA,CAEA,CAnE2B,CAqE5B5C,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,CAAsB,KAAK0E,EAA3B,CAA+B,KAAKC,EAApC,CAAwC,KAAKC,EAA7C,CAAiD,KAAKC,EAAtD,CAAP,CAEA,CAzE2B,CA2E5B3E,KAAM,cAAW6E,UAAX,CAAwB,CAE7B,KAAKL,EAAL,CAAUK,WAAWrO,CAArB,CACA,KAAKiO,EAAL,CAAUI,WAAWR,CAArB,CACA,KAAKK,EAAL,CAAUG,WAAWP,CAArB,CACA,KAAKK,EAAL,CAAUE,WAAWN,CAArB,CAEA,KAAKK,gBAAL,GAEA,WAAA,CAEA,CAtF2B,CAwF5BE,aAAc,sBAAWC,KAAX,CAAkBC,MAAlB,CAA2B,CAExC,GAAKD,uBAAuBE,KAAvB,GAAiC,KAAtC,CAA8C,CAE7C,eAAM,CAAW,iGAAX,CAAN,CAEA;;;CAMD,OAAS5O,KAAK6O,GAAL,CAAUH,MAAMP,EAAN,CAAW,CAArB,CAAT,CACA,OAASnO,KAAK6O,GAAL,CAAUH,MAAMN,EAAN,CAAW,CAArB,CAAT,CACA,OAASpO,KAAK6O,GAAL,CAAUH,MAAML,EAAN,CAAW,CAArB,CAAT,CACA,OAASrO,KAAK8O,GAAL,CAAUJ,MAAMP,EAAN,CAAW,CAArB,CAAT,CACA,OAASnO,KAAK8O,GAAL,CAAUJ,MAAMN,EAAN,CAAW,CAArB,CAAT,CACA,OAASpO,KAAK8O,GAAL,CAAUJ,MAAML,EAAN,CAAW,CAArB,CAAT,CAEA,UAAYK,MAAMK,KAAlB,CAEA,GAAKA,QAAU,KAAf,CAAuB,CAEtB,KAAKZ,EAAL,CAAUa,GAAKC,EAAL,CAAUC,EAAV,CAAeC,GAAKC,EAAL,CAAUC,EAAnC,CACA,KAAKjB,EAAL,CAAUe,GAAKC,EAAL,CAAUF,EAAV,CAAeF,GAAKC,EAAL,CAAUI,EAAnC,CACA,KAAKhB,EAAL,CAAUc,GAAKF,EAAL,CAAUI,EAAV,CAAeL,GAAKI,EAAL,CAAUF,EAAnC,CACA,KAAKZ,EAAL,CAAUa,GAAKF,EAAL,CAAUC,EAAV,CAAeF,GAAKI,EAAL,CAAUC,EAAnC,CAEA,CAPD,QAOYN,QAAU,KAAf,CAAuB,CAE7B,KAAKZ,EAAL,CAAUa,GAAKC,EAAL,CAAUC,EAAV,CAAeC,GAAKC,EAAL,CAAUC,EAAnC,CACA,KAAKjB,EAAL,CAAUe,GAAKC,EAAL,CAAUF,EAAV,CAAeF,GAAKC,EAAL,CAAUI,EAAnC,CACA,KAAKhB,EAAL,CAAUc,GAAKF,EAAL,CAAUI,EAAV,CAAeL,GAAKI,EAAL,CAAUF,EAAnC,CACA,KAAKZ,EAAL,CAAUa,GAAKF,EAAL,CAAUC,EAAV,CAAeF,GAAKI,EAAL,CAAUC,EAAnC,CAEA,CAPM,QAOKN,QAAU,KAAf,CAAuB,CAE7B,KAAKZ,EAAL,CAAUa,GAAKC,EAAL,CAAUC,EAAV,CAAeC,GAAKC,EAAL,CAAUC,EAAnC,CACA,KAAKjB,EAAL,CAAUe,GAAKC,EAAL,CAAUF,EAAV,CAAeF,GAAKC,EAAL,CAAUI,EAAnC,CACA,KAAKhB,EAAL,CAAUc,GAAKF,EAAL,CAAUI,EAAV,CAAeL,GAAKI,EAAL,CAAUF,EAAnC,CACA,KAAKZ,EAAL,CAAUa,GAAKF,EAAL,CAAUC,EAAV,CAAeF,GAAKI,EAAL,CAAUC,EAAnC,CAEA,CAPM,QAOKN,QAAU,KAAf,CAAuB,CAE7B,KAAKZ,EAAL,CAAUa,GAAKC,EAAL,CAAUC,EAAV,CAAeC,GAAKC,EAAL,CAAUC,EAAnC,CACA,KAAKjB,EAAL,CAAUe,GAAKC,EAAL,CAAUF,EAAV,CAAeF,GAAKC,EAAL,CAAUI,EAAnC,CACA,KAAKhB,EAAL,CAAUc,GAAKF,EAAL,CAAUI,EAAV,CAAeL,GAAKI,EAAL,CAAUF,EAAnC,CACA,KAAKZ,EAAL,CAAUa,GAAKF,EAAL,CAAUC,EAAV,CAAeF,GAAKI,EAAL,CAAUC,EAAnC,CAEA,CAPM,QAOKN,QAAU,KAAf,CAAuB,CAE7B,KAAKZ,EAAL,CAAUa,GAAKC,EAAL,CAAUC,EAAV,CAAeC,GAAKC,EAAL,CAAUC,EAAnC,CACA,KAAKjB,EAAL,CAAUe,GAAKC,EAAL,CAAUF,EAAV,CAAeF,GAAKC,EAAL,CAAUI,EAAnC,CACA,KAAKhB,EAAL,CAAUc,GAAKF,EAAL,CAAUI,EAAV,CAAeL,GAAKI,EAAL,CAAUF,EAAnC,CACA,KAAKZ,EAAL,CAAUa,GAAKF,EAAL,CAAUC,EAAV,CAAeF,GAAKI,EAAL,CAAUC,EAAnC,CAEA,CAPM,QAOKN,QAAU,KAAf,CAAuB,CAE7B,KAAKZ,EAAL,CAAUa,GAAKC,EAAL,CAAUC,EAAV,CAAeC,GAAKC,EAAL,CAAUC,EAAnC,CACA,KAAKjB,EAAL,CAAUe,GAAKC,EAAL,CAAUF,EAAV,CAAeF,GAAKC,EAAL,CAAUI,EAAnC,CACA,KAAKhB,EAAL,CAAUc,GAAKF,EAAL,CAAUI,EAAV,CAAeL,GAAKI,EAAL,CAAUF,EAAnC,CACA,KAAKZ,EAAL,CAAUa,GAAKF,EAAL,CAAUC,EAAV,CAAeF,GAAKI,EAAL,CAAUC,EAAnC,CAEA,CAED,GAAKV,SAAW,KAAhB,CAAwB,KAAKJ,gBAAL,GAExB,WAAA,CAEA,CA7J2B,CA+J5Be,iBAAkB,0BAAWC,IAAX,CAAiBC,KAAjB,CAAyB;;CAM1C,cAAgBA,MAAQ,CAAxB,CAA2BjF,EAAIvK,KAAK8O,GAAL,CAAUW,SAAV,CAA/B,CAEA,KAAKtB,EAAL,CAAUoB,KAAKpP,CAAL,CAASoK,CAAnB,CACA,KAAK6D,EAAL,CAAUmB,KAAKvB,CAAL,CAASzD,CAAnB,CACA,KAAK8D,EAAL,CAAUkB,KAAKtB,CAAL,CAAS1D,CAAnB,CACA,KAAK+D,EAAL,CAAUtO,KAAK6O,GAAL,CAAUY,SAAV,CAAV,CAEA,KAAKlB,gBAAL,GAEA,WAAA,CAEA,CAhL2B,CAkL5BmB,sBAAuB,+BAAWzE,CAAX,CAAe;;CAMrC,OAASA,EAAE0E,QAAX,CAECC,IAAMC,GAAI,CAAJ,CAFP,CAEgBC,IAAMD,GAAI,CAAJ,CAFtB,CAE+BE,IAAMF,GAAI,CAAJ,CAFrC,CAGCG,IAAMH,GAAI,CAAJ,CAHP,CAGgBI,IAAMJ,GAAI,CAAJ,CAHtB,CAG+BK,IAAML,GAAI,CAAJ,CAHrC,CAICM,IAAMN,GAAI,CAAJ,CAJP,CAIgBO,IAAMP,GAAI,CAAJ,CAJtB,CAI+BQ,IAAMR,GAAI,EAAJ,CAJrC,CAMCS,MAAQV,IAAMK,GAAN,CAAYI,GANrB,CAOC9F,CAPD,CASA,GAAK+F,MAAQ,CAAb,CAAiB,CAEhB/F,EAAI,IAAMvK,KAAKkM,IAAL,CAAWoE,MAAQ,GAAnB,CAAV,CAEA,KAAKhC,EAAL,CAAU,KAAO/D,CAAjB,CACA,KAAK4D,EAAL,CAAU,CAAEiC,IAAMF,GAAR,EAAgB3F,CAA1B,CACA,KAAK6D,EAAL,CAAU,CAAE2B,IAAMI,GAAR,EAAgB5F,CAA1B,CACA,KAAK8D,EAAL,CAAU,CAAE2B,IAAMF,GAAR,EAAgBvF,CAA1B,CAEA,CATD,QASYqF,IAAMK,GAAN,EAAaL,IAAMS,GAAxB,CAA8B,CAEpC9F,EAAI,IAAMvK,KAAKkM,IAAL,CAAW,IAAM0D,GAAN,CAAYK,GAAZ,CAAkBI,GAA7B,CAAV,CAEA,KAAK/B,EAAL,CAAU,CAAE8B,IAAMF,GAAR,EAAgB3F,CAA1B,CACA,KAAK4D,EAAL,CAAU,KAAO5D,CAAjB,CACA,KAAK6D,EAAL,CAAU,CAAE0B,IAAME,GAAR,EAAgBzF,CAA1B,CACA,KAAK8D,EAAL,CAAU,CAAE0B,IAAMI,GAAR,EAAgB5F,CAA1B,CAEA,CATM,QASK0F,IAAMI,GAAX,CAAiB,CAEvB9F,EAAI,IAAMvK,KAAKkM,IAAL,CAAW,IAAM+D,GAAN,CAAYL,GAAZ,CAAkBS,GAA7B,CAAV,CAEA,KAAK/B,EAAL,CAAU,CAAEyB,IAAMI,GAAR,EAAgB5F,CAA1B,CACA,KAAK4D,EAAL,CAAU,CAAE2B,IAAME,GAAR,EAAgBzF,CAA1B,CACA,KAAK6D,EAAL,CAAU,KAAO7D,CAAjB,CACA,KAAK8D,EAAL,CAAU,CAAE6B,IAAME,GAAR,EAAgB7F,CAA1B,CAEA,CATM,IASA,CAENA,EAAI,IAAMvK,KAAKkM,IAAL,CAAW,IAAMmE,GAAN,CAAYT,GAAZ,CAAkBK,GAA7B,CAAV,CAEA,KAAK3B,EAAL,CAAU,CAAE0B,IAAMF,GAAR,EAAgBvF,CAA1B,CACA,KAAK4D,EAAL,CAAU,CAAE4B,IAAMI,GAAR,EAAgB5F,CAA1B,CACA,KAAK6D,EAAL,CAAU,CAAE8B,IAAME,GAAR,EAAgB7F,CAA1B,CACA,KAAK8D,EAAL,CAAU,KAAO9D,CAAjB,CAEA,CAED,KAAKgE,gBAAL,GAEA,WAAA,CAEA,CA3O2B,CA6O5BgC,mBAAoB,UAAY;;CAM/B,MAAA,CAAQnH,CAAR,CAEA,QAAU,QAAV,CAEA,gBAAkBoH,KAAX,CAAkBC,GAAlB,CAAwB,CAE9B,GAAKC,KAAO3Q,SAAZ,CAAwB2Q,GAAK,UAAUC,OAAV,EAAL,CAExBvH,EAAIoH,MAAMI,GAAN,CAAWH,GAAX,EAAmB,CAAvB,CAEA,GAAKrH,EAAIyH,GAAT,CAAe,CAEdzH,EAAI,CAAJ,CAEA,GAAKpJ,KAAK8Q,GAAL,CAAUN,MAAMrQ,CAAhB,EAAsBH,KAAK8Q,GAAL,CAAUN,MAAMvC,CAAhB,CAA3B,CAAiD,CAEhDyC,GAAGnH,GAAH,CAAQ,CAAEiH,MAAMxC,CAAhB,CAAmBwC,MAAMrQ,CAAzB,CAA4B,CAA5B,EAEA,CAJD,IAIO,CAENuQ,GAAGnH,GAAH,CAAQ,CAAR,CAAW,CAAEiH,MAAMvC,CAAnB,CAAsBuC,MAAMxC,CAA5B,EAEA,CAED,CAdD,IAcO,CAEN0C,GAAGK,YAAH,CAAiBP,KAAjB,CAAwBC,GAAxB,EAEA,CAED,KAAKtC,EAAL,CAAUuC,GAAGvQ,CAAb,CACA,KAAKiO,EAAL,CAAUsC,GAAG1C,CAAb,CACA,KAAKK,EAAL,CAAUqC,GAAGzC,CAAb,CACA,KAAKK,EAAL,CAAUlF,CAAV,CAEA,YAAY4H,SAAL,EAAP,CAEA,CAjCD,CAmCA,CA7CmB,EA7OQ,CA4R5BC,QAAS,kBAAY,CAEpB,YAAYC,SAAL,GAAiBF,SAAjB,EAAP,CAEA,CAhS2B,CAkS5BE,UAAW,oBAAY,CAEtB,KAAK/C,EAAL,EAAW,CAAE,CAAb,CACA,KAAKC,EAAL,EAAW,CAAE,CAAb,CACA,KAAKC,EAAL,EAAW,CAAE,CAAb,CAEA,KAAKE,gBAAL,GAEA,WAAA,CAEA,CA5S2B,CA8S5BqC,IAAK,aAAWO,CAAX,CAAe,CAEnB,YAAYhD,EAAL,CAAUgD,EAAEhD,EAAZ,CAAiB,KAAKC,EAAL,CAAU+C,EAAE/C,EAA7B,CAAkC,KAAKC,EAAL,CAAU8C,EAAE9C,EAA9C,CAAmD,KAAKC,EAAL,CAAU6C,EAAE7C,EAAtE,CAEA,CAlT2B,CAoT5B8C,SAAU,mBAAY,CAErB,YAAYjD,EAAL,CAAU,KAAKA,EAAf,CAAoB,KAAKC,EAAL,CAAU,KAAKA,EAAnC,CAAwC,KAAKC,EAAL,CAAU,KAAKA,EAAvD,CAA4D,KAAKC,EAAL,CAAU,KAAKA,EAAlF,CAEA,CAxT2B,CA0T5BtN,OAAQ,iBAAY,CAEnB,YAAYkL,IAAL,CAAW,KAAKiC,EAAL,CAAU,KAAKA,EAAf,CAAoB,KAAKC,EAAL,CAAU,KAAKA,EAAnC,CAAwC,KAAKC,EAAL,CAAU,KAAKA,EAAvD,CAA4D,KAAKC,EAAL,CAAU,KAAKA,EAAtF,CAAP,CAEA,CA9T2B,CAgU5B0C,UAAW,oBAAY,CAEtB,MAAQ,KAAKhQ,MAAL,EAAR,CAEA,GAAKwJ,IAAM,CAAX,CAAe,CAEd,KAAK2D,EAAL,CAAU,CAAV,CACA,KAAKC,EAAL,CAAU,CAAV,CACA,KAAKC,EAAL,CAAU,CAAV,CACA,KAAKC,EAAL,CAAU,CAAV,CAEA,CAPD,IAOO,CAEN9D,EAAI,EAAIA,CAAR,CAEA,KAAK2D,EAAL,CAAU,KAAKA,EAAL,CAAU3D,CAApB,CACA,KAAK4D,EAAL,CAAU,KAAKA,EAAL,CAAU5D,CAApB,CACA,KAAK6D,EAAL,CAAU,KAAKA,EAAL,CAAU7D,CAApB,CACA,KAAK8D,EAAL,CAAU,KAAKA,EAAL,CAAU9D,CAApB,CAEA,CAED,KAAK+D,gBAAL,GAEA,WAAA,CAEA,CA1V2B,CA4V5BlB,SAAU,kBAAWjD,CAAX,CAAcD,CAAd,CAAkB,CAE3B,GAAKA,IAAMpK,SAAX,CAAuB,CAEtBgL,QAAQC,IAAR,CAAc,wGAAd,EACA,YAAYqG,mBAAL,CAA0BjH,CAA1B,CAA6BD,CAA7B,CAAP,CAEA,CAED,YAAYkH,mBAAL,CAA0B,IAA1B,CAAgCjH,CAAhC,CAAP,CAEA,CAvW2B,CAyW5BkH,YAAa,qBAAWlH,CAAX,CAAe,CAE3B,YAAYiH,mBAAL,CAA0BjH,CAA1B,CAA6B,IAA7B,CAAP,CAEA,CA7W2B,CA+W5BiH,oBAAqB,6BAAWE,CAAX,CAAcjI,CAAd,CAAkB;CAItC,QAAUiI,EAAEpD,EAAZ,CAAgBqD,IAAMD,EAAEnD,EAAxB,CAA4BqD,IAAMF,EAAElD,EAApC,CAAwCqD,IAAMH,EAAEjD,EAAhD,CACA,QAAUhF,EAAE6E,EAAZ,CAAgBwD,IAAMrI,EAAE8E,EAAxB,CAA4BwD,IAAMtI,EAAE+E,EAApC,CAAwCwD,IAAMvI,EAAEgF,EAAhD,CAEA,KAAKH,EAAL,CAAU2D,IAAMD,GAAN,CAAYH,IAAMK,GAAlB,CAAwBP,IAAMI,GAA9B,CAAoCH,IAAME,GAApD,CACA,KAAKvD,EAAL,CAAUoD,IAAMK,GAAN,CAAYH,IAAMC,GAAlB,CAAwBF,IAAMM,GAA9B,CAAoCD,IAAMF,GAApD,CACA,KAAKvD,EAAL,CAAUoD,IAAMI,GAAN,CAAYH,IAAME,GAAlB,CAAwBE,IAAMH,GAA9B,CAAoCH,IAAMO,GAApD,CACA,KAAKzD,EAAL,CAAUoD,IAAMG,GAAN,CAAYC,IAAMC,GAAlB,CAAwBP,IAAMG,GAA9B,CAAoCF,IAAMG,GAApD,CAEA,KAAKrD,gBAAL,GAEA,WAAA,CAEA,CA/X2B,CAiY5ByD,MAAO,eAAWC,EAAX,CAAe5H,CAAf,CAAmB,CAEzB,GAAKA,IAAM,CAAX,CAAe,WAAA,CACf,GAAKA,IAAM,CAAX,CAAe,YAAYV,IAAL,CAAWsI,EAAX,CAAP,CAEf,MAAQ,KAAK9D,EAAb,CAAiBH,EAAI,KAAKI,EAA1B,CAA8BH,EAAI,KAAKI,EAAvC,CAA2CH,EAAI,KAAKI,EAApD;CAIA,iBAAmBJ,EAAI+D,GAAG3D,EAAP,CAAYnO,EAAI8R,GAAG9D,EAAnB,CAAwBH,EAAIiE,GAAG7D,EAA/B,CAAoCH,EAAIgE,GAAG5D,EAA9D,CAEA,GAAK6D,aAAe,CAApB,CAAwB,CAEvB,KAAK5D,EAAL,CAAU,CAAE2D,GAAG3D,EAAf,CACA,KAAKH,EAAL,CAAU,CAAE8D,GAAG9D,EAAf,CACA,KAAKC,EAAL,CAAU,CAAE6D,GAAG7D,EAAf,CACA,KAAKC,EAAL,CAAU,CAAE4D,GAAG5D,EAAf,CAEA6D,aAAe,CAAEA,YAAjB,CAEA,CATD,IASO,CAEN,KAAKvI,IAAL,CAAWsI,EAAX,EAEA,CAED,GAAKC,cAAgB,GAArB,CAA2B,CAE1B,KAAK5D,EAAL,CAAUJ,CAAV,CACA,KAAKC,EAAL,CAAUhO,CAAV,CACA,KAAKiO,EAAL,CAAUJ,CAAV,CACA,KAAKK,EAAL,CAAUJ,CAAV,CAEA,WAAA,CAEA,CAED,iBAAmBjO,KAAKkM,IAAL,CAAW,IAAMgG,aAAeA,YAAhC,CAAnB,CAEA,GAAKlS,KAAK8Q,GAAL,CAAUqB,YAAV,EAA2B,KAAhC,CAAwC,CAEvC,KAAK7D,EAAL,CAAU,KAAQJ,EAAI,KAAKI,EAAjB,CAAV,CACA,KAAKH,EAAL,CAAU,KAAQhO,EAAI,KAAKgO,EAAjB,CAAV,CACA,KAAKC,EAAL,CAAU,KAAQJ,EAAI,KAAKI,EAAjB,CAAV,CACA,KAAKC,EAAL,CAAU,KAAQJ,EAAI,KAAKI,EAAjB,CAAV,CAEA,WAAA,CAEA,CAED,cAAgBrO,KAAKoS,KAAL,CAAYD,YAAZ,CAA0BD,YAA1B,CAAhB,CACA,WAAalS,KAAK8O,GAAL,CAAU,CAAE,EAAIzE,CAAN,EAAYgI,SAAtB,EAAoCF,YAAjD,CACAG,OAAStS,KAAK8O,GAAL,CAAUzE,EAAIgI,SAAd,EAA4BF,YADrC,CAGA,KAAK7D,EAAL,CAAYJ,EAAIqE,MAAJ,CAAa,KAAKjE,EAAL,CAAUgE,MAAnC,CACA,KAAKnE,EAAL,CAAYhO,EAAIoS,MAAJ,CAAa,KAAKpE,EAAL,CAAUmE,MAAnC,CACA,KAAKlE,EAAL,CAAYJ,EAAIuE,MAAJ,CAAa,KAAKnE,EAAL,CAAUkE,MAAnC,CACA,KAAKjE,EAAL,CAAYJ,EAAIsE,MAAJ,CAAa,KAAKlE,EAAL,CAAUiE,MAAnC,CAEA,KAAK/D,gBAAL,GAEA,WAAA,CAEA,CAhc2B,CAkc5Bd,OAAQ,gBAAWe,UAAX,CAAwB,CAE/B,kBAAoBL,EAAX,GAAkB,KAAKA,EAAzB,EAAmCK,WAAWJ,EAAX,GAAkB,KAAKA,EAA1D,EAAoEI,WAAWH,EAAX,GAAkB,KAAKA,EAA3F,EAAqGG,WAAWF,EAAX,GAAkB,KAAKA,EAAnI,CAEA,CAtc2B,CAwc5BX,UAAW,mBAAWC,KAAX,CAAkBC,MAAlB,CAA2B,CAErC,GAAKA,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5B,KAAKM,EAAL,CAAUP,MAAOC,MAAP,CAAV,CACA,KAAKO,EAAL,CAAUR,MAAOC,OAAS,CAAhB,CAAV,CACA,KAAKQ,EAAL,CAAUT,MAAOC,OAAS,CAAhB,CAAV,CACA,KAAKS,EAAL,CAAUV,MAAOC,OAAS,CAAhB,CAAV,CAEA,KAAKU,gBAAL,GAEA,WAAA,CAEA,CArd2B,CAud5BT,QAAS,iBAAWF,KAAX,CAAkBC,MAAlB,CAA2B,CAEnC,GAAKD,QAAU7N,SAAf,CAA2B6N,MAAQ,EAAR,CAC3B,GAAKC,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5BD,MAAOC,MAAP,EAAkB,KAAKM,EAAvB,CACAP,MAAOC,OAAS,CAAhB,EAAsB,KAAKO,EAA3B,CACAR,MAAOC,OAAS,CAAhB,EAAsB,KAAKQ,EAA3B,CACAT,MAAOC,OAAS,CAAhB,EAAsB,KAAKS,EAA3B,CAEA,YAAA,CAEA,CAne2B,CAqe5BkE,SAAU,kBAAWC,QAAX,CAAsB,CAE/B,KAAKlE,gBAAL,CAAwBkE,QAAxB,CAEA,WAAA,CAEA,CA3e2B,CA6e5BlE,iBAAkB,2BAAY,EA7eF,CAA7B,CAifAhO,OAAOK,MAAP,CAAehB,MAAMmO,UAArB,CAAiC,CAEhCiE,MAAO,eAAUU,EAAV,CAAcT,EAAd,CAAkBU,EAAlB,CAAsBtI,CAAtB,CAA0B,CAEhC,UAAUV,IAAH,CAAS+I,EAAT,EAAcV,KAAd,CAAqBC,EAArB,CAAyB5H,CAAzB,CAAP,CAEA,CAN+B,CAQhCuI,UAAW,mBACTC,GADS,CACJC,SADI,CACOC,IADP,CACaC,UADb,CACyBC,IADzB,CAC+BC,UAD/B,CAC2C7I,CAD3C,CAC+C;CAIzD,OAAS0I,KAAMC,WAAa,CAAnB,CAAT,CACCG,GAAKJ,KAAMC,WAAa,CAAnB,CADN,CAECI,GAAKL,KAAMC,WAAa,CAAnB,CAFN,CAGCK,GAAKN,KAAMC,WAAa,CAAnB,CAHN,CAKCM,GAAKL,KAAMC,WAAa,CAAnB,CALN,CAMCK,GAAKN,KAAMC,WAAa,CAAnB,CANN,CAOCM,GAAKP,KAAMC,WAAa,CAAnB,CAPN,CAQCO,GAAKR,KAAMC,WAAa,CAAnB,CARN,CAUA,GAAKG,KAAOI,EAAP,EAAaC,KAAOJ,EAApB,EAA0BH,KAAOI,EAAjC,EAAuCH,KAAOI,EAAnD,CAAwD,CAEvD,MAAQ,EAAInJ,CAAZ,CAECwE,IAAM6E,GAAKJ,EAAL,CAAUH,GAAKI,EAAf,CAAoBH,GAAKI,EAAzB,CAA8BH,GAAKI,EAF1C,CAICE,IAAQ9E,KAAO,CAAP,CAAW,CAAX,CAAe,CAAE,CAJ1B,CAKC+E,OAAS,EAAI/E,IAAMA,GALpB;CAQA,GAAK+E,OAAS/T,OAAOC,OAArB,CAA+B,CAE9B,QAAUE,KAAKkM,IAAL,CAAW0H,MAAX,CAAV,CACCC,IAAM7T,KAAKoS,KAAL,CAAYtD,GAAZ,CAAiBD,IAAM8E,GAAvB,CADP,CAGApJ,EAAIvK,KAAK8O,GAAL,CAAUvE,EAAIsJ,GAAd,EAAsB/E,GAA1B,CACAzE,EAAIrK,KAAK8O,GAAL,CAAUzE,EAAIwJ,GAAd,EAAsB/E,GAA1B,CAEA,CAED,SAAWzE,EAAIsJ,GAAf,CAEAD,GAAKA,GAAKnJ,CAAL,CAAS+I,GAAKQ,IAAnB,CACAX,GAAKA,GAAK5I,CAAL,CAASgJ,GAAKO,IAAnB,CACAV,GAAKA,GAAK7I,CAAL,CAASiJ,GAAKM,IAAnB,CACAT,GAAKA,GAAK9I,CAAL,CAASkJ,GAAKK,IAAnB;CAGA,GAAKvJ,IAAM,EAAIF,CAAf,CAAmB,CAElB,MAAQ,EAAIrK,KAAKkM,IAAL,CAAWwH,GAAKA,EAAL,CAAUP,GAAKA,EAAf,CAAoBC,GAAKA,EAAzB,CAA8BC,GAAKA,EAA9C,CAAZ,CAEAK,IAAMK,CAAN,CACAZ,IAAMY,CAAN,CACAX,IAAMW,CAAN,CACAV,IAAMU,CAAN,CAEA,CAED,CAEDlB,IAAKC,SAAL,EAAmBY,EAAnB,CACAb,IAAKC,UAAY,CAAjB,EAAuBK,EAAvB,CACAN,IAAKC,UAAY,CAAjB,EAAuBM,EAAvB,CACAP,IAAKC,UAAY,CAAjB,EAAuBO,EAAvB,CAEA,CArE+B,CAAjC;;;;;;IAkFAzT,MAAMoU,OAAN,CAAgB,SAAW7T,CAAX,CAAc6N,CAAd,CAAkB,CAEjC,KAAK7N,CAAL,CAASA,GAAK,CAAd,CACA,KAAK6N,CAAL,CAASA,GAAK,CAAd,CAEA,CALD,CAOApO,MAAMoU,OAAN,CAAc3T,SAAd,CAA0B,CAEzBoJ,YAAa7J,MAAMoU,OAFM,CAIzB,SAAA,EAAY,CAEX,YAAY7T,CAAZ,CAEA,CARwB,CAUzB,SAAA,CAAWuJ,KAAX,CAAmB,CAElB,KAAKvJ,CAAL,CAASuJ,KAAT,CAEA,CAdwB,CAgBzB,UAAA,EAAa,CAEZ,YAAYsE,CAAZ,CAEA,CApBwB,CAsBzB,UAAA,CAAYtE,KAAZ,CAAoB,CAEnB,KAAKsE,CAAL,CAAStE,KAAT,CAEA,CA1BwB;CA8BzBH,IAAK,aAAWpJ,CAAX,CAAc6N,CAAd,CAAkB,CAEtB,KAAK7N,CAAL,CAASA,CAAT,CACA,KAAK6N,CAAL,CAASA,CAAT,CAEA,WAAA,CAEA,CArCwB,CAuCzBlE,UAAW,mBAAWC,MAAX,CAAoB,CAE9B,KAAK5J,CAAL,CAAS4J,MAAT,CACA,KAAKiE,CAAL,CAASjE,MAAT,CAEA,WAAA,CAEA,CA9CwB,CAgDzBkK,KAAM,cAAW9T,CAAX,CAAe,CAEpB,KAAKA,CAAL,CAASA,CAAT,CAEA,WAAA,CAEA,CAtDwB,CAwDzB+T,KAAM,cAAWlG,CAAX,CAAe,CAEpB,KAAKA,CAAL,CAASA,CAAT,CAEA,WAAA,CAEA,CA9DwB,CAgEzBmG,aAAc,sBAAWrT,KAAX,CAAkB4I,KAAlB,CAA0B,CAEvC,OAAS5I,KAAT,EAEC,MAAA,CAAQ,KAAKX,CAAL,CAASuJ,KAAT,CAAgB,MACxB,MAAA,CAAQ,KAAKsE,CAAL,CAAStE,KAAT,CAAgB,MACxB,QAAS,eAAM,CAAW,0BAA4B5I,KAAvC,CAAN,CAJV,CAQA,CA1EwB,CA4EzBsT,aAAc,sBAAWtT,KAAX,CAAmB,CAEhC,OAASA,KAAT,EAEC,MAAA,CAAQ,YAAYX,CAAZ,CACR,MAAA,CAAQ,YAAY6N,CAAZ,CACR,QAAS,eAAM,CAAW,0BAA4BlN,KAAvC,CAAN,CAJV,CAQA,CAtFwB,CAwFzB6K,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,CAAsB,KAAKtJ,CAA3B,CAA8B,KAAK6N,CAAnC,CAAP,CAEA,CA5FwB,CA8FzBrE,KAAM,cAAWwH,CAAX,CAAe,CAEpB,KAAKhR,CAAL,CAASgR,EAAEhR,CAAX,CACA,KAAK6N,CAAL,CAASmD,EAAEnD,CAAX,CAEA,WAAA,CAEA,CArGwB,CAuGzBhB,IAAK,aAAWmE,CAAX,CAAcjD,CAAd,CAAkB,CAEtB,GAAKA,IAAMnO,SAAX,CAAuB,CAEtBgL,QAAQC,IAAR,CAAc,uFAAd,EACA,YAAYqJ,UAAL,CAAiBlD,CAAjB,CAAoBjD,CAApB,CAAP,CAEA,CAED,KAAK/N,CAAL,EAAUgR,EAAEhR,CAAZ,CACA,KAAK6N,CAAL,EAAUmD,EAAEnD,CAAZ,CAEA,WAAA,CAEA,CArHwB,CAuHzBZ,UAAW,mBAAW7C,CAAX,CAAe,CAEzB,KAAKpK,CAAL,EAAUoK,CAAV,CACA,KAAKyD,CAAL,EAAUzD,CAAV,CAEA,WAAA,CAEA,CA9HwB,CAgIzB8J,WAAY,oBAAW9C,CAAX,CAAcjI,CAAd,CAAkB,CAE7B,KAAKnJ,CAAL,CAASoR,EAAEpR,CAAF,CAAMmJ,EAAEnJ,CAAjB,CACA,KAAK6N,CAAL,CAASuD,EAAEvD,CAAF,CAAM1E,EAAE0E,CAAjB,CAEA,WAAA,CAEA,CAvIwB,CAyIzBsG,gBAAiB,yBAAWnD,CAAX,CAAc5G,CAAd,CAAkB,CAElC,KAAKpK,CAAL,EAAUgR,EAAEhR,CAAF,CAAMoK,CAAhB,CACA,KAAKyD,CAAL,EAAUmD,EAAEnD,CAAF,CAAMzD,CAAhB,CAEA,WAAA,CAEA,CAhJwB,CAkJzBgK,IAAK,aAAWpD,CAAX,CAAcjD,CAAd,CAAkB,CAEtB,GAAKA,IAAMnO,SAAX,CAAuB,CAEtBgL,QAAQC,IAAR,CAAc,uFAAd,EACA,YAAYwJ,UAAL,CAAiBrD,CAAjB,CAAoBjD,CAApB,CAAP,CAEA,CAED,KAAK/N,CAAL,EAAUgR,EAAEhR,CAAZ,CACA,KAAK6N,CAAL,EAAUmD,EAAEnD,CAAZ,CAEA,WAAA,CAEA,CAhKwB,CAkKzByG,UAAW,mBAAWlK,CAAX,CAAe,CAEzB,KAAKpK,CAAL,EAAUoK,CAAV,CACA,KAAKyD,CAAL,EAAUzD,CAAV,CAEA,WAAA,CAEA,CAzKwB,CA2KzBiK,WAAY,oBAAWjD,CAAX,CAAcjI,CAAd,CAAkB,CAE7B,KAAKnJ,CAAL,CAASoR,EAAEpR,CAAF,CAAMmJ,EAAEnJ,CAAjB,CACA,KAAK6N,CAAL,CAASuD,EAAEvD,CAAF,CAAM1E,EAAE0E,CAAjB,CAEA,WAAA,CAEA,CAlLwB,CAoLzBX,SAAU,kBAAW8D,CAAX,CAAe,CAExB,KAAKhR,CAAL,EAAUgR,EAAEhR,CAAZ,CACA,KAAK6N,CAAL,EAAUmD,EAAEnD,CAAZ,CAEA,WAAA,CAEA,CA3LwB,CA6LzBV,eAAgB,wBAAWvD,MAAX,CAAoB,CAEnC,GAAK2K,SAAU3K,MAAV,CAAL,CAA0B,CAEzB,KAAK5J,CAAL,EAAU4J,MAAV,CACA,KAAKiE,CAAL,EAAUjE,MAAV,CAEA,CALD,IAKO,CAEN,KAAK5J,CAAL,CAAS,CAAT,CACA,KAAK6N,CAAL,CAAS,CAAT,CAEA,CAED,WAAA,CAEA,CA7MwB,CA+MzB2G,OAAQ,gBAAWxD,CAAX,CAAe,CAEtB,KAAKhR,CAAL,EAAUgR,EAAEhR,CAAZ,CACA,KAAK6N,CAAL,EAAUmD,EAAEnD,CAAZ,CAEA,WAAA,CAEA,CAtNwB,CAwNzB4G,aAAc,sBAAW7K,MAAX,CAAoB,CAEjC,YAAYuD,cAAL,CAAqB,EAAIvD,MAAzB,CAAP,CAEA,CA5NwB,CA8NzBsB,IAAK,aAAW8F,CAAX,CAAe,CAEnB,KAAKhR,CAAL,CAASH,KAAKqL,GAAL,CAAU,KAAKlL,CAAf,CAAkBgR,EAAEhR,CAApB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKqL,GAAL,CAAU,KAAK2C,CAAf,CAAkBmD,EAAEnD,CAApB,CAAT,CAEA,WAAA,CAEA,CArOwB,CAuOzBxB,IAAK,aAAW2E,CAAX,CAAe,CAEnB,KAAKhR,CAAL,CAASH,KAAKwM,GAAL,CAAU,KAAKrM,CAAf,CAAkBgR,EAAEhR,CAApB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKwM,GAAL,CAAU,KAAKwB,CAAf,CAAkBmD,EAAEnD,CAApB,CAAT,CAEA,WAAA,CAEA,CA9OwB,CAgPzBtD,MAAO,eAAWW,GAAX,CAAgBmB,GAAhB,CAAsB;CAI5B,KAAKrM,CAAL,CAASH,KAAKwM,GAAL,CAAUnB,IAAIlL,CAAd,CAAiBH,KAAKqL,GAAL,CAAUmB,IAAIrM,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKwM,GAAL,CAAUnB,IAAI2C,CAAd,CAAiBhO,KAAKqL,GAAL,CAAUmB,IAAIwB,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CAEA,WAAA,CAEA,CAzPwB,CA2PzB6G,YAAa,UAAY,CAExB,OAAA,CAASrI,GAAT,CAEA,2BAAO,CAAsBsI,MAAtB,CAA8BC,MAA9B,CAAuC,CAE7C,GAAK1J,MAAQtL,SAAb,CAAyB,CAExBsL,IAAM,UAAU2I,OAAV,EAAN,CACAxH,IAAM,UAAUwH,OAAV,EAAN,CAEA,CAED3I,IAAI9B,GAAJ,CAASuL,MAAT,CAAiBA,MAAjB,EACAtI,IAAIjD,GAAJ,CAASwL,MAAT,CAAiBA,MAAjB,EAEA,YAAYrK,KAAL,CAAYW,GAAZ,CAAiBmB,GAAjB,CAAP,CAEA,CAdD,CAgBA,CApBY,EA3PY,CAiRzBwI,YAAa,qBAAW3J,GAAX,CAAgBmB,GAAhB,CAAsB,CAElC,WAAa,KAAKxL,MAAL,EAAb,CAEA,YAAYsM,cAAL,CAAqBtN,KAAKwM,GAAL,CAAUnB,GAAV,CAAerL,KAAKqL,GAAL,CAAUmB,GAAV,CAAexL,MAAf,CAAf,EAA2CA,MAAhE,CAAP,CAEA,CAvRwB,CAyRzBiJ,MAAO,gBAAY,CAElB,KAAK9J,CAAL,CAASH,KAAKiK,KAAL,CAAY,KAAK9J,CAAjB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKiK,KAAL,CAAY,KAAK+D,CAAjB,CAAT,CAEA,WAAA,CAEA,CAhSwB,CAkSzBiH,KAAM,eAAY,CAEjB,KAAK9U,CAAL,CAASH,KAAKiV,IAAL,CAAW,KAAK9U,CAAhB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKiV,IAAL,CAAW,KAAKjH,CAAhB,CAAT,CAEA,WAAA,CAEA,CAzSwB,CA2SzBkH,MAAO,gBAAY,CAElB,KAAK/U,CAAL,CAASH,KAAKkV,KAAL,CAAY,KAAK/U,CAAjB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKkV,KAAL,CAAY,KAAKlH,CAAjB,CAAT,CAEA,WAAA,CAEA,CAlTwB,CAoTzBmH,YAAa,sBAAY,CAExB,KAAKhV,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiBH,KAAKiV,IAAL,CAAW,KAAK9U,CAAhB,CAAjB,CAAuCH,KAAKiK,KAAL,CAAY,KAAK9J,CAAjB,CAAhD,CACA,KAAK6N,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiBhO,KAAKiV,IAAL,CAAW,KAAKjH,CAAhB,CAAjB,CAAuChO,KAAKiK,KAAL,CAAY,KAAK+D,CAAjB,CAAhD,CAEA,WAAA,CAEA,CA3TwB,CA6TzBoH,OAAQ,iBAAY,CAEnB,KAAKjV,CAAL,CAAS,CAAE,KAAKA,CAAhB,CACA,KAAK6N,CAAL,CAAS,CAAE,KAAKA,CAAhB,CAEA,WAAA,CAEA,CApUwB,CAsUzB4C,IAAK,aAAWO,CAAX,CAAe,CAEnB,YAAYhR,CAAL,CAASgR,EAAEhR,CAAX,CAAe,KAAK6N,CAAL,CAASmD,EAAEnD,CAAjC,CAEA,CA1UwB,CA4UzBoD,SAAU,mBAAY,CAErB,YAAYjR,CAAL,CAAS,KAAKA,CAAd,CAAkB,KAAK6N,CAAL,CAAS,KAAKA,CAAvC,CAEA,CAhVwB,CAkVzBhN,OAAQ,iBAAY,CAEnB,YAAYkL,IAAL,CAAW,KAAK/L,CAAL,CAAS,KAAKA,CAAd,CAAkB,KAAK6N,CAAL,CAAS,KAAKA,CAA3C,CAAP,CAEA,CAtVwB,CAwVzBqH,gBAAiB,0BAAW,CAE3B,YAAYvE,GAAL,CAAU,KAAK3Q,CAAf,EAAqBH,KAAK8Q,GAAL,CAAU,KAAK9C,CAAf,CAA5B,CAEA,CA5VwB,CA8VzBgD,UAAW,oBAAY,CAEtB,YAAY4D,YAAL,CAAmB,KAAK5T,MAAL,EAAnB,CAAP,CAEA,CAlWwB,CAoWzBwO,MAAO,gBAAY;CAIlB,UAAYxP,KAAKoS,KAAL,CAAY,KAAKpE,CAAjB,CAAoB,KAAK7N,CAAzB,CAAZ,CAEA,GAAKqP,MAAQ,CAAb,CAAiBA,OAAS,EAAIxP,KAAKsV,EAAlB,CAEjB,YAAA,CAEA,CA9WwB,CAgXzBC,WAAY,oBAAWpE,CAAX,CAAe,CAE1B,YAAYjF,IAAL,CAAW,KAAKsJ,iBAAL,CAAwBrE,CAAxB,CAAX,CAAP,CAEA,CApXwB,CAsXzBqE,kBAAmB,2BAAWrE,CAAX,CAAe,CAEjC,OAAS,KAAKhR,CAAL,CAASgR,EAAEhR,CAApB,CAAuBsV,GAAK,KAAKzH,CAAL,CAASmD,EAAEnD,CAAvC,CACA,UAAY0H,EAAL,CAAUD,GAAKA,EAAtB,CAEA,CA3XwB,CA6XzBE,UAAW,mBAAW3U,MAAX,CAAoB,CAE9B,YAAYsM,cAAL,CAAqBtM,OAAS,KAAKA,MAAL,EAA9B,CAAP,CAEA,CAjYwB,CAmYzBuM,KAAM,cAAW4D,CAAX,CAAc3D,KAAd,CAAsB,CAE3B,KAAKrN,CAAL,EAAU,CAAEgR,EAAEhR,CAAF,CAAM,KAAKA,CAAb,EAAmBqN,KAA7B,CACA,KAAKQ,CAAL,EAAU,CAAEmD,EAAEnD,CAAF,CAAM,KAAKA,CAAb,EAAmBR,KAA7B,CAEA,WAAA,CAEA,CA1YwB,CA4YzBoI,YAAa,qBAAWlF,EAAX,CAAemF,EAAf,CAAmBrI,KAAnB,CAA2B,CAEvC,YAAYgH,UAAL,CAAiBqB,EAAjB,CAAqBnF,EAArB,EAA0BpD,cAA1B,CAA0CE,KAA1C,EAAkDR,GAAlD,CAAuD0D,EAAvD,CAAP,CAEA,CAhZwB,CAkZzBjD,OAAQ,gBAAW0D,CAAX,CAAe,CAEtB,SAAahR,CAAF,GAAQ,KAAKA,CAAf,EAAwBgR,EAAEnD,CAAF,GAAQ,KAAKA,CAA9C,CAEA,CAtZwB,CAwZzBL,UAAW,mBAAWC,KAAX,CAAkBC,MAAlB,CAA2B,CAErC,GAAKA,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5B,KAAK1N,CAAL,CAASyN,MAAOC,MAAP,CAAT,CACA,KAAKG,CAAL,CAASJ,MAAOC,OAAS,CAAhB,CAAT,CAEA,WAAA,CAEA,CAjawB,CAmazBC,QAAS,iBAAWF,KAAX,CAAkBC,MAAlB,CAA2B,CAEnC,GAAKD,QAAU7N,SAAf,CAA2B6N,MAAQ,EAAR,CAC3B,GAAKC,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5BD,MAAOC,MAAP,EAAkB,KAAK1N,CAAvB,CACAyN,MAAOC,OAAS,CAAhB,EAAsB,KAAKG,CAA3B,CAEA,YAAA,CAEA,CA7awB,CA+azB8H,cAAe,uBAAWC,SAAX,CAAsBjV,KAAtB,CAA6B+M,MAA7B,CAAsC,CAEpD,GAAKA,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5B/M,MAAQA,MAAQiV,UAAUC,QAAlB,CAA6BnI,MAArC,CAEA,KAAK1N,CAAL,CAAS4V,UAAUnI,KAAV,CAAiB9M,KAAjB,CAAT,CACA,KAAKkN,CAAL,CAAS+H,UAAUnI,KAAV,CAAiB9M,MAAQ,CAAzB,CAAT,CAEA,WAAA,CAEA,CA1bwB,CA4bzBmV,aAAc,sBAAWC,MAAX,CAAmB1G,KAAnB,CAA2B,CAExC,MAAQxP,KAAK6O,GAAL,CAAUW,KAAV,CAAR,CAA2BjF,EAAIvK,KAAK8O,GAAL,CAAUU,KAAV,CAA/B,CAEA,MAAQ,KAAKrP,CAAL,CAAS+V,OAAO/V,CAAxB,CACA,MAAQ,KAAK6N,CAAL,CAASkI,OAAOlI,CAAxB,CAEA,KAAK7N,CAAL,CAASA,EAAIuN,CAAJ,CAAQM,EAAIzD,CAAZ,CAAgB2L,OAAO/V,CAAhC,CACA,KAAK6N,CAAL,CAAS7N,EAAIoK,CAAJ,CAAQyD,EAAIN,CAAZ,CAAgBwI,OAAOlI,CAAhC,CAEA,WAAA,CAEA,CAxcwB,CAA1B;;;;;;;;IAudApO,MAAM+Q,OAAN,CAAgB,SAAWxQ,CAAX,CAAc6N,CAAd,CAAiBC,CAAjB,CAAqB,CAEpC,KAAK9N,CAAL,CAASA,GAAK,CAAd,CACA,KAAK6N,CAAL,CAASA,GAAK,CAAd,CACA,KAAKC,CAAL,CAASA,GAAK,CAAd,CAEA,CAND,CAQArO,MAAM+Q,OAAN,CAActQ,SAAd,CAA0B,CAEzBoJ,YAAa7J,MAAM+Q,OAFM,CAIzBpH,IAAK,aAAWpJ,CAAX,CAAc6N,CAAd,CAAiBC,CAAjB,CAAqB,CAEzB,KAAK9N,CAAL,CAASA,CAAT,CACA,KAAK6N,CAAL,CAASA,CAAT,CACA,KAAKC,CAAL,CAASA,CAAT,CAEA,WAAA,CAEA,CAZwB,CAczBnE,UAAW,mBAAWC,MAAX,CAAoB,CAE9B,KAAK5J,CAAL,CAAS4J,MAAT,CACA,KAAKiE,CAAL,CAASjE,MAAT,CACA,KAAKkE,CAAL,CAASlE,MAAT,CAEA,WAAA,CAEA,CAtBwB,CAwBzBkK,KAAM,cAAW9T,CAAX,CAAe,CAEpB,KAAKA,CAAL,CAASA,CAAT,CAEA,WAAA,CAEA,CA9BwB,CAgCzB+T,KAAM,cAAWlG,CAAX,CAAe,CAEpB,KAAKA,CAAL,CAASA,CAAT,CAEA,WAAA,CAEA,CAtCwB,CAwCzBmI,KAAM,cAAWlI,CAAX,CAAe,CAEpB,KAAKA,CAAL,CAASA,CAAT,CAEA,WAAA,CAEA,CA9CwB,CAgDzBkG,aAAc,sBAAWrT,KAAX,CAAkB4I,KAAlB,CAA0B,CAEvC,OAAS5I,KAAT,EAEC,MAAA,CAAQ,KAAKX,CAAL,CAASuJ,KAAT,CAAgB,MACxB,MAAA,CAAQ,KAAKsE,CAAL,CAAStE,KAAT,CAAgB,MACxB,MAAA,CAAQ,KAAKuE,CAAL,CAASvE,KAAT,CAAgB,MACxB,QAAS,eAAM,CAAW,0BAA4B5I,KAAvC,CAAN,CALV,CASA,CA3DwB,CA6DzBsT,aAAc,sBAAWtT,KAAX,CAAmB,CAEhC,OAASA,KAAT,EAEC,MAAA,CAAQ,YAAYX,CAAZ,CACR,MAAA,CAAQ,YAAY6N,CAAZ,CACR,MAAA,CAAQ,YAAYC,CAAZ,CACR,QAAS,eAAM,CAAW,0BAA4BnN,KAAvC,CAAN,CALV,CASA,CAxEwB,CA0EzB6K,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,CAAsB,KAAKtJ,CAA3B,CAA8B,KAAK6N,CAAnC,CAAsC,KAAKC,CAA3C,CAAP,CAEA,CA9EwB,CAgFzBtE,KAAM,cAAWwH,CAAX,CAAe,CAEpB,KAAKhR,CAAL,CAASgR,EAAEhR,CAAX,CACA,KAAK6N,CAAL,CAASmD,EAAEnD,CAAX,CACA,KAAKC,CAAL,CAASkD,EAAElD,CAAX,CAEA,WAAA,CAEA,CAxFwB,CA0FzBjB,IAAK,aAAWmE,CAAX,CAAcjD,CAAd,CAAkB,CAEtB,GAAKA,IAAMnO,SAAX,CAAuB,CAEtBgL,QAAQC,IAAR,CAAc,uFAAd,EACA,YAAYqJ,UAAL,CAAiBlD,CAAjB,CAAoBjD,CAApB,CAAP,CAEA,CAED,KAAK/N,CAAL,EAAUgR,EAAEhR,CAAZ,CACA,KAAK6N,CAAL,EAAUmD,EAAEnD,CAAZ,CACA,KAAKC,CAAL,EAAUkD,EAAElD,CAAZ,CAEA,WAAA,CAEA,CAzGwB,CA2GzBb,UAAW,mBAAW7C,CAAX,CAAe,CAEzB,KAAKpK,CAAL,EAAUoK,CAAV,CACA,KAAKyD,CAAL,EAAUzD,CAAV,CACA,KAAK0D,CAAL,EAAU1D,CAAV,CAEA,WAAA,CAEA,CAnHwB,CAqHzB8J,WAAY,oBAAW9C,CAAX,CAAcjI,CAAd,CAAkB,CAE7B,KAAKnJ,CAAL,CAASoR,EAAEpR,CAAF,CAAMmJ,EAAEnJ,CAAjB,CACA,KAAK6N,CAAL,CAASuD,EAAEvD,CAAF,CAAM1E,EAAE0E,CAAjB,CACA,KAAKC,CAAL,CAASsD,EAAEtD,CAAF,CAAM3E,EAAE2E,CAAjB,CAEA,WAAA,CAEA,CA7HwB,CA+HzBqG,gBAAiB,yBAAWnD,CAAX,CAAc5G,CAAd,CAAkB,CAElC,KAAKpK,CAAL,EAAUgR,EAAEhR,CAAF,CAAMoK,CAAhB,CACA,KAAKyD,CAAL,EAAUmD,EAAEnD,CAAF,CAAMzD,CAAhB,CACA,KAAK0D,CAAL,EAAUkD,EAAElD,CAAF,CAAM1D,CAAhB,CAEA,WAAA,CAEA,CAvIwB,CAyIzBgK,IAAK,aAAWpD,CAAX,CAAcjD,CAAd,CAAkB,CAEtB,GAAKA,IAAMnO,SAAX,CAAuB,CAEtBgL,QAAQC,IAAR,CAAc,uFAAd,EACA,YAAYwJ,UAAL,CAAiBrD,CAAjB,CAAoBjD,CAApB,CAAP,CAEA,CAED,KAAK/N,CAAL,EAAUgR,EAAEhR,CAAZ,CACA,KAAK6N,CAAL,EAAUmD,EAAEnD,CAAZ,CACA,KAAKC,CAAL,EAAUkD,EAAElD,CAAZ,CAEA,WAAA,CAEA,CAxJwB,CA0JzBwG,UAAW,mBAAWlK,CAAX,CAAe,CAEzB,KAAKpK,CAAL,EAAUoK,CAAV,CACA,KAAKyD,CAAL,EAAUzD,CAAV,CACA,KAAK0D,CAAL,EAAU1D,CAAV,CAEA,WAAA,CAEA,CAlKwB,CAoKzBiK,WAAY,oBAAWjD,CAAX,CAAcjI,CAAd,CAAkB,CAE7B,KAAKnJ,CAAL,CAASoR,EAAEpR,CAAF,CAAMmJ,EAAEnJ,CAAjB,CACA,KAAK6N,CAAL,CAASuD,EAAEvD,CAAF,CAAM1E,EAAE0E,CAAjB,CACA,KAAKC,CAAL,CAASsD,EAAEtD,CAAF,CAAM3E,EAAE2E,CAAjB,CAEA,WAAA,CAEA,CA5KwB,CA8KzBZ,SAAU,kBAAW8D,CAAX,CAAcjD,CAAd,CAAkB,CAE3B,GAAKA,IAAMnO,SAAX,CAAuB,CAEtBgL,QAAQC,IAAR,CAAc,iGAAd,EACA,YAAYoL,eAAL,CAAsBjF,CAAtB,CAAyBjD,CAAzB,CAAP,CAEA,CAED,KAAK/N,CAAL,EAAUgR,EAAEhR,CAAZ,CACA,KAAK6N,CAAL,EAAUmD,EAAEnD,CAAZ,CACA,KAAKC,CAAL,EAAUkD,EAAElD,CAAZ,CAEA,WAAA,CAEA,CA7LwB,CA+LzBX,eAAgB,wBAAWvD,MAAX,CAAoB,CAEnC,GAAK2K,SAAU3K,MAAV,CAAL,CAA0B,CAEzB,KAAK5J,CAAL,EAAU4J,MAAV,CACA,KAAKiE,CAAL,EAAUjE,MAAV,CACA,KAAKkE,CAAL,EAAUlE,MAAV,CAEA,CAND,IAMO,CAEN,KAAK5J,CAAL,CAAS,CAAT,CACA,KAAK6N,CAAL,CAAS,CAAT,CACA,KAAKC,CAAL,CAAS,CAAT,CAEA,CAED,WAAA,CAEA,CAjNwB,CAmNzBmI,gBAAiB,yBAAW7E,CAAX,CAAcjI,CAAd,CAAkB,CAElC,KAAKnJ,CAAL,CAASoR,EAAEpR,CAAF,CAAMmJ,EAAEnJ,CAAjB,CACA,KAAK6N,CAAL,CAASuD,EAAEvD,CAAF,CAAM1E,EAAE0E,CAAjB,CACA,KAAKC,CAAL,CAASsD,EAAEtD,CAAF,CAAM3E,EAAE2E,CAAjB,CAEA,WAAA,CAEA,CA3NwB,CA6NzBoI,WAAY,UAAY,CAEvB,cAAA,CAEA,0BAAO,CAAqB3H,KAArB,CAA6B,CAEnC,GAAKA,uBAAuBE,KAAvB,GAAiC,KAAtC,CAA8C,CAE7C7D,QAAQuL,KAAR,CAAe,6FAAf,EAEA,CAED,GAAK9H,aAAezO,SAApB,CAAgCyO,WAAa,UAAUT,UAAV,EAAb,CAEhC,YAAYwI,eAAL,CAAsB/H,WAAWC,YAAX,CAAyBC,KAAzB,CAAtB,CAAP,CAEA,CAZD,CAcA,CAlBW,EA7Na,CAiPzB8H,eAAgB,UAAY,CAE3B,cAAA,CAEA,8BAAO,CAAyBjH,IAAzB,CAA+BC,KAA/B,CAAuC,CAE7C,GAAKhB,aAAezO,SAApB,CAAgCyO,WAAa,UAAUT,UAAV,EAAb,CAEhC,YAAYwI,eAAL,CAAsB/H,WAAWc,gBAAX,CAA6BC,IAA7B,CAAmCC,KAAnC,CAAtB,CAAP,CAEA,CAND,CAQA,CAZe,EAjPS,CA+PzBiH,aAAc,sBAAWxL,CAAX,CAAe,CAE5B,MAAQ,KAAK9K,CAAb,CAAgB6N,EAAI,KAAKA,CAAzB,CAA4BC,EAAI,KAAKA,CAArC,CACA,MAAQhD,EAAE0E,QAAV,CAEA,KAAKxP,CAAL,CAASuW,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,CAAH,EAASzI,CAA5C,CACA,KAAKD,CAAL,CAAS0I,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,CAAH,EAASzI,CAA5C,CACA,KAAKA,CAAL,CAASyI,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,CAAH,EAASzI,CAA5C,CAEA,WAAA,CAEA,CA1QwB,CA4QzB0I,aAAc,sBAAW1L,CAAX,CAAe;CAI5B,MAAQ,KAAK9K,CAAb,CAAgB6N,EAAI,KAAKA,CAAzB,CAA4BC,EAAI,KAAKA,CAArC,CACA,MAAQhD,EAAE0E,QAAV,CAEA,KAAKxP,CAAL,CAASuW,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,CAAH,EAAUzI,CAApC,CAAwCyI,EAAG,EAAH,CAAjD,CACA,KAAK1I,CAAL,CAAS0I,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,CAAH,EAAUzI,CAApC,CAAwCyI,EAAG,EAAH,CAAjD,CACA,KAAKzI,CAAL,CAASyI,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,EAAH,EAAUzI,CAApC,CAAwCyI,EAAG,EAAH,CAAjD,CAEA,WAAA,CAEA,CAzRwB,CA2RzBE,gBAAiB,yBAAW3L,CAAX,CAAe;CAI/B,MAAQ,KAAK9K,CAAb,CAAgB6N,EAAI,KAAKA,CAAzB,CAA4BC,EAAI,KAAKA,CAArC,CACA,MAAQhD,EAAE0E,QAAV,CACA,MAAQ,GAAM+G,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,EAAH,EAAUzI,CAApC,CAAwCyI,EAAG,EAAH,CAA9C,CAAR;CAEA,KAAKvW,CAAL,CAAS,CAAEuW,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,CAAH,EAAUzI,CAApC,CAAwCyI,EAAG,EAAH,CAA1C,EAAsDG,CAA/D,CACA,KAAK7I,CAAL,CAAS,CAAE0I,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,CAAH,EAAUzI,CAApC,CAAwCyI,EAAG,EAAH,CAA1C,EAAsDG,CAA/D,CACA,KAAK5I,CAAL,CAAS,CAAEyI,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,EAAH,EAAUzI,CAApC,CAAwCyI,EAAG,EAAH,CAA1C,EAAsDG,CAA/D,CAEA,WAAA,CAEA,CAzSwB,CA2SzBN,gBAAiB,yBAAWnM,CAAX,CAAe,CAE/B,MAAQ,KAAKjK,CAAb,CAAgB6N,EAAI,KAAKA,CAAzB,CAA4BC,EAAI,KAAKA,CAArC,CACA,OAAS7D,EAAEjK,CAAX,CAAc2W,GAAK1M,EAAE4D,CAArB,CAAwB+I,GAAK3M,EAAE6D,CAA/B,CAAkC+I,GAAK5M,EAAE8D,CAAzC;CAIA,OAAU8I,GAAK7W,CAAL,CAAS2W,GAAK7I,CAAd,CAAkB8I,GAAK/I,CAAjC,CACA,OAAUgJ,GAAKhJ,CAAL,CAAS+I,GAAK5W,CAAd,CAAkB8W,GAAKhJ,CAAjC,CACA,OAAU+I,GAAK/I,CAAL,CAASgJ,GAAKjJ,CAAd,CAAkB8I,GAAK3W,CAAjC,CACA,OAAS,CAAE8W,EAAF,CAAO9W,CAAP,CAAW2W,GAAK9I,CAAhB,CAAoB+I,GAAK9I,CAAlC;CAIA,KAAK9N,CAAL,CAAS+W,GAAKF,EAAL,CAAUG,GAAK,CAAEF,EAAjB,CAAsBG,GAAK,CAAEL,EAA7B,CAAkCM,GAAK,CAAEP,EAAlD,CACA,KAAK9I,CAAL,CAASoJ,GAAKJ,EAAL,CAAUG,GAAK,CAAEL,EAAjB,CAAsBO,GAAK,CAAEJ,EAA7B,CAAkCC,GAAK,CAAEH,EAAlD,CACA,KAAK9I,CAAL,CAASoJ,GAAKL,EAAL,CAAUG,GAAK,CAAEJ,EAAjB,CAAsBG,GAAK,CAAEJ,EAA7B,CAAkCM,GAAK,CAAEH,EAAlD,CAEA,WAAA,CAEA,CA/TwB,CAiUzBK,QAAS,UAAY,CAEpB,UAAA,CAEA,uBAAO,CAAkBC,MAAlB,CAA2B,CAEjC,GAAKC,SAAWzX,SAAhB,CAA4ByX,OAAS,UAAUC,OAAV,EAAT,CAE5BD,OAAOE,gBAAP,CAAyBH,OAAOI,gBAAhC,CAAkDH,OAAOI,UAAP,CAAmBL,OAAOM,WAA1B,CAAlD,EACA,YAAYjB,eAAL,CAAsBY,MAAtB,CAAP,CAEA,CAPD,CASA,CAbQ,EAjUgB,CAgVzBM,UAAW,UAAY,CAEtB,UAAA,CAEA,yBAAO,CAAoBP,MAApB,CAA6B,CAEnC,GAAKC,SAAWzX,SAAhB,CAA4ByX,OAAS,UAAUC,OAAV,EAAT,CAE5BD,OAAOE,gBAAP,CAAyBH,OAAOM,WAAhC,CAA6CL,OAAOI,UAAP,CAAmBL,OAAOI,gBAA1B,CAA7C,EACA,YAAYf,eAAL,CAAsBY,MAAtB,CAAP,CAEA,CAPD,CASA,CAbU,EAhVc,CA+VzBO,mBAAoB,4BAAW9M,CAAX,CAAe;;CAKlC,MAAQ,KAAK9K,CAAb,CAAgB6N,EAAI,KAAKA,CAAzB,CAA4BC,EAAI,KAAKA,CAArC,CACA,MAAQhD,EAAE0E,QAAV,CAEA,KAAKxP,CAAL,CAASuW,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,CAAH,EAAUzI,CAA7C,CACA,KAAKD,CAAL,CAAS0I,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,CAAH,EAAUzI,CAA7C,CACA,KAAKA,CAAL,CAASyI,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,EAAH,EAAUzI,CAA7C,CAEA,YAAY+C,SAAL,EAAP,CAEA,CA7WwB,CA+WzB2D,OAAQ,gBAAWxD,CAAX,CAAe,CAEtB,KAAKhR,CAAL,EAAUgR,EAAEhR,CAAZ,CACA,KAAK6N,CAAL,EAAUmD,EAAEnD,CAAZ,CACA,KAAKC,CAAL,EAAUkD,EAAElD,CAAZ,CAEA,WAAA,CAEA,CAvXwB,CAyXzB2G,aAAc,sBAAW7K,MAAX,CAAoB,CAEjC,YAAYuD,cAAL,CAAqB,EAAIvD,MAAzB,CAAP,CAEA,CA7XwB,CA+XzBsB,IAAK,aAAW8F,CAAX,CAAe,CAEnB,KAAKhR,CAAL,CAASH,KAAKqL,GAAL,CAAU,KAAKlL,CAAf,CAAkBgR,EAAEhR,CAApB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKqL,GAAL,CAAU,KAAK2C,CAAf,CAAkBmD,EAAEnD,CAApB,CAAT,CACA,KAAKC,CAAL,CAASjO,KAAKqL,GAAL,CAAU,KAAK4C,CAAf,CAAkBkD,EAAElD,CAApB,CAAT,CAEA,WAAA,CAEA,CAvYwB,CAyYzBzB,IAAK,aAAW2E,CAAX,CAAe,CAEnB,KAAKhR,CAAL,CAASH,KAAKwM,GAAL,CAAU,KAAKrM,CAAf,CAAkBgR,EAAEhR,CAApB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKwM,GAAL,CAAU,KAAKwB,CAAf,CAAkBmD,EAAEnD,CAApB,CAAT,CACA,KAAKC,CAAL,CAASjO,KAAKwM,GAAL,CAAU,KAAKyB,CAAf,CAAkBkD,EAAElD,CAApB,CAAT,CAEA,WAAA,CAEA,CAjZwB,CAmZzBvD,MAAO,eAAWW,GAAX,CAAgBmB,GAAhB,CAAsB;CAI5B,KAAKrM,CAAL,CAASH,KAAKwM,GAAL,CAAUnB,IAAIlL,CAAd,CAAiBH,KAAKqL,GAAL,CAAUmB,IAAIrM,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKwM,GAAL,CAAUnB,IAAI2C,CAAd,CAAiBhO,KAAKqL,GAAL,CAAUmB,IAAIwB,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASjO,KAAKwM,GAAL,CAAUnB,IAAI4C,CAAd,CAAiBjO,KAAKqL,GAAL,CAAUmB,IAAIyB,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CAEA,WAAA,CAEA,CA7ZwB,CA+ZzB4G,YAAa,UAAY,CAExB,OAAA,CAASrI,GAAT,CAEA,2BAAO,CAAsBsI,MAAtB,CAA8BC,MAA9B,CAAuC,CAE7C,GAAK1J,MAAQtL,SAAb,CAAyB,CAExBsL,IAAM,UAAUsF,OAAV,EAAN,CACAnE,IAAM,UAAUmE,OAAV,EAAN,CAEA,CAEDtF,IAAI9B,GAAJ,CAASuL,MAAT,CAAiBA,MAAjB,CAAyBA,MAAzB,EACAtI,IAAIjD,GAAJ,CAASwL,MAAT,CAAiBA,MAAjB,CAAyBA,MAAzB,EAEA,YAAYrK,KAAL,CAAYW,GAAZ,CAAiBmB,GAAjB,CAAP,CAEA,CAdD,CAgBA,CApBY,EA/ZY,CAqbzBwI,YAAa,qBAAW3J,GAAX,CAAgBmB,GAAhB,CAAsB,CAElC,WAAa,KAAKxL,MAAL,EAAb,CAEA,YAAYsM,cAAL,CAAqBtN,KAAKwM,GAAL,CAAUnB,GAAV,CAAerL,KAAKqL,GAAL,CAAUmB,GAAV,CAAexL,MAAf,CAAf,EAA2CA,MAAhE,CAAP,CAEA,CA3bwB,CA6bzBiJ,MAAO,gBAAY,CAElB,KAAK9J,CAAL,CAASH,KAAKiK,KAAL,CAAY,KAAK9J,CAAjB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKiK,KAAL,CAAY,KAAK+D,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASjO,KAAKiK,KAAL,CAAY,KAAKgE,CAAjB,CAAT,CAEA,WAAA,CAEA,CArcwB,CAuczBgH,KAAM,eAAY,CAEjB,KAAK9U,CAAL,CAASH,KAAKiV,IAAL,CAAW,KAAK9U,CAAhB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKiV,IAAL,CAAW,KAAKjH,CAAhB,CAAT,CACA,KAAKC,CAAL,CAASjO,KAAKiV,IAAL,CAAW,KAAKhH,CAAhB,CAAT,CAEA,WAAA,CAEA,CA/cwB,CAidzBiH,MAAO,gBAAY,CAElB,KAAK/U,CAAL,CAASH,KAAKkV,KAAL,CAAY,KAAK/U,CAAjB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKkV,KAAL,CAAY,KAAKlH,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASjO,KAAKkV,KAAL,CAAY,KAAKjH,CAAjB,CAAT,CAEA,WAAA,CAEA,CAzdwB,CA2dzBkH,YAAa,sBAAY,CAExB,KAAKhV,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiBH,KAAKiV,IAAL,CAAW,KAAK9U,CAAhB,CAAjB,CAAuCH,KAAKiK,KAAL,CAAY,KAAK9J,CAAjB,CAAhD,CACA,KAAK6N,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiBhO,KAAKiV,IAAL,CAAW,KAAKjH,CAAhB,CAAjB,CAAuChO,KAAKiK,KAAL,CAAY,KAAK+D,CAAjB,CAAhD,CACA,KAAKC,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiBjO,KAAKiV,IAAL,CAAW,KAAKhH,CAAhB,CAAjB,CAAuCjO,KAAKiK,KAAL,CAAY,KAAKgE,CAAjB,CAAhD,CAEA,WAAA,CAEA,CAnewB,CAqezBmH,OAAQ,iBAAY,CAEnB,KAAKjV,CAAL,CAAS,CAAE,KAAKA,CAAhB,CACA,KAAK6N,CAAL,CAAS,CAAE,KAAKA,CAAhB,CACA,KAAKC,CAAL,CAAS,CAAE,KAAKA,CAAhB,CAEA,WAAA,CAEA,CA7ewB,CA+ezB2C,IAAK,aAAWO,CAAX,CAAe,CAEnB,YAAYhR,CAAL,CAASgR,EAAEhR,CAAX,CAAe,KAAK6N,CAAL,CAASmD,EAAEnD,CAA1B,CAA8B,KAAKC,CAAL,CAASkD,EAAElD,CAAhD,CAEA,CAnfwB,CAqfzBmD,SAAU,mBAAY,CAErB,YAAYjR,CAAL,CAAS,KAAKA,CAAd,CAAkB,KAAK6N,CAAL,CAAS,KAAKA,CAAhC,CAAoC,KAAKC,CAAL,CAAS,KAAKA,CAAzD,CAEA,CAzfwB,CA2fzBjN,OAAQ,iBAAY,CAEnB,YAAYkL,IAAL,CAAW,KAAK/L,CAAL,CAAS,KAAKA,CAAd,CAAkB,KAAK6N,CAAL,CAAS,KAAKA,CAAhC,CAAoC,KAAKC,CAAL,CAAS,KAAKA,CAA7D,CAAP,CAEA,CA/fwB,CAigBzBoH,gBAAiB,0BAAY,CAE5B,YAAYvE,GAAL,CAAU,KAAK3Q,CAAf,EAAqBH,KAAK8Q,GAAL,CAAU,KAAK9C,CAAf,CAArB,CAA0ChO,KAAK8Q,GAAL,CAAU,KAAK7C,CAAf,CAAjD,CAEA,CArgBwB,CAugBzB+C,UAAW,oBAAY,CAEtB,YAAY4D,YAAL,CAAmB,KAAK5T,MAAL,EAAnB,CAAP,CAEA,CA3gBwB,CA6gBzB2U,UAAW,mBAAW3U,MAAX,CAAoB,CAE9B,YAAYsM,cAAL,CAAqBtM,OAAS,KAAKA,MAAL,EAA9B,CAAP,CAEA,CAjhBwB,CAmhBzBuM,KAAM,cAAW4D,CAAX,CAAc3D,KAAd,CAAsB,CAE3B,KAAKrN,CAAL,EAAU,CAAEgR,EAAEhR,CAAF,CAAM,KAAKA,CAAb,EAAmBqN,KAA7B,CACA,KAAKQ,CAAL,EAAU,CAAEmD,EAAEnD,CAAF,CAAM,KAAKA,CAAb,EAAmBR,KAA7B,CACA,KAAKS,CAAL,EAAU,CAAEkD,EAAElD,CAAF,CAAM,KAAKA,CAAb,EAAmBT,KAA7B,CAEA,WAAA,CAEA,CA3hBwB,CA6hBzBoI,YAAa,qBAAWlF,EAAX,CAAemF,EAAf,CAAmBrI,KAAnB,CAA2B,CAEvC,YAAYgH,UAAL,CAAiBqB,EAAjB,CAAqBnF,EAArB,EAA0BpD,cAA1B,CAA0CE,KAA1C,EAAkDR,GAAlD,CAAuD0D,EAAvD,CAAP,CAEA,CAjiBwB,CAmiBzBsH,MAAO,eAAW7G,CAAX,CAAcjD,CAAd,CAAkB,CAExB,GAAKA,IAAMnO,SAAX,CAAuB,CAEtBgL,QAAQC,IAAR,CAAc,2FAAd,EACA,YAAY+F,YAAL,CAAmBI,CAAnB,CAAsBjD,CAAtB,CAAP,CAEA,CAED,MAAQ,KAAK/N,CAAb,CAAgB6N,EAAI,KAAKA,CAAzB,CAA4BC,EAAI,KAAKA,CAArC,CAEA,KAAK9N,CAAL,CAAS6N,EAAImD,EAAElD,CAAN,CAAUA,EAAIkD,EAAEnD,CAAzB,CACA,KAAKA,CAAL,CAASC,EAAIkD,EAAEhR,CAAN,CAAUA,EAAIgR,EAAElD,CAAzB,CACA,KAAKA,CAAL,CAAS9N,EAAIgR,EAAEnD,CAAN,CAAUA,EAAImD,EAAEhR,CAAzB,CAEA,WAAA,CAEA,CApjBwB,CAsjBzB4Q,aAAc,sBAAWQ,CAAX,CAAcjI,CAAd,CAAkB,CAE/B,OAASiI,EAAEpR,CAAX,CAAc8X,GAAK1G,EAAEvD,CAArB,CAAwBkK,GAAK3G,EAAEtD,CAA/B,CACA,OAAS3E,EAAEnJ,CAAX,CAAcgY,GAAK7O,EAAE0E,CAArB,CAAwBoK,GAAK9O,EAAE2E,CAA/B,CAEA,KAAK9N,CAAL,CAAS8X,GAAKG,EAAL,CAAUF,GAAKC,EAAxB,CACA,KAAKnK,CAAL,CAASkK,GAAKG,EAAL,CAAUC,GAAKF,EAAxB,CACA,KAAKnK,CAAL,CAASqK,GAAKH,EAAL,CAAUF,GAAKI,EAAxB,CAEA,WAAA,CAEA,CAjkBwB,CAmkBzBE,gBAAiB,UAAY,CAE5B,MAAA,CAAQ3H,GAAR,CAEA,+BAAO,CAA0B4H,MAA1B,CAAmC,CAEzC,GAAK9H,KAAO3Q,SAAZ,CAAwB2Q,GAAK,UAAUC,OAAV,EAAL,CAExBD,GAAG/G,IAAH,CAAS6O,MAAT,EAAkBxH,SAAlB,GAEAJ,IAAM,KAAKA,GAAL,CAAUF,EAAV,CAAN,CAEA,YAAY/G,IAAL,CAAW+G,EAAX,EAAgBpD,cAAhB,CAAgCsD,GAAhC,CAAP,CAEA,CAVD,CAYA,CAhBgB,EAnkBQ,CAqlBzB6H,eAAgB,UAAY,CAE3B,MAAA,CAEA,8BAAO,CAAyBC,WAAzB,CAAuC,CAE7C,GAAKhI,KAAO3Q,SAAZ,CAAwB2Q,GAAK,UAAUC,OAAV,EAAL,CAExBD,GAAG/G,IAAH,CAAS,IAAT,EAAgB4O,eAAhB,CAAiCG,WAAjC,EAEA,YAAYnE,GAAL,CAAU7D,EAAV,CAAP,CAEA,CARD,CAUA,CAde,EArlBS,CAqmBzBiI,QAAS,UAAY;;CAKpB,MAAA,CAEA,uBAAO,CAAkBC,MAAlB,CAA2B,CAEjC,GAAKlI,KAAO3Q,SAAZ,CAAwB2Q,GAAK,UAAUC,OAAV,EAAL,CAExB,YAAY4D,GAAL,CAAU7D,GAAG/G,IAAH,CAASiP,MAAT,EAAkBtL,cAAlB,CAAkC,EAAI,KAAKsD,GAAL,CAAUgI,MAAV,CAAtC,CAAV,CAAP,CAEA,CAND,CAQA,CAfQ,EArmBgB,CAsnBzBC,QAAS,iBAAW1H,CAAX,CAAe,CAEvB,UAAY,KAAKP,GAAL,CAAUO,CAAV,EAAkBnR,KAAKkM,IAAL,CAAW,KAAKkF,QAAL,GAAkBD,EAAEC,QAAF,EAA7B,CAA9B;CAIA,YAAY0H,IAAL,CAAWlZ,MAAMI,IAAN,CAAW0K,KAAX,CAAkBqO,KAAlB,CAAyB,CAAE,CAA3B,CAA8B,CAA9B,CAAX,CAAP,CAEA,CA9nBwB,CAgoBzBxD,WAAY,oBAAWpE,CAAX,CAAe,CAE1B,YAAYjF,IAAL,CAAW,KAAKsJ,iBAAL,CAAwBrE,CAAxB,CAAX,CAAP,CAEA,CApoBwB,CAsoBzBqE,kBAAmB,2BAAWrE,CAAX,CAAe,CAEjC,OAAS,KAAKhR,CAAL,CAASgR,EAAEhR,CAApB,CAAuBsV,GAAK,KAAKzH,CAAL,CAASmD,EAAEnD,CAAvC,CAA0CgL,GAAK,KAAK/K,CAAL,CAASkD,EAAElD,CAA1D,CAEA,UAAYyH,EAAL,CAAUD,GAAKA,EAAf,CAAoBuD,GAAKA,EAAhC,CAEA,CA5oBwB,CA8oBzBC,iBAAkB,0BAAU1O,CAAV,CAAc,CAE/B,iBAAmBvK,KAAK8O,GAAL,CAAUvE,EAAE2O,GAAZ,EAAoB3O,EAAE4O,MAAzC,CAEA,KAAKhZ,CAAL,CAASiZ,aAAepZ,KAAK8O,GAAL,CAAUvE,EAAEwO,KAAZ,CAAxB,CACA,KAAK/K,CAAL,CAAShO,KAAK6O,GAAL,CAAUtE,EAAE2O,GAAZ,EAAoB3O,EAAE4O,MAA/B,CACA,KAAKlL,CAAL,CAASmL,aAAepZ,KAAK6O,GAAL,CAAUtE,EAAEwO,KAAZ,CAAxB,CAEA,WAAA,CAEA,CAxpBwB,CA0pBzBM,sBAAuB,+BAAWpO,CAAX,CAAe,CAErC,YAAYqO,mBAAL,CAA0BrO,CAA1B,CAA6B,CAA7B,CAAP,CAEA,CA9pBwB,CAgqBzBsO,mBAAoB,4BAAWtO,CAAX,CAAe,CAElC,OAAS,KAAKqO,mBAAL,CAA0BrO,CAA1B,CAA6B,CAA7B,EAAiCjK,MAAjC,EAAT,CACA,OAAS,KAAKsY,mBAAL,CAA0BrO,CAA1B,CAA6B,CAA7B,EAAiCjK,MAAjC,EAAT,CACA,OAAS,KAAKsY,mBAAL,CAA0BrO,CAA1B,CAA6B,CAA7B,EAAiCjK,MAAjC,EAAT,CAEA,KAAKb,CAAL,CAASqZ,EAAT,CACA,KAAKxL,CAAL,CAASyL,EAAT,CACA,KAAKxL,CAAL,CAASyL,EAAT,CAEA,WAAA,CAEA,CA5qBwB,CA8qBzBJ,oBAAqB,6BAAWrO,CAAX,CAAcnK,KAAd,CAAsB,CAE1C,GAAK,QAAA,GAAa,QAAlB,CAA6B,CAE5BiK,QAAQC,IAAR,CAAc,mEAAd,EACA,SAAWC,CAAX,CACAA,EAAInK,KAAJ,CACAA,MAAQ6Y,IAAR,CAEA,CAED,YAAYhM,SAAL,CAAgB1C,EAAE0E,QAAlB,CAA4B7O,MAAQ,CAApC,CAAP,CAEA,CA3rBwB,CA6rBzB2M,OAAQ,gBAAW0D,CAAX,CAAe,CAEtB,SAAahR,CAAF,GAAQ,KAAKA,CAAf,EAAwBgR,EAAEnD,CAAF,GAAQ,KAAKA,CAArC,EAA8CmD,EAAElD,CAAF,GAAQ,KAAKA,CAApE,CAEA,CAjsBwB,CAmsBzBN,UAAW,mBAAWC,KAAX,CAAkBC,MAAlB,CAA2B,CAErC,GAAKA,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5B,KAAK1N,CAAL,CAASyN,MAAOC,MAAP,CAAT,CACA,KAAKG,CAAL,CAASJ,MAAOC,OAAS,CAAhB,CAAT,CACA,KAAKI,CAAL,CAASL,MAAOC,OAAS,CAAhB,CAAT,CAEA,WAAA,CAEA,CA7sBwB,CA+sBzBC,QAAS,iBAAWF,KAAX,CAAkBC,MAAlB,CAA2B,CAEnC,GAAKD,QAAU7N,SAAf,CAA2B6N,MAAQ,EAAR,CAC3B,GAAKC,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5BD,MAAOC,MAAP,EAAkB,KAAK1N,CAAvB,CACAyN,MAAOC,OAAS,CAAhB,EAAsB,KAAKG,CAA3B,CACAJ,MAAOC,OAAS,CAAhB,EAAsB,KAAKI,CAA3B,CAEA,YAAA,CAEA,CA1tBwB,CA4tBzB6H,cAAe,uBAAWC,SAAX,CAAsBjV,KAAtB,CAA6B+M,MAA7B,CAAsC,CAEpD,GAAKA,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5B/M,MAAQA,MAAQiV,UAAUC,QAAlB,CAA6BnI,MAArC,CAEA,KAAK1N,CAAL,CAAS4V,UAAUnI,KAAV,CAAiB9M,KAAjB,CAAT,CACA,KAAKkN,CAAL,CAAS+H,UAAUnI,KAAV,CAAiB9M,MAAQ,CAAzB,CAAT,CACA,KAAKmN,CAAL,CAAS8H,UAAUnI,KAAV,CAAiB9M,MAAQ,CAAzB,CAAT,CAEA,WAAA,CAEA,CAxuBwB,CAA1B;;;;;;;IAsvBAlB,MAAMga,OAAN,CAAgB,SAAWzZ,CAAX,CAAc6N,CAAd,CAAiBC,CAAjB,CAAoBC,CAApB,CAAwB,CAEvC,KAAK/N,CAAL,CAASA,GAAK,CAAd,CACA,KAAK6N,CAAL,CAASA,GAAK,CAAd,CACA,KAAKC,CAAL,CAASA,GAAK,CAAd,CACA,KAAKC,CAAL,CAAWA,IAAMnO,SAAR,CAAsBmO,CAAtB,CAA0B,CAAnC,CAEA,CAPD,CASAtO,MAAMga,OAAN,CAAcvZ,SAAd,CAA0B,CAEzBoJ,YAAa7J,MAAMga,OAFM,CAIzBrQ,IAAK,aAAWpJ,CAAX,CAAc6N,CAAd,CAAiBC,CAAjB,CAAoBC,CAApB,CAAwB,CAE5B,KAAK/N,CAAL,CAASA,CAAT,CACA,KAAK6N,CAAL,CAASA,CAAT,CACA,KAAKC,CAAL,CAASA,CAAT,CACA,KAAKC,CAAL,CAASA,CAAT,CAEA,WAAA,CAEA,CAbwB,CAezBpE,UAAW,mBAAWC,MAAX,CAAoB,CAE9B,KAAK5J,CAAL,CAAS4J,MAAT,CACA,KAAKiE,CAAL,CAASjE,MAAT,CACA,KAAKkE,CAAL,CAASlE,MAAT,CACA,KAAKmE,CAAL,CAASnE,MAAT,CAEA,WAAA,CAEA,CAxBwB,CA0BzBkK,KAAM,cAAW9T,CAAX,CAAe,CAEpB,KAAKA,CAAL,CAASA,CAAT,CAEA,WAAA,CAEA,CAhCwB,CAkCzB+T,KAAM,cAAWlG,CAAX,CAAe,CAEpB,KAAKA,CAAL,CAASA,CAAT,CAEA,WAAA,CAEA,CAxCwB,CA0CzBmI,KAAM,cAAWlI,CAAX,CAAe,CAEpB,KAAKA,CAAL,CAASA,CAAT,CAEA,WAAA,CAEA,CAhDwB,CAkDzB4L,KAAM,cAAW3L,CAAX,CAAe,CAEpB,KAAKA,CAAL,CAASA,CAAT,CAEA,WAAA,CAEA,CAxDwB,CA0DzBiG,aAAc,sBAAWrT,KAAX,CAAkB4I,KAAlB,CAA0B,CAEvC,OAAS5I,KAAT,EAEC,MAAA,CAAQ,KAAKX,CAAL,CAASuJ,KAAT,CAAgB,MACxB,MAAA,CAAQ,KAAKsE,CAAL,CAAStE,KAAT,CAAgB,MACxB,MAAA,CAAQ,KAAKuE,CAAL,CAASvE,KAAT,CAAgB,MACxB,MAAA,CAAQ,KAAKwE,CAAL,CAASxE,KAAT,CAAgB,MACxB,QAAS,eAAM,CAAW,0BAA4B5I,KAAvC,CAAN,CANV,CAUA,CAtEwB,CAwEzBsT,aAAc,sBAAWtT,KAAX,CAAmB,CAEhC,OAASA,KAAT,EAEC,MAAA,CAAQ,YAAYX,CAAZ,CACR,MAAA,CAAQ,YAAY6N,CAAZ,CACR,MAAA,CAAQ,YAAYC,CAAZ,CACR,MAAA,CAAQ,YAAYC,CAAZ,CACR,QAAS,eAAM,CAAW,0BAA4BpN,KAAvC,CAAN,CANV,CAUA,CApFwB,CAsFzB6K,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,CAAsB,KAAKtJ,CAA3B,CAA8B,KAAK6N,CAAnC,CAAsC,KAAKC,CAA3C,CAA8C,KAAKC,CAAnD,CAAP,CAEA,CA1FwB,CA4FzBvE,KAAM,cAAWwH,CAAX,CAAe,CAEpB,KAAKhR,CAAL,CAASgR,EAAEhR,CAAX,CACA,KAAK6N,CAAL,CAASmD,EAAEnD,CAAX,CACA,KAAKC,CAAL,CAASkD,EAAElD,CAAX,CACA,KAAKC,CAAL,CAAWiD,EAAEjD,CAAF,GAAQnO,SAAV,CAAwBoR,EAAEjD,CAA1B,CAA8B,CAAvC,CAEA,WAAA,CAEA,CArGwB,CAuGzBlB,IAAK,aAAWmE,CAAX,CAAcjD,CAAd,CAAkB,CAEtB,GAAKA,IAAMnO,SAAX,CAAuB,CAEtBgL,QAAQC,IAAR,CAAc,uFAAd,EACA,YAAYqJ,UAAL,CAAiBlD,CAAjB,CAAoBjD,CAApB,CAAP,CAEA,CAED,KAAK/N,CAAL,EAAUgR,EAAEhR,CAAZ,CACA,KAAK6N,CAAL,EAAUmD,EAAEnD,CAAZ,CACA,KAAKC,CAAL,EAAUkD,EAAElD,CAAZ,CACA,KAAKC,CAAL,EAAUiD,EAAEjD,CAAZ,CAEA,WAAA,CAEA,CAvHwB,CAyHzBd,UAAW,mBAAW7C,CAAX,CAAe,CAEzB,KAAKpK,CAAL,EAAUoK,CAAV,CACA,KAAKyD,CAAL,EAAUzD,CAAV,CACA,KAAK0D,CAAL,EAAU1D,CAAV,CACA,KAAK2D,CAAL,EAAU3D,CAAV,CAEA,WAAA,CAEA,CAlIwB,CAoIzB8J,WAAY,oBAAW9C,CAAX,CAAcjI,CAAd,CAAkB,CAE7B,KAAKnJ,CAAL,CAASoR,EAAEpR,CAAF,CAAMmJ,EAAEnJ,CAAjB,CACA,KAAK6N,CAAL,CAASuD,EAAEvD,CAAF,CAAM1E,EAAE0E,CAAjB,CACA,KAAKC,CAAL,CAASsD,EAAEtD,CAAF,CAAM3E,EAAE2E,CAAjB,CACA,KAAKC,CAAL,CAASqD,EAAErD,CAAF,CAAM5E,EAAE4E,CAAjB,CAEA,WAAA,CAEA,CA7IwB,CA+IzBoG,gBAAiB,yBAAWnD,CAAX,CAAc5G,CAAd,CAAkB,CAElC,KAAKpK,CAAL,EAAUgR,EAAEhR,CAAF,CAAMoK,CAAhB,CACA,KAAKyD,CAAL,EAAUmD,EAAEnD,CAAF,CAAMzD,CAAhB,CACA,KAAK0D,CAAL,EAAUkD,EAAElD,CAAF,CAAM1D,CAAhB,CACA,KAAK2D,CAAL,EAAUiD,EAAEjD,CAAF,CAAM3D,CAAhB,CAEA,WAAA,CAEA,CAxJwB,CA0JzBgK,IAAK,aAAWpD,CAAX,CAAcjD,CAAd,CAAkB,CAEtB,GAAKA,IAAMnO,SAAX,CAAuB,CAEtBgL,QAAQC,IAAR,CAAc,uFAAd,EACA,YAAYwJ,UAAL,CAAiBrD,CAAjB,CAAoBjD,CAApB,CAAP,CAEA,CAED,KAAK/N,CAAL,EAAUgR,EAAEhR,CAAZ,CACA,KAAK6N,CAAL,EAAUmD,EAAEnD,CAAZ,CACA,KAAKC,CAAL,EAAUkD,EAAElD,CAAZ,CACA,KAAKC,CAAL,EAAUiD,EAAEjD,CAAZ,CAEA,WAAA,CAEA,CA1KwB,CA4KzBuG,UAAW,mBAAWlK,CAAX,CAAe,CAEzB,KAAKpK,CAAL,EAAUoK,CAAV,CACA,KAAKyD,CAAL,EAAUzD,CAAV,CACA,KAAK0D,CAAL,EAAU1D,CAAV,CACA,KAAK2D,CAAL,EAAU3D,CAAV,CAEA,WAAA,CAEA,CArLwB,CAuLzBiK,WAAY,oBAAWjD,CAAX,CAAcjI,CAAd,CAAkB,CAE7B,KAAKnJ,CAAL,CAASoR,EAAEpR,CAAF,CAAMmJ,EAAEnJ,CAAjB,CACA,KAAK6N,CAAL,CAASuD,EAAEvD,CAAF,CAAM1E,EAAE0E,CAAjB,CACA,KAAKC,CAAL,CAASsD,EAAEtD,CAAF,CAAM3E,EAAE2E,CAAjB,CACA,KAAKC,CAAL,CAASqD,EAAErD,CAAF,CAAM5E,EAAE4E,CAAjB,CAEA,WAAA,CAEA,CAhMwB,CAkMzBZ,eAAgB,wBAAWvD,MAAX,CAAoB,CAEnC,GAAK2K,SAAU3K,MAAV,CAAL,CAA0B,CAEzB,KAAK5J,CAAL,EAAU4J,MAAV,CACA,KAAKiE,CAAL,EAAUjE,MAAV,CACA,KAAKkE,CAAL,EAAUlE,MAAV,CACA,KAAKmE,CAAL,EAAUnE,MAAV,CAEA,CAPD,IAOO,CAEN,KAAK5J,CAAL,CAAS,CAAT,CACA,KAAK6N,CAAL,CAAS,CAAT,CACA,KAAKC,CAAL,CAAS,CAAT,CACA,KAAKC,CAAL,CAAS,CAAT,CAEA,CAED,WAAA,CAEA,CAtNwB,CAwNzByI,aAAc,sBAAW1L,CAAX,CAAe,CAE5B,MAAQ,KAAK9K,CAAb,CAAgB6N,EAAI,KAAKA,CAAzB,CAA4BC,EAAI,KAAKA,CAArC,CAAwCC,EAAI,KAAKA,CAAjD,CACA,MAAQjD,EAAE0E,QAAV,CAEA,KAAKxP,CAAL,CAASuW,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,CAAH,EAASzI,CAAnC,CAAuCyI,EAAG,EAAH,EAAUxI,CAA1D,CACA,KAAKF,CAAL,CAAS0I,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,CAAH,EAASzI,CAAnC,CAAuCyI,EAAG,EAAH,EAAUxI,CAA1D,CACA,KAAKD,CAAL,CAASyI,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,EAAH,EAAUzI,CAApC,CAAwCyI,EAAG,EAAH,EAAUxI,CAA3D,CACA,KAAKA,CAAL,CAASwI,EAAG,CAAH,EAASvW,CAAT,CAAauW,EAAG,CAAH,EAAS1I,CAAtB,CAA0B0I,EAAG,EAAH,EAAUzI,CAApC,CAAwCyI,EAAG,EAAH,EAAUxI,CAA3D,CAEA,WAAA,CAEA,CApOwB,CAsOzB0G,aAAc,sBAAW7K,MAAX,CAAoB,CAEjC,YAAYuD,cAAL,CAAqB,EAAIvD,MAAzB,CAAP,CAEA,CA1OwB,CA4OzB+P,2BAA4B,oCAAW1P,CAAX,CAAe;;CAM1C,KAAK8D,CAAL,CAAS,EAAIlO,KAAK8Y,IAAL,CAAW1O,EAAE8D,CAAb,CAAb,CAEA,MAAQlO,KAAKkM,IAAL,CAAW,EAAI9B,EAAE8D,CAAF,CAAM9D,EAAE8D,CAAvB,CAAR,CAEA,GAAK3D,EAAI,MAAT,CAAkB,CAEhB,KAAKpK,CAAL,CAAS,CAAT,CACA,KAAK6N,CAAL,CAAS,CAAT,CACA,KAAKC,CAAL,CAAS,CAAT,CAED,CAND,IAMO,CAEL,KAAK9N,CAAL,CAASiK,EAAEjK,CAAF,CAAMoK,CAAf,CACA,KAAKyD,CAAL,CAAS5D,EAAE4D,CAAF,CAAMzD,CAAf,CACA,KAAK0D,CAAL,CAAS7D,EAAE6D,CAAF,CAAM1D,CAAf,CAED,CAED,WAAA,CAEA,CAtQwB,CAwQzBwP,+BAAgC,wCAAW9O,CAAX,CAAe;;CAM9C,SAAA,CAAW9K,CAAX,CAAc6N,CAAd,CAAiBC,CAAjB;CACC+L,QAAU,IADX;CAECC,SAAW,GAFZ;CAICpK,GAAK5E,EAAE0E,QAJR,CAMCC,IAAMC,GAAI,CAAJ,CANP,CAMgBC,IAAMD,GAAI,CAAJ,CANtB,CAM+BE,IAAMF,GAAI,CAAJ,CANrC,CAOCG,IAAMH,GAAI,CAAJ,CAPP,CAOgBI,IAAMJ,GAAI,CAAJ,CAPtB,CAO+BK,IAAML,GAAI,CAAJ,CAPrC,CAQCM,IAAMN,GAAI,CAAJ,CARP,CAQgBO,IAAMP,GAAI,CAAJ,CARtB,CAQ+BQ,IAAMR,GAAI,EAAJ,CARrC,CAUA,GAAO7P,KAAK8Q,GAAL,CAAUhB,IAAME,GAAhB,EAAwBgK,OAA1B,EACEha,KAAK8Q,GAAL,CAAUf,IAAMI,GAAhB,EAAwB6J,OAD1B,EAEEha,KAAK8Q,GAAL,CAAUZ,IAAME,GAAhB,EAAwB4J,OAF/B,CAE2C;;;CAM1C,GAAOha,KAAK8Q,GAAL,CAAUhB,IAAME,GAAhB,EAAwBiK,QAA1B,EACEja,KAAK8Q,GAAL,CAAUf,IAAMI,GAAhB,EAAwB8J,QAD1B,EAEEja,KAAK8Q,GAAL,CAAUZ,IAAME,GAAhB,EAAwB6J,QAF1B,EAGEja,KAAK8Q,GAAL,CAAUlB,IAAMK,GAAN,CAAYI,GAAZ,CAAkB,CAA5B,EAAkC4J,QAHzC,CAGsD;CAIrD,KAAK1Q,GAAL,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,EAEA,WAAA;CAEA;CAIDiG,MAAQxP,KAAKsV,EAAb,CAEA,OAAS,CAAE1F,IAAM,CAAR,EAAc,CAAvB,CACA,OAAS,CAAEK,IAAM,CAAR,EAAc,CAAvB,CACA,OAAS,CAAEI,IAAM,CAAR,EAAc,CAAvB,CACA,OAAS,CAAEP,IAAME,GAAR,EAAgB,CAAzB,CACA,OAAS,CAAED,IAAMI,GAAR,EAAgB,CAAzB,CACA,OAAS,CAAED,IAAME,GAAR,EAAgB,CAAzB,CAEA,GAAO8J,GAAKC,EAAP,EAAiBD,GAAKE,EAA3B,CAAkC;CAIjC,GAAKF,GAAKF,OAAV,CAAoB,CAEnB7Z,EAAI,CAAJ,CACA6N,EAAI,WAAJ,CACAC,EAAI,WAAJ,CAEA,CAND,IAMO,CAEN9N,EAAIH,KAAKkM,IAAL,CAAWgO,EAAX,CAAJ,CACAlM,EAAIqM,GAAKla,CAAT,CACA8N,EAAIqM,GAAKna,CAAT,CAEA,CAED,CAlBD,QAkBYga,GAAKC,EAAV,CAAe;CAIrB,GAAKD,GAAKH,OAAV,CAAoB,CAEnB7Z,EAAI,WAAJ,CACA6N,EAAI,CAAJ,CACAC,EAAI,WAAJ,CAEA,CAND,IAMO,CAEND,EAAIhO,KAAKkM,IAAL,CAAWiO,EAAX,CAAJ,CACAha,EAAIka,GAAKrM,CAAT,CACAC,EAAIsM,GAAKvM,CAAT,CAEA,CAED,CAlBM,IAkBA;CAIN,GAAKoM,GAAKJ,OAAV,CAAoB,CAEnB7Z,EAAI,WAAJ,CACA6N,EAAI,WAAJ,CACAC,EAAI,CAAJ,CAEA,CAND,IAMO,CAENA,EAAIjO,KAAKkM,IAAL,CAAWkO,EAAX,CAAJ,CACAja,EAAIma,GAAKrM,CAAT,CACAD,EAAIuM,GAAKtM,CAAT,CAEA,CAED,CAED,KAAK1E,GAAL,CAAUpJ,CAAV,CAAa6N,CAAb,CAAgBC,CAAhB,CAAmBuB,KAAnB,EAEA,WAAA;CAEA;CAID,MAAQxP,KAAKkM,IAAL,CAAW,CAAEkE,IAAMF,GAAR,GAAkBE,IAAMF,GAAxB,EACA,CAAEH,IAAMI,GAAR,GAAkBJ,IAAMI,GAAxB,CADA,CAEA,CAAEH,IAAMF,GAAR,GAAkBE,IAAMF,GAAxB,CAFX,CAAR;CAIA,GAAK9P,KAAK8Q,GAAL,CAAUvG,CAAV,EAAgB,KAArB,CAA6BA,EAAI,CAAJ;;CAK7B,KAAKpK,CAAL,CAAS,CAAEiQ,IAAMF,GAAR,EAAgB3F,CAAzB,CACA,KAAKyD,CAAL,CAAS,CAAE+B,IAAMI,GAAR,EAAgB5F,CAAzB,CACA,KAAK0D,CAAL,CAAS,CAAE+B,IAAMF,GAAR,EAAgBvF,CAAzB,CACA,KAAK2D,CAAL,CAASlO,KAAK8Y,IAAL,CAAW,CAAElJ,IAAMK,GAAN,CAAYI,GAAZ,CAAkB,CAApB,EAA0B,CAArC,CAAT,CAEA,WAAA,CAEA,CAxYwB,CA0YzBhF,IAAK,aAAW8F,CAAX,CAAe,CAEnB,KAAKhR,CAAL,CAASH,KAAKqL,GAAL,CAAU,KAAKlL,CAAf,CAAkBgR,EAAEhR,CAApB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKqL,GAAL,CAAU,KAAK2C,CAAf,CAAkBmD,EAAEnD,CAApB,CAAT,CACA,KAAKC,CAAL,CAASjO,KAAKqL,GAAL,CAAU,KAAK4C,CAAf,CAAkBkD,EAAElD,CAApB,CAAT,CACA,KAAKC,CAAL,CAASlO,KAAKqL,GAAL,CAAU,KAAK6C,CAAf,CAAkBiD,EAAEjD,CAApB,CAAT,CAEA,WAAA,CAEA,CAnZwB,CAqZzB1B,IAAK,aAAW2E,CAAX,CAAe,CAEnB,KAAKhR,CAAL,CAASH,KAAKwM,GAAL,CAAU,KAAKrM,CAAf,CAAkBgR,EAAEhR,CAApB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKwM,GAAL,CAAU,KAAKwB,CAAf,CAAkBmD,EAAEnD,CAApB,CAAT,CACA,KAAKC,CAAL,CAASjO,KAAKwM,GAAL,CAAU,KAAKyB,CAAf,CAAkBkD,EAAElD,CAApB,CAAT,CACA,KAAKC,CAAL,CAASlO,KAAKwM,GAAL,CAAU,KAAK0B,CAAf,CAAkBiD,EAAEjD,CAApB,CAAT,CAEA,WAAA,CAEA,CA9ZwB,CAgazBxD,MAAO,eAAWW,GAAX,CAAgBmB,GAAhB,CAAsB;CAI5B,KAAKrM,CAAL,CAASH,KAAKwM,GAAL,CAAUnB,IAAIlL,CAAd,CAAiBH,KAAKqL,GAAL,CAAUmB,IAAIrM,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKwM,GAAL,CAAUnB,IAAI2C,CAAd,CAAiBhO,KAAKqL,GAAL,CAAUmB,IAAIwB,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASjO,KAAKwM,GAAL,CAAUnB,IAAI4C,CAAd,CAAiBjO,KAAKqL,GAAL,CAAUmB,IAAIyB,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASlO,KAAKwM,GAAL,CAAUnB,IAAI6C,CAAd,CAAiBlO,KAAKqL,GAAL,CAAUmB,IAAI0B,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CAEA,WAAA,CAEA,CA3awB,CA6azB2G,YAAa,UAAY,CAExB,OAAA,CAASrI,GAAT,CAEA,2BAAO,CAAsBsI,MAAtB,CAA8BC,MAA9B,CAAuC,CAE7C,GAAK1J,MAAQtL,SAAb,CAAyB,CAExBsL,IAAM,UAAUuO,OAAV,EAAN,CACApN,IAAM,UAAUoN,OAAV,EAAN,CAEA,CAEDvO,IAAI9B,GAAJ,CAASuL,MAAT,CAAiBA,MAAjB,CAAyBA,MAAzB,CAAiCA,MAAjC,EACAtI,IAAIjD,GAAJ,CAASwL,MAAT,CAAiBA,MAAjB,CAAyBA,MAAzB,CAAiCA,MAAjC,EAEA,YAAYrK,KAAL,CAAYW,GAAZ,CAAiBmB,GAAjB,CAAP,CAEA,CAdD,CAgBA,CApBY,EA7aY,CAmczBvC,MAAO,gBAAY,CAElB,KAAK9J,CAAL,CAASH,KAAKiK,KAAL,CAAY,KAAK9J,CAAjB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKiK,KAAL,CAAY,KAAK+D,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASjO,KAAKiK,KAAL,CAAY,KAAKgE,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASlO,KAAKiK,KAAL,CAAY,KAAKiE,CAAjB,CAAT,CAEA,WAAA,CAEA,CA5cwB,CA8czB+G,KAAM,eAAY,CAEjB,KAAK9U,CAAL,CAASH,KAAKiV,IAAL,CAAW,KAAK9U,CAAhB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKiV,IAAL,CAAW,KAAKjH,CAAhB,CAAT,CACA,KAAKC,CAAL,CAASjO,KAAKiV,IAAL,CAAW,KAAKhH,CAAhB,CAAT,CACA,KAAKC,CAAL,CAASlO,KAAKiV,IAAL,CAAW,KAAK/G,CAAhB,CAAT,CAEA,WAAA,CAEA,CAvdwB,CAydzBgH,MAAO,gBAAY,CAElB,KAAK/U,CAAL,CAASH,KAAKkV,KAAL,CAAY,KAAK/U,CAAjB,CAAT,CACA,KAAK6N,CAAL,CAAShO,KAAKkV,KAAL,CAAY,KAAKlH,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASjO,KAAKkV,KAAL,CAAY,KAAKjH,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASlO,KAAKkV,KAAL,CAAY,KAAKhH,CAAjB,CAAT,CAEA,WAAA,CAEA,CAlewB,CAoezBiH,YAAa,sBAAY,CAExB,KAAKhV,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiBH,KAAKiV,IAAL,CAAW,KAAK9U,CAAhB,CAAjB,CAAuCH,KAAKiK,KAAL,CAAY,KAAK9J,CAAjB,CAAhD,CACA,KAAK6N,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiBhO,KAAKiV,IAAL,CAAW,KAAKjH,CAAhB,CAAjB,CAAuChO,KAAKiK,KAAL,CAAY,KAAK+D,CAAjB,CAAhD,CACA,KAAKC,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiBjO,KAAKiV,IAAL,CAAW,KAAKhH,CAAhB,CAAjB,CAAuCjO,KAAKiK,KAAL,CAAY,KAAKgE,CAAjB,CAAhD,CACA,KAAKC,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiBlO,KAAKiV,IAAL,CAAW,KAAK/G,CAAhB,CAAjB,CAAuClO,KAAKiK,KAAL,CAAY,KAAKiE,CAAjB,CAAhD,CAEA,WAAA,CAEA,CA7ewB,CA+ezBkH,OAAQ,iBAAY,CAEnB,KAAKjV,CAAL,CAAS,CAAE,KAAKA,CAAhB,CACA,KAAK6N,CAAL,CAAS,CAAE,KAAKA,CAAhB,CACA,KAAKC,CAAL,CAAS,CAAE,KAAKA,CAAhB,CACA,KAAKC,CAAL,CAAS,CAAE,KAAKA,CAAhB,CAEA,WAAA,CAEA,CAxfwB,CA0fzB0C,IAAK,aAAWO,CAAX,CAAe,CAEnB,YAAYhR,CAAL,CAASgR,EAAEhR,CAAX,CAAe,KAAK6N,CAAL,CAASmD,EAAEnD,CAA1B,CAA8B,KAAKC,CAAL,CAASkD,EAAElD,CAAzC,CAA6C,KAAKC,CAAL,CAASiD,EAAEjD,CAA/D,CAEA,CA9fwB,CAggBzBkD,SAAU,mBAAY,CAErB,YAAYjR,CAAL,CAAS,KAAKA,CAAd,CAAkB,KAAK6N,CAAL,CAAS,KAAKA,CAAhC,CAAoC,KAAKC,CAAL,CAAS,KAAKA,CAAlD,CAAsD,KAAKC,CAAL,CAAS,KAAKA,CAA3E,CAEA,CApgBwB,CAsgBzBlN,OAAQ,iBAAY,CAEnB,YAAYkL,IAAL,CAAW,KAAK/L,CAAL,CAAS,KAAKA,CAAd,CAAkB,KAAK6N,CAAL,CAAS,KAAKA,CAAhC,CAAoC,KAAKC,CAAL,CAAS,KAAKA,CAAlD,CAAsD,KAAKC,CAAL,CAAS,KAAKA,CAA/E,CAAP,CAEA,CA1gBwB,CA4gBzBmH,gBAAiB,0BAAY,CAE5B,YAAYvE,GAAL,CAAU,KAAK3Q,CAAf,EAAqBH,KAAK8Q,GAAL,CAAU,KAAK9C,CAAf,CAArB,CAA0ChO,KAAK8Q,GAAL,CAAU,KAAK7C,CAAf,CAA1C,CAA+DjO,KAAK8Q,GAAL,CAAU,KAAK5C,CAAf,CAAtE,CAEA,CAhhBwB,CAkhBzB8C,UAAW,oBAAY,CAEtB,YAAY4D,YAAL,CAAmB,KAAK5T,MAAL,EAAnB,CAAP,CAEA,CAthBwB,CAwhBzB2U,UAAW,mBAAW3U,MAAX,CAAoB,CAE9B,YAAYsM,cAAL,CAAqBtM,OAAS,KAAKA,MAAL,EAA9B,CAAP,CAEA,CA5hBwB,CA8hBzBuM,KAAM,cAAW4D,CAAX,CAAc3D,KAAd,CAAsB,CAE3B,KAAKrN,CAAL,EAAU,CAAEgR,EAAEhR,CAAF,CAAM,KAAKA,CAAb,EAAmBqN,KAA7B,CACA,KAAKQ,CAAL,EAAU,CAAEmD,EAAEnD,CAAF,CAAM,KAAKA,CAAb,EAAmBR,KAA7B,CACA,KAAKS,CAAL,EAAU,CAAEkD,EAAElD,CAAF,CAAM,KAAKA,CAAb,EAAmBT,KAA7B,CACA,KAAKU,CAAL,EAAU,CAAEiD,EAAEjD,CAAF,CAAM,KAAKA,CAAb,EAAmBV,KAA7B,CAEA,WAAA,CAEA,CAviBwB,CAyiBzBoI,YAAa,qBAAWlF,EAAX,CAAemF,EAAf,CAAmBrI,KAAnB,CAA2B,CAEvC,YAAYgH,UAAL,CAAiBqB,EAAjB,CAAqBnF,EAArB,EAA0BpD,cAA1B,CAA0CE,KAA1C,EAAkDR,GAAlD,CAAuD0D,EAAvD,CAAP,CAEA,CA7iBwB,CA+iBzBjD,OAAQ,gBAAW0D,CAAX,CAAe,CAEtB,SAAahR,CAAF,GAAQ,KAAKA,CAAf,EAAwBgR,EAAEnD,CAAF,GAAQ,KAAKA,CAArC,EAA8CmD,EAAElD,CAAF,GAAQ,KAAKA,CAA3D,EAAoEkD,EAAEjD,CAAF,GAAQ,KAAKA,CAA1F,CAEA,CAnjBwB,CAqjBzBP,UAAW,mBAAWC,KAAX,CAAkBC,MAAlB,CAA2B,CAErC,GAAKA,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5B,KAAK1N,CAAL,CAASyN,MAAOC,MAAP,CAAT,CACA,KAAKG,CAAL,CAASJ,MAAOC,OAAS,CAAhB,CAAT,CACA,KAAKI,CAAL,CAASL,MAAOC,OAAS,CAAhB,CAAT,CACA,KAAKK,CAAL,CAASN,MAAOC,OAAS,CAAhB,CAAT,CAEA,WAAA,CAEA,CAhkBwB,CAkkBzBC,QAAS,iBAAWF,KAAX,CAAkBC,MAAlB,CAA2B,CAEnC,GAAKD,QAAU7N,SAAf,CAA2B6N,MAAQ,EAAR,CAC3B,GAAKC,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5BD,MAAOC,MAAP,EAAkB,KAAK1N,CAAvB,CACAyN,MAAOC,OAAS,CAAhB,EAAsB,KAAKG,CAA3B,CACAJ,MAAOC,OAAS,CAAhB,EAAsB,KAAKI,CAA3B,CACAL,MAAOC,OAAS,CAAhB,EAAsB,KAAKK,CAA3B,CAEA,YAAA,CAEA,CA9kBwB,CAglBzB4H,cAAe,uBAAWC,SAAX,CAAsBjV,KAAtB,CAA6B+M,MAA7B,CAAsC,CAEpD,GAAKA,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5B/M,MAAQA,MAAQiV,UAAUC,QAAlB,CAA6BnI,MAArC,CAEA,KAAK1N,CAAL,CAAS4V,UAAUnI,KAAV,CAAiB9M,KAAjB,CAAT,CACA,KAAKkN,CAAL,CAAS+H,UAAUnI,KAAV,CAAiB9M,MAAQ,CAAzB,CAAT,CACA,KAAKmN,CAAL,CAAS8H,UAAUnI,KAAV,CAAiB9M,MAAQ,CAAzB,CAAT,CACA,KAAKoN,CAAL,CAAS6H,UAAUnI,KAAV,CAAiB9M,MAAQ,CAAzB,CAAT,CAEA,WAAA,CAEA,CA7lBwB,CAA1B;;;;;IAymBAlB,MAAMgP,KAAN,CAAc,SAAWzO,CAAX,CAAc6N,CAAd,CAAiBC,CAAjB,CAAoBc,KAApB,CAA4B,CAEzC,KAAKZ,EAAL,CAAUhO,GAAK,CAAf,CACA,KAAKiO,EAAL,CAAUJ,GAAK,CAAf,CACA,KAAKK,EAAL,CAAUJ,GAAK,CAAf,CACA,KAAKuM,MAAL,CAAczL,OAASnP,MAAMgP,KAAN,CAAY6L,YAAnC,CAEA,CAPD,CASA7a,MAAMgP,KAAN,CAAY8L,cAAZ,CAA6B,CAAE,KAAF,CAAS,KAAT,CAAgB,KAAhB,CAAuB,KAAvB,CAA8B,KAA9B,CAAqC,KAArC,CAA7B,CAEA9a,MAAMgP,KAAN,CAAY6L,YAAZ,CAA2B,KAA3B,CAEA7a,MAAMgP,KAAN,CAAYvO,SAAZ,CAAwB,CAEvBoJ,YAAa7J,MAAMgP,KAFI,CAIvB,KAAA,EAAS,CAER,YAAYT,EAAZ,CAEA,CARsB,CAUvB,KAAA,CAAQzE,KAAR,CAAgB,CAEf,KAAKyE,EAAL,CAAUzE,KAAV,CACA,KAAK6E,gBAAL,GAEA,CAfsB,CAiBvB,KAAA,EAAS,CAER,YAAYH,EAAZ,CAEA,CArBsB,CAuBvB,KAAA,CAAQ1E,KAAR,CAAgB,CAEf,KAAK0E,EAAL,CAAU1E,KAAV,CACA,KAAK6E,gBAAL,GAEA,CA5BsB,CA8BvB,KAAA,EAAS,CAER,YAAYF,EAAZ,CAEA,CAlCsB,CAoCvB,KAAA,CAAQ3E,KAAR,CAAgB,CAEf,KAAK2E,EAAL,CAAU3E,KAAV,CACA,KAAK6E,gBAAL,GAEA,CAzCsB,CA2CvB,SAAA,EAAa,CAEZ,YAAYiM,MAAZ,CAEA,CA/CsB,CAiDvB,SAAA,CAAY9Q,KAAZ,CAAoB,CAEnB,KAAK8Q,MAAL,CAAc9Q,KAAd,CACA,KAAK6E,gBAAL,GAEA,CAtDsB,CAwDvBhF,IAAK,aAAWpJ,CAAX,CAAc6N,CAAd,CAAiBC,CAAjB,CAAoBc,KAApB,CAA4B,CAEhC,KAAKZ,EAAL,CAAUhO,CAAV,CACA,KAAKiO,EAAL,CAAUJ,CAAV,CACA,KAAKK,EAAL,CAAUJ,CAAV,CACA,KAAKuM,MAAL,CAAczL,OAAS,KAAKyL,MAA5B,CAEA,KAAKjM,gBAAL,GAEA,WAAA,CAEA,CAnEsB,CAqEvB5C,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,CAAsB,KAAK0E,EAA3B,CAA+B,KAAKC,EAApC,CAAwC,KAAKC,EAA7C,CAAiD,KAAKmM,MAAtD,CAAP,CAEA,CAzEsB,CA2EvB7Q,KAAM,cAAW+E,KAAX,CAAmB,CAExB,KAAKP,EAAL,CAAUO,MAAMP,EAAhB,CACA,KAAKC,EAAL,CAAUM,MAAMN,EAAhB,CACA,KAAKC,EAAL,CAAUK,MAAML,EAAhB,CACA,KAAKmM,MAAL,CAAc9L,MAAM8L,MAApB,CAEA,KAAKjM,gBAAL,GAEA,WAAA,CAEA,CAtFsB,CAwFvBmB,sBAAuB,+BAAWzE,CAAX,CAAc8D,KAAd,CAAqBJ,MAArB,CAA8B,CAEpD,UAAY/O,MAAMI,IAAN,CAAW0K,KAAvB;CAIA,OAASO,EAAE0E,QAAX,CACA,QAAUE,GAAI,CAAJ,CAAV,CAAmBC,IAAMD,GAAI,CAAJ,CAAzB,CAAkCE,IAAMF,GAAI,CAAJ,CAAxC,CACA,QAAUA,GAAI,CAAJ,CAAV,CAAmBI,IAAMJ,GAAI,CAAJ,CAAzB,CAAkCK,IAAML,GAAI,CAAJ,CAAxC,CACA,QAAUA,GAAI,CAAJ,CAAV,CAAmBO,IAAMP,GAAI,CAAJ,CAAzB,CAAkCQ,IAAMR,GAAI,EAAJ,CAAxC,CAEAd,MAAQA,OAAS,KAAKyL,MAAtB,CAEA,GAAKzL,QAAU,KAAf,CAAuB,CAEtB,KAAKX,EAAL,CAAUpO,KAAK2a,IAAL,CAAWjQ,MAAOqF,GAAP,CAAY,CAAE,CAAd,CAAiB,CAAjB,CAAX,CAAV,CAEA,GAAK/P,KAAK8Q,GAAL,CAAUf,GAAV,EAAkB,OAAvB,CAAiC,CAEhC,KAAK5B,EAAL,CAAUnO,KAAKoS,KAAL,CAAY,CAAElC,GAAd,CAAmBG,GAAnB,CAAV,CACA,KAAKhC,EAAL,CAAUrO,KAAKoS,KAAL,CAAY,CAAEtC,GAAd,CAAmBF,GAAnB,CAAV,CAEA,CALD,IAKO,CAEN,KAAKzB,EAAL,CAAUnO,KAAKoS,KAAL,CAAYhC,GAAZ,CAAiBH,GAAjB,CAAV,CACA,KAAK5B,EAAL,CAAU,CAAV,CAEA,CAED,CAhBD,QAgBYU,QAAU,KAAf,CAAuB,CAE7B,KAAKZ,EAAL,CAAUnO,KAAK2a,IAAL,CAAW,CAAEjQ,MAAOwF,GAAP,CAAY,CAAE,CAAd,CAAiB,CAAjB,CAAb,CAAV,CAEA,GAAKlQ,KAAK8Q,GAAL,CAAUZ,GAAV,EAAkB,OAAvB,CAAiC,CAEhC,KAAK9B,EAAL,CAAUpO,KAAKoS,KAAL,CAAYrC,GAAZ,CAAiBM,GAAjB,CAAV,CACA,KAAKhC,EAAL,CAAUrO,KAAKoS,KAAL,CAAYpC,GAAZ,CAAiBC,GAAjB,CAAV,CAEA,CALD,IAKO,CAEN,KAAK7B,EAAL,CAAUpO,KAAKoS,KAAL,CAAY,CAAEjC,GAAd,CAAmBP,GAAnB,CAAV,CACA,KAAKvB,EAAL,CAAU,CAAV,CAEA,CAED,CAhBM,QAgBKU,QAAU,KAAf,CAAuB,CAE7B,KAAKZ,EAAL,CAAUnO,KAAK2a,IAAL,CAAWjQ,MAAO0F,GAAP,CAAY,CAAE,CAAd,CAAiB,CAAjB,CAAX,CAAV,CAEA,GAAKpQ,KAAK8Q,GAAL,CAAUV,GAAV,EAAkB,OAAvB,CAAiC,CAEhC,KAAKhC,EAAL,CAAUpO,KAAKoS,KAAL,CAAY,CAAEjC,GAAd,CAAmBE,GAAnB,CAAV,CACA,KAAKhC,EAAL,CAAUrO,KAAKoS,KAAL,CAAY,CAAEtC,GAAd,CAAmBG,GAAnB,CAAV,CAEA,CALD,IAKO,CAEN,KAAK7B,EAAL,CAAU,CAAV,CACA,KAAKC,EAAL,CAAUrO,KAAKoS,KAAL,CAAYpC,GAAZ,CAAiBJ,GAAjB,CAAV,CAEA,CAED,CAhBM,QAgBKb,QAAU,KAAf,CAAuB,CAE7B,KAAKX,EAAL,CAAUpO,KAAK2a,IAAL,CAAW,CAAEjQ,MAAOyF,GAAP,CAAY,CAAE,CAAd,CAAiB,CAAjB,CAAb,CAAV,CAEA,GAAKnQ,KAAK8Q,GAAL,CAAUX,GAAV,EAAkB,OAAvB,CAAiC,CAEhC,KAAKhC,EAAL,CAAUnO,KAAKoS,KAAL,CAAYhC,GAAZ,CAAiBC,GAAjB,CAAV,CACA,KAAKhC,EAAL,CAAUrO,KAAKoS,KAAL,CAAYpC,GAAZ,CAAiBJ,GAAjB,CAAV,CAEA,CALD,IAKO,CAEN,KAAKzB,EAAL,CAAU,CAAV,CACA,KAAKE,EAAL,CAAUrO,KAAKoS,KAAL,CAAY,CAAEtC,GAAd,CAAmBG,GAAnB,CAAV,CAEA,CAED,CAhBM,QAgBKlB,QAAU,KAAf,CAAuB,CAE7B,KAAKV,EAAL,CAAUrO,KAAK2a,IAAL,CAAWjQ,MAAOsF,GAAP,CAAY,CAAE,CAAd,CAAiB,CAAjB,CAAX,CAAV,CAEA,GAAKhQ,KAAK8Q,GAAL,CAAUd,GAAV,EAAkB,OAAvB,CAAiC,CAEhC,KAAK7B,EAAL,CAAUnO,KAAKoS,KAAL,CAAY,CAAElC,GAAd,CAAmBD,GAAnB,CAAV,CACA,KAAK7B,EAAL,CAAUpO,KAAKoS,KAAL,CAAY,CAAEjC,GAAd,CAAmBP,GAAnB,CAAV,CAEA,CALD,IAKO,CAEN,KAAKzB,EAAL,CAAU,CAAV,CACA,KAAKC,EAAL,CAAUpO,KAAKoS,KAAL,CAAYrC,GAAZ,CAAiBM,GAAjB,CAAV,CAEA,CAED,CAhBM,QAgBKtB,QAAU,KAAf,CAAuB,CAE7B,KAAKV,EAAL,CAAUrO,KAAK2a,IAAL,CAAW,CAAEjQ,MAAOoF,GAAP,CAAY,CAAE,CAAd,CAAiB,CAAjB,CAAb,CAAV,CAEA,GAAK9P,KAAK8Q,GAAL,CAAUhB,GAAV,EAAkB,OAAvB,CAAiC,CAEhC,KAAK3B,EAAL,CAAUnO,KAAKoS,KAAL,CAAYhC,GAAZ,CAAiBH,GAAjB,CAAV,CACA,KAAK7B,EAAL,CAAUpO,KAAKoS,KAAL,CAAYrC,GAAZ,CAAiBH,GAAjB,CAAV,CAEA,CALD,IAKO,CAEN,KAAKzB,EAAL,CAAUnO,KAAKoS,KAAL,CAAY,CAAElC,GAAd,CAAmBG,GAAnB,CAAV,CACA,KAAKjC,EAAL,CAAU,CAAV,CAEA,CAED,CAhBM,IAgBA,CAENrD,QAAQC,IAAR,CAAc,kEAAoE+D,KAAlF,EAEA,CAED,KAAKyL,MAAL,CAAczL,KAAd,CAEA,GAAKJ,SAAW,KAAhB,CAAwB,KAAKJ,gBAAL,GAExB,WAAA,CAEA,CAjNsB,CAmNvBqM,kBAAmB,UAAY,CAE9B,UAAA,CAEA,gBAAkBxQ,CAAX,CAAc2E,KAAd,CAAqBJ,MAArB,CAA8B,CAEpC,GAAK6I,SAAWzX,SAAhB,CAA4ByX,OAAS,UAAUC,OAAV,EAAT,CAE5BD,OAAOqD,0BAAP,CAAmCzQ,CAAnC,EAEA,YAAYsF,qBAAL,CAA4B8H,MAA5B,CAAoCzI,KAApC,CAA2CJ,MAA3C,CAAP,CAEA,CARD,CAUA,CAdkB,EAnNI,CAmOvBmM,eAAgB,wBAAW3J,CAAX,CAAcpC,KAAd,CAAsB,CAErC,YAAYxF,GAAL,CAAU4H,EAAEhR,CAAZ,CAAegR,EAAEnD,CAAjB,CAAoBmD,EAAElD,CAAtB,CAAyBc,OAAS,KAAKyL,MAAvC,CAAP,CAEA,CAvOsB,CAyOvBO,QAAS,UAAY;CAIpB,MAAQ,UAAUhN,UAAV,EAAR,CAEA,gBAAkBiN,QAAX,CAAsB,CAE5B5Q,EAAEqE,YAAF,CAAgB,IAAhB,EAEA,YAAYmM,iBAAL,CAAwBxQ,CAAxB,CAA2B4Q,QAA3B,CAAP,CAEA,CAND,CAQA,CAdQ,EAzOc,CAyPvBvN,OAAQ,gBAAWiB,KAAX,CAAmB,CAE1B,aAAeP,EAAN,GAAa,KAAKA,EAApB,EAA8BO,MAAMN,EAAN,GAAa,KAAKA,EAAhD,EAA0DM,MAAML,EAAN,GAAa,KAAKA,EAA5E,EAAsFK,MAAM8L,MAAN,GAAiB,KAAKA,MAAnH,CAEA,CA7PsB,CA+PvB7M,UAAW,mBAAWC,KAAX,CAAmB,CAE7B,KAAKO,EAAL,CAAUP,MAAO,CAAP,CAAV,CACA,KAAKQ,EAAL,CAAUR,MAAO,CAAP,CAAV,CACA,KAAKS,EAAL,CAAUT,MAAO,CAAP,CAAV,CACA,GAAKA,MAAO,CAAP,IAAe7N,SAApB,CAAgC,KAAKya,MAAL,CAAc5M,MAAO,CAAP,CAAd,CAEhC,KAAKW,gBAAL,GAEA,WAAA,CAEA,CA1QsB,CA4QvBT,QAAS,iBAAWF,KAAX,CAAkBC,MAAlB,CAA2B,CAEnC,GAAKD,QAAU7N,SAAf,CAA2B6N,MAAQ,EAAR,CAC3B,GAAKC,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5BD,MAAOC,MAAP,EAAkB,KAAKM,EAAvB,CACAP,MAAOC,OAAS,CAAhB,EAAsB,KAAKO,EAA3B,CACAR,MAAOC,OAAS,CAAhB,EAAsB,KAAKQ,EAA3B,CACAT,MAAOC,OAAS,CAAhB,EAAsB,KAAK2M,MAA3B,CAEA,YAAA,CAEA,CAxRsB,CA0RvBS,UAAW,mBAAWC,cAAX,CAA4B,CAEtC,GAAKA,cAAL,CAAsB,CAErB,sBAAsB3R,GAAf,CAAoB,KAAK4E,EAAzB,CAA6B,KAAKC,EAAlC,CAAsC,KAAKC,EAA3C,CAAP,CAEA,CAJD,IAIO,CAEN,iBAAiBsC,OAAV,CAAmB,KAAKxC,EAAxB,CAA4B,KAAKC,EAAjC,CAAqC,KAAKC,EAA1C,CAAP,CAEA,CAED,CAtSsB,CAwSvBmE,SAAU,kBAAWC,QAAX,CAAsB,CAE/B,KAAKlE,gBAAL,CAAwBkE,QAAxB,CAEA,WAAA,CAEA,CA9SsB,CAgTvBlE,iBAAkB,2BAAY,EAhTP,CAAxB;;;IA0TA3O,MAAMub,KAAN,CAAc,SAAWC,KAAX,CAAkBC,GAAlB,CAAwB,CAErC,KAAKD,KAAL,CAAeA,QAAUrb,SAAZ,CAA0Bqb,KAA1B,CAAkC,UAAUzK,OAAV,EAA/C,CACA,KAAK0K,GAAL,CAAaA,MAAQtb,SAAV,CAAwBsb,GAAxB,CAA8B,UAAU1K,OAAV,EAAzC,CAEA,CALD,CAOA/Q,MAAMub,KAAN,CAAY9a,SAAZ,CAAwB,CAEvBoJ,YAAa7J,MAAMub,KAFI,CAIvB5R,IAAK,aAAW6R,KAAX,CAAkBC,GAAlB,CAAwB,CAE5B,KAAKD,KAAL,CAAWzR,IAAX,CAAiByR,KAAjB,EACA,KAAKC,GAAL,CAAS1R,IAAT,CAAe0R,GAAf,EAEA,WAAA,CAEA,CAXsB,CAavB1P,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CAjBsB,CAmBvBA,KAAM,cAAW2R,IAAX,CAAkB,CAEvB,KAAKF,KAAL,CAAWzR,IAAX,CAAiB2R,KAAKF,KAAtB,EACA,KAAKC,GAAL,CAAS1R,IAAT,CAAe2R,KAAKD,GAApB,EAEA,WAAA,CAEA,CA1BsB,CA4BvBnF,OAAQ,gBAAW3J,cAAX,CAA4B,CAEnC,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CACA,cAAc0D,UAAP,CAAmB,KAAK+G,KAAxB,CAA+B,KAAKC,GAApC,EAA0C/N,cAA1C,CAA0D,GAA1D,CAAP,CAEA,CAjCsB,CAmCvBV,MAAO,eAAWL,cAAX,CAA4B,CAElC,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CACA,cAAc6D,UAAP,CAAmB,KAAK6G,GAAxB,CAA6B,KAAKD,KAAlC,CAAP,CAEA,CAxCsB,CA0CvBG,WAAY,qBAAY,CAEvB,YAAYH,KAAL,CAAW5F,iBAAX,CAA8B,KAAK6F,GAAnC,CAAP,CAEA,CA9CsB,CAgDvBG,SAAU,mBAAY,CAErB,YAAYJ,KAAL,CAAW7F,UAAX,CAAuB,KAAK8F,GAA5B,CAAP,CAEA,CApDsB,CAsDvBI,GAAI,YAAWpR,CAAX,CAAckC,cAAd,CAA+B,CAElC,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CAEA,YAAY/D,KAAL,CAAY8O,MAAZ,EAAqBpO,cAArB,CAAqCjD,CAArC,EAAyC2C,GAAzC,CAA8C,KAAKoO,KAAnD,CAAP,CAEA,CA5DsB,CA8DvBO,6BAA8B,UAAY,CAEzC,WAAa,UAAUhL,OAAV,EAAb,CACA,aAAe,UAAUA,OAAV,EAAf,CAEA,gBAAkBiL,KAAX,CAAkBC,WAAlB,CAAgC,CAEtCC,OAAOtH,UAAP,CAAmBoH,KAAnB,CAA0B,KAAKR,KAA/B,EACAW,SAASvH,UAAT,CAAqB,KAAK6G,GAA1B,CAA+B,KAAKD,KAApC,EAEA,cAAgBW,SAASnL,GAAT,CAAcmL,QAAd,CAAhB,CACA,oBAAsBA,SAASnL,GAAT,CAAckL,MAAd,CAAtB,CAEA,MAAQE,gBAAkBC,SAA1B,CAEA,GAAKJ,WAAL,CAAmB,CAElBxR,EAAIzK,MAAMI,IAAN,CAAW0K,KAAX,CAAkBL,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,CAAJ,CAEA,CAED,QAAA,CAEA,CAlBD,CAoBA,CAzB6B,EA9DP,CAyFvB6R,oBAAqB,6BAAWN,KAAX,CAAkBC,WAAlB,CAA+BtP,cAA/B,CAAgD,CAEpE,MAAQ,KAAKoP,4BAAL,CAAmCC,KAAnC,CAA0CC,WAA1C,CAAR,CAEA,WAAatP,gBAAkB,UAAUoE,OAAV,EAA/B,CAEA,YAAY/D,KAAL,CAAY8O,MAAZ,EAAqBpO,cAArB,CAAqCjD,CAArC,EAAyC2C,GAAzC,CAA8C,KAAKoO,KAAnD,CAAP,CAEA,CAjGsB,CAmGvBzE,aAAc,sBAAWa,MAAX,CAAoB,CAEjC,KAAK4D,KAAL,CAAWzE,YAAX,CAAyBa,MAAzB,EACA,KAAK6D,GAAL,CAAS1E,YAAT,CAAuBa,MAAvB,EAEA,WAAA,CAEA,CA1GsB,CA4GvB/J,OAAQ,gBAAW6N,IAAX,CAAkB,CAEzB,YAAYF,KAAL,CAAW3N,MAAX,CAAmB,KAAK2N,KAAxB,GAAmCE,KAAKD,GAAL,CAAS5N,MAAT,CAAiB,KAAK4N,GAAtB,CAA1C,CAEA,CAhHsB,CAAxB;;;IA0HAzb,MAAMuc,IAAN,CAAa,SAAW9Q,GAAX,CAAgBmB,GAAhB,CAAsB,CAElC,KAAKnB,GAAL,CAAaA,MAAQtL,SAAV,CAAwBsL,GAAxB,CAA8B,UAAU2I,OAAV,CAAmB,CAAEoI,QAArB,CAA+B,CAAEA,QAAjC,CAAzC,CACA,KAAK5P,GAAL,CAAaA,MAAQzM,SAAV,CAAwByM,GAAxB,CAA8B,UAAUwH,OAAV,CAAmB,CAAEoI,QAArB,CAA+B,CAAEA,QAAjC,CAAzC,CAEA,CALD,CAOAxc,MAAMuc,IAAN,CAAW9b,SAAX,CAAuB,CAEtBoJ,YAAa7J,MAAMuc,IAFG,CAItB5S,IAAK,aAAW8B,GAAX,CAAgBmB,GAAhB,CAAsB,CAE1B,KAAKnB,GAAL,CAAS1B,IAAT,CAAe0B,GAAf,EACA,KAAKmB,GAAL,CAAS7C,IAAT,CAAe6C,GAAf,EAEA,WAAA,CAEA,CAXqB,CAatB6P,cAAe,uBAAWC,MAAX,CAAoB,CAElC,KAAKC,SAAL,GAEA,IAAM,MAAQ,CAAR,CAAWC,GAAKF,OAAOtb,MAA7B,CAAqCyb,EAAID,EAAzC,CAA6CC,GAA7C,CAAoD,CAEnD,KAAKC,aAAL,CAAoBJ,OAAQG,CAAR,CAApB,EAEA,CAED,WAAA,CAEA,CAzBqB,CA2BtBE,qBAAsB,UAAY,CAEjC,OAAS,UAAU3I,OAAV,EAAT,CAEA,gBAAkBkC,MAAX,CAAmB1K,IAAnB,CAA0B,CAEhC,aAAekF,GAAG/G,IAAH,CAAS6B,IAAT,EAAgB8B,cAAhB,CAAgC,GAAhC,CAAf,CACA,KAAKjC,GAAL,CAAS1B,IAAT,CAAeuM,MAAf,EAAwB3B,GAAxB,CAA6BqI,QAA7B,EACA,KAAKpQ,GAAL,CAAS7C,IAAT,CAAeuM,MAAf,EAAwBlJ,GAAxB,CAA6B4P,QAA7B,EAEA,WAAA,CAEA,CARD,CAUA,CAdqB,EA3BA,CA2CtBjR,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CA/CqB,CAiDtBA,KAAM,cAAWkT,GAAX,CAAiB,CAEtB,KAAKxR,GAAL,CAAS1B,IAAT,CAAekT,IAAIxR,GAAnB,EACA,KAAKmB,GAAL,CAAS7C,IAAT,CAAekT,IAAIrQ,GAAnB,EAEA,WAAA,CAEA,CAxDqB,CA0DtB+P,UAAW,oBAAY,CAEtB,KAAKlR,GAAL,CAASlL,CAAT,CAAa,KAAKkL,GAAL,CAAS2C,CAAT,CAAa,CAAEoO,QAA5B,CACA,KAAK5P,GAAL,CAASrM,CAAT,CAAa,KAAKqM,GAAL,CAASwB,CAAT,CAAa,CAAEoO,QAA5B,CAEA,WAAA,CAEA,CAjEqB,CAmEtBU,QAAS,kBAAY;CAIpB,YAActQ,GAAL,CAASrM,CAAT,CAAa,KAAKkL,GAAL,CAASlL,CAAxB,EAAiC,KAAKqM,GAAL,CAASwB,CAAT,CAAa,KAAK3C,GAAL,CAAS2C,CAA9D,CAEA,CAzEqB,CA2EtBkI,OAAQ,gBAAW3J,cAAX,CAA4B,CAEnC,WAAaA,gBAAkB,UAAUyH,OAAV,EAA/B,CACA,cAAcK,UAAP,CAAmB,KAAKhJ,GAAxB,CAA6B,KAAKmB,GAAlC,EAAwCc,cAAxC,CAAwD,GAAxD,CAAP,CAEA,CAhFqB,CAkFtB9B,KAAM,cAAWe,cAAX,CAA4B,CAEjC,WAAaA,gBAAkB,UAAUyH,OAAV,EAA/B,CACA,cAAcQ,UAAP,CAAmB,KAAKhI,GAAxB,CAA6B,KAAKnB,GAAlC,CAAP,CAEA,CAvFqB,CAyFtBqR,cAAe,uBAAWd,KAAX,CAAmB,CAEjC,KAAKvQ,GAAL,CAASA,GAAT,CAAcuQ,KAAd,EACA,KAAKpP,GAAL,CAASA,GAAT,CAAcoP,KAAd,EAEA,WAAA,CAEA,CAhGqB,CAkGtBmB,eAAgB,wBAAWvE,MAAX,CAAoB,CAEnC,KAAKnN,GAAL,CAASkJ,GAAT,CAAciE,MAAd,EACA,KAAKhM,GAAL,CAASQ,GAAT,CAAcwL,MAAd,EAEA,WAAA,CAEA,CAzGqB,CA2GtBwE,eAAgB,wBAAWjT,MAAX,CAAoB,CAEnC,KAAKsB,GAAL,CAAS+B,SAAT,CAAoB,CAAErD,MAAtB,EACA,KAAKyC,GAAL,CAASY,SAAT,CAAoBrD,MAApB,EAEA,WAAA,CAEA,CAlHqB,CAoHtBkT,cAAe,uBAAWrB,KAAX,CAAmB,CAEjC,GAAKA,MAAMzb,CAAN,CAAU,KAAKkL,GAAL,CAASlL,CAAnB,EAAwByb,MAAMzb,CAAN,CAAU,KAAKqM,GAAL,CAASrM,CAA3C,EACAyb,MAAM5N,CAAN,CAAU,KAAK3C,GAAL,CAAS2C,CADnB,EACwB4N,MAAM5N,CAAN,CAAU,KAAKxB,GAAL,CAASwB,CADhD,CACoD,CAEnD,YAAA,CAEA,CAED,WAAA,CAEA,CA/HqB,CAiItBkP,YAAa,qBAAWL,GAAX,CAAiB,CAE7B,GAAO,KAAKxR,GAAL,CAASlL,CAAT,EAAc0c,IAAIxR,GAAJ,CAAQlL,CAAxB,EAAiC0c,IAAIrQ,GAAJ,CAAQrM,CAAR,EAAa,KAAKqM,GAAL,CAASrM,CAAvD,EACE,KAAKkL,GAAL,CAAS2C,CAAT,EAAc6O,IAAIxR,GAAJ,CAAQ2C,CADxB,EACiC6O,IAAIrQ,GAAJ,CAAQwB,CAAR,EAAa,KAAKxB,GAAL,CAASwB,CAD5D,CACkE,CAEjE,WAAA,CAEA,CAED,YAAA,CAEA,CA5IqB,CA8ItBmP,aAAc,sBAAWvB,KAAX,CAAkBrP,cAAlB,CAAmC;;CAKhD,WAAaA,gBAAkB,UAAUyH,OAAV,EAA/B,CAEA,cAAczK,GAAP,CACN,CAAEqS,MAAMzb,CAAN,CAAU,KAAKkL,GAAL,CAASlL,CAArB,GAA6B,KAAKqM,GAAL,CAASrM,CAAT,CAAa,KAAKkL,GAAL,CAASlL,CAAnD,CADM,CAEN,CAAEyb,MAAM5N,CAAN,CAAU,KAAK3C,GAAL,CAAS2C,CAArB,GAA6B,KAAKxB,GAAL,CAASwB,CAAT,CAAa,KAAK3C,GAAL,CAAS2C,CAAnD,CAFM,CAAP,CAKA,CA1JqB,CA4JtBoP,cAAe,uBAAWP,GAAX,CAAiB;CAI/B,GAAKA,IAAIrQ,GAAJ,CAAQrM,CAAR,CAAY,KAAKkL,GAAL,CAASlL,CAArB,EAA0B0c,IAAIxR,GAAJ,CAAQlL,CAAR,CAAY,KAAKqM,GAAL,CAASrM,CAA/C,EACA0c,IAAIrQ,GAAJ,CAAQwB,CAAR,CAAY,KAAK3C,GAAL,CAAS2C,CADrB,EAC0B6O,IAAIxR,GAAJ,CAAQ2C,CAAR,CAAY,KAAKxB,GAAL,CAASwB,CADpD,CACwD,CAEvD,YAAA,CAEA,CAED,WAAA,CAEA,CAzKqB,CA2KtBqP,WAAY,oBAAWzB,KAAX,CAAkBrP,cAAlB,CAAmC,CAE9C,WAAaA,gBAAkB,UAAUyH,OAAV,EAA/B,CACA,cAAcrK,IAAP,CAAaiS,KAAb,EAAqBlR,KAArB,CAA4B,KAAKW,GAAjC,CAAsC,KAAKmB,GAA3C,CAAP,CAEA,CAhLqB,CAkLtB8Q,gBAAiB,UAAY,CAE5B,OAAS,UAAUtJ,OAAV,EAAT,CAEA,gBAAkB4H,KAAX,CAAmB,CAEzB,iBAAmBlL,GAAG/G,IAAH,CAASiS,KAAT,EAAiBlR,KAAjB,CAAwB,KAAKW,GAA7B,CAAkC,KAAKmB,GAAvC,CAAnB,CACA,oBAAoB+H,GAAb,CAAkBqH,KAAlB,EAA0B5a,MAA1B,EAAP,CAEA,CALD,CAOA,CAXgB,EAlLK,CA+LtBuc,UAAW,mBAAWV,GAAX,CAAiB,CAE3B,KAAKxR,GAAL,CAASmB,GAAT,CAAcqQ,IAAIxR,GAAlB,EACA,KAAKmB,GAAL,CAASnB,GAAT,CAAcwR,IAAIrQ,GAAlB,EAEA,WAAA,CAEA,CAtMqB,CAwMtBgR,MAAO,eAAWX,GAAX,CAAiB,CAEvB,KAAKxR,GAAL,CAASA,GAAT,CAAcwR,IAAIxR,GAAlB,EACA,KAAKmB,GAAL,CAASA,GAAT,CAAcqQ,IAAIrQ,GAAlB,EAEA,WAAA,CAEA,CA/MqB,CAiNtBiR,UAAW,mBAAW5P,MAAX,CAAoB,CAE9B,KAAKxC,GAAL,CAAS2B,GAAT,CAAca,MAAd,EACA,KAAKrB,GAAL,CAASQ,GAAT,CAAca,MAAd,EAEA,WAAA,CAEA,CAxNqB,CA0NtBJ,OAAQ,gBAAWoP,GAAX,CAAiB,CAExB,WAAWxR,GAAJ,CAAQoC,MAAR,CAAgB,KAAKpC,GAArB,GAA8BwR,IAAIrQ,GAAJ,CAAQiB,MAAR,CAAgB,KAAKjB,GAArB,CAArC,CAEA,CA9NqB,CAAvB;;;;IAyOA5M,MAAM8d,IAAN,CAAa,SAAWrS,GAAX,CAAgBmB,GAAhB,CAAsB,CAElC,KAAKnB,GAAL,CAAaA,MAAQtL,SAAV,CAAwBsL,GAAxB,CAA8B,UAAUsF,OAAV,CAAmB,CAAEyL,QAArB,CAA+B,CAAEA,QAAjC,CAA2C,CAAEA,QAA7C,CAAzC,CACA,KAAK5P,GAAL,CAAaA,MAAQzM,SAAV,CAAwByM,GAAxB,CAA8B,UAAUmE,OAAV,CAAmB,CAAEyL,QAArB,CAA+B,CAAEA,QAAjC,CAA2C,CAAEA,QAA7C,CAAzC,CAEA,CALD,CAOAxc,MAAM8d,IAAN,CAAWrd,SAAX,CAAuB,CAEtBoJ,YAAa7J,MAAM8d,IAFG,CAItBnU,IAAK,aAAW8B,GAAX,CAAgBmB,GAAhB,CAAsB,CAE1B,KAAKnB,GAAL,CAAS1B,IAAT,CAAe0B,GAAf,EACA,KAAKmB,GAAL,CAAS7C,IAAT,CAAe6C,GAAf,EAEA,WAAA,CAEA,CAXqB,CAatBmR,aAAc,sBAAW/P,KAAX,CAAmB,CAEhC,SAAW,CAAEwO,QAAb,CACA,SAAW,CAAEA,QAAb,CACA,SAAW,CAAEA,QAAb,CAEA,SAAW,CAAEA,QAAb,CACA,SAAW,CAAEA,QAAb,CACA,SAAW,CAAEA,QAAb,CAEA,IAAM,MAAQ,CAAR,CAAW5R,EAAIoD,MAAM5M,MAA3B,CAAmCyb,EAAIjS,CAAvC,CAA0CiS,GAAK,CAA/C,CAAmD,CAElD,MAAQ7O,MAAO6O,CAAP,CAAR,CACA,MAAQ7O,MAAO6O,EAAI,CAAX,CAAR,CACA,MAAQ7O,MAAO6O,EAAI,CAAX,CAAR,CAEA,GAAKtc,EAAIyd,IAAT,CAAgBA,KAAOzd,CAAP,CAChB,GAAK6N,EAAI6P,IAAT,CAAgBA,KAAO7P,CAAP,CAChB,GAAKC,EAAI6P,IAAT,CAAgBA,KAAO7P,CAAP,CAEhB,GAAK9N,EAAI4d,IAAT,CAAgBA,KAAO5d,CAAP,CAChB,GAAK6N,EAAIgQ,IAAT,CAAgBA,KAAOhQ,CAAP,CAChB,GAAKC,EAAIgQ,IAAT,CAAgBA,KAAOhQ,CAAP,CAEhB,CAED,KAAK5C,GAAL,CAAS9B,GAAT,CAAcqU,IAAd,CAAoBC,IAApB,CAA0BC,IAA1B,EACA,KAAKtR,GAAL,CAASjD,GAAT,CAAcwU,IAAd,CAAoBC,IAApB,CAA0BC,IAA1B,EAEA,CA1CqB,CA4CtB5B,cAAe,uBAAWC,MAAX,CAAoB,CAElC,KAAKC,SAAL,GAEA,IAAM,MAAQ,CAAR,CAAWC,GAAKF,OAAOtb,MAA7B,CAAqCyb,EAAID,EAAzC,CAA6CC,GAA7C,CAAoD,CAEnD,KAAKC,aAAL,CAAoBJ,OAAQG,CAAR,CAApB,EAEA,CAED,WAAA,CAEA,CAxDqB,CA0DtBE,qBAAsB,UAAY,CAEjC,OAAS,UAAUhM,OAAV,EAAT,CAEA,gBAAkBuF,MAAX,CAAmB1K,IAAnB,CAA0B,CAEhC,aAAekF,GAAG/G,IAAH,CAAS6B,IAAT,EAAgB8B,cAAhB,CAAgC,GAAhC,CAAf,CAEA,KAAKjC,GAAL,CAAS1B,IAAT,CAAeuM,MAAf,EAAwB3B,GAAxB,CAA6BqI,QAA7B,EACA,KAAKpQ,GAAL,CAAS7C,IAAT,CAAeuM,MAAf,EAAwBlJ,GAAxB,CAA6B4P,QAA7B,EAEA,WAAA,CAEA,CATD,CAWA,CAfqB,EA1DA,CA2EtBsB,cAAe,UAAY;;CAK1B,OAAS,UAAUvN,OAAV,EAAT,CAEA,gBAAkBwN,MAAX,CAAoB,CAE1B,UAAY,IAAZ,CAEAA,OAAOC,iBAAP,CAA0B,IAA1B,EAEA,KAAK7B,SAAL,GAEA4B,OAAOE,QAAP,CAAiB,SAAWC,IAAX,CAAkB,CAElC,aAAeA,KAAKC,QAApB,CAEA,GAAKA,WAAaxe,SAAlB,CAA8B,CAE7B,GAAKwe,0BAA0BC,QAA/B,CAA0C,CAEzC,aAAeD,SAASE,QAAxB,CAEA,IAAM,MAAQ,CAAR,CAAWjC,GAAKiC,SAASzd,MAA/B,CAAuCyb,EAAID,EAA3C,CAA+CC,GAA/C,CAAsD,CAErD/L,GAAG/G,IAAH,CAAS8U,SAAUhC,CAAV,CAAT,EACA/L,GAAGiG,YAAH,CAAiB2H,KAAKzG,WAAtB,EAEA6G,MAAMhC,aAAN,CAAqBhM,EAArB,EAEA,CAED,CAbD,QAaY6N,0BAA0BI,cAA1B,EAA4CJ,SAASK,UAAT,CAAqB,UAArB,IAAsC7e,SAAvF,CAAmG,CAEzG,cAAgBwe,SAASK,UAAT,CAAqB,UAArB,EAAkChR,KAAlD,CAEA,IAAM,MAAQ,CAAR,CAAW4O,GAAKqC,UAAU7d,MAAhC,CAAwCyb,EAAID,EAA5C,CAAgDC,GAAK,CAArD,CAAyD,CAExD/L,GAAG/C,SAAH,CAAckR,SAAd,CAAyBpC,CAAzB,EACA/L,GAAGiG,YAAH,CAAiB2H,KAAKzG,WAAtB,EAEA6G,MAAMhC,aAAN,CAAqBhM,EAArB,EAEA,CAED,CAED,CAED,CApCD,EAsCA,WAAA,CAEA,CAhDD,CAkDA,CAzDc,EA3EO,CAsItB/E,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CA1IqB,CA4ItBA,KAAM,cAAWkT,GAAX,CAAiB,CAEtB,KAAKxR,GAAL,CAAS1B,IAAT,CAAekT,IAAIxR,GAAnB,EACA,KAAKmB,GAAL,CAAS7C,IAAT,CAAekT,IAAIrQ,GAAnB,EAEA,WAAA,CAEA,CAnJqB,CAqJtB+P,UAAW,oBAAY,CAEtB,KAAKlR,GAAL,CAASlL,CAAT,CAAa,KAAKkL,GAAL,CAAS2C,CAAT,CAAa,KAAK3C,GAAL,CAAS4C,CAAT,CAAa,CAAEmO,QAAzC,CACA,KAAK5P,GAAL,CAASrM,CAAT,CAAa,KAAKqM,GAAL,CAASwB,CAAT,CAAa,KAAKxB,GAAL,CAASyB,CAAT,CAAa,CAAEmO,QAAzC,CAEA,WAAA,CAEA,CA5JqB,CA8JtBU,QAAS,kBAAY;CAIpB,YAActQ,GAAL,CAASrM,CAAT,CAAa,KAAKkL,GAAL,CAASlL,CAAxB,EAAiC,KAAKqM,GAAL,CAASwB,CAAT,CAAa,KAAK3C,GAAL,CAAS2C,CAAvD,EAAgE,KAAKxB,GAAL,CAASyB,CAAT,CAAa,KAAK5C,GAAL,CAAS4C,CAA7F,CAEA,CApKqB,CAsKtBiI,OAAQ,gBAAW3J,cAAX,CAA4B,CAEnC,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CACA,cAAc0D,UAAP,CAAmB,KAAKhJ,GAAxB,CAA6B,KAAKmB,GAAlC,EAAwCc,cAAxC,CAAwD,GAAxD,CAAP,CAEA,CA3KqB,CA6KtB9B,KAAM,cAAWe,cAAX,CAA4B,CAEjC,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CACA,cAAc6D,UAAP,CAAmB,KAAKhI,GAAxB,CAA6B,KAAKnB,GAAlC,CAAP,CAEA,CAlLqB,CAoLtBqR,cAAe,uBAAWd,KAAX,CAAmB,CAEjC,KAAKvQ,GAAL,CAASA,GAAT,CAAcuQ,KAAd,EACA,KAAKpP,GAAL,CAASA,GAAT,CAAcoP,KAAd,EAEA,WAAA,CAEA,CA3LqB,CA6LtBmB,eAAgB,wBAAWvE,MAAX,CAAoB,CAEnC,KAAKnN,GAAL,CAASkJ,GAAT,CAAciE,MAAd,EACA,KAAKhM,GAAL,CAASQ,GAAT,CAAcwL,MAAd,EAEA,WAAA,CAEA,CApMqB,CAsMtBwE,eAAgB,wBAAWjT,MAAX,CAAoB,CAEnC,KAAKsB,GAAL,CAAS+B,SAAT,CAAoB,CAAErD,MAAtB,EACA,KAAKyC,GAAL,CAASY,SAAT,CAAoBrD,MAApB,EAEA,WAAA,CAEA,CA7MqB,CA+MtBkT,cAAe,uBAAWrB,KAAX,CAAmB,CAEjC,GAAKA,MAAMzb,CAAN,CAAU,KAAKkL,GAAL,CAASlL,CAAnB,EAAwByb,MAAMzb,CAAN,CAAU,KAAKqM,GAAL,CAASrM,CAA3C,EACFyb,MAAM5N,CAAN,CAAU,KAAK3C,GAAL,CAAS2C,CADjB,EACsB4N,MAAM5N,CAAN,CAAU,KAAKxB,GAAL,CAASwB,CADzC,EAEF4N,MAAM3N,CAAN,CAAU,KAAK5C,GAAL,CAAS4C,CAFjB,EAEsB2N,MAAM3N,CAAN,CAAU,KAAKzB,GAAL,CAASyB,CAF9C,CAEkD,CAEjD,YAAA,CAEA,CAED,WAAA,CAEA,CA3NqB,CA6NtBiP,YAAa,qBAAWL,GAAX,CAAiB,CAE7B,GAAO,KAAKxR,GAAL,CAASlL,CAAT,EAAc0c,IAAIxR,GAAJ,CAAQlL,CAAxB,EAAiC0c,IAAIrQ,GAAJ,CAAQrM,CAAR,EAAa,KAAKqM,GAAL,CAASrM,CAAvD,EACD,KAAKkL,GAAL,CAAS2C,CAAT,EAAc6O,IAAIxR,GAAJ,CAAQ2C,CADrB,EAC8B6O,IAAIrQ,GAAJ,CAAQwB,CAAR,EAAa,KAAKxB,GAAL,CAASwB,CADpD,EAED,KAAK3C,GAAL,CAAS4C,CAAT,EAAc4O,IAAIxR,GAAJ,CAAQ4C,CAFrB,EAE8B4O,IAAIrQ,GAAJ,CAAQyB,CAAR,EAAa,KAAKzB,GAAL,CAASyB,CAFzD,CAE+D,CAE9D,WAAA,CAEA,CAED,YAAA,CAEA,CAzOqB,CA2OtBkP,aAAc,sBAAWvB,KAAX,CAAkBrP,cAAlB,CAAmC;;CAKhD,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CAEA,cAAcpH,GAAP,CACN,CAAEqS,MAAMzb,CAAN,CAAU,KAAKkL,GAAL,CAASlL,CAArB,GAA6B,KAAKqM,GAAL,CAASrM,CAAT,CAAa,KAAKkL,GAAL,CAASlL,CAAnD,CADM,CAEN,CAAEyb,MAAM5N,CAAN,CAAU,KAAK3C,GAAL,CAAS2C,CAArB,GAA6B,KAAKxB,GAAL,CAASwB,CAAT,CAAa,KAAK3C,GAAL,CAAS2C,CAAnD,CAFM,CAGN,CAAE4N,MAAM3N,CAAN,CAAU,KAAK5C,GAAL,CAAS4C,CAArB,GAA6B,KAAKzB,GAAL,CAASyB,CAAT,CAAa,KAAK5C,GAAL,CAAS4C,CAAnD,CAHM,CAAP,CAMA,CAxPqB,CA0PtBmP,cAAe,uBAAWP,GAAX,CAAiB;CAI/B,GAAKA,IAAIrQ,GAAJ,CAAQrM,CAAR,CAAY,KAAKkL,GAAL,CAASlL,CAArB,EAA0B0c,IAAIxR,GAAJ,CAAQlL,CAAR,CAAY,KAAKqM,GAAL,CAASrM,CAA/C,EACF0c,IAAIrQ,GAAJ,CAAQwB,CAAR,CAAY,KAAK3C,GAAL,CAAS2C,CADnB,EACwB6O,IAAIxR,GAAJ,CAAQ2C,CAAR,CAAY,KAAKxB,GAAL,CAASwB,CAD7C,EAEF6O,IAAIrQ,GAAJ,CAAQyB,CAAR,CAAY,KAAK5C,GAAL,CAAS4C,CAFnB,EAEwB4O,IAAIxR,GAAJ,CAAQ4C,CAAR,CAAY,KAAKzB,GAAL,CAASyB,CAFlD,CAEsD,CAErD,YAAA,CAEA,CAED,WAAA,CAEA,CAxQqB,CA0QtB6Q,iBAAoB,UAAY,CAE/B,gBAAA,CAEA,gCAAO,CAA2BC,MAA3B,CAAoC,CAE1C,GAAKC,eAAiBjf,SAAtB,CAAkCif,aAAe,UAAUrO,OAAV,EAAf;CAGlC,KAAK0M,UAAL,CAAiB0B,OAAO7I,MAAxB,CAAgC8I,YAAhC;CAGA,oBAAoBxJ,iBAAb,CAAgCuJ,OAAO7I,MAAvC,GAAqD6I,OAAO5F,MAAP,CAAgB4F,OAAO5F,MAAnF,CAEA,CAVD,CAYA,CAhBiB,EA1QI,CA4RtB8F,gBAAiB,yBAAWC,KAAX,CAAmB;;CAKnC,OAAA,CAAS1S,GAAT,CAEA,GAAK0S,MAAMtG,MAAN,CAAazY,CAAb,CAAiB,CAAtB,CAA0B,CAEzBkL,IAAM6T,MAAMtG,MAAN,CAAazY,CAAb,CAAiB,KAAKkL,GAAL,CAASlL,CAAhC,CACAqM,IAAM0S,MAAMtG,MAAN,CAAazY,CAAb,CAAiB,KAAKqM,GAAL,CAASrM,CAAhC,CAEA,CALD,IAKO,CAENkL,IAAM6T,MAAMtG,MAAN,CAAazY,CAAb,CAAiB,KAAKqM,GAAL,CAASrM,CAAhC,CACAqM,IAAM0S,MAAMtG,MAAN,CAAazY,CAAb,CAAiB,KAAKkL,GAAL,CAASlL,CAAhC,CAEA,CAED,GAAK+e,MAAMtG,MAAN,CAAa5K,CAAb,CAAiB,CAAtB,CAA0B,CAEzB3C,KAAO6T,MAAMtG,MAAN,CAAa5K,CAAb,CAAiB,KAAK3C,GAAL,CAAS2C,CAAjC,CACAxB,KAAO0S,MAAMtG,MAAN,CAAa5K,CAAb,CAAiB,KAAKxB,GAAL,CAASwB,CAAjC,CAEA,CALD,IAKO,CAEN3C,KAAO6T,MAAMtG,MAAN,CAAa5K,CAAb,CAAiB,KAAKxB,GAAL,CAASwB,CAAjC,CACAxB,KAAO0S,MAAMtG,MAAN,CAAa5K,CAAb,CAAiB,KAAK3C,GAAL,CAAS2C,CAAjC,CAEA,CAED,GAAKkR,MAAMtG,MAAN,CAAa3K,CAAb,CAAiB,CAAtB,CAA0B,CAEzB5C,KAAO6T,MAAMtG,MAAN,CAAa3K,CAAb,CAAiB,KAAK5C,GAAL,CAAS4C,CAAjC,CACAzB,KAAO0S,MAAMtG,MAAN,CAAa3K,CAAb,CAAiB,KAAKzB,GAAL,CAASyB,CAAjC,CAEA,CALD,IAKO,CAEN5C,KAAO6T,MAAMtG,MAAN,CAAa3K,CAAb,CAAiB,KAAKzB,GAAL,CAASyB,CAAjC,CACAzB,KAAO0S,MAAMtG,MAAN,CAAa3K,CAAb,CAAiB,KAAK5C,GAAL,CAAS4C,CAAjC,CAEA,CAED,YAAgBiR,MAAMC,QAAb,EAAyB3S,KAAO0S,MAAMC,QAA/C,CAEA,CAzUqB,CA2UtB9B,WAAY,oBAAWzB,KAAX,CAAkBrP,cAAlB,CAAmC,CAE9C,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CACA,cAAchH,IAAP,CAAaiS,KAAb,EAAqBlR,KAArB,CAA4B,KAAKW,GAAjC,CAAsC,KAAKmB,GAA3C,CAAP,CAEA,CAhVqB,CAkVtB8Q,gBAAiB,UAAY,CAE5B,OAAS,UAAU3M,OAAV,EAAT,CAEA,gBAAkBiL,KAAX,CAAmB,CAEzB,iBAAmBlL,GAAG/G,IAAH,CAASiS,KAAT,EAAiBlR,KAAjB,CAAwB,KAAKW,GAA7B,CAAkC,KAAKmB,GAAvC,CAAnB,CACA,oBAAoB+H,GAAb,CAAkBqH,KAAlB,EAA0B5a,MAA1B,EAAP,CAEA,CALD,CAOA,CAXgB,EAlVK,CA+VtBoe,kBAAmB,UAAY,CAE9B,OAAS,UAAUzO,OAAV,EAAT,CAEA,gBAAkBpE,cAAX,CAA4B,CAElC,WAAaA,gBAAkB,UAAU8S,MAAV,EAA/B,CAEA3D,OAAOxF,MAAP,CAAgB,KAAKA,MAAL,EAAhB,CACAwF,OAAOvC,MAAP,CAAgB,KAAK3N,IAAL,CAAWkF,EAAX,EAAgB1P,MAAhB,GAA2B,GAA3C,CAEA,aAAA,CAEA,CATD,CAWA,CAfkB,EA/VG,CAgXtBuc,UAAW,mBAAWV,GAAX,CAAiB,CAE3B,KAAKxR,GAAL,CAASmB,GAAT,CAAcqQ,IAAIxR,GAAlB,EACA,KAAKmB,GAAL,CAASnB,GAAT,CAAcwR,IAAIrQ,GAAlB;CAGA,GAAI,KAAKsQ,OAAL,EAAJ,CAAqB,KAAKP,SAAL,GAErB,WAAA,CAEA,CA1XqB,CA4XtBiB,MAAO,eAAWX,GAAX,CAAiB,CAEvB,KAAKxR,GAAL,CAASA,GAAT,CAAcwR,IAAIxR,GAAlB,EACA,KAAKmB,GAAL,CAASA,GAAT,CAAcqQ,IAAIrQ,GAAlB,EAEA,WAAA,CAEA,CAnYqB,CAqYtBmK,aAAc,UAAY,CAEzB,WAAa,CACZ,UAAUhG,OAAV,EADY,CAEZ,UAAUA,OAAV,EAFY,CAGZ,UAAUA,OAAV,EAHY,CAIZ,UAAUA,OAAV,EAJY,CAKZ,UAAUA,OAAV,EALY,CAMZ,UAAUA,OAAV,EANY,CAOZ,UAAUA,OAAV,EAPY,CAQZ,UAAUA,OAAV,EARY,CAAb,CAWA,gBAAkB6G,MAAX,CAAoB;CAG1B,GAAI,KAAKsF,OAAL,EAAJ,CAAqB,WAAA;CAGrBR,OAAQ,CAAR,EAAY/S,GAAZ,CAAiB,KAAK8B,GAAL,CAASlL,CAA1B,CAA6B,KAAKkL,GAAL,CAAS2C,CAAtC,CAAyC,KAAK3C,GAAL,CAAS4C,CAAlD,EAAsD0I,YAAtD,CAAoEa,MAApE;CACA8E,OAAQ,CAAR,EAAY/S,GAAZ,CAAiB,KAAK8B,GAAL,CAASlL,CAA1B,CAA6B,KAAKkL,GAAL,CAAS2C,CAAtC,CAAyC,KAAKxB,GAAL,CAASyB,CAAlD,EAAsD0I,YAAtD,CAAoEa,MAApE;CACA8E,OAAQ,CAAR,EAAY/S,GAAZ,CAAiB,KAAK8B,GAAL,CAASlL,CAA1B,CAA6B,KAAKqM,GAAL,CAASwB,CAAtC,CAAyC,KAAK3C,GAAL,CAAS4C,CAAlD,EAAsD0I,YAAtD,CAAoEa,MAApE;CACA8E,OAAQ,CAAR,EAAY/S,GAAZ,CAAiB,KAAK8B,GAAL,CAASlL,CAA1B,CAA6B,KAAKqM,GAAL,CAASwB,CAAtC,CAAyC,KAAKxB,GAAL,CAASyB,CAAlD,EAAsD0I,YAAtD,CAAoEa,MAApE;CACA8E,OAAQ,CAAR,EAAY/S,GAAZ,CAAiB,KAAKiD,GAAL,CAASrM,CAA1B,CAA6B,KAAKkL,GAAL,CAAS2C,CAAtC,CAAyC,KAAK3C,GAAL,CAAS4C,CAAlD,EAAsD0I,YAAtD,CAAoEa,MAApE;CACA8E,OAAQ,CAAR,EAAY/S,GAAZ,CAAiB,KAAKiD,GAAL,CAASrM,CAA1B,CAA6B,KAAKkL,GAAL,CAAS2C,CAAtC,CAAyC,KAAKxB,GAAL,CAASyB,CAAlD,EAAsD0I,YAAtD,CAAoEa,MAApE;CACA8E,OAAQ,CAAR,EAAY/S,GAAZ,CAAiB,KAAKiD,GAAL,CAASrM,CAA1B,CAA6B,KAAKqM,GAAL,CAASwB,CAAtC,CAAyC,KAAK3C,GAAL,CAAS4C,CAAlD,EAAsD0I,YAAtD,CAAoEa,MAApE;CACA8E,OAAQ,CAAR,EAAY/S,GAAZ,CAAiB,KAAKiD,GAAL,CAASrM,CAA1B,CAA6B,KAAKqM,GAAL,CAASwB,CAAtC,CAAyC,KAAKxB,GAAL,CAASyB,CAAlD,EAAsD0I,YAAtD,CAAoEa,MAApE;CAEA,KAAK6E,aAAL,CAAoBC,MAApB,EAEA,WAAA,CAEA,CAnBD,CAqBA,CAlCa,EArYQ,CAyatBmB,UAAW,mBAAW5P,MAAX,CAAoB,CAE9B,KAAKxC,GAAL,CAAS2B,GAAT,CAAca,MAAd,EACA,KAAKrB,GAAL,CAASQ,GAAT,CAAca,MAAd,EAEA,WAAA,CAEA,CAhbqB,CAkbtBJ,OAAQ,gBAAWoP,GAAX,CAAiB,CAExB,WAAWxR,GAAJ,CAAQoC,MAAR,CAAgB,KAAKpC,GAArB,GAA8BwR,IAAIrQ,GAAJ,CAAQiB,MAAR,CAAgB,KAAKjB,GAArB,CAArC,CAEA,CAtbqB,CAAvB;;;;;;IAmcA5M,MAAM0f,OAAN,CAAgB,UAAY,CAE3B,KAAK3P,QAAL,CAAgB,gBAAA,CAAkB,CAEjC,CAFiC,CAE9B,CAF8B,CAE3B,CAF2B,CAGjC,CAHiC,CAG9B,CAH8B,CAG3B,CAH2B,CAIjC,CAJiC,CAI9B,CAJ8B,CAI3B,CAJ2B,CAAlB,CAAhB,CAQA,GAAK5O,UAAUC,MAAV,CAAmB,CAAxB,CAA4B,CAE3B+J,QAAQuL,KAAR,CAAe,+EAAf,EAEA,CAED,CAhBD,CAkBA1W,MAAM0f,OAAN,CAAcjf,SAAd,CAA0B,CAEzBoJ,YAAa7J,MAAM0f,OAFM,CAIzB/V,IAAK,aAAWgW,GAAX,CAAgBC,GAAhB,CAAqBC,GAArB,CAA0BC,GAA1B,CAA+BC,GAA/B,CAAoCC,GAApC,CAAyCC,GAAzC,CAA8CC,GAA9C,CAAmDC,GAAnD,CAAyD,CAE7D,OAAS,KAAKpQ,QAAd,CAEAE,GAAI,CAAJ,EAAU0P,GAAV,CAAe1P,GAAI,CAAJ,EAAU6P,GAAV,CAAe7P,GAAI,CAAJ,EAAUgQ,GAAV,CAC9BhQ,GAAI,CAAJ,EAAU2P,GAAV,CAAe3P,GAAI,CAAJ,EAAU8P,GAAV,CAAe9P,GAAI,CAAJ,EAAUiQ,GAAV,CAC9BjQ,GAAI,CAAJ,EAAU4P,GAAV,CAAe5P,GAAI,CAAJ,EAAU+P,GAAV,CAAe/P,GAAI,CAAJ,EAAUkQ,GAAV,CAE9B,WAAA,CAEA,CAdwB,CAgBzBC,SAAU,mBAAY,CAErB,KAAKzW,GAAL,CAEC,CAFD,CAEI,CAFJ,CAEO,CAFP,CAGC,CAHD,CAGI,CAHJ,CAGO,CAHP,CAIC,CAJD,CAII,CAJJ,CAIO,CAJP,EAQA,WAAA,CAEA,CA5BwB,CA8BzBoC,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBkE,SAAvB,CAAkC,KAAKgC,QAAvC,CAAP,CAEA,CAlCwB,CAoCzBhG,KAAM,cAAWsB,CAAX,CAAe,CAEpB,OAASA,EAAE0E,QAAX,CAEA,KAAKpG,GAAL,CAEC0W,GAAI,CAAJ,CAFD,CAEUA,GAAI,CAAJ,CAFV,CAEmBA,GAAI,CAAJ,CAFnB,CAGCA,GAAI,CAAJ,CAHD,CAGUA,GAAI,CAAJ,CAHV,CAGmBA,GAAI,CAAJ,CAHnB,CAICA,GAAI,CAAJ,CAJD,CAIUA,GAAI,CAAJ,CAJV,CAImBA,GAAI,CAAJ,CAJnB,EAQA,WAAA,CAEA,CAlDwB,CAoDzBC,eAAgB,wBAAUjV,CAAV,CAAc,CAE7B,OAASA,EAAE0E,QAAX,CAEA,KAAKpG,GAAL,CAEC0W,GAAI,CAAJ,CAFD,CAEUA,GAAI,CAAJ,CAFV,CAEmBA,GAAK,CAAL,CAFnB,CAGCA,GAAI,CAAJ,CAHD,CAGUA,GAAI,CAAJ,CAHV,CAGmBA,GAAK,CAAL,CAHnB,CAICA,GAAI,CAAJ,CAJD,CAIUA,GAAI,CAAJ,CAJV,CAImBA,GAAI,EAAJ,CAJnB,EAQA,WAAA,CAEA,CAlEwB,CAoEzBE,oBAAqB,UAAY,CAEhC,MAAA,CAEA,gBAAkBvS,KAAX,CAAkBC,MAAlB,CAA0B7M,MAA1B,CAAmC,CAEzC,GAAK0P,KAAO3Q,SAAZ,CAAwB2Q,GAAK,UAAUC,OAAV,EAAL,CACxB,GAAK9C,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAC5B,GAAK7M,SAAWjB,SAAhB,CAA4BiB,OAAS4M,MAAM5M,MAAf,CAE5B,IAAM,MAAQ,CAAR,CAAWof,EAAIvS,MAArB,CAA6B4O,EAAIzb,MAAjC,CAAyCyb,GAAK,CAAL,CAAQ2D,GAAK,CAAtD,CAA0D,CAEzD1P,GAAG/C,SAAH,CAAcC,KAAd,CAAqBwS,CAArB,EACA1P,GAAG+F,YAAH,CAAiB,IAAjB,EACA/F,GAAG5C,OAAH,CAAYF,KAAZ,CAAmBwS,CAAnB,EAEA,CAED,YAAA,CAEA,CAhBD,CAkBA,CAtBoB,EApEI,CA4FzBC,cAAe,UAAY,CAE1B,MAAA,CAEA,6BAAO,CAAwBC,MAAxB,CAAgCzS,MAAhC,CAAwC7M,MAAxC,CAAiD,CAEvD,GAAK0P,KAAO3Q,SAAZ,CAAwB2Q,GAAK,UAAUC,OAAV,EAAL,CACxB,GAAK9C,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAC5B,GAAK7M,SAAWjB,SAAhB,CAA4BiB,OAASsf,OAAOtf,MAAP,CAAgBsf,OAAOtK,QAAhC,CAE5B,IAAM,MAAQ,CAAR,CAAWoK,EAAIvS,MAArB,CAA6B4O,EAAIzb,MAAjC,CAAyCyb,IAAM2D,GAA/C,CAAsD,CAErD1P,GAAGvQ,CAAH,CAAOmgB,OAAOC,IAAP,CAAaH,CAAb,CAAP,CACA1P,GAAG1C,CAAH,CAAOsS,OAAOE,IAAP,CAAaJ,CAAb,CAAP,CACA1P,GAAGzC,CAAH,CAAOqS,OAAOG,IAAP,CAAaL,CAAb,CAAP,CAEA1P,GAAG+F,YAAH,CAAiB,IAAjB,EAEA6J,OAAOI,MAAP,CAAehQ,GAAGvQ,CAAlB,CAAqBuQ,GAAG1C,CAAxB,CAA2B0C,GAAGzC,CAA9B,EAEA,CAED,aAAA,CAEA,CApBD,CAsBA,CA1Bc,EA5FU,CAwHzBX,eAAgB,wBAAW/C,CAAX,CAAe,CAE9B,OAAS,KAAKoF,QAAd,CAEAE,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,CAAJ,GAAWtF,CAAX,CAC5BsF,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,CAAJ,GAAWtF,CAAX,CAC5BsF,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,CAAJ,GAAWtF,CAAX,CAE5B,WAAA,CAEA,CAlIwB,CAoIzBoW,YAAa,sBAAY,CAExB,OAAS,KAAKhR,QAAd,CAEA,MAAQE,GAAI,CAAJ,CAAR,CAAiBvG,EAAIuG,GAAI,CAAJ,CAArB,CAA8BnC,EAAImC,GAAI,CAAJ,CAAlC,CACCgH,EAAIhH,GAAI,CAAJ,CADL,CACc6G,EAAI7G,GAAI,CAAJ,CADlB,CAC2BkE,EAAIlE,GAAI,CAAJ,CAD/B,CAECxG,EAAIwG,GAAI,CAAJ,CAFL,CAEcvF,EAAIuF,GAAI,CAAJ,CAFlB,CAE2B4M,EAAI5M,GAAI,CAAJ,CAF/B,CAIA,SAAW6G,CAAJ,CAAQ+F,CAAR,CAAYlL,EAAIwC,CAAJ,CAAQzJ,CAApB,CAAwBhB,EAAIuN,CAAJ,CAAQ4F,CAAhC,CAAoCnT,EAAIyK,CAAJ,CAAQ1K,CAA5C,CAAgDqE,EAAImJ,CAAJ,CAAQvM,CAAxD,CAA4DoD,EAAIgJ,CAAJ,CAAQrN,CAA3E,CAEA,CA9IwB,CAgJzBuO,WAAY,oBAAWJ,MAAX,CAAmBoJ,iBAAnB,CAAuC,CAElD,GAAKpJ,wBAAwBC,OAA7B,CAAuC,CAEtC1M,QAAQuL,KAAR,CAAe,8DAAf,EAEA,CAED,OAASkB,OAAO7H,QAAhB,CACCE,GAAK,KAAKF,QADX,CAGC4P,IAAMU,GAAI,CAAJ,CAHP,CAGgBP,IAAMO,GAAI,CAAJ,CAHtB,CAG+BJ,IAAMI,GAAI,CAAJ,CAHrC,CAICT,IAAMS,GAAI,CAAJ,CAJP,CAIgBN,IAAMM,GAAI,CAAJ,CAJtB,CAI+BH,IAAMG,GAAI,CAAJ,CAJrC,CAKCR,IAAMQ,GAAI,CAAJ,CALP,CAKgBL,IAAMK,GAAI,CAAJ,CALtB,CAK+BF,IAAME,GAAI,CAAJ,CALrC,CAOCY,IAAMd,IAAMJ,GAAN,CAAYG,IAAMF,GAPzB,CAQCkB,IAAMhB,IAAML,GAAN,CAAYM,IAAMP,GARzB,CASCuB,IAAMnB,IAAMJ,GAAN,CAAYG,IAAMF,GATzB,CAWCuB,IAAMzB,IAAMsB,GAAN,CAAYnB,IAAMoB,GAAlB,CAAwBjB,IAAMkB,GAXrC,CAaA,GAAKC,MAAQ,CAAb,CAAiB,CAEhB,QAAU,mEAAV,CAEA,GAAKJ,mBAAqB,KAA1B,CAAkC,sBAIjC,CAJD,IAIO,CAEN7V,QAAQC,IAAR,CAAciW,GAAd,EAEA,CAED,YAAYjB,QAAL,EAAP,CACA,CAED,WAAa,EAAIgB,GAAjB,CAEAnR,GAAI,CAAJ,EAAUgR,IAAMK,MAAhB,CACArR,GAAI,CAAJ,EAAU,CAAEgQ,IAAMD,GAAN,CAAYG,IAAML,GAApB,EAA4BwB,MAAtC,CACArR,GAAI,CAAJ,EAAU,CAAEiQ,IAAMJ,GAAN,CAAYG,IAAMF,GAApB,EAA4BuB,MAAtC,CAEArR,GAAI,CAAJ,EAAUiR,IAAMI,MAAhB,CACArR,GAAI,CAAJ,EAAU,CAAEkQ,IAAMR,GAAN,CAAYM,IAAMJ,GAApB,EAA4ByB,MAAtC,CACArR,GAAI,CAAJ,EAAU,CAAEgQ,IAAML,GAAN,CAAYM,IAAMP,GAApB,EAA4B2B,MAAtC,CAEArR,GAAI,CAAJ,EAAUkR,IAAMG,MAAhB,CACArR,GAAI,CAAJ,EAAU,CAAE6P,IAAMD,GAAN,CAAYG,IAAML,GAApB,EAA4B2B,MAAtC,CACArR,GAAI,CAAJ,EAAU,CAAE8P,IAAMJ,GAAN,CAAYG,IAAMF,GAApB,EAA4B0B,MAAtC,CAEA,WAAA,CAEA,CAtMwB,CAwMzBC,UAAW,oBAAY,CAEtB,OAAA,CAASlW,EAAI,KAAK0E,QAAlB,CAEAyR,IAAMnW,EAAG,CAAH,CAAN,CAAcA,EAAG,CAAH,EAASA,EAAG,CAAH,CAAT,CAAiBA,EAAG,CAAH,EAASmW,GAAT,CAC/BA,IAAMnW,EAAG,CAAH,CAAN,CAAcA,EAAG,CAAH,EAASA,EAAG,CAAH,CAAT,CAAiBA,EAAG,CAAH,EAASmW,GAAT,CAC/BA,IAAMnW,EAAG,CAAH,CAAN,CAAcA,EAAG,CAAH,EAASA,EAAG,CAAH,CAAT,CAAiBA,EAAG,CAAH,EAASmW,GAAT,CAE/B,WAAA,CAEA,CAlNwB,CAoNzBC,qBAAsB,8BAAWzT,KAAX,CAAkBC,MAAlB,CAA2B,CAEhD9C,QAAQC,IAAR,CAAc,sDACZ,8BADF,EAGA,YAAY8C,OAAL,CAAcF,KAAd,CAAqBC,MAArB,CAAP,CAEA,CA3NwB,CA6NzByT,gBAAiB,yBAAWC,OAAX,CAAqB,CAErC,YAAYrB,cAAL,CAAqBqB,OAArB,EAA+B3J,UAA/B,CAA2C,IAA3C,EAAkDuJ,SAAlD,EAAP,CAEA,CAjOwB,CAmOzBK,mBAAoB,4BAAWpY,CAAX,CAAe,CAElC,MAAQ,KAAKuG,QAAb,CAEAvG,EAAG,CAAH,EAAS6B,EAAG,CAAH,CAAT,CACA7B,EAAG,CAAH,EAAS6B,EAAG,CAAH,CAAT,CACA7B,EAAG,CAAH,EAAS6B,EAAG,CAAH,CAAT,CACA7B,EAAG,CAAH,EAAS6B,EAAG,CAAH,CAAT,CACA7B,EAAG,CAAH,EAAS6B,EAAG,CAAH,CAAT,CACA7B,EAAG,CAAH,EAAS6B,EAAG,CAAH,CAAT,CACA7B,EAAG,CAAH,EAAS6B,EAAG,CAAH,CAAT,CACA7B,EAAG,CAAH,EAAS6B,EAAG,CAAH,CAAT,CACA7B,EAAG,CAAH,EAAS6B,EAAG,CAAH,CAAT,CAEA,WAAA,CAEA,CAnPwB,CAqPzB0C,UAAW,mBAAWC,KAAX,CAAmB,CAE7B,KAAK+B,QAAL,CAAcpG,GAAd,CAAmBqE,KAAnB,EAEA,WAAA,CAEA,CA3PwB,CA6PzBE,QAAS,iBAAWF,KAAX,CAAkBC,MAAlB,CAA2B,CAEnC,GAAKD,QAAU7N,SAAf,CAA2B6N,MAAQ,EAAR,CAC3B,GAAKC,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5B,OAAS,KAAK8B,QAAd,CAEA/B,MAAOC,MAAP,EAAkBgC,GAAI,CAAJ,CAAlB,CACAjC,MAAOC,OAAS,CAAhB,EAAsBgC,GAAI,CAAJ,CAAtB,CACAjC,MAAOC,OAAS,CAAhB,EAAsBgC,GAAI,CAAJ,CAAtB,CAEAjC,MAAOC,OAAS,CAAhB,EAAsBgC,GAAI,CAAJ,CAAtB,CACAjC,MAAOC,OAAS,CAAhB,EAAsBgC,GAAI,CAAJ,CAAtB,CACAjC,MAAOC,OAAS,CAAhB,EAAsBgC,GAAI,CAAJ,CAAtB,CAEAjC,MAAOC,OAAS,CAAhB,EAAsBgC,GAAI,CAAJ,CAAtB,CACAjC,MAAOC,OAAS,CAAhB,EAAsBgC,GAAI,CAAJ,CAAtB,CACAjC,MAAOC,OAAS,CAAhB,EAAuBgC,GAAI,CAAJ,CAAvB,CAEA,YAAA,CAEA,CAlRwB,CAA1B;;;;;;;;;;;;IAqSAjQ,MAAM6X,OAAN,CAAgB,UAAY,CAE3B,KAAK9H,QAAL,CAAgB,gBAAA,CAAkB,CAEjC,CAFiC,CAE9B,CAF8B,CAE3B,CAF2B,CAExB,CAFwB,CAGjC,CAHiC,CAG9B,CAH8B,CAG3B,CAH2B,CAGxB,CAHwB,CAIjC,CAJiC,CAI9B,CAJ8B,CAI3B,CAJ2B,CAIxB,CAJwB,CAKjC,CALiC,CAK9B,CAL8B,CAK3B,CAL2B,CAKxB,CALwB,CAAlB,CAAhB,CASA,GAAK5O,UAAUC,MAAV,CAAmB,CAAxB,CAA4B,CAE3B+J,QAAQuL,KAAR,CAAe,+EAAf,EAEA,CAED,CAjBD,CAmBA1W,MAAM6X,OAAN,CAAcpX,SAAd,CAA0B,CAEzBoJ,YAAa7J,MAAM6X,OAFM,CAIzBlO,IAAK,aAAWgW,GAAX,CAAgBC,GAAhB,CAAqBC,GAArB,CAA0BgC,GAA1B,CAA+B/B,GAA/B,CAAoCC,GAApC,CAAyCC,GAAzC,CAA8C8B,GAA9C,CAAmD7B,GAAnD,CAAwDC,GAAxD,CAA6DC,GAA7D,CAAkE4B,GAAlE,CAAuEC,GAAvE,CAA4EC,GAA5E,CAAiFC,GAAjF,CAAsFC,GAAtF,CAA4F,CAEhG,OAAS,KAAKpS,QAAd,CAEAE,GAAI,CAAJ,EAAU0P,GAAV,CAAe1P,GAAI,CAAJ,EAAU2P,GAAV,CAAe3P,GAAI,CAAJ,EAAU4P,GAAV,CAAe5P,GAAI,EAAJ,EAAW4R,GAAX,CAC7C5R,GAAI,CAAJ,EAAU6P,GAAV,CAAe7P,GAAI,CAAJ,EAAU8P,GAAV,CAAe9P,GAAI,CAAJ,EAAU+P,GAAV,CAAe/P,GAAI,EAAJ,EAAW6R,GAAX,CAC7C7R,GAAI,CAAJ,EAAUgQ,GAAV,CAAehQ,GAAI,CAAJ,EAAUiQ,GAAV,CAAejQ,GAAI,EAAJ,EAAWkQ,GAAX,CAAgBlQ,GAAI,EAAJ,EAAW8R,GAAX,CAC9C9R,GAAI,CAAJ,EAAU+R,GAAV,CAAe/R,GAAI,CAAJ,EAAUgS,GAAV,CAAehS,GAAI,EAAJ,EAAWiS,GAAX,CAAgBjS,GAAI,EAAJ,EAAWkS,GAAX,CAE9C,WAAA,CAEA,CAfwB,CAiBzB/B,SAAU,mBAAY,CAErB,KAAKzW,GAAL,CAEC,CAFD,CAEI,CAFJ,CAEO,CAFP,CAEU,CAFV,CAGC,CAHD,CAGI,CAHJ,CAGO,CAHP,CAGU,CAHV,CAIC,CAJD,CAII,CAJJ,CAIO,CAJP,CAIU,CAJV,CAKC,CALD,CAKI,CALJ,CAKO,CALP,CAKU,CALV,EASA,WAAA,CAEA,CA9BwB,CAgCzBoC,MAAO,gBAAY,CAElB,iBAAiB8L,OAAV,GAAoB9J,SAApB,CAA+B,KAAKgC,QAApC,CAAP,CAEA,CApCwB,CAsCzBhG,KAAM,cAAWsB,CAAX,CAAe,CAEpB,KAAK0E,QAAL,CAAcpG,GAAd,CAAmB0B,EAAE0E,QAArB,EAEA,WAAA,CAEA,CA5CwB,CA8CzBqS,aAAc,sBAAW/W,CAAX,CAAe,CAE5B,OAAS,KAAK0E,QAAd,CACA,OAAS1E,EAAE0E,QAAX,CAEAE,GAAI,EAAJ,EAAWoQ,GAAI,EAAJ,CAAX,CACApQ,GAAI,EAAJ,EAAWoQ,GAAI,EAAJ,CAAX,CACApQ,GAAI,EAAJ,EAAWoQ,GAAI,EAAJ,CAAX,CAEA,WAAA,CAEA,CAzDwB,CA2DzBgC,aAAc,sBAAWC,KAAX,CAAkBC,KAAlB,CAAyBC,KAAzB,CAAiC,CAE9CF,MAAM5I,mBAAN,CAA2B,IAA3B,CAAiC,CAAjC,EACA6I,MAAM7I,mBAAN,CAA2B,IAA3B,CAAiC,CAAjC,EACA8I,MAAM9I,mBAAN,CAA2B,IAA3B,CAAiC,CAAjC,EAEA,WAAA,CAEA,CAnEwB,CAqEzB+I,UAAW,mBAAWH,KAAX,CAAkBC,KAAlB,CAAyBC,KAAzB,CAAiC,CAE3C,KAAK7Y,GAAL,CACC2Y,MAAM/hB,CADP,CACUgiB,MAAMhiB,CADhB,CACmBiiB,MAAMjiB,CADzB,CAC4B,CAD5B,CAEC+hB,MAAMlU,CAFP,CAEUmU,MAAMnU,CAFhB,CAEmBoU,MAAMpU,CAFzB,CAE4B,CAF5B,CAGCkU,MAAMjU,CAHP,CAGUkU,MAAMlU,CAHhB,CAGmBmU,MAAMnU,CAHzB,CAG4B,CAH5B,CAIC,CAJD,CAIU,CAJV,CAImB,CAJnB,CAI4B,CAJ5B,EAOA,WAAA,CAEA,CAhFwB,CAkFzBqU,gBAAiB,UAAY,CAE5B,MAAA,CAEA,gBAAkBrX,CAAX,CAAe,CAErB,GAAKyF,KAAO3Q,SAAZ,CAAwB2Q,GAAK,UAAUC,OAAV,EAAL,CAExB,OAAS,KAAKhB,QAAd,CACA,OAAS1E,EAAE0E,QAAX,CAEA,WAAa,EAAIe,GAAG4I,mBAAH,CAAwBrO,CAAxB,CAA2B,CAA3B,EAA+BjK,MAA/B,EAAjB,CACA,WAAa,EAAI0P,GAAG4I,mBAAH,CAAwBrO,CAAxB,CAA2B,CAA3B,EAA+BjK,MAA/B,EAAjB,CACA,WAAa,EAAI0P,GAAG4I,mBAAH,CAAwBrO,CAAxB,CAA2B,CAA3B,EAA+BjK,MAA/B,EAAjB,CAEA6O,GAAI,CAAJ,EAAUoQ,GAAI,CAAJ,EAAUsC,MAApB,CACA1S,GAAI,CAAJ,EAAUoQ,GAAI,CAAJ,EAAUsC,MAApB,CACA1S,GAAI,CAAJ,EAAUoQ,GAAI,CAAJ,EAAUsC,MAApB,CAEA1S,GAAI,CAAJ,EAAUoQ,GAAI,CAAJ,EAAUuC,MAApB,CACA3S,GAAI,CAAJ,EAAUoQ,GAAI,CAAJ,EAAUuC,MAApB,CACA3S,GAAI,CAAJ,EAAUoQ,GAAI,CAAJ,EAAUuC,MAApB,CAEA3S,GAAI,CAAJ,EAAUoQ,GAAI,CAAJ,EAAUwC,MAApB,CACA5S,GAAI,CAAJ,EAAUoQ,GAAI,CAAJ,EAAUwC,MAApB,CACA5S,GAAI,EAAJ,EAAWoQ,GAAI,EAAJ,EAAWwC,MAAtB,CAEA,WAAA,CAEA,CAzBD,CA2BA,CA/BgB,EAlFQ,CAmHzBC,sBAAuB,+BAAWhU,KAAX,CAAmB,CAEzC,GAAKA,uBAAuBE,KAAvB,GAAiC,KAAtC,CAA8C,CAE7C7D,QAAQuL,KAAR,CAAe,sGAAf,EAEA,CAED,OAAS,KAAK3G,QAAd,CAEA,MAAQjB,MAAMvO,CAAd,CAAiB6N,EAAIU,MAAMV,CAA3B,CAA8BC,EAAIS,MAAMT,CAAxC,CACA,MAAQjO,KAAK6O,GAAL,CAAU1O,CAAV,CAAR,CAAuBmJ,EAAItJ,KAAK8O,GAAL,CAAU3O,CAAV,CAA3B,CACA,MAAQH,KAAK6O,GAAL,CAAUb,CAAV,CAAR,CAAuB6I,EAAI7W,KAAK8O,GAAL,CAAUd,CAAV,CAA3B,CACA,MAAQhO,KAAK6O,GAAL,CAAUZ,CAAV,CAAR,CAAuB8F,EAAI/T,KAAK8O,GAAL,CAAUb,CAAV,CAA3B,CAEA,GAAKS,MAAMK,KAAN,GAAgB,KAArB,CAA6B,CAE5B,OAASwC,EAAImF,CAAb,CAAgBiM,GAAKpR,EAAIwC,CAAzB,CAA4B6O,GAAKtZ,EAAIoN,CAArC,CAAwCmM,GAAKvZ,EAAIyK,CAAjD,CAEAlE,GAAI,CAAJ,EAAUnC,EAAIgJ,CAAd,CACA7G,GAAI,CAAJ,EAAU,CAAEnC,CAAF,CAAMqG,CAAhB,CACAlE,GAAI,CAAJ,EAAUgH,CAAV,CAEAhH,GAAI,CAAJ,EAAU8S,GAAKC,GAAK/L,CAApB,CACAhH,GAAI,CAAJ,EAAUiT,GAAKD,GAAKhM,CAApB,CACAhH,GAAI,CAAJ,EAAU,CAAEvG,CAAF,CAAMoE,CAAhB,CAEAmC,GAAI,CAAJ,EAAUgT,GAAKC,GAAKjM,CAApB,CACAhH,GAAI,CAAJ,EAAU+S,GAAKD,GAAK9L,CAApB,CACAhH,GAAI,EAAJ,EAAW0B,EAAI7D,CAAf,CAEA,CAhBD,QAgBYgB,MAAMK,KAAN,GAAgB,KAArB,CAA6B,CAEnC,OAASrB,EAAIgJ,CAAb,CAAgBqM,GAAKrV,EAAIqG,CAAzB,CAA4BiP,GAAKnM,EAAIH,CAArC,CAAwCuM,GAAKpM,EAAI9C,CAAjD,CAEAlE,GAAI,CAAJ,EAAUqT,GAAKD,GAAK3Z,CAApB,CACAuG,GAAI,CAAJ,EAAUmT,GAAK1Z,CAAL,CAASyZ,EAAnB,CACAlT,GAAI,CAAJ,EAAU0B,EAAIsF,CAAd,CAEAhH,GAAI,CAAJ,EAAU0B,EAAIwC,CAAd,CACAlE,GAAI,CAAJ,EAAU0B,EAAImF,CAAd,CACA7G,GAAI,CAAJ,EAAU,CAAEvG,CAAZ,CAEAuG,GAAI,CAAJ,EAAUkT,GAAKzZ,CAAL,CAAS0Z,EAAnB,CACAnT,GAAI,CAAJ,EAAUoT,GAAKC,GAAK5Z,CAApB,CACAuG,GAAI,EAAJ,EAAW0B,EAAI7D,CAAf,CAEA,CAhBM,QAgBKgB,MAAMK,KAAN,GAAgB,KAArB,CAA6B,CAEnC,OAASrB,EAAIgJ,CAAb,CAAgBqM,GAAKrV,EAAIqG,CAAzB,CAA4BiP,GAAKnM,EAAIH,CAArC,CAAwCuM,GAAKpM,EAAI9C,CAAjD,CAEAlE,GAAI,CAAJ,EAAUqT,GAAKD,GAAK3Z,CAApB,CACAuG,GAAI,CAAJ,EAAU,CAAE0B,CAAF,CAAMwC,CAAhB,CACAlE,GAAI,CAAJ,EAAUmT,GAAKD,GAAKzZ,CAApB,CAEAuG,GAAI,CAAJ,EAAUkT,GAAKC,GAAK1Z,CAApB,CACAuG,GAAI,CAAJ,EAAU0B,EAAImF,CAAd,CACA7G,GAAI,CAAJ,EAAUoT,GAAKC,GAAK5Z,CAApB,CAEAuG,GAAI,CAAJ,EAAU,CAAE0B,CAAF,CAAMsF,CAAhB,CACAhH,GAAI,CAAJ,EAAUvG,CAAV,CACAuG,GAAI,EAAJ,EAAW0B,EAAI7D,CAAf,CAEA,CAhBM,QAgBKgB,MAAMK,KAAN,GAAgB,KAArB,CAA6B,CAEnC,OAASwC,EAAImF,CAAb,CAAgBiM,GAAKpR,EAAIwC,CAAzB,CAA4B6O,GAAKtZ,EAAIoN,CAArC,CAAwCmM,GAAKvZ,EAAIyK,CAAjD,CAEAlE,GAAI,CAAJ,EAAUnC,EAAIgJ,CAAd,CACA7G,GAAI,CAAJ,EAAU+S,GAAK/L,CAAL,CAAS8L,EAAnB,CACA9S,GAAI,CAAJ,EAAUiT,GAAKjM,CAAL,CAASgM,EAAnB,CAEAhT,GAAI,CAAJ,EAAUnC,EAAIqG,CAAd,CACAlE,GAAI,CAAJ,EAAUgT,GAAKhM,CAAL,CAASiM,EAAnB,CACAjT,GAAI,CAAJ,EAAU8S,GAAK9L,CAAL,CAAS+L,EAAnB,CAEA/S,GAAI,CAAJ,EAAU,CAAEgH,CAAZ,CACAhH,GAAI,CAAJ,EAAUvG,EAAIoE,CAAd,CACAmC,GAAI,EAAJ,EAAW0B,EAAI7D,CAAf,CAEA,CAhBM,QAgBKgB,MAAMK,KAAN,GAAgB,KAArB,CAA6B,CAEnC,OAASwC,EAAI7D,CAAb,CAAgByV,GAAK5R,EAAIsF,CAAzB,CAA4BuM,GAAK9Z,EAAIoE,CAArC,CAAwC2V,GAAK/Z,EAAIuN,CAAjD,CAEAhH,GAAI,CAAJ,EAAUnC,EAAIgJ,CAAd,CACA7G,GAAI,CAAJ,EAAUwT,GAAKC,GAAKvP,CAApB,CACAlE,GAAI,CAAJ,EAAUuT,GAAKrP,CAAL,CAASoP,EAAnB,CAEAtT,GAAI,CAAJ,EAAUkE,CAAV,CACAlE,GAAI,CAAJ,EAAU0B,EAAImF,CAAd,CACA7G,GAAI,CAAJ,EAAU,CAAEvG,CAAF,CAAMoN,CAAhB,CAEA7G,GAAI,CAAJ,EAAU,CAAEgH,CAAF,CAAMH,CAAhB,CACA7G,GAAI,CAAJ,EAAUsT,GAAKpP,CAAL,CAASqP,EAAnB,CACAvT,GAAI,EAAJ,EAAWyT,GAAKD,GAAKtP,CAArB,CAEA,CAhBM,QAgBKrF,MAAMK,KAAN,GAAgB,KAArB,CAA6B,CAEnC,OAASwC,EAAI7D,CAAb,CAAgByV,GAAK5R,EAAIsF,CAAzB,CAA4BuM,GAAK9Z,EAAIoE,CAArC,CAAwC2V,GAAK/Z,EAAIuN,CAAjD,CAEAhH,GAAI,CAAJ,EAAUnC,EAAIgJ,CAAd,CACA7G,GAAI,CAAJ,EAAU,CAAEkE,CAAZ,CACAlE,GAAI,CAAJ,EAAUgH,EAAIH,CAAd,CAEA7G,GAAI,CAAJ,EAAUyT,GAAKvP,CAAL,CAASsP,EAAnB,CACAxT,GAAI,CAAJ,EAAU0B,EAAImF,CAAd,CACA7G,GAAI,CAAJ,EAAUsT,GAAKpP,CAAL,CAASqP,EAAnB,CAEAvT,GAAI,CAAJ,EAAUuT,GAAKrP,CAAL,CAASoP,EAAnB,CACAtT,GAAI,CAAJ,EAAUvG,EAAIoN,CAAd,CACA7G,GAAI,EAAJ,EAAWwT,GAAKtP,CAAL,CAASuP,EAApB,CAEA;CAGDzT,GAAI,CAAJ,EAAU,CAAV,CACAA,GAAI,CAAJ,EAAU,CAAV,CACAA,GAAI,EAAJ,EAAW,CAAX;CAGAA,GAAI,EAAJ,EAAW,CAAX,CACAA,GAAI,EAAJ,EAAW,CAAX,CACAA,GAAI,EAAJ,EAAW,CAAX,CACAA,GAAI,EAAJ,EAAW,CAAX,CAEA,WAAA,CAEA,CAjPwB,CAmPzBgL,2BAA4B,oCAAWzQ,CAAX,CAAe,CAE1C,OAAS,KAAKuF,QAAd,CAEA,MAAQvF,EAAEjK,CAAV,CAAa6N,EAAI5D,EAAE4D,CAAnB,CAAsBC,EAAI7D,EAAE6D,CAA5B,CAA+BC,EAAI9D,EAAE8D,CAArC,CACA,OAAS/N,EAAIA,CAAb,CAAgBojB,GAAKvV,EAAIA,CAAzB,CAA4BwV,GAAKvV,EAAIA,CAArC,CACA,OAAS9N,EAAIsjB,EAAb,CAAiBpJ,GAAKla,EAAIojB,EAA1B,CAA8BjJ,GAAKna,EAAIqjB,EAAvC,CACA,OAASxV,EAAIuV,EAAb,CAAiBhJ,GAAKvM,EAAIwV,EAA1B,CAA8BpJ,GAAKnM,EAAIuV,EAAvC,CACA,OAAStV,EAAIuV,EAAb,CAAiBC,GAAKxV,EAAIqV,EAA1B,CAA8BI,GAAKzV,EAAIsV,EAAvC,CAEA3T,GAAI,CAAJ,EAAU,GAAMsK,GAAKC,EAAX,CAAV,CACAvK,GAAI,CAAJ,EAAUwK,GAAKsJ,EAAf,CACA9T,GAAI,CAAJ,EAAUyK,GAAKoJ,EAAf,CAEA7T,GAAI,CAAJ,EAAUwK,GAAKsJ,EAAf,CACA9T,GAAI,CAAJ,EAAU,GAAMqK,GAAKE,EAAX,CAAV,CACAvK,GAAI,CAAJ,EAAU0K,GAAKqJ,EAAf,CAEA/T,GAAI,CAAJ,EAAUyK,GAAKoJ,EAAf,CACA7T,GAAI,CAAJ,EAAU0K,GAAKqJ,EAAf,CACA/T,GAAI,EAAJ,EAAW,GAAMqK,GAAKC,EAAX,CAAX;CAGAtK,GAAI,CAAJ,EAAU,CAAV,CACAA,GAAI,CAAJ,EAAU,CAAV,CACAA,GAAI,EAAJ,EAAW,CAAX;CAGAA,GAAI,EAAJ,EAAW,CAAX,CACAA,GAAI,EAAJ,EAAW,CAAX,CACAA,GAAI,EAAJ,EAAW,CAAX,CACAA,GAAI,EAAJ,EAAW,CAAX,CAEA,WAAA,CAEA,CAtRwB,CAwRzBgU,OAAQ,UAAY,CAEnB,KAAA,CAAO7V,CAAP,CAAUC,CAAV,CAEA,gBAAkB6V,GAAX,CAAgBjjB,MAAhB,CAAwBkjB,EAAxB,CAA6B,CAEnC,GAAK5jB,IAAMJ,SAAX,CAAuB,CAEtBI,EAAI,UAAUwQ,OAAV,EAAJ,CACA3C,EAAI,UAAU2C,OAAV,EAAJ,CACA1C,EAAI,UAAU0C,OAAV,EAAJ,CAEA,CAED,OAAS,KAAKhB,QAAd,CAEA1B,EAAEuG,UAAF,CAAcsP,GAAd,CAAmBjjB,MAAnB,EAA4BmQ,SAA5B,GAEA,GAAK/C,EAAEmD,QAAF,KAAiB,CAAtB,CAA0B,CAEzBnD,EAAEA,CAAF,CAAM,CAAN,CAEA,CAED9N,EAAE4Q,YAAF,CAAgBgT,EAAhB,CAAoB9V,CAApB,EAAwB+C,SAAxB,GAEA,GAAK7Q,EAAEiR,QAAF,KAAiB,CAAtB,CAA0B,CAEzBnD,EAAEA,CAAF,EAAO,MAAP,CACA9N,EAAE4Q,YAAF,CAAgBgT,EAAhB,CAAoB9V,CAApB,EAAwB+C,SAAxB,GAEA,CAEDhD,EAAE+C,YAAF,CAAgB9C,CAAhB,CAAmB9N,CAAnB,EAGA0P,GAAI,CAAJ,EAAU1P,EAAEA,CAAZ,CAAe0P,GAAI,CAAJ,EAAU7B,EAAE7N,CAAZ,CAAe0P,GAAI,CAAJ,EAAU5B,EAAE9N,CAAZ,CAC9B0P,GAAI,CAAJ,EAAU1P,EAAE6N,CAAZ,CAAe6B,GAAI,CAAJ,EAAU7B,EAAEA,CAAZ,CAAe6B,GAAI,CAAJ,EAAU5B,EAAED,CAAZ,CAC9B6B,GAAI,CAAJ,EAAU1P,EAAE8N,CAAZ,CAAe4B,GAAI,CAAJ,EAAU7B,EAAEC,CAAZ,CAAe4B,GAAI,EAAJ,EAAW5B,EAAEA,CAAb,CAE9B,WAAA,CAEA,CAtCD,CAwCA,CA5CO,EAxRiB,CAsUzBZ,SAAU,kBAAWpC,CAAX,CAAc+Y,CAAd,CAAkB,CAE3B,GAAKA,IAAMjkB,SAAX,CAAuB,CAEtBgL,QAAQC,IAAR,CAAc,kGAAd,EACA,YAAY0M,gBAAL,CAAuBzM,CAAvB,CAA0B+Y,CAA1B,CAAP,CAEA,CAED,YAAYtM,gBAAL,CAAuB,IAAvB,CAA6BzM,CAA7B,CAAP,CAEA,CAjVwB,CAmVzBqG,YAAa,qBAAWrG,CAAX,CAAe,CAE3B,YAAYyM,gBAAL,CAAuBzM,CAAvB,CAA0B,IAA1B,CAAP,CAEA,CAvVwB,CAyVzByM,iBAAkB,0BAAWnG,CAAX,CAAcjI,CAAd,CAAkB,CAEnC,OAASiI,EAAE5B,QAAX,CACA,OAASrG,EAAEqG,QAAX,CACA,OAAS,KAAKA,QAAd,CAEA,QAAUmT,GAAI,CAAJ,CAAV,CAAmBmB,IAAMnB,GAAI,CAAJ,CAAzB,CAAkCoB,IAAMpB,GAAI,CAAJ,CAAxC,CAAiDqB,IAAMrB,GAAI,EAAJ,CAAvD,CACA,QAAUA,GAAI,CAAJ,CAAV,CAAmBsB,IAAMtB,GAAI,CAAJ,CAAzB,CAAkCuB,IAAMvB,GAAI,CAAJ,CAAxC,CAAiDwB,IAAMxB,GAAI,EAAJ,CAAvD,CACA,QAAUA,GAAI,CAAJ,CAAV,CAAmByB,IAAMzB,GAAI,CAAJ,CAAzB,CAAkC0B,IAAM1B,GAAI,EAAJ,CAAxC,CAAkD2B,IAAM3B,GAAI,EAAJ,CAAxD,CACA,QAAUA,GAAI,CAAJ,CAAV,CAAmB4B,IAAM5B,GAAI,CAAJ,CAAzB,CAAkC6B,IAAM7B,GAAI,EAAJ,CAAxC,CAAkD8B,IAAM9B,GAAI,EAAJ,CAAxD,CAEA,QAAUF,GAAI,CAAJ,CAAV,CAAmBiC,IAAMjC,GAAI,CAAJ,CAAzB,CAAkCkC,IAAMlC,GAAI,CAAJ,CAAxC,CAAiDmC,IAAMnC,GAAI,EAAJ,CAAvD,CACA,QAAUA,GAAI,CAAJ,CAAV,CAAmBoC,IAAMpC,GAAI,CAAJ,CAAzB,CAAkCqC,IAAMrC,GAAI,CAAJ,CAAxC,CAAiDsC,IAAMtC,GAAI,EAAJ,CAAvD,CACA,QAAUA,GAAI,CAAJ,CAAV,CAAmBuC,IAAMvC,GAAI,CAAJ,CAAzB,CAAkCwC,IAAMxC,GAAI,EAAJ,CAAxC,CAAkDyC,IAAMzC,GAAI,EAAJ,CAAxD,CACA,QAAUA,GAAI,CAAJ,CAAV,CAAmB0C,IAAM1C,GAAI,CAAJ,CAAzB,CAAkC2C,IAAM3C,GAAI,EAAJ,CAAxC,CAAkD4C,IAAM5C,GAAI,EAAJ,CAAxD,CAEA/S,GAAI,CAAJ,EAAU4V,IAAMC,GAAN,CAAYzB,IAAM0B,GAAlB,CAAwBzB,IAAM0B,GAA9B,CAAoCzB,IAAM0B,GAApD,CACAhW,GAAI,CAAJ,EAAU4V,IAAMZ,GAAN,CAAYZ,IAAMe,GAAlB,CAAwBd,IAAMiB,GAA9B,CAAoChB,IAAMmB,GAApD,CACAzV,GAAI,CAAJ,EAAU4V,IAAMX,GAAN,CAAYb,IAAMgB,GAAlB,CAAwBf,IAAMkB,GAA9B,CAAoCjB,IAAMoB,GAApD,CACA1V,GAAI,EAAJ,EAAW4V,IAAMV,GAAN,CAAYd,IAAMiB,GAAlB,CAAwBhB,IAAMmB,GAA9B,CAAoClB,IAAMqB,GAArD,CAEA3V,GAAI,CAAJ,EAAUiW,IAAMJ,GAAN,CAAYtB,IAAMuB,GAAlB,CAAwBtB,IAAMuB,GAA9B,CAAoCtB,IAAMuB,GAApD,CACAhW,GAAI,CAAJ,EAAUiW,IAAMjB,GAAN,CAAYT,IAAMY,GAAlB,CAAwBX,IAAMc,GAA9B,CAAoCb,IAAMgB,GAApD,CACAzV,GAAI,CAAJ,EAAUiW,IAAMhB,GAAN,CAAYV,IAAMa,GAAlB,CAAwBZ,IAAMe,GAA9B,CAAoCd,IAAMiB,GAApD,CACA1V,GAAI,EAAJ,EAAWiW,IAAMf,GAAN,CAAYX,IAAMc,GAAlB,CAAwBb,IAAMgB,GAA9B,CAAoCf,IAAMkB,GAArD,CAEA3V,GAAI,CAAJ,EAAUkW,IAAML,GAAN,CAAYnB,IAAMoB,GAAlB,CAAwBnB,IAAMoB,GAA9B,CAAoCnB,IAAMoB,GAApD,CACAhW,GAAI,CAAJ,EAAUkW,IAAMlB,GAAN,CAAYN,IAAMS,GAAlB,CAAwBR,IAAMW,GAA9B,CAAoCV,IAAMa,GAApD,CACAzV,GAAI,EAAJ,EAAWkW,IAAMjB,GAAN,CAAYP,IAAMU,GAAlB,CAAwBT,IAAMY,GAA9B,CAAoCX,IAAMc,GAArD,CACA1V,GAAI,EAAJ,EAAWkW,IAAMhB,GAAN,CAAYR,IAAMW,GAAlB,CAAwBV,IAAMa,GAA9B,CAAoCZ,IAAMe,GAArD,CAEA3V,GAAI,CAAJ,EAAUmW,IAAMN,GAAN,CAAYhB,IAAMiB,GAAlB,CAAwBhB,IAAMiB,GAA9B,CAAoChB,IAAMiB,GAApD,CACAhW,GAAI,CAAJ,EAAUmW,IAAMnB,GAAN,CAAYH,IAAMM,GAAlB,CAAwBL,IAAMQ,GAA9B,CAAoCP,IAAMU,GAApD,CACAzV,GAAI,EAAJ,EAAWmW,IAAMlB,GAAN,CAAYJ,IAAMO,GAAlB,CAAwBN,IAAMS,GAA9B,CAAoCR,IAAMW,GAArD,CACA1V,GAAI,EAAJ,EAAWmW,IAAMjB,GAAN,CAAYL,IAAMQ,GAAlB,CAAwBP,IAAMU,GAA9B,CAAoCT,IAAMY,GAArD,CAEA,WAAA,CAEA,CA/XwB,CAiYzBS,gBAAiB,yBAAW1U,CAAX,CAAcjI,CAAd,CAAiBF,CAAjB,CAAqB,CAErC,OAAS,KAAKuG,QAAd,CAEA,KAAK+H,gBAAL,CAAuBnG,CAAvB,CAA0BjI,CAA1B,EAEAF,EAAG,CAAH,EAASyG,GAAI,CAAJ,CAAT,CAAkBzG,EAAG,CAAH,EAASyG,GAAI,CAAJ,CAAT,CAAkBzG,EAAG,CAAH,EAASyG,GAAI,CAAJ,CAAT,CAAkBzG,EAAG,CAAH,EAASyG,GAAI,CAAJ,CAAT,CACtDzG,EAAG,CAAH,EAASyG,GAAI,CAAJ,CAAT,CAAkBzG,EAAG,CAAH,EAASyG,GAAI,CAAJ,CAAT,CAAkBzG,EAAG,CAAH,EAASyG,GAAI,CAAJ,CAAT,CAAkBzG,EAAG,CAAH,EAASyG,GAAI,CAAJ,CAAT,CACtDzG,EAAG,CAAH,EAAUyG,GAAI,CAAJ,CAAV,CAAmBzG,EAAG,CAAH,EAAUyG,GAAI,CAAJ,CAAV,CAAmBzG,EAAG,EAAH,EAAUyG,GAAI,EAAJ,CAAV,CAAoBzG,EAAG,EAAH,EAAUyG,GAAI,EAAJ,CAAV,CAC1DzG,EAAG,EAAH,EAAUyG,GAAI,EAAJ,CAAV,CAAoBzG,EAAG,EAAH,EAAUyG,GAAI,EAAJ,CAAV,CAAoBzG,EAAG,EAAH,EAAUyG,GAAI,EAAJ,CAAV,CAAoBzG,EAAG,EAAH,EAAUyG,GAAI,EAAJ,CAAV,CAE5D,WAAA,CAEA,CA9YwB,CAgZzBvC,eAAgB,wBAAW/C,CAAX,CAAe,CAE9B,OAAS,KAAKoF,QAAd,CAEAE,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,EAAJ,GAAYtF,CAAZ,CAC1CsF,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,EAAJ,GAAYtF,CAAZ,CAC1CsF,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,EAAJ,GAAYtF,CAAZ,CAAesF,GAAI,EAAJ,GAAYtF,CAAZ,CAC3CsF,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,CAAJ,GAAWtF,CAAX,CAAcsF,GAAI,EAAJ,GAAYtF,CAAZ,CAAesF,GAAI,EAAJ,GAAYtF,CAAZ,CAE3C,WAAA,CAEA,CA3ZwB,CA6ZzB4V,oBAAqB,UAAY,CAEhC,MAAA,CAEA,gBAAkBvS,KAAX,CAAkBC,MAAlB,CAA0B7M,MAA1B,CAAmC,CAEzC,GAAK0P,KAAO3Q,SAAZ,CAAwB2Q,GAAK,UAAUC,OAAV,EAAL,CACxB,GAAK9C,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAC5B,GAAK7M,SAAWjB,SAAhB,CAA4BiB,OAAS4M,MAAM5M,MAAf,CAE5B,IAAM,MAAQ,CAAR,CAAWof,EAAIvS,MAArB,CAA6B4O,EAAIzb,MAAjC,CAAyCyb,GAAK,CAAL,CAAQ2D,GAAK,CAAtD,CAA0D,CAEzD1P,GAAG/C,SAAH,CAAcC,KAAd,CAAqBwS,CAArB,EACA1P,GAAGiG,YAAH,CAAiB,IAAjB,EACAjG,GAAG5C,OAAH,CAAYF,KAAZ,CAAmBwS,CAAnB,EAEA,CAED,YAAA,CAEA,CAhBD,CAkBA,CAtBoB,EA7ZI,CAqbzBC,cAAe,UAAY,CAE1B,MAAA,CAEA,6BAAO,CAAwBC,MAAxB,CAAgCzS,MAAhC,CAAwC7M,MAAxC,CAAiD,CAEvD,GAAK0P,KAAO3Q,SAAZ,CAAwB2Q,GAAK,UAAUC,OAAV,EAAL,CACxB,GAAK9C,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAC5B,GAAK7M,SAAWjB,SAAhB,CAA4BiB,OAASsf,OAAOtf,MAAP,CAAgBsf,OAAOtK,QAAhC,CAE5B,IAAM,MAAQ,CAAR,CAAWoK,EAAIvS,MAArB,CAA6B4O,EAAIzb,MAAjC,CAAyCyb,IAAM2D,GAA/C,CAAsD,CAErD1P,GAAGvQ,CAAH,CAAOmgB,OAAOC,IAAP,CAAaH,CAAb,CAAP,CACA1P,GAAG1C,CAAH,CAAOsS,OAAOE,IAAP,CAAaJ,CAAb,CAAP,CACA1P,GAAGzC,CAAH,CAAOqS,OAAOG,IAAP,CAAaL,CAAb,CAAP,CAEA1P,GAAGiG,YAAH,CAAiB,IAAjB,EAEA2J,OAAOI,MAAP,CAAehQ,GAAGvQ,CAAlB,CAAqBuQ,GAAG1C,CAAxB,CAA2B0C,GAAGzC,CAA9B,EAEA,CAED,aAAA,CAEA,CApBD,CAsBA,CA1Bc,EArbU,CAidzB0S,YAAa,sBAAY,CAExB,OAAS,KAAKhR,QAAd,CAEA,QAAUE,GAAI,CAAJ,CAAV,CAAmB2P,IAAM3P,GAAI,CAAJ,CAAzB,CAAkC4P,IAAM5P,GAAI,CAAJ,CAAxC,CAAiD4R,IAAM5R,GAAI,EAAJ,CAAvD,CACA,QAAUA,GAAI,CAAJ,CAAV,CAAmB8P,IAAM9P,GAAI,CAAJ,CAAzB,CAAkC+P,IAAM/P,GAAI,CAAJ,CAAxC,CAAiD6R,IAAM7R,GAAI,EAAJ,CAAvD,CACA,QAAUA,GAAI,CAAJ,CAAV,CAAmBiQ,IAAMjQ,GAAI,CAAJ,CAAzB,CAAkCkQ,IAAMlQ,GAAI,EAAJ,CAAxC,CAAkD8R,IAAM9R,GAAI,EAAJ,CAAxD,CACA,QAAUA,GAAI,CAAJ,CAAV,CAAmBgS,IAAMhS,GAAI,CAAJ,CAAzB,CAAkCiS,IAAMjS,GAAI,EAAJ,CAAxC,CAAkDkS,IAAMlS,GAAI,EAAJ,CAAxD;;CAKA,YAEE,CAAE4R,GAAF,CAAQ7B,GAAR,CAAcE,GAAd,CACGL,IAAMiC,GAAN,CAAY5B,GADf,CAEG2B,IAAM9B,GAAN,CAAYI,GAFf,CAGGP,IAAMkC,GAAN,CAAY3B,GAHf,CAIGN,IAAME,GAAN,CAAYgC,GAJf,CAKGnC,IAAMI,GAAN,CAAY+B,GANhB,EAQAE,KACC,CAAEtC,GAAF,CAAQK,GAAR,CAAc+B,GAAd,CACGpC,IAAMmC,GAAN,CAAY3B,GADf,CAEG0B,IAAM/B,GAAN,CAAYK,GAFf,CAGGN,IAAMC,GAAN,CAAYiC,GAHf,CAIGlC,IAAMiC,GAAN,CAAY7B,GAJf,CAKG4B,IAAM7B,GAAN,CAAYC,GANhB,CARA,CAgBAiC,KACC,CAAEvC,GAAF,CAAQmC,GAAR,CAAc5B,GAAd,CACGP,IAAMI,GAAN,CAAYgC,GADf,CAEGF,IAAM/B,GAAN,CAAYI,GAFf,CAGGN,IAAME,GAAN,CAAYiC,GAHf,CAIGF,IAAM9B,GAAN,CAAYE,GAJf,CAKGL,IAAMkC,GAAN,CAAY7B,GANhB,CAhBA,CAwBAkC,KACC,CAAEtC,GAAF,CAAQE,GAAR,CAAcE,GAAd,CACGN,IAAMK,GAAN,CAAYE,GADf,CAEGP,IAAMI,GAAN,CAAYI,GAFf,CAGGN,IAAMC,GAAN,CAAYI,GAHf,CAIGN,IAAME,GAAN,CAAYK,GAJf,CAKGP,IAAMI,GAAN,CAAYC,GANhB,CAzBD,CAoCA,CAjgBwB,CAmgBzBsB,UAAW,oBAAY,CAEtB,OAAS,KAAKxR,QAAd,CACA,OAAA,CAEAyR,IAAMvR,GAAI,CAAJ,CAAN,CAAeA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAV,CAAmBA,GAAI,CAAJ,EAAUuR,GAAV,CAClCA,IAAMvR,GAAI,CAAJ,CAAN,CAAeA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAV,CAAmBA,GAAI,CAAJ,EAAUuR,GAAV,CAClCA,IAAMvR,GAAI,CAAJ,CAAN,CAAeA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAV,CAAmBA,GAAI,CAAJ,EAAUuR,GAAV,CAElCA,IAAMvR,GAAI,CAAJ,CAAN,CAAeA,GAAI,CAAJ,EAAUA,GAAI,EAAJ,CAAV,CAAoBA,GAAI,EAAJ,EAAWuR,GAAX,CACnCA,IAAMvR,GAAI,CAAJ,CAAN,CAAeA,GAAI,CAAJ,EAAUA,GAAI,EAAJ,CAAV,CAAoBA,GAAI,EAAJ,EAAWuR,GAAX,CACnCA,IAAMvR,GAAI,EAAJ,CAAN,CAAgBA,GAAI,EAAJ,EAAWA,GAAI,EAAJ,CAAX,CAAqBA,GAAI,EAAJ,EAAWuR,GAAX,CAErC,WAAA,CAEA,CAlhBwB,CAohBzBC,qBAAsB,8BAAWzT,KAAX,CAAkBC,MAAlB,CAA2B,CAEhD9C,QAAQC,IAAR,CAAc,sDACZ,8BADF,EAGA,YAAY8C,OAAL,CAAcF,KAAd,CAAqBC,MAArB,CAAP,CAEA,CA3hBwB,CA6hBzBqY,YAAa,UAAY,CAExB,MAAA,CAEA,iBAAmB,CAElB,GAAKxV,KAAO3Q,SAAZ,CAAwB2Q,GAAK,UAAUC,OAAV,EAAL,CACxB5F,QAAQC,IAAR,CAAc,sGAAd,EAEA,UAAUsO,mBAAH,CAAwB,IAAxB,CAA8B,CAA9B,CAAP,CAEA,CAPD,CASA,CAbY,EA7hBY,CA4iBzB6M,YAAa,qBAAWhV,CAAX,CAAe,CAE3B,OAAS,KAAKxB,QAAd,CAEAE,GAAI,EAAJ,EAAWsB,EAAEhR,CAAb,CACA0P,GAAI,EAAJ,EAAWsB,EAAEnD,CAAb,CACA6B,GAAI,EAAJ,EAAWsB,EAAElD,CAAb,CAEA,WAAA,CAEA,CAtjBwB,CAwjBzB2J,WAAY,oBAAW3M,CAAX,CAAc2V,iBAAd,CAAkC;CAG7C,OAAS,KAAKjR,QAAd,CACCsQ,GAAKhV,EAAE0E,QADR,CAGC4P,IAAMU,GAAI,CAAJ,CAHP,CAGgBP,IAAMO,GAAI,CAAJ,CAHtB,CAG+BJ,IAAMI,GAAI,CAAJ,CAHrC,CAG8C2B,IAAM3B,GAAI,CAAJ,CAHpD,CAICT,IAAMS,GAAI,CAAJ,CAJP,CAIgBN,IAAMM,GAAI,CAAJ,CAJtB,CAI+BH,IAAMG,GAAI,CAAJ,CAJrC,CAI8C4B,IAAM5B,GAAI,CAAJ,CAJpD,CAKCR,IAAMQ,GAAI,CAAJ,CALP,CAKgBL,IAAMK,GAAI,CAAJ,CALtB,CAK+BF,IAAME,GAAI,EAAJ,CALrC,CAK+C6B,IAAM7B,GAAI,EAAJ,CALrD,CAMCwB,IAAMxB,GAAI,EAAJ,CANP,CAMiByB,IAAMzB,GAAI,EAAJ,CANvB,CAMiC0B,IAAM1B,GAAI,EAAJ,CANvC,CAMiD8B,IAAM9B,GAAI,EAAJ,CANvD,CAQCY,IAAMjB,IAAM+B,GAAN,CAAYE,GAAZ,CAAkBH,IAAM3B,GAAN,CAAY8B,GAA9B,CAAoCH,IAAM5B,GAAN,CAAYgC,GAAhD,CAAsDnC,IAAMgC,GAAN,CAAYG,GAAlE,CAAwElC,IAAME,GAAN,CAAYiC,GAApF,CAA0FpC,IAAMI,GAAN,CAAYgC,GAR7G,CASCjB,IAAMW,IAAM1B,GAAN,CAAY8B,GAAZ,CAAkBpC,IAAMkC,GAAN,CAAYE,GAA9B,CAAoCJ,IAAM3B,GAAN,CAAYgC,GAAhD,CAAsDtC,IAAMmC,GAAN,CAAYG,GAAlE,CAAwErC,IAAMK,GAAN,CAAYiC,GAApF,CAA0FvC,IAAMO,GAAN,CAAYgC,GAT7G,CAUChB,IAAMtB,IAAMiC,GAAN,CAAYG,GAAZ,CAAkBJ,IAAM7B,GAAN,CAAYiC,GAA9B,CAAoCJ,IAAM9B,GAAN,CAAYmC,GAAhD,CAAsDtC,IAAMkC,GAAN,CAAYI,GAAlE,CAAwErC,IAAME,GAAN,CAAYoC,GAApF,CAA0FvC,IAAMI,GAAN,CAAYmC,GAV7G,CAWCqE,IAAM3E,IAAM7B,GAAN,CAAYE,GAAZ,CAAkBL,IAAMiC,GAAN,CAAY5B,GAA9B,CAAoC2B,IAAM9B,GAAN,CAAYI,GAAhD,CAAsDP,IAAMkC,GAAN,CAAY3B,GAAlE,CAAwEN,IAAME,GAAN,CAAYgC,GAApF,CAA0FnC,IAAMI,GAAN,CAAY+B,GAX7G,CAaA,QAAUpC,IAAMsB,GAAN,CAAYnB,IAAMoB,GAAlB,CAAwBjB,IAAMkB,GAA9B,CAAoCa,IAAMwE,GAApD,CAEA,GAAKpF,MAAQ,CAAb,CAAiB,CAEhB,QAAU,mEAAV,CAEA,GAAKJ,mBAAqB,KAA1B,CAAkC,sBAIjC,CAJD,IAIO,CAEN7V,QAAQC,IAAR,CAAciW,GAAd,EAEA,CAED,YAAYjB,QAAL,EAAP,CAEA,CAED,WAAa,EAAIgB,GAAjB,CAEAnR,GAAI,CAAJ,EAAUgR,IAAMK,MAAhB,CACArR,GAAI,CAAJ,EAAU,CAAE6R,IAAM3B,GAAN,CAAY6B,GAAZ,CAAkBhC,IAAM+B,GAAN,CAAYC,GAA9B,CAAoCF,IAAM7B,GAAN,CAAYiC,GAAhD,CAAsDpC,IAAMiC,GAAN,CAAYG,GAAlE,CAAwElC,IAAMC,GAAN,CAAYkC,GAApF,CAA0FrC,IAAMK,GAAN,CAAYgC,GAAxG,EAAgHb,MAA1H,CACArR,GAAI,CAAJ,EAAU,CAAE8P,IAAMgC,GAAN,CAAYC,GAAZ,CAAkBF,IAAM5B,GAAN,CAAY8B,GAA9B,CAAoCF,IAAM7B,GAAN,CAAYgC,GAAhD,CAAsDnC,IAAMiC,GAAN,CAAYE,GAAlE,CAAwElC,IAAME,GAAN,CAAYkC,GAApF,CAA0FrC,IAAMI,GAAN,CAAYiC,GAAxG,EAAgHb,MAA1H,CACArR,GAAI,CAAJ,EAAU,CAAE+P,IAAME,GAAN,CAAY8B,GAAZ,CAAkBjC,IAAMI,GAAN,CAAY6B,GAA9B,CAAoChC,IAAMC,GAAN,CAAYgC,GAAhD,CAAsDnC,IAAMK,GAAN,CAAY8B,GAAlE,CAAwElC,IAAME,GAAN,CAAYiC,GAApF,CAA0FpC,IAAMI,GAAN,CAAYgC,GAAxG,EAAgHZ,MAA1H,CAEArR,GAAI,CAAJ,EAAUiR,IAAMI,MAAhB,CACArR,GAAI,CAAJ,EAAU,CAAE4P,IAAMkC,GAAN,CAAYC,GAAZ,CAAkBH,IAAM1B,GAAN,CAAY6B,GAA9B,CAAoCH,IAAM5B,GAAN,CAAYiC,GAAhD,CAAsDvC,IAAMoC,GAAN,CAAYG,GAAlE,CAAwErC,IAAMI,GAAN,CAAYkC,GAApF,CAA0FxC,IAAMQ,GAAN,CAAYgC,GAAxG,EAAgHb,MAA1H,CACArR,GAAI,CAAJ,EAAU,CAAE4R,IAAM3B,GAAN,CAAY8B,GAAZ,CAAkBpC,IAAMmC,GAAN,CAAYC,GAA9B,CAAoCH,IAAM5B,GAAN,CAAYgC,GAAhD,CAAsDtC,IAAMoC,GAAN,CAAYE,GAAlE,CAAwErC,IAAMK,GAAN,CAAYkC,GAApF,CAA0FxC,IAAMO,GAAN,CAAYiC,GAAxG,EAAgHb,MAA1H,CACArR,GAAI,CAAJ,EAAU,CAAE2P,IAAMO,GAAN,CAAY6B,GAAZ,CAAkBnC,IAAMK,GAAN,CAAY8B,GAA9B,CAAoCnC,IAAMI,GAAN,CAAYgC,GAAhD,CAAsDtC,IAAMQ,GAAN,CAAY8B,GAAlE,CAAwErC,IAAMK,GAAN,CAAYiC,GAApF,CAA0FvC,IAAMO,GAAN,CAAYgC,GAAxG,EAAgHZ,MAA1H,CAEArR,GAAI,CAAJ,EAAUkR,IAAMG,MAAhB,CACArR,GAAI,CAAJ,EAAU,CAAE4R,IAAM7B,GAAN,CAAYgC,GAAZ,CAAkBnC,IAAMiC,GAAN,CAAYE,GAA9B,CAAoCH,IAAM/B,GAAN,CAAYoC,GAAhD,CAAsDvC,IAAMmC,GAAN,CAAYI,GAAlE,CAAwErC,IAAMC,GAAN,CAAYqC,GAApF,CAA0FxC,IAAMK,GAAN,CAAYmC,GAAxG,EAAgHb,MAA1H,CACArR,GAAI,EAAJ,EAAW,CAAE2P,IAAMkC,GAAN,CAAYE,GAAZ,CAAkBH,IAAM9B,GAAN,CAAYiC,GAA9B,CAAoCH,IAAM/B,GAAN,CAAYmC,GAAhD,CAAsDtC,IAAMmC,GAAN,CAAYG,GAAlE,CAAwErC,IAAME,GAAN,CAAYqC,GAApF,CAA0FxC,IAAMI,GAAN,CAAYoC,GAAxG,EAAgHb,MAA3H,CACArR,GAAI,EAAJ,EAAW,CAAE4P,IAAME,GAAN,CAAYiC,GAAZ,CAAkBpC,IAAMI,GAAN,CAAYgC,GAA9B,CAAoCnC,IAAMC,GAAN,CAAYmC,GAAhD,CAAsDtC,IAAMK,GAAN,CAAYiC,GAAlE,CAAwErC,IAAME,GAAN,CAAYoC,GAApF,CAA0FvC,IAAMI,GAAN,CAAYmC,GAAxG,EAAgHZ,MAA3H,CAEArR,GAAI,EAAJ,EAAWuW,IAAMlF,MAAjB,CACArR,GAAI,EAAJ,EAAW,CAAE4P,IAAMiC,GAAN,CAAY7B,GAAZ,CAAkB4B,IAAM7B,GAAN,CAAYC,GAA9B,CAAoC4B,IAAM/B,GAAN,CAAYK,GAAhD,CAAsDR,IAAMmC,GAAN,CAAY3B,GAAlE,CAAwEN,IAAMC,GAAN,CAAYiC,GAApF,CAA0FpC,IAAMK,GAAN,CAAY+B,GAAxG,EAAgHT,MAA3H,CACArR,GAAI,EAAJ,EAAW,CAAE4R,IAAM9B,GAAN,CAAYE,GAAZ,CAAkBL,IAAMkC,GAAN,CAAY7B,GAA9B,CAAoC4B,IAAM/B,GAAN,CAAYI,GAAhD,CAAsDP,IAAMmC,GAAN,CAAY5B,GAAlE,CAAwEN,IAAME,GAAN,CAAYiC,GAApF,CAA0FpC,IAAMI,GAAN,CAAYgC,GAAxG,EAAgHT,MAA3H,CACArR,GAAI,EAAJ,EAAW,CAAE2P,IAAMI,GAAN,CAAYC,GAAZ,CAAkBJ,IAAME,GAAN,CAAYE,GAA9B,CAAoCJ,IAAMC,GAAN,CAAYI,GAAhD,CAAsDP,IAAMK,GAAN,CAAYE,GAAlE,CAAwEN,IAAME,GAAN,CAAYK,GAApF,CAA0FR,IAAMI,GAAN,CAAYI,GAAxG,EAAgHmB,MAA3H,CAEA,WAAA,CAEA,CApnBwB,CAsnBzBmF,MAAO,eAAWlV,CAAX,CAAe,CAErB,OAAS,KAAKxB,QAAd,CACA,MAAQwB,EAAEhR,CAAV,CAAa6N,EAAImD,EAAEnD,CAAnB,CAAsBC,EAAIkD,EAAElD,CAA5B,CAEA4B,GAAI,CAAJ,GAAW1P,CAAX,CAAc0P,GAAI,CAAJ,GAAW7B,CAAX,CAAc6B,GAAI,CAAJ,GAAW5B,CAAX,CAC5B4B,GAAI,CAAJ,GAAW1P,CAAX,CAAc0P,GAAI,CAAJ,GAAW7B,CAAX,CAAc6B,GAAI,CAAJ,GAAW5B,CAAX,CAC5B4B,GAAI,CAAJ,GAAW1P,CAAX,CAAc0P,GAAI,CAAJ,GAAW7B,CAAX,CAAc6B,GAAI,EAAJ,GAAY5B,CAAZ,CAC5B4B,GAAI,CAAJ,GAAW1P,CAAX,CAAc0P,GAAI,CAAJ,GAAW7B,CAAX,CAAc6B,GAAI,EAAJ,GAAY5B,CAAZ,CAE5B,WAAA,CAEA,CAloBwB,CAooBzBqY,kBAAmB,4BAAY,CAE9B,OAAS,KAAK3W,QAAd,CAEA,aAAeE,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAV,CAAoBA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAA9B,CAAwCA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAjE,CACA,aAAeA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAV,CAAoBA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAA9B,CAAwCA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAjE,CACA,aAAeA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAV,CAAoBA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAA9B,CAAwCA,GAAI,EAAJ,EAAWA,GAAI,EAAJ,CAAlE,CAEA,YAAY3D,IAAL,CAAWlM,KAAKwM,GAAL,CAAU+Z,QAAV,CAAoBC,QAApB,CAA8BC,QAA9B,CAAX,CAAP,CAEA,CA9oBwB,CAgpBzBC,gBAAiB,yBAAWvmB,CAAX,CAAc6N,CAAd,CAAiBC,CAAjB,CAAqB,CAErC,KAAK1E,GAAL,CAEC,CAFD,CAEI,CAFJ,CAEO,CAFP,CAEUpJ,CAFV,CAGC,CAHD,CAGI,CAHJ,CAGO,CAHP,CAGU6N,CAHV,CAIC,CAJD,CAII,CAJJ,CAIO,CAJP,CAIUC,CAJV,CAKC,CALD,CAKI,CALJ,CAKO,CALP,CAKU,CALV,EASA,WAAA,CAEA,CA7pBwB,CA+pBzB0Y,cAAe,uBAAW5N,KAAX,CAAmB,CAEjC,MAAQ/Y,KAAK6O,GAAL,CAAUkK,KAAV,CAAR,CAA2BxO,EAAIvK,KAAK8O,GAAL,CAAUiK,KAAV,CAA/B,CAEA,KAAKxP,GAAL,CAEC,CAFD,CAEI,CAFJ,CAEQ,CAFR,CAEW,CAFX,CAGC,CAHD,CAGImE,CAHJ,CAGO,CAAEnD,CAHT,CAGY,CAHZ,CAIC,CAJD,CAIIA,CAJJ,CAIQmD,CAJR,CAIW,CAJX,CAKC,CALD,CAKI,CALJ,CAKQ,CALR,CAKW,CALX,EASA,WAAA,CAEA,CA9qBwB,CAgrBzBkZ,cAAe,uBAAW7N,KAAX,CAAmB,CAEjC,MAAQ/Y,KAAK6O,GAAL,CAAUkK,KAAV,CAAR,CAA2BxO,EAAIvK,KAAK8O,GAAL,CAAUiK,KAAV,CAA/B,CAEA,KAAKxP,GAAL,CAEEmE,CAFF,CAEK,CAFL,CAEQnD,CAFR,CAEW,CAFX,CAGE,CAHF,CAGK,CAHL,CAGQ,CAHR,CAGW,CAHX,CAIC,CAAEA,CAJH,CAIM,CAJN,CAISmD,CAJT,CAIY,CAJZ,CAKE,CALF,CAKK,CALL,CAKQ,CALR,CAKW,CALX,EASA,WAAA,CAEA,CA/rBwB,CAisBzBmZ,cAAe,uBAAW9N,KAAX,CAAmB,CAEjC,MAAQ/Y,KAAK6O,GAAL,CAAUkK,KAAV,CAAR,CAA2BxO,EAAIvK,KAAK8O,GAAL,CAAUiK,KAAV,CAA/B,CAEA,KAAKxP,GAAL,CAECmE,CAFD,CAEI,CAAEnD,CAFN,CAES,CAFT,CAEY,CAFZ,CAGCA,CAHD,CAGKmD,CAHL,CAGQ,CAHR,CAGW,CAHX,CAIC,CAJD,CAIK,CAJL,CAIQ,CAJR,CAIW,CAJX,CAKC,CALD,CAKK,CALL,CAKQ,CALR,CAKW,CALX,EASA,WAAA,CAEA,CAhtBwB,CAktBzBoZ,iBAAkB,0BAAWvX,IAAX,CAAiBC,KAAjB,CAAyB;CAI1C,MAAQxP,KAAK6O,GAAL,CAAUW,KAAV,CAAR,CACA,MAAQxP,KAAK8O,GAAL,CAAUU,KAAV,CAAR,CACA,MAAQ,EAAI9B,CAAZ,CACA,MAAQ6B,KAAKpP,CAAb,CAAgB6N,EAAIuB,KAAKvB,CAAzB,CAA4BC,EAAIsB,KAAKtB,CAArC,CACA,OAAS5D,EAAIlK,CAAb,CAAgB4mB,GAAK1c,EAAI2D,CAAzB,CAEA,KAAKzE,GAAL,CAECyd,GAAK7mB,CAAL,CAASuN,CAFV,CAEasZ,GAAKhZ,CAAL,CAASzD,EAAI0D,CAF1B,CAE6B+Y,GAAK/Y,CAAL,CAAS1D,EAAIyD,CAF1C,CAE6C,CAF7C,CAGCgZ,GAAKhZ,CAAL,CAASzD,EAAI0D,CAHd,CAGiB8Y,GAAK/Y,CAAL,CAASN,CAH1B,CAG6BqZ,GAAK9Y,CAAL,CAAS1D,EAAIpK,CAH1C,CAG6C,CAH7C,CAIC6mB,GAAK/Y,CAAL,CAAS1D,EAAIyD,CAJd,CAIiB+Y,GAAK9Y,CAAL,CAAS1D,EAAIpK,CAJ9B,CAIiCkK,EAAI4D,CAAJ,CAAQA,CAAR,CAAYP,CAJ7C,CAIgD,CAJhD,CAKC,CALD,CAKI,CALJ,CAKO,CALP,CAKU,CALV,EASC,WAAA,CAED,CAvuBwB,CAyuBzBuZ,UAAW,mBAAW9mB,CAAX,CAAc6N,CAAd,CAAiBC,CAAjB,CAAqB,CAE/B,KAAK1E,GAAL,CAECpJ,CAFD,CAEI,CAFJ,CAEO,CAFP,CAEU,CAFV,CAGC,CAHD,CAGI6N,CAHJ,CAGO,CAHP,CAGU,CAHV,CAIC,CAJD,CAII,CAJJ,CAIOC,CAJP,CAIU,CAJV,CAKC,CALD,CAKI,CALJ,CAKO,CALP,CAKU,CALV,EASA,WAAA,CAEA,CAtvBwB,CAwvBzBiZ,QAAS,iBAAWC,QAAX,CAAqB3Y,UAArB,CAAiC6X,KAAjC,CAAyC,CAEjD,KAAKxL,0BAAL,CAAiCrM,UAAjC,EACA,KAAK6X,KAAL,CAAYA,KAAZ,EACA,KAAKF,WAAL,CAAkBgB,QAAlB,EAEA,WAAA,CAEA,CAhwBwB,CAkwBzBC,UAAW,UAAY,CAEtB,UAAA,CAAY5P,MAAZ,CAEA,gBAAkB2P,QAAX,CAAqB3Y,UAArB,CAAiC6X,KAAjC,CAAyC,CAE/C,GAAK7N,SAAWzY,SAAhB,CAA4B,CAE3ByY,OAAS,UAAU7H,OAAV,EAAT,CACA6G,OAAS,UAAUC,OAAV,EAAT,CAEA,CAED,OAAS,KAAK9H,QAAd,CAEA,OAAS6I,OAAOjP,GAAP,CAAYsG,GAAI,CAAJ,CAAZ,CAAqBA,GAAI,CAAJ,CAArB,CAA8BA,GAAI,CAAJ,CAA9B,EAAwC7O,MAAxC,EAAT,CACA,OAASwX,OAAOjP,GAAP,CAAYsG,GAAI,CAAJ,CAAZ,CAAqBA,GAAI,CAAJ,CAArB,CAA8BA,GAAI,CAAJ,CAA9B,EAAwC7O,MAAxC,EAAT,CACA,OAASwX,OAAOjP,GAAP,CAAYsG,GAAI,CAAJ,CAAZ,CAAqBA,GAAI,CAAJ,CAArB,CAA8BA,GAAI,EAAJ,CAA9B,EAAyC7O,MAAzC,EAAT;CAGA,QAAU,KAAK2f,WAAL,EAAV,CACA,GAAKK,IAAM,CAAX,CAAe,CAEdxH,GAAK,CAAEA,EAAP,CAEA,CAED2N,SAAShnB,CAAT,CAAa0P,GAAI,EAAJ,CAAb,CACAsX,SAASnZ,CAAT,CAAa6B,GAAI,EAAJ,CAAb,CACAsX,SAASlZ,CAAT,CAAa4B,GAAI,EAAJ,CAAb;CAIA2H,OAAO7H,QAAP,CAAgBpG,GAAhB,CAAqB,KAAKoG,QAA1B;CAEA,UAAY,EAAI6J,EAAhB,CACA,UAAY,EAAIC,EAAhB,CACA,UAAY,EAAIC,EAAhB,CAEAlC,OAAO7H,QAAP,CAAiB,CAAjB,GAAwB0X,KAAxB,CACA7P,OAAO7H,QAAP,CAAiB,CAAjB,GAAwB0X,KAAxB,CACA7P,OAAO7H,QAAP,CAAiB,CAAjB,GAAwB0X,KAAxB,CAEA7P,OAAO7H,QAAP,CAAiB,CAAjB,GAAwB2X,KAAxB,CACA9P,OAAO7H,QAAP,CAAiB,CAAjB,GAAwB2X,KAAxB,CACA9P,OAAO7H,QAAP,CAAiB,CAAjB,GAAwB2X,KAAxB,CAEA9P,OAAO7H,QAAP,CAAiB,CAAjB,GAAwB4X,KAAxB,CACA/P,OAAO7H,QAAP,CAAiB,CAAjB,GAAwB4X,KAAxB,CACA/P,OAAO7H,QAAP,CAAiB,EAAjB,GAAyB4X,KAAzB,CAEA/Y,WAAWkB,qBAAX,CAAkC8H,MAAlC,EAEA6O,MAAMlmB,CAAN,CAAUqZ,EAAV,CACA6M,MAAMrY,CAAN,CAAUyL,EAAV,CACA4M,MAAMpY,CAAN,CAAUyL,EAAV,CAEA,WAAA,CAEA,CAvDD,CAyDA,CA7DU,EAlwBc,CAi0BzB8N,YAAa,qBAAWC,IAAX,CAAiBC,KAAjB,CAAwBC,MAAxB,CAAgCC,GAAhC,CAAqCC,IAArC,CAA2CC,GAA3C,CAAiD,CAE7D,OAAS,KAAKnY,QAAd,CACA,MAAQ,EAAIkY,IAAJ,EAAaH,MAAQD,IAArB,CAAR,CACA,MAAQ,EAAII,IAAJ,EAAaD,IAAMD,MAAnB,CAAR,CAEA,MAAQ,CAAED,MAAQD,IAAV,GAAqBC,MAAQD,IAA7B,CAAR,CACA,MAAQ,CAAEG,IAAMD,MAAR,GAAqBC,IAAMD,MAA3B,CAAR,CACA,MAAQ,EAAIG,IAAMD,IAAV,GAAqBC,IAAMD,IAA3B,CAAR,CACA,MAAQ,CAAE,CAAF,CAAMC,GAAN,CAAYD,IAAZ,EAAqBC,IAAMD,IAA3B,CAAR,CAEAhY,GAAI,CAAJ,EAAU1P,CAAV,CAAa0P,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU0B,CAAV,CAAa1B,GAAI,EAAJ,EAAW,CAAX,CACvCA,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU7B,CAAV,CAAa6B,GAAI,CAAJ,EAAUvG,CAAV,CAAauG,GAAI,EAAJ,EAAW,CAAX,CACvCA,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,EAAJ,EAAWnC,CAAX,CAAcmC,GAAI,EAAJ,EAAWgH,CAAX,CACxChH,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,EAAJ,EAAW,CAAE,CAAb,CAAgBA,GAAI,EAAJ,EAAW,CAAX,CAE1C,WAAA,CAEA,CAn1BwB,CAq1BzBkY,gBAAiB,yBAAWC,GAAX,CAAgBC,MAAhB,CAAwBJ,IAAxB,CAA8BC,GAA9B,CAAoC,CAEpD,SAAWD,KAAO7nB,KAAKkoB,GAAL,CAAUtoB,MAAMI,IAAN,CAAWmoB,OAAX,CAAqBH,GAArB,CAA2B,GAArC,CAAlB,CACA,SAAW,CAAEI,IAAb,CACA,SAAWC,KAAOJ,MAAlB,CACA,SAAWG,KAAOH,MAAlB,CAEA,YAAYT,WAAL,CAAkBc,IAAlB,CAAwBC,IAAxB,CAA8BF,IAA9B,CAAoCD,IAApC,CAA0CP,IAA1C,CAAgDC,GAAhD,CAAP,CAEA,CA91BwB,CAg2BzBU,iBAAkB,0BAAWf,IAAX,CAAiBC,KAAjB,CAAwBE,GAAxB,CAA6BD,MAA7B,CAAqCE,IAArC,CAA2CC,GAA3C,CAAiD,CAElE,OAAS,KAAKnY,QAAd,CACA,MAAQ,KAAQ+X,MAAQD,IAAhB,CAAR,CACA,MAAQ,KAAQG,IAAMD,MAAd,CAAR,CACA,MAAQ,KAAQG,IAAMD,IAAd,CAAR,CAEA,MAAQ,CAAEH,MAAQD,IAAV,EAAmBvZ,CAA3B,CACA,MAAQ,CAAE0Z,IAAMD,MAAR,EAAmBrd,CAA3B,CACA,MAAQ,CAAEwd,IAAMD,IAAR,EAAiB1d,CAAzB,CAEA0F,GAAI,CAAJ,EAAU,EAAI3B,CAAd,CAAiB2B,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,EAAJ,EAAW,CAAE1P,CAAb,CAC3C0P,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU,EAAIvF,CAAd,CAAiBuF,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,EAAJ,EAAW,CAAE7B,CAAb,CAC3C6B,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,EAAJ,EAAW,CAAE,CAAF,CAAM1F,CAAjB,CAAoB0F,GAAI,EAAJ,EAAW,CAAE5B,CAAb,CAC9C4B,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,EAAJ,EAAW,CAAX,CAAcA,GAAI,EAAJ,EAAW,CAAX,CAExC,WAAA,CAEA,CAl3BwB,CAo3BzBpC,OAAQ,gBAAW+J,MAAX,CAAoB,CAE3B,OAAS,KAAK7H,QAAd,CACA,OAAS6H,OAAO7H,QAAhB,CAEA,IAAM,MAAQ,CAAd,CAAiB8M,EAAI,EAArB,CAAyBA,GAAzB,CAAgC,CAE/B,GAAK5M,GAAI4M,CAAJ,IAAYwD,GAAIxD,CAAJ,CAAjB,CAA2B,YAAA,CAE3B,CAED,WAAA,CAEA,CAj4BwB,CAm4BzB9O,UAAW,mBAAWC,KAAX,CAAmB,CAE7B,KAAK+B,QAAL,CAAcpG,GAAd,CAAmBqE,KAAnB,EAEA,WAAA,CAEA,CAz4BwB,CA24BzBE,QAAS,iBAAWF,KAAX,CAAkBC,MAAlB,CAA2B,CAEnC,GAAKD,QAAU7N,SAAf,CAA2B6N,MAAQ,EAAR,CAC3B,GAAKC,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5B,OAAS,KAAK8B,QAAd,CAEA/B,MAAOC,MAAP,EAAkBgC,GAAI,CAAJ,CAAlB,CACAjC,MAAOC,OAAS,CAAhB,EAAsBgC,GAAI,CAAJ,CAAtB,CACAjC,MAAOC,OAAS,CAAhB,EAAsBgC,GAAI,CAAJ,CAAtB,CACAjC,MAAOC,OAAS,CAAhB,EAAsBgC,GAAI,CAAJ,CAAtB,CAEAjC,MAAOC,OAAS,CAAhB,EAAsBgC,GAAI,CAAJ,CAAtB,CACAjC,MAAOC,OAAS,CAAhB,EAAsBgC,GAAI,CAAJ,CAAtB,CACAjC,MAAOC,OAAS,CAAhB,EAAsBgC,GAAI,CAAJ,CAAtB,CACAjC,MAAOC,OAAS,CAAhB,EAAsBgC,GAAI,CAAJ,CAAtB,CAEAjC,MAAOC,OAAS,CAAhB,EAAuBgC,GAAI,CAAJ,CAAvB,CACAjC,MAAOC,OAAS,CAAhB,EAAuBgC,GAAI,CAAJ,CAAvB,CACAjC,MAAOC,OAAS,EAAhB,EAAuBgC,GAAI,EAAJ,CAAvB,CACAjC,MAAOC,OAAS,EAAhB,EAAuBgC,GAAI,EAAJ,CAAvB,CAEAjC,MAAOC,OAAS,EAAhB,EAAuBgC,GAAI,EAAJ,CAAvB,CACAjC,MAAOC,OAAS,EAAhB,EAAuBgC,GAAI,EAAJ,CAAvB,CACAjC,MAAOC,OAAS,EAAhB,EAAuBgC,GAAI,EAAJ,CAAvB,CACAjC,MAAOC,OAAS,EAAhB,EAAuBgC,GAAI,EAAJ,CAAvB,CAEA,YAAA,CAEA,CAx6BwB,CAA1B;;;IAk7BAjQ,MAAM6oB,GAAN,CAAY,SAAWC,MAAX,CAAmBC,SAAnB,CAA+B,CAE1C,KAAKD,MAAL,CAAgBA,SAAW3oB,SAAb,CAA2B2oB,MAA3B,CAAoC,UAAU/X,OAAV,EAAlD,CACA,KAAKgY,SAAL,CAAmBA,YAAc5oB,SAAhB,CAA8B4oB,SAA9B,CAA0C,UAAUhY,OAAV,EAA3D,CAEA,CALD,CAOA/Q,MAAM6oB,GAAN,CAAUpoB,SAAV,CAAsB,CAErBoJ,YAAa7J,MAAM6oB,GAFE,CAIrBlf,IAAK,aAAWmf,MAAX,CAAmBC,SAAnB,CAA+B,CAEnC,KAAKD,MAAL,CAAY/e,IAAZ,CAAkB+e,MAAlB,EACA,KAAKC,SAAL,CAAehf,IAAf,CAAqBgf,SAArB,EAEA,WAAA,CAEA,CAXoB,CAarBhd,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CAjBoB,CAmBrBA,KAAM,cAAWif,GAAX,CAAiB,CAEtB,KAAKF,MAAL,CAAY/e,IAAZ,CAAkBif,IAAIF,MAAtB,EACA,KAAKC,SAAL,CAAehf,IAAf,CAAqBif,IAAID,SAAzB,EAEA,WAAA,CAEA,CA1BoB,CA4BrBlN,GAAI,YAAWpR,CAAX,CAAckC,cAAd,CAA+B,CAElC,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CAEA,cAAchH,IAAP,CAAa,KAAKgf,SAAlB,EAA8Brb,cAA9B,CAA8CjD,CAA9C,EAAkD2C,GAAlD,CAAuD,KAAK0b,MAA5D,CAAP,CAEA,CAlCoB,CAoCrB7E,OAAQ,gBAAW1S,CAAX,CAAe,CAEtB,KAAKwX,SAAL,CAAehf,IAAf,CAAqBwH,CAArB,EAAyBoD,GAAzB,CAA8B,KAAKmU,MAAnC,EAA4C1X,SAA5C,GAEA,WAAA,CAEA,CA1CoB,CA4CrB6X,OAAQ,UAAY,CAEnB,OAAS,UAAUlY,OAAV,EAAT,CAEA,gBAAkBtG,CAAX,CAAe,CAErB,KAAKqe,MAAL,CAAY/e,IAAZ,CAAkB,KAAK8R,EAAL,CAASpR,CAAT,CAAYqG,EAAZ,CAAlB,EAEA,WAAA,CAEA,CAND,CAQA,CAZO,EA5Ca,CA0DrBwL,oBAAqB,6BAAWN,KAAX,CAAkBrP,cAAlB,CAAmC,CAEvD,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CACA+K,OAAOlH,UAAP,CAAmBoH,KAAnB,CAA0B,KAAK8M,MAA/B,EACA,sBAAwBhN,OAAO9K,GAAP,CAAY,KAAK+X,SAAjB,CAAxB,CAEA,GAAKG,kBAAoB,CAAzB,CAA6B,CAE5B,cAAcnf,IAAP,CAAa,KAAK+e,MAAlB,CAAP,CAEA,CAED,cAAc/e,IAAP,CAAa,KAAKgf,SAAlB,EAA8Brb,cAA9B,CAA8Cwb,iBAA9C,EAAkE9b,GAAlE,CAAuE,KAAK0b,MAA5E,CAAP,CAEA,CAxEoB,CA0ErBpL,gBAAiB,yBAAW1B,KAAX,CAAmB,CAEnC,YAAY1P,IAAL,CAAW,KAAK6c,iBAAL,CAAwBnN,KAAxB,CAAX,CAAP,CAEA,CA9EoB,CAgFrBmN,kBAAmB,UAAY,CAE9B,OAAS,UAAUpY,OAAV,EAAT,CAEA,gBAAkBiL,KAAX,CAAmB,CAEzB,sBAAwBlL,GAAG8D,UAAH,CAAeoH,KAAf,CAAsB,KAAK8M,MAA3B,EAAoC9X,GAApC,CAAyC,KAAK+X,SAA9C,CAAxB;CAIA,GAAKG,kBAAoB,CAAzB,CAA6B,CAE5B,YAAYJ,MAAL,CAAYlT,iBAAZ,CAA+BoG,KAA/B,CAAP,CAEA,CAEDlL,GAAG/G,IAAH,CAAS,KAAKgf,SAAd,EAA0Brb,cAA1B,CAA0Cwb,iBAA1C,EAA8D9b,GAA9D,CAAmE,KAAK0b,MAAxE,EAEA,UAAUlT,iBAAH,CAAsBoG,KAAtB,CAAP,CAEA,CAhBD,CAkBA,CAtBkB,EAhFE,CAwGrBoN,oBAAqB,UAAY,CAEhC,cAAgB,UAAUrY,OAAV,EAAhB,CACA,WAAa,UAAUA,OAAV,EAAb,CACA,SAAW,UAAUA,OAAV,EAAX,CAEA,gBAAkBsY,EAAX,CAAevY,EAAf,CAAmBwY,kBAAnB,CAAuCC,sBAAvC,CAAgE;;;;;;CAStEC,UAAUzf,IAAV,CAAgBsf,EAAhB,EAAqBjc,GAArB,CAA0B0D,EAA1B,EAA+BpD,cAA/B,CAA+C,GAA/C,EACA+b,OAAO1f,IAAP,CAAa+G,EAAb,EAAkB6D,GAAlB,CAAuB0U,EAAvB,EAA4BjY,SAA5B,GACAsY,KAAK3f,IAAL,CAAW,KAAK+e,MAAhB,EAAyBnU,GAAzB,CAA8B6U,SAA9B,EAEA,cAAgBH,GAAG1T,UAAH,CAAe7E,EAAf,EAAsB,GAAtC,CACA,QAAU,CAAE,KAAKiY,SAAL,CAAe/X,GAAf,CAAoByY,MAApB,CAAZ,CACA,OAASC,KAAK1Y,GAAL,CAAU,KAAK+X,SAAf,CAAT,CACA,OAAS,CAAEW,KAAK1Y,GAAL,CAAUyY,MAAV,CAAX,CACA,MAAQC,KAAKlY,QAAL,EAAR,CACA,QAAUpR,KAAK8Q,GAAL,CAAU,EAAIyY,IAAMA,GAApB,CAAV,CACA,MAAA,CAAQva,EAAR,CAAYwa,OAAZ,CAAqBC,MAArB,CAEA,GAAKzI,IAAM,CAAX,CAAe;CAId0I,GAAKH,IAAMI,EAAN,CAAWC,EAAhB,CACA5a,GAAKua,IAAMK,EAAN,CAAWD,EAAhB,CACAF,OAASI,UAAY7I,GAArB,CAEA,GAAK0I,IAAM,CAAX,CAAe,CAEd,GAAK1a,IAAM,CAAEya,MAAb,CAAsB,CAErB,GAAKza,IAAMya,MAAX,CAAoB;;CAKnB,WAAa,EAAIzI,GAAjB,CACA0I,IAAMI,MAAN,CACA9a,IAAM8a,MAAN,CACAN,QAAUE,IAAOA,GAAKH,IAAMva,EAAX,CAAgB,EAAI4a,EAA3B,EAAkC5a,IAAOua,IAAMG,EAAN,CAAW1a,EAAX,CAAgB,EAAI2a,EAA3B,CAAlC,CAAoEjc,CAA9E,CAEA,CAVD,IAUO;CAINsB,GAAK6a,SAAL,CACAH,GAAK1pB,KAAKwM,GAAL,CAAU,CAAV,CAAa,EAAI+c,IAAMva,EAAN,CAAW4a,EAAf,CAAb,CAAL,CACAJ,QAAU,CAAEE,EAAF,CAAOA,EAAP,CAAY1a,IAAOA,GAAK,EAAI2a,EAAhB,CAAZ,CAAmCjc,CAA7C,CAEA,CAED,CAtBD,IAsBO;CAINsB,GAAK,CAAE6a,SAAP,CACAH,GAAK1pB,KAAKwM,GAAL,CAAU,CAAV,CAAa,EAAI+c,IAAMva,EAAN,CAAW4a,EAAf,CAAb,CAAL,CACAJ,QAAU,CAAEE,EAAF,CAAOA,EAAP,CAAY1a,IAAOA,GAAK,EAAI2a,EAAhB,CAAZ,CAAmCjc,CAA7C,CAEA,CAED,CAlCD,IAkCO,CAEN,GAAKsB,IAAM,CAAEya,MAAb,CAAsB;CAIrBC,GAAK1pB,KAAKwM,GAAL,CAAU,CAAV,CAAa,EAAI,CAAE+c,GAAF,CAAQM,SAAR,CAAoBD,EAAxB,CAAb,CAAL,CACA5a,GAAO0a,GAAK,CAAP,CAAa,CAAEG,SAAf,CAA2B7pB,KAAKqL,GAAL,CAAUrL,KAAKwM,GAAL,CAAU,CAAEqd,SAAZ,CAAuB,CAAEF,EAAzB,CAAV,CAAyCE,SAAzC,CAAhC,CACAL,QAAU,CAAEE,EAAF,CAAOA,EAAP,CAAY1a,IAAOA,GAAK,EAAI2a,EAAhB,CAAZ,CAAmCjc,CAA7C,CAEA,CARD,QAQYsB,IAAMya,MAAX,CAAoB;CAI1BC,GAAK,CAAL,CACA1a,GAAKhP,KAAKqL,GAAL,CAAUrL,KAAKwM,GAAL,CAAU,CAAEqd,SAAZ,CAAuB,CAAEF,EAAzB,CAAV,CAAyCE,SAAzC,CAAL,CACAL,QAAUxa,IAAOA,GAAK,EAAI2a,EAAhB,EAAuBjc,CAAjC,CAEA,CARM,IAQA;CAINgc,GAAK1pB,KAAKwM,GAAL,CAAU,CAAV,CAAa,EAAI+c,IAAMM,SAAN,CAAkBD,EAAtB,CAAb,CAAL,CACA5a,GAAO0a,GAAK,CAAP,CAAaG,SAAb,CAAyB7pB,KAAKqL,GAAL,CAAUrL,KAAKwM,GAAL,CAAU,CAAEqd,SAAZ,CAAuB,CAAEF,EAAzB,CAAV,CAAyCE,SAAzC,CAA9B,CACAL,QAAU,CAAEE,EAAF,CAAOA,EAAP,CAAY1a,IAAOA,GAAK,EAAI2a,EAAhB,CAAZ,CAAmCjc,CAA7C,CAEA,CAED,CAED,CAxED,IAwEO;CAINsB,GAAOua,IAAM,CAAR,CAAc,CAAEM,SAAhB,CAA4BA,SAAjC,CACAH,GAAK1pB,KAAKwM,GAAL,CAAU,CAAV,CAAa,EAAI+c,IAAMva,EAAN,CAAW4a,EAAf,CAAb,CAAL,CACAJ,QAAU,CAAEE,EAAF,CAAOA,EAAP,CAAY1a,IAAOA,GAAK,EAAI2a,EAAhB,CAAZ,CAAmCjc,CAA7C,CAEA,CAED,GAAKwb,kBAAL,CAA0B,CAEzBA,mBAAmBvf,IAAnB,CAAyB,KAAKgf,SAA9B,EAA0Crb,cAA1C,CAA0Doc,EAA1D,EAA+D1c,GAA/D,CAAoE,KAAK0b,MAAzE,EAEA,CAED,GAAKS,sBAAL,CAA8B,CAE7BA,uBAAuBxf,IAAvB,CAA6B0f,MAA7B,EAAsC/b,cAAtC,CAAsD0B,EAAtD,EAA2DhC,GAA3D,CAAgEoc,SAAhE,EAEA,CAED,cAAA,CAEA,CArHD,CAuHA,CA7HoB,EAxGA,CAuOrBW,gBAAiB,UAAY,CAE5B,OAAS,UAAUpZ,OAAV,EAAT,CAEA,gBAAkBoO,MAAX,CAAmBxS,cAAnB,CAAoC,CAE1CmE,GAAG8D,UAAH,CAAeuK,OAAO7I,MAAtB,CAA8B,KAAKwS,MAAnC,EACA,QAAUhY,GAAGE,GAAH,CAAQ,KAAK+X,SAAb,CAAV,CACA,OAASjY,GAAGE,GAAH,CAAQF,EAAR,EAAesZ,IAAMA,GAA9B,CACA,YAAcjL,OAAO5F,MAAP,CAAgB4F,OAAO5F,MAArC,CAEA,GAAK8Q,GAAKC,OAAV,CAAoB,WAAA,CAEpB,QAAUlqB,KAAKkM,IAAL,CAAWge,QAAUD,EAArB,CAAV;CAGA,OAASD,IAAMG,GAAf;CAGA,OAASH,IAAMG,GAAf;CAGA,GAAKC,GAAK,CAAL,EAAUC,GAAK,CAApB,CAAwB,WAAA;;;CAKxB,GAAKD,GAAK,CAAV,CAAc,YAAY3O,EAAL,CAAS4O,EAAT,CAAa9d,cAAb,CAAP;CAGd,YAAYkP,EAAL,CAAS2O,EAAT,CAAa7d,cAAb,CAAP,CAEA,CA5BD,CA8BA,CAlCgB,EAvOI,CA2QrBuS,iBAAkB,0BAAWC,MAAX,CAAoB,CAErC,YAAYzB,eAAL,CAAsByB,OAAO7I,MAA7B,GAAyC6I,OAAO5F,MAAvD,CAEA,CA/QoB,CAiRrBmR,gBAAiB,yBAAWpL,KAAX,CAAmB,CAEnC,gBAAkBA,MAAMtG,MAAN,CAAahI,GAAb,CAAkB,KAAK+X,SAAvB,CAAlB,CAEA,GAAK4B,cAAgB,CAArB,CAAyB;CAGxB,GAAKrL,MAAM5B,eAAN,CAAuB,KAAKoL,MAA5B,IAAyC,CAA9C,CAAkD,CAEjD,QAAA,CAEA;CAID,WAAA,CAEA,CAED,MAAQ,EAAI,KAAKA,MAAL,CAAY9X,GAAZ,CAAiBsO,MAAMtG,MAAvB,EAAkCsG,MAAMC,QAA5C,EAAyDoL,WAAjE;CAIA,UAAY,CAAL,CAASlgB,CAAT,CAAc,IAArB,CAEA,CA1SoB,CA4SrBmgB,eAAgB,wBAAWtL,KAAX,CAAkB3S,cAAlB,CAAmC,CAElD,MAAQ,KAAK+d,eAAL,CAAsBpL,KAAtB,CAAR,CAEA,GAAK7U,IAAM,IAAX,CAAkB,CAEjB,WAAA,CAEA,CAED,YAAYoR,EAAL,CAASpR,CAAT,CAAYkC,cAAZ,CAAP,CAEA,CAxToB,CA4TrB0S,gBAAiB,yBAAWC,KAAX,CAAmB;CAInC,gBAAkBA,MAAM5B,eAAN,CAAuB,KAAKoL,MAA5B,CAAlB,CAEA,GAAK+B,cAAgB,CAArB,CAAyB,CAExB,WAAA,CAEA,CAED,gBAAkBvL,MAAMtG,MAAN,CAAahI,GAAb,CAAkB,KAAK+X,SAAvB,CAAlB,CAEA,GAAK4B,YAAcE,WAAd,CAA4B,CAAjC,CAAqC,CAEpC,WAAA,CAEA;CAID,YAAA,CAEA,CApVoB,CAsVrBC,aAAc,sBAAW7N,GAAX,CAAgBtQ,cAAhB,CAAiC,CAE9C,QAAA,CAAUoe,IAAV,CAAgBC,KAAhB,CAAuBC,KAAvB,CAA8BC,KAA9B,CAAqCC,KAArC,CAEA,YAAc,EAAI,KAAKpC,SAAL,CAAexoB,CAAjC,CACC6qB,QAAU,EAAI,KAAKrC,SAAL,CAAe3a,CAD9B,CAECid,QAAU,EAAI,KAAKtC,SAAL,CAAe1a,CAF9B,CAIA,WAAa,KAAKya,MAAlB,CAEA,GAAKwC,SAAW,CAAhB,CAAoB,CAEnBC,KAAO,CAAEtO,IAAIxR,GAAJ,CAAQlL,CAAR,CAAYuoB,OAAOvoB,CAArB,EAA2B+qB,OAAlC,CACAP,KAAO,CAAE9N,IAAIrQ,GAAJ,CAAQrM,CAAR,CAAYuoB,OAAOvoB,CAArB,EAA2B+qB,OAAlC,CAEA,CALD,IAKO,CAENC,KAAO,CAAEtO,IAAIrQ,GAAJ,CAAQrM,CAAR,CAAYuoB,OAAOvoB,CAArB,EAA2B+qB,OAAlC,CACAP,KAAO,CAAE9N,IAAIxR,GAAJ,CAAQlL,CAAR,CAAYuoB,OAAOvoB,CAArB,EAA2B+qB,OAAlC,CAEA,CAED,GAAKF,SAAW,CAAhB,CAAoB,CAEnBJ,MAAQ,CAAE/N,IAAIxR,GAAJ,CAAQ2C,CAAR,CAAY0a,OAAO1a,CAArB,EAA2Bgd,OAAnC,CACAH,MAAQ,CAAEhO,IAAIrQ,GAAJ,CAAQwB,CAAR,CAAY0a,OAAO1a,CAArB,EAA2Bgd,OAAnC,CAEA,CALD,IAKO,CAENJ,MAAQ,CAAE/N,IAAIrQ,GAAJ,CAAQwB,CAAR,CAAY0a,OAAO1a,CAArB,EAA2Bgd,OAAnC,CACAH,MAAQ,CAAEhO,IAAIxR,GAAJ,CAAQ2C,CAAR,CAAY0a,OAAO1a,CAArB,EAA2Bgd,OAAnC,CAEA,CAED,GAAOG,KAAON,KAAT,EAAsBD,MAAQD,IAAnC,CAA4C,WAAA;;CAK5C,GAAKC,MAAQO,IAAR,EAAgBA,OAASA,IAA9B,CAAqCA,KAAOP,KAAP,CAErC,GAAKC,MAAQF,IAAR,EAAgBA,OAASA,IAA9B,CAAqCA,KAAOE,KAAP,CAErC,GAAKI,SAAW,CAAhB,CAAoB,CAEnBH,MAAQ,CAAEjO,IAAIxR,GAAJ,CAAQ4C,CAAR,CAAYya,OAAOza,CAArB,EAA2Bgd,OAAnC,CACAF,MAAQ,CAAElO,IAAIrQ,GAAJ,CAAQyB,CAAR,CAAYya,OAAOza,CAArB,EAA2Bgd,OAAnC,CAEA,CALD,IAKO,CAENH,MAAQ,CAAEjO,IAAIrQ,GAAJ,CAAQyB,CAAR,CAAYya,OAAOza,CAArB,EAA2Bgd,OAAnC,CACAF,MAAQ,CAAElO,IAAIxR,GAAJ,CAAQ4C,CAAR,CAAYya,OAAOza,CAArB,EAA2Bgd,OAAnC,CAEA,CAED,GAAOE,KAAOJ,KAAT,EAAsBD,MAAQH,IAAnC,CAA4C,WAAA,CAE5C,GAAKG,MAAQK,IAAR,EAAgBA,OAASA,IAA9B,CAAqCA,KAAOL,KAAP,CAErC,GAAKC,MAAQJ,IAAR,EAAgBA,OAASA,IAA9B,CAAqCA,KAAOI,KAAP;CAIrC,GAAKJ,KAAO,CAAZ,CAAgB,WAAA,CAEhB,YAAYlP,EAAL,CAAS0P,MAAQ,CAAR,CAAYA,IAAZ,CAAmBR,IAA5B,CAAkCpe,cAAlC,CAAP,CAEA,CAzZoB,CA2ZrB6Q,cAAiB,UAAY,CAE5B,MAAQ,UAAUzM,OAAV,EAAR,CAEA,gBAAkBkM,GAAX,CAAiB,CAEvB,YAAY6N,YAAL,CAAmB7N,GAAnB,CAAwB1L,CAAxB,IAAgC,IAAvC,CAEA,CAJD,CAMA,CAVc,EA3ZM,CAuarBia,kBAAmB,UAAY;CAG9B,SAAW,UAAUza,OAAV,EAAX,CACA,UAAY,UAAUA,OAAV,EAAZ,CACA,UAAY,UAAUA,OAAV,EAAZ,CACA,WAAa,UAAUA,OAAV,EAAb,CAEA,gBAAkBY,CAAX,CAAcjI,CAAd,CAAiBoE,CAAjB,CAAoB2d,eAApB,CAAqC9e,cAArC,CAAsD;CAI5D+e,MAAM9W,UAAN,CAAkBlL,CAAlB,CAAqBiI,CAArB,EACAga,MAAM/W,UAAN,CAAkB9G,CAAlB,CAAqB6D,CAArB,EACAqH,OAAO7H,YAAP,CAAqBua,KAArB,CAA4BC,KAA5B;;;;;CAOA,QAAU,KAAK5C,SAAL,CAAe/X,GAAf,CAAoBgI,MAApB,CAAV,CACA,QAAA,CAEA,GAAK4S,IAAM,CAAX,CAAe,CAEd,GAAKH,eAAL,CAAuB,WAAA,CACvBnrB,KAAO,CAAP,CAEA,CALD,QAKYsrB,IAAM,CAAX,CAAe,CAErBtrB,KAAO,CAAE,CAAT,CACAsrB,IAAM,CAAEA,GAAR,CAEA,CALM,IAKA,CAEN,WAAA,CAEA,CAEDlC,KAAK9U,UAAL,CAAiB,KAAKkU,MAAtB,CAA8BnX,CAA9B,EACA,WAAarR,KAAO,KAAKyoB,SAAL,CAAe/X,GAAf,CAAoB2a,MAAMxa,YAAN,CAAoBuY,IAApB,CAA0BiC,KAA1B,CAApB,CAApB;CAGA,GAAKE,OAAS,CAAd,CAAkB,CAEjB,WAAA,CAEA,CAED,WAAavrB,KAAO,KAAKyoB,SAAL,CAAe/X,GAAf,CAAoB0a,MAAMtT,KAAN,CAAasR,IAAb,CAApB,CAApB;CAGA,GAAKoC,OAAS,CAAd,CAAkB,CAEjB,WAAA,CAEA;CAGD,GAAKD,OAASC,MAAT,CAAkBF,GAAvB,CAA6B,CAE5B,WAAA,CAEA;CAGD,QAAU,CAAEtrB,IAAF,CAASopB,KAAK1Y,GAAL,CAAUgI,MAAV,CAAnB;CAGA,GAAK+S,IAAM,CAAX,CAAe,CAEd,WAAA,CAEA;CAGD,YAAYlQ,EAAL,CAASkQ,IAAMH,GAAf,CAAoBjf,cAApB,CAAP,CAEA,CAvED,CAyEA,CAjFkB,EAvaE,CA0frBoK,aAAc,sBAAW4K,OAAX,CAAqB,CAElC,KAAKoH,SAAL,CAAe3b,GAAf,CAAoB,KAAK0b,MAAzB,EAAkC/R,YAAlC,CAAgD4K,OAAhD,EACA,KAAKmH,MAAL,CAAY/R,YAAZ,CAA0B4K,OAA1B,EACA,KAAKoH,SAAL,CAAepU,GAAf,CAAoB,KAAKmU,MAAzB,EACA,KAAKC,SAAL,CAAe3X,SAAf,GAEA,WAAA,CAEA,CAngBoB,CAqgBrBvD,OAAQ,gBAAWmb,GAAX,CAAiB,CAExB,WAAWF,MAAJ,CAAWjb,MAAX,CAAmB,KAAKib,MAAxB,GAAoCE,IAAID,SAAJ,CAAclb,MAAd,CAAsB,KAAKkb,SAA3B,CAA3C,CAEA,CAzgBoB,CAAtB;;;;IAohBA/oB,MAAMyf,MAAN,CAAe,SAAWnJ,MAAX,CAAmBiD,MAAnB,CAA4B,CAE1C,KAAKjD,MAAL,CAAgBA,SAAWnW,SAAb,CAA2BmW,MAA3B,CAAoC,UAAUvF,OAAV,EAAlD,CACA,KAAKwI,MAAL,CAAgBA,SAAWpZ,SAAb,CAA2BoZ,MAA3B,CAAoC,CAAlD,CAEA,CALD,CAOAvZ,MAAMyf,MAAN,CAAahf,SAAb,CAAyB,CAExBoJ,YAAa7J,MAAMyf,MAFK,CAIxB9V,IAAK,aAAW2M,MAAX,CAAmBiD,MAAnB,CAA4B,CAEhC,KAAKjD,MAAL,CAAYvM,IAAZ,CAAkBuM,MAAlB,EACA,KAAKiD,MAAL,CAAcA,MAAd,CAEA,WAAA,CAEA,CAXuB,CAaxBkD,cAAe,UAAY,CAE1B,QAAU,UAAUqB,IAAV,EAAV,CAEA,gBAAkBpB,MAAX,CAAmBsP,cAAnB,CAAoC,CAE1C,WAAa,KAAK1V,MAAlB,CAEA,GAAK0V,iBAAmB7rB,SAAxB,CAAoC,CAEnCmW,OAAOvM,IAAP,CAAaiiB,cAAb,EAEA,CAJD,IAIO,CAEN/O,IAAIR,aAAJ,CAAmBC,MAAnB,EAA4BpG,MAA5B,CAAoCA,MAApC,EAEA,CAED,gBAAkB,CAAlB,CAEA,IAAM,MAAQ,CAAR,CAAWsG,GAAKF,OAAOtb,MAA7B,CAAqCyb,EAAID,EAAzC,CAA6CC,GAA7C,CAAoD,CAEnDoP,YAAc7rB,KAAKwM,GAAL,CAAUqf,WAAV,CAAuB3V,OAAOV,iBAAP,CAA0B8G,OAAQG,CAAR,CAA1B,CAAvB,CAAd,CAEA,CAED,KAAKtD,MAAL,CAAcnZ,KAAKkM,IAAL,CAAW2f,WAAX,CAAd,CAEA,WAAA,CAEA,CA1BD,CA4BA,CAhCc,EAbS,CA+CxBlgB,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CAnDuB,CAqDxBA,KAAM,cAAWoV,MAAX,CAAoB,CAEzB,KAAK7I,MAAL,CAAYvM,IAAZ,CAAkBoV,OAAO7I,MAAzB,EACA,KAAKiD,MAAL,CAAc4F,OAAO5F,MAArB,CAEA,WAAA,CAEA,CA5DuB,CA8DxB2S,MAAO,gBAAY,CAElB,YAAc3S,MAAL,EAAe,CAAxB,CAEA,CAlEuB,CAoExB8D,cAAe,uBAAWrB,KAAX,CAAmB,CAEjC,aAAepG,iBAAN,CAAyB,KAAKU,MAA9B,GAA4C,KAAKiD,MAAL,CAAc,KAAKA,MAAxE,CAEA,CAxEuB,CA0ExBmE,gBAAiB,yBAAW1B,KAAX,CAAmB,CAEnC,aAAerG,UAAN,CAAkB,KAAKW,MAAvB,EAAkC,KAAKiD,MAAhD,CAEA,CA9EuB,CAgFxB2F,iBAAkB,0BAAWC,MAAX,CAAoB,CAErC,cAAgB,KAAK5F,MAAL,CAAc4F,OAAO5F,MAArC,CAEA,cAAcjD,MAAP,CAAcV,iBAAd,CAAiC,KAAKU,MAAtC,GAAoD6V,UAAYA,SAAvE,CAEA,CAtFuB,CAwFxB3O,cAAe,uBAAWP,GAAX,CAAiB,CAE/B,WAAWiC,gBAAJ,CAAsB,IAAtB,CAAP,CAEA,CA5FuB,CA8FxBG,gBAAiB,yBAAWC,KAAX,CAAmB;;;;;;;CAUnC,YAAYpO,GAAL,CAAU,KAAKoF,MAAL,CAAYtF,GAAZ,CAAiBsO,MAAMtG,MAAvB,EAAkCsG,MAAMC,QAAlD,GAAgE,KAAKhG,MAA5E,CAEA,CA1GuB,CA4GxBkE,WAAY,oBAAWzB,KAAX,CAAkBrP,cAAlB,CAAmC,CAE9C,kBAAoB,KAAK2J,MAAL,CAAYV,iBAAZ,CAA+BoG,KAA/B,CAApB,CAEA,WAAarP,gBAAkB,UAAUoE,OAAV,EAA/B,CAEA+K,OAAO/R,IAAP,CAAaiS,KAAb,EAEA,GAAKoQ,cAAkB,KAAK7S,MAAL,CAAc,KAAKA,MAA1C,CAAqD,CAEpDuC,OAAOnH,GAAP,CAAY,KAAK2B,MAAjB,EAA0BlF,SAA1B,GACA0K,OAAOpO,cAAP,CAAuB,KAAK6L,MAA5B,EAAqCnM,GAArC,CAA0C,KAAKkJ,MAA/C,EAEA,CAED,aAAA,CAEA,CA7HuB,CA+HxB+V,eAAgB,wBAAW1f,cAAX,CAA4B,CAE3C,QAAUA,gBAAkB,UAAUmR,IAAV,EAA5B,CAEAb,IAAItT,GAAJ,CAAS,KAAK2M,MAAd,CAAsB,KAAKA,MAA3B,EACA2G,IAAIG,cAAJ,CAAoB,KAAK7D,MAAzB,EAEA,UAAA,CAEA,CAxIuB,CA0IxBxC,aAAc,sBAAWa,MAAX,CAAoB,CAEjC,KAAKtB,MAAL,CAAYS,YAAZ,CAA0Ba,MAA1B,EACA,KAAK2B,MAAL,CAAc,KAAKA,MAAL,CAAc3B,OAAO8O,iBAAP,EAA5B,CAEA,WAAA,CAEA,CAjJuB,CAmJxB7I,UAAW,mBAAW5P,MAAX,CAAoB,CAE9B,KAAKqI,MAAL,CAAYlJ,GAAZ,CAAiBa,MAAjB,EAEA,WAAA,CAEA,CAzJuB,CA2JxBJ,OAAQ,gBAAWsR,MAAX,CAAoB,CAE3B,cAAc7I,MAAP,CAAczI,MAAd,CAAsB,KAAKyI,MAA3B,GAAyC6I,OAAO5F,MAAP,GAAkB,KAAKA,MAAvE,CAEA,CA/JuB,CAAzB;;;;;IA2KAvZ,MAAMssB,OAAN,CAAgB,SAAWC,EAAX,CAAeC,EAAf,CAAmBC,EAAnB,CAAuBC,EAAvB,CAA2BC,EAA3B,CAA+BC,EAA/B,CAAoC,CAEnD,KAAKC,MAAL,CAAc,CAEXN,KAAOpsB,SAAT,CAAuBosB,EAAvB,CAA4B,UAAUO,KAAV,EAFf,CAGXN,KAAOrsB,SAAT,CAAuBqsB,EAAvB,CAA4B,UAAUM,KAAV,EAHf,CAIXL,KAAOtsB,SAAT,CAAuBssB,EAAvB,CAA4B,UAAUK,KAAV,EAJf,CAKXJ,KAAOvsB,SAAT,CAAuBusB,EAAvB,CAA4B,UAAUI,KAAV,EALf,CAMXH,KAAOxsB,SAAT,CAAuBwsB,EAAvB,CAA4B,UAAUG,KAAV,EANf,CAOXF,KAAOzsB,SAAT,CAAuBysB,EAAvB,CAA4B,UAAUE,KAAV,EAPf,CAAd,CAWA,CAbD,CAeA9sB,MAAMssB,OAAN,CAAc7rB,SAAd,CAA0B,CAEzBoJ,YAAa7J,MAAMssB,OAFM,CAIzB3iB,IAAK,aAAW4iB,EAAX,CAAeC,EAAf,CAAmBC,EAAnB,CAAuBC,EAAvB,CAA2BC,EAA3B,CAA+BC,EAA/B,CAAoC,CAExC,WAAa,KAAKC,MAAlB,CAEAA,OAAQ,CAAR,EAAY9iB,IAAZ,CAAkBwiB,EAAlB,EACAM,OAAQ,CAAR,EAAY9iB,IAAZ,CAAkByiB,EAAlB,EACAK,OAAQ,CAAR,EAAY9iB,IAAZ,CAAkB0iB,EAAlB,EACAI,OAAQ,CAAR,EAAY9iB,IAAZ,CAAkB2iB,EAAlB,EACAG,OAAQ,CAAR,EAAY9iB,IAAZ,CAAkB4iB,EAAlB,EACAE,OAAQ,CAAR,EAAY9iB,IAAZ,CAAkB6iB,EAAlB,EAEA,WAAA,CAEA,CAjBwB,CAmBzB7gB,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CAvBwB,CAyBzBA,KAAM,cAAWgjB,OAAX,CAAqB,CAE1B,WAAa,KAAKF,MAAlB,CAEA,IAAM,MAAQ,CAAd,CAAiBhQ,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9BgQ,OAAQhQ,CAAR,EAAY9S,IAAZ,CAAkBgjB,QAAQF,MAAR,CAAgBhQ,CAAhB,CAAlB,EAEA,CAED,WAAA,CAEA,CArCwB,CAuCzBmQ,cAAe,uBAAW3hB,CAAX,CAAe,CAE7B,WAAa,KAAKwhB,MAAlB,CACA,OAASxhB,EAAE0E,QAAX,CACA,QAAUsQ,GAAI,CAAJ,CAAV,CAAmB4M,IAAM5M,GAAI,CAAJ,CAAzB,CAAkC6M,IAAM7M,GAAI,CAAJ,CAAxC,CAAiD8M,IAAM9M,GAAI,CAAJ,CAAvD,CACA,QAAUA,GAAI,CAAJ,CAAV,CAAmB+M,IAAM/M,GAAI,CAAJ,CAAzB,CAAkCgN,IAAMhN,GAAI,CAAJ,CAAxC,CAAiDiN,IAAMjN,GAAI,CAAJ,CAAvD,CACA,QAAUA,GAAI,CAAJ,CAAV,CAAmBkN,IAAMlN,GAAI,CAAJ,CAAzB,CAAkCmN,KAAOnN,GAAI,EAAJ,CAAzC,CAAmDoN,KAAOpN,GAAI,EAAJ,CAA1D,CACA,SAAWA,GAAI,EAAJ,CAAX,CAAqBqN,KAAOrN,GAAI,EAAJ,CAA5B,CAAsCsN,KAAOtN,GAAI,EAAJ,CAA7C,CAAuDuN,KAAOvN,GAAI,EAAJ,CAA9D,CAEAwM,OAAQ,CAAR,EAAYgB,aAAZ,CAA2BV,IAAMW,GAAjC,CAAsCR,IAAMS,GAA5C,CAAiDN,KAAOO,GAAxD,CAA6DJ,KAAOK,IAApE,EAA2E7c,SAA3E,GACAyb,OAAQ,CAAR,EAAYgB,aAAZ,CAA2BV,IAAMW,GAAjC,CAAsCR,IAAMS,GAA5C,CAAiDN,KAAOO,GAAxD,CAA6DJ,KAAOK,IAApE,EAA2E7c,SAA3E,GACAyb,OAAQ,CAAR,EAAYgB,aAAZ,CAA2BV,IAAMF,GAAjC,CAAsCK,IAAMF,GAA5C,CAAiDK,KAAOF,GAAxD,CAA6DK,KAAOF,IAApE,EAA2Etc,SAA3E,GACAyb,OAAQ,CAAR,EAAYgB,aAAZ,CAA2BV,IAAMF,GAAjC,CAAsCK,IAAMF,GAA5C,CAAiDK,KAAOF,GAAxD,CAA6DK,KAAOF,IAApE,EAA2Etc,SAA3E,GACAyb,OAAQ,CAAR,EAAYgB,aAAZ,CAA2BV,IAAMD,GAAjC,CAAsCI,IAAMD,GAA5C,CAAiDI,KAAOD,IAAxD,CAA8DI,KAAOD,IAArE,EAA4Evc,SAA5E,GACAyb,OAAQ,CAAR,EAAYgB,aAAZ,CAA2BV,IAAMD,GAAjC,CAAsCI,IAAMD,GAA5C,CAAiDI,KAAOD,IAAxD,CAA8DI,KAAOD,IAArE,EAA4Evc,SAA5E,GAEA,WAAA,CAEA,CAzDwB,CA2DzB8c,iBAAkB,UAAY,CAE7B,WAAa,UAAUzO,MAAV,EAAb,CAEA,gBAAkBlB,MAAX,CAAoB,CAE1B,aAAeA,OAAOI,QAAtB,CAEA,GAAKA,SAASwP,cAAT,GAA4B,IAAjC,CACCxP,SAASyP,qBAAT,GAEDjP,OAAOpV,IAAP,CAAa4U,SAASwP,cAAtB,EACEpX,YADF,CACgBwH,OAAOtG,WADvB,EAGA,YAAYiH,gBAAL,CAAuBC,MAAvB,CAAP,CAEA,CAZD,CAcA,CAlBiB,EA3DO,CA+EzBkP,iBAAkB,UAAY,CAE7B,WAAa,UAAU5O,MAAV,EAAb,CAEA,gBAAkB6O,MAAX,CAAoB,CAE1BnP,OAAO7I,MAAP,CAAc3M,GAAd,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,EACAwV,OAAO5F,MAAP,CAAgB,kBAAhB,CACA4F,OAAOpI,YAAP,CAAqBuX,OAAOrW,WAA5B,EAEA,YAAYiH,gBAAL,CAAuBC,MAAvB,CAAP,CAEA,CARD,CAUA,CAdiB,EA/EO,CA+FzBD,iBAAkB,0BAAWC,MAAX,CAAoB,CAErC,WAAa,KAAK0N,MAAlB,CACA,WAAa1N,OAAO7I,MAApB,CACA,cAAgB,CAAE6I,OAAO5F,MAAzB,CAEA,IAAM,MAAQ,CAAd,CAAiBsD,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9B,aAAegQ,OAAQhQ,CAAR,EAAYa,eAAZ,CAA6BpH,MAA7B,CAAf,CAEA,GAAKsF,SAAW2S,SAAhB,CAA4B,CAE3B,YAAA,CAEA,CAED,CAED,WAAA,CAEA,CAnHwB,CAqHzB/Q,cAAe,UAAY,CAE1B,OAAS,UAAUzM,OAAV,EAAT,CACC0b,GAAK,UAAU1b,OAAV,EADN,CAGA,gBAAkBkM,GAAX,CAAiB,CAEvB,WAAa,KAAK4P,MAAlB,CAEA,IAAM,MAAQ,CAAd,CAAiBhQ,EAAI,CAArB,CAAyBA,GAAzB,CAAgC,CAE/B,UAAYgQ,OAAQhQ,CAAR,CAAZ,CAEA2P,GAAGjsB,CAAH,CAAO+e,MAAMtG,MAAN,CAAazY,CAAb,CAAiB,CAAjB,CAAqB0c,IAAIxR,GAAJ,CAAQlL,CAA7B,CAAiC0c,IAAIrQ,GAAJ,CAAQrM,CAAhD,CACAksB,GAAGlsB,CAAH,CAAO+e,MAAMtG,MAAN,CAAazY,CAAb,CAAiB,CAAjB,CAAqB0c,IAAIrQ,GAAJ,CAAQrM,CAA7B,CAAiC0c,IAAIxR,GAAJ,CAAQlL,CAAhD,CACAisB,GAAGpe,CAAH,CAAOkR,MAAMtG,MAAN,CAAa5K,CAAb,CAAiB,CAAjB,CAAqB6O,IAAIxR,GAAJ,CAAQ2C,CAA7B,CAAiC6O,IAAIrQ,GAAJ,CAAQwB,CAAhD,CACAqe,GAAGre,CAAH,CAAOkR,MAAMtG,MAAN,CAAa5K,CAAb,CAAiB,CAAjB,CAAqB6O,IAAIrQ,GAAJ,CAAQwB,CAA7B,CAAiC6O,IAAIxR,GAAJ,CAAQ2C,CAAhD,CACAoe,GAAGne,CAAH,CAAOiR,MAAMtG,MAAN,CAAa3K,CAAb,CAAiB,CAAjB,CAAqB4O,IAAIxR,GAAJ,CAAQ4C,CAA7B,CAAiC4O,IAAIrQ,GAAJ,CAAQyB,CAAhD,CACAoe,GAAGpe,CAAH,CAAOiR,MAAMtG,MAAN,CAAa3K,CAAb,CAAiB,CAAjB,CAAqB4O,IAAIrQ,GAAJ,CAAQyB,CAA7B,CAAiC4O,IAAIxR,GAAJ,CAAQ4C,CAAhD,CAEA,OAASiR,MAAM5B,eAAN,CAAuB8O,EAAvB,CAAT,CACA,OAASlN,MAAM5B,eAAN,CAAuB+O,EAAvB,CAAT;CAIA,GAAK+B,GAAK,CAAL,EAAUnE,GAAK,CAApB,CAAwB,CAEvB,YAAA,CAEA,CAED,CAED,WAAA,CAEA,CA9BD,CAgCA,CArCc,EArHU,CA6JzBhN,cAAe,uBAAWrB,KAAX,CAAmB,CAEjC,WAAa,KAAK6Q,MAAlB,CAEA,IAAM,MAAQ,CAAd,CAAiBhQ,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9B,GAAKgQ,OAAQhQ,CAAR,EAAYa,eAAZ,CAA6B1B,KAA7B,EAAuC,CAA5C,CAAgD,CAE/C,YAAA,CAEA,CAED,CAED,WAAA,CAEA,CA7KwB,CAA1B;;;IAuLAhc,MAAM8sB,KAAN,CAAc,SAAW9T,MAAX,CAAmBuG,QAAnB,CAA8B,CAE3C,KAAKvG,MAAL,CAAgBA,SAAW7Y,SAAb,CAA2B6Y,MAA3B,CAAoC,UAAUjI,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAAlD,CACA,KAAKwO,QAAL,CAAkBA,WAAapf,SAAf,CAA6Bof,QAA7B,CAAwC,CAAxD,CAEA,CALD,CAOAvf,MAAM8sB,KAAN,CAAYrsB,SAAZ,CAAwB,CAEvBoJ,YAAa7J,MAAM8sB,KAFI,CAIvBnjB,IAAK,aAAWqP,MAAX,CAAmBuG,QAAnB,CAA8B,CAElC,KAAKvG,MAAL,CAAYjP,IAAZ,CAAkBiP,MAAlB,EACA,KAAKuG,QAAL,CAAgBA,QAAhB,CAEA,WAAA,CAEA,CAXsB,CAavBsO,cAAe,uBAAWttB,CAAX,CAAc6N,CAAd,CAAiBC,CAAjB,CAAoBC,CAApB,CAAwB,CAEtC,KAAK0K,MAAL,CAAYrP,GAAZ,CAAiBpJ,CAAjB,CAAoB6N,CAApB,CAAuBC,CAAvB,EACA,KAAKkR,QAAL,CAAgBjR,CAAhB,CAEA,WAAA,CAEA,CApBsB,CAsBvBmgB,8BAA+B,uCAAWzV,MAAX,CAAmBgD,KAAnB,CAA2B,CAEzD,KAAKhD,MAAL,CAAYjP,IAAZ,CAAkBiP,MAAlB,EACA,KAAKuG,QAAL,CAAgB,CAAEvD,MAAMhL,GAAN,CAAW,KAAKgI,MAAhB,CAAlB;CAEA,WAAA,CAEA,CA7BsB,CA+BvB0V,sBAAuB,UAAY,CAElC,OAAS,UAAU3d,OAAV,EAAT,CACA,OAAS,UAAUA,OAAV,EAAT,CAEA,gBAAkBY,CAAX,CAAcjI,CAAd,CAAiBoE,CAAjB,CAAqB,CAE3B,WAAagD,GAAG8D,UAAH,CAAe9G,CAAf,CAAkBpE,CAAlB,EAAsB0O,KAAtB,CAA6BnC,GAAGrB,UAAH,CAAejD,CAAf,CAAkBjI,CAAlB,CAA7B,EAAqD0H,SAArD,EAAb;CAIA,KAAKqd,6BAAL,CAAoCzV,MAApC,CAA4CrH,CAA5C,EAEA,WAAA,CAEA,CAVD,CAYA,CAjBsB,EA/BA,CAkDvB5F,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CAtDsB,CAwDvBA,KAAM,cAAWuV,KAAX,CAAmB,CAExB,KAAKtG,MAAL,CAAYjP,IAAZ,CAAkBuV,MAAMtG,MAAxB,EACA,KAAKuG,QAAL,CAAgBD,MAAMC,QAAtB,CAEA,WAAA,CAEA,CA/DsB,CAiEvBnO,UAAW,oBAAY;CAItB,wBAA0B,IAAM,KAAK4H,MAAL,CAAY5X,MAAZ,EAAhC,CACA,KAAK4X,MAAL,CAAYtL,cAAZ,CAA4BihB,mBAA5B,EACA,KAAKpP,QAAL,EAAiBoP,mBAAjB,CAEA,WAAA,CAEA,CA3EsB,CA6EvBnZ,OAAQ,iBAAY,CAEnB,KAAK+J,QAAL,EAAiB,CAAE,CAAnB,CACA,KAAKvG,MAAL,CAAYxD,MAAZ,GAEA,WAAA,CAEA,CApFsB,CAsFvBkI,gBAAiB,yBAAW1B,KAAX,CAAmB,CAEnC,YAAYhD,MAAL,CAAYhI,GAAZ,CAAiBgL,KAAjB,EAA2B,KAAKuD,QAAvC,CAEA,CA1FsB,CA4FvBqP,iBAAkB,0BAAWzP,MAAX,CAAoB,CAErC,YAAYzB,eAAL,CAAsByB,OAAO7I,MAA7B,EAAwC6I,OAAO5F,MAAtD,CAEA,CAhGsB,CAkGvBsV,aAAc,sBAAW7S,KAAX,CAAkBrP,cAAlB,CAAmC,CAEhD,YAAYmiB,UAAL,CAAiB9S,KAAjB,CAAwBrP,cAAxB,EAAyCgI,GAAzC,CAA8CqH,KAA9C,EAAsDxG,MAAtD,EAAP,CAEA,CAtGsB,CAwGvBsZ,WAAY,oBAAW9S,KAAX,CAAkBrP,cAAlB,CAAmC,CAE9C,2BAA6B,KAAK+Q,eAAL,CAAsB1B,KAAtB,CAA7B,CAEA,WAAarP,gBAAkB,UAAUoE,OAAV,EAA/B,CACA,cAAchH,IAAP,CAAa,KAAKiP,MAAlB,EAA2BtL,cAA3B,CAA2CqhB,sBAA3C,CAAP,CAEA,CA/GsB,CAiHvBC,cAAe,UAAY,CAE1B,OAAS,UAAUje,OAAV,EAAT,CAEA,gBAAkB2K,IAAX,CAAiB/O,cAAjB,CAAkC,CAExC,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CAEA,cAAgB2K,KAAK1O,KAAL,CAAY8D,EAAZ,CAAhB,CAEA,gBAAkB,KAAKkI,MAAL,CAAYhI,GAAZ,CAAiB+X,SAAjB,CAAlB,CAEA,GAAK4B,cAAgB,CAArB,CAAyB;CAGxB,GAAK,KAAKjN,eAAL,CAAsBhC,KAAKF,KAA3B,IAAuC,CAA5C,CAAgD,CAE/C,cAAczR,IAAP,CAAa2R,KAAKF,KAAlB,CAAP,CAEA;CAGD,gBAAA,CAEA,CAED,MAAQ,EAAIE,KAAKF,KAAL,CAAWxK,GAAX,CAAgB,KAAKgI,MAArB,EAAgC,KAAKuG,QAAzC,EAAsDoL,WAA9D,CAEA,GAAKlgB,EAAI,CAAJ,EAASA,EAAI,CAAlB,CAAsB,CAErB,gBAAA,CAEA,CAED,cAAcV,IAAP,CAAagf,SAAb,EAAyBrb,cAAzB,CAAyCjD,CAAzC,EAA6C2C,GAA7C,CAAkDsO,KAAKF,KAAvD,CAAP,CAEA,CAhCD,CAkCA,CAtCc,EAjHQ,CAyJvByT,eAAgB,wBAAWvT,IAAX,CAAkB;CAIjC,cAAgB,KAAKgC,eAAL,CAAsBhC,KAAKF,KAA3B,CAAhB,CACA,YAAc,KAAKkC,eAAL,CAAsBhC,KAAKD,GAA3B,CAAd,CAEA,iBAAqB,CAAZ,EAAiByT,QAAU,CAA7B,EAAsCA,QAAU,CAAV,EAAeC,UAAY,CAAxE,CAEA,CAlKsB,CAoKvB3R,cAAe,uBAAWP,GAAX,CAAiB,CAE/B,WAAWoC,eAAJ,CAAqB,IAArB,CAAP,CAEA,CAxKsB,CA0KvBH,iBAAkB,0BAAWC,MAAX,CAAoB,CAErC,cAAcE,eAAP,CAAwB,IAAxB,CAAP,CAEA,CA9KsB,CAgLvB+P,cAAe,uBAAWziB,cAAX,CAA4B,CAE1C,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CACA,cAAchH,IAAP,CAAa,KAAKiP,MAAlB,EAA2BtL,cAA3B,CAA2C,CAAE,KAAK6R,QAAlD,CAAP,CAEA,CArLsB,CAuLvBxI,aAAc,UAAY,CAEzB,OAAS,UAAUhG,OAAV,EAAT,CACA,OAAS,UAAU2O,OAAV,EAAT,CAEA,gBAAkB9H,MAAX,CAAmByX,oBAAnB,CAA0C,CAEhD,mBAAqB,KAAKD,aAAL,CAAoBte,EAApB,EAAyBiG,YAAzB,CAAuCa,MAAvC,CAArB;;CAIA,iBAAmByX,sBAAwBC,GAAG5N,eAAH,CAAoB9J,MAApB,CAA3C,CACA,WAAa,KAAKoB,MAAL,CAAYnC,YAAZ,CAA0B0Y,YAA1B,EAAyCne,SAAzC,EAAb;CAGA,KAAKmO,QAAL,CAAgB,CAAEiQ,eAAexe,GAAf,CAAoBgI,MAApB,CAAlB,CAEA,WAAA,CAEA,CAdD,CAgBA,CArBa,EAvLS,CA8MvB6E,UAAW,mBAAW5P,MAAX,CAAoB,CAE9B,KAAKsR,QAAL,CAAgB,KAAKA,QAAL,CAAgBtR,OAAO+C,GAAP,CAAY,KAAKgI,MAAjB,CAAhC,CAEA,WAAA,CAEA,CApNsB,CAsNvBnL,OAAQ,gBAAWyR,KAAX,CAAmB,CAE1B,aAAatG,MAAN,CAAanL,MAAb,CAAqB,KAAKmL,MAA1B,GAAwCsG,MAAMC,QAAN,GAAmB,KAAKA,QAAvE,CAEA,CA1NsB,CAAxB;;;;;;;;;IA0OAvf,MAAMyvB,SAAN,CAAkB,SAAWlW,MAAX,CAAmBD,GAAnB,CAAwBH,KAAxB,CAAgC,CAEjD,KAAKI,MAAL,CAAgBA,SAAWpZ,SAAb,CAA2BoZ,MAA3B,CAAoC,GAAlD,CACA,KAAKD,GAAL,CAAaA,MAAQnZ,SAAV,CAAwBmZ,GAAxB,CAA8B,CAAzC;CACA,KAAKH,KAAL,CAAeA,QAAUhZ,SAAZ,CAA0BgZ,KAA1B,CAAkC,CAA/C;CAEA,WAAA,CAEA,CARD,CAUAnZ,MAAMyvB,SAAN,CAAgBhvB,SAAhB,CAA4B,CAE3BoJ,YAAa7J,MAAMyvB,SAFQ,CAI3B9lB,IAAK,aAAW4P,MAAX,CAAmBD,GAAnB,CAAwBH,KAAxB,CAAgC,CAEpC,KAAKI,MAAL,CAAcA,MAAd,CACA,KAAKD,GAAL,CAAWA,GAAX,CACA,KAAKH,KAAL,CAAaA,KAAb,CAEA,WAAA,CAEA,CAZ0B,CAc3BpN,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CAlB0B,CAoB3BA,KAAM,cAAW2lB,KAAX,CAAmB,CAExB,KAAKnW,MAAL,CAAYxP,IAAZ,CAAkB2lB,MAAMnW,MAAxB,EACA,KAAKD,GAAL,CAASvP,IAAT,CAAe2lB,MAAMpW,GAArB,EACA,KAAKH,KAAL,CAAWpP,IAAX,CAAiB2lB,MAAMvW,KAAvB,EAEA,WAAA,CAEA,CA5B0B;CA+B3BwW,SAAU,mBAAW,CAEpB,QAAU,QAAV,CACA,KAAKrW,GAAL,CAAWlZ,KAAKwM,GAAL,CAAUqE,GAAV,CAAe7Q,KAAKqL,GAAL,CAAUrL,KAAKsV,EAAL,CAAUzE,GAApB,CAAyB,KAAKqI,GAA9B,CAAf,CAAX,CAEA,WAAA,CAEA,CAtC0B,CAwC3B4B,eAAgB,wBAAU0U,IAAV,CAAiB,CAEhC,KAAKrW,MAAL,CAAcqW,KAAKxuB,MAAL,EAAd,CAEA,GAAK,KAAKmY,MAAL,GAAgB,CAArB,CAAyB,CAExB,KAAKJ,KAAL,CAAa,CAAb,CACA,KAAKG,GAAL,CAAW,CAAX,CAEA,CALD,IAKO,CAEN,KAAKH,KAAL,CAAa/Y,KAAKoS,KAAL,CAAYod,KAAKrvB,CAAjB,CAAoBqvB,KAAKvhB,CAAzB,CAAb;CACA,KAAKiL,GAAL,CAAWlZ,KAAK8Y,IAAL,CAAWlZ,MAAMI,IAAN,CAAW0K,KAAX,CAAkB8kB,KAAKxhB,CAAL,CAAS,KAAKmL,MAAhC,CAAwC,CAAE,CAA1C,CAA6C,CAA7C,CAAX,CAAX;CAEA,CAED,WAAA,CAEA,CA1D0B,CAA5B;;;;IAqEAvZ,MAAMI,IAAN,CAAa,CAEZmoB,QAASnoB,KAAKsV,EAAL,CAAU,GAFP,CAGZma,QAAS,IAAMzvB,KAAKsV,EAHR,CAKZoa,aAAc,UAAY;CAIzB,UAAY,iEAAiEC,KAAjE,CAAwE,EAAxE,CAAZ,CACA,SAAW,SAAA,CAAW,EAAX,CAAX,CACA,QAAU,CAAV,CAAavmB,CAAb,CAEA,iBAAmB,CAElB,IAAM,MAAQ,CAAd,CAAiBqT,EAAI,EAArB,CAAyBA,GAAzB,CAAgC,CAE/B,GAAKA,IAAM,CAAN,EAAWA,IAAM,EAAjB,EAAuBA,IAAM,EAA7B,EAAmCA,IAAM,EAA9C,CAAmD,CAElDmT,KAAMnT,CAAN,EAAY,GAAZ,CAEA,CAJD,QAIYA,IAAM,EAAX,CAAgB,CAEtBmT,KAAMnT,CAAN,EAAY,GAAZ,CAEA,CAJM,IAIA,CAEN,GAAKoT,KAAO,IAAZ,CAAmBA,IAAM,UAAc7vB,KAAK8vB,MAAL,GAAgB,SAA9B,CAA4C,CAAlD,CACnB1mB,EAAIymB,IAAM,GAAV,CACAA,IAAMA,KAAO,CAAb,CACAD,KAAMnT,CAAN,EAAYsT,MAAStT,IAAM,EAAR,CAAiBrT,EAAI,GAAN,CAAc,GAA7B,CAAmCA,CAA1C,CAAZ,CAEA,CAED,CAED,YAAY4mB,IAAL,CAAW,EAAX,CAAP,CAEA,CAzBD,CA2BA,CAnCa,EALF,CA0CZtlB,MAAO,eAAWhB,KAAX,CAAkB2B,GAAlB,CAAuBmB,GAAvB,CAA6B,CAEnC,YAAYA,GAAL,CAAUnB,GAAV,CAAerL,KAAKqL,GAAL,CAAUmB,GAAV,CAAe9C,KAAf,CAAf,CAAP,CAEA,CA9CW;;CAmDZe,gBAAiB,yBAAWuZ,CAAX,CAAc/Y,CAAd,CAAkB,CAElC,OAAO,CAAI+Y,EAAI/Y,CAAN,CAAYA,CAAd,EAAoBA,CAA3B,CAEA,CAvDW;CA2DZglB,UAAW,mBAAW9vB,CAAX,CAAc+vB,EAAd,CAAkBC,EAAlB,CAAsBxG,EAAtB,CAA0ByG,EAA1B,CAA+B,CAEzC,UAAY,CAAEjwB,EAAI+vB,EAAN,GAAeE,GAAKzG,EAApB,GAA6BwG,GAAKD,EAAlC,CAAZ,CAEA,CA/DW;CAmEZG,WAAY,oBAAWlwB,CAAX,CAAckL,GAAd,CAAmBmB,GAAnB,CAAyB,CAEpC,GAAKrM,GAAKkL,GAAV,CAAgB,QAAA,CAChB,GAAKlL,GAAKqM,GAAV,CAAgB,QAAA,CAEhBrM,EAAI,CAAEA,EAAIkL,GAAN,GAAgBmB,IAAMnB,GAAtB,CAAJ,CAEA,SAAWlL,CAAJ,EAAU,EAAI,EAAIA,CAAlB,CAAP,CAEA,CA5EW,CA8EZmwB,aAAc,sBAAWnwB,CAAX,CAAckL,GAAd,CAAmBmB,GAAnB,CAAyB,CAEtC,GAAKrM,GAAKkL,GAAV,CAAgB,QAAA,CAChB,GAAKlL,GAAKqM,GAAV,CAAgB,QAAA,CAEhBrM,EAAI,CAAEA,EAAIkL,GAAN,GAAgBmB,IAAMnB,GAAtB,CAAJ,CAEA,SAAWlL,CAAJ,CAAQA,CAAR,EAAcA,GAAMA,EAAI,CAAJ,CAAQ,EAAd,EAAqB,EAAnC,CAAP,CAEA,CAvFW,CAyFZowB,SAAU,mBAAY,CAErBxlB,QAAQC,IAAR,CAAc,uEAAd,EACA,YAAY8kB,MAAL,EAAP,CAEA,CA9FW;CAkGZU,QAAS,iBAAWC,GAAX,CAAgBC,IAAhB,CAAuB,CAE/B,WAAa1wB,KAAKiK,KAAL,CAAYjK,KAAK8vB,MAAL,IAAkBY,KAAOD,GAAP,CAAa,CAA/B,CAAZ,CAAb,CAEA,CAtGW;CA0GZE,UAAW,mBAAWF,GAAX,CAAgBC,IAAhB,CAAuB,CAEjC,WAAa1wB,KAAK8vB,MAAL,IAAkBY,KAAOD,GAAzB,CAAb,CAEA,CA9GW;CAkHZG,gBAAiB,yBAAWC,KAAX,CAAmB,CAEnC,cAAiB,IAAM7wB,KAAK8vB,MAAL,EAAhB,CAAP,CAEA,CAtHW,CAwHZgB,SAAU,kBAAWC,OAAX,CAAqB,CAE9B,eAAiBnxB,MAAMI,IAAN,CAAWmoB,OAA5B,CAEA,CA5HW,CA8HZ6I,SAAU,kBAAWC,OAAX,CAAqB,CAE9B,eAAiBrxB,MAAMI,IAAN,CAAWyvB,OAA5B,CAEA,CAlIW,CAoIZyB,aAAc,sBAAWxnB,KAAX,CAAmB,CAEhC,OAAO,CAAEA,MAAUA,MAAQ,CAApB,IAA8B,CAA9B,EAAmCA,QAAU,CAApD,CAEA,CAxIW,CA0IZynB,kBAAmB,2BAAWznB,KAAX,CAAmB,CAErC,YAAYzJ,GAAL,CAAU,CAAV,CAAaD,KAAKkV,KAAL,CAAYlV,KAAKoxB,GAAL,CAAU1nB,KAAV,EAAoB1J,KAAKqxB,GAArC,CAAb,CAAP,CAEA,CA9IW,CAgJZC,eAAgB,wBAAW5nB,KAAX,CAAmB,CAElCA,QACAA,OAASA,OAAS,CAAlB,CACAA,OAASA,OAAS,CAAlB,CACAA,OAASA,OAAS,CAAlB,CACAA,OAASA,OAAS,CAAlB,CACAA,OAASA,OAAS,EAAlB,CACAA,QAEA,YAAA,CAEA,CA5JW,CAAb;;;;;;;IA0KA9J,MAAM2xB,MAAN,CAAe,SAAWjV,MAAX,CAAoB,CAElC,KAAKA,MAAL,CAAcA,MAAd,CAEA,MAAQ,EAAR,CAAYkV,GAAK,CAAErxB,EAAG,CAAL,CAAQ6N,EAAG,CAAX,CAAcC,EAAG,CAAjB,CAAjB,CACA2N,KADA,CACO6V,QADP,CACiBC,MADjB,CACyBC,EADzB,CAC6BC,EAD7B,CAEAC,EAFA,CAEIC,EAFJ,CAEQC,EAFR,CAEYC,EAFZ,CAIA,KAAKC,aAAL,CAAqB,SAAW1gB,CAAX,CAAe,CAEnC,KAAK+K,MAAL,CAAc,EAAd,CAEA,IAAM,MAAQ,CAAd,CAAiBG,EAAIlL,EAAEvQ,MAAvB,CAA+Byb,GAA/B,CAAsC,CAErC,KAAKH,MAAL,CAAaG,CAAb,EAAmB,CAAEtc,EAAGoR,EAAGkL,CAAH,EAAQ,CAAR,CAAL,CAAkBzO,EAAGuD,EAAGkL,CAAH,EAAQ,CAAR,CAArB,CAAkCxO,EAAGsD,EAAGkL,CAAH,EAAQ,CAAR,CAArC,CAAnB,CAEA,CAED,CAVD,CAYA,KAAKyV,QAAL,CAAgB,SAAWC,CAAX,CAAe,CAE9BvW,MAAQ,CAAE,KAAKU,MAAL,CAAYtb,MAAZ,CAAqB,CAAvB,EAA6BmxB,CAArC,CACAV,SAAWzxB,KAAKiK,KAAL,CAAY2R,KAAZ,CAAX,CACA8V,OAAS9V,MAAQ6V,QAAjB,CAEA/jB,EAAG,CAAH,EAAS+jB,WAAa,CAAb,CAAiBA,QAAjB,CAA4BA,SAAW,CAAhD,CACA/jB,EAAG,CAAH,EAAS+jB,QAAT,CACA/jB,EAAG,CAAH,EAAS+jB,SAAY,KAAKnV,MAAL,CAAYtb,MAAZ,CAAqB,CAAjC,CAAqC,KAAKsb,MAAL,CAAYtb,MAAZ,CAAqB,CAA1D,CAA8DywB,SAAW,CAAlF,CACA/jB,EAAG,CAAH,EAAS+jB,SAAY,KAAKnV,MAAL,CAAYtb,MAAZ,CAAqB,CAAjC,CAAqC,KAAKsb,MAAL,CAAYtb,MAAZ,CAAqB,CAA1D,CAA8DywB,SAAW,CAAlF,CAEAI,GAAK,KAAKvV,MAAL,CAAa5O,EAAG,CAAH,CAAb,CAAL,CACAokB,GAAK,KAAKxV,MAAL,CAAa5O,EAAG,CAAH,CAAb,CAAL,CACAqkB,GAAK,KAAKzV,MAAL,CAAa5O,EAAG,CAAH,CAAb,CAAL,CACAskB,GAAK,KAAK1V,MAAL,CAAa5O,EAAG,CAAH,CAAb,CAAL,CAEAikB,GAAKD,OAASA,MAAd,CACAE,GAAKF,OAASC,EAAd,CAEAH,GAAGrxB,CAAH,CAAOiyB,YAAaP,GAAG1xB,CAAhB,CAAmB2xB,GAAG3xB,CAAtB,CAAyB4xB,GAAG5xB,CAA5B,CAA+B6xB,GAAG7xB,CAAlC,CAAqCuxB,MAArC,CAA6CC,EAA7C,CAAiDC,EAAjD,CAAP,CACAJ,GAAGxjB,CAAH,CAAOokB,YAAaP,GAAG7jB,CAAhB,CAAmB8jB,GAAG9jB,CAAtB,CAAyB+jB,GAAG/jB,CAA5B,CAA+BgkB,GAAGhkB,CAAlC,CAAqC0jB,MAArC,CAA6CC,EAA7C,CAAiDC,EAAjD,CAAP,CACAJ,GAAGvjB,CAAH,CAAOmkB,YAAaP,GAAG5jB,CAAhB,CAAmB6jB,GAAG7jB,CAAtB,CAAyB8jB,GAAG9jB,CAA5B,CAA+B+jB,GAAG/jB,CAAlC,CAAqCyjB,MAArC,CAA6CC,EAA7C,CAAiDC,EAAjD,CAAP,CAEA,SAAA,CAEA,CAzBD,CA2BA,KAAKS,qBAAL,CAA6B,UAAY,CAExC,KAAA,CAAOloB,CAAP,CAAUK,EAAI,KAAK8R,MAAL,CAAYtb,MAA1B,CACCsxB,OAAS,EADV,CAGA,IAAM7V,EAAI,CAAV,CAAaA,EAAIjS,CAAjB,CAAoBiS,GAApB,CAA2B,CAE1BtS,EAAI,KAAKmS,MAAL,CAAaG,CAAb,CAAJ,CACA6V,OAAQ7V,CAAR,EAAc,CAAEtS,EAAEhK,CAAJ,CAAOgK,EAAE6D,CAAT,CAAY7D,EAAE8D,CAAd,CAAd,CAEA,CAED,aAAA,CAEA,CAdD;CAkBA,KAAKskB,SAAL,CAAiB,SAAWC,aAAX,CAA2B,CAE3C,KAAA,CAAO1xB,KAAP,CAAc2xB,QAAd,CAAwBtL,QAAxB,CACCvL,MAAQ,CADT,CACY6V,SAAW,CADvB,CAC0BiB,YAAc,CADxC,CAECC,YAAc,UAAUhiB,OAAV,EAFf,CAGCiiB,OAAS,UAAUjiB,OAAV,EAHV,CAICkiB,aAAe,EAJhB,CAKCC,YAAc,CALf;CASAD,aAAc,CAAd,EAAoB,CAApB,CAEA,GAAK,CAAEL,aAAP,CAAuBA,cAAgB,GAAhB,CAEvBC,SAAW,KAAKnW,MAAL,CAAYtb,MAAZ,CAAqBwxB,aAAhC,CAEAG,YAAYhpB,IAAZ,CAAkB,KAAK2S,MAAL,CAAa,CAAb,CAAlB,EAEA,IAAMG,EAAI,CAAV,CAAaA,EAAIgW,QAAjB,CAA2BhW,GAA3B,CAAkC,CAEjC3b,MAAQ2b,EAAIgW,QAAZ,CAEAtL,SAAW,KAAK+K,QAAL,CAAepxB,KAAf,CAAX,CACA8xB,OAAOjpB,IAAP,CAAawd,QAAb,EAEA2L,aAAeF,OAAOrd,UAAP,CAAmBod,WAAnB,CAAf,CAEAA,YAAYhpB,IAAZ,CAAkBwd,QAAlB,EAEAvL,MAAQ,CAAE,KAAKU,MAAL,CAAYtb,MAAZ,CAAqB,CAAvB,EAA6BF,KAArC,CACA2wB,SAAWzxB,KAAKiK,KAAL,CAAY2R,KAAZ,CAAX,CAEA,GAAK6V,WAAaiB,WAAlB,CAAgC,CAE/BG,aAAcpB,QAAd,EAA2BqB,WAA3B,CACAJ,YAAcjB,QAAd,CAEA,CAED;CAIDoB,aAAcA,aAAa7xB,MAA3B,EAAsC8xB,WAAtC,CAEA,OAAO,CAAEC,OAAQF,YAAV,CAAwBG,MAAOF,WAA/B,CAAP,CAEA,CAhDD,CAkDA,KAAKG,wBAAL,CAAgC,SAAWC,YAAX,CAA0B,CAEzD,KAAA,CAAO9S,CAAP,CACCtf,KADD,CACQqyB,YADR,CACsBC,SADtB,CAECC,YAFD,CAGCC,QAHD,CAGWnM,QAHX,CAICoM,UAAY,EAJb,CAKCX,OAAS,UAAUjiB,OAAV,EALV,CAMC6iB,GAAK,KAAKjB,SAAL,EANN,CAQAgB,UAAUE,IAAV,CAAgBb,OAAOjpB,IAAP,CAAa,KAAK2S,MAAL,CAAa,CAAb,CAAb,EAAgC3Q,KAAhC,EAAhB,EAEA,IAAM8Q,EAAI,CAAV,CAAaA,EAAI,KAAKH,MAAL,CAAYtb,MAA7B,CAAqCyb,GAArC,CAA4C;;CAK3C4W,aAAeG,GAAGT,MAAH,CAAWtW,CAAX,EAAiB+W,GAAGT,MAAH,CAAWtW,EAAI,CAAf,CAAhC,CAEA6W,SAAWtzB,KAAKiV,IAAL,CAAWie,aAAeG,YAAf,CAA8BG,GAAGR,KAA5C,CAAX,CAEAG,aAAe,CAAE1W,EAAI,CAAN,GAAc,KAAKH,MAAL,CAAYtb,MAAZ,CAAqB,CAAnC,CAAf,CACAoyB,UAAY3W,GAAM,KAAKH,MAAL,CAAYtb,MAAZ,CAAqB,CAA3B,CAAZ,CAEA,IAAMof,EAAI,CAAV,CAAaA,EAAIkT,SAAW,CAA5B,CAA+BlT,GAA/B,CAAsC,CAErCtf,MAAQqyB,aAAe/S,GAAM,EAAIkT,QAAV,GAAyBF,UAAYD,YAArC,CAAvB,CAEAhM,SAAW,KAAK+K,QAAL,CAAepxB,KAAf,CAAX,CACAyyB,UAAUE,IAAV,CAAgBb,OAAOjpB,IAAP,CAAawd,QAAb,EAAwBxb,KAAxB,EAAhB,EAEA,CAED4nB,UAAUE,IAAV,CAAgBb,OAAOjpB,IAAP,CAAa,KAAK2S,MAAL,CAAaG,CAAb,CAAb,EAAgC9Q,KAAhC,EAAhB,EAEA,CAED,KAAK2Q,MAAL,CAAciX,SAAd,CAEA,CAvCD;CA2CA,oBAAA,CAAsBpH,EAAtB,CAA0BC,EAA1B,CAA8BC,EAA9B,CAAkCC,EAAlC,CAAsCjiB,CAAtC,CAAyCqpB,EAAzC,CAA6CC,EAA7C,CAAkD,CAEjD,OAAS,CAAEtH,GAAKF,EAAP,EAAc,GAAvB,CACCzb,GAAK,CAAE4b,GAAKF,EAAP,EAAc,GADpB,CAGA,OAAO,CAAE,GAAMA,GAAKC,EAAX,EAAkBpD,EAAlB,CAAuBvY,EAAzB,EAAgCijB,EAAhC,CAAqC,CAAE,CAAE,CAAF,EAAQvH,GAAKC,EAAb,EAAoB,EAAIpD,EAAxB,CAA6BvY,EAA/B,EAAsCgjB,EAA3E,CAAgFzK,GAAK5e,CAArF,CAAyF+hB,EAAhG,CAEA,CAED,CAvKD;;;;IAgLAxsB,MAAMg0B,QAAN,CAAiB,SAAWriB,CAAX,CAAcjI,CAAd,CAAiBoE,CAAjB,CAAqB,CAErC,KAAK6D,CAAL,CAAWA,IAAMxR,SAAR,CAAsBwR,CAAtB,CAA0B,UAAUZ,OAAV,EAAnC,CACA,KAAKrH,CAAL,CAAWA,IAAMvJ,SAAR,CAAsBuJ,CAAtB,CAA0B,UAAUqH,OAAV,EAAnC,CACA,KAAKjD,CAAL,CAAWA,IAAM3N,SAAR,CAAsB2N,CAAtB,CAA0B,UAAUiD,OAAV,EAAnC,CAEA,CAND,CAQA/Q,MAAMg0B,QAAN,CAAehb,MAAf,CAAwB,UAAY,CAEnC,OAAS,UAAUjI,OAAV,EAAT,CAEA,gBAAkBY,CAAX,CAAcjI,CAAd,CAAiBoE,CAAjB,CAAoBnB,cAApB,CAAqC,CAE3C,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CAEA+K,OAAOlH,UAAP,CAAmB9G,CAAnB,CAAsBpE,CAAtB,EACA2f,GAAGzU,UAAH,CAAejD,CAAf,CAAkBjI,CAAlB,EACAoS,OAAO1D,KAAP,CAAciR,EAAd,EAEA,mBAAqBvN,OAAOtK,QAAP,EAArB,CACA,GAAKyiB,eAAiB,CAAtB,CAA0B,CAEzB,cAAcvmB,cAAP,CAAuB,EAAItN,KAAKkM,IAAL,CAAW2nB,cAAX,CAA3B,CAAP,CAEA,CAED,cAActqB,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,CAAP,CAEA,CAjBD,CAmBA,CAvBuB,EAAxB;;CA2BA3J,MAAMg0B,QAAN,CAAeE,kBAAf,CAAoC,UAAY,CAE/C,OAAS,UAAUnjB,OAAV,EAAT,CACA,OAAS,UAAUA,OAAV,EAAT,CACA,OAAS,UAAUA,OAAV,EAAT,CAEA,gBAAkBiL,KAAX,CAAkBrK,CAAlB,CAAqBjI,CAArB,CAAwBoE,CAAxB,CAA2BnB,cAA3B,CAA4C,CAElD0c,GAAGzU,UAAH,CAAe9G,CAAf,CAAkB6D,CAAlB,EACAb,GAAG8D,UAAH,CAAelL,CAAf,CAAkBiI,CAAlB,EACAsE,GAAGrB,UAAH,CAAeoH,KAAf,CAAsBrK,CAAtB,EAEA,UAAY0X,GAAGrY,GAAH,CAAQqY,EAAR,CAAZ,CACA,UAAYA,GAAGrY,GAAH,CAAQF,EAAR,CAAZ,CACA,UAAYuY,GAAGrY,GAAH,CAAQiF,EAAR,CAAZ,CACA,UAAYnF,GAAGE,GAAH,CAAQF,EAAR,CAAZ,CACA,UAAYA,GAAGE,GAAH,CAAQiF,EAAR,CAAZ,CAEA,UAAcke,MAAQC,KAAR,CAAgBC,MAAQA,KAAtC,CAEA,WAAa1nB,gBAAkB,UAAUoE,OAAV,EAA/B;CAGA,GAAKujB,QAAU,CAAf,CAAmB;;CAIlB,cAAc3qB,GAAP,CAAY,CAAE,CAAd,CAAiB,CAAE,CAAnB,CAAsB,CAAE,CAAxB,CAAP,CAEA,CAED,aAAe,EAAI2qB,KAAnB,CACA,MAAQ,CAAEF,MAAQG,KAAR,CAAgBF,MAAQG,KAA1B,EAAoCC,QAA5C,CACA,MAAQ,CAAEN,MAAQK,KAAR,CAAgBH,MAAQE,KAA1B,EAAoCE,QAA5C;CAGA,cAAc9qB,GAAP,CAAY,EAAI+qB,CAAJ,CAAQnjB,CAApB,CAAuBA,CAAvB,CAA0BmjB,CAA1B,CAAP,CAEA,CAhCD,CAkCA,CAxCmC,EAApC,CA0CA10B,MAAMg0B,QAAN,CAAe3W,aAAf,CAA+B,UAAY,CAE1C,OAAS,UAAUtM,OAAV,EAAT,CAEA,gBAAkBiL,KAAX,CAAkBrK,CAAlB,CAAqBjI,CAArB,CAAwBoE,CAAxB,CAA4B,CAElC,WAAa9N,MAAMg0B,QAAN,CAAeE,kBAAf,CAAmClY,KAAnC,CAA0CrK,CAA1C,CAA6CjI,CAA7C,CAAgDoE,CAAhD,CAAmDgD,EAAnD,CAAb,CAEA,cAAgBvQ,CAAP,EAAY,CAAd,EAAuBub,OAAO1N,CAAP,EAAY,CAAnC,EAA8C0N,OAAOvb,CAAP,CAAWub,OAAO1N,CAApB,EAA2B,CAA9E,CAEA,CAND,CAQA,CAZ8B,EAA/B,CAcApO,MAAMg0B,QAAN,CAAevzB,SAAf,CAA2B,CAE1BoJ,YAAa7J,MAAMg0B,QAFO,CAI1BrqB,IAAK,aAAWgI,CAAX,CAAcjI,CAAd,CAAiBoE,CAAjB,CAAqB,CAEzB,KAAK6D,CAAL,CAAO5H,IAAP,CAAa4H,CAAb,EACA,KAAKjI,CAAL,CAAOK,IAAP,CAAaL,CAAb,EACA,KAAKoE,CAAL,CAAO/D,IAAP,CAAa+D,CAAb,EAEA,WAAA,CAEA,CAZyB,CAc1B6mB,wBAAyB,iCAAWjY,MAAX,CAAmBkY,EAAnB,CAAuBC,EAAvB,CAA2BC,EAA3B,CAAgC,CAExD,KAAKnjB,CAAL,CAAO5H,IAAP,CAAa2S,OAAQkY,EAAR,CAAb,EACA,KAAKlrB,CAAL,CAAOK,IAAP,CAAa2S,OAAQmY,EAAR,CAAb,EACA,KAAK/mB,CAAL,CAAO/D,IAAP,CAAa2S,OAAQoY,EAAR,CAAb,EAEA,WAAA,CAEA,CAtByB,CAwB1B/oB,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CA5ByB,CA8B1BA,KAAM,cAAWgrB,QAAX,CAAsB,CAE3B,KAAKpjB,CAAL,CAAO5H,IAAP,CAAagrB,SAASpjB,CAAtB,EACA,KAAKjI,CAAL,CAAOK,IAAP,CAAagrB,SAASrrB,CAAtB,EACA,KAAKoE,CAAL,CAAO/D,IAAP,CAAagrB,SAASjnB,CAAtB,EAEA,WAAA,CAEA,CAtCyB,CAwC1BknB,KAAM,UAAY,CAEjB,OAAS,UAAUjkB,OAAV,EAAT,CACA,OAAS,UAAUA,OAAV,EAAT,CAEA,iBAAmB,CAElBsY,GAAGzU,UAAH,CAAe,KAAK9G,CAApB,CAAuB,KAAKpE,CAA5B,EACAoH,GAAG8D,UAAH,CAAe,KAAKjD,CAApB,CAAuB,KAAKjI,CAA5B,EAEA,UAAU0O,KAAH,CAAUtH,EAAV,EAAe1P,MAAf,GAA0B,GAAjC,CAEA,CAPD,CASA,CAdK,EAxCoB,CAwD1B6zB,SAAU,kBAAWtoB,cAAX,CAA4B,CAErC,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CACA,cAAc0D,UAAP,CAAmB,KAAK9C,CAAxB,CAA2B,KAAKjI,CAAhC,EAAoC0D,GAApC,CAAyC,KAAKU,CAA9C,EAAkDJ,cAAlD,CAAkE,EAAI,CAAtE,CAAP,CAEA,CA7DyB,CA+D1BsL,OAAQ,gBAAWrM,cAAX,CAA4B,CAEnC,aAAaqnB,QAAN,CAAehb,MAAf,CAAuB,KAAKrH,CAA5B,CAA+B,KAAKjI,CAApC,CAAuC,KAAKoE,CAA5C,CAA+CnB,cAA/C,CAAP,CAEA,CAnEyB,CAqE1B2S,MAAO,eAAW3S,cAAX,CAA4B,CAElC,WAAaA,gBAAkB,UAAUmgB,KAAV,EAA/B,CAEA,cAAc4B,qBAAP,CAA8B,KAAK/c,CAAnC,CAAsC,KAAKjI,CAA3C,CAA8C,KAAKoE,CAAnD,CAAP,CAEA,CA3EyB,CA6E1BomB,mBAAoB,4BAAWlY,KAAX,CAAkBrP,cAAlB,CAAmC,CAEtD,aAAaqnB,QAAN,CAAeE,kBAAf,CAAmClY,KAAnC,CAA0C,KAAKrK,CAA/C,CAAkD,KAAKjI,CAAvD,CAA0D,KAAKoE,CAA/D,CAAkEnB,cAAlE,CAAP,CAEA,CAjFyB,CAmF1B0Q,cAAe,uBAAWrB,KAAX,CAAmB,CAEjC,aAAagY,QAAN,CAAe3W,aAAf,CAA8BrB,KAA9B,CAAqC,KAAKrK,CAA1C,CAA6C,KAAKjI,CAAlD,CAAqD,KAAKoE,CAA1D,CAAP,CAEA,CAvFyB,CAyF1BwO,oBAAqB,UAAY,CAEhC,SAAA,CAAW4Y,QAAX,CAAqBC,cAArB,CAAqC/V,YAArC,CAEA,mCAAO,CAA8BpD,KAA9B,CAAqCrP,cAArC,CAAsD,CAE5D,GAAK2S,QAAUnf,SAAf,CAA2B,CAE1Bmf,MAAQ,UAAUwN,KAAV,EAAR,CACAoI,SAAW,CAAE,UAAU3Z,KAAV,EAAF,CAAqB,UAAUA,KAAV,EAArB,CAAwC,UAAUA,KAAV,EAAxC,CAAX,CACA4Z,eAAiB,UAAUpkB,OAAV,EAAjB,CACAqO,aAAe,UAAUrO,OAAV,EAAf,CAEA,CAED,WAAapE,gBAAkB,UAAUoE,OAAV,EAA/B,CACA,gBAAkByL,QAAlB;CAIA8C,MAAMoP,qBAAN,CAA6B,KAAK/c,CAAlC,CAAqC,KAAKjI,CAA1C,CAA6C,KAAKoE,CAAlD,EACAwR,MAAMuP,YAAN,CAAoB7S,KAApB,CAA2BmZ,cAA3B;CAIA,GAAI,KAAK9X,aAAL,CAAoB8X,cAApB,IAAyC,IAA7C,CAAoD;CAInDrZ,OAAO/R,IAAP,CAAaorB,cAAb,EAEA,CAND,IAMO;CAIND,SAAU,CAAV,EAAcvrB,GAAd,CAAmB,KAAKgI,CAAxB,CAA2B,KAAKjI,CAAhC,EACAwrB,SAAU,CAAV,EAAcvrB,GAAd,CAAmB,KAAKD,CAAxB,CAA2B,KAAKoE,CAAhC,EACAonB,SAAU,CAAV,EAAcvrB,GAAd,CAAmB,KAAKmE,CAAxB,CAA2B,KAAK6D,CAAhC,EAEA,IAAK,MAAQ,CAAb,CAAgBkL,EAAIqY,SAAS9zB,MAA7B,CAAqCyb,GAArC,CAA4C,CAE3CqY,SAAUrY,CAAV,EAAcP,mBAAd,CAAmC6Y,cAAnC,CAAmD,IAAnD,CAAyD/V,YAAzD,EAEA,aAAe+V,eAAevf,iBAAf,CAAkCwJ,YAAlC,CAAf,CAEA,GAAIxD,SAAWwZ,WAAf,CAA6B,CAE5BA,YAAcxZ,QAAd,CAEAE,OAAO/R,IAAP,CAAaqV,YAAb,EAEA,CAED,CAED,CAED,aAAA,CAEA,CAvDD,CAyDA,CA7DoB,EAzFK,CAwJ1BvR,OAAQ,gBAAWknB,QAAX,CAAsB,CAE7B,gBAAgBpjB,CAAT,CAAW9D,MAAX,CAAmB,KAAK8D,CAAxB,GAA+BojB,SAASrrB,CAAT,CAAWmE,MAAX,CAAmB,KAAKnE,CAAxB,CAA/B,EAA8DqrB,SAASjnB,CAAT,CAAWD,MAAX,CAAmB,KAAKC,CAAxB,CAArE,CAEA,CA5JyB,CAA3B;;;;;;;;;;;;;;;;;;;;;IAwLA9N,MAAMq1B,WAAN,CAAoB,SAClBC,kBADkB,CACEC,YADF,CACgBC,UADhB,CAC4BC,YAD5B,CAC2C,CAE9D,KAAKH,kBAAL,CAA0BA,kBAA1B,CACA,KAAKI,YAAL,CAAoB,CAApB,CAEA,KAAKD,YAAL,CAAoBA,eAAiBt1B,SAAjB,CAClBs1B,YADkB,CACH,iBAAiB5rB,WAAjB,CAA8B2rB,UAA9B,CADjB,CAEA,KAAKD,YAAL,CAAoBA,YAApB,CACA,KAAKI,SAAL,CAAiBH,UAAjB,CAEA,CAXD,CAaAx1B,MAAMq1B,WAAN,CAAkB50B,SAAlB,CAA8B,CAE7BoJ,YAAa7J,MAAMq1B,WAFU,CAI7BO,SAAU,kBAAUnrB,CAAV,CAAc,CAEvB,OAAS,KAAK6qB,kBAAd,CACCT,GAAK,KAAKa,YADX,CAGCjL,GAAKoL,GAAMhB,EAAN,CAHN,CAICrK,GAAKqL,GAAIhB,GAAK,CAAT,CAJN,CAMAiB,kBAAmB,CAElBC,KAAM,CAEL,SAAA,CAEAC,YAAa;;;;CAKZC,aAAc,GAAK,EAAIxrB,EAAIggB,EAAR,CAAL,CAAoB,CAEjC,IAAM,aAAeoK,GAAK,CAA1B,GAAgC,CAE/B,GAAKpK,KAAOtqB,SAAZ,CAAwB,CAEvB,GAAKsK,EAAI+f,EAAT,CAAc,kBAAA;CAIdqK,GAAKgB,GAAGz0B,MAAR,CACA,KAAKs0B,YAAL,CAAoBb,EAApB,CACA,YAAYqB,SAAL,CAAgBrB,GAAK,CAArB,CAAwBpqB,CAAxB,CAA2B+f,EAA3B,CAAP,CAEA,CAED,GAAKqK,KAAOsB,QAAZ,CAAuB;CAEvB3L,GAAKC,EAAL,CACAA,GAAKoL,GAAI,EAAGhB,EAAP,CAAL,CAEA,GAAKpqB,EAAIggB,EAAT,CAAc;CAGb,UAAA,CAEA,CAED;CAGD3C,MAAQ+N,GAAGz0B,MAAX,CACA,iBAAA,CAEA;;CAID,GAAK,EAAIqJ,GAAK+f,EAAT,CAAL,CAAqB;CAIpB,aAAeqL,GAAI,CAAJ,CAAf,CAEA,GAAKprB,EAAI2rB,QAAT,CAAoB,CAEnBvB,GAAK,CAAL;CACArK,GAAK4L,QAAL,CAEA;CAID,IAAM,aAAevB,GAAK,CAA1B,GAAgC,CAE/B,GAAKrK,KAAOrqB,SAAZ,CAAwB;CAIvB,KAAKu1B,YAAL,CAAoB,CAApB,CACA,YAAYW,YAAL,CAAmB,CAAnB,CAAsB5rB,CAAtB,CAAyBggB,EAAzB,CAAP,CAEA,CAED,GAAKoK,KAAOsB,QAAZ,CAAuB;CAEvB1L,GAAKD,EAAL,CACAA,GAAKqL,GAAI,EAAGhB,EAAH,CAAQ,CAAZ,CAAL,CAEA,GAAKpqB,GAAK+f,EAAV,CAAe;CAGd,UAAA,CAEA,CAED;CAGD1C,MAAQ+M,EAAR,CACAA,GAAK,CAAL,CACA,iBAAA,CAEA;CAID,uBAAA,CAEA;;CAID,MAAQA,GAAK/M,KAAb,CAAqB,CAEpB,QAAY+M,GAAK/M,KAAP,GAAmB,CAA7B,CAEA,GAAKrd,EAAIorB,GAAIS,GAAJ,CAAT,CAAqB,CAEpBxO,MAAQwO,GAAR,CAEA,CAJD,IAIO,CAENzB,GAAKyB,IAAM,CAAX,CAEA,CAED,CAED7L,GAAKoL,GAAMhB,EAAN,CAAL,CACArK,GAAKqL,GAAIhB,GAAK,CAAT,CAAL;CAIA,GAAKrK,KAAOrqB,SAAZ,CAAwB,CAEvB,KAAKu1B,YAAL,CAAoB,CAApB,CACA,YAAYW,YAAL,CAAmB,CAAnB,CAAsB5rB,CAAtB,CAAyBggB,EAAzB,CAAP,CAEA,CAED,GAAKA,KAAOtqB,SAAZ,CAAwB,CAEvB00B,GAAKgB,GAAGz0B,MAAR,CACA,KAAKs0B,YAAL,CAAoBb,EAApB,CACA,YAAYqB,SAAL,CAAgBrB,GAAK,CAArB,CAAwBrK,EAAxB,CAA4B/f,CAA5B,CAAP,CAEA,CAED;CAED,KAAKirB,YAAL,CAAoBb,EAApB,CAEA,KAAK0B,gBAAL,CAAuB1B,EAAvB,CAA2BrK,EAA3B,CAA+BC,EAA/B,EAEA;CAED,YAAY+L,YAAL,CAAmB3B,EAAnB,CAAuBrK,EAAvB,CAA2B/f,CAA3B,CAA8BggB,EAA9B,CAAP,CAEA,CAlK4B,CAoK7BgM,SAAU,IApKmB;;;CAyK7BC,iBAAkB,EAzKW,CA2K7BC,aAAc,uBAAW,CAExB,YAAYF,QAAL,EAAiB,KAAKC,gBAA7B,CAEA,CA/K4B,CAiL7BE,iBAAkB,0BAAU11B,KAAV,CAAkB;CAInC,WAAa,KAAKu0B,YAAlB,CACCoB,OAAS,KAAKtB,YADf,CAECuB,OAAS,KAAKnB,SAFf,CAGC1nB,OAAS/M,MAAQ41B,MAHlB,CAKA,IAAM,MAAQ,CAAd,CAAiBja,IAAMia,MAAvB,CAA+B,EAAGja,CAAlC,CAAsC,CAErCf,OAAQe,CAAR,EAAcga,OAAQ5oB,OAAS4O,CAAjB,CAAd,CAEA,CAED,aAAA,CAEA,CAlM4B;CAsM7B2Z,aAAc,sBAAU3B,EAAV,CAAcrK,EAAd,CAAkB/f,CAAlB,CAAqBggB,EAArB,CAA0B,CAEvC,eAAM,CAAW,yBAAX,CAAN;CAGA,CA3M4B,CA6M7B8L,iBAAkB,0BAAU1B,EAAV,CAAcrK,EAAd,CAAkBC,EAAlB,CAAuB;CAIxC,CAjN4B,CAA9B,CAqNA9pB,OAAOK,MAAP,CAAehB,MAAMq1B,WAAN,CAAkB50B,SAAjC,CAA4C,CAE3C41B;CACCr2B,MAAMq1B,WAAN,CAAkB50B,SAAlB,CAA4Bm2B,gBAHc,CAK3CV;CACCl2B,MAAMq1B,WAAN,CAAkB50B,SAAlB,CAA4Bm2B,gBANc,CAA5C;;;;;;;;;IAsBA52B,MAAM+2B,gBAAN,CAAyB,SACvBzB,kBADuB,CACHC,YADG,CACWC,UADX,CACuBC,YADvB,CACsC,CAE9Dz1B,MAAMq1B,WAAN,CAAkB9zB,IAAlB,CACE,IADF,CACQ+zB,kBADR,CAC4BC,YAD5B,CAC0CC,UAD1C,CACsDC,YADtD,EAGA,KAAKuB,WAAL,CAAmB,CAAC,CAApB,CACA,KAAKC,WAAL,CAAmB,CAAC,CAApB,CACA,KAAKC,WAAL,CAAmB,CAAC,CAApB,CACA,KAAKC,WAAL,CAAmB,CAAC,CAApB,CAEA,CAXD,CAaAn3B,MAAM+2B,gBAAN,CAAuBt2B,SAAvB,CACEE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMq1B,WAAN,CAAkB50B,SAAjC,CAAf,CAA6D,CAE9DoJ,YAAa7J,MAAM+2B,gBAF2C,CAI9DL,iBAAkB,CAEjBW,YAAcr3B,MAAMuI,mBAFH,CAGjB+uB,UAAYt3B,MAAMuI,mBAHD,CAJ4C,CAW9DguB,iBAAkB,0BAAU1B,EAAV,CAAcrK,EAAd,CAAkBC,EAAlB,CAAuB,CAExC,OAAS,KAAK6K,kBAAd,CACCiC,MAAQ1C,GAAK,CADd,CAEC2C,MAAQ3C,GAAK,CAFd,CAIC4C,MAAQ5B,GAAI0B,KAAJ,CAJT,CAKCG,MAAQ7B,GAAI2B,KAAJ,CALT,CAOA,GAAKC,QAAUt3B,SAAf,CAA2B,CAE1B,OAAS,KAAKw2B,YAAL,GAAoBU,WAA7B,EAEC,WAAW7uB,eAAX;CAGC+uB,MAAQ1C,EAAR,CACA4C,MAAQ,EAAIjN,EAAJ,CAASC,EAAjB,CAEA,MAED,WAAWhiB,gBAAX;CAGC8uB,MAAQ1B,GAAGz0B,MAAH,CAAY,CAApB,CACAq2B,MAAQjN,GAAKqL,GAAI0B,KAAJ,CAAL,CAAmB1B,GAAI0B,MAAQ,CAAZ,CAA3B,CAEA,MAED;;CAGCA,MAAQ1C,EAAR,CACA4C,MAAQhN,EAAR,CAtBF,CA0BA,CAED,GAAKiN,QAAUv3B,SAAf,CAA2B,CAE1B,OAAS,KAAKw2B,YAAL,GAAoBW,SAA7B,EAEC,WAAW9uB,eAAX;CAGCgvB,MAAQ3C,EAAR,CACA6C,MAAQ,EAAIjN,EAAJ,CAASD,EAAjB,CAEA,MAED,WAAW/hB,gBAAX;CAGC+uB,MAAQ,CAAR,CACAE,MAAQjN,GAAKoL,GAAI,CAAJ,CAAL,CAAeA,GAAI,CAAJ,CAAvB,CAEA,MAED;;CAGC2B,MAAQ3C,GAAK,CAAb,CACA6C,MAAQlN,EAAR,CAtBF,CA0BA,CAED,WAAa,CAAEC,GAAKD,EAAP,EAAc,GAA3B,CACCsM,OAAS,KAAKnB,SADf,CAGA,KAAKqB,WAAL,CAAmBW,QAAWnN,GAAKiN,KAAhB,CAAnB,CACA,KAAKP,WAAL,CAAmBS,QAAWD,MAAQjN,EAAnB,CAAnB,CACA,KAAKwM,WAAL,CAAmBM,MAAQT,MAA3B,CACA,KAAKK,WAAL,CAAmBK,MAAQV,MAA3B,CAEA,CAxF6D,CA0F9DN,aAAc,sBAAU3B,EAAV,CAAcrK,EAAd,CAAkB/f,CAAlB,CAAqBggB,EAArB,CAA0B,CAEvC,WAAa,KAAKgL,YAAlB,CACCoB,OAAS,KAAKtB,YADf,CAECuB,OAAS,KAAKnB,SAFf,CAICiC,GAAK/C,GAAKiC,MAJX,CAIoBe,GAAKD,GAAKd,MAJ9B,CAKCgB,GAAK,KAAKb,WALX,CAKyBc,GAAK,KAAKZ,WALnC,CAMCa,GAAK,KAAKhB,WANX,CAMwBiB,GAAK,KAAKf,WANlC,CAQC3sB,EAAI,CAAEE,EAAI+f,EAAN,GAAeC,GAAKD,EAApB,CARL,CASCqL,GAAKtrB,EAAIA,CATV,CAUC2tB,IAAMrC,GAAKtrB,CAVZ;CAcA,OAAa,CAAEytB,EAAF,CAASE,GAAT,CAAyB,EAAIF,EAAJ,CAAYnC,EAArC,CAAsDmC,GAAOztB,CAA1E,CACA,OAAS,CAAE,EAAIytB,EAAN,EAAaE,GAAb,CAAqB,CAAC,CAAC,GAAD,CAAO,EAAIF,EAAZ,EAAoBnC,EAAzC,CAAiD,CAAE,CAAC,GAAD,CAAOmC,EAAT,EAAgBztB,CAAjE,CAAyE,CAAlF,CACA,OAAS,CAAC,CAAC,CAAD,CAAK0tB,EAAN,EAAaC,GAAb,CAAqB,CAAE,IAAQD,EAAV,EAAoBpC,EAAzC,CAAoD,IAAatrB,CAA1E,CACA,OAAe0tB,GAAOC,GAAP,CAAyBD,GAAUpC,EAAlD;CAIA,IAAM,MAAQ,CAAd,CAAiBhZ,IAAMia,MAAvB,CAA+B,EAAGja,CAAlC,CAAsC,CAErCf,OAAQe,CAAR,EACEsb,GAAKtB,OAAQiB,GAAKjb,CAAb,CAAL,CACAiN,GAAK+M,OAAQgB,GAAKhb,CAAb,CADL,CAEAzN,GAAKynB,OAAQe,GAAK/a,CAAb,CAFL,CAGAub,GAAKvB,OAAQkB,GAAKlb,CAAb,CAJP,CAMA,CAED,aAAA,CAEA,CA7H6D,CAA7D,CADF;;;;;;;IA4IA7c,MAAMq4B,mBAAN,CAA4B,SAC1B/C,kBAD0B,CACNC,YADM,CACQC,UADR,CACoBC,YADpB,CACmC,CAE9Dz1B,MAAMq1B,WAAN,CAAkB9zB,IAAlB,CACE,IADF,CACQ+zB,kBADR,CAC4BC,YAD5B,CAC0CC,UAD1C,CACsDC,YADtD,EAGA,CAND,CAQAz1B,MAAMq4B,mBAAN,CAA0B53B,SAA1B,CACEE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMq1B,WAAN,CAAkB50B,SAAjC,CAAf,CAA6D,CAE9DoJ,YAAa7J,MAAMq4B,mBAF2C,CAI9D7B,aAAc,sBAAU3B,EAAV,CAAcrK,EAAd,CAAkB/f,CAAlB,CAAqBggB,EAArB,CAA0B,CAEvC,YAAYmM,gBAAL,CAAuB/B,GAAK,CAA5B,CAAP,CAEA,CAR6D,CAA7D,CADF;;;IAmBA70B,MAAMs4B,iBAAN,CAA0B,SACxBhD,kBADwB,CACJC,YADI,CACUC,UADV,CACsBC,YADtB,CACqC,CAE9Dz1B,MAAMq1B,WAAN,CAAkB9zB,IAAlB,CACE,IADF,CACQ+zB,kBADR,CAC4BC,YAD5B,CAC0CC,UAD1C,CACsDC,YADtD,EAGA,CAND,CAQAz1B,MAAMs4B,iBAAN,CAAwB73B,SAAxB,CACEE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMq1B,WAAN,CAAkB50B,SAAjC,CAAf,CAA6D,CAE9DoJ,YAAa7J,MAAMs4B,iBAF2C,CAI9D9B,aAAc,sBAAU3B,EAAV,CAAcrK,EAAd,CAAkB/f,CAAlB,CAAqBggB,EAArB,CAA0B,CAEvC,WAAa,KAAKgL,YAAlB,CACCoB,OAAS,KAAKtB,YADf,CAECuB,OAAS,KAAKnB,SAFf,CAIC4C,QAAU1D,GAAKiC,MAJhB,CAKC0B,QAAUD,QAAUzB,MALrB,CAOC2B,QAAU,CAAEhuB,EAAI+f,EAAN,GAAeC,GAAKD,EAApB,CAPX,CAQCkO,QAAU,EAAID,OARf,CAUA,IAAM,MAAQ,CAAd,CAAiB5b,IAAMia,MAAvB,CAA+B,EAAGja,CAAlC,CAAsC,CAErCf,OAAQe,CAAR,EACEga,OAAQ2B,QAAU3b,CAAlB,EAAwB6b,OAAxB,CACA7B,OAAQ0B,QAAU1b,CAAlB,EAAwB4b,OAF1B,CAIA,CAED,aAAA,CAEA,CA1B6D,CAA7D,CADF;;;;;IAuCAz4B,MAAM24B,2BAAN,CAAoC,SAClCrD,kBADkC,CACdC,YADc,CACAC,UADA,CACYC,YADZ,CAC2B,CAE9Dz1B,MAAMq1B,WAAN,CAAkB9zB,IAAlB,CACE,IADF,CACQ+zB,kBADR,CAC4BC,YAD5B,CAC0CC,UAD1C,CACsDC,YADtD,EAGA,CAND,CAQAz1B,MAAM24B,2BAAN,CAAkCl4B,SAAlC,CACEE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMq1B,WAAN,CAAkB50B,SAAjC,CAAf,CAA6D,CAE9DoJ,YAAa7J,MAAM24B,2BAF2C,CAI9DnC,aAAc,sBAAU3B,EAAV,CAAcrK,EAAd,CAAkB/f,CAAlB,CAAqBggB,EAArB,CAA0B,CAEvC,WAAa,KAAKgL,YAAlB,CACCoB,OAAS,KAAKtB,YADf,CAECuB,OAAS,KAAKnB,SAFf,CAIC1nB,OAAS4mB,GAAKiC,MAJf,CAMClpB,MAAQ,CAAEnD,EAAI+f,EAAN,GAAeC,GAAKD,EAApB,CANT,CAQA,IAAM,QAAUvc,OAAS6oB,MAAzB,CAAiC7oB,SAAWwN,GAA5C,CAAiDxN,QAAU,CAA3D,CAA+D,CAE9DjO,MAAMmO,UAAN,CAAiB6E,SAAjB,CAA4B8I,MAA5B,CAAoC,CAApC,CACE+a,MADF,CACU5oB,OAAS6oB,MADnB,CAC2BD,MAD3B,CACmC5oB,MADnC,CAC2CL,KAD3C,EAGA,CAED,aAAA,CAEA,CAvB6D,CAA7D,CADF;;;IAkCA5N,MAAM44B,KAAN,CAAc,SAAWC,SAAX,CAAuB,CAEpC,KAAKA,SAAL,CAAmBA,YAAc14B,SAAhB,CAA8B04B,SAA9B,CAA0C,IAA3D,CAEA,KAAKC,SAAL,CAAiB,CAAjB,CACA,KAAKC,OAAL,CAAe,CAAf,CACA,KAAKC,WAAL,CAAmB,CAAnB,CAEA,KAAKC,OAAL,CAAe,KAAf,CAEA,CAVD,CAYAj5B,MAAM44B,KAAN,CAAYn4B,SAAZ,CAAwB,CAEvBoJ,YAAa7J,MAAM44B,KAFI,CAIvBpd,MAAO,gBAAY,CAElB,KAAKsd,SAAL,CAAiB,CAAEI,aAAeC,IAAjB,EAAwBC,GAAxB,EAAjB,CAEA,KAAKL,OAAL,CAAe,KAAKD,SAApB,CACA,KAAKG,OAAL,CAAe,IAAf,CAEA,CAXsB,CAavBI,KAAM,eAAY,CAEjB,KAAKC,cAAL,GACA,KAAKL,OAAL,CAAe,KAAf,CAEA,CAlBsB,CAoBvBK,eAAgB,yBAAY,CAE3B,KAAKC,QAAL,GACA,YAAYP,WAAZ,CAEA,CAzBsB,CA2BvBO,SAAU,mBAAY,CAErB,SAAW,CAAX,CAEA,GAAK,KAAKV,SAAL,EAAkB,CAAE,KAAKI,OAA9B,CAAwC,CAEvC,KAAKzd,KAAL,GAEA,CAED,GAAK,KAAKyd,OAAV,CAAoB,CAEnB,YAAc,CAAEC,aAAeC,IAAjB,EAAwBC,GAAxB,EAAd,CAEA1P,KAAO,CAAE8P,QAAU,KAAKT,OAAjB,EAA6B,IAApC,CACA,KAAKA,OAAL,CAAeS,OAAf,CAEA,KAAKR,WAAL,EAAoBtP,IAApB,CAEA,CAED,WAAA,CAEA,CAlDsB,CAAxB;;;IA4DA1pB,MAAMy5B,eAAN,CAAwB,UAAY,EAApC,CAEA94B,OAAOK,MAAP,CAAehB,MAAMy5B,eAAN,CAAsBh5B,SAArC,CAAgD,CAE/Ci5B,iBAAkB,0BAAWC,IAAX,CAAiBC,QAAjB,CAA4B,CAE7C,GAAK,KAAKC,UAAL,GAAoB15B,SAAzB,CAAqC,KAAK05B,UAAL,CAAkB,EAAlB,CAErC,cAAgB,KAAKA,UAArB,CAEA,GAAKC,UAAWH,IAAX,IAAsBx5B,SAA3B,CAAuC,CAEtC25B,UAAWH,IAAX,EAAoB,EAApB,CAEA,CAED,GAAKG,UAAWH,IAAX,EAAkBI,OAAlB,CAA2BH,QAA3B,IAA0C,CAAE,CAAjD,CAAqD,CAEpDE,UAAWH,IAAX,EAAkB9F,IAAlB,CAAwB+F,QAAxB,EAEA,CAED,CApB8C,CAsB/CI,iBAAkB,0BAAWL,IAAX,CAAiBC,QAAjB,CAA4B,CAE7C,GAAK,KAAKC,UAAL,GAAoB15B,SAAzB,CAAqC,YAAA,CAErC,cAAgB,KAAK05B,UAArB,CAEA,GAAKC,UAAWH,IAAX,IAAsBx5B,SAAtB,EAAmC25B,UAAWH,IAAX,EAAkBI,OAAlB,CAA2BH,QAA3B,IAA0C,CAAE,CAApF,CAAwF,CAEvF,WAAA,CAEA,CAED,YAAA,CAEA,CApC8C,CAsC/CK,oBAAqB,6BAAWN,IAAX,CAAiBC,QAAjB,CAA4B,CAEhD,GAAK,KAAKC,UAAL,GAAoB15B,SAAzB,CAAqC,OAErC,cAAgB,KAAK05B,UAArB,CACA,kBAAoBC,UAAWH,IAAX,CAApB,CAEA,GAAKO,gBAAkB/5B,SAAvB,CAAmC,CAElC,UAAY+5B,cAAcH,OAAd,CAAuBH,QAAvB,CAAZ,CAEA,GAAK14B,QAAU,CAAE,CAAjB,CAAqB,CAEpBg5B,cAAcC,MAAd,CAAsBj5B,KAAtB,CAA6B,CAA7B,EAEA,CAED,CAED,CAzD8C,CA2D/Ck5B,cAAe,uBAAWC,KAAX,CAAmB,CAEjC,GAAK,KAAKR,UAAL,GAAoB15B,SAAzB,CAAqC,OAErC,cAAgB,KAAK05B,UAArB,CACA,kBAAoBC,UAAWO,MAAMV,IAAjB,CAApB,CAEA,GAAKO,gBAAkB/5B,SAAvB,CAAmC,CAElCk6B,MAAMp5B,MAAN,CAAe,IAAf,CAEA,UAAY,EAAZ,CAAgB4b,EAAI,CAApB,CACA,WAAaqd,cAAc94B,MAA3B,CAEA,IAAMyb,EAAI,CAAV,CAAaA,EAAIzb,MAAjB,CAAyByb,GAAzB,CAAgC,CAE/B7O,MAAO6O,CAAP,EAAaqd,cAAerd,CAAf,CAAb,CAEA,CAED,IAAMA,EAAI,CAAV,CAAaA,EAAIzb,MAAjB,CAAyByb,GAAzB,CAAgC,CAE/B7O,MAAO6O,CAAP,EAAWtb,IAAX,CAAiB,IAAjB,CAAuB84B,KAAvB,EAEA,CAED,CAED,CAvF8C,CAAhD;;;IAiGAr6B,MAAMs6B,MAAN,CAAe,UAAY,CAE1B,KAAKC,IAAL,CAAY,CAAZ,CAEA,CAJD,CAMAv6B,MAAMs6B,MAAN,CAAa75B,SAAb,CAAyB,CAExBoJ,YAAa7J,MAAMs6B,MAFK,CAIxB3wB,IAAK,aAAW6wB,OAAX,CAAqB,CAEzB,KAAKD,IAAL,CAAY,GAAKC,OAAjB,CAEA,CARuB,CAUxBC,OAAQ,gBAAWD,OAAX,CAAqB,CAE5B,KAAKD,IAAL,EAAa,GAAKC,OAAlB,CAEA,CAduB,CAgBxBE,OAAQ,gBAAWF,OAAX,CAAqB,CAE5B,KAAKD,IAAL,EAAa,GAAKC,OAAlB,CAEA,CApBuB,CAsBxBG,QAAS,iBAAWH,OAAX,CAAqB,CAE7B,KAAKD,IAAL,EAAa,EAAI,GAAKC,OAAT,CAAb,CAEA,CA1BuB,CA4BxBI,KAAM,cAAWC,MAAX,CAAoB,CAEzB,OAAO,CAAE,KAAKN,IAAL,CAAYM,OAAON,IAArB,IAAgC,CAAvC,CAEA,CAhCuB,CAAzB;;;;;IA4CE,UAAWv6B,KAAX,CAAmB,CAEpBA,MAAM86B,SAAN,CAAkB,SAAWhS,MAAX,CAAmBC,SAAnB,CAA8Bd,IAA9B,CAAoCC,GAApC,CAA0C,CAE3D,KAAKc,GAAL,CAAW,UAAUH,GAAV,CAAeC,MAAf,CAAuBC,SAAvB,CAAX;CAGA,KAAKd,IAAL,CAAYA,MAAQ,CAApB,CACA,KAAKC,GAAL,CAAWA,KAAO1L,QAAlB,CAEA,KAAKue,MAAL,CAAc,CACbC,KAAM,EADO,CAEbC,KAAM,EAFO,CAGbC,IAAK,EAHQ,CAIbC,OAAQ,CAAEC,UAAW,CAAb,CAJK,CAKbC,OAAQ,EALK,CAAd,CAQA16B,OAAO26B,gBAAP,CAAyB,KAAKP,MAA9B,CAAsC,CACrCQ,WAAY,CACX16B,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,uEAAd,EACA,YAAY+vB,MAAZ,CACA,CAJU,CADyB,CAAtC,EASA,CAzBD,CA2BA,gBAAA,CAAkBxpB,CAAlB,CAAqBjI,CAArB,CAAyB,CAExB,SAASkS,QAAF,CAAalS,EAAEkS,QAAtB,CAEA,CAED,yBAAA,CAA0B2C,MAA1B,CAAkCid,SAAlC,CAA6CC,UAA7C,CAAyDC,SAAzD,CAAqE,CAEpE,GAAKnd,OAAOod,OAAP,GAAmB,KAAxB,CAAgC,OAEhCpd,OAAOqd,OAAP,CAAgBJ,SAAhB,CAA2BC,UAA3B,EAEA,GAAKC,YAAc,IAAnB,CAA0B,CAEzB,aAAend,OAAOsd,QAAtB,CAEA,IAAM,MAAQ,CAAR,CAAWjxB,EAAIixB,SAASz6B,MAA9B,CAAsCyb,EAAIjS,CAA1C,CAA6CiS,GAA7C,CAAoD,CAEnDif,iBAAiBD,SAAUhf,CAAV,CAAjB,CAAgC2e,SAAhC,CAA2CC,UAA3C,CAAuD,IAAvD,EAEA,CAED,CAED;CAIDz7B,MAAM86B,SAAN,CAAgBr6B,SAAhB,CAA4B,CAE3BoJ,YAAa7J,MAAM86B,SAFQ,CAI3BiB,cAAe,CAJY,CAM3BpyB,IAAK,aAAWmf,MAAX,CAAmBC,SAAnB,CAA+B;CAInC,KAAKC,GAAL,CAASrf,GAAT,CAAcmf,MAAd,CAAsBC,SAAtB,EAEA,CAZ0B,CAc3BiT,cAAe,uBAAWtJ,MAAX,CAAmB/a,MAAnB,CAA4B,CAE1C,GAAKA,wBAAwBskB,iBAA7B,CAAiD,CAEhD,KAAKjT,GAAL,CAASF,MAAT,CAAgBrP,qBAAhB,CAAuC9B,OAAOM,WAA9C,EACA,KAAK+Q,GAAL,CAASD,SAAT,CAAmBpf,GAAnB,CAAwB+oB,OAAOnyB,CAA/B,CAAkCmyB,OAAOtkB,CAAzC,CAA4C,GAA5C,EAAkD8J,SAAlD,CAA6DP,MAA7D,EAAsEhD,GAAtE,CAA2E,KAAKqU,GAAL,CAASF,MAApF,EAA6F1X,SAA7F,GAEA,CALD,QAKYuG,wBAAwBukB,kBAA7B,CAAkD,CAExD,KAAKlT,GAAL,CAASF,MAAT,CAAgBnf,GAAhB,CAAqB+oB,OAAOnyB,CAA5B,CAA+BmyB,OAAOtkB,CAAtC,CAAyC,CAAE,CAA3C,EAA+C8J,SAA/C,CAA0DP,MAA1D,EACA,KAAKqR,GAAL,CAASD,SAAT,CAAmBpf,GAAnB,CAAwB,CAAxB,CAA2B,CAA3B,CAA8B,CAAE,CAAhC,EAAoCwO,kBAApC,CAAwDR,OAAOM,WAA/D,EAEA,CALM,IAKA,CAEN9M,QAAQuL,KAAR,CAAe,2CAAf,EAEA,CAED,CAhC0B,CAkC3BolB,gBAAiB,yBAAWvd,MAAX,CAAmBmd,SAAnB,CAA+B,CAE/C,eAAiB,EAAjB,CAEAI,iBAAiBvd,MAAjB,CAAyB,IAAzB,CAA+Bkd,UAA/B,CAA2CC,SAA3C,EAEAD,WAAWU,IAAX,CAAiBC,OAAjB,EAEA,iBAAA,CAEA,CA5C0B,CA8C3BC,iBAAkB,0BAAWC,OAAX,CAAoBZ,SAApB,CAAgC,CAEjD,eAAiB,EAAjB,CAEA,GAAKa,MAAMC,OAAN,CAAeF,OAAf,IAA6B,KAAlC,CAA0C,CAEzCnxB,QAAQC,IAAR,CAAc,4DAAd,EACA,iBAAA,CAEA,CAED,IAAM,MAAQ,CAAR,CAAWR,EAAI0xB,QAAQl7B,MAA7B,CAAqCyb,EAAIjS,CAAzC,CAA4CiS,GAA5C,CAAmD,CAElDif,iBAAiBQ,QAASzf,CAAT,CAAjB,CAA+B,IAA/B,CAAqC4e,UAArC,CAAiDC,SAAjD,EAEA,CAEDD,WAAWU,IAAX,CAAiBC,OAAjB,EAEA,iBAAA,CAEA,CAnE0B,CAA5B,CAuEA,CAhIC,EAgICp8B,KAhID,CAAF;;;;;;;IA4IAA,MAAMy8B,QAAN,CAAiB,UAAY,CAE5B97B,OAAOC,cAAP,CAAuB,IAAvB,CAA6B,IAA7B,CAAmC,CAAEkJ,MAAO9J,MAAM08B,eAAN,EAAT,CAAnC,EAEA,KAAK1M,IAAL,CAAYhwB,MAAMI,IAAN,CAAW0vB,YAAX,EAAZ,CAEA,KAAKpvB,IAAL,CAAY,EAAZ,CACA,KAAKi5B,IAAL,CAAY,UAAZ,CAEA,KAAKgD,MAAL,CAAc,IAAd,CACA,KAAKd,QAAL,CAAgB,EAAhB,CAEA,KAAK1X,EAAL,CAAUnkB,MAAMy8B,QAAN,CAAeG,SAAf,CAAyB7wB,KAAzB,EAAV,CAEA,aAAe,UAAUgF,OAAV,EAAf,CACA,aAAe,UAAU/B,KAAV,EAAf,CACA,eAAiB,UAAUb,UAAV,EAAjB,CACA,UAAY,UAAU4C,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAAZ,CAEA,yBAAA,EAA4B,CAE3BnC,WAAWC,YAAX,CAAyBguB,QAAzB,CAAmC,KAAnC,EAEA,CAED,2BAAA,EAA8B,CAE7BA,SAAS7hB,iBAAT,CAA4BpM,UAA5B,CAAwCzO,SAAxC,CAAmD,KAAnD,EAEA,CAED08B,SAASjqB,QAAT,CAAmBkqB,gBAAnB,EACAluB,WAAWgE,QAAX,CAAqBmqB,kBAArB,EAEAp8B,OAAO26B,gBAAP,CAAyB,IAAzB,CAA+B,CAC9B/T,SAAU,CACTyV,WAAY,IADH,CAETlzB,MAAOyd,QAFE,CADoB,CAK9BsV,SAAU,CACTG,WAAY,IADH,CAETlzB,MAAO+yB,QAFE,CALoB,CAS9BjuB,WAAY,CACXouB,WAAY,IADD,CAEXlzB,MAAO8E,UAFI,CATkB,CAa9B6X,MAAO,CACNuW,WAAY,IADN,CAENlzB,MAAO2c,KAFD,CAbuB,CAiB9BwW,gBAAiB,CAChBnzB,MAAO,UAAU+N,OAAV,EADS,CAjBa,CAoB9B0X,aAAc,CACbzlB,MAAO,UAAU4V,OAAV,EADM,CApBgB,CAA/B,EAyBA,KAAK9H,MAAL,CAAc,UAAUC,OAAV,EAAd,CACA,KAAKI,WAAL,CAAmB,UAAUJ,OAAV,EAAnB,CAEA,KAAKqlB,gBAAL,CAAwBl9B,MAAMy8B,QAAN,CAAeU,uBAAvC,CACA,KAAKC,sBAAL,CAA8B,KAA9B,CAEA,KAAKvC,MAAL,CAAc,UAAUP,MAAV,EAAd,CACA,KAAKqB,OAAL,CAAe,IAAf,CAEA,KAAK0B,UAAL,CAAkB,KAAlB,CACA,KAAKC,aAAL,CAAqB,KAArB,CAEA,KAAKC,aAAL,CAAqB,IAArB,CACA,KAAKC,WAAL,CAAmB,CAAnB,CAEA,KAAKC,QAAL,CAAgB,EAAhB,CAEA,CA5ED,CA8EAz9B,MAAMy8B,QAAN,CAAeG,SAAf,CAA2B,UAAU7rB,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAA3B,CACA/Q,MAAMy8B,QAAN,CAAeU,uBAAf,CAAyC,IAAzC,CAEAx8B,OAAOK,MAAP,CAAehB,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAyCT,MAAMy5B,eAAN,CAAsBh5B,SAA/D,CAA0E,CAEzEi9B,YAAa,qBAAW9lB,MAAX,CAAoB,CAEhC,KAAKA,MAAL,CAAYE,gBAAZ,CAA8BF,MAA9B,CAAsC,KAAKA,MAA3C,EAEA,KAAKA,MAAL,CAAY4P,SAAZ,CAAuB,KAAKD,QAA5B,CAAsC,KAAK3Y,UAA3C,CAAuD,KAAK6X,KAA5D,EAEA,CARwE,CAUzEkX,yBAA0B,kCAAWhuB,IAAX,CAAiBC,KAAjB,CAAyB;CAIlD,KAAKhB,UAAL,CAAgBc,gBAAhB,CAAkCC,IAAlC,CAAwCC,KAAxC,EAEA,CAhBwE,CAkBzEguB,qBAAsB,8BAAW9uB,KAAX,CAAmB,CAExC,KAAKF,UAAL,CAAgBC,YAAhB,CAA8BC,KAA9B,CAAqC,IAArC,EAEA,CAtBwE,CAwBzE+uB,sBAAuB,+BAAWxyB,CAAX,CAAe;CAIrC,KAAKuD,UAAL,CAAgBkB,qBAAhB,CAAuCzE,CAAvC,EAEA,CA9BwE,CAgCzEyyB,0BAA2B,mCAAWtzB,CAAX,CAAe;CAIzC,KAAKoE,UAAL,CAAgB7E,IAAhB,CAAsBS,CAAtB,EAEA,CAtCwE,CAwCzEuzB,aAAc,UAAY;;CAKzB,OAAS,UAAU5vB,UAAV,EAAT,CAEA,gBAAkBwB,IAAX,CAAiBC,KAAjB,CAAyB,CAE/BouB,GAAGtuB,gBAAH,CAAqBC,IAArB,CAA2BC,KAA3B,EAEA,KAAKhB,UAAL,CAAgBnB,QAAhB,CAA0BuwB,EAA1B,EAEA,WAAA,CAEA,CARD,CAUA,CAjBa,EAxC2D,CA2DzEC,QAAS,UAAY,CAEpB,OAAS,UAAUltB,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAAT,CAEA,gBAAkBnB,KAAX,CAAmB,CAEzB,YAAYmuB,YAAL,CAAmBjtB,EAAnB,CAAuBlB,KAAvB,CAAP,CAEA,CAJD,CAMA,CAVQ,EA3DgE,CAuEzEsuB,QAAS,UAAY,CAEpB,OAAS,UAAUntB,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAAT,CAEA,gBAAkBnB,KAAX,CAAmB,CAEzB,YAAYmuB,YAAL,CAAmBjtB,EAAnB,CAAuBlB,KAAvB,CAAP,CAEA,CAJD,CAMA,CAVQ,EAvEgE,CAmFzEuuB,QAAS,UAAY,CAEpB,OAAS,UAAUptB,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAAT,CAEA,gBAAkBnB,KAAX,CAAmB,CAEzB,YAAYmuB,YAAL,CAAmBjtB,EAAnB,CAAuBlB,KAAvB,CAAP,CAEA,CAJD,CAMA,CAVQ,EAnFgE,CA+FzEwuB,gBAAiB,UAAY;;CAK5B,OAAS,UAAUrtB,OAAV,EAAT,CAEA,gBAAkBpB,IAAX,CAAiBiM,QAAjB,CAA4B,CAElC9K,GAAG/G,IAAH,CAAS4F,IAAT,EAAgBgH,eAAhB,CAAiC,KAAK/H,UAAtC,EAEA,KAAK2Y,QAAL,CAAcna,GAAd,CAAmB0D,GAAGpD,cAAH,CAAmBkO,QAAnB,CAAnB,EAEA,WAAA,CAEA,CARD,CAUA,CAjBgB,EA/FwD,CAkHzEyiB,WAAY,UAAY,CAEvB,OAAS,UAAUttB,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAAT,CAEA,gBAAkB6K,QAAX,CAAsB,CAE5B,YAAYwiB,eAAL,CAAsBttB,EAAtB,CAA0B8K,QAA1B,CAAP,CAEA,CAJD,CAMA,CAVW,EAlH6D,CA8HzE0iB,WAAY,UAAY,CAEvB,OAAS,UAAUvtB,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAAT,CAEA,gBAAkB6K,QAAX,CAAsB,CAE5B,YAAYwiB,eAAL,CAAsBttB,EAAtB,CAA0B8K,QAA1B,CAAP,CAEA,CAJD,CAMA,CAVW,EA9H6D,CA0IzE2iB,WAAY,UAAY,CAEvB,OAAS,UAAUxtB,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAAT,CAEA,gBAAkB6K,QAAX,CAAsB,CAE5B,YAAYwiB,eAAL,CAAsBttB,EAAtB,CAA0B8K,QAA1B,CAAP,CAEA,CAJD,CAMA,CAVW,EA1I6D,CAsJzE4iB,aAAc,sBAAW5lB,MAAX,CAAoB,CAEjC,cAAc7B,YAAP,CAAqB,KAAKkB,WAA1B,CAAP,CAEA,CA1JwE,CA4JzEwmB,aAAc,UAAY,CAEzB,OAAS,UAAU5mB,OAAV,EAAT,CAEA,gBAAkBe,MAAX,CAAoB,CAE1B,cAAc7B,YAAP,CAAqBuY,GAAGtX,UAAH,CAAe,KAAKC,WAApB,CAArB,CAAP,CAEA,CAJD,CAMA,CAVa,EA5J2D,CAwKzEgM,OAAQ,UAAY;CAInB,OAAS,UAAUpM,OAAV,EAAT,CAEA,gBAAkBe,MAAX,CAAoB,CAE1B0W,GAAGrL,MAAH,CAAWrL,MAAX,CAAmB,KAAK2O,QAAxB,CAAkC,KAAKpD,EAAvC,EAEA,KAAKvV,UAAL,CAAgBkB,qBAAhB,CAAuCwf,EAAvC,EAEA,CAND,CAQA,CAdO,EAxKiE,CAwLzEliB,IAAK,aAAWmR,MAAX,CAAoB,CAExB,GAAKpd,UAAUC,MAAV,CAAmB,CAAxB,CAA4B,CAE3B,IAAM,MAAQ,CAAd,CAAiByb,EAAI1b,UAAUC,MAA/B,CAAuCyb,GAAvC,CAA8C,CAE7C,KAAKzP,GAAL,CAAUjM,UAAW0b,CAAX,CAAV,EAEA,CAED,WAAA,CAEA,CAED,GAAK0B,SAAW,IAAhB,CAAuB,CAEtBpT,QAAQuL,KAAR,CAAe,iEAAf,CAAkF6H,MAAlF,EACA,WAAA,CAEA,CAED,GAAKA,wBAAwBke,QAA7B,CAAwC,CAEvC,GAAKle,OAAOoe,MAAP,GAAkB,IAAvB,CAA8B,CAE7Bpe,OAAOoe,MAAP,CAAc+B,MAAd,CAAsBngB,MAAtB,EAEA,CAEDA,OAAOoe,MAAP,CAAgB,IAAhB,CACApe,OAAO6b,aAAP,CAAsB,CAAET,KAAM,OAAR,CAAtB,EAEA,KAAKkC,QAAL,CAAchI,IAAd,CAAoBtV,MAApB,EAEA,CAbD,IAaO,CAENpT,QAAQuL,KAAR,CAAe,+DAAf,CAAgF6H,MAAhF,EAEA,CAED,WAAA,CAEA,CAlOwE,CAoOzEmgB,OAAQ,gBAAWngB,MAAX,CAAoB,CAE3B,GAAKpd,UAAUC,MAAV,CAAmB,CAAxB,CAA4B,CAE3B,IAAM,MAAQ,CAAd,CAAiByb,EAAI1b,UAAUC,MAA/B,CAAuCyb,GAAvC,CAA8C,CAE7C,KAAK6hB,MAAL,CAAav9B,UAAW0b,CAAX,CAAb,EAEA,CAED,CAED,UAAY,KAAKgf,QAAL,CAAc9B,OAAd,CAAuBxb,MAAvB,CAAZ,CAEA,GAAKrd,QAAU,CAAE,CAAjB,CAAqB,CAEpBqd,OAAOoe,MAAP,CAAgB,IAAhB,CAEApe,OAAO6b,aAAP,CAAsB,CAAET,KAAM,SAAR,CAAtB,EAEA,KAAKkC,QAAL,CAAc1B,MAAd,CAAsBj5B,KAAtB,CAA6B,CAA7B,EAEA,CAED,CA5PwE,CA8PzEy9B,cAAe,uBAAWC,EAAX,CAAgB,CAE9B,YAAYC,mBAAL,CAA0B,IAA1B,CAAgCD,EAAhC,CAAP,CAEA,CAlQwE,CAoQzEE,gBAAiB,yBAAWp+B,IAAX,CAAkB,CAElC,YAAYm+B,mBAAL,CAA0B,MAA1B,CAAkCn+B,IAAlC,CAAP,CAEA,CAxQwE,CA0QzEm+B,oBAAqB,6BAAWn+B,IAAX,CAAiBoJ,KAAjB,CAAyB,CAE7C,GAAK,KAAMpJ,IAAN,IAAiBoJ,KAAtB,CAA8B,WAAA,CAE9B,IAAM,MAAQ,CAAR,CAAWc,EAAI,KAAKixB,QAAL,CAAcz6B,MAAnC,CAA2Cyb,EAAIjS,CAA/C,CAAkDiS,GAAlD,CAAyD,CAExD,UAAY,KAAKgf,QAAL,CAAehf,CAAf,CAAZ,CACA,WAAakiB,MAAMF,mBAAN,CAA2Bn+B,IAA3B,CAAiCoJ,KAAjC,CAAb,CAEA,GAAKyU,SAAWpe,SAAhB,CAA4B,CAE3B,aAAA,CAEA,CAED,CAED,gBAAA,CAEA,CA7RwE,CA+RzE6+B,iBAAkB,0BAAWryB,cAAX,CAA4B,CAE7C,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CAEA,KAAKyN,iBAAL,CAAwB,IAAxB,EAEA,cAAc/E,qBAAP,CAA8B,KAAKxB,WAAnC,CAAP,CAEA,CAvSwE,CAySzEgnB,mBAAoB,UAAY,CAE/B,aAAe,UAAUluB,OAAV,EAAf,CACA,UAAY,UAAUA,OAAV,EAAZ,CAEA,gBAAkBpE,cAAX,CAA4B,CAElC,WAAaA,gBAAkB,UAAUwB,UAAV,EAA/B,CAEA,KAAKqQ,iBAAL,CAAwB,IAAxB,EAEA,KAAKvG,WAAL,CAAiBuP,SAAjB,CAA4BD,QAA5B,CAAsCzL,MAAtC,CAA8C2K,KAA9C,EAEA,aAAA,CAEA,CAVD,CAYA,CAjBmB,EAzSqD,CA4TzEyY,iBAAkB,UAAY,CAE7B,eAAiB,UAAU/wB,UAAV,EAAjB,CAEA,gBAAkBxB,cAAX,CAA4B,CAElC,WAAaA,gBAAkB,UAAUqC,KAAV,EAA/B,CAEA,KAAKiwB,kBAAL,CAAyBrwB,UAAzB,EAEA,cAAcoM,iBAAP,CAA0BpM,UAA1B,CAAsC,KAAKiuB,QAAL,CAAc1tB,KAApD,CAA2D,KAA3D,CAAP,CAEA,CARD,CAUA,CAdiB,EA5TuD,CA4UzEgwB,cAAe,UAAY,CAE1B,aAAe,UAAUpuB,OAAV,EAAf,CACA,eAAiB,UAAU5C,UAAV,EAAjB,CAEA,gBAAkBxB,cAAX,CAA4B,CAElC,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CAEA,KAAKyN,iBAAL,CAAwB,IAAxB,EAEA,KAAKvG,WAAL,CAAiBuP,SAAjB,CAA4BD,QAA5B,CAAsC3Y,UAAtC,CAAkDkN,MAAlD,EAEA,aAAA,CAEA,CAVD,CAYA,CAjBc,EA5U0D,CA+VzEsjB,kBAAmB,UAAY,CAE9B,eAAiB,UAAUjxB,UAAV,EAAjB,CAEA,gBAAkBxB,cAAX,CAA4B,CAElC,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CAEA,KAAKkuB,kBAAL,CAAyBrwB,UAAzB,EAEA,cAAcjF,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,EAAsBgN,eAAtB,CAAuC/H,UAAvC,CAAP,CAEA,CARD,CAUA,CAdkB,EA/VsD,CA+WzEgtB,QAAS,kBAAY,EA/WoD,CAiXzEnd,SAAU,kBAAW5L,QAAX,CAAsB,CAE/BA,SAAU,IAAV,EAEA,aAAe,KAAKgpB,QAApB,CAEA,IAAM,MAAQ,CAAR,CAAWjxB,EAAIixB,SAASz6B,MAA9B,CAAsCyb,EAAIjS,CAA1C,CAA6CiS,GAA7C,CAAoD,CAEnDgf,SAAUhf,CAAV,EAAc4B,QAAd,CAAwB5L,QAAxB,EAEA,CAED,CA7XwE,CA+XzEwsB,gBAAiB,yBAAWxsB,QAAX,CAAsB,CAEtC,GAAK,KAAK8oB,OAAL,GAAiB,KAAtB,CAA8B,OAE9B9oB,SAAU,IAAV,EAEA,aAAe,KAAKgpB,QAApB,CAEA,IAAM,MAAQ,CAAR,CAAWjxB,EAAIixB,SAASz6B,MAA9B,CAAsCyb,EAAIjS,CAA1C,CAA6CiS,GAA7C,CAAoD,CAEnDgf,SAAUhf,CAAV,EAAcwiB,eAAd,CAA+BxsB,QAA/B,EAEA,CAED,CA7YwE,CA+YzEysB,kBAAmB,2BAAWzsB,QAAX,CAAsB,CAExC,WAAa,KAAK8pB,MAAlB,CAEA,GAAKA,SAAW,IAAhB,CAAuB,CAEtB9pB,SAAU8pB,MAAV,EAEAA,OAAO2C,iBAAP,CAA0BzsB,QAA1B,EAEA,CAED,CA3ZwE,CA6ZzE0sB,aAAc,uBAAY,CAEzB,KAAK3nB,MAAL,CAAY0P,OAAZ,CAAqB,KAAKC,QAA1B,CAAoC,KAAK3Y,UAAzC,CAAqD,KAAK6X,KAA1D,EAEA,KAAK2W,sBAAL,CAA8B,IAA9B,CAEA,CAnawE,CAqazE5e,kBAAmB,2BAAWghB,KAAX,CAAmB,CAErC,GAAK,KAAKtC,gBAAL,GAA0B,IAA/B,CAAsC,KAAKqC,YAAL,GAEtC,GAAK,KAAKnC,sBAAL,GAAgC,IAAhC,EAAwCoC,QAAU,IAAvD,CAA8D,CAE7D,GAAK,KAAK7C,MAAL,GAAgB,IAArB,CAA4B,CAE3B,KAAK1kB,WAAL,CAAiBlO,IAAjB,CAAuB,KAAK6N,MAA5B,EAEA,CAJD,IAIO,CAEN,KAAKK,WAAL,CAAiBH,gBAAjB,CAAmC,KAAK6kB,MAAL,CAAY1kB,WAA/C,CAA4D,KAAKL,MAAjE,EAEA,CAED,KAAKwlB,sBAAL,CAA8B,KAA9B,CAEAoC,MAAQ,IAAR,CAEA;CAID,IAAM,MAAQ,CAAR,CAAW50B,EAAI,KAAKixB,QAAL,CAAcz6B,MAAnC,CAA2Cyb,EAAIjS,CAA/C,CAAkDiS,GAAlD,CAAyD,CAExD,KAAKgf,QAAL,CAAehf,CAAf,EAAmB2B,iBAAnB,CAAsCghB,KAAtC,EAEA,CAED,CAncwE,CAqczEC,OAAQ,gBAAWC,IAAX,CAAkB;CAGzB,iBAAqBA,OAASv/B,SAAT,EAAsBu/B,OAAS,EAApD,CAEA,WAAa,EAAb;;;CAKA,GAAKC,YAAL,CAAoB;CAGnBD,KAAO,CACNE,WAAY,EADN,CAENC,UAAW,EAFL,CAGNC,SAAU,EAHJ,CAINC,OAAQ,EAJF,CAAP,CAOAt+B,OAAOu+B,QAAP,CAAkB,CACjBC,QAAS,GADQ,CAEjBtG,KAAM,QAFW,CAGjBuG,UAAW,iBAHM,CAAlB,CAMA;CAID,WAAa,EAAb,CAEA3hB,OAAOyR,IAAP,CAAc,KAAKA,IAAnB,CACAzR,OAAOob,IAAP,CAAc,KAAKA,IAAnB,CAEA,GAAK,KAAKj5B,IAAL,GAAc,EAAnB,CAAwB6d,OAAO7d,IAAP,CAAc,KAAKA,IAAnB,CACxB,GAAKy/B,KAAKC,SAAL,CAAgB,KAAK3C,QAArB,IAAoC,IAAzC,CAAgDlf,OAAOkf,QAAP,CAAkB,KAAKA,QAAvB,CAChD,GAAK,KAAKJ,UAAL,GAAoB,IAAzB,CAAgC9e,OAAO8e,UAAP,CAAoB,IAApB,CAChC,GAAK,KAAKC,aAAL,GAAuB,IAA5B,CAAmC/e,OAAO+e,aAAP,CAAuB,IAAvB,CACnC,GAAK,KAAK3B,OAAL,GAAiB,KAAtB,CAA8Bpd,OAAOod,OAAP,CAAiB,KAAjB,CAE9Bpd,OAAO3G,MAAP,CAAgB,KAAKA,MAAL,CAAY1J,OAAZ,EAAhB;CAIA,GAAK,KAAKyQ,QAAL,GAAkBxe,SAAvB,CAAmC,CAElC,GAAKu/B,KAAKE,UAAL,CAAiB,KAAKjhB,QAAL,CAAcqR,IAA/B,IAA0C7vB,SAA/C,CAA2D,CAE1Du/B,KAAKE,UAAL,CAAiB,KAAKjhB,QAAL,CAAcqR,IAA/B,EAAwC,KAAKrR,QAAL,CAAc8gB,MAAd,CAAsBC,IAAtB,CAAxC,CAEA,CAEDnhB,OAAOI,QAAP,CAAkB,KAAKA,QAAL,CAAcqR,IAAhC,CAEA,CAED,GAAK,KAAKqQ,QAAL,GAAkBlgC,SAAvB,CAAmC,CAElC,GAAKu/B,KAAKG,SAAL,CAAgB,KAAKQ,QAAL,CAAcrQ,IAA9B,IAAyC7vB,SAA9C,CAA0D,CAEzDu/B,KAAKG,SAAL,CAAgB,KAAKQ,QAAL,CAAcrQ,IAA9B,EAAuC,KAAKqQ,QAAL,CAAcZ,MAAd,CAAsBC,IAAtB,CAAvC,CAEA,CAEDnhB,OAAO8hB,QAAP,CAAkB,KAAKA,QAAL,CAAcrQ,IAAhC,CAEA;CAID,GAAK,KAAK6L,QAAL,CAAcz6B,MAAd,CAAuB,CAA5B,CAAgC,CAE/Bmd,OAAOsd,QAAP,CAAkB,EAAlB,CAEA,IAAM,MAAQ,CAAd,CAAiBhf,EAAI,KAAKgf,QAAL,CAAcz6B,MAAnC,CAA2Cyb,GAA3C,CAAkD,CAEjD0B,OAAOsd,QAAP,CAAgBhI,IAAhB,CAAsB,KAAKgI,QAAL,CAAehf,CAAf,EAAmB4iB,MAAnB,CAA2BC,IAA3B,EAAkCnhB,MAAxD,EAEA,CAED,CAED,GAAKohB,YAAL,CAAoB,CAEnB,eAAiBW,iBAAkBZ,KAAKE,UAAvB,CAAjB,CACA,cAAgBU,iBAAkBZ,KAAKG,SAAvB,CAAhB,CACA,aAAeS,iBAAkBZ,KAAKI,QAAvB,CAAf,CACA,WAAaQ,iBAAkBZ,KAAKK,MAAvB,CAAb,CAEA,GAAKH,WAAWx+B,MAAX,CAAoB,CAAzB,CAA6BK,OAAOm+B,UAAP,CAAoBA,UAApB,CAC7B,GAAKC,UAAUz+B,MAAV,CAAmB,CAAxB,CAA4BK,OAAOo+B,SAAP,CAAmBA,SAAnB,CAC5B,GAAKC,SAAS1+B,MAAT,CAAkB,CAAvB,CAA2BK,OAAOq+B,QAAP,CAAkBA,QAAlB,CAC3B,GAAKC,OAAO3+B,MAAP,CAAgB,CAArB,CAAyBK,OAAOs+B,MAAP,CAAgBA,MAAhB,CAEzB,CAEDt+B,OAAO8c,MAAP,CAAgBA,MAAhB,CAEA,aAAA;;;CAKA,yBAAA,CAA4BgiB,KAA5B,CAAoC,CAEnC,WAAa,EAAb,CACA,IAAM,OAAN,SAAA,CAAyB,CAExB,SAAWA,MAAOC,GAAP,CAAX,CACA,YAAYR,QAAZ,CACAnJ,OAAOhD,IAAP,CAAa4M,IAAb,EAEA,CACD,aAAA,CAEA,CAED,CA3jBwE,CA6jBzE10B,MAAO,eAAW2vB,SAAX,CAAuB,CAE7B,gBAAgB7xB,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAmC2xB,SAAnC,CAAP,CAEA,CAjkBwE,CAmkBzE3xB,KAAM,cAAW1I,MAAX,CAAmBq6B,SAAnB,CAA+B,CAEpC,GAAKA,YAAcv7B,SAAnB,CAA+Bu7B,UAAY,IAAZ,CAE/B,KAAKh7B,IAAL,CAAYW,OAAOX,IAAnB,CAEA,KAAKyjB,EAAL,CAAQpa,IAAR,CAAc1I,OAAO8iB,EAArB,EAEA,KAAKoD,QAAL,CAAcxd,IAAd,CAAoB1I,OAAOkmB,QAA3B,EACA,KAAK3Y,UAAL,CAAgB7E,IAAhB,CAAsB1I,OAAOuN,UAA7B,EACA,KAAK6X,KAAL,CAAW1c,IAAX,CAAiB1I,OAAOolB,KAAxB,EAEA,KAAK7O,MAAL,CAAY7N,IAAZ,CAAkB1I,OAAOuW,MAAzB,EACA,KAAKK,WAAL,CAAiBlO,IAAjB,CAAuB1I,OAAO4W,WAA9B,EAEA,KAAKilB,gBAAL,CAAwB77B,OAAO67B,gBAA/B,CACA,KAAKE,sBAAL,CAA8B/7B,OAAO+7B,sBAArC,CAEA,KAAKzB,OAAL,CAAet6B,OAAOs6B,OAAtB,CAEA,KAAK0B,UAAL,CAAkBh8B,OAAOg8B,UAAzB,CACA,KAAKC,aAAL,CAAqBj8B,OAAOi8B,aAA5B,CAEA,KAAKC,aAAL,CAAqBl8B,OAAOk8B,aAA5B,CACA,KAAKC,WAAL,CAAmBn8B,OAAOm8B,WAA1B,CAEA,KAAKC,QAAL,CAAgB0C,KAAKO,KAAL,CAAYP,KAAKC,SAAL,CAAgB/+B,OAAOo8B,QAAvB,CAAZ,CAAhB,CAEA,GAAK/B,YAAc,IAAnB,CAA0B,CAEzB,IAAM,MAAQ,CAAd,CAAiB7e,EAAIxb,OAAOw6B,QAAP,CAAgBz6B,MAArC,CAA6Cyb,GAA7C,CAAoD,CAEnD,UAAYxb,OAAOw6B,QAAP,CAAiBhf,CAAjB,CAAZ,CACA,KAAKzP,GAAL,CAAU2xB,MAAMhzB,KAAN,EAAV,EAEA,CAED,CAED,WAAA,CAEA,CA5mBwE,CAA1E,EAgnBA/L,MAAM08B,eAAN,CAAwB,CAAxB;;;;IASA18B,MAAM2gC,KAAN,CAAc,SAAWhvB,CAAX,CAAcjI,CAAd,CAAiBoE,CAAjB,CAAoBkL,MAApB,CAA4BzN,KAA5B,CAAmCq1B,aAAnC,CAAmD,CAEhE,KAAKjvB,CAAL,CAASA,CAAT,CACA,KAAKjI,CAAL,CAASA,CAAT,CACA,KAAKoE,CAAL,CAASA,CAAT,CAEA,KAAKkL,MAAL,CAAcA,wBAAwBjI,OAAxB,CAAkCiI,MAAlC,CAA2C,UAAUjI,OAAV,EAAzD,CACA,KAAK8vB,aAAL,CAAqBtE,MAAMC,OAAN,CAAexjB,MAAf,EAA0BA,MAA1B,CAAmC,EAAxD,CAEA,KAAKzN,KAAL,CAAaA,uBAAuBhC,KAAvB,CAA+BgC,KAA/B,CAAuC,UAAUhC,KAAV,EAApD,CACA,KAAKu3B,YAAL,CAAoBvE,MAAMC,OAAN,CAAejxB,KAAf,EAAyBA,KAAzB,CAAiC,EAArD,CAEA,KAAKq1B,aAAL,CAAqBA,gBAAkBzgC,SAAlB,CAA8BygC,aAA9B,CAA8C,CAAnE,CAEA,CAdD,CAgBA5gC,MAAM2gC,KAAN,CAAYlgC,SAAZ,CAAwB,CAEvBoJ,YAAa7J,MAAM2gC,KAFI,CAIvB50B,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CARsB,CAUvBA,KAAM,cAAW1I,MAAX,CAAoB,CAEzB,KAAKsQ,CAAL,CAAStQ,OAAOsQ,CAAhB,CACA,KAAKjI,CAAL,CAASrI,OAAOqI,CAAhB,CACA,KAAKoE,CAAL,CAASzM,OAAOyM,CAAhB,CAEA,KAAKkL,MAAL,CAAYjP,IAAZ,CAAkB1I,OAAO2X,MAAzB,EACA,KAAKzN,KAAL,CAAWxB,IAAX,CAAiB1I,OAAOkK,KAAxB,EAEA,KAAKq1B,aAAL,CAAqBv/B,OAAOu/B,aAA5B,CAEA,IAAM,MAAQ,CAAR,CAAWhkB,GAAKvb,OAAOw/B,aAAP,CAAqBz/B,MAA3C,CAAmDyb,EAAID,EAAvD,CAA2DC,GAA3D,CAAkE,CAEjE,KAAKgkB,aAAL,CAAoBhkB,CAApB,EAA0Bxb,OAAOw/B,aAAP,CAAsBhkB,CAAtB,EAA0B9Q,KAA1B,EAA1B,CAEA,CAED,IAAM,MAAQ,CAAR,CAAW6Q,GAAKvb,OAAOy/B,YAAP,CAAoB1/B,MAA1C,CAAkDyb,EAAID,EAAtD,CAA0DC,GAA1D,CAAiE,CAEhE,KAAKikB,YAAL,CAAmBjkB,CAAnB,EAAyBxb,OAAOy/B,YAAP,CAAqBjkB,CAArB,EAAyB9Q,KAAzB,EAAzB,CAEA,CAED,WAAA,CAEA,CAnCsB,CAAxB;;;IA6CA/L,MAAM+gC,eAAN,CAAwB,SAAW/yB,KAAX,CAAkBoI,QAAlB,CAA4B4qB,UAA5B,CAAyC,CAEhE,KAAKhR,IAAL,CAAYhwB,MAAMI,IAAN,CAAW0vB,YAAX,EAAZ,CAEA,KAAK9hB,KAAL,CAAaA,KAAb,CACA,KAAKoI,QAAL,CAAgBA,QAAhB,CAEA,KAAK6qB,OAAL,CAAe,KAAf,CACA,KAAKC,WAAL,CAAmB,CAAEjzB,OAAQ,CAAV,CAAakzB,MAAO,CAAE,CAAtB,CAAnB,CAEA,KAAKlB,OAAL,CAAe,CAAf,CACA,KAAKe,UAAL,CAAkBA,aAAe,IAAjC,CAEA,CAbD,CAeAhhC,MAAM+gC,eAAN,CAAsBtgC,SAAtB,CAAkC,CAEjCoJ,YAAa7J,MAAM+gC,eAFc,CAIjC,SAAA,EAAY,CAEX,YAAY/yB,KAAL,CAAW5M,MAAX,CAAoB,KAAKgV,QAAhC,CAEA,CARgC,CAUjC,eAAA,CAAiBtM,KAAjB,CAAyB,CAExB,GAAKA,QAAU,IAAf,CAAsB,KAAKm2B,OAAL,GAEtB,CAdgC,CAgBjCmB,WAAY,oBAAWt3B,KAAX,CAAmB,CAE9B,KAAKm3B,OAAL,CAAen3B,KAAf,CAEA,WAAA,CAEA,CAtBgC,CAwBjCC,KAAM,cAAW1I,MAAX,CAAoB,CAEzB,KAAK2M,KAAL,CAAa,WAAWA,KAAP,CAAanE,WAAjB,CAA8BxI,OAAO2M,KAArC,CAAb,CACA,KAAKoI,QAAL,CAAgB/U,OAAO+U,QAAvB,CAEA,KAAK6qB,OAAL,CAAe5/B,OAAO4/B,OAAtB,CAEA,WAAA,CAEA,CAjCgC,CAmCjCI,OAAQ,gBAAWC,MAAX,CAAmBnrB,SAAnB,CAA8BorB,MAA9B,CAAuC,CAE9CD,QAAU,KAAKlrB,QAAf,CACAmrB,QAAUprB,UAAUC,QAApB,CAEA,IAAM,MAAQ,CAAR,CAAWxL,EAAI,KAAKwL,QAA1B,CAAoCyG,EAAIjS,CAAxC,CAA2CiS,GAA3C,CAAkD,CAEjD,KAAK7O,KAAL,CAAYszB,OAASzkB,CAArB,EAA2B1G,UAAUnI,KAAV,CAAiBuzB,OAAS1kB,CAA1B,CAA3B,CAEA,CAED,WAAA,CAEA,CAhDgC,CAkDjC2kB,UAAW,mBAAWxzB,KAAX,CAAmB,CAE7B,KAAKA,KAAL,CAAWrE,GAAX,CAAgBqE,KAAhB,EAEA,WAAA,CAEA,CAxDgC,CA0DjCyzB,gBAAiB,yBAAWC,MAAX,CAAoB,CAEpC,UAAY,KAAK1zB,KAAjB,CAAwBC,OAAS,CAAjC,CAEA,IAAM,MAAQ,CAAR,CAAWrD,EAAI82B,OAAOtgC,MAA5B,CAAoCyb,EAAIjS,CAAxC,CAA2CiS,GAA3C,CAAkD,CAEjD,UAAY6kB,OAAQ7kB,CAAR,CAAZ,CAEA,GAAKtR,QAAUpL,SAAf,CAA2B,CAE1BgL,QAAQC,IAAR,CAAc,6DAAd,CAA6EyR,CAA7E,EACAtR,MAAQ,UAAUhC,KAAV,EAAR,CAEA,CAEDyE,MAAOC,QAAP,EAAqB1C,MAAM/B,CAA3B,CACAwE,MAAOC,QAAP,EAAqB1C,MAAM9B,CAA3B,CACAuE,MAAOC,QAAP,EAAqB1C,MAAM7B,CAA3B,CAEA,CAED,WAAA,CAEA,CAjFgC,CAmFjCi4B,iBAAkB,0BAAWC,OAAX,CAAqB,CAEtC,UAAY,KAAK5zB,KAAjB,CAAwBC,OAAS,CAAjC,CAEA,IAAM,MAAQ,CAAR,CAAWrD,EAAIg3B,QAAQxgC,MAA7B,CAAqCyb,EAAIjS,CAAzC,CAA4CiS,GAA5C,CAAmD,CAElD,UAAY+kB,QAAS/kB,CAAT,CAAZ,CAEA7O,MAAOC,QAAP,EAAqB/M,MAAMyQ,CAA3B,CACA3D,MAAOC,QAAP,EAAqB/M,MAAMwI,CAA3B,CACAsE,MAAOC,QAAP,EAAqB/M,MAAM4M,CAA3B,CAEA,CAED,WAAA,CAEA,CAnGgC,CAqGjC+zB,kBAAmB,2BAAWC,OAAX,CAAqB,CAEvC,UAAY,KAAK9zB,KAAjB,CAAwBC,OAAS,CAAjC,CAEA,IAAM,MAAQ,CAAR,CAAWrD,EAAIk3B,QAAQ1gC,MAA7B,CAAqCyb,EAAIjS,CAAzC,CAA4CiS,GAA5C,CAAmD,CAElD,WAAailB,QAASjlB,CAAT,CAAb,CAEA,GAAKjE,SAAWzY,SAAhB,CAA4B,CAE3BgL,QAAQC,IAAR,CAAc,gEAAd,CAAgFyR,CAAhF,EACAjE,OAAS,UAAUxE,OAAV,EAAT,CAEA,CAEDpG,MAAOC,QAAP,EAAqB2K,OAAOrY,CAA5B,CACAyN,MAAOC,QAAP,EAAqB2K,OAAOxK,CAA5B,CAEA,CAED,WAAA,CAEA,CA3HgC,CA6HjC2zB,kBAAmB,2BAAWD,OAAX,CAAqB,CAEvC,UAAY,KAAK9zB,KAAjB,CAAwBC,OAAS,CAAjC,CAEA,IAAM,MAAQ,CAAR,CAAWrD,EAAIk3B,QAAQ1gC,MAA7B,CAAqCyb,EAAIjS,CAAzC,CAA4CiS,GAA5C,CAAmD,CAElD,WAAailB,QAASjlB,CAAT,CAAb,CAEA,GAAKjE,SAAWzY,SAAhB,CAA4B,CAE3BgL,QAAQC,IAAR,CAAc,gEAAd,CAAgFyR,CAAhF,EACAjE,OAAS,UAAU7H,OAAV,EAAT,CAEA,CAED/C,MAAOC,QAAP,EAAqB2K,OAAOrY,CAA5B,CACAyN,MAAOC,QAAP,EAAqB2K,OAAOxK,CAA5B,CACAJ,MAAOC,QAAP,EAAqB2K,OAAOvK,CAA5B,CAEA,CAED,WAAA,CAEA,CApJgC,CAsJjC2zB,kBAAmB,2BAAWF,OAAX,CAAqB,CAEvC,UAAY,KAAK9zB,KAAjB,CAAwBC,OAAS,CAAjC,CAEA,IAAM,MAAQ,CAAR,CAAWrD,EAAIk3B,QAAQ1gC,MAA7B,CAAqCyb,EAAIjS,CAAzC,CAA4CiS,GAA5C,CAAmD,CAElD,WAAailB,QAASjlB,CAAT,CAAb,CAEA,GAAKjE,SAAWzY,SAAhB,CAA4B,CAE3BgL,QAAQC,IAAR,CAAc,gEAAd,CAAgFyR,CAAhF,EACAjE,OAAS,UAAUoB,OAAV,EAAT,CAEA,CAEDhM,MAAOC,QAAP,EAAqB2K,OAAOrY,CAA5B,CACAyN,MAAOC,QAAP,EAAqB2K,OAAOxK,CAA5B,CACAJ,MAAOC,QAAP,EAAqB2K,OAAOvK,CAA5B,CACAL,MAAOC,QAAP,EAAqB2K,OAAOtK,CAA5B,CAEA,CAED,WAAA,CAEA,CA9KgC,CAgLjC3E,IAAK,aAAWG,KAAX,CAAkBmE,MAAlB,CAA2B,CAE/B,GAAKA,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5B,KAAKD,KAAL,CAAWrE,GAAX,CAAgBG,KAAhB,CAAuBmE,MAAvB,EAEA,WAAA,CAEA,CAxLgC,CA0LjC0S,KAAM,cAAWzf,KAAX,CAAmB,CAExB,YAAY8M,KAAL,CAAY9M,MAAQ,KAAKkV,QAAzB,CAAP,CAEA,CA9LgC,CAgMjC/B,KAAM,cAAWnT,KAAX,CAAkBX,CAAlB,CAAsB,CAE3B,KAAKyN,KAAL,CAAY9M,MAAQ,KAAKkV,QAAzB,EAAsC7V,CAAtC,CAEA,WAAA,CAEA,CAtMgC,CAwMjCqgB,KAAM,cAAW1f,KAAX,CAAmB,CAExB,YAAY8M,KAAL,CAAY9M,MAAQ,KAAKkV,QAAb,CAAwB,CAApC,CAAP,CAEA,CA5MgC,CA8MjC9B,KAAM,cAAWpT,KAAX,CAAkBkN,CAAlB,CAAsB,CAE3B,KAAKJ,KAAL,CAAY9M,MAAQ,KAAKkV,QAAb,CAAwB,CAApC,EAA0ChI,CAA1C,CAEA,WAAA,CAEA,CApNgC,CAsNjCyS,KAAM,cAAW3f,KAAX,CAAmB,CAExB,YAAY8M,KAAL,CAAY9M,MAAQ,KAAKkV,QAAb,CAAwB,CAApC,CAAP,CAEA,CA1NgC,CA4NjCG,KAAM,cAAWrV,KAAX,CAAkBmN,CAAlB,CAAsB,CAE3B,KAAKL,KAAL,CAAY9M,MAAQ,KAAKkV,QAAb,CAAwB,CAApC,EAA0C/H,CAA1C,CAEA,WAAA,CAEA,CAlOgC,CAoOjC4zB,KAAM,cAAW/gC,KAAX,CAAmB,CAExB,YAAY8M,KAAL,CAAY9M,MAAQ,KAAKkV,QAAb,CAAwB,CAApC,CAAP,CAEA,CAxOgC,CA0OjC6D,KAAM,cAAW/Y,KAAX,CAAkBoN,CAAlB,CAAsB,CAE3B,KAAKN,KAAL,CAAY9M,MAAQ,KAAKkV,QAAb,CAAwB,CAApC,EAA0C9H,CAA1C,CAEA,WAAA,CAEA,CAhPgC,CAkPjC4zB,MAAO,eAAWhhC,KAAX,CAAkBX,CAAlB,CAAqB6N,CAArB,CAAyB,CAE/BlN,OAAS,KAAKkV,QAAd,CAEA,KAAKpI,KAAL,CAAY9M,MAAQ,CAApB,EAA0BX,CAA1B,CACA,KAAKyN,KAAL,CAAY9M,MAAQ,CAApB,EAA0BkN,CAA1B,CAEA,WAAA,CAEA,CA3PgC,CA6PjC0S,OAAQ,gBAAW5f,KAAX,CAAkBX,CAAlB,CAAqB6N,CAArB,CAAwBC,CAAxB,CAA4B,CAEnCnN,OAAS,KAAKkV,QAAd,CAEA,KAAKpI,KAAL,CAAY9M,MAAQ,CAApB,EAA0BX,CAA1B,CACA,KAAKyN,KAAL,CAAY9M,MAAQ,CAApB,EAA0BkN,CAA1B,CACA,KAAKJ,KAAL,CAAY9M,MAAQ,CAApB,EAA0BmN,CAA1B,CAEA,WAAA,CAEA,CAvQgC,CAyQjC8zB,QAAS,iBAAWjhC,KAAX,CAAkBX,CAAlB,CAAqB6N,CAArB,CAAwBC,CAAxB,CAA2BC,CAA3B,CAA+B,CAEvCpN,OAAS,KAAKkV,QAAd,CAEA,KAAKpI,KAAL,CAAY9M,MAAQ,CAApB,EAA0BX,CAA1B,CACA,KAAKyN,KAAL,CAAY9M,MAAQ,CAApB,EAA0BkN,CAA1B,CACA,KAAKJ,KAAL,CAAY9M,MAAQ,CAApB,EAA0BmN,CAA1B,CACA,KAAKL,KAAL,CAAY9M,MAAQ,CAApB,EAA0BoN,CAA1B,CAEA,WAAA,CAEA,CApRgC,CAsRjCvC,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CA1RgC,CAAlC;CAgSA/J,MAAMoiC,aAAN,CAAsB,SAAWp0B,KAAX,CAAkBoI,QAAlB,CAA6B,CAElD,iBAAiB2qB,eAAV,CAA2B,aAAA,CAAe/yB,KAAf,CAA3B,CAAmDoI,QAAnD,CAAP,CAEA,CAJD,CAMApW,MAAMqiC,cAAN,CAAuB,SAAWr0B,KAAX,CAAkBoI,QAAlB,CAA6B,CAEnD,iBAAiB2qB,eAAV,CAA2B,cAAA,CAAgB/yB,KAAhB,CAA3B,CAAoDoI,QAApD,CAAP,CAEA,CAJD,CAMApW,MAAMsiC,qBAAN,CAA8B,SAAWt0B,KAAX,CAAkBoI,QAAlB,CAA6B,CAE1D,iBAAiB2qB,eAAV,CAA2B,qBAAA,CAAuB/yB,KAAvB,CAA3B,CAA2DoI,QAA3D,CAAP,CAEA,CAJD,CAMApW,MAAMuiC,cAAN,CAAuB,SAAWv0B,KAAX,CAAkBoI,QAAlB,CAA6B,CAEnD,iBAAiB2qB,eAAV,CAA2B,cAAA,CAAgB/yB,KAAhB,CAA3B,CAAoDoI,QAApD,CAAP,CAEA,CAJD,CAMApW,MAAMwiC,eAAN,CAAwB,SAAWx0B,KAAX,CAAkBoI,QAAlB,CAA6B,CAEpD,iBAAiB2qB,eAAV,CAA2B,eAAA,CAAiB/yB,KAAjB,CAA3B,CAAqDoI,QAArD,CAAP,CAEA,CAJD,CAMApW,MAAMyiC,cAAN,CAAuB,SAAWz0B,KAAX,CAAkBoI,QAAlB,CAA6B,CAEnD,iBAAiB2qB,eAAV,CAA2B,cAAA,CAAgB/yB,KAAhB,CAA3B,CAAoDoI,QAApD,CAAP,CAEA,CAJD,CAMApW,MAAM0iC,eAAN,CAAwB,SAAW10B,KAAX,CAAkBoI,QAAlB,CAA6B,CAEpD,iBAAiB2qB,eAAV,CAA2B,eAAA,CAAiB/yB,KAAjB,CAA3B,CAAqDoI,QAArD,CAAP,CAEA,CAJD,CAMApW,MAAM2iC,gBAAN,CAAyB,SAAW30B,KAAX,CAAkBoI,QAAlB,CAA6B,CAErD,iBAAiB2qB,eAAV,CAA2B,gBAAA,CAAkB/yB,KAAlB,CAA3B,CAAsDoI,QAAtD,CAAP,CAEA,CAJD,CAMApW,MAAM4iC,gBAAN,CAAyB,SAAW50B,KAAX,CAAkBoI,QAAlB,CAA6B,CAErD,iBAAiB2qB,eAAV,CAA2B,gBAAA,CAAkB/yB,KAAlB,CAA3B,CAAsDoI,QAAtD,CAAP,CAEA,CAJD;CASApW,MAAM6iC,sBAAN,CAA+B,SAAW70B,KAAX,CAAkBoI,QAAlB,CAA6B,CAE3DjL,QAAQC,IAAR,CAAc,4GAAd,EACA,iBAAiB21B,eAAV,CAA2B/yB,KAA3B,CAAkCoI,QAAlC,EAA6CgrB,UAA7C,CAAyD,IAAzD,CAAP,CAEA,CALD;;;IAaAphC,MAAM8iC,wBAAN,CAAiC,SAAW90B,KAAX,CAAkBoI,QAAlB,CAA4B2sB,gBAA5B,CAA+C,CAE/E/iC,MAAM+gC,eAAN,CAAsBx/B,IAAtB,CAA4B,IAA5B,CAAkCyM,KAAlC,CAAyCoI,QAAzC,EAEA,KAAK2sB,gBAAL,CAAwBA,kBAAoB,CAA5C,CAEA,CAND,CAQA/iC,MAAM8iC,wBAAN,CAA+BriC,SAA/B,CAA2CE,OAAOy2B,MAAP,CAAep3B,MAAM+gC,eAAN,CAAsBtgC,SAArC,CAA3C,CACAT,MAAM8iC,wBAAN,CAA+BriC,SAA/B,CAAyCoJ,WAAzC,CAAuD7J,MAAM8iC,wBAA7D,CAEA9iC,MAAM8iC,wBAAN,CAA+BriC,SAA/B,CAAyCsJ,IAAzC,CAAgD,SAAW1I,MAAX,CAAoB,CAEnErB,MAAM+gC,eAAN,CAAsBtgC,SAAtB,CAAgCsJ,IAAhC,CAAqCxI,IAArC,CAA2C,IAA3C,CAAiDF,MAAjD,EAEA,KAAK0hC,gBAAL,CAAwB1hC,OAAO0hC,gBAA/B,CAEA,WAAA,CAEA,CARD;;;IAgBA/iC,MAAMgjC,iBAAN,CAA0B,SAAWh1B,KAAX,CAAkB8oB,MAAlB,CAA2B,CAEpD,KAAK9G,IAAL,CAAYhwB,MAAMI,IAAN,CAAW0vB,YAAX,EAAZ,CAEA,KAAK9hB,KAAL,CAAaA,KAAb,CACA,KAAK8oB,MAAL,CAAcA,MAAd,CAEA,KAAKmK,OAAL,CAAe,KAAf,CACA,KAAKC,WAAL,CAAmB,CAAEjzB,OAAQ,CAAV,CAAakzB,MAAO,CAAE,CAAtB,CAAnB,CAEA,KAAKlB,OAAL,CAAe,CAAf,CAEA,CAZD,CAcAjgC,MAAMgjC,iBAAN,CAAwBviC,SAAxB,CAAoC,CAEnCoJ,YAAa7J,MAAMgjC,iBAFgB,CAInC,UAAA,EAAc,CAEb,YAAYh1B,KAAL,CAAW5M,MAAlB,CAEA,CARkC,CAUnC,SAAA,EAAa,CAEZ,YAAY4M,KAAL,CAAW5M,MAAX,CAAoB,KAAK01B,MAAhC,CAEA,CAdkC,CAgBnC,eAAA,CAAiBhtB,KAAjB,CAAyB,CAExB,GAAKA,QAAU,IAAf,CAAsB,KAAKm2B,OAAL,GAEtB,CApBkC,CAsBnCmB,WAAY,oBAAWt3B,KAAX,CAAmB,CAE9B,KAAKm3B,OAAL,CAAen3B,KAAf,CAEA,WAAA,CAEA,CA5BkC,CA8BnCC,KAAM,cAAW1I,MAAX,CAAoB,CAEzB,KAAK2M,KAAL,CAAa,WAAWA,KAAP,CAAanE,WAAjB,CAA8BxI,OAAO2M,KAArC,CAAb,CACA,KAAK8oB,MAAL,CAAcz1B,OAAOy1B,MAArB,CACA,KAAKmK,OAAL,CAAe5/B,OAAO4/B,OAAtB,CAEA,WAAA,CAEA,CAtCkC,CAwCnCI,OAAQ,gBAAWC,MAAX,CAAmBnrB,SAAnB,CAA8BorB,MAA9B,CAAuC,CAE9CD,QAAU,KAAKxK,MAAf,CACAyK,QAAUprB,UAAU2gB,MAApB,CAEA,IAAM,MAAQ,CAAR,CAAWlsB,EAAI,KAAKksB,MAA1B,CAAkCja,EAAIjS,CAAtC,CAAyCiS,GAAzC,CAAgD,CAE/C,KAAK7O,KAAL,CAAYszB,OAASzkB,CAArB,EAA2B1G,UAAUnI,KAAV,CAAiBuzB,OAAS1kB,CAA1B,CAA3B,CAEA,CAED,WAAA,CAEA,CArDkC,CAuDnClT,IAAK,aAAWG,KAAX,CAAkBmE,MAAlB,CAA2B,CAE/B,GAAKA,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5B,KAAKD,KAAL,CAAWrE,GAAX,CAAgBG,KAAhB,CAAuBmE,MAAvB,EAEA,WAAA,CAEA,CA/DkC,CAiEnClC,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CArEkC,CAApC;;;IA+EA/J,MAAMijC,0BAAN,CAAmC,SAAWj1B,KAAX,CAAkB8oB,MAAlB,CAA0BiM,gBAA1B,CAA6C,CAE/E/iC,MAAMgjC,iBAAN,CAAwBzhC,IAAxB,CAA8B,IAA9B,CAAoCyM,KAApC,CAA2C8oB,MAA3C,EAEA,KAAKiM,gBAAL,CAAwBA,kBAAoB,CAA5C,CAEA,CAND,CAQA/iC,MAAMijC,0BAAN,CAAiCxiC,SAAjC,CAA6CE,OAAOy2B,MAAP,CAAep3B,MAAMgjC,iBAAN,CAAwBviC,SAAvC,CAA7C,CACAT,MAAMijC,0BAAN,CAAiCxiC,SAAjC,CAA2CoJ,WAA3C,CAAyD7J,MAAMijC,0BAA/D,CAEAjjC,MAAMijC,0BAAN,CAAiCxiC,SAAjC,CAA2CsJ,IAA3C,CAAkD,SAAW1I,MAAX,CAAoB,CAErErB,MAAMgjC,iBAAN,CAAwBviC,SAAxB,CAAkCsJ,IAAlC,CAAuCxI,IAAvC,CAA6C,IAA7C,CAAmDF,MAAnD,EAEA,KAAK0hC,gBAAL,CAAwB1hC,OAAO0hC,gBAA/B,CAEA,WAAA,CAEA,CARD;;;IAgBA/iC,MAAMkjC,0BAAN,CAAmC,SAAWC,iBAAX,CAA8B/sB,QAA9B,CAAwCnI,MAAxC,CAAiD,CAEnF,KAAK+hB,IAAL,CAAYhwB,MAAMI,IAAN,CAAW0vB,YAAX,EAAZ,CAEA,KAAK2Q,IAAL,CAAY0C,iBAAZ,CACA,KAAK/sB,QAAL,CAAgBA,QAAhB,CACA,KAAKnI,MAAL,CAAcA,MAAd,CAEA,CARD,CAWAjO,MAAMkjC,0BAAN,CAAiCziC,SAAjC,CAA6C,CAE5CoJ,YAAa7J,MAAMkjC,0BAFyB,CAI5C,UAAA,EAAa,CAEZ/3B,QAAQC,IAAR,CAAc,wEAAd,EACA,YAAY4C,KAAL,CAAW5M,MAAlB,CAEA,CAT2C,CAW5C,SAAA,EAAY,CAEX,YAAYq/B,IAAL,CAAUU,KAAjB,CAEA,CAf2C,CAiB5C9sB,KAAM,cAAWnT,KAAX,CAAkBX,CAAlB,CAAsB,CAE3B,KAAKkgC,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,KAAKu/B,IAAL,CAAU3J,MAAlB,CAA2B,KAAK7oB,MAAjD,EAA4D1N,CAA5D,CAEA,WAAA,CAEA,CAvB2C,CAyB5C+T,KAAM,cAAWpT,KAAX,CAAkBkN,CAAlB,CAAsB,CAE3B,KAAKqyB,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,KAAKu/B,IAAL,CAAU3J,MAAlB,CAA2B,KAAK7oB,MAAhC,CAAyC,CAA1D,EAAgEG,CAAhE,CAEA,WAAA,CAEA,CA/B2C,CAiC5CmI,KAAM,cAAWrV,KAAX,CAAkBmN,CAAlB,CAAsB,CAE3B,KAAKoyB,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,KAAKu/B,IAAL,CAAU3J,MAAlB,CAA2B,KAAK7oB,MAAhC,CAAyC,CAA1D,EAAgEI,CAAhE,CAEA,WAAA,CAEA,CAvC2C,CAyC5C4L,KAAM,cAAW/Y,KAAX,CAAkBoN,CAAlB,CAAsB,CAE3B,KAAKmyB,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,KAAKu/B,IAAL,CAAU3J,MAAlB,CAA2B,KAAK7oB,MAAhC,CAAyC,CAA1D,EAAgEK,CAAhE,CAEA,WAAA,CAEA,CA/C2C,CAiD5CqS,KAAM,cAAWzf,KAAX,CAAmB,CAExB,YAAYu/B,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,KAAKu/B,IAAL,CAAU3J,MAAlB,CAA2B,KAAK7oB,MAAjD,CAAP,CAEA,CArD2C,CAuD5C2S,KAAM,cAAW1f,KAAX,CAAmB,CAExB,YAAYu/B,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,KAAKu/B,IAAL,CAAU3J,MAAlB,CAA2B,KAAK7oB,MAAhC,CAAyC,CAA1D,CAAP,CAEA,CA3D2C,CA6D5C4S,KAAM,cAAW3f,KAAX,CAAmB,CAExB,YAAYu/B,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,KAAKu/B,IAAL,CAAU3J,MAAlB,CAA2B,KAAK7oB,MAAhC,CAAyC,CAA1D,CAAP,CAEA,CAjE2C,CAmE5Cg0B,KAAM,cAAW/gC,KAAX,CAAmB,CAExB,YAAYu/B,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,KAAKu/B,IAAL,CAAU3J,MAAlB,CAA2B,KAAK7oB,MAAhC,CAAyC,CAA1D,CAAP,CAEA,CAvE2C,CAyE5Ci0B,MAAO,eAAWhhC,KAAX,CAAkBX,CAAlB,CAAqB6N,CAArB,CAAyB,CAE/BlN,MAAQA,MAAQ,KAAKu/B,IAAL,CAAU3J,MAAlB,CAA2B,KAAK7oB,MAAxC,CAEA,KAAKwyB,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,CAAzB,EAA+BX,CAA/B,CACA,KAAKkgC,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,CAAzB,EAA+BkN,CAA/B,CAEA,WAAA,CAEA,CAlF2C,CAoF5C0S,OAAQ,gBAAW5f,KAAX,CAAkBX,CAAlB,CAAqB6N,CAArB,CAAwBC,CAAxB,CAA4B,CAEnCnN,MAAQA,MAAQ,KAAKu/B,IAAL,CAAU3J,MAAlB,CAA2B,KAAK7oB,MAAxC,CAEA,KAAKwyB,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,CAAzB,EAA+BX,CAA/B,CACA,KAAKkgC,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,CAAzB,EAA+BkN,CAA/B,CACA,KAAKqyB,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,CAAzB,EAA+BmN,CAA/B,CAEA,WAAA,CAEA,CA9F2C,CAgG5C8zB,QAAS,iBAAWjhC,KAAX,CAAkBX,CAAlB,CAAqB6N,CAArB,CAAwBC,CAAxB,CAA2BC,CAA3B,CAA+B,CAEvCpN,MAAQA,MAAQ,KAAKu/B,IAAL,CAAU3J,MAAlB,CAA2B,KAAK7oB,MAAxC,CAEA,KAAKwyB,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,CAAzB,EAA+BX,CAA/B,CACA,KAAKkgC,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,CAAzB,EAA+BkN,CAA/B,CACA,KAAKqyB,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,CAAzB,EAA+BmN,CAA/B,CACA,KAAKoyB,IAAL,CAAUzyB,KAAV,CAAiB9M,MAAQ,CAAzB,EAA+BoN,CAA/B,CAEA,WAAA,CAEA,CA3G2C,CAA7C;;;;;;;;IA0HAtO,MAAM4e,QAAN,CAAiB,UAAY,CAE5Bje,OAAOC,cAAP,CAAuB,IAAvB,CAA6B,IAA7B,CAAmC,CAAEkJ,MAAO9J,MAAMojC,eAAN,EAAT,CAAnC,EAEA,KAAKpT,IAAL,CAAYhwB,MAAMI,IAAN,CAAW0vB,YAAX,EAAZ,CAEA,KAAKpvB,IAAL,CAAY,EAAZ,CACA,KAAKi5B,IAAL,CAAY,UAAZ,CAEA,KAAK9a,QAAL,CAAgB,EAAhB,CACA,KAAK6iB,MAAL,CAAc,EAAd,CACA,KAAK2B,KAAL,CAAa,EAAb,CACA,KAAKC,aAAL,CAAqB,CAAE,EAAF,CAArB,CAEA,KAAKC,YAAL,CAAoB,EAApB,CACA,KAAKC,YAAL,CAAoB,EAApB,CAEA,KAAKC,WAAL,CAAmB,EAAnB,CACA,KAAKC,WAAL,CAAmB,EAAnB,CAEA,KAAKC,aAAL,CAAqB,EAArB,CAEA,KAAKC,WAAL,CAAmB,IAAnB,CACA,KAAKzV,cAAL,CAAsB,IAAtB;CAIA,KAAK0V,kBAAL,CAA0B,KAA1B,CACA,KAAKC,kBAAL,CAA0B,KAA1B,CACA,KAAKC,aAAL,CAAqB,KAArB,CACA,KAAKC,iBAAL,CAAyB,KAAzB,CACA,KAAKC,gBAAL,CAAwB,KAAxB,CACA,KAAKC,uBAAL,CAA+B,KAA/B,CACA,KAAKC,gBAAL,CAAwB,KAAxB,CAEA,CAnCD,CAqCAxjC,OAAOK,MAAP,CAAehB,MAAM4e,QAAN,CAAene,SAA9B,CAAyCT,MAAMy5B,eAAN,CAAsBh5B,SAA/D,CAA0E,CAEzEi9B,YAAa,qBAAW9lB,MAAX,CAAoB,CAEhC,iBAAmB,UAAU8H,OAAV,GAAoBgC,eAApB,CAAqC9J,MAArC,CAAnB,CAEA,IAAM,MAAQ,CAAR,CAAWgF,GAAK,KAAKiC,QAAL,CAAczd,MAApC,CAA4Cyb,EAAID,EAAhD,CAAoDC,GAApD,CAA2D,CAE1D,WAAa,KAAKgC,QAAL,CAAehC,CAAf,CAAb,CACAunB,OAAOrtB,YAAP,CAAqBa,MAArB,EAEA,CAED,IAAM,MAAQ,CAAR,CAAWgF,GAAK,KAAKymB,KAAL,CAAWjiC,MAAjC,CAAyCyb,EAAID,EAA7C,CAAiDC,GAAjD,CAAwD,CAEvD,SAAW,KAAKwmB,KAAL,CAAYxmB,CAAZ,CAAX,CACAwnB,KAAKrrB,MAAL,CAAYnC,YAAZ,CAA0B0Y,YAA1B,EAAyCne,SAAzC,GAEA,IAAM,MAAQ,CAAR,CAAWkzB,GAAKD,KAAKxD,aAAL,CAAmBz/B,MAAzC,CAAiDof,EAAI8jB,EAArD,CAAyD9jB,GAAzD,CAAgE,CAE/D6jB,KAAKxD,aAAL,CAAoBrgB,CAApB,EAAwB3J,YAAxB,CAAsC0Y,YAAtC,EAAqDne,SAArD,GAEA,CAED,CAED,GAAK,KAAKwyB,WAAL,GAAqB,IAA1B,CAAiC,CAEhC,KAAKW,kBAAL,GAEA,CAED,GAAK,KAAKpW,cAAL,GAAwB,IAA7B,CAAoC,CAEnC,KAAKC,qBAAL,GAEA,CAED,KAAKyV,kBAAL,CAA0B,IAA1B,CACA,KAAKG,iBAAL,CAAyB,IAAzB,CAEA,WAAA,CAEA,CA3CwE,CA6CzE/F,QAAS,UAAY;CAIpB,MAAA,CAEA,uBAAO,CAAkBruB,KAAlB,CAA0B,CAEhC,GAAK0f,KAAOnvB,SAAZ,CAAwBmvB,GAAK,UAAUzX,OAAV,EAAL,CAExByX,GAAGvI,aAAH,CAAkBnX,KAAlB,EAEA,KAAK8tB,WAAL,CAAkBpO,EAAlB,EAEA,WAAA,CAEA,CAVD,CAYA,CAlBQ,EA7CgE,CAiEzE4O,QAAS,UAAY;CAIpB,MAAA,CAEA,uBAAO,CAAkBtuB,KAAlB,CAA0B,CAEhC,GAAK0f,KAAOnvB,SAAZ,CAAwBmvB,GAAK,UAAUzX,OAAV,EAAL,CAExByX,GAAGtI,aAAH,CAAkBpX,KAAlB,EAEA,KAAK8tB,WAAL,CAAkBpO,EAAlB,EAEA,WAAA,CAEA,CAVD,CAYA,CAlBQ,EAjEgE,CAqFzE6O,QAAS,UAAY;CAIpB,MAAA,CAEA,uBAAO,CAAkBvuB,KAAlB,CAA0B,CAEhC,GAAK0f,KAAOnvB,SAAZ,CAAwBmvB,GAAK,UAAUzX,OAAV,EAAL,CAExByX,GAAGrI,aAAH,CAAkBrX,KAAlB,EAEA,KAAK8tB,WAAL,CAAkBpO,EAAlB,EAEA,WAAA,CAEA,CAVD,CAYA,CAlBQ,EArFgE,CAyGzEzR,UAAW,UAAY;CAItB,MAAA,CAEA,yBAAO,CAAoBtd,CAApB,CAAuB6N,CAAvB,CAA0BC,CAA1B,CAA8B,CAEpC,GAAKihB,KAAOnvB,SAAZ,CAAwBmvB,GAAK,UAAUzX,OAAV,EAAL,CAExByX,GAAGxI,eAAH,CAAoBvmB,CAApB,CAAuB6N,CAAvB,CAA0BC,CAA1B,EAEA,KAAKqvB,WAAL,CAAkBpO,EAAlB,EAEA,WAAA,CAEA,CAVD,CAYA,CAlBU,EAzG8D,CA6HzE7I,MAAO,UAAY;CAIlB,MAAA,CAEA,qBAAO,CAAgBlmB,CAAhB,CAAmB6N,CAAnB,CAAsBC,CAAtB,CAA0B,CAEhC,GAAKihB,KAAOnvB,SAAZ,CAAwBmvB,GAAK,UAAUzX,OAAV,EAAL,CAExByX,GAAGjI,SAAH,CAAc9mB,CAAd,CAAiB6N,CAAjB,CAAoBC,CAApB,EAEA,KAAKqvB,WAAL,CAAkBpO,EAAlB,EAEA,WAAA,CAEA,CAVD,CAYA,CAlBM,EA7HkE,CAiJzErL,OAAQ,UAAY,CAEnB,OAAA,CAEA,sBAAO,CAAiBrL,MAAjB,CAA0B,CAEhC,GAAK4rB,MAAQrkC,SAAb,CAAyBqkC,IAAM,UAAU/H,QAAV,EAAN,CAEzB+H,IAAIvgB,MAAJ,CAAYrL,MAAZ,EAEA4rB,IAAIjF,YAAJ,GAEA,KAAK7B,WAAL,CAAkB8G,IAAI5sB,MAAtB,EAEA,CAVD,CAYA,CAhBO,EAjJiE,CAmKzE6sB,mBAAoB,4BAAW9lB,QAAX,CAAsB,CAEzC,UAAY,IAAZ,CAEA,YAAcA,SAASzd,KAAT,GAAmB,IAAnB,CAA0Byd,SAASzd,KAAT,CAAe8M,KAAzC,CAAiD7N,SAA/D,CACA,eAAiBwe,SAASK,UAA1B,CAEA,cAAgBA,WAAWuI,QAAX,CAAoBvZ,KAApC,CACA,YAAcgR,WAAWhG,MAAX,GAAsB7Y,SAAtB,CAAkC6e,WAAWhG,MAAX,CAAkBhL,KAApD,CAA4D7N,SAA1E,CACA,WAAa6e,WAAWzT,KAAX,GAAqBpL,SAArB,CAAiC6e,WAAWzT,KAAX,CAAiByC,KAAlD,CAA0D7N,SAAvE,CACA,QAAU6e,WAAW0lB,EAAX,GAAkBvkC,SAAlB,CAA8B6e,WAAW0lB,EAAX,CAAc12B,KAA5C,CAAoD7N,SAA9D,CACA,SAAW6e,WAAW2lB,GAAX,GAAmBxkC,SAAnB,CAA+B6e,WAAW2lB,GAAX,CAAe32B,KAA9C,CAAsD7N,SAAjE,CAEA,GAAKykC,OAASzkC,SAAd,CAA0B,KAAKmjC,aAAL,CAAoB,CAApB,EAA0B,EAA1B,CAE1B,gBAAkB,EAAlB,CACA,YAAc,EAAd,CACA,aAAe,EAAf,CAEA,IAAM,MAAQ,CAAR,CAAW9iB,EAAI,CAArB,CAAwB3D,EAAIoC,UAAU7d,MAAtC,CAA8Cyb,GAAK,CAAL,CAAQ2D,GAAK,CAA3D,CAA+D,CAE9D1B,MAAMD,QAAN,CAAegV,IAAf,CAAqB,UAAU9iB,OAAV,CAAmBkO,UAAWpC,CAAX,CAAnB,CAAmCoC,UAAWpC,EAAI,CAAf,CAAnC,CAAuDoC,UAAWpC,EAAI,CAAf,CAAvD,CAArB,EAEA,GAAKgoB,UAAY1kC,SAAjB,CAA6B,CAE5B2kC,YAAYjR,IAAZ,CAAkB,UAAU9iB,OAAV,CAAmB8zB,QAAShoB,CAAT,CAAnB,CAAiCgoB,QAAShoB,EAAI,CAAb,CAAjC,CAAmDgoB,QAAShoB,EAAI,CAAb,CAAnD,CAAlB,EAEA,CAED,GAAK6kB,SAAWvhC,SAAhB,CAA4B,CAE3B2e,MAAM4iB,MAAN,CAAa7N,IAAb,CAAmB,UAAUtqB,KAAV,CAAiBm4B,OAAQ7kB,CAAR,CAAjB,CAA8B6kB,OAAQ7kB,EAAI,CAAZ,CAA9B,CAA+C6kB,OAAQ7kB,EAAI,CAAZ,CAA/C,CAAnB,EAEA,CAED,GAAKkoB,MAAQ5kC,SAAb,CAAyB,CAExB6kC,QAAQnR,IAAR,CAAc,UAAUzf,OAAV,CAAmB2wB,IAAKvkB,CAAL,CAAnB,CAA6BukB,IAAKvkB,EAAI,CAAT,CAA7B,CAAd,EAEA,CAED,GAAKokB,OAASzkC,SAAd,CAA0B,CAEzB8kC,SAASpR,IAAT,CAAe,UAAUzf,OAAV,CAAmBwwB,KAAMpkB,CAAN,CAAnB,CAA8BokB,KAAMpkB,EAAI,CAAV,CAA9B,CAAf,EAEA,CAED,CAED,gBAAA,CAAkB7O,CAAlB,CAAqBjI,CAArB,CAAwBoE,CAAxB,CAA2B8yB,aAA3B,CAA2C,CAE1C,kBAAoBiE,UAAY1kC,SAAZ,CAAwB,CAAE2kC,YAAanzB,CAAb,EAAiB5F,KAAjB,EAAF,CAA4B+4B,YAAap7B,CAAb,EAAiBqC,KAAjB,EAA5B,CAAsD+4B,YAAah3B,CAAb,EAAiB/B,KAAjB,EAAtD,CAAxB,CAA2G,EAA/H,CACA,iBAAmB21B,SAAWvhC,SAAX,CAAuB,CAAE2e,MAAM4iB,MAAN,CAAc/vB,CAAd,EAAkB5F,KAAlB,EAAF,CAA6B+S,MAAM4iB,MAAN,CAAch4B,CAAd,EAAkBqC,KAAlB,EAA7B,CAAwD+S,MAAM4iB,MAAN,CAAc5zB,CAAd,EAAkB/B,KAAlB,EAAxD,CAAvB,CAA6G,EAAhI,CAEA,SAAW,UAAU40B,KAAV,CAAiBhvB,CAAjB,CAAoBjI,CAApB,CAAuBoE,CAAvB,CAA0B+yB,aAA1B,CAAyCC,YAAzC,CAAuDF,aAAvD,CAAX,CAEA9hB,MAAMukB,KAAN,CAAYxP,IAAZ,CAAkBwQ,IAAlB,EAEA,GAAKU,MAAQ5kC,SAAb,CAAyB,CAExB2e,MAAMwkB,aAAN,CAAqB,CAArB,EAAyBzP,IAAzB,CAA+B,CAAEmR,QAASrzB,CAAT,EAAa5F,KAAb,EAAF,CAAwBi5B,QAASt7B,CAAT,EAAaqC,KAAb,EAAxB,CAA8Ci5B,QAASl3B,CAAT,EAAa/B,KAAb,EAA9C,CAA/B,EAEA,CAED,GAAK64B,OAASzkC,SAAd,CAA0B,CAEzB2e,MAAMwkB,aAAN,CAAqB,CAArB,EAAyBzP,IAAzB,CAA+B,CAAEoR,SAAUtzB,CAAV,EAAc5F,KAAd,EAAF,CAAyBk5B,SAAUv7B,CAAV,EAAcqC,KAAd,EAAzB,CAAgDk5B,SAAUn3B,CAAV,EAAc/B,KAAd,EAAhD,CAA/B,EAEA,CAED,CAED,GAAK61B,UAAYzhC,SAAjB,CAA6B,CAE5B,WAAawe,SAASumB,MAAtB,CAEA,GAAKA,OAAO9jC,MAAP,CAAgB,CAArB,CAAyB,CAExB,IAAM,MAAQ,CAAd,CAAiByb,EAAIqoB,OAAO9jC,MAA5B,CAAoCyb,GAApC,CAA2C,CAE1C,UAAYqoB,OAAQroB,CAAR,CAAZ,CAEA,UAAYsoB,MAAM3pB,KAAlB,CACA,UAAY2pB,MAAMhE,KAAlB,CAEA,IAAM,MAAQ3lB,KAAR,CAAe8oB,GAAK9oB,MAAQ2lB,KAAlC,CAAyC3gB,EAAI8jB,EAA7C,CAAiD9jB,GAAK,CAAtD,CAA0D,CAEzD4kB,QAASxD,QAASphB,CAAT,CAAT,CAAuBohB,QAASphB,EAAI,CAAb,CAAvB,CAAyCohB,QAASphB,EAAI,CAAb,CAAzC,CAA2D2kB,MAAMvE,aAAjE,EAEA,CAED,CAED,CAjBD,IAiBO,CAEN,IAAM,MAAQ,CAAd,CAAiB/jB,EAAI+kB,QAAQxgC,MAA7B,CAAqCyb,GAAK,CAA1C,CAA8C,CAE7CuoB,QAASxD,QAAS/kB,CAAT,CAAT,CAAuB+kB,QAAS/kB,EAAI,CAAb,CAAvB,CAAyC+kB,QAAS/kB,EAAI,CAAb,CAAzC,EAEA,CAED,CAED,CA/BD,IA+BO,CAEN,IAAM,MAAQ,CAAd,CAAiBA,EAAIoC,UAAU7d,MAAV,CAAmB,CAAxC,CAA2Cyb,GAAK,CAAhD,CAAoD,CAEnDuoB,QAASvoB,CAAT,CAAYA,EAAI,CAAhB,CAAmBA,EAAI,CAAvB,EAEA,CAED,CAED,KAAKwoB,kBAAL,GAEA,GAAK1mB,SAASilB,WAAT,GAAyB,IAA9B,CAAqC,CAEpC,KAAKA,WAAL,CAAmBjlB,SAASilB,WAAT,CAAqB73B,KAArB,EAAnB,CAEA,CAED,GAAK4S,SAASwP,cAAT,GAA4B,IAAjC,CAAwC,CAEvC,KAAKA,cAAL,CAAsBxP,SAASwP,cAAT,CAAwBpiB,KAAxB,EAAtB,CAEA,CAED,WAAA,CAEA,CApSwE,CAsSzEuK,OAAQ,iBAAY,CAEnB,KAAKiuB,kBAAL,GAEA,WAAa,KAAKX,WAAL,CAAiBttB,MAAjB,GAA0Bd,MAA1B,EAAb,CAEA,KAAKqI,SAAL,CAAgB5P,OAAO1N,CAAvB,CAA0B0N,OAAOG,CAAjC,CAAoCH,OAAOI,CAA3C,EAEA,aAAA,CAEA,CAhTwE,CAkTzE+C,UAAW,oBAAY,CAEtB,KAAKgd,qBAAL,GAEA,WAAa,KAAKD,cAAL,CAAoB7X,MAAjC,CACA,WAAa,KAAK6X,cAAL,CAAoB5U,MAAjC,CAEA,MAAQA,SAAW,CAAX,CAAe,CAAf,CAAmB,IAAMA,MAAjC,CAEA,WAAa,UAAU1B,OAAV,EAAb,CACAD,OAAOjO,GAAP,CACCgB,CADD,CACI,CADJ,CACO,CADP,CACU,CAAEA,CAAF,CAAM2L,OAAO/V,CADvB,CAEC,CAFD,CAEIoK,CAFJ,CAEO,CAFP,CAEU,CAAEA,CAAF,CAAM2L,OAAOlI,CAFvB,CAGC,CAHD,CAGI,CAHJ,CAGOzD,CAHP,CAGU,CAAEA,CAAF,CAAM2L,OAAOjI,CAHvB,CAIC,CAJD,CAII,CAJJ,CAIO,CAJP,CAIU,CAJV,EAOA,KAAKqvB,WAAL,CAAkB9lB,MAAlB,EAEA,WAAA,CAEA,CAvUwE,CAyUzEytB,mBAAoB,6BAAY,CAE/B,OAAS,UAAUt0B,OAAV,EAAT,CAA8Bu0B,GAAK,UAAUv0B,OAAV,EAAnC,CAEA,IAAM,MAAQ,CAAR,CAAWw0B,GAAK,KAAKlC,KAAL,CAAWjiC,MAAjC,CAAyC+S,EAAIoxB,EAA7C,CAAiDpxB,GAAjD,CAAwD,CAEvD,SAAW,KAAKkvB,KAAL,CAAYlvB,CAAZ,CAAX,CAEA,OAAS,KAAK0K,QAAL,CAAewlB,KAAK1yB,CAApB,CAAT,CACA,OAAS,KAAKkN,QAAL,CAAewlB,KAAK36B,CAApB,CAAT,CACA,OAAS,KAAKmV,QAAL,CAAewlB,KAAKv2B,CAApB,CAAT,CAEA03B,GAAG5wB,UAAH,CAAe6wB,EAAf,CAAmBC,EAAnB,EACAJ,GAAG1wB,UAAH,CAAe+wB,EAAf,CAAmBD,EAAnB,EACAF,GAAGptB,KAAH,CAAUktB,EAAV,EAEAE,GAAGp0B,SAAH,GAEAizB,KAAKrrB,MAAL,CAAYjP,IAAZ,CAAkBy7B,EAAlB,EAEA,CAED,CA/VwE,CAiWzEI,qBAAsB,8BAAWC,YAAX,CAA0B,CAE/C,GAAKA,eAAiB1lC,SAAtB,CAAkC0lC,aAAe,IAAf,CAElC,KAAA,CAAOC,EAAP,CAAW3xB,CAAX,CAAcoxB,EAAd,CAAkBlB,IAAlB,CAAwBxlB,QAAxB,CAEAA,SAAW,SAAA,CAAW,KAAKA,QAAL,CAAczd,MAAzB,CAAX,CAEA,IAAMmQ,EAAI,CAAJ,CAAOu0B,GAAK,KAAKjnB,QAAL,CAAczd,MAAhC,CAAwCmQ,EAAIu0B,EAA5C,CAAgDv0B,GAAhD,CAAuD,CAEtDsN,SAAUtN,CAAV,EAAgB,UAAUR,OAAV,EAAhB,CAEA,CAED,GAAK80B,YAAL,CAAoB;;CAKnB,MAAA,CAAQH,EAAR,CAAYD,EAAZ,CACA,OAAS,UAAU10B,OAAV,EAAT,CAA8Bu0B,GAAK,UAAUv0B,OAAV,EAAnC,CAEA,IAAMoD,EAAI,CAAJ,CAAOoxB,GAAK,KAAKlC,KAAL,CAAWjiC,MAA7B,CAAqC+S,EAAIoxB,EAAzC,CAA6CpxB,GAA7C,CAAoD,CAEnDkwB,KAAO,KAAKhB,KAAL,CAAYlvB,CAAZ,CAAP,CAEAwxB,GAAK,KAAK9mB,QAAL,CAAewlB,KAAK1yB,CAApB,CAAL,CACA+zB,GAAK,KAAK7mB,QAAL,CAAewlB,KAAK36B,CAApB,CAAL,CACA+7B,GAAK,KAAK5mB,QAAL,CAAewlB,KAAKv2B,CAApB,CAAL,CAEA03B,GAAG5wB,UAAH,CAAe6wB,EAAf,CAAmBC,EAAnB,EACAJ,GAAG1wB,UAAH,CAAe+wB,EAAf,CAAmBD,EAAnB,EACAF,GAAGptB,KAAH,CAAUktB,EAAV,EAEAzmB,SAAUwlB,KAAK1yB,CAAf,EAAmBvE,GAAnB,CAAwBo4B,EAAxB,EACA3mB,SAAUwlB,KAAK36B,CAAf,EAAmB0D,GAAnB,CAAwBo4B,EAAxB,EACA3mB,SAAUwlB,KAAKv2B,CAAf,EAAmBV,GAAnB,CAAwBo4B,EAAxB,EAEA,CAED,CA1BD,IA0BO,CAEN,IAAMrxB,EAAI,CAAJ,CAAOoxB,GAAK,KAAKlC,KAAL,CAAWjiC,MAA7B,CAAqC+S,EAAIoxB,EAAzC,CAA6CpxB,GAA7C,CAAoD,CAEnDkwB,KAAO,KAAKhB,KAAL,CAAYlvB,CAAZ,CAAP,CAEA0K,SAAUwlB,KAAK1yB,CAAf,EAAmBvE,GAAnB,CAAwBi3B,KAAKrrB,MAA7B,EACA6F,SAAUwlB,KAAK36B,CAAf,EAAmB0D,GAAnB,CAAwBi3B,KAAKrrB,MAA7B,EACA6F,SAAUwlB,KAAKv2B,CAAf,EAAmBV,GAAnB,CAAwBi3B,KAAKrrB,MAA7B,EAEA,CAED,CAED,IAAMzH,EAAI,CAAJ,CAAOu0B,GAAK,KAAKjnB,QAAL,CAAczd,MAAhC,CAAwCmQ,EAAIu0B,EAA5C,CAAgDv0B,GAAhD,CAAuD,CAEtDsN,SAAUtN,CAAV,EAAcH,SAAd,GAEA,CAED,IAAM+C,EAAI,CAAJ,CAAOoxB,GAAK,KAAKlC,KAAL,CAAWjiC,MAA7B,CAAqC+S,EAAIoxB,EAAzC,CAA6CpxB,GAA7C,CAAoD,CAEnDkwB,KAAO,KAAKhB,KAAL,CAAYlvB,CAAZ,CAAP,CAEA,kBAAoBkwB,KAAKxD,aAAzB,CAEA,GAAKA,cAAcz/B,MAAd,GAAyB,CAA9B,CAAkC,CAEjCy/B,cAAe,CAAf,EAAmB92B,IAAnB,CAAyB8U,SAAUwlB,KAAK1yB,CAAf,CAAzB,EACAkvB,cAAe,CAAf,EAAmB92B,IAAnB,CAAyB8U,SAAUwlB,KAAK36B,CAAf,CAAzB,EACAm3B,cAAe,CAAf,EAAmB92B,IAAnB,CAAyB8U,SAAUwlB,KAAKv2B,CAAf,CAAzB,EAEA,CAND,IAMO,CAEN+yB,cAAe,CAAf,EAAqBhiB,SAAUwlB,KAAK1yB,CAAf,EAAmB5F,KAAnB,EAArB,CACA80B,cAAe,CAAf,EAAqBhiB,SAAUwlB,KAAK36B,CAAf,EAAmBqC,KAAnB,EAArB,CACA80B,cAAe,CAAf,EAAqBhiB,SAAUwlB,KAAKv2B,CAAf,EAAmB/B,KAAnB,EAArB,CAEA,CAED,CAED,GAAK,KAAKs3B,KAAL,CAAWjiC,MAAX,CAAoB,CAAzB,CAA6B,CAE5B,KAAK4iC,iBAAL,CAAyB,IAAzB,CAEA,CAED,CAzbwE,CA2bzE+B,oBAAqB,8BAAY,CAEhC,KAAA,CAAOnpB,EAAP,CAAWzI,CAAX,CAAcoxB,EAAd,CAAkBlB,IAAlB;;;CAMA,IAAMlwB,EAAI,CAAJ,CAAOoxB,GAAK,KAAKlC,KAAL,CAAWjiC,MAA7B,CAAqC+S,EAAIoxB,EAAzC,CAA6CpxB,GAA7C,CAAoD,CAEnDkwB,KAAO,KAAKhB,KAAL,CAAYlvB,CAAZ,CAAP,CAEA,GAAK,CAAEkwB,KAAK2B,oBAAZ,CAAmC,CAElC3B,KAAK2B,oBAAL,CAA4B3B,KAAKrrB,MAAL,CAAYjN,KAAZ,EAA5B,CAEA,CAJD,IAIO,CAENs4B,KAAK2B,oBAAL,CAA0Bj8B,IAA1B,CAAgCs6B,KAAKrrB,MAArC,EAEA,CAED,GAAK,CAAEqrB,KAAK4B,uBAAZ,CAAsC5B,KAAK4B,uBAAL,CAA+B,EAA/B,CAEtC,IAAMppB,EAAI,CAAJ,CAAOD,GAAKynB,KAAKxD,aAAL,CAAmBz/B,MAArC,CAA6Cyb,EAAID,EAAjD,CAAqDC,GAArD,CAA4D,CAE3D,GAAK,CAAEwnB,KAAK4B,uBAAL,CAA8BppB,CAA9B,CAAP,CAA2C,CAE1CwnB,KAAK4B,uBAAL,CAA8BppB,CAA9B,EAAoCwnB,KAAKxD,aAAL,CAAoBhkB,CAApB,EAAwB9Q,KAAxB,EAApC,CAEA,CAJD,IAIO,CAENs4B,KAAK4B,uBAAL,CAA8BppB,CAA9B,EAAkC9S,IAAlC,CAAwCs6B,KAAKxD,aAAL,CAAoBhkB,CAApB,CAAxC,EAEA,CAED,CAED;CAID,WAAa,UAAU+B,QAAV,EAAb,CACAsnB,OAAO7C,KAAP,CAAe,KAAKA,KAApB,CAEA,IAAMxmB,EAAI,CAAJ,CAAOD,GAAK,KAAK2mB,YAAL,CAAkBniC,MAApC,CAA4Cyb,EAAID,EAAhD,CAAoDC,GAApD,CAA2D;CAI1D,GAAK,CAAE,KAAK2mB,YAAL,CAAmB3mB,CAAnB,CAAP,CAAgC,CAE/B,KAAK2mB,YAAL,CAAmB3mB,CAAnB,EAAyB,EAAzB,CACA,KAAK2mB,YAAL,CAAmB3mB,CAAnB,EAAuBspB,WAAvB,CAAqC,EAArC,CACA,KAAK3C,YAAL,CAAmB3mB,CAAnB,EAAuBgkB,aAAvB,CAAuC,EAAvC,CAEA,mBAAqB,KAAK2C,YAAL,CAAmB3mB,CAAnB,EAAuBspB,WAA5C,CACA,qBAAuB,KAAK3C,YAAL,CAAmB3mB,CAAnB,EAAuBgkB,aAA9C,CAEA,cAAA,CAAgBA,aAAhB,CAEA,IAAM1sB,EAAI,CAAJ,CAAOoxB,GAAK,KAAKlC,KAAL,CAAWjiC,MAA7B,CAAqC+S,EAAIoxB,EAAzC,CAA6CpxB,GAA7C,CAAoD,CAEnDiyB,WAAa,UAAUr1B,OAAV,EAAb,CACA8vB,cAAgB,CAAElvB,EAAG,UAAUZ,OAAV,EAAL,CAA0BrH,EAAG,UAAUqH,OAAV,EAA7B,CAAkDjD,EAAG,UAAUiD,OAAV,EAArD,CAAhB,CAEAs1B,eAAexS,IAAf,CAAqBuS,UAArB,EACAE,iBAAiBzS,IAAjB,CAAuBgN,aAAvB,EAEA,CAED,CAED,iBAAmB,KAAK2C,YAAL,CAAmB3mB,CAAnB,CAAnB;CAIAqpB,OAAOrnB,QAAP,CAAkB,KAAK0kB,YAAL,CAAmB1mB,CAAnB,EAAuBgC,QAAzC;CAIAqnB,OAAOb,kBAAP,GACAa,OAAON,oBAAP;CAIA,cAAA,CAAgB/E,aAAhB,CAEA,IAAM1sB,EAAI,CAAJ,CAAOoxB,GAAK,KAAKlC,KAAL,CAAWjiC,MAA7B,CAAqC+S,EAAIoxB,EAAzC,CAA6CpxB,GAA7C,CAAoD,CAEnDkwB,KAAO,KAAKhB,KAAL,CAAYlvB,CAAZ,CAAP,CAEAiyB,WAAa5C,aAAa2C,WAAb,CAA0BhyB,CAA1B,CAAb,CACA0sB,cAAgB2C,aAAa3C,aAAb,CAA4B1sB,CAA5B,CAAhB,CAEAiyB,WAAWr8B,IAAX,CAAiBs6B,KAAKrrB,MAAtB,EAEA6nB,cAAclvB,CAAd,CAAgB5H,IAAhB,CAAsBs6B,KAAKxD,aAAL,CAAoB,CAApB,CAAtB,EACAA,cAAcn3B,CAAd,CAAgBK,IAAhB,CAAsBs6B,KAAKxD,aAAL,CAAoB,CAApB,CAAtB,EACAA,cAAc/yB,CAAd,CAAgB/D,IAAhB,CAAsBs6B,KAAKxD,aAAL,CAAoB,CAApB,CAAtB,EAEA,CAED;CAID,IAAM1sB,EAAI,CAAJ,CAAOoxB,GAAK,KAAKlC,KAAL,CAAWjiC,MAA7B,CAAqC+S,EAAIoxB,EAAzC,CAA6CpxB,GAA7C,CAAoD,CAEnDkwB,KAAO,KAAKhB,KAAL,CAAYlvB,CAAZ,CAAP,CAEAkwB,KAAKrrB,MAAL,CAAcqrB,KAAK2B,oBAAnB,CACA3B,KAAKxD,aAAL,CAAqBwD,KAAK4B,uBAA1B,CAEA,CAED,CA9iBwE,CAgjBzEM,gBAAiB,0BAAY,CAE5Bp7B,QAAQC,IAAR,CAAc,sDAAd,EAEA,CApjBwE,CAsjBzEo7B,qBAAsB,+BAAY,CAEjC,MAAQ,CAAR,CACA,aAAe,KAAK3nB,QAApB,CAEA,IAAM,MAAQ,CAAR,CAAWjC,GAAKiC,SAASzd,MAA/B,CAAuCyb,EAAID,EAA3C,CAA+CC,GAA/C,CAAsD,CAErD,GAAKA,EAAI,CAAT,CAAa,CAEZ5F,GAAK4H,SAAUhC,CAAV,EAAclH,UAAd,CAA0BkJ,SAAUhC,EAAI,CAAd,CAA1B,CAAL,CAEA,CAED,KAAK8mB,aAAL,CAAoB9mB,CAApB,EAA0B5F,CAA1B,CAEA,CAED,CAvkBwE,CAykBzEstB,mBAAoB,6BAAY,CAE/B,GAAK,KAAKX,WAAL,GAAqB,IAA1B,CAAiC,CAEhC,KAAKA,WAAL,CAAmB,UAAU9lB,IAAV,EAAnB,CAEA,CAED,KAAK8lB,WAAL,CAAiBnnB,aAAjB,CAAgC,KAAKoC,QAArC,EAEA,CAnlBwE,CAqlBzEuP,sBAAuB,gCAAY,CAElC,GAAK,KAAKD,cAAL,GAAwB,IAA7B,CAAoC,CAEnC,KAAKA,cAAL,CAAsB,UAAU1O,MAAV,EAAtB,CAEA,CAED,KAAK0O,cAAL,CAAoB1R,aAApB,CAAmC,KAAKoC,QAAxC,EAEA,CA/lBwE,CAimBzE4nB,MAAO,eAAW9nB,QAAX,CAAqB/G,MAArB,CAA6B8uB,mBAA7B,CAAmD,CAEzD,GAAK/nB,0BAA0BC,QAA1B,GAAuC,KAA5C,CAAoD,CAEnDzT,QAAQuL,KAAR,CAAe,qEAAf,CAAsFiI,QAAtF,EACA,OAEA,CAED,gBAAA,CACAgoB,aAAe,KAAK9nB,QAAL,CAAczd,MAD7B,CAEAwlC,UAAY,KAAK/nB,QAFjB,CAGAgoB,UAAYloB,SAASE,QAHrB,CAIAioB,OAAS,KAAKzD,KAJd,CAKA0D,OAASpoB,SAAS0kB,KALlB,CAMA2D,KAAO,KAAK1D,aAAL,CAAoB,CAApB,CANP,CAOAsB,KAAOjmB,SAAS2kB,aAAT,CAAwB,CAAxB,CAPP,CASA,GAAKoD,sBAAwBvmC,SAA7B,CAAyCumC,oBAAsB,CAAtB,CAEzC,GAAK9uB,SAAWzX,SAAhB,CAA4B,CAE3BovB,aAAe,UAAU7P,OAAV,GAAoBgC,eAApB,CAAqC9J,MAArC,CAAf,CAEA;CAID,IAAM,MAAQ,CAAR,CAAWgF,GAAKiqB,UAAUzlC,MAAhC,CAAwCyb,EAAID,EAA5C,CAAgDC,GAAhD,CAAuD,CAEtD,WAAagqB,UAAWhqB,CAAX,CAAb,CAEA,eAAiBunB,OAAOr4B,KAAP,EAAjB,CAEA,GAAK6L,SAAWzX,SAAhB,CAA4B8mC,WAAWlwB,YAAX,CAAyBa,MAAzB,EAE5BgvB,UAAU/S,IAAV,CAAgBoT,UAAhB,EAEA;CAID,IAAMpqB,EAAI,CAAJ,CAAOD,GAAKmqB,OAAO3lC,MAAzB,CAAiCyb,EAAID,EAArC,CAAyCC,GAAzC,CAAgD,CAE/C,SAAWkqB,OAAQlqB,CAAR,CAAX,CAAwBqqB,QAAxB,CAAkCluB,MAAlC,CAA0CzN,KAA1C,CACA47B,kBAAoB9C,KAAKxD,aADzB,CAEAuG,iBAAmB/C,KAAKvD,YAFxB,CAIAoG,SAAW,UAAUvG,KAAV,CAAiB0D,KAAK1yB,CAAL,CAASg1B,YAA1B,CAAwCtC,KAAK36B,CAAL,CAASi9B,YAAjD,CAA+DtC,KAAKv2B,CAAL,CAAS64B,YAAxE,CAAX,CACAO,SAASluB,MAAT,CAAgBjP,IAAhB,CAAsBs6B,KAAKrrB,MAA3B,EAEA,GAAKuW,eAAiBpvB,SAAtB,CAAkC,CAEjC+mC,SAASluB,MAAT,CAAgBnC,YAAhB,CAA8B0Y,YAA9B,EAA6Cne,SAA7C,GAEA,CAED,IAAM,MAAQ,CAAR,CAAWkzB,GAAK6C,kBAAkB/lC,MAAxC,CAAgDof,EAAI8jB,EAApD,CAAwD9jB,GAAxD,CAA+D,CAE9DxH,OAASmuB,kBAAmB3mB,CAAnB,EAAuBzU,KAAvB,EAAT,CAEA,GAAKwjB,eAAiBpvB,SAAtB,CAAkC,CAEjC6Y,OAAOnC,YAAP,CAAqB0Y,YAArB,EAAoCne,SAApC,GAEA,CAED81B,SAASrG,aAAT,CAAuBhN,IAAvB,CAA6B7a,MAA7B,EAEA,CAEDkuB,SAAS37B,KAAT,CAAexB,IAAf,CAAqBs6B,KAAK94B,KAA1B,EAEA,IAAM,MAAQ,CAAR,CAAW+4B,GAAK8C,iBAAiBhmC,MAAvC,CAA+Cof,EAAI8jB,EAAnD,CAAuD9jB,GAAvD,CAA8D,CAE7DjV,MAAQ67B,iBAAkB5mB,CAAlB,CAAR,CACA0mB,SAASpG,YAAT,CAAsBjN,IAAtB,CAA4BtoB,MAAMQ,KAAN,EAA5B,EAEA,CAEDm7B,SAAStG,aAAT,CAAyByD,KAAKzD,aAAL,CAAqB8F,mBAA9C,CAEAI,OAAOjT,IAAP,CAAaqT,QAAb,EAEA;CAID,IAAMrqB,EAAI,CAAJ,CAAOD,GAAKgoB,KAAKxjC,MAAvB,CAA+Byb,EAAID,EAAnC,CAAuCC,GAAvC,CAA8C,CAE7C,OAAS+nB,KAAM/nB,CAAN,CAAT,CAAoBwqB,OAAS,EAA7B,CAEA,GAAK3C,KAAOvkC,SAAZ,CAAwB,CAEvB,SAEA,CAED,IAAM,MAAQ,CAAR,CAAWmkC,GAAKI,GAAGtjC,MAAzB,CAAiCof,EAAI8jB,EAArC,CAAyC9jB,GAAzC,CAAgD,CAE/C6mB,OAAOxT,IAAP,CAAa6Q,GAAIlkB,CAAJ,EAAQzU,KAAR,EAAb,EAEA,CAEDi7B,KAAKnT,IAAL,CAAWwT,MAAX,EAEA,CAED,CA7sBwE,CA+sBzEC,UAAW,mBAAWC,IAAX,CAAkB,CAE5B,GAAKA,sBAAsBvM,IAAtB,GAA+B,KAApC,CAA4C,CAE3C7vB,QAAQuL,KAAR,CAAe,iEAAf,CAAkF6wB,IAAlF,EACA,OAEA,CAEDA,KAAKrK,gBAAL,EAAyBqK,KAAKhI,YAAL,EAAzB,CAEA,KAAKkH,KAAL,CAAYc,KAAK5oB,QAAjB,CAA2B4oB,KAAK3vB,MAAhC,EAEA,CA5tBwE;;;;KAouBzE4vB,cAAe,wBAAY,CAE1B,gBAAkB,EAAlB;CACA,WAAa,EAAb,CAAiBC,QAAU,EAA3B,CAEA,KAAA,CAAOjH,GAAP,CACA,oBAAsB,CAAtB;CACA,cAAgBpgC,KAAKC,GAAL,CAAU,EAAV,CAAcqnC,eAAd,CAAhB,CACA,KAAA,CAAO9qB,EAAP,CAAWynB,IAAX,CACA,WAAA,CAAa7jB,CAAb,CAAgB8jB,EAAhB,CAEA,IAAMznB,EAAI,CAAJ,CAAOD,GAAK,KAAKiC,QAAL,CAAczd,MAAhC,CAAwCyb,EAAID,EAA5C,CAAgDC,GAAhD,CAAuD,CAEtDtL,EAAI,KAAKsN,QAAL,CAAehC,CAAf,CAAJ,CACA2jB,IAAMpgC,KAAKkV,KAAL,CAAY/D,EAAEhR,CAAF,CAAMonC,SAAlB,EAAgC,GAAhC,CAAsCvnC,KAAKkV,KAAL,CAAY/D,EAAEnD,CAAF,CAAMu5B,SAAlB,CAAtC,CAAsE,GAAtE,CAA4EvnC,KAAKkV,KAAL,CAAY/D,EAAElD,CAAF,CAAMs5B,SAAlB,CAAlF,CAEA,GAAKC,YAAapH,GAAb,IAAuBrgC,SAA5B,CAAwC,CAEvCynC,YAAapH,GAAb,EAAqB3jB,CAArB,CACAgrB,OAAOhU,IAAP,CAAa,KAAKhV,QAAL,CAAehC,CAAf,CAAb,EACA4qB,QAAS5qB,CAAT,EAAegrB,OAAOzmC,MAAP,CAAgB,CAA/B,CAEA,CAND,IAMO;CAGNqmC,QAAS5qB,CAAT,EAAe4qB,QAASG,YAAapH,GAAb,CAAT,CAAf,CAEA,CAED;;CAKD,wBAA0B,EAA1B,CAEA,IAAM3jB,EAAI,CAAJ,CAAOD,GAAK,KAAKymB,KAAL,CAAWjiC,MAA7B,CAAqCyb,EAAID,EAAzC,CAA6CC,GAA7C,CAAoD,CAEnDwnB,KAAO,KAAKhB,KAAL,CAAYxmB,CAAZ,CAAP,CAEAwnB,KAAK1yB,CAAL,CAAS81B,QAASpD,KAAK1yB,CAAd,CAAT,CACA0yB,KAAK36B,CAAL,CAAS+9B,QAASpD,KAAK36B,CAAd,CAAT,CACA26B,KAAKv2B,CAAL,CAAS25B,QAASpD,KAAKv2B,CAAd,CAAT,CAEA8zB,QAAU,CAAEyC,KAAK1yB,CAAP,CAAU0yB,KAAK36B,CAAf,CAAkB26B,KAAKv2B,CAAvB,CAAV,CAEA;CAIA,IAAM,MAAQ,CAAd,CAAiBsW,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9B,GAAKwd,QAASxd,CAAT,IAAiBwd,QAAS,CAAExd,EAAI,CAAN,EAAY,CAArB,CAAtB,CAAiD,CAEhD0jB,AACAC,oBAAoBlU,IAApB,CAA0BhX,CAA1B,EACA,MAEA,CAED,CAED,CAED,IAAMA,EAAIkrB,oBAAoB3mC,MAApB,CAA6B,CAAvC,CAA0Cyb,GAAK,CAA/C,CAAkDA,GAAlD,CAAyD,CAExD,QAAUkrB,oBAAqBlrB,CAArB,CAAV,CAEA,KAAKwmB,KAAL,CAAWlJ,MAAX,CAAmB6N,GAAnB,CAAwB,CAAxB,EAEA,IAAMxnB,EAAI,CAAJ,CAAO8jB,GAAK,KAAKhB,aAAL,CAAmBliC,MAArC,CAA6Cof,EAAI8jB,EAAjD,CAAqD9jB,GAArD,CAA4D,CAE3D,KAAK8iB,aAAL,CAAoB9iB,CAApB,EAAwB2Z,MAAxB,CAAgC6N,GAAhC,CAAqC,CAArC,EAEA,CAED;CAID,SAAW,KAAKnpB,QAAL,CAAczd,MAAd,CAAuBymC,OAAOzmC,MAAzC,CACA,KAAKyd,QAAL,CAAgBgpB,MAAhB,CACA,WAAA,CAEA,CAxzBwE,CA0zBzEI,yBAA0B,mCAAY,CAErC,UAAY,KAAK5E,KAAjB,CACA,WAAaA,MAAMjiC,MAAnB;CAIA,IAAM,MAAQ,CAAd,CAAiByb,EAAIzb,MAArB,CAA6Byb,GAA7B,CAAoC,CAEnCwmB,MAAOxmB,CAAP,EAAWqrB,GAAX,CAAiBrrB,CAAjB,CAEA;CAID,0BAAA,CAA4BlL,CAA5B,CAA+BjI,CAA/B,CAAmC,CAElC,SAASk3B,aAAF,CAAkBl3B,EAAEk3B,aAA3B,CAEA,CAEDyC,MAAMlH,IAAN,CAAYgM,iBAAZ;CAIA,SAAW,KAAK7E,aAAL,CAAoB,CAApB,CAAX,CACA,SAAW,KAAKA,aAAL,CAAoB,CAApB,CAAX,CAEA,WAAA,CAAa8E,OAAb,CAEA,GAAKpB,MAAQA,KAAK5lC,MAAL,GAAgBA,MAA7B,CAAsCinC,QAAU,EAAV,CACtC,GAAKzD,MAAQA,KAAKxjC,MAAL,GAAgBA,MAA7B,CAAsCgnC,QAAU,EAAV,CAEtC,IAAM,MAAQ,CAAd,CAAiBvrB,EAAIzb,MAArB,CAA6Byb,GAA7B,CAAoC,CAEnC,OAASwmB,MAAOxmB,CAAP,EAAWqrB,GAApB,CAEA,GAAKG,OAAL,CAAeA,QAAQxU,IAAR,CAAcmT,KAAMpI,EAAN,CAAd,EACf,GAAKwJ,OAAL,CAAeA,QAAQvU,IAAR,CAAc+Q,KAAMhG,EAAN,CAAd,EAEf,CAED,GAAKyJ,OAAL,CAAe,KAAK/E,aAAL,CAAoB,CAApB,EAA0B+E,OAA1B,CACf,GAAKD,OAAL,CAAe,KAAK9E,aAAL,CAAoB,CAApB,EAA0B8E,OAA1B,CAEf,CAv2BwE,CAy2BzE3I,OAAQ,iBAAY,CAEnB,SAAW,CACVO,SAAU,CACTC,QAAS,GADA,CAETtG,KAAM,UAFG,CAGTuG,UAAW,iBAHF,CADA,CAAX;CAUAO,KAAKzQ,IAAL,CAAY,KAAKA,IAAjB,CACAyQ,KAAK9G,IAAL,CAAY,KAAKA,IAAjB,CACA,GAAK,KAAKj5B,IAAL,GAAc,EAAnB,CAAwB+/B,KAAK//B,IAAL,CAAY,KAAKA,IAAjB,CAExB,GAAK,KAAK4nC,UAAL,GAAoBnoC,SAAzB,CAAqC,CAEpC,eAAiB,KAAKmoC,UAAtB,CAEA,IAAM,OAAN,cAAA,CAA8B,CAE7B,GAAKA,WAAY9H,GAAZ,IAAsBrgC,SAA3B,CAAuCsgC,KAAMD,GAAN,EAAc8H,WAAY9H,GAAZ,CAAd,CAEvC,CAED,WAAA,CAEA,CAED,aAAe,EAAf,CAEA,IAAM,MAAQ,CAAd,CAAiB3jB,EAAI,KAAKgC,QAAL,CAAczd,MAAnC,CAA2Cyb,GAA3C,CAAkD,CAEjD,WAAa,KAAKgC,QAAL,CAAehC,CAAf,CAAb,CACAgC,SAASgV,IAAT,CAAeuQ,OAAO7jC,CAAtB,CAAyB6jC,OAAOh2B,CAAhC,CAAmCg2B,OAAO/1B,CAA1C,EAEA,CAED,UAAY,EAAZ,CACA,YAAc,EAAd,CACA,gBAAkB,EAAlB,CACA,WAAa,EAAb,CACA,eAAiB,EAAjB,CACA,QAAU,EAAV,CACA,YAAc,EAAd,CAEA,IAAM,MAAQ,CAAd,CAAiBwO,EAAI,KAAKwmB,KAAL,CAAWjiC,MAAhC,CAAwCyb,GAAxC,CAA+C,CAE9C,SAAW,KAAKwmB,KAAL,CAAYxmB,CAAZ,CAAX,CAEA,gBAAkB,IAAlB,CACA,cAAgB,KAAhB;CACA,oBAAsB,KAAKymB,aAAL,CAAoB,CAApB,EAAyBzmB,CAAzB,IAAiC1c,SAAvD,CACA,kBAAoBkkC,KAAKrrB,MAAL,CAAY5X,MAAZ,GAAuB,CAA3C,CACA,wBAA0BijC,KAAKxD,aAAL,CAAmBz/B,MAAnB,CAA4B,CAAtD,CACA,iBAAmBijC,KAAK94B,KAAL,CAAW/B,CAAX,GAAiB,CAAjB,EAAsB66B,KAAK94B,KAAL,CAAW9B,CAAX,GAAiB,CAAvC,EAA4C46B,KAAK94B,KAAL,CAAW7B,CAAX,GAAiB,CAAhF,CACA,uBAAyB26B,KAAKvD,YAAL,CAAkB1/B,MAAlB,CAA2B,CAApD,CAEA,aAAe,CAAf,CAEAmnC,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqB,CAArB,CAAX;CACAA,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqBE,WAArB,CAAX,CACAF,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqBG,SAArB,CAAX,CACAH,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqBI,eAArB,CAAX,CACAJ,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqBK,aAArB,CAAX,CACAL,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqBM,mBAArB,CAAX,CACAN,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqBO,YAArB,CAAX,CACAP,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqBQ,kBAArB,CAAX,CAEA1F,MAAMxP,IAAN,CAAY0U,QAAZ,EACAlF,MAAMxP,IAAN,CAAYwQ,KAAK1yB,CAAjB,CAAoB0yB,KAAK36B,CAAzB,CAA4B26B,KAAKv2B,CAAjC,EACAu1B,MAAMxP,IAAN,CAAYwQ,KAAKzD,aAAjB,EAEA,GAAK+H,eAAL,CAAuB,CAEtB,kBAAoB,KAAKrF,aAAL,CAAoB,CAApB,EAAyBzmB,CAAzB,CAApB,CAEAwmB,MAAMxP,IAAN,CACCmV,WAAY1F,cAAe,CAAf,CAAZ,CADD,CAEC0F,WAAY1F,cAAe,CAAf,CAAZ,CAFD,CAGC0F,WAAY1F,cAAe,CAAf,CAAZ,CAHD,EAMA,CAED,GAAKsF,aAAL,CAAqB,CAEpBvF,MAAMxP,IAAN,CAAYoV,eAAgB5E,KAAKrrB,MAArB,CAAZ,EAEA,CAED,GAAK6vB,mBAAL,CAA2B,CAE1B,kBAAoBxE,KAAKxD,aAAzB,CAEAwC,MAAMxP,IAAN,CACCoV,eAAgBpI,cAAe,CAAf,CAAhB,CADD,CAECoI,eAAgBpI,cAAe,CAAf,CAAhB,CAFD,CAGCoI,eAAgBpI,cAAe,CAAf,CAAhB,CAHD,EAMA,CAED,GAAKiI,YAAL,CAAoB,CAEnBzF,MAAMxP,IAAN,CAAYqV,cAAe7E,KAAK94B,KAApB,CAAZ,EAEA,CAED,GAAKw9B,kBAAL,CAA0B,CAEzB,iBAAmB1E,KAAKvD,YAAxB,CAEAuC,MAAMxP,IAAN,CACCqV,cAAepI,aAAc,CAAd,CAAf,CADD,CAECoI,cAAepI,aAAc,CAAd,CAAf,CAFD,CAGCoI,cAAepI,aAAc,CAAd,CAAf,CAHD,EAMA,CAED,CAED,eAAA,CAAiBh3B,KAAjB,CAAwByd,QAAxB,CAAkC4hB,OAAlC,CAA4C,CAE3C,eAAiBr/B,MAAU,GAAKyd,QAAzB,CAAsCzd,MAAU,EAAI,GAAKyd,QAAT,CAAvD,CAEA,CAED,uBAAA,CAAyBvO,MAAzB,CAAkC,CAEjC,SAAWA,OAAOzY,CAAP,CAASO,QAAT,GAAsBkY,OAAO5K,CAAP,CAAStN,QAAT,EAAtB,CAA4CkY,OAAO3K,CAAP,CAASvN,QAAT,EAAvD,CAEA,GAAKsoC,YAAaC,IAAb,IAAwBlpC,SAA7B,CAAyC,CAExC,mBAAoBkpC,IAAb,CAAP,CAEA,CAEDD,YAAaC,IAAb,EAAsBxE,QAAQzjC,MAAR,CAAiB,CAAvC,CACAyjC,QAAQhR,IAAR,CAAc7a,OAAOzY,CAArB,CAAwByY,OAAO5K,CAA/B,CAAkC4K,OAAO3K,CAAzC,EAEA,mBAAoBg7B,IAAb,CAAP,CAEA,CAED,sBAAA,CAAwB99B,KAAxB,CAAgC,CAE/B,SAAWA,MAAM/B,CAAN,CAAQ1I,QAAR,GAAqByK,MAAM9B,CAAN,CAAQ3I,QAAR,EAArB,CAA0CyK,MAAM7B,CAAN,CAAQ5I,QAAR,EAArD,CAEA,GAAKwoC,WAAYD,IAAZ,IAAuBlpC,SAA5B,CAAwC,CAEvC,kBAAmBkpC,IAAZ,CAAP,CAEA,CAEDC,WAAYD,IAAZ,EAAqB3H,OAAOtgC,MAA5B,CACAsgC,OAAO7N,IAAP,CAAatoB,MAAMgB,MAAN,EAAb,EAEA,kBAAmB88B,IAAZ,CAAP,CAEA,CAED,mBAAA,CAAqB3E,EAArB,CAA0B,CAEzB,SAAWA,GAAGnkC,CAAH,CAAKO,QAAL,GAAkB4jC,GAAGt2B,CAAH,CAAKtN,QAAL,EAA7B,CAEA,GAAKyoC,QAASF,IAAT,IAAoBlpC,SAAzB,CAAqC,CAEpC,eAAgBkpC,IAAT,CAAP,CAEA,CAEDE,QAASF,IAAT,EAAkBtE,IAAI3jC,MAAJ,CAAa,CAA/B,CACA2jC,IAAIlR,IAAJ,CAAU6Q,GAAGnkC,CAAb,CAAgBmkC,GAAGt2B,CAAnB,EAEA,eAAgBi7B,IAAT,CAAP,CAEA,CAED5I,KAAKA,IAAL,CAAY,EAAZ,CAEAA,KAAKA,IAAL,CAAU5hB,QAAV,CAAqBA,QAArB,CACA4hB,KAAKA,IAAL,CAAUoE,OAAV,CAAoBA,OAApB,CACA,GAAKnD,OAAOtgC,MAAP,CAAgB,CAArB,CAAyBq/B,KAAKA,IAAL,CAAUiB,MAAV,CAAmBA,MAAnB,CACzB,GAAKqD,IAAI3jC,MAAJ,CAAa,CAAlB,CAAsBq/B,KAAKA,IAAL,CAAUsE,GAAV,CAAgB,CAAEA,GAAF,CAAhB;CACtBtE,KAAKA,IAAL,CAAU4C,KAAV,CAAkBA,KAAlB,CAEA,WAAA,CAEA,CAxiCwE,CA0iCzEt3B,MAAO,gBAAY;;;;;;;;;;;;;;;;;;;;;;KA0BlB,iBAAiB6S,QAAV,GAAqB7U,IAArB,CAA2B,IAA3B,CAAP,CAEA,CAtkCwE,CAwkCzEA,KAAM,cAAW1I,MAAX,CAAoB,CAEzB,KAAKwd,QAAL,CAAgB,EAAhB,CACA,KAAKwkB,KAAL,CAAa,EAAb,CACA,KAAKC,aAAL,CAAqB,CAAE,EAAF,CAArB,CAEA,aAAejiC,OAAOwd,QAAtB,CAEA,IAAM,MAAQ,CAAR,CAAWjC,GAAKiC,SAASzd,MAA/B,CAAuCyb,EAAID,EAA3C,CAA+CC,GAA/C,CAAsD,CAErD,KAAKgC,QAAL,CAAcgV,IAAd,CAAoBhV,SAAUhC,CAAV,EAAc9Q,KAAd,EAApB,EAEA,CAED,UAAY1K,OAAOgiC,KAAnB,CAEA,IAAM,MAAQ,CAAR,CAAWzmB,GAAKymB,MAAMjiC,MAA5B,CAAoCyb,EAAID,EAAxC,CAA4CC,GAA5C,CAAmD,CAElD,KAAKwmB,KAAL,CAAWxP,IAAX,CAAiBwP,MAAOxmB,CAAP,EAAW9Q,KAAX,EAAjB,EAEA,CAED,IAAM,MAAQ,CAAR,CAAW6Q,GAAKvb,OAAOiiC,aAAP,CAAqBliC,MAA3C,CAAmDyb,EAAID,EAAvD,CAA2DC,GAA3D,CAAkE,CAEjE,kBAAoBxb,OAAOiiC,aAAP,CAAsBzmB,CAAtB,CAApB,CAEA,GAAK,KAAKymB,aAAL,CAAoBzmB,CAApB,IAA4B1c,SAAjC,CAA6C,CAE5C,KAAKmjC,aAAL,CAAoBzmB,CAApB,EAA0B,EAA1B,CAEA,CAED,IAAM,MAAQ,CAAR,CAAWynB,GAAKhB,cAAcliC,MAApC,CAA4Cof,EAAI8jB,EAAhD,CAAoD9jB,GAApD,CAA2D,CAE1D,QAAU8iB,cAAe9iB,CAAf,CAAV,CAA8BgpB,QAAU,EAAxC,CAEA,IAAM,MAAQ,CAAR,CAAWC,GAAK1E,IAAI3jC,MAA1B,CAAkCmxB,EAAIkX,EAAtC,CAA0ClX,GAA1C,CAAiD,CAEhD,OAASwS,IAAKxS,CAAL,CAAT,CAEAiX,QAAQ3V,IAAR,CAAc6Q,GAAG34B,KAAH,EAAd,EAEA,CAED,KAAKu3B,aAAL,CAAoBzmB,CAApB,EAAwBgX,IAAxB,CAA8B2V,OAA9B,EAEA,CAED,CAED,WAAA,CAEA,CA5nCwE,CA8nCzEE,QAAS,kBAAY,CAEpB,KAAKtP,aAAL,CAAoB,CAAET,KAAM,SAAR,CAApB,EAEA,CAloCwE,CAA1E,EAsoCA35B,MAAMojC,eAAN,CAAwB,CAAxB;;;IAQApjC,MAAM2pC,cAAN,CAAuB,UAAY,CAElChpC,OAAOC,cAAP,CAAuB,IAAvB,CAA6B,IAA7B,CAAmC,CAAEkJ,MAAO9J,MAAMojC,eAAN,EAAT,CAAnC,EAEA,KAAKpT,IAAL,CAAYhwB,MAAMI,IAAN,CAAW0vB,YAAX,EAAZ,CAEA,KAAKpvB,IAAL,CAAY,EAAZ,CACA,KAAKi5B,IAAL,CAAY,gBAAZ,CAEA,KAAKiI,OAAL,CAAe,EAAf,CACA,KAAK/iB,QAAL,CAAgB,EAAhB,CACA,KAAKgmB,OAAL,CAAe,EAAf,CACA,KAAKnD,MAAL,CAAc,EAAd,CACA,KAAKqD,GAAL,CAAW,EAAX,CACA,KAAKH,IAAL,CAAY,EAAZ,CAEA,KAAKM,MAAL,CAAc,EAAd,CAEA,KAAK3B,YAAL,CAAoB,EAApB,CAEA,KAAKE,WAAL,CAAmB,EAAnB,CACA,KAAKC,WAAL,CAAmB,EAAnB;CAIA,KAAKE,WAAL,CAAmB,IAAnB,CACA,KAAKzV,cAAL,CAAsB,IAAtB;CAIA,KAAK0V,kBAAL,CAA0B,KAA1B,CACA,KAAKG,iBAAL,CAAyB,KAAzB,CACA,KAAKC,gBAAL,CAAwB,KAAxB,CACA,KAAKF,aAAL,CAAqB,KAArB,CACA,KAAKI,gBAAL,CAAwB,KAAxB,CAEA,CApCD,CAsCAxjC,OAAOK,MAAP,CAAehB,MAAM2pC,cAAN,CAAqBlpC,SAApC,CAA+CT,MAAMy5B,eAAN,CAAsBh5B,SAArE,CAAgF,CAE/E8jC,mBAAoBvkC,MAAM4e,QAAN,CAAene,SAAf,CAAyB8jC,kBAFkC,CAG/EnW,sBAAuBpuB,MAAM4e,QAAN,CAAene,SAAf,CAAyB2tB,qBAH+B,CAK/EiX,mBAAoB,6BAAY,CAE/Bl6B,QAAQC,IAAR,CAAc,sFAAd,EAEA,CAT8E,CAW/Ew6B,qBAAsB,+BAAY,CAEjCz6B,QAAQC,IAAR,CAAc,wFAAd,EAEA,CAf8E,CAiB/Ew+B,cAAe,uBAAWjrB,QAAX,CAAsB,CAEpC,SAAA,CACA,WAAa,EAAb,CACA,iBAAA,CAEA,UAAYA,SAAS0kB,KAArB,CAEA,IAAM,MAAQ,CAAd,CAAiBxmB,EAAIwmB,MAAMjiC,MAA3B,CAAmCyb,GAAnC,CAA0C,CAEzC,SAAWwmB,MAAOxmB,CAAP,CAAX;CAIA,GAAKwnB,KAAKzD,aAAL,GAAuBA,aAA5B,CAA4C,CAE3CA,cAAgByD,KAAKzD,aAArB,CAEA,GAAKuE,QAAUhlC,SAAf,CAA2B,CAE1BglC,MAAMhE,KAAN,CAAgBtkB,EAAI,CAAN,CAAYsoB,MAAM3pB,KAAhC,CACA0pB,OAAOrR,IAAP,CAAasR,KAAb,EAEA,CAEDA,MAAQ,CACP3pB,MAAOqB,EAAI,CADJ,CAEP+jB,cAAeA,aAFR,CAAR,CAKA,CAED,CAED,GAAKuE,QAAUhlC,SAAf,CAA2B,CAE1BglC,MAAMhE,KAAN,CAAgBtkB,EAAI,CAAN,CAAYsoB,MAAM3pB,KAAhC,CACA0pB,OAAOrR,IAAP,CAAasR,KAAb,EAEA,CAED,KAAKD,MAAL,CAAcA,MAAd,CAEA,CA5D8E,CA8D/E2E,aAAc,sBAAWlrB,QAAX,CAAsB,CAEnC,UAAYA,SAAS0kB,KAArB,CACA,aAAe1kB,SAASE,QAAxB,CACA,kBAAoBF,SAAS2kB,aAA7B,CAEA,oBAAsBA,cAAe,CAAf,GAAsBA,cAAe,CAAf,EAAmBliC,MAAnB,CAA4B,CAAxE,CACA,qBAAuBkiC,cAAe,CAAf,GAAsBA,cAAe,CAAf,EAAmBliC,MAAnB,CAA4B,CAAzE;CAIA,iBAAmBud,SAAS4kB,YAA5B,CACA,uBAAyBA,aAAaniC,MAAtC,CAEA,wBAAA,CAEA,GAAK0oC,mBAAqB,CAA1B,CAA8B,CAE7BC,qBAAuB,EAAvB,CAEA,IAAM,MAAQ,CAAd,CAAiBltB,EAAIitB,kBAArB,CAAyCjtB,GAAzC,CAAgD,CAE/CktB,qBAAsBltB,CAAtB,EAA4B,EAA5B,CAEA,CAED,KAAK0mB,YAAL,CAAkBhc,QAAlB,CAA6BwiB,oBAA7B,CAEA,CAED,iBAAmBprB,SAAS6kB,YAA5B,CACA,uBAAyBA,aAAapiC,MAAtC,CAEA,sBAAA,CAEA,GAAK4oC,mBAAqB,CAA1B,CAA8B,CAE7BC,mBAAqB,EAArB,CAEA,IAAM,MAAQ,CAAd,CAAiBptB,EAAImtB,kBAArB,CAAyCntB,GAAzC,CAAgD,CAE/CotB,mBAAoBptB,CAApB,EAA0B,EAA1B,CAEA,CAED,KAAK0mB,YAAL,CAAkBvqB,MAAlB,CAA2BixB,kBAA3B,CAEA;CAID,gBAAkBtrB,SAAS+kB,WAA3B,CACA,gBAAkB/kB,SAAS8kB,WAA3B,CAEA,mBAAqBC,YAAYtiC,MAAZ,GAAuByd,SAASzd,MAArD,CACA,mBAAqBqiC,YAAYriC,MAAZ,GAAuByd,SAASzd,MAArD;CAIA,IAAM,MAAQ,CAAd,CAAiByb,EAAIwmB,MAAMjiC,MAA3B,CAAmCyb,GAAnC,CAA0C,CAEzC,SAAWwmB,MAAOxmB,CAAP,CAAX,CAEA,KAAKgC,QAAL,CAAcgV,IAAd,CAAoBhV,SAAUwlB,KAAK1yB,CAAf,CAApB,CAAwCkN,SAAUwlB,KAAK36B,CAAf,CAAxC,CAA4DmV,SAAUwlB,KAAKv2B,CAAf,CAA5D,EAEA,kBAAoBu2B,KAAKxD,aAAzB,CAEA,GAAKA,cAAcz/B,MAAd,GAAyB,CAA9B,CAAkC,CAEjC,KAAKyjC,OAAL,CAAahR,IAAb,CAAmBgN,cAAe,CAAf,CAAnB,CAAuCA,cAAe,CAAf,CAAvC,CAA2DA,cAAe,CAAf,CAA3D,EAEA,CAJD,IAIO,CAEN,WAAawD,KAAKrrB,MAAlB,CAEA,KAAK6rB,OAAL,CAAahR,IAAb,CAAmB7a,MAAnB,CAA2BA,MAA3B,CAAmCA,MAAnC,EAEA,CAED,iBAAmBqrB,KAAKvD,YAAxB,CAEA,GAAKA,aAAa1/B,MAAb,GAAwB,CAA7B,CAAiC,CAEhC,KAAKsgC,MAAL,CAAY7N,IAAZ,CAAkBiN,aAAc,CAAd,CAAlB,CAAqCA,aAAc,CAAd,CAArC,CAAwDA,aAAc,CAAd,CAAxD,EAEA,CAJD,IAIO,CAEN,UAAYuD,KAAK94B,KAAjB,CAEA,KAAKm2B,MAAL,CAAY7N,IAAZ,CAAkBtoB,KAAlB,CAAyBA,KAAzB,CAAgCA,KAAhC,EAEA,CAED,GAAKo9B,kBAAoB,IAAzB,CAAgC,CAE/B,cAAgBrF,cAAe,CAAf,EAAoBzmB,CAApB,CAAhB,CAEA,GAAKqtB,YAAc/pC,SAAnB,CAA+B,CAE9B,KAAK4kC,GAAL,CAASlR,IAAT,CAAeqW,UAAW,CAAX,CAAf,CAA+BA,UAAW,CAAX,CAA/B,CAA+CA,UAAW,CAAX,CAA/C,EAEA,CAJD,IAIO,CAEN/+B,QAAQC,IAAR,CAAc,0DAAd,CAA0EyR,CAA1E,EAEA,KAAKkoB,GAAL,CAASlR,IAAT,CAAe,UAAUzf,OAAV,EAAf,CAAoC,UAAUA,OAAV,EAApC,CAAyD,UAAUA,OAAV,EAAzD,EAEA,CAED,CAED,GAAK+1B,mBAAqB,IAA1B,CAAiC,CAEhC,cAAgB7G,cAAe,CAAf,EAAoBzmB,CAApB,CAAhB,CAEA,GAAKqtB,YAAc/pC,SAAnB,CAA+B,CAE9B,KAAKykC,IAAL,CAAU/Q,IAAV,CAAgBqW,UAAW,CAAX,CAAhB,CAAgCA,UAAW,CAAX,CAAhC,CAAgDA,UAAW,CAAX,CAAhD,EAEA,CAJD,IAIO,CAEN/+B,QAAQC,IAAR,CAAc,2DAAd,CAA2EyR,CAA3E,EAEA,KAAK+nB,IAAL,CAAU/Q,IAAV,CAAgB,UAAUzf,OAAV,EAAhB,CAAqC,UAAUA,OAAV,EAArC,CAA0D,UAAUA,OAAV,EAA1D,EAEA,CAED;CAID,IAAM,MAAQ,CAAd,CAAiBoM,EAAIspB,kBAArB,CAAyCtpB,GAAzC,CAAgD,CAE/C,gBAAkB+iB,aAAc/iB,CAAd,EAAkB3B,QAApC,CAEAkrB,qBAAsBvpB,CAAtB,EAA0BqT,IAA1B,CAAgCuW,YAAa/F,KAAK1yB,CAAlB,CAAhC,CAAuDy4B,YAAa/F,KAAK36B,CAAlB,CAAvD,CAA8E0gC,YAAa/F,KAAKv2B,CAAlB,CAA9E,EAEA,CAED,IAAM,MAAQ,CAAd,CAAiB0S,EAAIwpB,kBAArB,CAAyCxpB,GAAzC,CAAgD,CAE/C,gBAAkBgjB,aAAchjB,CAAd,EAAkBqgB,aAAlB,CAAiChkB,CAAjC,CAAlB,CAEAotB,mBAAoBzpB,CAApB,EAAwBqT,IAAxB,CAA8BwW,YAAY14B,CAA1C,CAA6C04B,YAAY3gC,CAAzD,CAA4D2gC,YAAYv8B,CAAxE,EAEA;CAID,GAAKw8B,cAAL,CAAsB,CAErB,KAAK5G,WAAL,CAAiB7P,IAAjB,CAAuB6P,YAAaW,KAAK1yB,CAAlB,CAAvB,CAA8C+xB,YAAaW,KAAK36B,CAAlB,CAA9C,CAAqEg6B,YAAaW,KAAKv2B,CAAlB,CAArE,EAEA,CAED,GAAKy8B,cAAL,CAAsB,CAErB,KAAK9G,WAAL,CAAiB5P,IAAjB,CAAuB4P,YAAaY,KAAK1yB,CAAlB,CAAvB,CAA8C8xB,YAAaY,KAAK36B,CAAlB,CAA9C,CAAqE+5B,YAAaY,KAAKv2B,CAAlB,CAArE,EAEA,CAED,CAED,KAAK87B,aAAL,CAAoBjrB,QAApB,EAEA,KAAKklB,kBAAL,CAA0BllB,SAASklB,kBAAnC,CACA,KAAKG,iBAAL,CAAyBrlB,SAASqlB,iBAAlC,CACA,KAAKC,gBAAL,CAAwBtlB,SAASslB,gBAAjC,CACA,KAAKF,aAAL,CAAqBplB,SAASolB,aAA9B,CACA,KAAKI,gBAAL,CAAwBxlB,SAASwlB,gBAAjC,CAEA,WAAA,CAEA,CA3O8E,CA6O/EuF,QAAS,kBAAY,CAEpB,KAAKtP,aAAL,CAAoB,CAAET,KAAM,SAAR,CAApB,EAEA,CAjP8E,CAAhF;;;;IA4PA35B,MAAM+e,cAAN,CAAuB,UAAY,CAElCpe,OAAOC,cAAP,CAAuB,IAAvB,CAA6B,IAA7B,CAAmC,CAAEkJ,MAAO9J,MAAMojC,eAAN,EAAT,CAAnC,EAEA,KAAKpT,IAAL,CAAYhwB,MAAMI,IAAN,CAAW0vB,YAAX,EAAZ,CAEA,KAAKpvB,IAAL,CAAY,EAAZ,CACA,KAAKi5B,IAAL,CAAY,gBAAZ,CAEA,KAAKz4B,KAAL,CAAa,IAAb,CACA,KAAK8d,UAAL,CAAkB,EAAlB,CAEA,KAAKwrB,eAAL,CAAuB,EAAvB,CAEA,KAAKtF,MAAL,CAAc,EAAd,CAEA,KAAKtB,WAAL,CAAmB,IAAnB,CACA,KAAKzV,cAAL,CAAsB,IAAtB,CAEA,KAAKsc,SAAL,CAAiB,CAAEjvB,MAAO,CAAT,CAAY2lB,MAAO3kB,QAAnB,CAAjB,CAEA,CArBD,CAuBA7b,OAAOK,MAAP,CAAehB,MAAM+e,cAAN,CAAqBte,SAApC,CAA+CT,MAAMy5B,eAAN,CAAsBh5B,SAArE,CAAgF,CAE/EiqC,SAAU,mBAAY,CAErB,YAAYxpC,KAAZ,CAEA,CAN8E,CAQ/EypC,SAAU,kBAAWzpC,KAAX,CAAmB,CAE5B,KAAKA,KAAL,CAAaA,KAAb,CAEA,CAZ8E,CAc/E0pC,aAAc,sBAAWlqC,IAAX,CAAiByV,SAAjB,CAA6B,CAE1C,GAAKA,2BAA2B4qB,eAA3B,GAA+C,KAA/C,EAAwD5qB,2BAA2B+sB,0BAA3B,GAA0D,KAAvH,CAA+H,CAE9H/3B,QAAQC,IAAR,CAAc,wEAAd,EAEA,KAAKw/B,YAAL,CAAmBlqC,IAAnB,CAAyB,UAAUqgC,eAAV,CAA2B5/B,UAAW,CAAX,CAA3B,CAA2CA,UAAW,CAAX,CAA3C,CAAzB,EAEA,OAEA,CAED,GAAKT,OAAS,OAAd,CAAwB,CAEvByK,QAAQC,IAAR,CAAc,yEAAd,EACA,KAAKu/B,QAAL,CAAex0B,SAAf,EAEA,OAEA,CAED,KAAK6I,UAAL,CAAiBte,IAAjB,EAA0ByV,SAA1B,CAEA,WAAA,CAEA,CAvC8E,CAyC/E00B,aAAc,sBAAWnqC,IAAX,CAAkB,CAE/B,YAAYse,UAAL,CAAiBte,IAAjB,CAAP,CAEA,CA7C8E,CA+C/EoqC,gBAAiB,yBAAWpqC,IAAX,CAAkB,CAElC,YAAYse,UAAL,CAAiBte,IAAjB,CAAP,CAEA,WAAA,CAEA,CArD8E,CAuD/EqqC,SAAU,kBAAWvvB,KAAX,CAAkB2lB,KAAlB,CAAyBP,aAAzB,CAAyC,CAElD,KAAKsE,MAAL,CAAYrR,IAAZ,CAAkB,CAEjBrY,MAAOA,KAFU,CAGjB2lB,MAAOA,KAHU,CAIjBP,cAAeA,gBAAkBzgC,SAAlB,CAA8BygC,aAA9B,CAA8C,CAJ5C,CAAlB,EAQA,CAjE8E,CAmE/EoK,YAAa,sBAAY,CAExB,KAAK9F,MAAL,CAAc,EAAd,CAEA,CAvE8E,CAyE/E+F,aAAc,sBAAWzvB,KAAX,CAAkB2lB,KAAlB,CAA0B,CAEvC,KAAKsJ,SAAL,CAAejvB,KAAf,CAAuBA,KAAvB,CACA,KAAKivB,SAAL,CAAetJ,KAAf,CAAuBA,KAAvB,CAEA,CA9E8E,CAgF/EzD,YAAa,qBAAW9lB,MAAX,CAAoB,CAEhC,aAAe,KAAKoH,UAAL,CAAgBuI,QAA/B,CAEA,GAAKA,WAAapnB,SAAlB,CAA8B,CAE7ByX,OAAO2I,mBAAP,CAA4BgH,SAASvZ,KAArC,EACAuZ,SAAS2jB,WAAT,CAAuB,IAAvB,CAEA,CAED,WAAa,KAAKlsB,UAAL,CAAgBhG,MAA7B,CAEA,GAAKA,SAAW7Y,SAAhB,CAA4B,CAE3B,iBAAmB,UAAUuf,OAAV,GAAoBgC,eAApB,CAAqC9J,MAArC,CAAnB,CAEA2X,aAAahP,mBAAb,CAAkCvH,OAAOhL,KAAzC,EACAgL,OAAOkyB,WAAP,CAAqB,IAArB,CAEA,CAED,GAAK,KAAKtH,WAAL,GAAqB,IAA1B,CAAiC,CAEhC,KAAKW,kBAAL,GAEA,CAED,GAAK,KAAKpW,cAAL,GAAwB,IAA7B,CAAoC,CAEnC,KAAKC,qBAAL,GAEA,CAED,WAAA,CAEA,CApH8E,CAsH/E6P,QAAS,UAAY;CAIpB,MAAA,CAEA,uBAAO,CAAkBruB,KAAlB,CAA0B,CAEhC,GAAK0f,KAAOnvB,SAAZ,CAAwBmvB,GAAK,UAAUzX,OAAV,EAAL,CAExByX,GAAGvI,aAAH,CAAkBnX,KAAlB,EAEA,KAAK8tB,WAAL,CAAkBpO,EAAlB,EAEA,WAAA,CAEA,CAVD,CAYA,CAlBQ,EAtHsE,CA0I/E4O,QAAS,UAAY;CAIpB,MAAA,CAEA,uBAAO,CAAkBtuB,KAAlB,CAA0B,CAEhC,GAAK0f,KAAOnvB,SAAZ,CAAwBmvB,GAAK,UAAUzX,OAAV,EAAL,CAExByX,GAAGtI,aAAH,CAAkBpX,KAAlB,EAEA,KAAK8tB,WAAL,CAAkBpO,EAAlB,EAEA,WAAA,CAEA,CAVD,CAYA,CAlBQ,EA1IsE,CA8J/E6O,QAAS,UAAY;CAIpB,MAAA,CAEA,uBAAO,CAAkBvuB,KAAlB,CAA0B,CAEhC,GAAK0f,KAAOnvB,SAAZ,CAAwBmvB,GAAK,UAAUzX,OAAV,EAAL,CAExByX,GAAGrI,aAAH,CAAkBrX,KAAlB,EAEA,KAAK8tB,WAAL,CAAkBpO,EAAlB,EAEA,WAAA,CAEA,CAVD,CAYA,CAlBQ,EA9JsE,CAkL/EzR,UAAW,UAAY;CAItB,MAAA,CAEA,yBAAO,CAAoBtd,CAApB,CAAuB6N,CAAvB,CAA0BC,CAA1B,CAA8B,CAEpC,GAAKihB,KAAOnvB,SAAZ,CAAwBmvB,GAAK,UAAUzX,OAAV,EAAL,CAExByX,GAAGxI,eAAH,CAAoBvmB,CAApB,CAAuB6N,CAAvB,CAA0BC,CAA1B,EAEA,KAAKqvB,WAAL,CAAkBpO,EAAlB,EAEA,WAAA,CAEA,CAVD,CAYA,CAlBU,EAlLoE,CAsM/E7I,MAAO,UAAY;CAIlB,MAAA,CAEA,qBAAO,CAAgBlmB,CAAhB,CAAmB6N,CAAnB,CAAsBC,CAAtB,CAA0B,CAEhC,GAAKihB,KAAOnvB,SAAZ,CAAwBmvB,GAAK,UAAUzX,OAAV,EAAL,CAExByX,GAAGjI,SAAH,CAAc9mB,CAAd,CAAiB6N,CAAjB,CAAoBC,CAApB,EAEA,KAAKqvB,WAAL,CAAkBpO,EAAlB,EAEA,WAAA,CAEA,CAVD,CAYA,CAlBM,EAtMwE,CA0N/ErL,OAAQ,UAAY,CAEnB,OAAA,CAEA,sBAAO,CAAiBrL,MAAjB,CAA0B,CAEhC,GAAK4rB,MAAQrkC,SAAb,CAAyBqkC,IAAM,UAAU/H,QAAV,EAAN,CAEzB+H,IAAIvgB,MAAJ,CAAYrL,MAAZ,EAEA4rB,IAAIjF,YAAJ,GAEA,KAAK7B,WAAL,CAAkB8G,IAAI5sB,MAAtB,EAEA,CAVD,CAYA,CAhBO,EA1NuE,CA4O/EtB,OAAQ,iBAAY,CAEnB,KAAKiuB,kBAAL,GAEA,WAAa,KAAKX,WAAL,CAAiBttB,MAAjB,GAA0Bd,MAA1B,EAAb,CAEA,KAAKqI,SAAL,CAAgB5P,OAAO1N,CAAvB,CAA0B0N,OAAOG,CAAjC,CAAoCH,OAAOI,CAA3C,EAEA,aAAA,CAEA,CAtP8E,CAwP/EiQ,cAAe,uBAAWC,MAAX,CAAoB;CAIlC,aAAeA,OAAOI,QAAtB,CAEA,GAAKJ,wBAAwB4c,MAAxB,EAAkC5c,wBAAwB0c,IAA/D,CAAsE,CAErE,cAAgB,UAAU0H,gBAAV,CAA4BhkB,SAASE,QAAT,CAAkBzd,MAAlB,CAA2B,CAAvD,CAA0D,CAA1D,CAAhB,CACA,WAAa,UAAUuhC,gBAAV,CAA4BhkB,SAAS+iB,MAAT,CAAgBtgC,MAAhB,CAAyB,CAArD,CAAwD,CAAxD,CAAb,CAEA,KAAKwpC,YAAL,CAAmB,UAAnB,CAA+B3rB,UAAU8iB,iBAAV,CAA6BpjB,SAASE,QAAtC,CAA/B,EACA,KAAK+rB,YAAL,CAAmB,OAAnB,CAA4BlJ,OAAOD,eAAP,CAAwB9iB,SAAS+iB,MAAjC,CAA5B,EAEA,GAAK/iB,SAASglB,aAAT,EAA0BhlB,SAASglB,aAAT,CAAuBviC,MAAvB,GAAkCud,SAASE,QAAT,CAAkBzd,MAAnF,CAA4F,CAE3F,kBAAoB,UAAUuhC,gBAAV,CAA4BhkB,SAASglB,aAAT,CAAuBviC,MAAnD,CAA2D,CAA3D,CAApB,CAEA,KAAKwpC,YAAL,CAAmB,cAAnB,CAAmCjH,cAAcnC,SAAd,CAAyB7iB,SAASglB,aAAlC,CAAnC,EAEA,CAED,GAAKhlB,SAASwP,cAAT,GAA4B,IAAjC,CAAwC,CAEvC,KAAKA,cAAL,CAAsBxP,SAASwP,cAAT,CAAwBpiB,KAAxB,EAAtB,CAEA,CAED,GAAK4S,SAASilB,WAAT,GAAyB,IAA9B,CAAqC,CAEpC,KAAKA,WAAL,CAAmBjlB,SAASilB,WAAT,CAAqB73B,KAArB,EAAnB,CAEA,CAED,CA5BD,QA4BYwS,wBAAwByc,IAA7B,CAAoC,CAE1C,GAAKrc,0BAA0BC,QAA/B,CAA0C,CAEzC,KAAKirB,YAAL,CAAmBlrB,QAAnB,EAEA,CAED,CAED,WAAA,CAEA,CAtS8E,CAwS/EwsB,iBAAkB,0BAAW5sB,MAAX,CAAoB,CAErC,aAAeA,OAAOI,QAAtB,CAEA,GAAKJ,wBAAwByc,IAA7B,CAAoC,CAEnC,WAAarc,SAASysB,gBAAtB,CAEA,GAAKC,SAAWlrC,SAAhB,CAA4B,CAE3B,YAAY0pC,YAAL,CAAmBlrB,QAAnB,CAAP,CAEA,CAED0sB,OAAOxH,kBAAP,CAA4BllB,SAASklB,kBAArC,CACAwH,OAAOrH,iBAAP,CAA2BrlB,SAASqlB,iBAApC,CACAqH,OAAOpH,gBAAP,CAA0BtlB,SAASslB,gBAAnC,CACAoH,OAAOtH,aAAP,CAAuBplB,SAASolB,aAAhC,CACAsH,OAAOlH,gBAAP,CAA0BxlB,SAASwlB,gBAAnC,CAEAxlB,SAASklB,kBAAT,CAA8B,KAA9B,CACAllB,SAASqlB,iBAAT,CAA6B,KAA7B,CACArlB,SAASslB,gBAAT,CAA4B,KAA5B,CACAtlB,SAASolB,aAAT,CAAyB,KAAzB,CACAplB,SAASwlB,gBAAT,CAA4B,KAA5B,CAEAxlB,SAAW0sB,MAAX,CAEA,CAED,GAAK1sB,SAASklB,kBAAT,GAAgC,IAArC,CAA4C,CAE3C,cAAgB,KAAK7kB,UAAL,CAAgBuI,QAAhC,CAEA,GAAKpR,YAAchW,SAAnB,CAA+B,CAE9BgW,UAAU4rB,iBAAV,CAA6BpjB,SAASE,QAAtC,EACA1I,UAAU+0B,WAAV,CAAwB,IAAxB,CAEA,CAEDvsB,SAASklB,kBAAT,CAA8B,KAA9B,CAEA,CAED,GAAKllB,SAASqlB,iBAAT,GAA+B,IAApC,CAA2C,CAE1C,cAAgB,KAAKhlB,UAAL,CAAgBhG,MAAhC,CAEA,GAAK7C,YAAchW,SAAnB,CAA+B,CAE9BgW,UAAU4rB,iBAAV,CAA6BpjB,SAASkmB,OAAtC,EACA1uB,UAAU+0B,WAAV,CAAwB,IAAxB,CAEA,CAEDvsB,SAASqlB,iBAAT,CAA6B,KAA7B,CAEA,CAED,GAAKrlB,SAASslB,gBAAT,GAA8B,IAAnC,CAA0C,CAEzC,cAAgB,KAAKjlB,UAAL,CAAgBzT,KAAhC,CAEA,GAAK4K,YAAchW,SAAnB,CAA+B,CAE9BgW,UAAUsrB,eAAV,CAA2B9iB,SAAS+iB,MAApC,EACAvrB,UAAU+0B,WAAV,CAAwB,IAAxB,CAEA,CAEDvsB,SAASslB,gBAAT,CAA4B,KAA5B,CAEA,CAED,GAAKtlB,SAASolB,aAAd,CAA8B,CAE7B,cAAgB,KAAK/kB,UAAL,CAAgB0lB,EAAhC,CAEA,GAAKvuB,YAAchW,SAAnB,CAA+B,CAE9BgW,UAAU0rB,iBAAV,CAA6BljB,SAASomB,GAAtC,EACA5uB,UAAU+0B,WAAV,CAAwB,IAAxB,CAEA,CAEDvsB,SAASolB,aAAT,CAAyB,KAAzB,CAEA,CAED,GAAKplB,SAASulB,uBAAd,CAAwC,CAEvC,cAAgB,KAAKllB,UAAL,CAAgBssB,YAAhC,CAEA,GAAKn1B,YAAchW,SAAnB,CAA+B,CAE9BgW,UAAUqrB,SAAV,CAAqB7iB,SAASglB,aAA9B,EACAxtB,UAAU+0B,WAAV,CAAwB,IAAxB,CAEA,CAEDvsB,SAASulB,uBAAT,CAAmC,KAAnC,CAEA,CAED,GAAKvlB,SAASwlB,gBAAd,CAAiC,CAEhCxlB,SAASirB,aAAT,CAAwBrrB,OAAOI,QAA/B,EACA,KAAKumB,MAAL,CAAcvmB,SAASumB,MAAvB,CAEAvmB,SAASwlB,gBAAT,CAA4B,KAA5B,CAEA,CAED,WAAA,CAEA,CA5Z8E,CA8Z/E0F,aAAc,sBAAWlrB,QAAX,CAAsB,CAEnCA,SAASysB,gBAAT,CAA4B,UAAUzB,cAAV,GAA2BE,YAA3B,CAAyClrB,QAAzC,CAA5B,CAEA,YAAY4sB,kBAAL,CAAyB5sB,SAASysB,gBAAlC,CAAP,CAEA,CApa8E,CAsa/EG,mBAAoB,4BAAW5sB,QAAX,CAAsB,CAEzC,cAAgB,gBAAA,CAAkBA,SAASE,QAAT,CAAkBzd,MAAlB,CAA2B,CAA7C,CAAhB,CACA,KAAKwpC,YAAL,CAAmB,UAAnB,CAA+B,UAAU7J,eAAV,CAA2B9hB,SAA3B,CAAsC,CAAtC,EAA0C8iB,iBAA1C,CAA6DpjB,SAASE,QAAtE,CAA/B,EAEA,GAAKF,SAASkmB,OAAT,CAAiBzjC,MAAjB,CAA0B,CAA/B,CAAmC,CAElC,YAAc,gBAAA,CAAkBud,SAASkmB,OAAT,CAAiBzjC,MAAjB,CAA0B,CAA5C,CAAd,CACA,KAAKwpC,YAAL,CAAmB,QAAnB,CAA6B,UAAU7J,eAAV,CAA2B8D,OAA3B,CAAoC,CAApC,EAAwC9C,iBAAxC,CAA2DpjB,SAASkmB,OAApE,CAA7B,EAEA,CAED,GAAKlmB,SAAS+iB,MAAT,CAAgBtgC,MAAhB,CAAyB,CAA9B,CAAkC,CAEjC,WAAa,gBAAA,CAAkBud,SAAS+iB,MAAT,CAAgBtgC,MAAhB,CAAyB,CAA3C,CAAb,CACA,KAAKwpC,YAAL,CAAmB,OAAnB,CAA4B,UAAU7J,eAAV,CAA2BW,MAA3B,CAAmC,CAAnC,EAAuCD,eAAvC,CAAwD9iB,SAAS+iB,MAAjE,CAA5B,EAEA,CAED,GAAK/iB,SAASomB,GAAT,CAAa3jC,MAAb,CAAsB,CAA3B,CAA+B,CAE9B,QAAU,gBAAA,CAAkBud,SAASomB,GAAT,CAAa3jC,MAAb,CAAsB,CAAxC,CAAV,CACA,KAAKwpC,YAAL,CAAmB,IAAnB,CAAyB,UAAU7J,eAAV,CAA2BgE,GAA3B,CAAgC,CAAhC,EAAoClD,iBAApC,CAAuDljB,SAASomB,GAAhE,CAAzB,EAEA,CAED,GAAKpmB,SAASimB,IAAT,CAAcxjC,MAAd,CAAuB,CAA5B,CAAgC,CAE/B,SAAW,gBAAA,CAAkBud,SAASimB,IAAT,CAAcxjC,MAAd,CAAuB,CAAzC,CAAX,CACA,KAAKwpC,YAAL,CAAmB,KAAnB,CAA0B,UAAU7J,eAAV,CAA2B6D,IAA3B,CAAiC,CAAjC,EAAqC/C,iBAArC,CAAwDljB,SAASimB,IAAjE,CAA1B,EAEA,CAED,GAAKjmB,SAASijB,OAAT,CAAiBxgC,MAAjB,CAA0B,CAA/B,CAAmC,CAElC,cAAgBud,SAASE,QAAT,CAAkBzd,MAAlB,CAA2B,KAA3B,CAAmCoqC,WAAnC,CAAiDC,WAAjE,CACA,YAAc,aAAA,CAAe9sB,SAASijB,OAAT,CAAiBxgC,MAAjB,CAA0B,CAAzC,CAAd,CACA,KAAKupC,QAAL,CAAe,UAAU5J,eAAV,CAA2Ba,OAA3B,CAAoC,CAApC,EAAwCD,gBAAxC,CAA0DhjB,SAASijB,OAAnE,CAAf,EAEA;CAID,KAAKsD,MAAL,CAAcvmB,SAASumB,MAAvB;CAIA,IAAM,QAAN,aAA2B3B,YAA3B,CAA0C,CAEzC,UAAY,EAAZ,CACA,iBAAmB5kB,SAAS4kB,YAAT,CAAuB7iC,IAAvB,CAAnB,CAEA,IAAM,MAAQ,CAAR,CAAWkK,EAAI24B,aAAaniC,MAAlC,CAA0Cyb,EAAIjS,CAA9C,CAAiDiS,GAAjD,CAAwD,CAEvD,gBAAkB0mB,aAAc1mB,CAAd,CAAlB,CAEA,cAAgB,UAAU8lB,gBAAV,CAA4ByH,YAAYhpC,MAAZ,CAAqB,CAAjD,CAAoD,CAApD,CAAhB,CAEA4M,MAAM6lB,IAAN,CAAY1d,UAAU4rB,iBAAV,CAA6BqI,WAA7B,CAAZ,EAEA,CAED,KAAKI,eAAL,CAAsB9pC,IAAtB,EAA+BsN,KAA/B,CAEA;CAID,GAAK2Q,SAAS+kB,WAAT,CAAqBtiC,MAArB,CAA8B,CAAnC,CAAuC,CAEtC,gBAAkB,UAAUuhC,gBAAV,CAA4BhkB,SAAS+kB,WAAT,CAAqBtiC,MAArB,CAA8B,CAA1D,CAA6D,CAA7D,CAAlB,CACA,KAAKwpC,YAAL,CAAmB,WAAnB,CAAgClH,YAAY1B,iBAAZ,CAA+BrjB,SAAS+kB,WAAxC,CAAhC,EAEA,CAED,GAAK/kB,SAAS8kB,WAAT,CAAqBriC,MAArB,CAA8B,CAAnC,CAAuC,CAEtC,gBAAkB,UAAUuhC,gBAAV,CAA4BhkB,SAAS8kB,WAAT,CAAqBriC,MAArB,CAA8B,CAA1D,CAA6D,CAA7D,CAAlB,CACA,KAAKwpC,YAAL,CAAmB,YAAnB,CAAiCnH,YAAYzB,iBAAZ,CAA+BrjB,SAAS8kB,WAAxC,CAAjC,EAEA;CAID,GAAK9kB,SAASwP,cAAT,GAA4B,IAAjC,CAAwC,CAEvC,KAAKA,cAAL,CAAsBxP,SAASwP,cAAT,CAAwBpiB,KAAxB,EAAtB,CAEA,CAED,GAAK4S,SAASilB,WAAT,GAAyB,IAA9B,CAAqC,CAEpC,KAAKA,WAAL,CAAmBjlB,SAASilB,WAAT,CAAqB73B,KAArB,EAAnB,CAEA,CAED,WAAA,CAEA,CAxgB8E,CA0gB/Ew4B,mBAAoB,6BAAY,CAE/B,GAAK,KAAKX,WAAL,GAAqB,IAA1B,CAAiC,CAEhC,KAAKA,WAAL,CAAmB,UAAU9lB,IAAV,EAAnB,CAEA,CAED,cAAgB,KAAKkB,UAAL,CAAgBuI,QAAhB,CAAyBvZ,KAAzC,CAEA,GAAKiR,YAAc9e,SAAnB,CAA+B,CAE9B,KAAKyjC,WAAL,CAAiB7lB,YAAjB,CAA+BkB,SAA/B,EAEA,CAJD,IAIO,CAEN,KAAK2kB,WAAL,CAAiBjnB,SAAjB,GAEA,CAED,GAAK+uB,MAAO,KAAK9H,WAAL,CAAiBn4B,GAAjB,CAAqBlL,CAA5B,GAAmCmrC,MAAO,KAAK9H,WAAL,CAAiBn4B,GAAjB,CAAqB2C,CAA5B,CAAnC,EAAsEs9B,MAAO,KAAK9H,WAAL,CAAiBn4B,GAAjB,CAAqB4C,CAA5B,CAA3E,CAA6G,CAE5GlD,QAAQuL,KAAR,CAAe,mIAAf,CAAoJ,IAApJ,EAEA,CAED,CApiB8E,CAsiB/E0X,sBAAuB,UAAY,CAElC,QAAU,UAAUtQ,IAAV,EAAV,CACA,WAAa,UAAU/M,OAAV,EAAb,CAEA,qCAAO,EAAiC,CAEvC,GAAK,KAAKod,cAAL,GAAwB,IAA7B,CAAoC,CAEnC,KAAKA,cAAL,CAAsB,UAAU1O,MAAV,EAAtB,CAEA,CAED,cAAgB,KAAKT,UAAL,CAAgBuI,QAAhB,CAAyBvZ,KAAzC,CAEA,GAAKiR,SAAL,CAAiB,CAEhB,WAAa,KAAKkP,cAAL,CAAoB7X,MAAjC,CAEA2G,IAAIc,YAAJ,CAAkBkB,SAAlB,EACAhC,IAAI3G,MAAJ,CAAYA,MAAZ;;CAKA,gBAAkB,CAAlB,CAEA,IAAM,MAAQ,CAAR,CAAWsG,GAAKqC,UAAU7d,MAAhC,CAAwCyb,EAAID,EAA5C,CAAgDC,GAAK,CAArD,CAAyD,CAExDjE,OAAO7K,SAAP,CAAkBkR,SAAlB,CAA6BpC,CAA7B,EACAoP,YAAc7rB,KAAKwM,GAAL,CAAUqf,WAAV,CAAuB3V,OAAOV,iBAAP,CAA0BgD,MAA1B,CAAvB,CAAd,CAEA,CAED,KAAKuV,cAAL,CAAoB5U,MAApB,CAA6BnZ,KAAKkM,IAAL,CAAW2f,WAAX,CAA7B,CAEA,GAAKyf,MAAO,KAAKvd,cAAL,CAAoB5U,MAA3B,CAAL,CAA2C,CAE1CpO,QAAQuL,KAAR,CAAe,8HAAf,CAA+I,IAA/I,EAEA,CAED,CAED,CAvCD,CAyCA,CA9CsB,EAtiBwD,CAslB/E2uB,mBAAoB,6BAAY;CAI/B,CA1lB8E,CA4lB/EO,qBAAsB,+BAAY,CAEjC,UAAY,KAAK1kC,KAAjB,CACA,eAAiB,KAAK8d,UAAtB,CACA,WAAa,KAAKkmB,MAAlB,CAEA,GAAKlmB,WAAWuI,QAAhB,CAA2B,CAE1B,cAAgBvI,WAAWuI,QAAX,CAAoBvZ,KAApC,CAEA,GAAKgR,WAAWhG,MAAX,GAAsB7Y,SAA3B,CAAuC,CAEtC,KAAKyqC,YAAL,CAAmB,QAAnB,CAA6B,UAAU7J,eAAV,CAA2B,gBAAA,CAAkB9hB,UAAU7d,MAA5B,CAA3B,CAAiE,CAAjE,CAA7B,EAEA,CAJD,IAIO;CAIN,UAAY4d,WAAWhG,MAAX,CAAkBhL,KAA9B,CAEA,IAAM,MAAQ,CAAR,CAAW4O,GAAK5O,MAAM5M,MAA5B,CAAoCyb,EAAID,EAAxC,CAA4CC,GAA5C,CAAmD,CAElD7O,MAAO6O,CAAP,EAAa,CAAb,CAEA,CAED,CAED,YAAcmC,WAAWhG,MAAX,CAAkBhL,KAAhC,CAEA,MAAA,CAAQ03B,EAAR,CAAYD,EAAZ,CAEAkG,GAAK,UAAU56B,OAAV,EAFL,CAGA66B,GAAK,UAAU76B,OAAV,EAHL,CAIA86B,GAAK,UAAU96B,OAAV,EAJL,CAMAy0B,GAAK,UAAUz0B,OAAV,EANL,CAOAu0B,GAAK,UAAUv0B,OAAV,EAPL;CAWA,GAAK7P,KAAL,CAAa,CAEZ,YAAcA,MAAM8M,KAApB,CAEA,GAAKk3B,OAAO9jC,MAAP,GAAkB,CAAvB,CAA2B,CAE1B,KAAK2pC,QAAL,CAAe,CAAf,CAAkBnJ,QAAQxgC,MAA1B,EAEA,CAED,IAAM,MAAQ,CAAR,CAAWkjC,GAAKY,OAAO9jC,MAA7B,CAAqCof,EAAI8jB,EAAzC,CAA6C,EAAG9jB,CAAhD,CAAoD,CAEnD,UAAY0kB,OAAQ1kB,CAAR,CAAZ,CAEA,UAAY2kB,MAAM3pB,KAAlB,CACA,UAAY2pB,MAAMhE,KAAlB,CAEA,IAAM,MAAQ3lB,KAAR,CAAeoB,GAAKpB,MAAQ2lB,KAAlC,CAAyCtkB,EAAID,EAA7C,CAAiDC,GAAK,CAAtD,CAA0D,CAEzD8oB,GAAK/D,QAAS/kB,EAAI,CAAb,EAAmB,CAAxB,CACA6oB,GAAK9D,QAAS/kB,EAAI,CAAb,EAAmB,CAAxB,CACA4oB,GAAK7D,QAAS/kB,EAAI,CAAb,EAAmB,CAAxB,CAEA8uB,GAAG59B,SAAH,CAAckR,SAAd,CAAyB0mB,EAAzB,EACAiG,GAAG79B,SAAH,CAAckR,SAAd,CAAyBymB,EAAzB,EACAmG,GAAG99B,SAAH,CAAckR,SAAd,CAAyBwmB,EAAzB,EAEAD,GAAG5wB,UAAH,CAAei3B,EAAf,CAAmBD,EAAnB,EACAtG,GAAG1wB,UAAH,CAAe+2B,EAAf,CAAmBC,EAAnB,EACApG,GAAGptB,KAAH,CAAUktB,EAAV,EAEAT,QAASc,EAAT,GAAiBH,GAAGjlC,CAApB,CACAskC,QAASc,GAAK,CAAd,GAAqBH,GAAGp3B,CAAxB,CACAy2B,QAASc,GAAK,CAAd,GAAqBH,GAAGn3B,CAAxB,CAEAw2B,QAASa,EAAT,GAAiBF,GAAGjlC,CAApB,CACAskC,QAASa,GAAK,CAAd,GAAqBF,GAAGp3B,CAAxB,CACAy2B,QAASa,GAAK,CAAd,GAAqBF,GAAGn3B,CAAxB,CAEAw2B,QAASY,EAAT,GAAiBD,GAAGjlC,CAApB,CACAskC,QAASY,GAAK,CAAd,GAAqBD,GAAGp3B,CAAxB,CACAy2B,QAASY,GAAK,CAAd,GAAqBD,GAAGn3B,CAAxB,CAEA,CAED,CAED,CA/CD,IA+CO;CAIN,IAAM,MAAQ,CAAR,CAAWuO,GAAKqC,UAAU7d,MAAhC,CAAwCyb,EAAID,EAA5C,CAAgDC,GAAK,CAArD,CAAyD,CAExD8uB,GAAG59B,SAAH,CAAckR,SAAd,CAAyBpC,CAAzB,EACA+uB,GAAG79B,SAAH,CAAckR,SAAd,CAAyBpC,EAAI,CAA7B,EACAgvB,GAAG99B,SAAH,CAAckR,SAAd,CAAyBpC,EAAI,CAA7B,EAEA2oB,GAAG5wB,UAAH,CAAei3B,EAAf,CAAmBD,EAAnB,EACAtG,GAAG1wB,UAAH,CAAe+2B,EAAf,CAAmBC,EAAnB,EACApG,GAAGptB,KAAH,CAAUktB,EAAV,EAEAT,QAAShoB,CAAT,EAAe2oB,GAAGjlC,CAAlB,CACAskC,QAAShoB,EAAI,CAAb,EAAmB2oB,GAAGp3B,CAAtB,CACAy2B,QAAShoB,EAAI,CAAb,EAAmB2oB,GAAGn3B,CAAtB,CAEAw2B,QAAShoB,EAAI,CAAb,EAAmB2oB,GAAGjlC,CAAtB,CACAskC,QAAShoB,EAAI,CAAb,EAAmB2oB,GAAGp3B,CAAtB,CACAy2B,QAAShoB,EAAI,CAAb,EAAmB2oB,GAAGn3B,CAAtB,CAEAw2B,QAAShoB,EAAI,CAAb,EAAmB2oB,GAAGjlC,CAAtB,CACAskC,QAAShoB,EAAI,CAAb,EAAmB2oB,GAAGp3B,CAAtB,CACAy2B,QAAShoB,EAAI,CAAb,EAAmB2oB,GAAGn3B,CAAtB,CAEA,CAED,CAED,KAAKy9B,gBAAL,GAEA9sB,WAAWhG,MAAX,CAAkBkyB,WAAlB,CAAgC,IAAhC,CAEA,CAED,CAxtB8E,CA0tB/EzE,MAAO,eAAW9nB,QAAX,CAAqB1Q,MAArB,CAA8B,CAEpC,GAAK0Q,0BAA0BI,cAA1B,GAA6C,KAAlD,CAA0D,CAEzD5T,QAAQuL,KAAR,CAAe,iFAAf,CAAkGiI,QAAlG,EACA,OAEA,CAED,GAAK1Q,SAAW9N,SAAhB,CAA4B8N,OAAS,CAAT,CAE5B,eAAiB,KAAK+Q,UAAtB,CAEA,IAAM,OAAN,cAAA,CAA8B,CAE7B,GAAKL,SAASK,UAAT,CAAqBwhB,GAArB,IAA+BrgC,SAApC,CAAgD,SAEhD,eAAiB6e,WAAYwhB,GAAZ,CAAjB,CACA,oBAAsBuL,WAAW/9B,KAAjC,CAEA,eAAiB2Q,SAASK,UAAT,CAAqBwhB,GAArB,CAAjB,CACA,oBAAsBwL,WAAWh+B,KAAjC,CAEA,kBAAoBg+B,WAAW51B,QAA/B,CAEA,IAAM,MAAQ,CAAR,CAAWoK,EAAIyrB,cAAgBh+B,MAArC,CAA6C4O,EAAIqvB,gBAAgB9qC,MAAjE,CAAyEyb,IAAM2D,GAA/E,CAAsF,CAErF2rB,gBAAiB3rB,CAAjB,EAAuB0rB,gBAAiBrvB,CAAjB,CAAvB,CAEA,CAED,CAED,WAAA,CAEA,CA7vB8E,CA+vB/EivB,iBAAkB,2BAAY,CAE7B,YAAc,KAAK9sB,UAAL,CAAgBhG,MAAhB,CAAuBhL,KAArC,CAEA,KAAA,CAAOI,CAAP,CAAUC,CAAV,CAAa+V,CAAb,CAEA,IAAM,MAAQ,CAAR,CAAWxH,GAAKioB,QAAQzjC,MAA9B,CAAsCyb,EAAID,EAA1C,CAA8CC,GAAK,CAAnD,CAAuD,CAEtDtc,EAAIskC,QAAShoB,CAAT,CAAJ,CACAzO,EAAIy2B,QAAShoB,EAAI,CAAb,CAAJ,CACAxO,EAAIw2B,QAAShoB,EAAI,CAAb,CAAJ,CAEAuH,EAAI,IAAMhkB,KAAKkM,IAAL,CAAW/L,EAAIA,CAAJ,CAAQ6N,EAAIA,CAAZ,CAAgBC,EAAIA,CAA/B,CAAV,CAEAw2B,QAAShoB,CAAT,GAAgBuH,CAAhB,CACAygB,QAAShoB,EAAI,CAAb,GAAoBuH,CAApB,CACAygB,QAAShoB,EAAI,CAAb,GAAoBuH,CAApB,CAEA,CAED,CAnxB8E,CAqxB/EgoB,aAAc,uBAAY,CAEzB,GAAK,KAAKlrC,KAAL,GAAe,IAApB,CAA2B,CAE1BiK,QAAQC,IAAR,CAAc,uEAAd,EACA,WAAA,CAEA,CAED,cAAgB,UAAU2T,cAAV,EAAhB,CAEA,YAAc,KAAK7d,KAAL,CAAW8M,KAAzB,CACA,eAAiB,KAAKgR,UAAtB,CAEA,IAAM,QAAN,cAAA,CAA+B,CAE9B,cAAgBA,WAAYte,IAAZ,CAAhB,CAEA,UAAYyV,UAAUnI,KAAtB,CACA,aAAemI,UAAUC,QAAzB,CAEA,WAAa,UAAUvM,WAAV,CAAuB+3B,QAAQxgC,MAAR,CAAiBgV,QAAxC,CAAb,CAEA,UAAY,CAAZ,CAAemrB,OAAS,CAAxB,CAEA,IAAM,MAAQ,CAAR,CAAW32B,EAAIg3B,QAAQxgC,MAA7B,CAAqCyb,EAAIjS,CAAzC,CAA4CiS,GAA5C,CAAmD,CAElD3b,MAAQ0gC,QAAS/kB,CAAT,EAAezG,QAAvB,CAEA,IAAM,MAAQ,CAAd,CAAiBoK,EAAIpK,QAArB,CAA+BoK,GAA/B,CAAsC,CAErC6rB,OAAQ9K,QAAR,EAAsBvzB,MAAO9M,OAAP,CAAtB,CAEA,CAED,CAEDorC,UAAU1B,YAAV,CAAwBlqC,IAAxB,CAA8B,UAAUqgC,eAAV,CAA2BsL,MAA3B,CAAmCj2B,QAAnC,CAA9B,EAEA,CAED,gBAAA,CAEA,CAh0B8E,CAk0B/EqpB,OAAQ,iBAAY,CAEnB,SAAW,CACVO,SAAU,CACTC,QAAS,GADA,CAETtG,KAAM,gBAFG,CAGTuG,UAAW,uBAHF,CADA,CAAX;CAUAO,KAAKzQ,IAAL,CAAY,KAAKA,IAAjB,CACAyQ,KAAK9G,IAAL,CAAY,KAAKA,IAAjB,CACA,GAAK,KAAKj5B,IAAL,GAAc,EAAnB,CAAwB+/B,KAAK//B,IAAL,CAAY,KAAKA,IAAjB,CAExB,GAAK,KAAK4nC,UAAL,GAAoBnoC,SAAzB,CAAqC,CAEpC,eAAiB,KAAKmoC,UAAtB,CAEA,IAAM,OAAN,cAAA,CAA8B,CAE7B,GAAKA,WAAY9H,GAAZ,IAAsBrgC,SAA3B,CAAuCsgC,KAAMD,GAAN,EAAc8H,WAAY9H,GAAZ,CAAd,CAEvC,CAED,WAAA,CAEA,CAEDC,KAAKA,IAAL,CAAY,CAAEzhB,WAAY,EAAd,CAAZ,CAEA,UAAY,KAAK9d,KAAjB,CAEA,GAAKA,QAAU,IAAf,CAAsB,CAErB,UAAYq7B,MAAM97B,SAAN,CAAgBgM,KAAhB,CAAsBlL,IAAtB,CAA4BL,MAAM8M,KAAlC,CAAZ,CAEAyyB,KAAKA,IAAL,CAAUv/B,KAAV,CAAkB,CACjBy4B,KAAMz4B,MAAM8M,KAAN,CAAYnE,WAAZ,CAAwBnJ,IADb,CAEjBsN,MAAOA,KAFU,CAAlB,CAKA,CAED,eAAiB,KAAKgR,UAAtB,CAEA,IAAM,OAAN,cAAA,CAA8B,CAE7B,cAAgBA,WAAYwhB,GAAZ,CAAhB,CAEA,UAAYjE,MAAM97B,SAAN,CAAgBgM,KAAhB,CAAsBlL,IAAtB,CAA4B4U,UAAUnI,KAAtC,CAAZ,CAEAyyB,KAAKA,IAAL,CAAUzhB,UAAV,CAAsBwhB,GAAtB,EAA8B,CAC7BpqB,SAAUD,UAAUC,QADS,CAE7BujB,KAAMxjB,UAAUnI,KAAV,CAAgBnE,WAAhB,CAA4BnJ,IAFL,CAG7BsN,MAAOA,KAHsB,CAI7BgzB,WAAY7qB,UAAU6qB,UAJO,CAA9B,CAOA,CAED,WAAa,KAAKkE,MAAlB,CAEA,GAAKA,OAAO9jC,MAAP,CAAgB,CAArB,CAAyB,CAExBq/B,KAAKA,IAAL,CAAUyE,MAAV,CAAmB/E,KAAKO,KAAL,CAAYP,KAAKC,SAAL,CAAgB8E,MAAhB,CAAZ,CAAnB,CAEA,CAED,mBAAqB,KAAK/W,cAA1B,CAEA,GAAKA,iBAAmB,IAAxB,CAA+B,CAE9BsS,KAAKA,IAAL,CAAUtS,cAAV,CAA2B,CAC1B7X,OAAQ6X,eAAe7X,MAAf,CAAsBpI,OAAtB,EADkB,CAE1BqL,OAAQ4U,eAAe5U,MAFG,CAA3B,CAKA,CAED,WAAA,CAEA,CAr5B8E,CAu5B/ExN,MAAO,gBAAY;;;;;;;;;;;;;;;;;;;;;;KA0BlB,iBAAiBgT,cAAV,GAA2BhV,IAA3B,CAAiC,IAAjC,CAAP,CAEA,CAn7B8E,CAq7B/EA,KAAM,cAAW1I,MAAX,CAAoB,CAEzB,UAAYA,OAAOH,KAAnB,CAEA,GAAKA,QAAU,IAAf,CAAsB,CAErB,KAAKypC,QAAL,CAAezpC,MAAM6K,KAAN,EAAf,EAEA,CAED,eAAiB1K,OAAO2d,UAAxB,CAEA,IAAM,QAAN,cAAA,CAA+B,CAE9B,cAAgBA,WAAYte,IAAZ,CAAhB,CACA,KAAKkqC,YAAL,CAAmBlqC,IAAnB,CAAyByV,UAAUpK,KAAV,EAAzB,EAEA,CAED,WAAa1K,OAAO6jC,MAApB,CAEA,IAAM,MAAQ,CAAR,CAAWt6B,EAAIs6B,OAAO9jC,MAA5B,CAAoCyb,EAAIjS,CAAxC,CAA2CiS,GAA3C,CAAkD,CAEjD,UAAYqoB,OAAQroB,CAAR,CAAZ,CACA,KAAKkuB,QAAL,CAAe5F,MAAM3pB,KAArB,CAA4B2pB,MAAMhE,KAAlC,CAAyCgE,MAAMvE,aAA/C,EAEA,CAED,WAAA,CAEA,CAn9B8E,CAq9B/E8I,QAAS,kBAAY,CAEpB,KAAKtP,aAAL,CAAoB,CAAET,KAAM,SAAR,CAApB,EAEA,CAz9B8E,CAAhF,EA69BA35B,MAAM+e,cAAN,CAAqBwtB,QAArB,CAAgC,KAAhC;;;IAQAvsC,MAAMwsC,uBAAN,CAAgC,UAAY,CAE3CxsC,MAAM+e,cAAN,CAAqBxd,IAArB,CAA2B,IAA3B,EAEA,KAAKo4B,IAAL,CAAY,yBAAZ,CACA,KAAK8S,iBAAL,CAAyBtsC,SAAzB,CAEA,CAPD,CASAH,MAAMwsC,uBAAN,CAA8B/rC,SAA9B,CAA0CE,OAAOy2B,MAAP,CAAep3B,MAAM+e,cAAN,CAAqBte,SAApC,CAA1C,CACAT,MAAMwsC,uBAAN,CAA8B/rC,SAA9B,CAAwCoJ,WAAxC,CAAsD7J,MAAMwsC,uBAA5D,CAEAxsC,MAAMwsC,uBAAN,CAA8B/rC,SAA9B,CAAwCsqC,QAAxC,CAAmD,SAAWvvB,KAAX,CAAkB2lB,KAAlB,CAAyBuL,SAAzB,CAAqC,CAEvF,KAAKxH,MAAL,CAAYrR,IAAZ,CAAkB,CAEjBrY,MAAOA,KAFU,CAGjB2lB,MAAOA,KAHU,CAIjBuL,UAAWA,SAJM,CAAlB,EAQA,CAVD,CAYA1sC,MAAMwsC,uBAAN,CAA8B/rC,SAA9B,CAAwCsJ,IAAxC,CAA+C,SAAW1I,MAAX,CAAoB,CAElE,UAAYA,OAAOH,KAAnB,CAEA,GAAKA,QAAU,IAAf,CAAsB,CAErB,KAAKypC,QAAL,CAAezpC,MAAM6K,KAAN,EAAf,EAEA,CAED,eAAiB1K,OAAO2d,UAAxB,CAEA,IAAM,QAAN,cAAA,CAA+B,CAE9B,cAAgBA,WAAYte,IAAZ,CAAhB,CACA,KAAKkqC,YAAL,CAAmBlqC,IAAnB,CAAyByV,UAAUpK,KAAV,EAAzB,EAEA,CAED,WAAa1K,OAAO6jC,MAApB,CAEA,IAAM,MAAQ,CAAR,CAAWt6B,EAAIs6B,OAAO9jC,MAA5B,CAAoCyb,EAAIjS,CAAxC,CAA2CiS,GAA3C,CAAkD,CAEjD,UAAYqoB,OAAQroB,CAAR,CAAZ,CACA,KAAKkuB,QAAL,CAAe5F,MAAM3pB,KAArB,CAA4B2pB,MAAMhE,KAAlC,CAAyCgE,MAAMuH,SAA/C,EAEA,CAED,WAAA,CAEA,CA9BD;;;IAsCA1sC,MAAM2sC,OAAN,CAAgB,SAAW7iC,KAAX,CAAmB,CAElC,GAAK,YAAA,GAAiB,QAAtB,CAAiC,CAEhCqB,QAAQC,IAAR,CAAc,oDAAd,EACAtB,MAAQ3I,UAAW,CAAX,CAAR,CAEA,CAED,KAAK2I,KAAL,CAAaA,KAAb,CAEA,KAAKm3B,OAAL,CAAe,KAAf,CAEA,CAbD,CAeAjhC,MAAM2sC,OAAN,CAAclsC,SAAd,CAA0B,CAEzBoJ,YAAa7J,MAAM2sC,OAFM,CAIzBC,SAAU,kBAAW/5B,QAAX,CAAsB,CAE/B,KAAKouB,OAAL,CAAe,IAAf,CACA,KAAK4L,gBAAL,CAAwBh6B,QAAxB,CAEA,WAAA,CAEA,CAXwB,CAA1B;;;;;;;;;;IA4BA7S,MAAM8sC,eAAN,CAAwB,UAAW,CAElC,eAAM,CAAW,0BACf,wCADI,CAAN,CAGA,CALD,CAOA9sC,MAAM8sC,eAAN,CAAsBC,IAAtB,CACE,wBAAA,CAA0BC,KAA1B,CAAiCC,IAAjC,CAAuCC,SAAvC,CAAmD,CAEpD,KAAKC,MAAL,CAAcH,KAAd,CACA,KAAKI,KAAL,CAAaH,IAAb,CACA,KAAKI,UAAL,CAAkBH,WAAa,IAA/B,CAEA,WAAaD,KAAKK,MAAlB,CACCC,QAAUD,OAAOlsC,MADlB,CAECosC,aAAe,SAAA,CAAWD,OAAX,CAFhB,CAIA,wBAA0B,CACxBlW,YAAcr3B,MAAMuI,mBADI,CAExB+uB,UAAYt3B,MAAMuI,mBAFM,CAA1B,CAKA,IAAM,MAAQ,CAAd,CAAiBsU,IAAM0wB,OAAvB,CAAgC,EAAG1wB,CAAnC,CAAuC,CAEtC,gBAAkBywB,OAAQzwB,CAAR,EAAY4wB,iBAAZ,CAA+B,IAA/B,CAAlB,CACAD,aAAc3wB,CAAd,EAAoB6wB,WAApB,CACAA,YAAYjX,QAAZ,CAAuBkX,mBAAvB,CAEA,CAED,KAAKC,oBAAL,CAA4BD,mBAA5B,CAEA,KAAKE,aAAL,CAAqBL,YAArB;;CAGA,KAAKM,iBAAL,CAAyB,SAAA,CAAWP,OAAX,CAAzB,CAEA,KAAKQ,WAAL,CAAmB,IAAnB;CACA,KAAKC,iBAAL,CAAyB,IAAzB;CAEA,KAAKC,qBAAL,CAA6B,IAA7B,CACA,KAAKC,kBAAL,CAA0B,IAA1B,CAEA,KAAKC,IAAL,CAAYnuC,MAAMkI,UAAlB,CACA,KAAKkmC,UAAL,CAAkB,CAAC,CAAnB;;CAIA,KAAKC,UAAL,CAAkB,IAAlB;;CAIA,KAAKC,IAAL,CAAY,CAAZ,CAEA,KAAKC,SAAL,CAAiB,CAAjB,CACA,KAAKC,mBAAL,CAA2B,CAA3B,CAEA,KAAK1c,MAAL,CAAc,CAAd,CACA,KAAK2c,gBAAL,CAAwB,CAAxB,CAEA,KAAKC,WAAL,CAAmBlyB,QAAnB;CAEA,KAAKmyB,MAAL,CAAc,KAAd;CACA,KAAKxF,OAAL,CAAe,IAAf;CAEA,KAAKyF,iBAAL,CAA0B,KAA1B;CAEA,KAAKC,gBAAL,CAAyB,IAAzB;CACA,KAAKC,cAAL,CAAuB,IAAvB;CAEA,CAhED,CAkEA9uC,MAAM8sC,eAAN,CAAsBC,IAAtB,CAA2BtsC,SAA3B,CAAuC,CAEtCoJ,YAAa7J,MAAM8sC,eAAN,CAAsBC,IAFG;CAMtCgC,KAAM,eAAW,CAEhB,KAAK5B,MAAL,CAAY6B,eAAZ,CAA6B,IAA7B,EAEA,WAAA,CAEA,CAZqC,CActC3V,KAAM,eAAW,CAEhB,KAAK8T,MAAL,CAAY8B,iBAAZ,CAA+B,IAA/B,EAEA,YAAYC,KAAL,EAAP,CAEA,CApBqC,CAsBtCA,MAAO,gBAAW,CAEjB,KAAKP,MAAL,CAAc,KAAd,CACA,KAAKxF,OAAL,CAAe,IAAf,CAEA,KAAKmF,IAAL,CAAY,CAAZ;CACA,KAAKF,UAAL,CAAkB,CAAC,CAAnB;CACA,KAAKC,UAAL,CAAkB,IAAlB;CAEA,YAAYc,UAAL,GAAkBC,WAAlB,EAAP,CAEA,CAjCqC,CAmCtCC,UAAW,oBAAW,CAErB,UAAY,KAAKhB,UAAjB,CAEA,YAAYlF,OAAL,EAAgB,CAAE,KAAKwF,MAAvB,EAAiC,KAAKJ,SAAL,GAAmB,CAApD,EACL,KAAKF,UAAL,GAAoB,IADf,EACuB,KAAKlB,MAAL,CAAYmC,eAAZ,CAA6B,IAA7B,CAD9B,CAGA,CA1CqC;CA6CtCC,YAAa,sBAAW,CAEvB,YAAYpC,MAAL,CAAYmC,eAAZ,CAA6B,IAA7B,CAAP,CAEA,CAjDqC,CAmDtCE,QAAS,iBAAUlB,IAAV,CAAiB,CAEzB,KAAKD,UAAL,CAAkBC,IAAlB,CAEA,WAAA,CAEA,CAzDqC,CA2DtCmB,QAAS,iBAAUC,IAAV,CAAgBhB,WAAhB,CAA8B,CAEtC,KAAKP,IAAL,CAAYuB,IAAZ,CACA,KAAKhB,WAAL,CAAmBA,WAAnB,CAEA,WAAA,CAEA,CAlEqC;;;;CAyEtCiB,mBAAoB,4BAAU7d,MAAV,CAAmB,CAEtC,KAAKA,MAAL,CAAcA,MAAd;CAGA,KAAK2c,gBAAL,CAAwB,KAAKtF,OAAL,CAAerX,MAAf,CAAwB,CAAhD,CAEA,YAAYqd,UAAL,EAAP,CAEA,CAlFqC;CAqFtCS,mBAAoB,6BAAW,CAE9B,YAAYnB,gBAAZ,CAEA,CAzFqC,CA2FtCoB,OAAQ,gBAAUC,QAAV,CAAqB,CAE5B,YAAYC,eAAL,CAAsBD,QAAtB,CAAgC,CAAhC,CAAmC,CAAnC,CAAP,CAEA,CA/FqC,CAiGtCE,QAAS,iBAAUF,QAAV,CAAqB,CAE7B,YAAYC,eAAL,CAAsBD,QAAtB,CAAgC,CAAhC,CAAmC,CAAnC,CAAP,CAEA,CArGqC,CAuGtCG,cAAe,uBAAUC,aAAV,CAAyBJ,QAAzB,CAAmCK,IAAnC,CAA0C,CAExD,UAAY,KAAKhD,MAAjB,CAEA+C,cAAcF,OAAd,CAAuBF,QAAvB,EACA,KAAKD,MAAL,CAAaC,QAAb,EAEA,GAAIK,IAAJ,CAAW,CAEV,mBAAqB,KAAK/C,KAAL,CAAW0C,QAAhC,CACCM,gBAAkBF,cAAc9C,KAAd,CAAoB0C,QADvC,CAGCO,cAAgBD,gBAAkBE,cAHnC,CAICC,cAAgBD,eAAiBF,eAJlC,CAMAF,cAAcC,IAAd,CAAoB,GAApB,CAAyBE,aAAzB,CAAwCP,QAAxC,EACA,KAAKK,IAAL,CAAWI,aAAX,CAA0B,GAA1B,CAA+BT,QAA/B,EAEA,CAED,WAAA,CAEA,CA7HqC,CA+HtCU,YAAa,qBAAUC,YAAV,CAAwBX,QAAxB,CAAkCK,IAAlC,CAAyC,CAErD,oBAAoBF,aAAb,CAA4B,IAA5B,CAAkCH,QAAlC,CAA4CK,IAA5C,CAAP,CAEA,CAnIqC,CAqItChB,WAAY,qBAAW,CAEtB,sBAAwB,KAAKjB,kBAA7B,CAEA,GAAKwC,oBAAsB,IAA3B,CAAkC,CAEjC,KAAKxC,kBAAL,CAA0B,IAA1B,CACA,KAAKf,MAAL,CAAYwD,2BAAZ,CAAyCD,iBAAzC,EAEA,CAED,WAAA,CAEA,CAlJqC;;;;CAyJtCE,sBAAuB,+BAAUrC,SAAV,CAAsB,CAE5C,KAAKA,SAAL,CAAiBA,SAAjB,CACA,KAAKC,mBAAL,CAA2B,KAAKG,MAAL,CAAc,CAAd,CAAiBJ,SAA5C,CAEA,YAAYa,WAAL,EAAP,CAEA,CAhKqC;CAmKtCyB,sBAAuB,gCAAW,CAEjC,YAAYrC,mBAAZ,CAEA,CAvKqC,CAyKtCsC,YAAa,qBAAUhB,QAAV,CAAqB,CAEjC,KAAKvB,SAAL,CAAiB,KAAKnB,KAAL,CAAW0C,QAAX,CAAsBA,QAAvC,CAEA,YAAYV,WAAL,EAAP,CAEA,CA/KqC,CAiLtC2B,SAAU,kBAAUC,MAAV,CAAmB,CAE5B,KAAK1C,IAAL,CAAY0C,OAAO1C,IAAnB,CACA,KAAKC,SAAL,CAAiByC,OAAOzC,SAAxB,CAEA,YAAYa,WAAL,EAAP,CAEA,CAxLqC,CA0LtC6B,KAAM,cAAUnB,QAAV,CAAqB,CAE1B,YAAYK,IAAL,CAAW,KAAK3B,mBAAhB,CAAqC,CAArC,CAAwCsB,QAAxC,CAAP,CAEA,CA9LqC,CAgMtCK,KAAM,cAAUe,cAAV,CAA0BC,YAA1B,CAAwCrB,QAAxC,CAAmD,CAExD,UAAY,KAAK3C,MAAjB,CAAyB/T,IAAM4T,MAAMsB,IAArC,CACCZ,YAAc,KAAKO,qBADpB,CAGCM,UAAY,KAAKA,SAHlB,CAKA,GAAKb,cAAgB,IAArB,CAA4B,CAE3BA,YAAcV,MAAMoE,uBAAN,EAAd,CACA,KAAKnD,qBAAL,CAA6BP,WAD7B,CAGA,CAED,UAAYA,YAAYpY,kBAAxB,CACCuB,OAAS6W,YAAYnY,YADtB,CAGA8b,MAAO,CAAP,EAAajY,GAAb,CACAiY,MAAO,CAAP,EAAajY,IAAM0W,QAAnB,CAEAjZ,OAAQ,CAAR,EAAcqa,eAAiB3C,SAA/B,CACA1X,OAAQ,CAAR,EAAcsa,aAAe5C,SAA7B,CAEA,WAAA,CAEA,CAzNqC,CA2NtCa,YAAa,sBAAW,CAEvB,yBAA2B,KAAKnB,qBAAhC,CAEA,GAAKqD,uBAAyB,IAA9B,CAAqC,CAEpC,KAAKrD,qBAAL,CAA6B,IAA7B,CACA,KAAKd,MAAL,CAAYwD,2BAAZ,CAAyCW,oBAAzC,EAEA,CAED,WAAA,CAEA,CAxOqC;CA4OtCC,SAAU,mBAAW,CAEpB,YAAYpE,MAAZ,CAEA,CAhPqC,CAkPtCqE,QAAS,kBAAW,CAEnB,YAAYpE,KAAZ,CAEA,CAtPqC,CAwPtCqE,QAAS,kBAAW,CAEnB,YAAYpE,UAAL,EAAmB,KAAKF,MAAL,CAAYuE,KAAtC,CAEA,CA5PqC;CAgQtCC,QAAS,iBAAUrD,IAAV,CAAgBsD,SAAhB,CAA2BC,aAA3B,CAA0CC,SAA1C,CAAsD;CAG9D,cAAgB,KAAKzD,UAArB,CAEA,GAAKvV,YAAc,IAAnB,CAA0B;CAIzB,gBAAkB,CAAEwV,KAAOxV,SAAT,EAAuB+Y,aAAzC,CACA,GAAKE,YAAc,CAAd,EAAmBF,gBAAkB,CAA1C,CAA8C,CAE7C;CAEA;CAID,KAAKxD,UAAL,CAAkB,IAAlB;CACAuD,UAAYC,cAAgBE,WAA5B,CAEA;CAIDH,WAAa,KAAKI,gBAAL,CAAuB1D,IAAvB,CAAb,CACA,aAAe,KAAK2D,WAAL,CAAkBL,SAAlB,CAAf;;CAKA,WAAa,KAAKM,aAAL,CAAoB5D,IAApB,CAAb,CAEA,GAAKxc,OAAS,CAAd,CAAkB,CAEjB,iBAAmB,KAAK+b,aAAxB,CACA,mBAAqB,KAAKC,iBAA1B,CAEA,IAAM,MAAQ,CAAR,CAAWziC,EAAImiC,aAAapsC,MAAlC,CAA0Cof,IAAMnV,CAAhD,CAAmD,EAAGmV,CAAtD,CAA0D,CAEzDgtB,aAAchtB,CAAd,EAAkBoV,QAAlB,CAA4Buc,QAA5B,EACAC,eAAgB5xB,CAAhB,EAAoB6xB,UAApB,CAAgCP,SAAhC,CAA2ChgB,MAA3C,EAEA,CAED,CAED,CA/SqC,CAiTtCogB,cAAe,uBAAU5D,IAAV,CAAiB,CAE/B,WAAa,CAAb,CAEA,GAAK,KAAKnF,OAAV,CAAoB,CAEnBrX,OAAS,KAAKA,MAAd,CACA,gBAAkB,KAAKoc,kBAAvB,CAEA,GAAKR,cAAgB,IAArB,CAA4B,CAE3B,qBAAuBA,YAAY9X,QAAZ,CAAsB0Y,IAAtB,EAA8B,CAA9B,CAAvB,CAEAxc,QAAUwgB,gBAAV,CAEA,GAAKhE,KAAOZ,YAAYpY,kBAAZ,CAAgC,CAAhC,CAAZ,CAAkD,CAEjD,KAAK6Z,UAAL,GAEA,GAAKmD,mBAAqB,CAA1B,CAA8B;CAG7B,KAAKnJ,OAAL,CAAe,KAAf,CAEA,CAED,CAED,CAED,CAED,KAAKsF,gBAAL,CAAwB3c,MAAxB,CACA,aAAA,CAEA,CApVqC,CAsVtCkgB,iBAAkB,0BAAU1D,IAAV,CAAiB,CAElC,cAAgB,CAAhB,CAEA,GAAK,CAAE,KAAKK,MAAZ,CAAqB,CAEpBJ,UAAY,KAAKA,SAAjB,CAEA,gBAAkB,KAAKN,qBAAvB,CAEA,GAAKP,cAAgB,IAArB,CAA4B,CAE3B,qBAAuBA,YAAY9X,QAAZ,CAAsB0Y,IAAtB,EAA8B,CAA9B,CAAvB,CAEAC,WAAa+D,gBAAb,CAEA,GAAKhE,KAAOZ,YAAYpY,kBAAZ,CAAgC,CAAhC,CAAZ,CAAkD,CAEjD,KAAK8Z,WAAL,GAEA,GAAKb,YAAc,CAAnB,CAAuB;CAGtB,KAAKI,MAAL,CAAc,IAAd,CAEA,CALD,IAKO;CAGN,KAAKJ,SAAL,CAAiBA,SAAjB,CAEA,CAED,CAED,CAED,CAED,KAAKC,mBAAL,CAA2BD,SAA3B,CACA,gBAAA,CAEA,CA/XqC,CAiYtC0D,YAAa,qBAAUL,SAAV,CAAsB,CAElC,SAAW,KAAKtD,IAAL,CAAYsD,SAAvB,CAEA,GAAKA,YAAc,CAAnB,CAAuB,WAAA,CAEvB,aAAe,KAAKxE,KAAL,CAAW0C,QAA1B,CAEC3B,KAAO,KAAKA,IAFb,CAGCoE,UAAY,KAAKnE,UAHlB,CAKA,GAAKD,OAASnuC,MAAMiI,QAApB,CAA+B,CAE9B,GAAKsqC,YAAc,CAAC,CAApB,CAAwB;CAGvB,KAAKA,SAAL,CAAiB,CAAjB,CACA,KAAKC,WAAL,CAAkB,IAAlB,CAAwB,IAAxB,CAA8B,KAA9B,EAEA,CAEDC,YAAa,CAEZ,GAAKnE,MAAQwB,QAAb,CAAwB,CAEvBxB,KAAOwB,QAAP,CAEA,CAJD,QAIYxB,KAAO,CAAZ,CAAgB,CAEtBA,KAAO,CAAP,CAEA,CAJM,sBAIA,CAEP,GAAK,KAAKM,iBAAV,CAA8B,KAAKD,MAAL,CAAc,IAAd,CAA9B,UACUxF,OAAL,CAAe,KAAf,CAEL,KAAKgE,MAAL,CAAY/S,aAAZ,CAA2B,CAC1BT,KAAM,UADoB,CACRqX,OAAQ,IADA,CAE1BjoB,UAAW6oB,UAAY,CAAZ,CAAgB,CAAC,CAAjB,CAAqB,CAFN,CAA3B,EAKA,CAED,CAhCD,IAgCO;CAEN,aAAiBzD,OAASnuC,MAAMmI,YAAhC,CAEA,GAAKoqC,YAAc,CAAC,CAApB,CAAwB;CAGvB,GAAKX,WAAa,CAAlB,CAAsB,CAErBW,UAAY,CAAZ,CAEA,KAAKC,WAAL,CACE,IADF,CACQ,KAAK9D,WAAL,GAAqB,CAD7B,CACgCgE,QADhC,EAGA,CAPD,IAOO;;;CAMN,KAAKF,WAAL,CACE,KAAK9D,WAAL,GAAqB,CADvB,CAC0B,IAD1B,CACgCgE,QADhC,EAGA,CAED,CAED,GAAKpE,MAAQwB,QAAR,EAAoBxB,KAAO,CAAhC,CAAoC;CAGnC,cAAgBluC,KAAKiK,KAAL,CAAYikC,KAAOwB,QAAnB,CAAhB;CACAxB,MAAQwB,SAAW6C,SAAnB,CAEAJ,WAAanyC,KAAK8Q,GAAL,CAAUyhC,SAAV,CAAb,CAEA,YAAc,KAAKjE,WAAL,CAAmB6D,SAAjC,CAEA,GAAKK,QAAU,CAAf,CAAmB;CAGlB,GAAK,KAAKhE,iBAAV,CAA8B,KAAKD,MAAL,CAAc,IAAd,CAA9B,UACUxF,OAAL,CAAe,KAAf,CAELmF,KAAOsD,UAAY,CAAZ,CAAgB9B,QAAhB,CAA2B,CAAlC,CAEA,KAAK3C,MAAL,CAAY/S,aAAZ,CAA2B,CAC1BT,KAAM,UADoB,CACRqX,OAAQ,IADA,CAE1BjoB,UAAW6oB,UAAY,CAAZ,CAAgB,CAAhB,CAAoB,CAAC,CAFN,CAA3B,EAKA,CAbD,IAaO;CAGN,GAAKgB,UAAY,CAAjB,CAAqB;CAGpB,YAAchB,UAAY,CAA1B,CACA,KAAKY,WAAL,CAAkBK,OAAlB,CAA2B,CAAEA,OAA7B,CAAsCH,QAAtC,EAEA,CAND,IAMO,CAEN,KAAKF,WAAL,CAAkB,KAAlB,CAAyB,KAAzB,CAAgCE,QAAhC,EAEA,CAED,KAAKtE,UAAL,CAAkBmE,SAAlB,CAEA,KAAKpF,MAAL,CAAY/S,aAAZ,CAA2B,CAC1BT,KAAM,MADoB,CACZqX,OAAQ,IADI,CACE2B,UAAWA,SADb,CAA3B,EAIA,CAED,CAED,GAAKD,UAAY,CAAEH,UAAY,CAAd,IAAsB,CAAvC,CAA2C;CAG1C,KAAKjE,IAAL,CAAYA,IAAZ,CACA,gBAAkBA,IAAlB,CAEA,CAED,CAED,KAAKA,IAAL,CAAYA,IAAZ,CACA,WAAA,CAEA,CApgBqC,CAsgBtCkE,YAAa,qBAAUK,OAAV,CAAmBC,KAAnB,CAA0BJ,QAA1B,CAAqC,CAEjD,aAAe,KAAK9E,oBAApB,CAEA,GAAK8E,QAAL,CAAgB,CAEfjc,SAASY,WAAT,CAAwBr3B,MAAMwI,eAA9B,CACAiuB,SAASa,SAAT,CAAsBt3B,MAAMwI,eAA5B,CAEA,CALD,IAKO;CAIN,GAAKqqC,OAAL,CAAe,CAEdpc,SAASY,WAAT,CAAuB,KAAKwX,gBAAL,CACrB7uC,MAAMwI,eADe,CACGxI,MAAMuI,mBADhC,CAGA,CALD,IAKO,CAENkuB,SAASY,WAAT,CAAuBr3B,MAAMyI,gBAA7B,CAEA,CAED,GAAKqqC,KAAL,CAAa,CAEZrc,SAASa,SAAT,CAAqB,KAAKwX,cAAL,CACnB9uC,MAAMwI,eADa,CACKxI,MAAMuI,mBADhC,CAGA,CALD,IAKO,CAENkuB,SAASa,SAAT,CAAuBt3B,MAAMyI,gBAA7B,CAEA,CAED,CAED,CA3iBqC,CA6iBtCsnC,gBAAiB,yBAAUD,QAAV,CAAoBiD,SAApB,CAA+BC,UAA/B,CAA4C,CAE5D,UAAY,KAAK7F,MAAjB,CAAyB/T,IAAM4T,MAAMsB,IAArC,CACCZ,YAAc,KAAKQ,kBADpB,CAGA,GAAKR,cAAgB,IAArB,CAA4B,CAE3BA,YAAcV,MAAMoE,uBAAN,EAAd,CACA,KAAKlD,kBAAL,CAA0BR,WAD1B,CAGA,CAED,UAAYA,YAAYpY,kBAAxB,CACCuB,OAAS6W,YAAYnY,YADtB,CAGA8b,MAAO,CAAP,EAAajY,GAAb,CAAsBvC,OAAQ,CAAR,EAAckc,SAAd,CACtB1B,MAAO,CAAP,EAAajY,IAAM0W,QAAnB,CAA6BjZ,OAAQ,CAAR,EAAcmc,UAAd,CAE7B,WAAA,CAEA,CAjkBqC,CAAvC;;;;;;;IAglBAhzC,MAAMizC,aAAN,CAAsB,SAAWvyC,IAAX,CAAiBovC,QAAjB,CAA2BxC,MAA3B,CAAoC,CAEzD,KAAK5sC,IAAL,CAAYA,IAAZ,CACA,KAAK4sC,MAAL,CAAcA,MAAd,CACA,KAAKwC,QAAL,CAAkBA,WAAa3vC,SAAf,CAA6B2vC,QAA7B,CAAwC,CAAC,CAAzD,CAEA,KAAK9f,IAAL,CAAYhwB,MAAMI,IAAN,CAAW0vB,YAAX,EAAZ;CAGA,GAAK,KAAKggB,QAAL,CAAgB,CAArB,CAAyB,CAExB,KAAKoD,aAAL,GAEA;;CAID,KAAKC,IAAL,GACA,KAAKC,QAAL,GAEA,CApBD,CAsBApzC,MAAMizC,aAAN,CAAoBxyC,SAApB,CAAgC,CAE/BoJ,YAAa7J,MAAMizC,aAFY,CAI/BC,cAAe,wBAAW,CAEzB,WAAa,KAAK5F,MAAlB,CACCwC,SAAW,CADZ,CAGA,IAAM,MAAQ,CAAR,CAAW1rB,EAAIkpB,OAAOlsC,MAA5B,CAAoCyb,IAAMuH,CAA1C,CAA6C,EAAGvH,CAAhD,CAAoD,CAEnD,UAAY,KAAKywB,MAAL,CAAazwB,CAAb,CAAZ,CAEAizB,SAAW1vC,KAAKwM,GAAL,CACTkjC,QADS,CACCuD,MAAMhC,KAAN,CAAagC,MAAMhC,KAAN,CAAYjwC,MAAZ,CAAqB,CAAlC,CADD,CAAX,CAGA,CAED,KAAK0uC,QAAL,CAAgBA,QAAhB,CAEA,CApB8B,CAsB/BqD,KAAM,eAAW,CAEhB,IAAM,MAAQ,CAAd,CAAiBt2B,EAAI,KAAKywB,MAAL,CAAYlsC,MAAjC,CAAyCyb,GAAzC,CAAgD,CAE/C,KAAKywB,MAAL,CAAazwB,CAAb,EAAiBs2B,IAAjB,CAAuB,CAAvB,CAA0B,KAAKrD,QAA/B,EAEA,CAED,WAAA,CAEA,CAhC8B,CAkC/BsD,SAAU,mBAAW,CAEpB,IAAM,MAAQ,CAAd,CAAiBv2B,EAAI,KAAKywB,MAAL,CAAYlsC,MAAjC,CAAyCyb,GAAzC,CAAgD,CAE/C,KAAKywB,MAAL,CAAazwB,CAAb,EAAiBu2B,QAAjB,GAEA,CAED,WAAA,CAEA,CA5C8B,CAAhC;CAkDAzyC,OAAOK,MAAP,CAAehB,MAAMizC,aAArB,CAAoC,CAEnCvS,MAAO,eAAU4S,IAAV,CAAiB,CAEvB,WAAa,EAAb,CACCC,WAAaD,KAAKhG,MADnB,CAECkG,UAAY,KAAQF,KAAKG,GAAL,EAAY,GAApB,CAFb,CAIA,IAAM,MAAQ,CAAR,CAAWrvB,EAAImvB,WAAWnyC,MAAhC,CAAwCyb,IAAMuH,CAA9C,CAAiD,EAAGvH,CAApD,CAAwD,CAEvDywB,OAAOzZ,IAAP,CAAa7zB,MAAM0zC,aAAN,CAAoBhT,KAApB,CAA2B6S,WAAY12B,CAAZ,CAA3B,EAA6C4J,KAA7C,CAAoD+sB,SAApD,CAAb,EAEA,CAED,iBAAiBP,aAAV,CAAyBK,KAAK5yC,IAA9B,CAAoC4yC,KAAKxD,QAAzC,CAAmDxC,MAAnD,CAAP,CAEA,CAhBkC,CAmBnC7N,OAAQ,gBAAUwN,IAAV,CAAiB,CAExB,WAAa,EAAb,CACC0G,WAAa1G,KAAKK,MADnB,CAGA,SAAW,CAEV,OAAQL,KAAKvsC,IAFH,CAGV,WAAYusC,KAAK6C,QAHP,CAIV,SAAUxC,MAJA,CAAX,CAQA,IAAM,MAAQ,CAAR,CAAWlpB,EAAIuvB,WAAWvyC,MAAhC,CAAwCyb,IAAMuH,CAA9C,CAAiD,EAAGvH,CAApD,CAAwD,CAEvDywB,OAAOzZ,IAAP,CAAa7zB,MAAM0zC,aAAN,CAAoBjU,MAApB,CAA4BkU,WAAY92B,CAAZ,CAA5B,CAAb,EAEA,CAED,WAAA,CAEA,CAxCkC,CA2CnC+2B,8BAA+B,uCAAUlzC,IAAV,CAAgBmzC,mBAAhB,CAAqCJ,GAArC,CAA0CK,MAA1C,CAAmD,CAEjF,oBAAsBD,oBAAoBzyC,MAA1C,CACA,WAAa,EAAb,CAEA,IAAM,MAAQ,CAAd,CAAiByb,EAAIk3B,eAArB,CAAsCl3B,GAAtC,CAA6C,CAE5C,UAAY,EAAZ,CACA,WAAa,EAAb,CAEAw0B,MAAMxd,IAAN,CACE,CAAEhX,EAAIk3B,eAAJ,CAAsB,CAAxB,EAA8BA,eADhC,CAEEl3B,CAFF,CAGE,CAAEA,EAAI,CAAN,EAAYk3B,eAHd,EAKAld,OAAOhD,IAAP,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,EAEA,UAAY7zB,MAAMg0C,cAAN,CAAqBC,gBAArB,CAAuC5C,KAAvC,CAAZ,CACAA,MAAQrxC,MAAMg0C,cAAN,CAAqBE,WAArB,CAAkC7C,KAAlC,CAAyC,CAAzC,CAA4CliC,KAA5C,CAAR,CACA0nB,OAAS72B,MAAMg0C,cAAN,CAAqBE,WAArB,CAAkCrd,MAAlC,CAA0C,CAA1C,CAA6C1nB,KAA7C,CAAT;;CAIA,GAAK,CAAE2kC,MAAF,EAAYzC,MAAO,CAAP,IAAe,CAAhC,CAAoC,CAEnCA,MAAMxd,IAAN,CAAYkgB,eAAZ,EACAld,OAAOhD,IAAP,CAAagD,OAAQ,CAAR,CAAb,EAEA,CAEDyW,OAAOzZ,IAAP,CACE,UAAUsgB,mBAAV,CACC,0BAA4BN,oBAAqBh3B,CAArB,EAAyBnc,IAArD,CAA4D,GAD7D,CAEC2wC,KAFD,CAEQxa,MAFR,EAGEpQ,KAHF,CAGS,IAAMgtB,GAHf,CADF,EAKA,CAED,iBAAiBR,aAAV,CAAyBvyC,IAAzB,CAA+B,CAAC,CAAhC,CAAmC4sC,MAAnC,CAAP,CAEA,CAlFkC,CAoFnC8G,WAAY,oBAAUC,iBAAV,CAA6B3zC,IAA7B,CAAoC,CAE/C,cAAgB2zC,iBAAhB,CAEA,GAAK,CAAE9X,MAAMC,OAAN,CAAe6X,iBAAf,CAAP,CAA4C,CAE3C,MAAQA,iBAAR,CACAC,UAAYC,EAAE51B,QAAF,EAAc41B,EAAE51B,QAAF,CAAW61B,UAAzB,EAAuCD,EAAEC,UAArD,CAEA,CAED,IAAM,MAAQ,CAAd,CAAiB33B,EAAIy3B,UAAUlzC,MAA/B,CAAuCyb,GAAvC,CAA8C,CAE7C,GAAKy3B,UAAWz3B,CAAX,EAAenc,IAAf,GAAwBA,IAA7B,CAAoC,CAEnC,iBAAkBmc,CAAX,CAAP,CAEA,CACD,CAED,WAAA,CAEA,CA1GkC,CA4GnC43B,oCAAqC,6CAAUlR,YAAV,CAAwBkQ,GAAxB,CAA6BK,MAA7B,CAAsC,CAE1E,4BAA8B,EAA9B;;CAIA,YAAc,oBAAd;;CAIA,IAAM,MAAQ,CAAR,CAAWl3B,GAAK2mB,aAAaniC,MAAnC,CAA2Cyb,EAAID,EAA/C,CAAmDC,GAAnD,CAA0D,CAEzD,gBAAkB0mB,aAAc1mB,CAAd,CAAlB,CACA,UAAYutB,YAAY1pC,IAAZ,CAAiBK,KAAjB,CAAwB2zC,OAAxB,CAAZ,CAEA,GAAKC,OAASA,MAAMvzC,MAAN,CAAe,CAA7B,CAAiC,CAEhC,SAAWuzC,MAAO,CAAP,CAAX,CAEA,0BAA4BC,wBAAyBl0C,IAAzB,CAA5B,CACA,GAAK,CAAEm0C,qBAAP,CAA+B,CAE9BD,wBAAyBl0C,IAAzB,EAAkCm0C,sBAAwB,EAA1D,CAEA,CAEDA,sBAAsBhhB,IAAtB,CAA4BuW,WAA5B,EAEA,CAED,CAED,UAAY,EAAZ,CAEA,IAAM,QAAN,2BAAA,CAA4C,CAE3C0K,MAAMjhB,IAAN,CAAY7zB,MAAMizC,aAAN,CAAoBW,6BAApB,CAAmDlzC,IAAnD,CAAyDk0C,wBAAyBl0C,IAAzB,CAAzD,CAA0F+yC,GAA1F,CAA+FK,MAA/F,CAAZ,EAEA,CAED,YAAA,CAEA,CAtJkC;CAyJnCiB,eAAgB,wBAAUC,SAAV,CAAqBC,KAArB,CAA4BC,QAA5B,CAAuC,CAEtD,GAAK,CAAEF,SAAP,CAAmB,CAElB7pC,QAAQuL,KAAR,CAAe,mCAAf,EACA,WAAA,CAEA,CAED,qBAAuB,yBAAA,CACrBy+B,SADqB,CACVC,SADU,CACCC,aADD,CACgBC,YADhB,CAC8BC,UAD9B,CAC2C;CAGjE,GAAKF,cAAcj0C,MAAd,GAAyB,CAA9B,CAAkC,CAEjC,UAAY,EAAZ,CACA,WAAa,EAAb,CAEApB,MAAMg0C,cAAN,CAAqBwB,WAArB,CACEH,aADF,CACiBhE,KADjB,CACwBxa,MADxB,CACgCye,YADhC;CAIA,GAAKjE,MAAMjwC,MAAN,GAAiB,CAAtB,CAA0B,CAEzBm0C,WAAW1hB,IAAX,CAAiB,aAAA,CAAeuhB,SAAf,CAA0B/D,KAA1B,CAAiCxa,MAAjC,CAAjB,EAEA,CAED,CAED,CArBD,CAuBA,WAAa,EAAb,CAEA,aAAeme,UAAUt0C,IAAV,EAAkB,SAAjC;CAEA,aAAes0C,UAAU5zC,MAAV,EAAoB,CAAC,CAApC,CACA,QAAU4zC,UAAUvB,GAAV,EAAiB,EAA3B,CAEA,oBAAsBuB,UAAUS,SAAV,EAAuB,EAA7C,CAEA,IAAM,MAAQ,CAAd,CAAiB/qC,EAAIgrC,gBAAgBt0C,MAArC,CAA6CsJ,GAA7C,CAAoD,CAEnD,kBAAoBgrC,gBAAiBhrC,CAAjB,EAAqBirC,IAAzC;CAGA,GAAK,CAAEN,aAAF,EAAmBA,cAAcj0C,MAAd,GAAyB,CAAjD,CAAqD;;CAIrD,GAAKi0C,cAAc,CAAd,EAAiB9R,YAAtB,CAAqC;CAGpC,qBAAuB,EAAvB,CACA,IAAM,MAAQ,CAAd,CAAiBhR,EAAI8iB,cAAcj0C,MAAnC,CAA2CmxB,GAA3C,CAAkD,CAEjD,GAAK8iB,cAAc9iB,CAAd,EAAiBgR,YAAtB,CAAqC,CAEpC,IAAM,MAAQ,CAAd,CAAiBl4B,EAAIgqC,cAAc9iB,CAAd,EAAiBgR,YAAjB,CAA8BniC,MAAnD,CAA2DiK,GAA3D,CAAkE,CAEjEuqC,iBAAkBP,cAAc9iB,CAAd,EAAiBgR,YAAjB,CAA8Bl4B,CAA9B,CAAlB,EAAuD,CAAC,CAAxD,CACA,CAED,CAED;;;CAKD,IAAM,mBAAN,oBAAA,CAAgD,CAE/C,UAAY,EAAZ,CACA,WAAa,EAAb,CAEA,IAAM,MAAQ,CAAd,CACEA,IAAMgqC,cAAc9iB,CAAd,EAAiBgR,YAAjB,CAA8BniC,MADtC,CAC8C,EAAGiK,CADjD,CACqD,CAEpD,iBAAmBgqC,cAAc9iB,CAAd,CAAnB,CAEA8e,MAAMxd,IAAN,CAAYgiB,aAAavH,IAAzB,EACAzX,OAAOhD,IAAP,CAAegiB,aAAazL,WAAb,GAA6B0L,eAA/B,CAAmD,CAAnD,CAAuD,CAApE,EAEA,CAEDxI,OAAOzZ,IAAP,CAAa,UAAUsgB,mBAAV,CACX,yBAA2B2B,eAA3B,CAA6C,GADlC,CACuCzE,KADvC,CAC8Cxa,MAD9C,CAAb,EAGA,CAEDiZ,SAAW8F,iBAAiBx0C,MAAjB,EAA4BqyC,KAAO,GAAnC,CAAX,CAEA,CA1CD,IA0CO;CAGN,aAAe,UAAYwB,MAAOvqC,CAAP,EAAWhK,IAAvB,CAA8B,GAA7C,CAEAq1C,iBACE/1C,MAAMg2C,mBADR,CAC6BC,SAAW,WADxC,CAEEZ,aAFF,CAEiB,KAFjB,CAEwB/H,MAFxB,EAIAyI,iBACE/1C,MAAMk2C,uBADR,CACiCD,SAAW,aAD5C,CAEEZ,aAFF,CAEiB,KAFjB,CAEwB/H,MAFxB,EAIAyI,iBACE/1C,MAAMg2C,mBADR,CAC6BC,SAAW,QADxC,CAEEZ,aAFF,CAEiB,KAFjB,CAEwB/H,MAFxB,EAIA,CAED,CAED,GAAKA,OAAOlsC,MAAP,GAAkB,CAAvB,CAA2B,CAE1B,WAAA,CAEA,CAED,SAAW,UAAU6xC,aAAV,CAAyBkD,QAAzB,CAAmCrG,QAAnC,CAA6CxC,MAA7C,CAAX,CAEA,WAAA,CAEA,CApRkC,CAApC;;;;;;;;;IAoSAttC,MAAMo2C,cAAN,CAAuB,SAAUC,IAAV,CAAiB,CAEvC,KAAK3E,KAAL,CAAa2E,IAAb,CACA,KAAKC,kBAAL,GACA,KAAKC,UAAL,CAAkB,CAAlB,CAEA,KAAKjI,IAAL,CAAY,CAAZ,CAEA,KAAKC,SAAL,CAAiB,GAAjB,CAEA,CAVD,CAYA5tC,OAAOK,MAAP,CAAehB,MAAMo2C,cAAN,CAAqB31C,SAApC,CAA+CT,MAAMy5B,eAAN,CAAsBh5B,SAArE,CAAgF;;;CAK/E+1C,WAAY,oBAAUvJ,IAAV,CAAgBwJ,YAAhB,CAA+B,CAE1C,SAAWA,cAAgB,KAAK/E,KAAhC,CACCgF,SAAWL,KAAKrmB,IADjB,CAGC2mB,WAAa,WAAA,GAAgB,QAAhB,CACX32C,MAAMizC,aAAN,CAAoBmB,UAApB,CAAgCiC,IAAhC,CAAsCpJ,IAAtC,CADW,CACoCA,IAJlD,CAMC2J,SAAWD,aAAe,IAAf,CAAsBA,WAAW3mB,IAAjC,CAAwCid,IANpD,CAQC4J,eAAiB,KAAKC,cAAL,CAAqBF,QAArB,CARlB,CASCG,gBAAkB,IATnB,CAWA,GAAKF,iBAAmB12C,SAAxB,CAAoC,CAEnC,mBACE02C,eAAeG,YAAf,CAA6BN,QAA7B,CADF,CAGA,GAAKO,iBAAmB92C,SAAxB,CAAoC,CAEnC,qBAAA,CAEA;;CAID42C,gBAAkBF,eAAeK,YAAf,CAA6B,CAA7B,CAAlB;CAGA,GAAKP,aAAe,IAApB,CACCA,WAAaI,gBAAgB3J,KAA7B,CAED;CAGD,GAAKuJ,aAAe,IAApB,CAA2B,WAAA;CAG3B,cAAgB,UACdP,cADkB,CACHe,OADD,CACU,IADV,CACgBR,UADhB,CAC4BF,YAD5B,CAAhB,CAGA,KAAKW,WAAL,CAAkBC,SAAlB,CAA6BN,eAA7B;CAGA,KAAKO,kBAAL,CAAyBD,SAAzB,CAAoCT,QAApC,CAA8CF,QAA9C,EAEA,gBAAA,CAEA,CArD8E;CAwD/EO,eAAgB,wBAAUhK,IAAV,CAAgBwJ,YAAhB,CAA+B,CAE9C,SAAWA,cAAgB,KAAK/E,KAAhC,CACCgF,SAAWL,KAAKrmB,IADjB,CAGC2mB,WAAa,WAAA,GAAgB,QAAhB,CACX32C,MAAMizC,aAAN,CAAoBmB,UAApB,CAAgCiC,IAAhC,CAAsCpJ,IAAtC,CADW,CACoCA,IAJlD,CAMC2J,SAAWD,WAAaA,WAAW3mB,IAAxB,CAA+Bid,IAN3C,CAQC4J,eAAiB,KAAKC,cAAL,CAAqBF,QAArB,CARlB,CAUA,GAAKC,iBAAmB12C,SAAxB,CAAoC,CAEnC,sBAAsB62C,YAAf,CAA6BN,QAA7B,GAA2C,IAAlD,CAEA,CAED,WAAA,CAEA,CA5E8E;CA+E/Ea,cAAe,wBAAW,CAEzB,YAAc,KAAKC,QAAnB,CACCC,SAAW,KAAKC,eADjB,CAECC,SAAW,KAAKC,SAFjB,CAGCC,UAAY,KAAKC,gBAHlB,CAKA,KAAKJ,eAAL,CAAuB,CAAvB,CACA,KAAKI,gBAAL,CAAwB,CAAxB,CAEA,IAAM,MAAQ,CAAd,CAAiBj7B,IAAM46B,QAAvB,CAAiC,EAAG56B,CAApC,CAAwC,CAEvCk7B,QAASl7B,CAAT,EAAaqyB,KAAb,GAEA,CAED,IAAM,MAAQ,CAAd,CAAiBryB,IAAMg7B,SAAvB,CAAkC,EAAGh7B,CAArC,CAAyC,CAExC86B,SAAU96B,CAAV,EAAcm7B,QAAd,CAAyB,CAAzB,CAEA,CAED,WAAA,CAEA,CAvG8E;CA0G/EjpC,OAAQ,gBAAU6iC,SAAV,CAAsB,CAE7BA,WAAa,KAAKrD,SAAlB,CAEA,YAAc,KAAKiJ,QAAnB,CACCC,SAAW,KAAKC,eADjB,CAGCpJ,KAAO,KAAKA,IAAL,EAAasD,SAHrB,CAICC,cAAgBzxC,KAAKE,IAAL,CAAWsxC,SAAX,CAJjB,CAMCE,UAAY,KAAKyE,UAAL,EAAmB,CANhC;CAUA,IAAM,MAAQ,CAAd,CAAiB15B,IAAM46B,QAAvB,CAAiC,EAAG56B,CAApC,CAAwC,CAEvC,WAAak7B,QAASl7B,CAAT,CAAb,CAEA,GAAKm0B,OAAO7H,OAAZ,CAAsB,CAErB6H,OAAOW,OAAP,CAAgBrD,IAAhB,CAAsBsD,SAAtB,CAAiCC,aAAjC,CAAgDC,SAAhD,EAEA,CAED;CAID,aAAe,KAAK8F,SAApB,CACCC,UAAY,KAAKC,gBADlB,CAGA,IAAM,MAAQ,CAAd,CAAiBj7B,IAAMg7B,SAAvB,CAAkC,EAAGh7B,CAArC,CAAyC,CAExC86B,SAAU96B,CAAV,EAAco7B,KAAd,CAAqBnG,SAArB,EAEA,CAED,WAAA,CAEA,CAjJ8E;CAoJ/EL,QAAS,kBAAW,CAEnB,YAAYC,KAAZ,CAEA,CAxJ8E;CA2J/EwG,YAAa,qBAAUjL,IAAV,CAAiB,CAE7B,YAAc,KAAKuK,QAAnB,CACCZ,SAAW3J,KAAKjd,IADjB,CAECmoB,cAAgB,KAAKrB,cAFtB,CAGCD,eAAiBsB,cAAevB,QAAf,CAHlB,CAKA,GAAKC,iBAAmB12C,SAAxB,CAAoC;;;CAMnC,oBAAsB02C,eAAeK,YAArC,CAEA,IAAM,MAAQ,CAAR,CAAW9yB,EAAIg0B,gBAAgBh3C,MAArC,CAA6Cyb,IAAMuH,CAAnD,CAAsD,EAAGvH,CAAzD,CAA6D,CAE5D,WAAau7B,gBAAiBv7B,CAAjB,CAAb,CAEA,KAAKoyB,iBAAL,CAAwB+B,MAAxB,EAEA,eAAiBA,OAAOjD,WAAxB,CACCsK,mBAAqBN,QAASA,QAAQ32C,MAAR,CAAiB,CAA1B,CADtB,CAGA4vC,OAAOjD,WAAP,CAAqB,IAArB,CACAiD,OAAOhD,iBAAP,CAA2B,IAA3B,CAEAqK,mBAAmBtK,WAAnB,CAAiCuK,UAAjC,CACAP,QAASO,UAAT,EAAwBD,kBAAxB,CACAN,QAAQQ,GAAR,GAEA,KAAKC,gCAAL,CAAuCxH,MAAvC,EAEA,CAED,qBAAsB4F,QAAf,CAAP,CAEA,CAED,CAlM8E;CAqM/E6B,YAAa,qBAAUpC,IAAV,CAAiB,CAE7B,aAAeA,KAAKrmB,IAApB,CACCmoB,cAAgB,KAAKrB,cADtB,CAGA,IAAM,YAAN,iBAAA,CAAsC,CAErC,iBAAmBqB,cAAevB,QAAf,EAA0BI,YAA7C,CACChG,OAASgG,aAAcN,QAAd,CADV,CAGA,GAAK1F,SAAW7wC,SAAhB,CAA4B,CAE3B,KAAK8uC,iBAAL,CAAwB+B,MAAxB,EACA,KAAK0H,qBAAL,CAA4B1H,MAA5B,EAEA,CAED,CAED,mBAAqB,KAAK2H,sBAA1B,CACCC,cAAgBC,eAAgBnC,QAAhB,CADjB,CAGA,GAAKkC,gBAAkBz4C,SAAvB,CAAmC,CAElC,IAAM,aAAN,iBAAA,CAAuC,CAEtC,YAAcy4C,cAAexD,SAAf,CAAd,CACA0D,QAAQC,oBAAR,GACA,KAAKC,sBAAL,CAA6BF,OAA7B,EAEA,CAED,CAED,CAvO8E;CA0O/EG,cAAe,uBAAUhM,IAAV,CAAgBwJ,YAAhB,CAA+B,CAE7C,WAAa,KAAKQ,cAAL,CAAqBhK,IAArB,CAA2BwJ,YAA3B,CAAb,CAEA,GAAKzF,SAAW,IAAhB,CAAuB,CAEtB,KAAK/B,iBAAL,CAAwB+B,MAAxB,EACA,KAAK0H,qBAAL,CAA4B1H,MAA5B,EAEA,CAED,CArP8E,CAAhF,EAyPAhxC,MAAMo2C,cAAN,CAAqBe,OAArB,CAA+Bn3C,MAAM8sC,eAAN,CAAsBC,IAArD;CAIApsC,OAAOK,MAAP,CAAehB,MAAMo2C,cAAN,CAAqB31C,SAApC,CAA+C,CAE9C22C,YAAa,qBAAUpG,MAAV,CAAkB+F,eAAlB,CAAoC,CAEhD,SAAW/F,OAAO3D,UAAP,EAAqB,KAAKqE,KAArC,CACCpE,OAAS0D,OAAO5D,KAAP,CAAaE,MADvB,CAECC,QAAUD,OAAOlsC,MAFlB,CAGCu2C,SAAW3G,OAAOlD,iBAHnB,CAICN,aAAewD,OAAOnD,aAJvB,CAKC6I,SAAWL,KAAKrmB,IALjB,CAMC6oB,eAAiB,KAAKF,sBANvB,CAOCO,eAAiBL,eAAgBnC,QAAhB,CAPlB,CASA,GAAKwC,iBAAmB/4C,SAAxB,CAAoC,CAEnC+4C,eAAiB,EAAjB,CACAL,eAAgBnC,QAAhB,EAA6BwC,cAA7B,CAEA,CAED,IAAM,MAAQ,CAAd,CAAiBr8B,IAAM0wB,OAAvB,CAAgC,EAAG1wB,CAAnC,CAAuC,CAEtC,UAAYywB,OAAQzwB,CAAR,CAAZ,CACCu4B,UAAY/B,MAAM3yC,IADnB,CAECo4C,QAAUI,eAAgB9D,SAAhB,CAFX,CAIA,GAAK0D,UAAY34C,SAAjB,CAA6B,CAE5Bw3C,SAAU96B,CAAV,EAAgBi8B,OAAhB,CAEA,CAJD,IAIO,CAENA,QAAUnB,SAAU96B,CAAV,CAAV,CAEA,GAAKi8B,UAAY34C,SAAjB,CAA6B;CAI5B,GAAK24C,QAAQ/K,WAAR,GAAwB,IAA7B,CAAoC,CAEnC,EAAG+K,QAAQK,cAAX,CACA,KAAKC,mBAAL,CAA0BN,OAA1B,CAAmCpC,QAAnC,CAA6CtB,SAA7C,EAEA,CAED,SAEA,CAED,SAAW2B,iBAAmBA,gBAC5BjJ,iBAD4B,CACTjxB,CADS,EACLi8B,OADK,CACGO,UADjC,CAGAP,QAAU,UAAUQ,aAAV,CACRt5C,MAAMu5C,eAAN,CAAsBniB,MAAtB,CAA8Bif,IAA9B,CAAoCjB,SAApC,CAA+CoE,IAA/C,CADQ,CAERnG,MAAMoG,aAFE,CAEapG,MAAMqG,YAAN,EAFb,CAAV,CAIA,EAAGZ,QAAQK,cAAX,CACA,KAAKC,mBAAL,CAA0BN,OAA1B,CAAmCpC,QAAnC,CAA6CtB,SAA7C,EAEAuC,SAAU96B,CAAV,EAAgBi8B,OAAhB,CAEA,CAEDtL,aAAc3wB,CAAd,EAAkB4Y,YAAlB,CAAiCqjB,QAAQp4B,MAAzC,CAEA,CAED,CAnE6C,CAqE9CsuB,gBAAiB,yBAAUgC,MAAV,CAAmB,CAEnC,GAAK,CAAE,KAAK1B,eAAL,CAAsB0B,MAAtB,CAAP,CAAwC,CAEvC,GAAKA,OAAOjD,WAAP,GAAuB,IAA5B,CAAmC;;CAKlC,aAAe,CAAEiD,OAAO3D,UAAP,EAAqB,KAAKqE,KAA5B,EAAoC1hB,IAAnD,CACC4mB,SAAW5F,OAAO5D,KAAP,CAAapd,IADzB,CAEC6mB,eAAiB,KAAKC,cAAL,CAAqBF,QAArB,CAFlB,CAIA,KAAKQ,WAAL,CAAkBpG,MAAlB,CACE6F,gBAAkBA,eAAeK,YAAf,CAA6B,CAA7B,CADpB,EAGA,KAAKI,kBAAL,CAAyBtG,MAAzB,CAAiC4F,QAAjC,CAA2CF,QAA3C,EAEA,CAED,aAAe1F,OAAOlD,iBAAtB;CAGA,IAAM,MAAQ,CAAR,CAAW1pB,EAAIuzB,SAASv2C,MAA9B,CAAsCyb,IAAMuH,CAA5C,CAA+C,EAAGvH,CAAlD,CAAsD,CAErD,YAAc86B,SAAU96B,CAAV,CAAd,CAEA,GAAKi8B,QAAQd,QAAR,KAAwB,CAA7B,CAAiC,CAEhC,KAAK2B,YAAL,CAAmBb,OAAnB,EACAA,QAAQc,iBAAR,GAEA,CAED,CAED,KAAKC,WAAL,CAAkB7I,MAAlB,EAEA,CAED,CA7G6C,CA+G9C/B,kBAAmB,2BAAU+B,MAAV,CAAmB,CAErC,GAAK,KAAK1B,eAAL,CAAsB0B,MAAtB,CAAL,CAAsC,CAErC,aAAeA,OAAOlD,iBAAtB;CAGA,IAAM,MAAQ,CAAR,CAAW1pB,EAAIuzB,SAASv2C,MAA9B,CAAsCyb,IAAMuH,CAA5C,CAA+C,EAAGvH,CAAlD,CAAsD,CAErD,YAAc86B,SAAU96B,CAAV,CAAd,CAEA,GAAK,EAAGi8B,QAAQd,QAAX,GAAwB,CAA7B,CAAiC,CAEhCc,QAAQC,oBAAR,GACA,KAAKe,gBAAL,CAAuBhB,OAAvB,EAEA,CAED,CAED,KAAKiB,eAAL,CAAsB/I,MAAtB,EAEA,CAED,CAvI6C;CA2I9CsF,mBAAoB,6BAAW,CAE9B,KAAKkB,QAAL,CAAgB,EAAhB;CACA,KAAKE,eAAL,CAAuB,CAAvB,CAEA,KAAKZ,cAAL,CAAsB,EAAtB;;;;;CAQA,KAAKc,SAAL,CAAiB,EAAjB;CACA,KAAKE,gBAAL,CAAwB,CAAxB,CAEA,KAAKa,sBAAL,CAA8B,EAA9B;CAGA,KAAKqB,oBAAL,CAA4B,EAA5B;CACA,KAAKC,2BAAL,CAAmC,CAAnC,CAEA,UAAY,IAAZ,CAEA,KAAKC,KAAL,CAAa,CAEZnC,QAAS,CACR,SAAA,EAAY,CAAE,aAAaP,QAAN,CAAep2C,MAAtB,CAA+B,CADrC,CAER,SAAA,EAAY,CAAE,aAAas2C,eAAb,CAA+B,CAFrC,CAFG,CAMZC,SAAU,CACT,SAAA,EAAY,CAAE,aAAaC,SAAN,CAAgBx2C,MAAvB,CAAgC,CADrC,CAET,SAAA,EAAY,CAAE,aAAa02C,gBAAb,CAAgC,CAFrC,CANE,CAUZqC,oBAAqB,CACpB,SAAA,EAAY,CAAE,aAAaH,oBAAN,CAA2B54C,MAAlC,CAA2C,CADrC,CAEpB,SAAA,EAAY,CAAE,aAAa64C,2BAAb,CAA2C,CAFrC,CAVT,CAAb,CAiBA,CApL6C;CAwL9C3K,gBAAiB,yBAAU0B,MAAV,CAAmB,CAEnC,UAAYA,OAAOjD,WAAnB,CACA,eAAiB,IAAV,EAAkB7sC,MAAQ,KAAKw2C,eAAtC,CAEA,CA7L6C,CA+L9CJ,mBAAoB,4BAAUtG,MAAV,CAAkB4F,QAAlB,CAA4BF,QAA5B,CAAuC,CAE1D,YAAc,KAAKc,QAAnB,CACCW,cAAgB,KAAKrB,cADtB,CAECD,eAAiBsB,cAAevB,QAAf,CAFlB,CAIA,GAAKC,iBAAmB12C,SAAxB,CAAoC,CAEnC02C,eAAiB,CAEhBK,aAAc,CAAElG,MAAF,CAFE,CAGhBgG,aAAc,EAHE,CAAjB,CAOAhG,OAAOhD,iBAAP,CAA2B,CAA3B,CAEAmK,cAAevB,QAAf,EAA4BC,cAA5B,CAEA,CAbD,IAaO,CAEN,iBAAmBA,eAAeK,YAAlC,CAEAlG,OAAOhD,iBAAP,CAA2BkJ,aAAa91C,MAAxC,CACA81C,aAAarjB,IAAb,CAAmBmd,MAAnB,EAEA,CAEDA,OAAOjD,WAAP,CAAqBgK,QAAQ32C,MAA7B,CACA22C,QAAQlkB,IAAR,CAAcmd,MAAd,EAEA6F,eAAeG,YAAf,CAA6BN,QAA7B,EAA0C1F,MAA1C,CAEA,CAhO6C,CAkO9C0H,sBAAuB,+BAAU1H,MAAV,CAAmB,CAEzC,YAAc,KAAKwG,QAAnB,CACCa,mBAAqBN,QAASA,QAAQ32C,MAAR,CAAiB,CAA1B,CADtB,CAECk3C,WAAatH,OAAOjD,WAFrB,CAIAsK,mBAAmBtK,WAAnB,CAAiCuK,UAAjC,CACAP,QAASO,UAAT,EAAwBD,kBAAxB,CACAN,QAAQQ,GAAR,GAEAvH,OAAOjD,WAAP,CAAqB,IAArB,CAGA,aAAeiD,OAAO5D,KAAP,CAAapd,IAA5B,CACCmoB,cAAgB,KAAKrB,cADtB,CAECD,eAAiBsB,cAAevB,QAAf,CAFlB,CAGCwD,oBAAsBvD,eAAeK,YAHtC,CAKCmD,gBACCD,oBAAqBA,oBAAoBh5C,MAApB,CAA6B,CAAlD,CANF,CAQCk5C,iBAAmBtJ,OAAOhD,iBAR3B,CAUAqM,gBAAgBrM,iBAAhB,CAAoCsM,gBAApC,CACAF,oBAAqBE,gBAArB,EAA0CD,eAA1C,CACAD,oBAAoB7B,GAApB,GAEAvH,OAAOhD,iBAAP,CAA2B,IAA3B,CAGA,iBAAmB6I,eAAeG,YAAlC,CACCN,SAAW,CAAEqB,QAAQ1K,UAAR,EAAsB,KAAKqE,KAA7B,EAAqC1hB,IADjD,CAGA,oBAAqB0mB,QAAd,CAAP,CAEA,GAAK0D,oBAAoBh5C,MAApB,GAA+B,CAApC,CAAwC,CAEvC,qBAAsBw1C,QAAf,CAAP,CAEA,CAED,KAAK4B,gCAAL,CAAuCxH,MAAvC,EAEA,CA7Q6C,CA+Q9CwH,iCAAkC,0CAAUxH,MAAV,CAAmB,CAEpD,aAAeA,OAAOlD,iBAAtB,CACA,IAAM,MAAQ,CAAR,CAAW1pB,EAAIuzB,SAASv2C,MAA9B,CAAsCyb,IAAMuH,CAA5C,CAA+C,EAAGvH,CAAlD,CAAsD,CAErD,YAAc86B,SAAU96B,CAAV,CAAd,CAEA,GAAK,EAAGi8B,QAAQK,cAAX,GAA8B,CAAnC,CAAuC,CAEtC,KAAKH,sBAAL,CAA6BF,OAA7B,EAEA,CAED,CAED,CA9R6C,CAgS9Ce,YAAa,qBAAU7I,MAAV,CAAmB;;;;;CAQ/B,YAAc,KAAKwG,QAAnB,CACC+C,UAAYvJ,OAAOjD,WADpB,CAGCyM,gBAAkB,KAAK9C,eAAL,EAHnB,CAKC+C,oBAAsB1C,QAASyC,eAAT,CALvB,CAOAxJ,OAAOjD,WAAP,CAAqByM,eAArB,CACAzC,QAASyC,eAAT,EAA6BxJ,MAA7B,CAEAyJ,oBAAoB1M,WAApB,CAAkCwM,SAAlC,CACAxC,QAASwC,SAAT,EAAuBE,mBAAvB,CAEA,CArT6C,CAuT9CV,gBAAiB,yBAAU/I,MAAV,CAAmB;;;;;CAQnC,YAAc,KAAKwG,QAAnB,CACC+C,UAAYvJ,OAAOjD,WADpB,CAGC2M,mBAAqB,EAAG,KAAKhD,eAH9B,CAKCiD,iBAAmB5C,QAAS2C,kBAAT,CALpB,CAOA1J,OAAOjD,WAAP,CAAqB2M,kBAArB,CACA3C,QAAS2C,kBAAT,EAAgC1J,MAAhC,CAEA2J,iBAAiB5M,WAAjB,CAA+BwM,SAA/B,CACAxC,QAASwC,SAAT,EAAuBI,gBAAvB,CAEA,CA5U6C;CAgV9CvB,oBAAqB,6BAAUN,OAAV,CAAmBpC,QAAnB,CAA6BtB,SAA7B,CAAyC,CAE7D,mBAAqB,KAAKuD,sBAA1B,CACCC,cAAgBC,eAAgBnC,QAAhB,CADjB,CAGCiB,SAAW,KAAKC,SAHjB,CAKA,GAAKgB,gBAAkBz4C,SAAvB,CAAmC,CAElCy4C,cAAgB,EAAhB,CACAC,eAAgBnC,QAAhB,EAA6BkC,aAA7B,CAEA,CAEDA,cAAexD,SAAf,EAA6B0D,OAA7B,CAEAA,QAAQ/K,WAAR,CAAsB4J,SAASv2C,MAA/B,CACAu2C,SAAS9jB,IAAT,CAAeilB,OAAf,EAEA,CAnW6C,CAqW9CE,uBAAwB,gCAAUF,OAAV,CAAoB,CAE3C,aAAe,KAAKlB,SAApB,CACCgD,YAAc9B,QAAQA,OADvB,CAECpC,SAAWkE,YAAYC,QAAZ,CAAqB7qB,IAFjC,CAGColB,UAAYwF,YAAYpB,IAHzB,CAICX,eAAiB,KAAKF,sBAJvB,CAKCC,cAAgBC,eAAgBnC,QAAhB,CALjB,CAOCoE,oBAAsBnD,SAAUA,SAASv2C,MAAT,CAAkB,CAA5B,CAPvB,CAQCk3C,WAAaQ,QAAQ/K,WARtB,CAUA+M,oBAAoB/M,WAApB,CAAkCuK,UAAlC,CACAX,SAAUW,UAAV,EAAyBwC,mBAAzB,CACAnD,SAASY,GAAT,GAEA,qBAAsBnD,SAAf,CAAP,CAEA2F,iBAAkB,CAEjB,IAAM,KAAN,iBAAA,EAA+B,sBAAA,CAA/B,CAEA,sBAAuBrE,QAAhB,CAAP,CAEA,CAED,CA/X6C,CAiY9CiD,aAAc,sBAAUb,OAAV,CAAoB,CAEjC,aAAe,KAAKlB,SAApB,CACC2C,UAAYzB,QAAQ/K,WADrB,CAGCyM,gBAAkB,KAAK1C,gBAAL,EAHnB,CAKCkD,qBAAuBrD,SAAU6C,eAAV,CALxB,CAOA1B,QAAQ/K,WAAR,CAAsByM,eAAtB,CACA7C,SAAU6C,eAAV,EAA8B1B,OAA9B,CAEAkC,qBAAqBjN,WAArB,CAAmCwM,SAAnC,CACA5C,SAAU4C,SAAV,EAAwBS,oBAAxB,CAEA,CAhZ6C,CAkZ9ClB,iBAAkB,0BAAUhB,OAAV,CAAoB,CAErC,aAAe,KAAKlB,SAApB,CACC2C,UAAYzB,QAAQ/K,WADrB,CAGC2M,mBAAqB,EAAG,KAAK5C,gBAH9B,CAKCmD,kBAAoBtD,SAAU+C,kBAAV,CALrB,CAOA5B,QAAQ/K,WAAR,CAAsB2M,kBAAtB,CACA/C,SAAU+C,kBAAV,EAAiC5B,OAAjC,CAEAmC,kBAAkBlN,WAAlB,CAAgCwM,SAAhC,CACA5C,SAAU4C,SAAV,EAAwBU,iBAAxB,CAEA,CAja6C;CAsa9C7J,wBAAyB,kCAAW,CAEnC,iBAAmB,KAAK4I,oBAAxB,CACCQ,gBAAkB,KAAKP,2BAAL,EADnB,CAECvM,YAAcF,aAAcgN,eAAd,CAFf,CAIA,GAAK9M,cAAgBvtC,SAArB,CAAiC,CAEhCutC,YAAc,UAAUpV,iBAAV,CACZ,gBAAA,CAAkB,CAAlB,CADY,CACW,gBAAA,CAAkB,CAAlB,CADX,CAEX,CAFW,CAER,KAAK4iB,gCAFG,CAAd,CAIAxN,YAAYyN,YAAZ,CAA2BX,eAA3B,CACAhN,aAAcgN,eAAd,EAAkC9M,WAAlC,CAEA,CAED,kBAAA,CAEA,CAzb6C,CA2b9CiD,4BAA6B,qCAAUjD,WAAV,CAAwB,CAEpD,iBAAmB,KAAKsM,oBAAxB,CACCO,UAAY7M,YAAYyN,YADzB,CAGCT,mBAAqB,EAAG,KAAKT,2BAH9B,CAKCmB,sBAAwB5N,aAAckN,kBAAd,CALzB,CAOAhN,YAAYyN,YAAZ,CAA2BT,kBAA3B,CACAlN,aAAckN,kBAAd,EAAqChN,WAArC,CAEA0N,sBAAsBD,YAAtB,CAAqCZ,SAArC,CACA/M,aAAc+M,SAAd,EAA4Ba,qBAA5B,CAEA,CA1c6C,CA4c9CF,iCAAkC,gBAAA,CAAkB,CAAlB,CA5cY,CAA/C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAifAl7C,MAAMq7C,oBAAN,CAA6B,SAAUC,QAAV,CAAqB,CAEjD,KAAKtrB,IAAL,CAAYhwB,MAAMI,IAAN,CAAW0vB,YAAX,EAAZ;CAGA,KAAKyrB,QAAL,CAAgBhf,MAAM97B,SAAN,CAAgBgM,KAAhB,CAAsBlL,IAAtB,CAA4BJ,SAA5B,CAAhB,CAEA,KAAKq6C,eAAL,CAAuB,CAAvB;;CAGA,YAAc,EAAd,CACA,KAAKC,cAAL,CAAsB7Z,OAAtB;CAEA,IAAM,MAAQ,CAAR,CAAWxd,EAAIjjB,UAAUC,MAA/B,CAAuCyb,IAAMuH,CAA7C,CAAgD,EAAGvH,CAAnD,CAAuD,CAEtD+kB,QAASzgC,UAAW0b,CAAX,EAAemT,IAAxB,EAAiCnT,CAAjC,CAEA,CAED,KAAK6+B,MAAL,CAAc,EAAd;CACA,KAAKC,YAAL,CAAoB,EAApB;CACA,KAAK/D,SAAL,CAAiB,EAAjB;CACA,KAAKgE,sBAAL,CAA8B,EAA9B;CAEA,UAAY,IAAZ,CAEA,KAAK1B,KAAL,CAAa,CAEZ5d,QAAS,CACR,SAAA,EAAY,CAAE,aAAaif,QAAN,CAAen6C,MAAtB,CAA+B,CADrC,CAER,SAAA,EAAY,CAAE,YAAYgyB,KAAL,CAAatU,MAAM08B,eAA1B,CAA6C,CAFnD,CAFG,CAOZ,qBAAA,EAAwB,CAAE,aAAa5D,SAAN,CAAgBx2C,MAAvB,CAAgC,CAP9C,CAAb,CAWA,CArCD,CAuCApB,MAAMq7C,oBAAN,CAA2B56C,SAA3B,CAAuC,CAEtCoJ,YAAa7J,MAAMq7C,oBAFmB,CAItCjuC,IAAK,aAAUkuC,QAAV,CAAqB,CAEzB,YAAc,KAAKC,QAAnB,CACCM,SAAWvf,QAAQl7B,MADpB,CAEC06C,eAAiB,KAAKN,eAFvB,CAGCO,cAAgB,KAAKN,cAHtB,CAICO,MAAQ,KAAKN,MAJd,CAKCO,YAAc,KAAKN,YALpB,CAMChE,SAAW,KAAKC,SANjB,CAOCC,UAAYF,SAASv2C,MAPtB,CASA,IAAM,MAAQ,CAAR,CAAWgjB,EAAIjjB,UAAUC,MAA/B,CAAuCyb,IAAMuH,CAA7C,CAAgD,EAAGvH,CAAnD,CAAuD,CAEtD,WAAa1b,UAAW0b,CAAX,CAAb,CACCmT,KAAOzR,OAAOyR,IADf,CAEC9uB,MAAQ66C,cAAe/rB,IAAf,CAFT,CAIA,GAAK9uB,QAAUf,SAAf,CAA2B;CAI1Be,MAAQ26C,UAAR,CACAE,cAAe/rB,IAAf,EAAwB9uB,KAAxB,CACAo7B,QAAQzI,IAAR,CAActV,MAAd;CAIA,IAAM,MAAQ,CAAR,CAAWlT,EAAIwsC,SAArB,CAAgCr3B,IAAMnV,CAAtC,CAAyC,EAAGmV,CAA5C,CAAgD,CAE/Cm3B,SAAUn3B,CAAV,EAAcqT,IAAd,CACE,UAAU0lB,eAAV,CACCh7B,MADD,CACSy9B,MAAOx7B,CAAP,CADT,CACqBy7B,YAAaz7B,CAAb,CADrB,CADF,EAIA,CAED,CAlBD,QAkBYtf,MAAQ46C,cAAb,CAA8B,CAEpC,gBAAkBxf,QAASp7B,KAAT,CAAlB;CAIA,qBAAuB,EAAG46C,cAA1B,CACCI,iBAAmB5f,QAAS6f,gBAAT,CADpB,CAGAJ,cAAeG,iBAAiBlsB,IAAhC,EAAyC9uB,KAAzC,CACAo7B,QAASp7B,KAAT,EAAmBg7C,gBAAnB,CAEAH,cAAe/rB,IAAf,EAAwBmsB,gBAAxB,CACA7f,QAAS6f,gBAAT,EAA8B59B,MAA9B;CAIA,IAAM,MAAQ,CAAR,CAAWlT,EAAIwsC,SAArB,CAAgCr3B,IAAMnV,CAAtC,CAAyC,EAAGmV,CAA5C,CAAgD,CAE/C,oBAAsBm3B,SAAUn3B,CAAV,CAAtB,CACC47B,WAAaC,gBAAiBF,gBAAjB,CADd,CAECrD,QAAUuD,gBAAiBn7C,KAAjB,CAFX,CAIAm7C,gBAAiBn7C,KAAjB,EAA2Bk7C,UAA3B,CAEA,GAAKtD,UAAY34C,SAAjB,CAA6B;;;CAM5B24C,QAAU,UAAUS,eAAV,CACRh7B,MADQ,CACAy9B,MAAOx7B,CAAP,CADA,CACYy7B,YAAaz7B,CAAb,CADZ,CAAV,CAGA,CAED67B,gBAAiBF,gBAAjB,EAAsCrD,OAAtC,CAEA,CAED,CAxCM,QAwCKxc,QAASp7B,KAAT,IAAqBo7C,WAA1B,CAAuC,CAE7CnxC,QAAQuL,KAAR,CAAe,wCACb,8CADa,CAEb,yCAFF,EAIA;CAED;CAED,KAAK8kC,eAAL,CAAuBM,cAAvB,CAEA,CA3FqC,CA6FtCpd,OAAQ,gBAAU4c,QAAV,CAAqB,CAE5B,YAAc,KAAKC,QAAnB,CACCM,SAAWvf,QAAQl7B,MADpB,CAEC06C,eAAiB,KAAKN,eAFvB,CAGCO,cAAgB,KAAKN,cAHtB,CAIC9D,SAAW,KAAKC,SAJjB,CAKCC,UAAYF,SAASv2C,MALtB,CAOA,IAAM,MAAQ,CAAR,CAAWgjB,EAAIjjB,UAAUC,MAA/B,CAAuCyb,IAAMuH,CAA7C,CAAgD,EAAGvH,CAAnD,CAAuD,CAEtD,WAAa1b,UAAW0b,CAAX,CAAb,CACCmT,KAAOzR,OAAOyR,IADf,CAEC9uB,MAAQ66C,cAAe/rB,IAAf,CAFT,CAIA,GAAK9uB,QAAUf,SAAV,EAAuBe,OAAS46C,cAArC,CAAsD;CAIrD,oBAAsBA,gBAAtB,CACCS,kBAAoBjgB,QAASkgB,eAAT,CADrB,CAGAT,cAAeQ,kBAAkBvsB,IAAjC,EAA0C9uB,KAA1C,CACAo7B,QAASp7B,KAAT,EAAmBq7C,iBAAnB,CAEAR,cAAe/rB,IAAf,EAAwBwsB,eAAxB,CACAlgB,QAASkgB,eAAT,EAA6Bj+B,MAA7B;CAIA,IAAM,MAAQ,CAAR,CAAWlT,EAAIwsC,SAArB,CAAgCr3B,IAAMnV,CAAtC,CAAyC,EAAGmV,CAA5C,CAAgD,CAE/C,oBAAsBm3B,SAAUn3B,CAAV,CAAtB,CACCi8B,YAAcJ,gBAAiBG,eAAjB,CADf,CAEC1D,QAAUuD,gBAAiBn7C,KAAjB,CAFX,CAIAm7C,gBAAiBn7C,KAAjB,EAA2Bu7C,WAA3B,CACAJ,gBAAiBG,eAAjB,EAAqC1D,OAArC,CAEA,CAED,CAED;CAED,KAAK0C,eAAL,CAAuBM,cAAvB,CAEA,CA5IqC;CA+ItCY,QAAS,iBAAUpB,QAAV,CAAqB,CAE7B,YAAc,KAAKC,QAAnB,CACCM,SAAWvf,QAAQl7B,MADpB,CAEC06C,eAAiB,KAAKN,eAFvB,CAGCO,cAAgB,KAAKN,cAHtB,CAIC9D,SAAW,KAAKC,SAJjB,CAKCC,UAAYF,SAASv2C,MALtB,CAOA,IAAM,MAAQ,CAAR,CAAWgjB,EAAIjjB,UAAUC,MAA/B,CAAuCyb,IAAMuH,CAA7C,CAAgD,EAAGvH,CAAnD,CAAuD,CAEtD,WAAa1b,UAAW0b,CAAX,CAAb,CACCmT,KAAOzR,OAAOyR,IADf,CAEC9uB,MAAQ66C,cAAe/rB,IAAf,CAFT,CAIA,GAAK9uB,QAAUf,SAAf,CAA2B,CAE1B,qBAAsB6vB,IAAf,CAAP,CAEA,GAAK9uB,MAAQ46C,cAAb,CAA8B;CAI7B,qBAAuB,EAAGA,cAA1B,CACCI,iBAAmB5f,QAAS6f,gBAAT,CADpB,CAECQ,UAAY,EAAGd,QAFhB,CAGCe,WAAatgB,QAASqgB,SAAT,CAHd;CAMAZ,cAAeG,iBAAiBlsB,IAAhC,EAAyC9uB,KAAzC,CACAo7B,QAASp7B,KAAT,EAAmBg7C,gBAAnB;CAGAH,cAAea,WAAW5sB,IAA1B,EAAmCmsB,gBAAnC,CACA7f,QAAS6f,gBAAT,EAA8BS,UAA9B,CACAtgB,QAAQic,GAAR;CAIA,IAAM,MAAQ,CAAR,CAAWltC,EAAIwsC,SAArB,CAAgCr3B,IAAMnV,CAAtC,CAAyC,EAAGmV,CAA5C,CAAgD,CAE/C,oBAAsBm3B,SAAUn3B,CAAV,CAAtB,CACC47B,WAAaC,gBAAiBF,gBAAjB,CADd,CAECU,KAAOR,gBAAiBM,SAAjB,CAFR,CAIAN,gBAAiBn7C,KAAjB,EAA2Bk7C,UAA3B,CACAC,gBAAiBF,gBAAjB,EAAsCU,IAAtC,CACAR,gBAAgB9D,GAAhB,GAEA,CAED,CAhCD,IAgCO;CAIN,cAAgB,EAAGsD,QAAnB,CACCe,WAAatgB,QAASqgB,SAAT,CADd,CAGAZ,cAAea,WAAW5sB,IAA1B,EAAmC9uB,KAAnC,CACAo7B,QAASp7B,KAAT,EAAmB07C,UAAnB,CACAtgB,QAAQic,GAAR;CAIA,IAAM,MAAQ,CAAR,CAAWltC,EAAIwsC,SAArB,CAAgCr3B,IAAMnV,CAAtC,CAAyC,EAAGmV,CAA5C,CAAgD,CAE/C,oBAAsBm3B,SAAUn3B,CAAV,CAAtB,CAEA67B,gBAAiBn7C,KAAjB,EAA2Bm7C,gBAAiBM,SAAjB,CAA3B,CACAN,gBAAgB9D,GAAhB,GAEA,CAED;CAED;CAED;CAED,KAAKiD,eAAL,CAAuBM,cAAvB,CAEA,CAhOqC;CAoOtCgB,WAAY,oBAAUtD,IAAV,CAAgBH,UAAhB,CAA6B;;CAIxC,kBAAoB,KAAKuC,sBAAzB,CACC16C,MAAQ67C,cAAevD,IAAf,CADT,CAEC7B,SAAW,KAAKC,SAFjB,CAIA,GAAK12C,QAAUf,SAAf,CAA2B,gBAAiBe,KAAV,CAAP,CAE3B,UAAY,KAAKw6C,MAAjB,CACCO,YAAc,KAAKN,YADpB,CAECrf,QAAU,KAAKif,QAFhB,CAGCM,SAAWvf,QAAQl7B,MAHpB,CAIC06C,eAAiB,KAAKN,eAJvB,CAKCa,gBAAkB,SAAA,CAAWR,QAAX,CALnB,CAOA36C,MAAQy2C,SAASv2C,MAAjB,CAEA27C,cAAevD,IAAf,EAAwBt4C,KAAxB,CAEA86C,MAAMnoB,IAAN,CAAY2lB,IAAZ,EACAyC,YAAYpoB,IAAZ,CAAkBwlB,UAAlB,EACA1B,SAAS9jB,IAAT,CAAewoB,eAAf,EAEA,IAAM,MAAQP,cAAR,CACJ13B,EAAIkY,QAAQl7B,MADd,CACsByb,IAAMuH,CAD5B,CAC+B,EAAGvH,CADlC,CACsC,CAErC,WAAayf,QAASzf,CAAT,CAAb,CAEAw/B,gBAAiBx/B,CAAjB,EACE,UAAU08B,eAAV,CAA2Bh7B,MAA3B,CAAmCi7B,IAAnC,CAAyCH,UAAzC,CADF,CAGA,CAED,sBAAA,CAEA,CAzQqC,CA2QtC2D,aAAc,sBAAUxD,IAAV,CAAiB;;CAI9B,kBAAoB,KAAKoC,sBAAzB,CACC16C,MAAQ67C,cAAevD,IAAf,CADT,CAGA,GAAKt4C,QAAUf,SAAf,CAA2B,CAE1B,UAAY,KAAKu7C,MAAjB,CACCO,YAAc,KAAKN,YADpB,CAEChE,SAAW,KAAKC,SAFjB,CAGCqF,kBAAoBtF,SAASv2C,MAAT,CAAkB,CAHvC,CAIC87C,aAAevF,SAAUsF,iBAAV,CAJhB,CAKCE,iBAAmB3D,KAAMyD,iBAAN,CALpB,CAOAF,cAAeI,gBAAf,EAAoCj8C,KAApC,CAEAy2C,SAAUz2C,KAAV,EAAoBg8C,YAApB,CACAvF,SAASY,GAAT,GAEA0D,YAAa/6C,KAAb,EAAuB+6C,YAAagB,iBAAb,CAAvB,CACAhB,YAAY1D,GAAZ,GAEAyD,MAAO96C,KAAP,EAAiB86C,MAAOiB,iBAAP,CAAjB,CACAjB,MAAMzD,GAAN,GAEA,CAED,CAxSqC,CAAvC;;;;;IAqTAv4C,MAAMg0C,cAAN,CAAuB;CAGtBoJ,WAAY,oBAAUpvC,KAAV,CAAiBqvC,IAAjB,CAAuBC,EAAvB,CAA4B,CAEvC,GAAKt9C,MAAMg0C,cAAN,CAAqBuJ,YAArB,CAAmCvvC,KAAnC,CAAL,CAAkD,CAEjD,iBAAiBnE,WAAV,CAAuBmE,MAAMwvC,QAAN,CAAgBH,IAAhB,CAAsBC,EAAtB,CAAvB,CAAP,CAEA,CAED,aAAa7wC,KAAN,CAAa4wC,IAAb,CAAmBC,EAAnB,CAAP,CAEA,CAbqB;CAgBtBG,aAAc,sBAAUzvC,KAAV,CAAiB2rB,IAAjB,CAAuB+jB,UAAvB,CAAoC,CAEjD,GAAK,CAAE1vC,KAAF;CACH,CAAE0vC,UAAF,EAAgB1vC,MAAMnE,WAAN,GAAsB8vB,IADxC,CAC+C,YAAA,CAE/C,GAAK,YAAYgkB,iBAAZ,GAAkC,QAAvC,CAAkD,CAEjD,eAAO,CAAU3vC,KAAV,CAAP;CAEA,CAED,aAAavN,SAAN,CAAgBgM,KAAhB,CAAsBlL,IAAtB,CAA4ByM,KAA5B,CAAP;CAEA,CA7BqB,CA+BtBuvC,aAAc,sBAAUh/B,MAAV,CAAmB,CAEhC,mBAAmBq/B,MAAZ,CAAoBr/B,MAApB,GACL,EAAIA,0BAAJ,CADF,CAGA,CApCqB;CAuCtB01B,iBAAkB,0BAAU5C,KAAV,CAAkB,CAEnC,oBAAA,CAAsBx0B,CAAtB,CAAyB2D,CAAzB,CAA6B,CAE5B,aAAc3D,CAAP,EAAaw0B,MAAO7wB,CAAP,CAApB,CAEA,CAED,MAAQ6wB,MAAMjwC,MAAd,CACA,WAAa,SAAA,CAAWgjB,CAAX,CAAb,CACA,IAAM,MAAQ,CAAd,CAAiBvH,IAAMuH,CAAvB,CAA0B,EAAGvH,CAA7B,EAAiCf,OAAQe,CAAR,EAAcA,CAAd,CAAjC,CAEAf,OAAOqgB,IAAP,CAAa0hB,WAAb,EAEA,aAAA,CAEA,CAvDqB;CA0DtB3J,YAAa,qBAAUrd,MAAV,CAAkBC,MAAlB,CAA0B3nB,KAA1B,CAAkC,CAE9C,YAAc0nB,OAAOz1B,MAArB,CACA,WAAa,WAAWyI,WAAX,CAAwBi0C,OAAxB,CAAb,CAEA,IAAM,MAAQ,CAAR,CAAW5qC,UAAY,CAA7B,CAAgCA,YAAc4qC,OAA9C,CAAuD,EAAGjhC,CAA1D,CAA8D,CAE7D,cAAgB1N,MAAO0N,CAAP,EAAaia,MAA7B,CAEA,IAAM,MAAQ,CAAd,CAAiBtW,IAAMsW,MAAvB,CAA+B,EAAGtW,CAAlC,CAAsC,CAErC1E,OAAQ5I,WAAR,EAAyB2jB,OAAQknB,UAAYv9B,CAApB,CAAzB,CAEA,CAED,CAED,aAAA,CAEA,CA7EqB;CAgFtBg1B,YAAa,qBAAUwI,QAAV,CAAoB3M,KAApB,CAA2Bxa,MAA3B,CAAmConB,iBAAnC,CAAuD,CAEnE,MAAQ,CAAR,CAAWzd,IAAMwd,SAAU,CAAV,CAAjB,CAEA,MAAQxd,MAAQrgC,SAAR,EAAqBqgC,IAAKyd,iBAAL,IAA6B99C,SAA1D,CAAsE,CAErEqgC,IAAMwd,SAAUnhC,GAAV,CAAN,CAEA,CAED,GAAK2jB,MAAQrgC,SAAb,CAAyB;CAEzB,UAAYqgC,IAAKyd,iBAAL,CAAZ,CACA,GAAKn0C,QAAU3J,SAAf,CAA2B;CAE3B,GAAKo8B,MAAMC,OAAN,CAAe1yB,KAAf,CAAL,CAA8B,CAE7B,EAAG,CAEFA,MAAQ02B,IAAKyd,iBAAL,CAAR,CAEA,GAAKn0C,QAAU3J,SAAf,CAA2B,CAE1BkxC,MAAMxd,IAAN,CAAY2M,IAAI8N,IAAhB,EACAzX,OAAOhD,IAAP,CAAYokB,KAAZ,CAAmBphB,MAAnB,CAA2B/sB,KAA3B;CAEA,CAED02B,IAAMwd,SAAUnhC,GAAV,CAAN,CAEA,CAbD,MAaU2jB,MAAQrgC,SAblB,EAeA,CAjBD,QAiBY2J,MAAMoE,OAAN,GAAkB/N,SAAvB,CAAmC;CAGzC,EAAG,CAEF2J,MAAQ02B,IAAKyd,iBAAL,CAAR,CAEA,GAAKn0C,QAAU3J,SAAf,CAA2B,CAE1BkxC,MAAMxd,IAAN,CAAY2M,IAAI8N,IAAhB,EACAxkC,MAAMoE,OAAN,CAAe2oB,MAAf,CAAuBA,OAAOz1B,MAA9B,EAEA,CAEDo/B,IAAMwd,SAAUnhC,GAAV,CAAN,CAEA,CAbD,MAaU2jB,MAAQrgC,SAblB,EAeA,CAlBM,IAkBA;CAGN,EAAG,CAEF2J,MAAQ02B,IAAKyd,iBAAL,CAAR,CAEA,GAAKn0C,QAAU3J,SAAf,CAA2B,CAE1BkxC,MAAMxd,IAAN,CAAY2M,IAAI8N,IAAhB,EACAzX,OAAOhD,IAAP,CAAa/pB,KAAb,EAEA,CAED02B,IAAMwd,SAAUnhC,GAAV,CAAN,CAEA,CAbD,MAaU2jB,MAAQrgC,SAblB,EAeA,CAED,CAtJqB,CAAvB;;;;;;;;;IAsKAH,MAAM0zC,aAAN,CAAsB,SAAWhzC,IAAX,CAAiB2wC,KAAjB,CAAwBxa,MAAxB,CAAgCqnB,aAAhC,CAAgD,CAErE,GAAIx9C,OAASP,SAAb,CAAyB,eAAM,CAAW,yBAAX,CAAN,CAEzB,GAAIkxC,QAAUlxC,SAAV,EAAuBkxC,MAAMjwC,MAAN,GAAiB,CAA5C,CAAgD,CAE/C,eAAM,CAAW,+BAAiCV,IAA5C,CAAN,CAEA,CAED,KAAKA,IAAL,CAAYA,IAAZ,CAEA,KAAK2wC,KAAL,CAAarxC,MAAMg0C,cAAN,CAAqByJ,YAArB,CAAmCpM,KAAnC,CAA0C,KAAK8M,cAA/C,CAAb,CACA,KAAKtnB,MAAL,CAAc72B,MAAMg0C,cAAN,CAAqByJ,YAArB,CAAmC5mB,MAAnC,CAA2C,KAAKunB,eAAhD,CAAd,CAEA,KAAKC,gBAAL,CAAuBH,eAAiB,KAAKI,oBAA7C,EAEA,KAAKC,QAAL,GACA,KAAKnL,QAAL,GAEA,CApBD,CAsBApzC,MAAM0zC,aAAN,CAAoBjzC,SAApB,CAAgC,CAE/BoJ,YAAa7J,MAAM0zC,aAFY,CAI/ByK,eAAgBK,YAJe,CAK/BJ,gBAAiBI,YALc,CAO/BF,qBAAsBt+C,MAAMqI,iBAPG,CAS/Bo2C,iCAAkC,0CAAU3iC,MAAV,CAAmB,CAEpD,iBAAiBuc,mBAAV,CACL,KAAKgZ,KADA,CACO,KAAKxa,MADZ,CACoB,KAAK6iB,YAAL,EADpB,CACyC59B,MADzC,CAAP,CAGA,CAd8B,CAgB/B4iC,+BAAgC,wCAAU5iC,MAAV,CAAmB,CAElD,iBAAiBwc,iBAAV,CACL,KAAK+Y,KADA,CACO,KAAKxa,MADZ,CACoB,KAAK6iB,YAAL,EADpB,CACyC59B,MADzC,CAAP,CAGA,CArB8B,CAuB/B6iC,+BAAgC,wCAAU7iC,MAAV,CAAmB,CAElD,iBAAiBib,gBAAV,CACL,KAAKsa,KADA,CACO,KAAKxa,MADZ,CACoB,KAAK6iB,YAAL,EADpB,CACyC59B,MADzC,CAAP,CAGA,CA5B8B,CA8B/BuiC,iBAAkB,0BAAUH,aAAV,CAA0B,CAE3C,iBAAA,CAEA,OAASA,aAAT,EAEC,WAAW91C,mBAAX,CAECw2C,cAAgB,KAAKH,gCAArB,CAEA,MAED,WAAWp2C,iBAAX,CAECu2C,cAAgB,KAAKF,8BAArB,CAEA,MAED,WAAWp2C,iBAAX,CAECs2C,cAAgB,KAAKD,8BAArB,CAEA,MAlBF,CAsBA,GAAKC,gBAAkBz+C,SAAvB,CAAmC,CAElC,YAAc,iCACZ,KAAKs5C,aADO,CACS,wBADT,CACoC,KAAK/4C,IADvD,CAGA,GAAK,KAAK+sC,iBAAL,GAA2BttC,SAAhC,CAA4C;CAG3C,GAAK+9C,gBAAkB,KAAKI,oBAA5B,CAAmD,CAElD,KAAKD,gBAAL,CAAuB,KAAKC,oBAA5B,EAEA,CAJD,IAIO,CAEN,eAAM,CAAWO,OAAX,CAAN;CAEA,CAED,CAED1zC,QAAQC,IAAR,CAAcyzC,OAAd,EACA,OAEA,CAED,KAAKpR,iBAAL,CAAyBmR,aAAzB,CAEA,CAnF8B,CAqF/BE,iBAAkB,2BAAW,CAE5B,OAAS,KAAKrR,iBAAd,EAEC,UAAUgR,gCAAV,CAEC,aAAar2C,mBAAb,CAED,UAAUs2C,8BAAV,CAEC,aAAar2C,iBAAb,CAED,UAAUs2C,8BAAV,CAEC,aAAar2C,iBAAb,CAZF,CAgBA,CAvG8B,CAyG/BoxC,aAAc,uBAAW,CAExB,YAAY7iB,MAAL,CAAYz1B,MAAZ,CAAqB,KAAKiwC,KAAL,CAAWjwC,MAAvC,CAEA,CA7G8B;CAgH/B29C,MAAO,eAAUC,UAAV,CAAuB,CAE7B,GAAIA,aAAe,GAAnB,CAAyB,CAExB,UAAY,KAAK3N,KAAjB,CAEA,IAAK,MAAQ,CAAR,CAAWjtB,EAAIitB,MAAMjwC,MAA1B,CAAkCyb,IAAMuH,CAAxC,CAA2C,EAAGvH,CAA9C,CAAkD,CAEjDw0B,MAAOx0B,CAAP,GAAcmiC,UAAd,CAEA,CAED,CAED,WAAA,CAEA,CAhI8B;CAmI/Bv4B,MAAO,eAAU8nB,SAAV,CAAsB,CAE5B,GAAIA,YAAc,GAAlB,CAAwB,CAEvB,UAAY,KAAK8C,KAAjB,CAEA,IAAK,MAAQ,CAAR,CAAWjtB,EAAIitB,MAAMjwC,MAA1B,CAAkCyb,IAAMuH,CAAxC,CAA2C,EAAGvH,CAA9C,CAAkD,CAEjDw0B,MAAOx0B,CAAP,GAAc0xB,SAAd,CAEA,CAED,CAED,WAAA,CAEA,CAnJ8B;;CAuJ/B4E,KAAM,cAAUra,SAAV,CAAqBmmB,OAArB,CAA+B,CAEpC,UAAY,KAAK5N,KAAjB,CACC6N,MAAQ7N,MAAMjwC,MADf,CAECi8C,KAAO,CAFR,CAGCC,GAAK4B,MAAQ,CAHd,CAKA,MAAQ7B,OAAS6B,KAAT,EAAkB7N,MAAOgM,IAAP,EAAgBvkB,SAA1C,EAAsD,EAAGukB,IAAH,CAAtD,CACA,MAAQC,KAAO,CAAC,CAAR,EAAajM,MAAOiM,EAAP,EAAc2B,OAAnC,EAA6C,EAAG3B,EAAH,CAA7C,CAEA,EAAGA,EAAH;CAEA,GAAID,OAAS,CAAT,EAAcC,KAAO4B,KAAzB,CAAiC;CAGhC,GAAK7B,MAAQC,EAAb,CAAkBA,GAAKl9C,KAAKwM,GAAL,CAAU0wC,EAAV,CAAe,CAAf,CAAL,CAAyBD,KAAOC,GAAK,CAArC,CAElB,WAAa,KAAK5D,YAAL,EAAb,CACA,KAAKrI,KAAL,CAAarxC,MAAMg0C,cAAN,CAAqBoJ,UAArB,CAAiC/L,KAAjC,CAAwCgM,IAAxC,CAA8CC,EAA9C,CAAb,CACA,KAAKzmB,MAAL,CAAc72B,MAAMg0C,cAAN,CACZoJ,UADY,CACA,KAAKvmB,MADL,CACawmB,KAAOvmB,MADpB,CAC4BwmB,GAAKxmB,MADjC,CAAd,CAGA,CAED,WAAA,CAEA,CAjL8B;CAoL/BynB,SAAU,mBAAW,CAEpB,UAAY,IAAZ,CAEA,cAAgB,KAAK7E,YAAL,EAAhB,CACA,GAAK/jB,UAAYv1B,KAAKiK,KAAL,CAAYsrB,SAAZ,CAAZ,GAAwC,CAA7C,CAAiD,CAEhDxqB,QAAQuL,KAAR,CAAe,6BAAf,CAA8C,IAA9C,EACAyoC,MAAQ,KAAR,CAEA,CAED,UAAY,KAAK9N,KAAjB,CACCxa,OAAS,KAAKA,MADf,CAGCqoB,MAAQ7N,MAAMjwC,MAHf,CAKA,GAAI89C,QAAU,CAAd,CAAkB,CAEjB/zC,QAAQuL,KAAR,CAAe,gBAAf,CAAiC,IAAjC,EACAyoC,MAAQ,KAAR,CAEA,CAED,aAAe,IAAf,CAEA,IAAK,MAAQ,CAAb,CAAgBtiC,IAAMqiC,KAAtB,CAA6BriC,GAA7B,CAAoC,CAEnC,aAAew0B,MAAOx0B,CAAP,CAAf,CAEA,GAAK,eAAA,GAAoB,QAApB,EAAgC6uB,MAAO0T,QAAP,CAArC,CAAyD,CAExDj0C,QAAQuL,KAAR,CAAe,4BAAf,CAA6C,IAA7C,CAAmDmG,CAAnD,CAAsDuiC,QAAtD,EACAD,MAAQ,KAAR,CACA,MAEA,CAED,GAAIE,WAAa,IAAb,EAAqBA,SAAWD,QAApC,CAA+C,CAE9Cj0C,QAAQuL,KAAR,CAAe,mBAAf,CAAoC,IAApC,CAA0CmG,CAA1C,CAA6CuiC,QAA7C,CAAuDC,QAAvD,EACAF,MAAQ,KAAR,CACA,MAEA,CAEDE,SAAWD,QAAX,CAEA,CAED,GAAKvoB,SAAW12B,SAAhB,CAA4B,CAE3B,GAAKH,MAAMg0C,cAAN,CAAqBuJ,YAArB,CAAmC1mB,MAAnC,CAAL,CAAmD,CAElD,IAAM,MAAQ,CAAR,CAAWzS,EAAIyS,OAAOz1B,MAA5B,CAAoCyb,IAAMuH,CAA1C,CAA6C,EAAGvH,CAAhD,CAAoD,CAEnD,UAAYga,OAAQha,CAAR,CAAZ,CAEA,GAAK6uB,MAAO5hC,KAAP,CAAL,CAAsB,CAErBqB,QAAQuL,KAAR,CAAe,6BAAf,CAA8C,IAA9C,CAAoDmG,CAApD,CAAuD/S,KAAvD,EACAq1C,MAAQ,KAAR,CACA,MAEA,CAED,CAED,CAED,CAED,YAAA,CAEA,CA9P8B;;CAkQ/B/L,SAAU,mBAAW,CAEpB,UAAY,KAAK/B,KAAjB,CACCxa,OAAS,KAAKA,MADf,CAECC,OAAS,KAAK4iB,YAAL,EAFV,CAIC4F,WAAa,CAJd,CAMA,IAAK,MAAQ,CAAR,CAAWl7B,EAAIitB,MAAMjwC,MAAN,CAAe,CAAnC,CAAsCyb,GAAKuH,CAA3C,CAA8C,EAAGvH,CAAjD,CAAqD,CAEpD,SAAW,KAAX,CAEA,SAAWw0B,MAAOx0B,CAAP,CAAX,CACA,aAAew0B,MAAOx0B,EAAI,CAAX,CAAf;CAIA,GAAKyxB,OAASiR,QAAT,GAAuB1iC,IAAM,CAAN,EAAWyxB,OAASA,KAAM,CAAN,CAA3C,CAAL,CAA8D;CAG7D,WAAazxB,EAAIia,MAAjB,CACC0oB,QAAUvxC,OAAS6oB,MADpB,CAEC2oB,QAAUxxC,OAAS6oB,MAFpB,CAIA,IAAM,MAAQ,CAAd,CAAiBtW,IAAMsW,MAAvB,CAA+B,EAAGtW,CAAlC,CAAsC,CAErC,UAAYqW,OAAQ5oB,OAASuS,CAAjB,CAAZ,CAEA,GAAK1W,QAAU+sB,OAAQ2oB,QAAUh/B,CAAlB,CAAV,EACH1W,QAAU+sB,OAAQ4oB,QAAUj/B,CAAlB,CADZ,CACoC,CAEnCk/B,KAAO,IAAP,CACA,MAEA,CAED,CAED;CAID,GAAKA,IAAL,CAAY,CAEX,GAAK7iC,IAAMyiC,UAAX,CAAwB,CAEvBjO,MAAOiO,UAAP,EAAsBjO,MAAOx0B,CAAP,CAAtB,CAEA,eAAiBA,EAAIia,MAArB,CACC6oB,YAAcL,WAAaxoB,MAD5B,CAGA,IAAM,MAAQ,CAAd,CAAiBtW,IAAMsW,MAAvB,CAA+B,EAAGtW,CAAlC,CAAsC,CAErCqW,OAAQ8oB,YAAcn/B,CAAtB,EAA4BqW,OAAQ+oB,WAAap/B,CAArB,CAA5B,CAEA,CAGD,CAED,EAAG8+B,UAAH,CAEA,CAED,CAED,GAAKA,aAAejO,MAAMjwC,MAA1B,CAAmC,CAElC,KAAKiwC,KAAL,CAAarxC,MAAMg0C,cAAN,CAAqBoJ,UAArB,CAAiC/L,KAAjC,CAAwC,CAAxC,CAA2CiO,UAA3C,CAAb,CACA,KAAKzoB,MAAL,CAAc72B,MAAMg0C,cAAN,CAAqBoJ,UAArB,CAAiCvmB,MAAjC,CAAyC,CAAzC,CAA4CyoB,WAAaxoB,MAAzD,CAAd,CAEA,CAED,WAAA,CAEA,CA7U8B,CAAhC;CAmVAn2B,OAAOK,MAAP,CAAehB,MAAM0zC,aAArB,CAAoC;;CAKnChT,MAAO,eAAU4S,IAAV,CAAiB,CAEvB,GAAIA,KAAK3Z,IAAL,GAAcx5B,SAAlB,CAA8B,CAE7B,eAAM,CAAW,qCAAX,CAAN,CAEA,CAED,cAAgBH,MAAM0zC,aAAN,CAAoBmM,6BAApB,CAAmDvM,KAAK3Z,IAAxD,CAAhB,CAEA,GAAK2Z,KAAKjC,KAAL,GAAelxC,SAApB,CAAgC,CAE/B,UAAY,EAAZ,CAAgB02B,OAAS,EAAzB,CAEA72B,MAAMg0C,cAAN,CAAqBwB,WAArB,CAAkClC,KAAKqC,IAAvC,CAA6CtE,KAA7C,CAAoDxa,MAApD,CAA4D,OAA5D,EAEAyc,KAAKjC,KAAL,CAAaA,KAAb,CACAiC,KAAKzc,MAAL,CAAcA,MAAd,CAEA;CAGD,GAAKse,UAAUzU,KAAV,GAAoBvgC,SAAzB,CAAqC,CAEpC,iBAAiBugC,KAAV,CAAiB4S,IAAjB,CAAP,CAEA,CAJD,IAIO;CAGN,oBAAO,CACLA,KAAK5yC,IADA,CACM4yC,KAAKjC,KADX,CACkBiC,KAAKzc,MADvB,CAC+Byc,KAAK4K,aADpC,CAAP,CAGA,CAED,CAvCkC,CAyCnCze,OAAQ,gBAAU4T,KAAV,CAAkB,CAEzB,cAAgBA,MAAMxpC,WAAtB,CAEA,QAAA;CAGA,GAAKsrC,UAAU1V,MAAV,GAAqBt/B,SAA1B,CAAsC,CAErCmzC,KAAO6B,UAAU1V,MAAV,CAAkB4T,KAAlB,CAAP,CAEA,CAJD,IAIO;CAGNC,KAAO,CAEN,OAAQD,MAAM3yC,IAFR,CAGN,QAASV,MAAMg0C,cAAN,CAAqByJ,YAArB,CAAmCpK,MAAMhC,KAAzC,CAAgD9U,KAAhD,CAHH,CAIN,SAAUv8B,MAAMg0C,cAAN,CAAqByJ,YAArB,CAAmCpK,MAAMxc,MAAzC,CAAiD0F,KAAjD,CAJJ,CAAP,CAQA,kBAAoB8W,MAAMyL,gBAAN,EAApB,CAEA,GAAKZ,gBAAkB7K,MAAMiL,oBAA7B,CAAoD,CAEnDhL,KAAK4K,aAAL,CAAqBA,aAArB,CAEA,CAED,CAED5K,KAAK3Z,IAAL,CAAY0Z,MAAMoG,aAAlB;CAEA,WAAA,CAEA,CA7EkC,CA+EnCoG,8BAA+B,uCAAUC,QAAV,CAAqB,CAEnD,OAAQA,SAASC,WAAT,EAAR,EAEC,IAAK,QAAL,CACA,IAAK,QAAL,CACA,IAAK,OAAL,CACA,IAAK,QAAL,CACA,IAAK,SAAL,CAEC,aAAa5L,mBAAb,CAED,IAAK,QAAL,CACA,IAAK,SAAL,CACA,IAAK,SAAL,CACA,IAAK,SAAL,CAEC,aAAa6B,mBAAb,CAED,IAAK,OAAL,CAEC,aAAagK,kBAAb,CAED,IAAK,YAAL,CAEC,aAAa9J,uBAAb,CAED,IAAK,MAAL,CACA,IAAK,SAAL,CAEC,aAAa+J,oBAAb,CAED,IAAK,QAAL,CAEC,aAAaC,mBAAb,CAhCF,CAoCA,eAAM,CAAW,yBAA2BJ,QAAtC,CAAN,CAEA,CAvHkC,CAApC;;;;;;;;;IAuIA9/C,MAAMu5C,eAAN,CAAwB,SAAWsB,QAAX,CAAqBrB,IAArB,CAA2BH,UAA3B,CAAwC,CAE/D,KAAKG,IAAL,CAAYA,IAAZ,CACA,KAAKH,UAAL,CAAkBA,YAChBr5C,MAAMu5C,eAAN,CAAsB4G,cAAtB,CAAsC3G,IAAtC,CADF,CAGA,KAAK96B,IAAL,CAAY1e,MAAMu5C,eAAN,CAAsB6G,QAAtB,CACVvF,QADU,CACA,KAAKxB,UAAL,CAAgBnE,QADhB,GAC8B2F,QAD1C,CAGA,KAAKA,QAAL,CAAgBA,QAAhB,CAEA,CAXD,CAaA76C,MAAMu5C,eAAN,CAAsB94C,SAAtB,CAAkC,CAEjCoJ,YAAa7J,MAAMu5C,eAFc,CAIjC8G,SAAU,yBAAA,CAA2BC,WAA3B,CAAwCryC,MAAxC,CAAiD,CAE1D,KAAKsyC,IAAL,GACA,KAAKF,QAAL,CAAeC,WAAf,CAA4BryC,MAA5B;;;;;CAQA,CAfgC,CAiBjCuyC,SAAU,yBAAA,CAA2BC,WAA3B,CAAwCxyC,MAAxC,CAAiD,CAE1D,KAAKsyC,IAAL,GACA,KAAKC,QAAL,CAAeC,WAAf,CAA4BxyC,MAA5B,EAEA,CAtBgC;CAyBjCsyC,KAAM,eAAW,CAEhB,iBAAmB,KAAK7hC,IAAxB,CACC26B,WAAa,KAAKA,UADnB,CAGCqH,WAAarH,WAAWqH,UAHzB,CAICpL,aAAe+D,WAAW/D,YAJ3B,CAKCqL,cAAgBtH,WAAWsH,aAL5B,CAOA,GAAK,CAAEC,YAAP,CAAsB,CAErBA,aAAe5gD,MAAMu5C,eAAN,CAAsB6G,QAAtB,CACb,KAAKvF,QADQ,CACExB,WAAWnE,QADb,GAC2B,KAAK2F,QAD/C,CAGA,KAAKn8B,IAAL,CAAYkiC,YAAZ,CAEA;CAGD,KAAKP,QAAL,CAAgB,KAAKQ,qBAArB,CACA,KAAKL,QAAL,CAAgB,KAAKM,qBAArB;CAGA,GAAK,CAAEF,YAAP,CAAsB,CAErBz1C,QAAQuL,KAAR,CAAe,sCAAwC,KAAK8iC,IAA7C,CAAoD,uBAAnE,EACA,OAEA,CAED,GAAIkH,UAAJ,CAAiB,CAEhB,gBAAkBrH,WAAW0H,WAA7B;CAGA,OAASL,UAAT,EAEC,IAAK,WAAL,CAEC,GAAI,CAAEE,aAAavgB,QAAnB,CAA8B,CAE7Bl1B,QAAQuL,KAAR,CAAe,6DAAf,CAA8E,IAA9E,EACA,OAEA,CAED,GAAI,CAAEkqC,aAAavgB,QAAb,CAAsBR,SAA5B,CAAwC,CAEvC10B,QAAQuL,KAAR,CAAe,uFAAf,CAAwG,IAAxG,EACA,OAEA,CAEDkqC,aAAeA,aAAavgB,QAAb,CAAsBR,SAArC,CAEA,MAED,IAAK,OAAL,CAEC,GAAI,CAAE+gB,aAAaI,QAAnB,CAA8B,CAE7B71C,QAAQuL,KAAR,CAAe,0DAAf,CAA2E,IAA3E,EACA,OAEA;;CAKDkqC,aAAeA,aAAaI,QAAb,CAAsB/L,KAArC;CAGA,IAAM,MAAQ,CAAd,CAAiBp4B,EAAI+jC,aAAax/C,MAAlC,CAA0Cyb,GAA1C,CAAiD,CAEhD,GAAK+jC,aAAa/jC,CAAb,EAAgBnc,IAAhB,GAAyBqgD,WAA9B,CAA4C,CAE3CA,YAAclkC,CAAd,CACA,MAEA,CAED,CAED,MAED,QAEC,GAAK+jC,aAAcF,UAAd,IAA+BvgD,SAApC,CAAgD,CAE/CgL,QAAQuL,KAAR,CAAe,iDAAf,CAAkE,IAAlE,EACA,OAEA,CAEDkqC,aAAeA,aAAcF,UAAd,CAAf,CA3DF,CAgEA,GAAKK,cAAgB5gD,SAArB,CAAiC,CAEhC,GAAIygD,aAAcG,WAAd,IAAgC5gD,SAApC,CAAgD,CAE/CgL,QAAQuL,KAAR,CAAe,kEAAf,CAAmF,IAAnF,CAAyFkqC,YAAzF,EACA,OAEA,CAEDA,aAAeA,aAAcG,WAAd,CAAf,CAEA,CAED;CAGD,iBAAmBH,aAActL,YAAd,CAAnB,CAEA,GAAK,CAAE2L,YAAP,CAAsB,CAErB,aAAe5H,WAAWnE,QAA1B,CAEA/pC,QAAQuL,KAAR,CAAe,0CAA4Cw+B,QAA5C,CACb,GADa,CACPI,YADO,CACQ,uBADvB,CACgDsL,YADhD,EAEA,OAEA;CAGD,eAAiB,KAAKM,UAAL,CAAgBC,IAAjC,CAEA,GAAKP,aAAa1V,WAAb,GAA6B/qC,SAAlC,CAA8C;CAE7CihD,WAAa,KAAKF,UAAL,CAAgBG,WAA7B,CACA,KAAKT,YAAL,CAAoBA,YAApB,CAEA,CALD,QAKYA,aAAaxjB,sBAAb,GAAwCj9B,SAA7C,CAAyD;CAE/DihD,WAAa,KAAKF,UAAL,CAAgBI,sBAA7B,CACA,KAAKV,YAAL,CAAoBA,YAApB,CAEA;CAGD,gBAAkB,KAAKW,WAAL,CAAiBC,MAAnC,CAEA,GAAKb,gBAAkBxgD,SAAvB,CAAmC;CAGlC,GAAKm1C,eAAiB,uBAAtB,CAAgD;;CAI/C,GAAK,CAAEsL,aAAajiC,QAApB,CAA+B,CAE9BxT,QAAQuL,KAAR,CAAe,gFAAf,CAAiG,IAAjG,EACA,OAEA,CAED,GAAK,CAAEkqC,aAAajiC,QAAb,CAAsB4kB,YAA7B,CAA4C,CAE3Cp4B,QAAQuL,KAAR,CAAe,6FAAf,CAA8G,IAA9G,EACA,OAEA,CAED,IAAM,MAAQ,CAAd,CAAiBmG,EAAI,KAAK6B,IAAL,CAAUC,QAAV,CAAmB4kB,YAAnB,CAAgCniC,MAArD,CAA6Dyb,GAA7D,CAAoE,CAEnE,GAAK+jC,aAAajiC,QAAb,CAAsB4kB,YAAtB,CAAmC1mB,CAAnC,EAAsCnc,IAAtC,GAA+CigD,aAApD,CAAoE,CAEnEA,cAAgB9jC,CAAhB,CACA,MAEA,CAED,CAED,CAED4kC,YAAc,KAAKF,WAAL,CAAiBG,YAA/B,CAEA,KAAKC,gBAAL,CAAwBV,YAAxB,CACA,KAAKN,aAAL,CAAqBA,aAArB,CAEA,CAvCD,QAuCYM,aAAalzC,SAAb,GAA2B5N,SAA3B,EAAwC8gD,aAAa/yC,OAAb,GAAyB/N,SAAtE,CAAkF;CAGxFshD,YAAc,KAAKF,WAAL,CAAiBK,cAA/B,CAEA,KAAKD,gBAAL,CAAwBV,YAAxB,CAEA,CAPM,QAOKA,aAAa7/C,MAAb,GAAwBjB,SAA7B,CAAyC,CAE/CshD,YAAc,KAAKF,WAAL,CAAiBM,WAA/B,CAEA,KAAKF,gBAAL,CAAwBV,YAAxB,CAEA,CANM,IAMA,CAEN,KAAK3L,YAAL,CAAoBA,YAApB,CAEA;CAGD,KAAK+K,QAAL,CAAgB,KAAKyB,mBAAL,CAA0BL,WAA1B,CAAhB,CACA,KAAKjB,QAAL,CAAgB,KAAKuB,gCAAL,CAAuCN,WAAvC,EAAsDL,UAAtD,CAAhB,CAEA,CAxOgC,CA0OjCY,OAAQ,iBAAW,CAElB,KAAKtjC,IAAL,CAAY,IAAZ;;CAIA,KAAK2hC,QAAL,CAAgB,KAAK4B,iBAArB,CACA,KAAKzB,QAAL,CAAgB,KAAK0B,iBAArB,CAEA,CAnPgC,CAAlC,CAuPAvhD,OAAOK,MAAP,CAAehB,MAAMu5C,eAAN,CAAsB94C,SAArC,CAAgD;;CAG/CogD,sBAAuB,gCAAW,EAHa,CAI/CC,sBAAuB,gCAAW,EAJa;CAO/CmB,kBAAmBjiD,MAAMu5C,eAAN,CAAsB94C,SAAtB,CAAgC4/C,QAPJ,CAQ/C6B,kBAAmBliD,MAAMu5C,eAAN,CAAsB94C,SAAtB,CAAgC+/C,QARJ,CAU/Ce,YAAa,CACZC,OAAQ,CADI,CAEZK,YAAa,CAFD,CAGZH,aAAc,CAHF,CAIZE,eAAgB,CAJJ,CAVkC,CAiB/CV,WAAY,CACXC,KAAM,CADK,CAEXE,YAAa,CAFF,CAGXC,uBAAwB,CAHb,CAjBmC,CAuB/CQ,oBAAqB,CAEpB,wBAAA,CAA0BphC,MAA1B,CAAkCzS,MAAlC,CAA2C,CAE1CyS,OAAQzS,MAAR,EAAmB,KAAKyQ,IAAL,CAAW,KAAK42B,YAAhB,CAAnB,CAEA,CANmB,CAQpB,uBAAA,CAAyB50B,MAAzB,CAAiCzS,MAAjC,CAA0C,CAEzC,WAAa,KAAK0zC,gBAAlB,CAEA,IAAM,MAAQ,CAAR,CAAWv9B,EAAI/iB,OAAOD,MAA5B,CAAoCyb,IAAMuH,CAA1C,CAA6C,EAAGvH,CAAhD,CAAoD,CAEnD6D,OAAQzS,QAAR,EAAsB5M,OAAQwb,CAAR,CAAtB,CAEA,CAED,CAlBmB,CAoBpB,8BAAA,CAAgC6D,MAAhC,CAAwCzS,MAAxC,CAAiD,CAEhDyS,OAAQzS,MAAR,EAAmB,KAAK0zC,gBAAL,CAAuB,KAAKhB,aAA5B,CAAnB,CAEA,CAxBmB,CA0BpB,yBAAA,CAA2BjgC,MAA3B,CAAmCzS,MAAnC,CAA4C,CAE3C,KAAK0zC,gBAAL,CAAsBzzC,OAAtB,CAA+BwS,MAA/B,CAAuCzS,MAAvC,EAEA,CA9BmB,CAvB0B,CAyD/C8zC,iCAAkC,CAEjC;CAGC,wBAAA,CAA0BrhC,MAA1B,CAAkCzS,MAAlC,CAA2C,CAE1C,KAAKyQ,IAAL,CAAW,KAAK42B,YAAhB,EAAiC50B,OAAQzS,MAAR,CAAjC,CAEA,CAPF,CASC,uCAAA,CAAyCyS,MAAzC,CAAiDzS,MAAjD,CAA0D,CAEzD,KAAKyQ,IAAL,CAAW,KAAK42B,YAAhB,EAAiC50B,OAAQzS,MAAR,CAAjC,CACA,KAAK2yC,YAAL,CAAkB1V,WAAlB,CAAgC,IAAhC,CAEA,CAdF,CAgBC,kDAAA,CAAoDxqB,MAApD,CAA4DzS,MAA5D,CAAqE,CAEpE,KAAKyQ,IAAL,CAAW,KAAK42B,YAAhB,EAAiC50B,OAAQzS,MAAR,CAAjC,CACA,KAAK2yC,YAAL,CAAkBxjB,sBAAlB,CAA2C,IAA3C,CAEA,CArBF,CAFiC,CAyB9B;CAIF,uBAAA,CAAyB1c,MAAzB,CAAiCzS,MAAjC,CAA0C,CAEzC,SAAW,KAAK0zC,gBAAhB,CAEA,IAAM,MAAQ,CAAR,CAAWv9B,EAAI+9B,KAAK/gD,MAA1B,CAAkCyb,IAAMuH,CAAxC,CAA2C,EAAGvH,CAA9C,CAAkD,CAEjDslC,KAAMtlC,CAAN,EAAY6D,OAAQzS,QAAR,CAAZ,CAEA,CAED,CAdC,CAgBF,sCAAA,CAAwCyS,MAAxC,CAAgDzS,MAAhD,CAAyD,CAExD,SAAW,KAAK0zC,gBAAhB,CAEA,IAAM,MAAQ,CAAR,CAAWv9B,EAAI+9B,KAAK/gD,MAA1B,CAAkCyb,IAAMuH,CAAxC,CAA2C,EAAGvH,CAA9C,CAAkD,CAEjDslC,KAAMtlC,CAAN,EAAY6D,OAAQzS,QAAR,CAAZ,CAEA,CAED,KAAK2yC,YAAL,CAAkB1V,WAAlB,CAAgC,IAAhC,CAEA,CA5BC,CA8BF,iDAAA,CAAmDxqB,MAAnD,CAA2DzS,MAA3D,CAAoE,CAEnE,SAAW,KAAK0zC,gBAAhB,CAEA,IAAM,MAAQ,CAAR,CAAWv9B,EAAI+9B,KAAK/gD,MAA1B,CAAkCyb,IAAMuH,CAAxC,CAA2C,EAAGvH,CAA9C,CAAkD,CAEjDslC,KAAMtlC,CAAN,EAAY6D,OAAQzS,QAAR,CAAZ,CAEA,CAED,KAAK2yC,YAAL,CAAkBxjB,sBAAlB,CAA2C,IAA3C,CAEA,CA1CC,CAzB8B,CAqE9B;CAIF,8BAAA,CAAgC1c,MAAhC,CAAwCzS,MAAxC,CAAiD,CAEhD,KAAK0zC,gBAAL,CAAuB,KAAKhB,aAA5B,EAA8CjgC,OAAQzS,MAAR,CAA9C,CAEA,CARC,CAUF,6CAAA,CAA+CyS,MAA/C,CAAuDzS,MAAvD,CAAgE,CAE/D,KAAK0zC,gBAAL,CAAuB,KAAKhB,aAA5B,EAA8CjgC,OAAQzS,MAAR,CAA9C,CACA,KAAK2yC,YAAL,CAAkB1V,WAAlB,CAAgC,IAAhC,CAEA,CAfC,CAiBF,wDAAA,CAA0DxqB,MAA1D,CAAkEzS,MAAlE,CAA2E,CAE1E,KAAK0zC,gBAAL,CAAuB,KAAKhB,aAA5B,EAA8CjgC,OAAQzS,MAAR,CAA9C,CACA,KAAK2yC,YAAL,CAAkBxjB,sBAAlB,CAA2C,IAA3C,CAEA,CAtBC,CArE8B,CA6F9B;CAIF,2BAAA,CAA6B1c,MAA7B,CAAqCzS,MAArC,CAA8C,CAE7C,KAAK0zC,gBAAL,CAAsB5zC,SAAtB,CAAiC2S,MAAjC,CAAyCzS,MAAzC,EAEA,CARC,CAUF,0CAAA,CAA4CyS,MAA5C,CAAoDzS,MAApD,CAA6D,CAE5D,KAAK0zC,gBAAL,CAAsB5zC,SAAtB,CAAiC2S,MAAjC,CAAyCzS,MAAzC,EACA,KAAK2yC,YAAL,CAAkB1V,WAAlB,CAAgC,IAAhC,CAEA,CAfC,CAiBF,qDAAA,CAAuDxqB,MAAvD,CAA+DzS,MAA/D,CAAwE,CAEvE,KAAK0zC,gBAAL,CAAsB5zC,SAAtB,CAAiC2S,MAAjC,CAAyCzS,MAAzC,EACA,KAAK2yC,YAAL,CAAkBxjB,sBAAlB,CAA2C,IAA3C,CAEA,CAtBC,CA7F8B,CAzDa,CAAhD,EAoLAp9B,MAAMu5C,eAAN,CAAsB6I,SAAtB,CACE,SAAUC,WAAV,CAAuB7I,IAAvB,CAA6B8I,kBAA7B,CAAkD,CAEnD,eAAiBA,oBACftiD,MAAMu5C,eAAN,CAAsB4G,cAAtB,CAAsC3G,IAAtC,CADF,CAGA,KAAK+I,YAAL,CAAoBF,WAApB,CACA,KAAKzK,SAAL,CAAiByK,YAAYvF,UAAZ,CAAwBtD,IAAxB,CAA8BH,UAA9B,CAAjB,CAEA,CATD,CAWAr5C,MAAMu5C,eAAN,CAAsB6I,SAAtB,CAAgC3hD,SAAhC,CAA4C,CAE3CoJ,YAAa7J,MAAMu5C,eAAN,CAAsB6I,SAFQ,CAI3C/B,SAAU,kBAAUryC,KAAV,CAAiBC,MAAjB,CAA0B,CAEnC,KAAKsyC,IAAL;CAEA,oBAAsB,KAAKgC,YAAL,CAAkB/G,eAAxC,CACC1C,QAAU,KAAKlB,SAAL,CAAgB4K,eAAhB,CADX;CAIA,GAAK1J,UAAY34C,SAAjB,CAA6B24C,QAAQuH,QAAR,CAAkBryC,KAAlB,CAAyBC,MAAzB,EAE7B,CAd0C,CAgB3CuyC,SAAU,kBAAUxyC,KAAV,CAAiBC,MAAjB,CAA0B,CAEnC,aAAe,KAAK2pC,SAApB,CAEA,IAAM,MAAQ,KAAK2K,YAAL,CAAkB/G,eAA1B,CACJp3B,EAAIuzB,SAASv2C,MADf,CACuByb,IAAMuH,CAD7B,CACgC,EAAGvH,CADnC,CACuC,CAEtC86B,SAAU96B,CAAV,EAAc2jC,QAAd,CAAwBxyC,KAAxB,CAA+BC,MAA/B,EAEA,CAED,CA3B0C,CA6B3CsyC,KAAM,eAAW,CAEhB,aAAe,KAAK3I,SAApB,CAEA,IAAM,MAAQ,KAAK2K,YAAL,CAAkB/G,eAA1B,CACJp3B,EAAIuzB,SAASv2C,MADf,CACuByb,IAAMuH,CAD7B,CACgC,EAAGvH,CADnC,CACuC,CAEtC86B,SAAU96B,CAAV,EAAc0jC,IAAd,GAEA,CAED,CAxC0C,CA0C3CyB,OAAQ,iBAAW,CAElB,aAAe,KAAKpK,SAApB,CAEA,IAAM,MAAQ,KAAK2K,YAAL,CAAkB/G,eAA1B,CACJp3B,EAAIuzB,SAASv2C,MADf,CACuByb,IAAMuH,CAD7B,CACgC,EAAGvH,CADnC,CACuC,CAEtC86B,SAAU96B,CAAV,EAAcmlC,MAAd,GAEA,CAED,CArD0C,CAA5C,CAyDAhiD,MAAMu5C,eAAN,CAAsBniB,MAAtB,CAA+B,SAAUif,IAAV,CAAgBmD,IAAhB,CAAsBH,UAAtB,CAAmC,CAEjE,GAAK,EAAIhD,sBAAsBgF,oBAA1B,CAAL,CAAwD,CAEvD,iBAAiB9B,eAAV,CAA2BlD,IAA3B,CAAiCmD,IAAjC,CAAuCH,UAAvC,CAAP,CAEA,CAJD,IAIO,CAEN,iBAAiBE,eAAN,CAAsB6I,SAA1B,CAAqC/L,IAArC,CAA2CmD,IAA3C,CAAiDH,UAAjD,CAAP,CAEA,CAED,CAZD,CAcAr5C,MAAMu5C,eAAN,CAAsB4G,cAAtB,CAAuC,SAAU/K,SAAV,CAAsB;;;;;;;;;;CAa5D,OAAS,sGAAT,CACA,YAAcqN,GAAGn3C,IAAH,CAAQ8pC,SAAR,CAAd,CAEA,GAAI,CAAEsN,OAAN,CAAgB,CACf,eAAM,CAAW,kCAAoCtN,SAA/C,CAAN,CACA,CAEE,GAAIsN,QAAQxhD,KAAR,GAAkBuhD,GAAG9F,SAAzB,CAAoC,CAChC8F,GAAG9F,SAAH,GACH,CAEJ,YAAc;CAEbzH,SAAUwN,QAAQ,CAAR,CAFG;CAGbhC,WAAYgC,QAAQ,CAAR,CAHC,CAIb3B,YAAa2B,QAAQ,CAAR,CAJA,CAKbpN,aAAcoN,QAAQ,CAAR,CALD,CAMb/B,cAAe+B,QAAQ,EAAR;CANF,CAAd,CASA,GAAIC,QAAQrN,YAAR,GAAyB,IAAzB,EAAiCqN,QAAQrN,YAAR,CAAqBl0C,MAArB,GAAgC,CAArE,CAAyE,CACxE,eAAM,CAAW,8CAAgDg0C,SAA3D,CAAN,CACA,CAED,cAAA,CAEA,CAvCD,CAyCAp1C,MAAMu5C,eAAN,CAAsB6G,QAAtB,CAAiC,SAAU/J,IAAV,CAAgBnB,QAAhB,CAA2B,CAE3D,GAAI,CAAEA,QAAF,EAAcA,WAAa,EAA3B,EAAiCA,WAAa,MAA9C,EAAwDA,WAAa,GAArE,EAA4EA,WAAa,CAAC,CAA1F,EAA+FA,WAAamB,KAAK31C,IAAjH,EAAyHw0C,WAAamB,KAAKrmB,IAA/I,CAAsJ,CAErJ,WAAA,CAEA;CAGD,GAAIqmB,KAAK2K,QAAT,CAAoB,CAEnB,mBAAqB,uBAAA,CAAUA,QAAV,CAAqB,CAEzC,IAAK,MAAQ,CAAb,CAAgBnkC,EAAImkC,SAAS/L,KAAT,CAAe7zC,MAAnC,CAA2Cyb,GAA3C,CAAkD,CAEjD,SAAWmkC,SAAS/L,KAAT,CAAep4B,CAAf,CAAX,CAEA,GAAI+lC,KAAKliD,IAAL,GAAcw0C,QAAlB,CAA6B,CAE5B,WAAA,CAEA,CACD,CAED,WAAA,CAEA,CAfD,CAiBA,SAAW2N,eAAgBxM,KAAK2K,QAArB,CAAX,CAEA,GAAI4B,IAAJ,CAAW,CAEV,WAAA,CAEA,CACD;CAGD,GAAIvM,KAAKxa,QAAT,CAAoB,CAEnB,sBAAwB,0BAAA,CAAUA,QAAV,CAAqB,CAE5C,IAAK,MAAQ,CAAb,CAAgBhf,EAAIgf,SAASz6B,MAA7B,CAAqCyb,GAArC,CAA4C,CAE3C,cAAgBgf,SAAShf,CAAT,CAAhB,CAEA,GAAIimC,UAAUpiD,IAAV,GAAmBw0C,QAAnB,EAA+B4N,UAAU9yB,IAAV,GAAmBklB,QAAtD,CAAiE,CAEhE,gBAAA,CAEA,CAED,WAAa6N,kBAAmBD,UAAUjnB,QAA7B,CAAb,CAEA,GAAI/f,MAAJ,CAAa,aAAA,CAEb,CAED,WAAA,CAEA,CApBD,CAsBA,gBAAkBinC,kBAAmB1M,KAAKxa,QAAxB,CAAlB,CAEA,GAAImnB,WAAJ,CAAkB,CAEjB,kBAAA,CAEA,CAED,CAED,WAAA,CAEA,CA1ED;;;;;;;;;IAwFAhjD,MAAMs5C,aAAN,CAAsB,SAAWR,OAAX,CAAoBgH,QAApB,CAA8BnqB,SAA9B,CAA0C,CAE/D,KAAKmjB,OAAL,CAAeA,OAAf,CACA,KAAKnjB,SAAL,CAAiBA,SAAjB,CAEA,eAAiBstB,YAAjB,CACCC,WADD,CAGA,OAASpD,QAAT,EAEC,IAAK,YAAL,CAAqBoD,YAAc,KAAKC,MAAnB,CAA4B,MAEjD,IAAK,QAAL,CACA,IAAK,MAAL,CAECC,WAAa7mB,KAAb,CAAqB2mB,YAAc,KAAKG,OAAxC,CAAkD,MAEnD,QAAaH,YAAc,KAAKI,KAAnB,CATd,CAaA,KAAK5iC,MAAL,CAAc,cAAA,CAAgBiV,UAAY,CAA5B,CAAd;;;;;;;;;;CAYA,KAAK4tB,gBAAL,CAAwBL,WAAxB,CAEA,KAAKM,gBAAL,CAAwB,CAAxB,CAEA,KAAKxL,QAAL,CAAgB,CAAhB,CACA,KAAKmB,cAAL,CAAsB,CAAtB,CAEA,CAxCD,CA0CAn5C,MAAMs5C,aAAN,CAAoB74C,SAApB,CAAgC,CAE/BoJ,YAAa7J,MAAMs5C,aAFY;CAK/BjH,WAAY,oBAAUP,SAAV,CAAqBhgB,MAArB,CAA8B;;CAKzC,WAAa,KAAKpR,MAAlB,CACCoW,OAAS,KAAKnB,SADf,CAEC1nB,OAAS6jC,UAAYhb,MAAZ,CAAqBA,MAF/B,CAIC2sB,cAAgB,KAAKD,gBAJtB,CAMA,GAAKC,gBAAkB,CAAvB,CAA2B;CAI1B,IAAM,MAAQ,CAAd,CAAiB5mC,IAAMia,MAAvB,CAA+B,EAAGja,CAAlC,CAAsC,CAErC6D,OAAQzS,OAAS4O,CAAjB,EAAuB6D,OAAQ7D,CAAR,CAAvB,CAEA,CAED4mC,cAAgB3xB,MAAhB,CAEA,CAZD,IAYO;CAIN2xB,eAAiB3xB,MAAjB,CACA,QAAUA,OAAS2xB,aAAnB,CACA,KAAKF,gBAAL,CAAuB7iC,MAAvB,CAA+BzS,MAA/B,CAAuC,CAAvC,CAA0Cy1C,GAA1C,CAA+C5sB,MAA/C,EAEA,CAED,KAAK0sB,gBAAL,CAAwBC,aAAxB,CAEA,CAxC8B;CA2C/BxL,MAAO,eAAUnG,SAAV,CAAsB,CAE5B,WAAa,KAAKnc,SAAlB,CACCjV,OAAS,KAAKA,MADf,CAECzS,OAAS6jC,UAAYhb,MAAZ,CAAqBA,MAF/B,CAIChF,OAAS,KAAK0xB,gBAJf,CAMC1K,QAAU,KAAKA,OANhB,CAQA,KAAK0K,gBAAL,CAAwB,CAAxB,CAEA,GAAK1xB,OAAS,CAAd,CAAkB;CAIjB,wBAA0BgF,OAAS,CAAnC,CAEA,KAAKysB,gBAAL,CACE7iC,MADF,CACUzS,MADV,CACkB01C,mBADlB,CACuC,EAAI7xB,MAD3C,CACmDgF,MADnD,EAGA,CAED,IAAM,MAAQA,MAAR,CAAgBhgB,EAAIggB,OAASA,MAAnC,CAA2Cja,IAAM/F,CAAjD,CAAoD,EAAG+F,CAAvD,CAA2D,CAE1D,GAAK6D,OAAQ7D,CAAR,IAAgB6D,OAAQ7D,EAAIia,MAAZ,CAArB,CAA4C;CAI3CgiB,QAAQ0H,QAAR,CAAkB9/B,MAAlB,CAA0BzS,MAA1B,EACA,MAEA,CAED,CAED,CA/E8B;CAkF/B2rC,kBAAmB,4BAAW,CAE7B,YAAc,KAAKd,OAAnB,CAEA,WAAa,KAAKp4B,MAAlB,CACCoW,OAAS,KAAKnB,SADf,CAGCguB,oBAAsB7sB,OAAS,CAHhC,CAKAgiB,QAAQuH,QAAR,CAAkB3/B,MAAlB,CAA0BijC,mBAA1B;CAGA,IAAM,MAAQ7sB,MAAR,CAAgBhgB,EAAI6sC,mBAA1B,CAA+C9mC,IAAM/F,CAArD,CAAwD,EAAG+F,CAA3D,CAA+D,CAE9D6D,OAAQ7D,CAAR,EAAc6D,OAAQijC,oBAAwB9mC,EAAIia,MAApC,CAAd,CAEA,CAED,KAAK0sB,gBAAL,CAAwB,CAAxB,CAEA,CAtG8B;CAyG/BzK,qBAAsB,+BAAW,CAEhC,wBAA0B,KAAKpjB,SAAL,CAAiB,CAA3C,CACA,KAAKmjB,OAAL,CAAa0H,QAAb,CAAuB,KAAK9/B,MAA5B,CAAoCijC,mBAApC,EAEA,CA9G8B;CAmH/BN,QAAS,iBAAU3iC,MAAV,CAAkBxN,SAAlB,CAA6B6qC,SAA7B,CAAwCtzC,CAAxC,CAA2CqsB,MAA3C,CAAoD,CAE5D,GAAKrsB,GAAK,GAAV,CAAgB,CAEf,IAAM,MAAQ,CAAd,CAAiBoS,IAAMia,MAAvB,CAA+B,EAAGja,CAAlC,CAAsC,CAErC6D,OAAQxN,UAAY2J,CAApB,EAA0B6D,OAAQq9B,UAAYlhC,CAApB,CAA1B,CAEA,CAED,CAED,CA/H8B,CAiI/BsmC,OAAQ,gBAAUziC,MAAV,CAAkBxN,SAAlB,CAA6B6qC,SAA7B,CAAwCtzC,CAAxC,CAA2CqsB,MAA3C,CAAoD,CAE3D92B,MAAMmO,UAAN,CAAiB6E,SAAjB,CAA4B0N,MAA5B,CAAoCxN,SAApC,CACEwN,MADF,CACUxN,SADV,CACqBwN,MADrB,CAC6Bq9B,SAD7B,CACwCtzC,CADxC,EAGA,CAtI8B,CAwI/B64C,MAAO,eAAU5iC,MAAV,CAAkBxN,SAAlB,CAA6B6qC,SAA7B,CAAwCtzC,CAAxC,CAA2CqsB,MAA3C,CAAoD,CAE1D,MAAQ,EAAIrsB,CAAZ,CAEA,IAAM,MAAQ,CAAd,CAAiBoS,IAAMia,MAAvB,CAA+B,EAAGja,CAAlC,CAAsC,CAErC,MAAQ3J,UAAY2J,CAApB,CAEA6D,OAAQF,CAAR,EAAcE,OAAQF,CAAR,EAAc7V,CAAd,CAAkB+V,OAAQq9B,UAAYlhC,CAApB,EAA0BpS,CAA1D,CAEA,CAED,CApJ8B,CAAhC;;;;;;;;;IAoKAzK,MAAMigD,oBAAN,CAA6B,SAAWv/C,IAAX,CAAiB2wC,KAAjB,CAAwBxa,MAAxB,CAAiC,CAE7D72B,MAAM0zC,aAAN,CAAoBnyC,IAApB,CAA0B,IAA1B,CAAgCb,IAAhC,CAAsC2wC,KAAtC,CAA6Cxa,MAA7C,EAEA,CAJD,CAMA72B,MAAMigD,oBAAN,CAA2Bx/C,SAA3B,CACEE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAM0zC,aAAN,CAAoBjzC,SAAnC,CAAf,CAA+D,CAEhEoJ,YAAa7J,MAAMigD,oBAF6C,CAIhExG,cAAe,MAJiD,CAKhE2E,gBAAiB7hB,KAL+C,CAOhE+hB,qBAAsBt+C,MAAMoI,mBAPoC,CAShEs2C,+BAAgCv+C,SATgC,CAUhEw+C,+BAAgCx+C;;;CAVgC,CAA/D,CADF;;;;;;;;;IA+BAH,MAAMggD,kBAAN,CAA2B,SAAWt/C,IAAX,CAAiB2wC,KAAjB,CAAwBxa,MAAxB,CAAgCqnB,aAAhC,CAAgD,CAE1El+C,MAAM0zC,aAAN,CAAoBnyC,IAApB,CAA0B,IAA1B,CAAgCb,IAAhC,CAAsC2wC,KAAtC,CAA6Cxa,MAA7C,CAAqDqnB,aAArD,EAEA,CAJD,CAMAl+C,MAAMggD,kBAAN,CAAyBv/C,SAAzB,CACEE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAM0zC,aAAN,CAAoBjzC,SAAnC,CAAf,CAA+D,CAEhEoJ,YAAa7J,MAAMggD,kBAF6C,CAIhEvG,cAAe;;;;CAJiD,CAA/D,CADF;;;;;;;;IA4BAz5C,MAAMm0C,mBAAN,CAA4B,SAAWzzC,IAAX,CAAiB2wC,KAAjB,CAAwBxa,MAAxB,CAAgCqnB,aAAhC,CAAgD,CAE3El+C,MAAM0zC,aAAN,CAAoBnyC,IAApB,CAA0B,IAA1B,CAAgCb,IAAhC,CAAsC2wC,KAAtC,CAA6Cxa,MAA7C,CAAqDqnB,aAArD,EAEA,CAJD,CAMAl+C,MAAMm0C,mBAAN,CAA0B1zC,SAA1B,CACEE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAM0zC,aAAN,CAAoBjzC,SAAnC,CAAf,CAA+D,CAEhEoJ,YAAa7J,MAAMm0C,mBAF6C,CAIhEsF,cAAe;;CAJiD,CAA/D,CADF;;;;;;;;IAwBAz5C,MAAMk2C,uBAAN,CAAgC,SAAWx1C,IAAX,CAAiB2wC,KAAjB,CAAwBxa,MAAxB,CAAgCqnB,aAAhC,CAAgD,CAE/El+C,MAAM0zC,aAAN,CAAoBnyC,IAApB,CAA0B,IAA1B,CAAgCb,IAAhC,CAAsC2wC,KAAtC,CAA6Cxa,MAA7C,CAAqDqnB,aAArD,EAEA,CAJD,CAMAl+C,MAAMk2C,uBAAN,CAA8Bz1C,SAA9B,CACEE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAM0zC,aAAN,CAAoBjzC,SAAnC,CAAf,CAA+D,CAEhEoJ,YAAa7J,MAAMk2C,uBAF6C,CAIhEuD,cAAe,YAJiD;CAQhE6E,qBAAsBt+C,MAAMqI,iBARoC,CAUhEq2C,+BAAgC,wCAAU5iC,MAAV,CAAmB,CAElD,iBAAiB6c,2BAAV,CACL,KAAK0Y,KADA,CACO,KAAKxa,MADZ,CACoB,KAAK6iB,YAAL,EADpB,CACyC59B,MADzC,CAAP,CAGA,CAf+D,CAiBhE6iC,+BAAgCx+C;CAjBgC,CAA/D,CADF;;;;;;;;;IAkCAH,MAAMkgD,mBAAN,CAA4B,SAAWx/C,IAAX,CAAiB2wC,KAAjB,CAAwBxa,MAAxB,CAAgCqnB,aAAhC,CAAgD,CAE3El+C,MAAM0zC,aAAN,CAAoBnyC,IAApB,CAA0B,IAA1B,CAAgCb,IAAhC,CAAsC2wC,KAAtC,CAA6Cxa,MAA7C,CAAqDqnB,aAArD,EAEA,CAJD,CAMAl+C,MAAMkgD,mBAAN,CAA0Bz/C,SAA1B,CACEE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAM0zC,aAAN,CAAoBjzC,SAAnC,CAAf,CAA+D,CAEhEoJ,YAAa7J,MAAMkgD,mBAF6C,CAIhEzG,cAAe,QAJiD,CAKhE2E,gBAAiB7hB,KAL+C,CAOhE+hB,qBAAsBt+C,MAAMoI,mBAPoC,CAShEs2C,+BAAgCv+C,SATgC,CAWhEw+C,+BAAgCx+C,SAXgC,CAA/D,CADF;;;;;;;;;IA4BAH,MAAMg2C,mBAAN,CAA4B,SAAWt1C,IAAX,CAAiB2wC,KAAjB,CAAwBxa,MAAxB,CAAgCqnB,aAAhC,CAAgD,CAE3El+C,MAAM0zC,aAAN,CAAoBnyC,IAApB,CAA0B,IAA1B,CAAgCb,IAAhC,CAAsC2wC,KAAtC,CAA6Cxa,MAA7C,CAAqDqnB,aAArD,EAEA,CAJD,CAMAl+C,MAAMg2C,mBAAN,CAA0Bv1C,SAA1B,CACEE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAM0zC,aAAN,CAAoBjzC,SAAnC,CAAf,CAA+D,CAEhEoJ,YAAa7J,MAAMg2C,mBAF6C,CAIhEyD,cAAe;;CAJiD,CAA/D,CADF;;;;IAoBAz5C,MAAM4jD,KAAN,CAAc,SAAWhqB,QAAX,CAAsB,CAEnC55B,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,OAAZ,CAEA,KAAKkqB,OAAL,CAAejqB,SAASiqB,OAAxB,CACA,KAAKxiD,MAAL,CAAc,KAAKwiD,OAAL,CAAaC,kBAAb,EAAd,CACA,KAAKziD,MAAL,CAAY0iD,OAAZ,CAAsB,KAAKC,OAAL,CAAazD,IAAb,CAAmB,IAAnB,CAAtB,CAEA,KAAK0D,IAAL,CAAY,KAAKJ,OAAL,CAAaK,UAAb,EAAZ,CACA,KAAKD,IAAL,CAAUE,OAAV,CAAmBvqB,SAASwqB,QAAT,EAAnB,EAEA,KAAKC,QAAL,CAAgB,KAAhB,CAEA,KAAKvrB,SAAL,CAAiB,CAAjB,CACA,KAAKwrB,YAAL,CAAoB,CAApB,CACA,KAAKC,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,IAA1B,CACA,KAAKC,UAAL,CAAkB,OAAlB,CAEA,KAAKC,OAAL,CAAe,EAAf,CAEA,CAvBD,CAyBA1kD,MAAM4jD,KAAN,CAAYnjD,SAAZ,CAAwBE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAf,CAA0D,CAEjFoJ,YAAa7J,MAAM4jD,KAF8D,CAIjFe,UAAW,oBAAY,CAEtB,YAAYV,IAAZ,CAEA,CARgF,CAUjFW,cAAe,uBAAWC,SAAX,CAAuB,CAErC,KAAKL,kBAAL,CAA0B,KAA1B,CACA,KAAKC,UAAL,CAAkB,WAAlB,CACA,KAAKpjD,MAAL,CAAcwjD,SAAd,CACA,KAAKV,OAAL,GAEA,WAAA,CAEA,CAnBgF,CAqBjFW,UAAW,mBAAWC,WAAX,CAAyB,CAEnC,KAAK1jD,MAAL,CAAYqf,MAAZ,CAAqBqkC,WAArB,CACA,KAAKN,UAAL,CAAkB,QAAlB,CAEA,GAAK,KAAKJ,QAAV,CAAqB,KAAKtV,IAAL,GAErB,WAAA,CAEA,CA9BgF,CAgCjFA,KAAM,eAAY,CAEjB,GAAK,KAAKwV,SAAL,GAAmB,IAAxB,CAA+B,CAE9Bp5C,QAAQC,IAAR,CAAc,wCAAd,EACA,OAEA,CAED,GAAK,KAAKo5C,kBAAL,GAA4B,KAAjC,CAAyC,CAExCr5C,QAAQC,IAAR,CAAc,kDAAd,EACA,OAEA,CAED,WAAa,KAAKy4C,OAAL,CAAaC,kBAAb,EAAb,CAEAziD,OAAOqf,MAAP,CAAgB,KAAKrf,MAAL,CAAYqf,MAA5B,CACArf,OAAO8sC,IAAP,CAAc,KAAK9sC,MAAL,CAAY8sC,IAA1B,CACA9sC,OAAO0iD,OAAP,CAAiB,KAAK1iD,MAAL,CAAY0iD,OAA7B,CACA1iD,OAAOma,KAAP,CAAc,CAAd,CAAiB,KAAKsd,SAAtB,EACAz3B,OAAOijD,YAAP,CAAoBx6C,KAApB,CAA4B,KAAKw6C,YAAjC,CAEA,KAAKC,SAAL,CAAiB,IAAjB,CAEA,KAAKljD,MAAL,CAAcA,MAAd,CAEA,YAAY8iD,OAAL,EAAP,CAEA,CA9DgF,CAgEjFa,MAAO,gBAAY,CAElB,GAAK,KAAKR,kBAAL,GAA4B,KAAjC,CAAyC,CAExCr5C,QAAQC,IAAR,CAAc,kDAAd,EACA,OAEA,CAED,KAAK/J,MAAL,CAAYg4B,IAAZ,GACA,KAAKP,SAAL,CAAiB,KAAK+qB,OAAL,CAAaoB,WAA9B,CAEA,WAAA,CAEA,CA9EgF,CAgFjF5rB,KAAM,eAAY,CAEjB,GAAK,KAAKmrB,kBAAL,GAA4B,KAAjC,CAAyC,CAExCr5C,QAAQC,IAAR,CAAc,kDAAd,EACA,OAEA,CAED,KAAK/J,MAAL,CAAYg4B,IAAZ,GACA,KAAKP,SAAL,CAAiB,CAAjB,CAEA,WAAA,CAEA,CA9FgF,CAgGjFqrB,QAAS,kBAAY,CAEpB,GAAK,KAAKO,OAAL,CAAatjD,MAAb,CAAsB,CAA3B,CAA+B,CAE9B,KAAKC,MAAL,CAAY8iD,OAAZ,CAAqB,KAAKO,OAAL,CAAc,CAAd,CAArB,EAEA,IAAM,MAAQ,CAAR,CAAW95C,EAAI,KAAK85C,OAAL,CAAatjD,MAAlC,CAA0Cyb,EAAIjS,CAA9C,CAAiDiS,GAAjD,CAAwD,CAEvD,KAAK6nC,OAAL,CAAc7nC,EAAI,CAAlB,EAAsBsnC,OAAtB,CAA+B,KAAKO,OAAL,CAAc7nC,CAAd,CAA/B,EAEA,CAED,KAAK6nC,OAAL,CAAc,KAAKA,OAAL,CAAatjD,MAAb,CAAsB,CAApC,EAAwC+iD,OAAxC,CAAiD,KAAKQ,SAAL,EAAjD,EAEA,CAZD,IAYO,CAEN,KAAKtjD,MAAL,CAAY8iD,OAAZ,CAAqB,KAAKQ,SAAL,EAArB,EAEA,CAED,WAAA,CAEA,CAtHgF,CAwHjFO,WAAY,qBAAY,CAEvB,GAAK,KAAKR,OAAL,CAAatjD,MAAb,CAAsB,CAA3B,CAA+B,CAE9B,KAAKC,MAAL,CAAY6jD,UAAZ,CAAwB,KAAKR,OAAL,CAAc,CAAd,CAAxB,EAEA,IAAM,MAAQ,CAAR,CAAW95C,EAAI,KAAK85C,OAAL,CAAatjD,MAAlC,CAA0Cyb,EAAIjS,CAA9C,CAAiDiS,GAAjD,CAAwD,CAEvD,KAAK6nC,OAAL,CAAc7nC,EAAI,CAAlB,EAAsBqoC,UAAtB,CAAkC,KAAKR,OAAL,CAAc7nC,CAAd,CAAlC,EAEA,CAED,KAAK6nC,OAAL,CAAc,KAAKA,OAAL,CAAatjD,MAAb,CAAsB,CAApC,EAAwC8jD,UAAxC,CAAoD,KAAKP,SAAL,EAApD,EAEA,CAZD,IAYO,CAEN,KAAKtjD,MAAL,CAAY6jD,UAAZ,CAAwB,KAAKP,SAAL,EAAxB,EAEA,CAED,WAAA,CAEA,CA9IgF,CAgJjFQ,WAAY,qBAAY,CAEvB,YAAYT,OAAZ,CAEA,CApJgF,CAsJjFU,WAAY,oBAAWt7C,KAAX,CAAmB,CAE9B,GAAK,CAAEA,KAAP,CAAeA,MAAQ,EAAR,CAEf,GAAK,KAAKy6C,SAAL,GAAmB,IAAxB,CAA+B,CAE9B,KAAKW,UAAL,GACA,KAAKR,OAAL,CAAe56C,KAAf,CACA,KAAKq6C,OAAL,GAEA,CAND,IAMO,CAEN,KAAKO,OAAL,CAAe56C,KAAf,CAEA,CAED,WAAA,CAEA,CAxKgF,CA0KjFu7C,UAAW,oBAAY,CAEtB,YAAYF,UAAL,GAAmB,CAAnB,CAAP,CAEA,CA9KgF,CAgLjFG,UAAW,mBAAWC,MAAX,CAAoB,CAE9B,YAAYH,UAAL,CAAiBG,OAAS,CAAEA,MAAF,CAAT,CAAsB,EAAvC,CAAP,CAEA,CApLgF,CAsLjFC,gBAAiB,yBAAW17C,KAAX,CAAmB,CAEnC,GAAK,KAAK06C,kBAAL,GAA4B,KAAjC,CAAyC,CAExCr5C,QAAQC,IAAR,CAAc,kDAAd,EACA,OAEA,CAED,KAAKk5C,YAAL,CAAoBx6C,KAApB,CAEA,GAAK,KAAKy6C,SAAL,GAAmB,IAAxB,CAA+B,CAE9B,KAAKljD,MAAL,CAAYijD,YAAZ,CAAyBx6C,KAAzB,CAAiC,KAAKw6C,YAAtC,CAEA,CAED,WAAA,CAEA,CAzMgF,CA2MjFmB,gBAAiB,0BAAY,CAE5B,YAAYnB,YAAZ,CAEA,CA/MgF,CAiNjFN,QAAS,kBAAY,CAEpB,KAAKO,SAAL,CAAiB,KAAjB,CAEA,CArNgF,CAuNjFmB,QAAS,kBAAY,CAEpB,GAAK,KAAKlB,kBAAL,GAA4B,KAAjC,CAAyC,CAExCr5C,QAAQC,IAAR,CAAc,kDAAd,EACA,YAAA,CAEA,CAED,YAAY/J,MAAL,CAAY8sC,IAAnB,CAEA,CAlOgF,CAoOjFsB,QAAS,iBAAW3lC,KAAX,CAAmB,CAE3B,GAAK,KAAK06C,kBAAL,GAA4B,KAAjC,CAAyC,CAExCr5C,QAAQC,IAAR,CAAc,kDAAd,EACA,OAEA,CAED,KAAK/J,MAAL,CAAY8sC,IAAZ,CAAmBrkC,KAAnB,CAEA,CA/OgF,CAiPjF67C,UAAW,oBAAY,CAEtB,YAAY1B,IAAL,CAAUA,IAAV,CAAen6C,KAAtB,CAEA,CArPgF,CAwPjF87C,UAAW,mBAAW97C,KAAX,CAAmB,CAE7B,KAAKm6C,IAAL,CAAUA,IAAV,CAAen6C,KAAf,CAAuBA,KAAvB,CAEA,WAAA,CAEA,CA9PgF,CAA1D,CAAxB;;;IAwQA9J,MAAM6lD,aAAN,CAAsB,SAAWC,KAAX,CAAkBC,OAAlB,CAA4B,CAEjD,KAAKC,QAAL,CAAgBF,MAAMjC,OAAN,CAAcoC,cAAd,EAAhB,CACA,KAAKD,QAAL,CAAcD,OAAd,CAAwBA,UAAY5lD,SAAZ,CAAwB4lD,OAAxB,CAAkC,IAA1D,CAEA,KAAKtlB,IAAL,CAAY,cAAA,CAAgB,KAAKulB,QAAL,CAAcE,iBAA9B,CAAZ,CAEAJ,MAAMnB,SAAN,GAAkBR,OAAlB,CAA2B,KAAK6B,QAAhC,EAEA,CATD,CAWArlD,OAAOK,MAAP,CAAehB,MAAM6lD,aAAN,CAAoBplD,SAAnC,CAA8C,CAE7C0lD,iBAAkB,2BAAY,CAE7B,KAAKH,QAAL,CAAcI,oBAAd,CAAoC,KAAK3lB,IAAzC,EAEA,YAAYA,IAAZ,CAEA,CAR4C,CAU7C4lB,oBAAqB,8BAAY,CAEhC,UAAY,CAAZ,CAAe5lB,KAAO,KAAK0lB,gBAAL,EAAtB,CAEA,IAAM,MAAQ,CAAd,CAAiBtpC,EAAI4jB,KAAKr/B,MAA1B,CAAkCyb,GAAlC,CAAyC,CAExC/S,OAAS22B,KAAM5jB,CAAN,CAAT,CAEA,CAED,aAAe4jB,KAAKr/B,MAApB,CAEA,CAtB4C,CAA9C;;;IAgCAT,OAAOC,cAAP,CAAuBZ,KAAvB,CAA8B,cAA9B,CAA8C,CAE7Ca,IAAO,UAAY,CAElB,WAAA,CAEA,iBAAmB,CAElB,GAAKgjD,UAAY1jD,SAAjB,CAA6B,CAE5B0jD,QAAU,IAAMyC,OAAOC,YAAP,EAAuBD,OAAOE,kBAApC,GAAV,CAEA,CAED,cAAA,CAEA,CAVD,CAYA,CAhBI,EAFwC,CAA9C;;;IA4BAxmD,MAAMymD,eAAN,CAAwB,SAAW7sB,QAAX,CAAsB,CAE7C55B,MAAM4jD,KAAN,CAAYriD,IAAZ,CAAkB,IAAlB,CAAwBq4B,QAAxB,EAEA,KAAK8sB,MAAL,CAAc,KAAK7C,OAAL,CAAa8C,YAAb,EAAd,CACA,KAAKD,MAAL,CAAYvC,OAAZ,CAAqB,KAAKF,IAA1B,EAEA,CAPD,CASAjkD,MAAMymD,eAAN,CAAsBhmD,SAAtB,CAAkCE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAM4jD,KAAN,CAAYnjD,SAA3B,CAAf,CAAuD,CAExFoJ,YAAa7J,MAAMymD,eAFqE,CAIxF9B,UAAW,oBAAY,CAEtB,YAAY+B,MAAZ,CAEA,CARuF,CAUxFE,eAAgB,yBAAY,CAE3B,YAAYF,MAAL,CAAYG,WAAnB,CAEA,CAduF,CAgBxFC,eAAgB,wBAAWh9C,KAAX,CAAmB,CAElC,KAAK48C,MAAL,CAAYG,WAAZ,CAA0B/8C,KAA1B,CAEA,CApBuF,CAsBxFi9C,iBAAkB,2BAAY,CAE7B,YAAYL,MAAL,CAAYM,aAAnB,CAEA,CA1BuF,CA4BxFC,iBAAkB,0BAAWn9C,KAAX,CAAmB,CAEpC,KAAK48C,MAAL,CAAYM,aAAZ,CAA4Bl9C,KAA5B,CAEA,CAhCuF,CAkCxFo9C,iBAAkB,2BAAY,CAE7B,YAAYR,MAAL,CAAYS,aAAnB,CAEA,CAtCuF,CAwCxFC,iBAAkB,0BAAWt9C,KAAX,CAAmB,CAEpC,KAAK48C,MAAL,CAAYS,aAAZ,CAA4Br9C,KAA5B,CAEA,CA5CuF,CA8CxFu9C,eAAgB,yBAAY,CAE3B,YAAYX,MAAL,CAAYY,WAAnB,CAEA,CAlDuF,CAoDxFC,eAAgB,wBAAWz9C,KAAX,CAAmB,CAElC,KAAK48C,MAAL,CAAYY,WAAZ,CAA0Bx9C,KAA1B,CAEA,CAxDuF,CA0DxF0U,kBAAqB,UAAY,CAEhC,aAAe,UAAUzN,OAAV,EAAf,CAEA,iCAAO,CAA4ByuB,KAA5B,CAAoC,CAE1Cx/B,MAAMy8B,QAAN,CAAeh8B,SAAf,CAAyB+d,iBAAzB,CAA2Cjd,IAA3C,CAAiD,IAAjD,CAAuDi+B,KAAvD,EAEAjY,SAAS9N,qBAAT,CAAgC,KAAKxB,WAArC,EAEA,KAAKyuC,MAAL,CAAYngC,WAAZ,CAAyBgB,SAAShnB,CAAlC,CAAqCgnB,SAASnZ,CAA9C,CAAiDmZ,SAASlZ,CAA1D,EAEA,CARD,CAUA,CAdkB,EA1DqE,CAAvD,CAAlC;;;IAmFArO,MAAMwnD,aAAN,CAAsB,UAAY,CAEjCxnD,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,eAAZ,CAEA,KAAKkqB,OAAL,CAAe7jD,MAAMumD,YAArB,CAEA,KAAKtC,IAAL,CAAY,KAAKJ,OAAL,CAAaK,UAAb,EAAZ,CACA,KAAKD,IAAL,CAAUE,OAAV,CAAmB,KAAKN,OAAL,CAAa4D,WAAhC,EAEA,KAAKlC,MAAL,CAAc,IAAd,CAEA,CAbD,CAeAvlD,MAAMwnD,aAAN,CAAoB/mD,SAApB,CAAgCE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAf,CAA0D,CAEzFoJ,YAAa7J,MAAMwnD,aAFsE,CAIzFpD,SAAU,mBAAY,CAErB,YAAYH,IAAZ,CAEA,CARwF,CAUzFyD,aAAc,uBAAa,CAE1B,GAAK,KAAKnC,MAAL,GAAgB,IAArB,CAA4B,CAE3B,KAAKtB,IAAL,CAAUiB,UAAV,CAAsB,KAAKK,MAA3B,EACA,KAAKA,MAAL,CAAYL,UAAZ,CAAwB,KAAKrB,OAAL,CAAa4D,WAArC,EACA,KAAKxD,IAAL,CAAUE,OAAV,CAAmB,KAAKN,OAAL,CAAa4D,WAAhC,EACA,KAAKlC,MAAL,CAAc,IAAd,CAEA,CAED,CArBwF,CAuBzFF,UAAW,oBAAY,CAEtB,YAAYE,MAAZ,CAEA,CA3BwF,CA6BzFD,UAAW,mBAAWx7C,KAAX,CAAmB,CAE7B,GAAK,KAAKy7C,MAAL,GAAgB,IAArB,CAA4B,CAE3B,KAAKtB,IAAL,CAAUiB,UAAV,CAAsB,KAAKK,MAA3B,EACA,KAAKA,MAAL,CAAYL,UAAZ,CAAwB,KAAKrB,OAAL,CAAa4D,WAArC,EAEA,CALD,IAKO,CAEN,KAAKxD,IAAL,CAAUiB,UAAV,CAAsB,KAAKrB,OAAL,CAAa4D,WAAnC,EAEA,CAED,KAAKlC,MAAL,CAAcz7C,KAAd,CACA,KAAKm6C,IAAL,CAAUE,OAAV,CAAmB,KAAKoB,MAAxB,EACA,KAAKA,MAAL,CAAYpB,OAAZ,CAAqB,KAAKN,OAAL,CAAa4D,WAAlC,EAEA,CA9CwF,CAgDzFE,gBAAiB,0BAAY,CAE5B,YAAY1D,IAAL,CAAUA,IAAV,CAAen6C,KAAtB,CAEA,CApDwF,CAsDzF89C,gBAAiB,yBAAW99C,KAAX,CAAmB,CAEnC,KAAKm6C,IAAL,CAAUA,IAAV,CAAen6C,KAAf,CAAuBA,KAAvB,CAEA,CA1DwF,CA4DzF0U,kBAAqB,UAAY,CAEhC,aAAe,UAAUzN,OAAV,EAAf,CACA,eAAiB,UAAU5C,UAAV,EAAjB,CACA,UAAY,UAAU4C,OAAV,EAAZ,CAEA,gBAAkB,UAAUA,OAAV,EAAlB,CAEA,iCAAO,CAA4ByuB,KAA5B,CAAoC,CAE1Cx/B,MAAMy8B,QAAN,CAAeh8B,SAAf,CAAyB+d,iBAAzB,CAA2Cjd,IAA3C,CAAiD,IAAjD,CAAuDi+B,KAAvD,EAEA,aAAe,KAAKqkB,OAAL,CAAajqB,QAA5B,CACA,OAAS,KAAKzV,EAAd,CAEA,KAAKlM,WAAL,CAAiBuP,SAAjB,CAA4BD,QAA5B,CAAsC3Y,UAAtC,CAAkD6X,KAAlD,EAEAohC,YAAYl+C,GAAZ,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAE,CAAzB,EAA6BgN,eAA7B,CAA8C/H,UAA9C,EAEAgrB,SAASrT,WAAT,CAAsBgB,SAAShnB,CAA/B,CAAkCgnB,SAASnZ,CAA3C,CAA8CmZ,SAASlZ,CAAvD,EACAurB,SAASkuB,cAAT,CAAyBD,YAAYtnD,CAArC,CAAwCsnD,YAAYz5C,CAApD,CAAuDy5C,YAAYx5C,CAAnE,CAAsE8V,GAAG5jB,CAAzE,CAA4E4jB,GAAG/V,CAA/E,CAAkF+V,GAAG9V,CAArF,EAEA,CAdD,CAgBA,CAxBkB,EA5DsE,CAA1D,CAAhC;;;;;GAgGArO,MAAM+nD,MAAN,CAAe,UAAY,CAE1B/nD,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,QAAZ,CAEA,KAAKquB,kBAAL,CAA0B,UAAUnwC,OAAV,EAA1B,CACA,KAAKE,gBAAL,CAAwB,UAAUF,OAAV,EAAxB,CAEA,CATD,CAWA7X,MAAM+nD,MAAN,CAAatnD,SAAb,CAAyBE,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAzB,CACAT,MAAM+nD,MAAN,CAAatnD,SAAb,CAAuBoJ,WAAvB,CAAqC7J,MAAM+nD,MAA3C,CAEA/nD,MAAM+nD,MAAN,CAAatnD,SAAb,CAAuB2+B,iBAAvB,CAA2C,UAAY,CAEtD,eAAiB,UAAUjxB,UAAV,EAAjB,CAEA,gBAAkBxB,cAAX,CAA4B,CAElC,WAAaA,gBAAkB,UAAUoE,OAAV,EAA/B,CAEA,KAAKkuB,kBAAL,CAAyBrwB,UAAzB,EAEA,cAAcjF,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAE,CAApB,EAAwBgN,eAAxB,CAAyC/H,UAAzC,CAAP,CAEA,CARD,CAUA,CAd0C,EAA3C,CAgBA5O,MAAM+nD,MAAN,CAAatnD,SAAb,CAAuBwjB,MAAvB,CAAgC,UAAY;CAI3C,OAAS,UAAUpM,OAAV,EAAT,CAEA,gBAAkBe,MAAX,CAAoB,CAE1B0W,GAAGrL,MAAH,CAAW,KAAKsD,QAAhB,CAA0B3O,MAA1B,CAAkC,KAAKuL,EAAvC,EAEA,KAAKvV,UAAL,CAAgBkB,qBAAhB,CAAuCwf,EAAvC,EAEA,CAND,CAQA,CAd+B,EAAhC,CAgBAtvB,MAAM+nD,MAAN,CAAatnD,SAAb,CAAuBsL,KAAvB,CAA+B,UAAY,CAE1C,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CAJD,CAMA/J,MAAM+nD,MAAN,CAAatnD,SAAb,CAAuBsJ,IAAvB,CAA8B,SAAW1I,MAAX,CAAoB,CAEjDrB,MAAMy8B,QAAN,CAAeh8B,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAK2mD,kBAAL,CAAwBj+C,IAAxB,CAA8B1I,OAAO2mD,kBAArC,EACA,KAAKjwC,gBAAL,CAAsBhO,IAAtB,CAA4B1I,OAAO0W,gBAAnC,EAEA,WAAA,CAEA,CATD;;;;;;IAoBA/X,MAAMioD,UAAN,CAAmB,SAAWhgC,IAAX,CAAiBC,GAAjB,CAAsBggC,cAAtB,CAAuC,CAEzDloD,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,YAAZ,CAEA,QAAU,EAAV,CAActR,OAAS,CAAvB,CAEA,aAAe,UAAU4T,iBAAV,CAA6B7T,GAA7B,CAAkCC,MAAlC,CAA0CJ,IAA1C,CAAgDC,GAAhD,CAAf,CACAigC,SAAShkC,EAAT,CAAYxa,GAAZ,CAAiB,CAAjB,CAAoB,CAAE,CAAtB,CAAyB,CAAzB,EACAw+C,SAASlkC,MAAT,CAAiB,UAAUlT,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAAjB,EACA,KAAK3D,GAAL,CAAU+6C,QAAV,EAEA,aAAe,UAAUlsB,iBAAV,CAA6B7T,GAA7B,CAAkCC,MAAlC,CAA0CJ,IAA1C,CAAgDC,GAAhD,CAAf,CACAkgC,SAASjkC,EAAT,CAAYxa,GAAZ,CAAiB,CAAjB,CAAoB,CAAE,CAAtB,CAAyB,CAAzB,EACAy+C,SAASnkC,MAAT,CAAiB,UAAUlT,OAAV,CAAmB,CAAE,CAArB,CAAwB,CAAxB,CAA2B,CAA3B,CAAjB,EACA,KAAK3D,GAAL,CAAUg7C,QAAV,EAEA,aAAe,UAAUnsB,iBAAV,CAA6B7T,GAA7B,CAAkCC,MAAlC,CAA0CJ,IAA1C,CAAgDC,GAAhD,CAAf,CACAmgC,SAASlkC,EAAT,CAAYxa,GAAZ,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,EACA0+C,SAASpkC,MAAT,CAAiB,UAAUlT,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAAjB,EACA,KAAK3D,GAAL,CAAUi7C,QAAV,EAEA,aAAe,UAAUpsB,iBAAV,CAA6B7T,GAA7B,CAAkCC,MAAlC,CAA0CJ,IAA1C,CAAgDC,GAAhD,CAAf,CACAogC,SAASnkC,EAAT,CAAYxa,GAAZ,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAE,CAAzB,EACA2+C,SAASrkC,MAAT,CAAiB,UAAUlT,OAAV,CAAmB,CAAnB,CAAsB,CAAE,CAAxB,CAA2B,CAA3B,CAAjB,EACA,KAAK3D,GAAL,CAAUk7C,QAAV,EAEA,aAAe,UAAUrsB,iBAAV,CAA6B7T,GAA7B,CAAkCC,MAAlC,CAA0CJ,IAA1C,CAAgDC,GAAhD,CAAf,CACAqgC,SAASpkC,EAAT,CAAYxa,GAAZ,CAAiB,CAAjB,CAAoB,CAAE,CAAtB,CAAyB,CAAzB,EACA4+C,SAAStkC,MAAT,CAAiB,UAAUlT,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAAjB,EACA,KAAK3D,GAAL,CAAUm7C,QAAV,EAEA,aAAe,UAAUtsB,iBAAV,CAA6B7T,GAA7B,CAAkCC,MAAlC,CAA0CJ,IAA1C,CAAgDC,GAAhD,CAAf,CACAsgC,SAASrkC,EAAT,CAAYxa,GAAZ,CAAiB,CAAjB,CAAoB,CAAE,CAAtB,CAAyB,CAAzB,EACA6+C,SAASvkC,MAAT,CAAiB,UAAUlT,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAE,CAA3B,CAAjB,EACA,KAAK3D,GAAL,CAAUo7C,QAAV,EAEA,YAAc,CAAEC,OAAQzoD,MAAMkH,SAAhB,CAA2BwhD,UAAW1oD,MAAMmG,YAA5C,CAA0DwiD,UAAW3oD,MAAMmG,YAA3E,CAAd,CAEA,KAAKyiD,YAAL,CAAoB,UAAUC,qBAAV,CAAiCX,cAAjC,CAAiDA,cAAjD,CAAiEY,OAAjE,CAApB,CAEA,KAAKC,aAAL,CAAqB,SAAWC,QAAX,CAAqBC,KAArB,CAA6B,CAEjD,GAAK,KAAKtsB,MAAL,GAAgB,IAArB,CAA4B,KAAKne,iBAAL,GAE5B,iBAAmB,KAAKoqC,YAAxB,CACA,oBAAsBA,aAAaM,OAAb,CAAqBC,eAA3C,CAEAP,aAAaM,OAAb,CAAqBC,eAArB,CAAuC,KAAvC,CAEAP,aAAaQ,cAAb,CAA8B,CAA9B,CACAJ,SAASK,MAAT,CAAiBJ,KAAjB,CAAwBd,QAAxB,CAAkCS,YAAlC,EAEAA,aAAaQ,cAAb,CAA8B,CAA9B,CACAJ,SAASK,MAAT,CAAiBJ,KAAjB,CAAwBb,QAAxB,CAAkCQ,YAAlC,EAEAA,aAAaQ,cAAb,CAA8B,CAA9B,CACAJ,SAASK,MAAT,CAAiBJ,KAAjB,CAAwBZ,QAAxB,CAAkCO,YAAlC,EAEAA,aAAaQ,cAAb,CAA8B,CAA9B,CACAJ,SAASK,MAAT,CAAiBJ,KAAjB,CAAwBX,QAAxB,CAAkCM,YAAlC,EAEAA,aAAaQ,cAAb,CAA8B,CAA9B,CACAJ,SAASK,MAAT,CAAiBJ,KAAjB,CAAwBV,QAAxB,CAAkCK,YAAlC,EAEAA,aAAaM,OAAb,CAAqBC,eAArB,CAAuCA,eAAvC,CAEAP,aAAaQ,cAAb,CAA8B,CAA9B,CACAJ,SAASK,MAAT,CAAiBJ,KAAjB,CAAwBT,QAAxB,CAAkCI,YAAlC,EAEAI,SAASM,eAAT,CAA0B,IAA1B,EAEA,CA/BD,CAiCA,CA3ED,CA6EAtpD,MAAMioD,UAAN,CAAiBxnD,SAAjB,CAA6BE,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAA7B,CACAT,MAAMioD,UAAN,CAAiBxnD,SAAjB,CAA2BoJ,WAA3B,CAAyC7J,MAAMioD,UAA/C;;;IAQAjoD,MAAMk8B,kBAAN,CAA2B,SAAWrU,IAAX,CAAiBC,KAAjB,CAAwBE,GAAxB,CAA6BD,MAA7B,CAAqCE,IAArC,CAA2CC,GAA3C,CAAiD,CAE3EloB,MAAM+nD,MAAN,CAAaxmD,IAAb,CAAmB,IAAnB,EAEA,KAAKo4B,IAAL,CAAY,oBAAZ,CAEA,KAAK4vB,IAAL,CAAY,CAAZ,CAEA,KAAK1hC,IAAL,CAAYA,IAAZ,CACA,KAAKC,KAAL,CAAaA,KAAb,CACA,KAAKE,GAAL,CAAWA,GAAX,CACA,KAAKD,MAAL,CAAcA,MAAd,CAEA,KAAKE,IAAL,CAAcA,OAAS9nB,SAAX,CAAyB8nB,IAAzB,CAAgC,GAA5C,CACA,KAAKC,GAAL,CAAaA,MAAQ/nB,SAAV,CAAwB+nB,GAAxB,CAA8B,IAAzC,CAEA,KAAKshC,sBAAL,GAEA,CAlBD,CAoBAxpD,MAAMk8B,kBAAN,CAAyBz7B,SAAzB,CAAqCE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAM+nD,MAAN,CAAatnD,SAA5B,CAAf,CAAwD,CAE5FoJ,YAAa7J,MAAMk8B,kBAFyE,CAI5FnyB,KAAM,cAAW1I,MAAX,CAAoB,CAEzBrB,MAAM+nD,MAAN,CAAatnD,SAAb,CAAuBsJ,IAAvB,CAA4BxI,IAA5B,CAAkC,IAAlC,CAAwCF,MAAxC,EAEA,KAAKwmB,IAAL,CAAYxmB,OAAOwmB,IAAnB,CACA,KAAKC,KAAL,CAAazmB,OAAOymB,KAApB,CACA,KAAKE,GAAL,CAAW3mB,OAAO2mB,GAAlB,CACA,KAAKD,MAAL,CAAc1mB,OAAO0mB,MAArB,CACA,KAAKE,IAAL,CAAY5mB,OAAO4mB,IAAnB,CACA,KAAKC,GAAL,CAAW7mB,OAAO6mB,GAAlB,CAEA,KAAKqhC,IAAL,CAAYloD,OAAOkoD,IAAnB,CAEA,WAAA,CAEA,CAnB2F,CAqB5FC,uBAAwB,iCAAY,CAEnC,OAAS,CAAE,KAAK1hC,KAAL,CAAa,KAAKD,IAApB,GAA+B,EAAI,KAAK0hC,IAAxC,CAAT,CACA,OAAS,CAAE,KAAKvhC,GAAL,CAAW,KAAKD,MAAlB,GAA+B,EAAI,KAAKwhC,IAAxC,CAAT,CACA,OAAS,CAAE,KAAKzhC,KAAL,CAAa,KAAKD,IAApB,EAA6B,CAAtC,CACA,OAAS,CAAE,KAAKG,GAAL,CAAW,KAAKD,MAAlB,EAA6B,CAAtC,CAEA,KAAKhQ,gBAAL,CAAsB6Q,gBAAtB,CAAwC6gC,GAAK3zC,EAA7C,CAAiD2zC,GAAK3zC,EAAtD,CAA0D4zC,GAAK7zC,EAA/D,CAAmE6zC,GAAK7zC,EAAxE,CAA4E,KAAKoS,IAAjF,CAAuF,KAAKC,GAA5F,EAEA,CA9B2F,CAgC5FuX,OAAQ,gBAAWC,IAAX,CAAkB,CAEzB,SAAW1/B,MAAMy8B,QAAN,CAAeh8B,SAAf,CAAyBg/B,MAAzB,CAAgCl+B,IAAhC,CAAsC,IAAtC,CAA4Cm+B,IAA5C,CAAX,CAEAe,KAAKliB,MAAL,CAAYgrC,IAAZ,CAAmB,KAAKA,IAAxB,CACA9oB,KAAKliB,MAAL,CAAYsJ,IAAZ,CAAmB,KAAKA,IAAxB,CACA4Y,KAAKliB,MAAL,CAAYuJ,KAAZ,CAAoB,KAAKA,KAAzB,CACA2Y,KAAKliB,MAAL,CAAYyJ,GAAZ,CAAkB,KAAKA,GAAvB,CACAyY,KAAKliB,MAAL,CAAYwJ,MAAZ,CAAqB,KAAKA,MAA1B,CACA0Y,KAAKliB,MAAL,CAAY0J,IAAZ,CAAmB,KAAKA,IAAxB,CACAwY,KAAKliB,MAAL,CAAY2J,GAAZ,CAAkB,KAAKA,GAAvB,CAEA,WAAA,CAEA,CA9C2F,CAAxD,CAArC;;;;;;IA2DAloB,MAAMi8B,iBAAN,CAA0B,SAAU7T,GAAV,CAAeC,MAAf,CAAuBJ,IAAvB,CAA6BC,GAA7B,CAAmC,CAE5DloB,MAAM+nD,MAAN,CAAaxmD,IAAb,CAAmB,IAAnB,EAEA,KAAKo4B,IAAL,CAAY,mBAAZ,CAEA,KAAKvR,GAAL,CAAWA,MAAQjoB,SAAR,CAAoBioB,GAApB,CAA0B,EAArC,CACA,KAAKmhC,IAAL,CAAY,CAAZ,CAEA,KAAKthC,IAAL,CAAYA,OAAS9nB,SAAT,CAAqB8nB,IAArB,CAA4B,GAAxC,CACA,KAAKC,GAAL,CAAWA,MAAQ/nB,SAAR,CAAoB+nB,GAApB,CAA0B,IAArC,CACA,KAAKyhC,KAAL,CAAa,EAAb,CAEA,KAAKthC,MAAL,CAAcA,SAAWloB,SAAX,CAAuBkoB,MAAvB,CAAgC,CAA9C,CACA,KAAKuhC,IAAL,CAAY,IAAZ,CAEA,KAAKC,SAAL,CAAiB,EAAjB;CACA,KAAKC,UAAL,CAAkB,CAAlB;CAEA,KAAKN,sBAAL,GAEA,CArBD,CAuBAxpD,MAAMi8B,iBAAN,CAAwBx7B,SAAxB,CAAoCE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAM+nD,MAAN,CAAatnD,SAA5B,CAAf,CAAwD,CAE3FoJ,YAAa7J,MAAMi8B,iBAFwE,CAI3FlyB,KAAM,cAAW1I,MAAX,CAAoB,CAEzBrB,MAAM+nD,MAAN,CAAatnD,SAAb,CAAuBsJ,IAAvB,CAA4BxI,IAA5B,CAAkC,IAAlC,CAAwCF,MAAxC,EAEA,KAAK+mB,GAAL,CAAW/mB,OAAO+mB,GAAlB,CACA,KAAKmhC,IAAL,CAAYloD,OAAOkoD,IAAnB,CAEA,KAAKthC,IAAL,CAAY5mB,OAAO4mB,IAAnB,CACA,KAAKC,GAAL,CAAW7mB,OAAO6mB,GAAlB,CACA,KAAKyhC,KAAL,CAAatoD,OAAOsoD,KAApB,CAEA,KAAKthC,MAAL,CAAchnB,OAAOgnB,MAArB,CACA,KAAKuhC,IAAL,CAAYvoD,OAAOuoD,IAAP,GAAgB,IAAhB,CAAuB,IAAvB,CAA8BjpD,OAAOK,MAAP,CAAe,EAAf,CAAmBK,OAAOuoD,IAA1B,CAA1C,CAEA,KAAKC,SAAL,CAAiBxoD,OAAOwoD,SAAxB,CACA,KAAKC,UAAL,CAAkBzoD,OAAOyoD,UAAzB,CAEA,WAAA,CAEA,CAvB0F;;;;;;;KAiC3FC,eAAgB,wBAAWC,WAAX,CAAyB;CAGxC,iBAAmB,IAAM,KAAKC,aAAL,EAAN,CAA6BD,WAAhD,CAEA,KAAK5hC,GAAL,CAAWpoB,MAAMI,IAAN,CAAWyvB,OAAX,CAAqB,CAArB,CAAyBzvB,KAAK8pD,IAAL,CAAWC,YAAX,CAApC,CACA,KAAKX,sBAAL,GAEA,CAzC0F;;KA8C3FY,eAAgB,yBAAY,CAE3B,iBAAmBhqD,KAAKkoB,GAAL,CAAUtoB,MAAMI,IAAN,CAAWmoB,OAAX,CAAqB,GAArB,CAA2B,KAAKH,GAA1C,CAAnB,CAEA,WAAa,KAAK6hC,aAAL,EAAN,CAA6BE,YAApC,CAEA,CApD0F,CAsD3FE,gBAAiB,0BAAY,CAE5B,aAAajqD,IAAN,CAAWyvB,OAAX,CAAqB,CAArB,CAAyBzvB,KAAK8pD,IAAL,CAC9B9pD,KAAKkoB,GAAL,CAAUtoB,MAAMI,IAAN,CAAWmoB,OAAX,CAAqB,GAArB,CAA2B,KAAKH,GAA1C,EAAkD,KAAKmhC,IADzB,CAAhC,CAGA,CA3D0F,CA6D3Fe,aAAc,uBAAY;CAGzB,YAAYT,SAAL,CAAiBzpD,KAAKqL,GAAL,CAAU,KAAK4c,MAAf,CAAuB,CAAvB,CAAxB,CAEA,CAlE0F,CAoE3F4hC,cAAe,wBAAY;CAG1B,YAAYJ,SAAL,CAAiBzpD,KAAKwM,GAAL,CAAU,KAAKyb,MAAf,CAAuB,CAAvB,CAAxB,CAEA,CAzE0F;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KA8G3FkiC,cAAe,uBAAWC,SAAX,CAAsBC,UAAtB,CAAkClqD,CAAlC,CAAqC6N,CAArC,CAAwCs8C,KAAxC,CAA+CC,MAA/C,CAAwD,CAEtE,KAAKtiC,MAAL,CAAcmiC,UAAYC,UAA1B,CAEA,KAAKb,IAAL,CAAY,CACXY,UAAWA,SADA,CAEXC,WAAYA,UAFD,CAGXG,QAASrqD,CAHE,CAIXsqD,QAASz8C,CAJE,CAKXs8C,MAAOA,KALI,CAMXC,OAAQA,MANG,CAAZ,CASA,KAAKnB,sBAAL,GAEA,CA7H0F,CA+H3FsB,gBAAiB,0BAAW,CAE3B,KAAKlB,IAAL,CAAY,IAAZ,CACA,KAAKJ,sBAAL,GAEA,CApI0F,CAsI3FA,uBAAwB,iCAAY,CAEnC,SAAW,KAAKvhC,IAAhB,CACCD,IAAMC,KAAO7nB,KAAKkoB,GAAL,CACXtoB,MAAMI,IAAN,CAAWmoB,OAAX,CAAqB,GAArB,CAA2B,KAAKH,GADrB,CAAP,CACoC,KAAKmhC,IAFhD,CAGCoB,OAAS,EAAI3iC,GAHd,CAIC0iC,MAAQ,KAAKriC,MAAL,CAAcsiC,MAJvB,CAKC9iC,KAAO,CAAE,GAAF,CAAQ6iC,KALhB,CAMCd,KAAO,KAAKA,IANb,CAQA,GAAKA,OAAS,IAAd,CAAqB,CAEpB,cAAgBA,KAAKY,SAArB,CACCC,WAAab,KAAKa,UADnB,CAGA5iC,MAAQ+hC,KAAKgB,OAAL,CAAeF,KAAf,CAAuBF,SAA/B,CACAxiC,KAAO4hC,KAAKiB,OAAL,CAAeF,MAAf,CAAwBF,UAA/B,CACAC,OAASd,KAAKc,KAAL,CAAaF,SAAtB,CACAG,QAAUf,KAAKe,MAAL,CAAcF,UAAxB,CAEA,CAED,SAAW,KAAKX,UAAhB,CACA,GAAKiB,OAAS,CAAd,CAAkBljC,MAAQI,KAAO8iC,IAAP,CAAc,KAAKT,YAAL,EAAtB,CAElB,KAAKvyC,gBAAL,CAAsB6P,WAAtB,CACEC,IADF,CACQA,KAAO6iC,KADf,CACsB1iC,IAAM2iC,MAD5B,CACoC3iC,GADpC,CACyCC,IADzC,CAC+C,KAAKC,GADpD,EAGA,CAlK0F,CAoK3FuX,OAAQ,gBAAWC,IAAX,CAAkB,CAEzB,SAAW1/B,MAAMy8B,QAAN,CAAeh8B,SAAf,CAAyBg/B,MAAzB,CAAgCl+B,IAAhC,CAAsC,IAAtC,CAA4Cm+B,IAA5C,CAAX,CAEAe,KAAKliB,MAAL,CAAY6J,GAAZ,CAAkB,KAAKA,GAAvB,CACAqY,KAAKliB,MAAL,CAAYgrC,IAAZ,CAAmB,KAAKA,IAAxB,CAEA9oB,KAAKliB,MAAL,CAAY0J,IAAZ,CAAmB,KAAKA,IAAxB,CACAwY,KAAKliB,MAAL,CAAY2J,GAAZ,CAAkB,KAAKA,GAAvB,CACAuY,KAAKliB,MAAL,CAAYorC,KAAZ,CAAoB,KAAKA,KAAzB,CAEAlpB,KAAKliB,MAAL,CAAY8J,MAAZ,CAAqB,KAAKA,MAA1B,CAEA,GAAK,KAAKuhC,IAAL,GAAc,IAAnB,CAA0BnpB,KAAKliB,MAAL,CAAYqrC,IAAZ,CAAmBjpD,OAAOK,MAAP,CAAe,EAAf,CAAmB,KAAK4oD,IAAxB,CAAnB,CAE1BnpB,KAAKliB,MAAL,CAAYsrC,SAAZ,CAAwB,KAAKA,SAA7B,CACAppB,KAAKliB,MAAL,CAAYurC,UAAZ,CAAyB,KAAKA,UAA9B,CAEA,WAAA,CAEA,CAxL0F,CAAxD,CAApC;;;IAkMA9pD,MAAMgrD,YAAN,CAAqB,UAAY,CAEhC,KAAKrxB,IAAL,CAAY,cAAZ,CAEA,KAAKtR,MAAL,CAAc,CAAd,CAEA,KAAK4iC,OAAL,CAAe,UAAUhvB,iBAAV,EAAf,CACA,KAAKgvB,OAAL,CAAapwB,MAAb,CAAoBJ,MAApB,CAA4B,CAA5B,EACA,KAAKwwB,OAAL,CAAa/tB,gBAAb,CAAgC,KAAhC,CAEA,KAAKguB,OAAL,CAAe,UAAUjvB,iBAAV,EAAf,CACA,KAAKivB,OAAL,CAAarwB,MAAb,CAAoBJ,MAApB,CAA4B,CAA5B,EACA,KAAKywB,OAAL,CAAahuB,gBAAb,CAAgC,KAAhC,CAEA,CAdD,CAgBAv8B,OAAOK,MAAP,CAAehB,MAAMgrD,YAAN,CAAmBvqD,SAAlC,CAA6C,CAE5CsO,OAAU,UAAY,CAErB,SAAA,CAAWqZ,GAAX,CAAgBC,MAAhB,CAAwBJ,IAAxB,CAA8BC,GAA9B,CAEA,aAAe,UAAUrQ,OAAV,EAAf,CACA,YAAc,UAAUA,OAAV,EAAd,CAEA,sBAAO,CAAkBF,MAAlB,CAA2B,CAEjC,gBAAkBgyC,QAAUhyC,OAAOgyC,KAAjB,EAA0BvhC,MAAQzQ,OAAOyQ,GAAzC,EACTC,SAAW1Q,OAAO0Q,MAAP,CAAgB,KAAKA,MADvB,EACiCJ,OAAStQ,OAAOsQ,IADjD,EAETC,MAAQvQ,OAAOuQ,GAFxB,CAIA,GAAKgjB,WAAL,CAAmB,CAElBye,MAAQhyC,OAAOgyC,KAAf,CACAvhC,IAAMzQ,OAAOyQ,GAAb,CACAC,OAAS1Q,OAAO0Q,MAAP,CAAgB,KAAKA,MAA9B,CACAJ,KAAOtQ,OAAOsQ,IAAd,CACAC,IAAMvQ,OAAOuQ,GAAb;;CAKA,qBAAuBvQ,OAAOI,gBAAP,CAAwBhM,KAAxB,EAAvB,CACA,WAAa,MAAQ,CAArB,CACA,uBAAyBo/C,OAASljC,IAAT,CAAgB0hC,KAAzC,CACA,SAAW1hC,KAAO7nB,KAAKkoB,GAAL,CAAUtoB,MAAMI,IAAN,CAAWmoB,OAAX,CAAqBH,GAArB,CAA2B,GAArC,CAAlB,CACA,QAAA,CAAUO,IAAV;CAIAyiC,QAAQr7C,QAAR,CAAkB,EAAlB,EAAyB,CAAEo7C,MAA3B,CACAE,SAASt7C,QAAT,CAAmB,EAAnB,EAA0Bo7C,MAA1B;CAIAziC,KAAO,CAAEF,IAAF,CAASH,MAAT,CAAkBijC,kBAAzB,CACA3iC,KAAOH,KAAOH,MAAP,CAAgBijC,kBAAvB,CAEAvzC,iBAAiBhI,QAAjB,CAA2B,CAA3B,EAAiC,EAAIkY,IAAJ,EAAaU,KAAOD,IAApB,CAAjC,CACA3Q,iBAAiBhI,QAAjB,CAA2B,CAA3B,EAAiC,CAAE4Y,KAAOD,IAAT,GAAoBC,KAAOD,IAA3B,CAAjC,CAEA,KAAKuiC,OAAL,CAAalzC,gBAAb,CAA8BhO,IAA9B,CAAoCgO,gBAApC;CAIA2Q,KAAO,CAAEF,IAAF,CAASH,MAAT,CAAkBijC,kBAAzB,CACA3iC,KAAOH,KAAOH,MAAP,CAAgBijC,kBAAvB,CAEAvzC,iBAAiBhI,QAAjB,CAA2B,CAA3B,EAAiC,EAAIkY,IAAJ,EAAaU,KAAOD,IAApB,CAAjC,CACA3Q,iBAAiBhI,QAAjB,CAA2B,CAA3B,EAAiC,CAAE4Y,KAAOD,IAAT,GAAoBC,KAAOD,IAA3B,CAAjC,CAEA,KAAKwiC,OAAL,CAAanzC,gBAAb,CAA8BhO,IAA9B,CAAoCgO,gBAApC,EAEA,CAED,KAAKkzC,OAAL,CAAahzC,WAAb,CAAyBlO,IAAzB,CAA+B4N,OAAOM,WAAtC,EAAoDxK,QAApD,CAA8D29C,OAA9D,EACA,KAAKF,OAAL,CAAajzC,WAAb,CAAyBlO,IAAzB,CAA+B4N,OAAOM,WAAtC,EAAoDxK,QAApD,CAA8D49C,QAA9D,EAEA,CArDD,CAuDA,CA9DO,EAFoC,CAA7C;;;;IA2EArrD,MAAMurD,KAAN,CAAc,SAAWhgD,KAAX,CAAkBigD,SAAlB,CAA8B,CAE3CxrD,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,OAAZ,CAEA,KAAKpuB,KAAL,CAAa,UAAUhC,KAAV,CAAiBgC,KAAjB,CAAb,CACA,KAAKigD,SAAL,CAAiBA,YAAcrrD,SAAd,CAA0BqrD,SAA1B,CAAsC,CAAvD,CAEA,KAAKluB,aAAL,CAAqBn9B,SAArB,CAEA,CAXD,CAaAH,MAAMurD,KAAN,CAAY9qD,SAAZ,CAAwBE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAf,CAA0D,CAEjFoJ,YAAa7J,MAAMurD,KAF8D,CAIjFxhD,KAAM,cAAW1I,MAAX,CAAoB,CAEzBrB,MAAMy8B,QAAN,CAAeh8B,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAKkK,KAAL,CAAWxB,IAAX,CAAiB1I,OAAOkK,KAAxB,EACA,KAAKigD,SAAL,CAAiBnqD,OAAOmqD,SAAxB,CAEA,WAAA,CAEA,CAbgF,CAejF/rB,OAAQ,gBAAWC,IAAX,CAAkB,CAEzB,SAAW1/B,MAAMy8B,QAAN,CAAeh8B,SAAf,CAAyBg/B,MAAzB,CAAgCl+B,IAAhC,CAAsC,IAAtC,CAA4Cm+B,IAA5C,CAAX,CAEAe,KAAKliB,MAAL,CAAYhT,KAAZ,CAAoB,KAAKA,KAAL,CAAWgB,MAAX,EAApB,CACAk0B,KAAKliB,MAAL,CAAYitC,SAAZ,CAAwB,KAAKA,SAA7B,CAEA,GAAK,KAAKC,WAAL,GAAqBtrD,SAA1B,CAAsCsgC,KAAKliB,MAAL,CAAYktC,WAAZ,CAA0B,KAAKA,WAAL,CAAiBl/C,MAAjB,EAA1B,CAEtC,GAAK,KAAKqP,QAAL,GAAkBzb,SAAvB,CAAmCsgC,KAAKliB,MAAL,CAAY3C,QAAZ,CAAuB,KAAKA,QAA5B,CACnC,GAAK,KAAKhM,KAAL,GAAezP,SAApB,CAAgCsgC,KAAKliB,MAAL,CAAY3O,KAAZ,CAAoB,KAAKA,KAAzB,CAChC,GAAK,KAAK87C,KAAL,GAAevrD,SAApB,CAAgCsgC,KAAKliB,MAAL,CAAYmtC,KAAZ,CAAoB,KAAKA,KAAzB,CAChC,GAAK,KAAKC,QAAL,GAAkBxrD,SAAvB,CAAmCsgC,KAAKliB,MAAL,CAAYotC,QAAZ,CAAuB,KAAKA,QAA5B,CAEnC,WAAA,CAEA,CA/BgF,CAA1D,CAAxB;;;IAyCA3rD,MAAM4rD,WAAN,CAAoB,SAAWj0C,MAAX,CAAoB,CAEvC,KAAKA,MAAL,CAAcA,MAAd,CAEA,KAAKk0C,IAAL,CAAY,CAAZ,CACA,KAAKtyC,MAAL,CAAc,CAAd,CAEA,KAAKuyC,OAAL,CAAe,UAAU13C,OAAV,CAAmB,GAAnB,CAAwB,GAAxB,CAAf,CAEA,KAAK23C,GAAL,CAAW,IAAX,CACA,KAAKn0C,MAAL,CAAc,UAAUC,OAAV,EAAd,CAEA,CAZD,CAcAlX,OAAOK,MAAP,CAAehB,MAAM4rD,WAAN,CAAkBnrD,SAAjC,CAA4C,CAE3CsJ,KAAM,cAAW1I,MAAX,CAAoB,CAEzB,KAAKsW,MAAL,CAActW,OAAOsW,MAAP,CAAc5L,KAAd,EAAd,CAEA,KAAK8/C,IAAL,CAAYxqD,OAAOwqD,IAAnB,CACA,KAAKtyC,MAAL,CAAclY,OAAOkY,MAArB,CAEA,KAAKuyC,OAAL,CAAa/hD,IAAb,CAAmB1I,OAAOyqD,OAA1B,EAEA,WAAA,CAEA,CAb0C,CAe3C//C,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CAnB0C,CAA5C;;;IA6BA/J,MAAMgsD,YAAN,CAAqB,SAAWzgD,KAAX,CAAkBigD,SAAlB,CAA8B,CAElDxrD,MAAMurD,KAAN,CAAYhqD,IAAZ,CAAkB,IAAlB,CAAwBgK,KAAxB,CAA+BigD,SAA/B,EAEA,KAAK7xB,IAAL,CAAY,cAAZ,CAEA,KAAK0D,UAAL,CAAkBl9B,SAAlB,CAEA,CARD,CAUAH,MAAMgsD,YAAN,CAAmBvrD,SAAnB,CAA+BE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMurD,KAAN,CAAY9qD,SAA3B,CAAf,CAAuD,CAErFoJ,YAAa7J,MAAMgsD,YAFkE,CAAvD,CAA/B;;;;IAaAhsD,MAAMisD,gBAAN,CAAyB,SAAW1gD,KAAX,CAAkBigD,SAAlB,CAA8B,CAEtDxrD,MAAMurD,KAAN,CAAYhqD,IAAZ,CAAkB,IAAlB,CAAwBgK,KAAxB,CAA+BigD,SAA/B,EAEA,KAAK7xB,IAAL,CAAY,kBAAZ,CAEA,KAAKpS,QAAL,CAAc5d,GAAd,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,EACA,KAAK41B,YAAL,GAEA,KAAKt+B,MAAL,CAAc,UAAUw7B,QAAV,EAAd,CAEA,KAAKyvB,MAAL,CAAc,UAAUC,sBAAV,EAAd,CAEA,CAbD,CAeAnsD,MAAMisD,gBAAN,CAAuBxrD,SAAvB,CAAmCE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMurD,KAAN,CAAY9qD,SAA3B,CAAf,CAAuD,CAEzFoJ,YAAa7J,MAAMisD,gBAFsE,CAIzFliD,KAAM,cAAW1I,MAAX,CAAoB,CAEzBrB,MAAMurD,KAAN,CAAY9qD,SAAZ,CAAsBsJ,IAAtB,CAA2BxI,IAA3B,CAAiC,IAAjC,CAAuCF,MAAvC,EAEA,KAAKJ,MAAL,CAAcI,OAAOJ,MAAP,CAAc8K,KAAd,EAAd,CAEA,KAAKmgD,MAAL,CAAc7qD,OAAO6qD,MAAP,CAAcngD,KAAd,EAAd,CAEA,WAAA,CAEA,CAdwF,CAAvD,CAAnC;;;IAwBA/L,MAAMmsD,sBAAN,CAA+B,SAAWC,KAAX,CAAmB,CAEjDpsD,MAAM4rD,WAAN,CAAkBrqD,IAAlB,CAAwB,IAAxB,CAA8B,UAAU26B,kBAAV,CAA8B,CAAE,CAAhC,CAAmC,CAAnC,CAAsC,CAAtC,CAAyC,CAAE,CAA3C,CAA8C,GAA9C,CAAmD,GAAnD,CAA9B,EAEA,CAJD,CAMAl8B,MAAMmsD,sBAAN,CAA6B1rD,SAA7B,CAAyCE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAM4rD,WAAN,CAAkBnrD,SAAjC,CAAf,CAA6D,CAErGoJ,YAAa7J,MAAMmsD,sBAFkF,CAA7D,CAAzC;;;IAYAnsD,MAAMqsD,eAAN,CAAwB,SAAWC,QAAX,CAAqBb,WAArB,CAAkCD,SAAlC,CAA8C,CAErExrD,MAAMurD,KAAN,CAAYhqD,IAAZ,CAAkB,IAAlB,CAAwB+qD,QAAxB,CAAkCd,SAAlC,EAEA,KAAK7xB,IAAL,CAAY,iBAAZ,CAEA,KAAK0D,UAAL,CAAkBl9B,SAAlB,CAEA,KAAKonB,QAAL,CAAc5d,GAAd,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,EACA,KAAK41B,YAAL,GAEA,KAAKksB,WAAL,CAAmB,UAAUliD,KAAV,CAAiBkiD,WAAjB,CAAnB,CAEA,CAbD,CAeAzrD,MAAMqsD,eAAN,CAAsB5rD,SAAtB,CAAkCE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMurD,KAAN,CAAY9qD,SAA3B,CAAf,CAAuD,CAExFoJ,YAAa7J,MAAMqsD,eAFqE,CAIxFtiD,KAAM,cAAW1I,MAAX,CAAoB,CAEzBrB,MAAMurD,KAAN,CAAY9qD,SAAZ,CAAsBsJ,IAAtB,CAA2BxI,IAA3B,CAAiC,IAAjC,CAAuCF,MAAvC,EAEA,KAAKoqD,WAAL,CAAiB1hD,IAAjB,CAAuB1I,OAAOoqD,WAA9B,EAEA,WAAA,CAEA,CAZuF,CAAvD,CAAlC;;;IAuBAzrD,MAAMusD,UAAN,CAAmB,SAAWhhD,KAAX,CAAkBigD,SAAlB,CAA6B5vC,QAA7B,CAAuC8vC,KAAvC,CAA+C,CAEjE1rD,MAAMurD,KAAN,CAAYhqD,IAAZ,CAAkB,IAAlB,CAAwBgK,KAAxB,CAA+BigD,SAA/B,EAEA,KAAK7xB,IAAL,CAAY,YAAZ,CAEAh5B,OAAOC,cAAP,CAAuB,IAAvB,CAA6B,OAA7B,CAAsC,CACrCC,IAAK,cAAY;;CAGhB,YAAY2qD,SAAL,CAAiB,CAAjB,CAAqBprD,KAAKsV,EAAjC,CAEA,CANoC,CAOrC/L,IAAK,aAAW6iD,KAAX,CAAmB;;CAGvB,KAAKhB,SAAL,CAAiBgB,OAAU,EAAIpsD,KAAKsV,EAAnB,CAAjB,CACA,CAXoC,CAAtC,EAcA,KAAKkG,QAAL,CAAkBA,WAAazb,SAAf,CAA6Byb,QAA7B,CAAwC,CAAxD,CACA,KAAK8vC,KAAL,CAAeA,QAAUvrD,SAAZ,CAA0BurD,KAA1B,CAAkC,CAA/C;CAEA,KAAKQ,MAAL,CAAc,UAAUN,WAAV,CAAuB,UAAU3vB,iBAAV,CAA6B,EAA7B,CAAiC,CAAjC,CAAoC,GAApC,CAAyC,GAAzC,CAAvB,CAAd,CAEA,CAzBD,CA2BAj8B,MAAMusD,UAAN,CAAiB9rD,SAAjB,CAA6BE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMurD,KAAN,CAAY9qD,SAA3B,CAAf,CAAuD,CAEnFoJ,YAAa7J,MAAMusD,UAFgE,CAInFxiD,KAAM,cAAW1I,MAAX,CAAoB,CAEzBrB,MAAMurD,KAAN,CAAY9qD,SAAZ,CAAsBsJ,IAAtB,CAA2BxI,IAA3B,CAAiC,IAAjC,CAAuCF,MAAvC,EAEA,KAAKua,QAAL,CAAgBva,OAAOua,QAAvB,CACA,KAAK8vC,KAAL,CAAarqD,OAAOqqD,KAApB,CAEA,KAAKQ,MAAL,CAAc7qD,OAAO6qD,MAAP,CAAcngD,KAAd,EAAd,CAEA,WAAA,CAEA,CAfkF,CAAvD,CAA7B;;;IAyBA/L,MAAMysD,SAAN,CAAkB,SAAWlhD,KAAX,CAAkBigD,SAAlB,CAA6B5vC,QAA7B,CAAuChM,KAAvC,CAA8C+7C,QAA9C,CAAwDD,KAAxD,CAAgE,CAEjF1rD,MAAMurD,KAAN,CAAYhqD,IAAZ,CAAkB,IAAlB,CAAwBgK,KAAxB,CAA+BigD,SAA/B,EAEA,KAAK7xB,IAAL,CAAY,WAAZ,CAEA,KAAKpS,QAAL,CAAc5d,GAAd,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,EACA,KAAK41B,YAAL,GAEA,KAAKt+B,MAAL,CAAc,UAAUw7B,QAAV,EAAd,CAEA97B,OAAOC,cAAP,CAAuB,IAAvB,CAA6B,OAA7B,CAAsC,CACrCC,IAAK,cAAY;;CAGhB,YAAY2qD,SAAL,CAAiBprD,KAAKsV,EAA7B,CACA,CALoC,CAMrC/L,IAAK,aAAW6iD,KAAX,CAAmB;;CAGvB,KAAKhB,SAAL,CAAiBgB,MAAQpsD,KAAKsV,EAA9B,CACA,CAVoC,CAAtC,EAaA,KAAKkG,QAAL,CAAkBA,WAAazb,SAAf,CAA6Byb,QAA7B,CAAwC,CAAxD,CACA,KAAKhM,KAAL,CAAeA,QAAUzP,SAAZ,CAA0ByP,KAA1B,CAAkCxP,KAAKsV,EAAL,CAAU,CAAzD,CACA,KAAKi2C,QAAL,CAAkBA,WAAaxrD,SAAf,CAA6BwrD,QAA7B,CAAwC,CAAxD,CACA,KAAKD,KAAL,CAAeA,QAAUvrD,SAAZ,CAA0BurD,KAA1B,CAAkC,CAA/C;CAEA,KAAKQ,MAAL,CAAc,UAAUQ,eAAV,EAAd,CAEA,CA/BD,CAiCA1sD,MAAMysD,SAAN,CAAgBhsD,SAAhB,CAA4BE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMurD,KAAN,CAAY9qD,SAA3B,CAAf,CAAuD,CAElFoJ,YAAa7J,MAAMysD,SAF+D,CAIlF1iD,KAAM,cAAW1I,MAAX,CAAoB,CAEzBrB,MAAMurD,KAAN,CAAY9qD,SAAZ,CAAsBsJ,IAAtB,CAA2BxI,IAA3B,CAAiC,IAAjC,CAAuCF,MAAvC,EAEA,KAAKua,QAAL,CAAgBva,OAAOua,QAAvB,CACA,KAAKhM,KAAL,CAAavO,OAAOuO,KAApB,CACA,KAAK+7C,QAAL,CAAgBtqD,OAAOsqD,QAAvB,CACA,KAAKD,KAAL,CAAarqD,OAAOqqD,KAApB,CAEA,KAAKzqD,MAAL,CAAcI,OAAOJ,MAAP,CAAc8K,KAAd,EAAd,CAEA,KAAKmgD,MAAL,CAAc7qD,OAAO6qD,MAAP,CAAcngD,KAAd,EAAd,CAEA,WAAA,CAEA,CAnBiF,CAAvD,CAA5B;;;IA6BA/L,MAAM0sD,eAAN,CAAwB,UAAY,CAEnC1sD,MAAM4rD,WAAN,CAAkBrqD,IAAlB,CAAwB,IAAxB,CAA8B,UAAU06B,iBAAV,CAA6B,EAA7B,CAAiC,CAAjC,CAAoC,GAApC,CAAyC,GAAzC,CAA9B,EAEA,CAJD,CAMAj8B,MAAM0sD,eAAN,CAAsBjsD,SAAtB,CAAkCE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAM4rD,WAAN,CAAkBnrD,SAAjC,CAAf,CAA6D,CAE9FoJ,YAAa7J,MAAM0sD,eAF2E,CAI9F39C,OAAQ,gBAAWq9C,KAAX,CAAmB,CAE1B,QAAUpsD,MAAMI,IAAN,CAAWyvB,OAAX,CAAqB,CAArB,CAAyBu8B,MAAMx8C,KAAzC,CACA,WAAa,KAAKk8C,OAAL,CAAapB,KAAb,CAAqB,KAAKoB,OAAL,CAAanB,MAA/C,CACA,QAAUyB,MAAMxwC,QAAN,EAAkB,GAA5B,CAEA,WAAa,KAAKjE,MAAlB,CAEA,GAAKyQ,MAAQzQ,OAAOyQ,GAAf,EAAsBC,SAAW1Q,OAAO0Q,MAAxC,EAAkDH,MAAQvQ,OAAOuQ,GAAtE,CAA4E,CAE3EvQ,OAAOyQ,GAAP,CAAaA,GAAb,CACAzQ,OAAO0Q,MAAP,CAAgBA,MAAhB,CACA1Q,OAAOuQ,GAAP,CAAaA,GAAb,CACAvQ,OAAO6xC,sBAAP,GAEA,CAED,CArB6F,CAA7D,CAAlC;;;IA+BAxpD,MAAM2sD,WAAN,CAAoB,SAAWC,OAAX,CAAqB,CAExC,KAAKA,OAAL,CAAiBA,UAAYzsD,SAAd,CAA4BysD,OAA5B,CAAsC5sD,MAAM6sD,qBAA3D,CAEA,CAJD,CAMA7sD,MAAM2sD,WAAN,CAAkBlsD,SAAlB,CAA8B,CAE7BoJ,YAAa7J,MAAM2sD,WAFU,CAI7BG,KAAM,cAAWC,GAAX,CAAgBC,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEnD,WAAa,UAAUC,SAAV,CAAqB,KAAKP,OAA1B,CAAb,CACAQ,OAAOC,eAAP,CAAwB,aAAxB,EACAD,OAAON,IAAP,CAAaC,GAAb,CAAkB,SAAWrsC,MAAX,CAAoB,CAErC,YAAc1gB,MAAMumD,YAApB,CAEA1C,QAAQyJ,eAAR,CAAyB5sC,MAAzB,CAAiC,SAAWqkC,WAAX,CAAyB,CAEzDiI,OAAQjI,WAAR,EAEA,CAJD,EAMA,CAVD,CAUGkI,UAVH,CAUeC,OAVf,EAYA,CApB4B,CAA9B;;;IA8BAltD,MAAMutD,KAAN,CAAc,CAEbpkB,QAAS,KAFI,CAIbqkB,MAAO,EAJM,CAMbpgD,IAAK,aAAWozB,GAAX,CAAgBitB,IAAhB,CAAuB,CAE3B,GAAK,KAAKtkB,OAAL,GAAiB,KAAtB,CAA8B;CAI9B,KAAKqkB,KAAL,CAAYhtB,GAAZ,EAAoBitB,IAApB,CAEA,CAdY,CAgBb5sD,IAAK,aAAW2/B,GAAX,CAAiB,CAErB,GAAK,KAAK2I,OAAL,GAAiB,KAAtB,CAA8B;CAI9B,YAAYqkB,KAAL,CAAYhtB,GAAZ,CAAP,CAEA,CAxBY,CA0Bb9B,OAAQ,gBAAW8B,GAAX,CAAiB,CAExB,YAAYgtB,KAAL,CAAYhtB,GAAZ,CAAP,CAEA,CA9BY,CAgCbktB,MAAO,gBAAY,CAElB,KAAKF,KAAL,CAAa,EAAb,CAEA,CApCY,CAAd;;;IA8CAxtD,MAAM2tD,MAAN,CAAe,UAAY,CAE1B,KAAKC,WAAL,CAAmB,UAAY,EAA/B,CACA,KAAKC,cAAL,CAAsB,UAAY,EAAlC,CACA,KAAKC,cAAL,CAAsB,UAAY,EAAlC,CAEA,CAND,CAQA9tD,MAAM2tD,MAAN,CAAaltD,SAAb,CAAyB,CAExBoJ,YAAa7J,MAAM2tD,MAFK,CAIxBI,YAAa5tD,SAJW,CAMxB6tD,eAAgB,wBAAWjB,GAAX,CAAiB,CAEhC,UAAYA,IAAIh9B,KAAJ,CAAW,GAAX,CAAZ,CAEA,GAAK4kB,MAAMvzC,MAAN,GAAiB,CAAtB,CAA0B,OAAO,IAAP,CAE1BuzC,MAAM4D,GAAN,GAEA,aAAanoB,IAAN,CAAY,GAAZ,EAAoB,GAA3B,CAEA,CAhBuB,CAkBxB69B,cAAe,uBAAWpuB,SAAX,CAAsBquB,WAAtB,CAAmCH,WAAnC,CAAiD,CAE/D,UAAY,EAAZ,CAEA,IAAM,MAAQ,CAAd,CAAiBlxC,EAAIgjB,UAAUz+B,MAA/B,CAAuC,EAAGyb,CAA1C,CAA8C,CAE7C7O,MAAO6O,CAAP,EAAa,KAAKsxC,cAAL,CAAqBtuB,UAAWhjB,CAAX,CAArB,CAAqCqxC,WAArC,CAAkDH,WAAlD,CAAb,CAEA,CAED,YAAA,CAEA,CA9BuB,CAgCxBI,eAAkB,UAAY,CAE7B,SAAA,CAAWC,aAAX,CAA0BC,cAA1B,CAEA,gBAAkBhjD,CAAX,CAAc6iD,WAAd,CAA2BH,WAA3B,CAAyC,CAE/C,GAAKxiD,QAAUpL,SAAf,CAA2BoL,MAAQ,UAAUhC,KAAV,EAAR,CAC3B,GAAK6kD,gBAAkBjuD,SAAvB,CAAmCiuD,cAAgB,UAAUE,aAAV,EAAhB,CACnC,GAAKD,iBAAmBluD,SAAxB,CAAoCkuD,eAAiB,UAAUE,cAAV,EAAjB;CAIpC,aAAe,EAAf,CAEA,oBAAA,CAAsB/U,IAAtB,CAA4BgV,MAA5B,CAAoCvgD,MAApC,CAA4CwgD,IAA5C,CAAkDC,UAAlD,CAA+D,CAE9D,aAAeR,YAAc1U,IAA7B,CACA,WAAax5C,MAAM2tD,MAAN,CAAagB,QAAb,CAAsB9tD,GAAtB,CAA2B+tD,QAA3B,CAAb,CAEA,WAAA,CAEA,GAAKxB,SAAW,IAAhB,CAAuB,CAEtBlE,QAAUkE,OAAON,IAAP,CAAa8B,QAAb,CAAV,CAEA,CAJD,IAIO,CAENR,cAAcS,cAAd,CAA8Bd,WAA9B,EACA7E,QAAUkF,cAActB,IAAd,CAAoB8B,QAApB,CAAV,CAEA,CAED,GAAKJ,SAAWruD,SAAhB,CAA4B,CAE3B+oD,QAAQsF,MAAR,CAAezgD,SAAf,CAA0BygD,MAA1B,EAEA,GAAKA,OAAQ,CAAR,IAAgB,CAArB,CAAyBtF,QAAQ4F,KAAR,CAAgB9uD,MAAM6F,cAAtB,CACzB,GAAK2oD,OAAQ,CAAR,IAAgB,CAArB,CAAyBtF,QAAQ6F,KAAR,CAAgB/uD,MAAM6F,cAAtB,CAEzB,CAED,GAAKoI,SAAW9N,SAAhB,CAA4B,CAE3B+oD,QAAQj7C,MAAR,CAAeF,SAAf,CAA0BE,MAA1B,EAEA,CAED,GAAKwgD,OAAStuD,SAAd,CAA0B,CAEzB,GAAKsuD,KAAM,CAAN,IAAc,QAAnB,CAA8BvF,QAAQ4F,KAAR,CAAgB9uD,MAAM6F,cAAtB,CAC9B,GAAK4oD,KAAM,CAAN,IAAc,QAAnB,CAA8BvF,QAAQ4F,KAAR,CAAgB9uD,MAAM+F,sBAAtB,CAE9B,GAAK0oD,KAAM,CAAN,IAAc,QAAnB,CAA8BvF,QAAQ6F,KAAR,CAAgB/uD,MAAM6F,cAAtB,CAC9B,GAAK4oD,KAAM,CAAN,IAAc,QAAnB,CAA8BvF,QAAQ6F,KAAR,CAAgB/uD,MAAM+F,sBAAtB,CAE9B,CAED,GAAK2oD,aAAevuD,SAApB,CAAgC,CAE/B+oD,QAAQwF,UAAR,CAAqBA,UAArB,CAEA,CAED,SAAW1uD,MAAMI,IAAN,CAAW0vB,YAAX,EAAX,CAEAgQ,SAAU9P,IAAV,EAAmBk5B,OAAnB,CAEA,WAAA,CAEA;CAID,SAAW,CACVl5B,KAAMhwB,MAAMI,IAAN,CAAW0vB,YAAX,EADI,CAEV6J,KAAM,qBAFI,CAAX,CAKA,IAAM,QAAN,KAAA,CAAsB,CAErB,UAAYtuB,EAAG3K,IAAH,CAAZ,CAEA,OAASA,IAAT,EACC,IAAK,UAAL,CACA,IAAK,UAAL,CACA,IAAK,gBAAL,CACA,IAAK,cAAL,CACC,MACD,IAAK,SAAL,CACC4yC,KAAK5yC,IAAL,CAAYoJ,KAAZ,CACA,MACD,IAAK,UAAL,CACCwpC,KAAK0b,QAAL,CAAgBhvD,MAAO8J,KAAP,CAAhB,CACA,MACD,IAAK,cAAL,CACA,IAAK,YAAL,CACCqB,QAAQC,IAAR,CAAc,8BAAd,CAA8C1K,IAA9C,CAAoD,yBAApD,EACA,MACD,IAAK,cAAL,CACC4yC,KAAK/nC,KAAL,CAAaA,MAAMwC,SAAN,CAAiBjE,KAAjB,EAAyByC,MAAzB,EAAb,CACA,MACD,IAAK,eAAL,CACC+mC,KAAK2b,QAAL,CAAgB1jD,MAAMwC,SAAN,CAAiBjE,KAAjB,EAAyByC,MAAzB,EAAhB,CACA,MACD,IAAK,eAAL,CACC+mC,KAAK4b,QAAL,CAAgB3jD,MAAMwC,SAAN,CAAiBjE,KAAjB,EAAyByC,MAAzB,EAAhB,CACA,MACD,IAAK,cAAL,CACC+mC,KAAK6b,SAAL,CAAiBrlD,KAAjB,CACA,MACD,IAAK,SAAL,CACC,GAAKA,MAAMi2C,WAAN,KAAwB,OAA7B,CAAuCzM,KAAK3Z,IAAL,CAAY,mBAAZ,CACvC,GAAK7vB,MAAMi2C,WAAN,KAAwB,OAA7B,CAAuCzM,KAAK3Z,IAAL,CAAY,mBAAZ,CACvC,MACD,IAAK,YAAL,CACC2Z,KAAKyY,GAAL,CAAWqD,YAAatlD,KAAb,CAAoBuB,EAAEgkD,gBAAtB,CAAwChkD,EAAEikD,gBAA1C,CAA4DjkD,EAAEkkD,cAA9D,CAA8ElkD,EAAEmkD,oBAAhF,CAAX,CACA,MACD,IAAK,kBAAL,CACA,IAAK,kBAAL,CACA,IAAK,gBAAL,CACA,IAAK,sBAAL,CACC,MACD,IAAK,UAAL,CACClc,KAAKmc,QAAL,CAAgBL,YAAatlD,KAAb,CAAoBuB,EAAEqkD,cAAtB,CAAsCrkD,EAAEskD,cAAxC,CAAwDtkD,EAAEukD,YAA1D,CAAwEvkD,EAAEwkD,kBAA1E,CAAhB,CACA,MACD,IAAK,gBAAL,CACA,IAAK,gBAAL,CACA,IAAK,cAAL,CACA,IAAK,oBAAL,CACC,MACD,IAAK,OAAL,CACCvc,KAAKwc,KAAL,CAAaV,YAAatlD,KAAb,CAAoBuB,EAAE0kD,WAAtB,CAAmC1kD,EAAE2kD,WAArC,CAAkD3kD,EAAE4kD,SAApD,CAA+D5kD,EAAE6kD,eAAjE,CAAb,CACA,MACD,IAAK,aAAL,CACA,IAAK,aAAL,CACA,IAAK,WAAL,CACA,IAAK,iBAAL,CACC,MACD,IAAK,SAAL,CACC5c,KAAK6c,OAAL,CAAef,YAAatlD,KAAb,CAAoBuB,EAAE+kD,aAAtB,CAAqC/kD,EAAEglD,aAAvC,CAAsDhlD,EAAEilD,WAAxD,CAAqEjlD,EAAEklD,iBAAvE,CAAf,CACA,MACD,IAAK,cAAL,CACCjd,KAAKkd,SAAL,CAAiB1mD,KAAjB,CACA,MACD,IAAK,eAAL,CACA,IAAK,eAAL,CACA,IAAK,aAAL,CACA,IAAK,mBAAL,CACC,MACD,IAAK,WAAL,CACCwpC,KAAKmd,SAAL,CAAiBrB,YAAatlD,KAAb,CAAoBuB,EAAEqlD,eAAtB,CAAuCrlD,EAAEslD,eAAzC,CAA0DtlD,EAAEulD,aAA5D,CAA2EvlD,EAAEwlD,mBAA7E,CAAjB,CACA,MACD,IAAK,iBAAL,CACCvd,KAAKwd,WAAL,CAAmB,CAAEhnD,KAAF,CAASA,KAAT,CAAnB,CACA,MACD,IAAK,iBAAL,CACA,IAAK,iBAAL,CACA,IAAK,eAAL,CACA,IAAK,qBAAL,CACC,MACD,IAAK,aAAL,CACCwpC,KAAKyd,WAAL,CAAmB3B,YAAatlD,KAAb,CAAoBuB,EAAE2lD,iBAAtB,CAAyC3lD,EAAE4lD,iBAA3C,CAA8D5lD,EAAE6lD,eAAhE,CAAiF7lD,EAAE8lD,qBAAnF,CAAnB,CACA,MACD,IAAK,mBAAL,CACA,IAAK,mBAAL,CACA,IAAK,iBAAL,CACA,IAAK,uBAAL,CACC,MACD,IAAK,UAAL,CACC7d,KAAK8d,QAAL,CAAgBhC,YAAatlD,KAAb,CAAoBuB,EAAEgmD,cAAtB,CAAsChmD,EAAEimD,cAAxC,CAAwDjmD,EAAEkmD,YAA1D,CAAwElmD,EAAEmmD,kBAA1E,CAAhB,CACA,MACD,IAAK,gBAAL,CACA,IAAK,gBAAL,CACA,IAAK,cAAL,CACA,IAAK,oBAAL,CACC,MACD,IAAK,WAAL,CACCle,KAAKme,IAAL,CAAYzxD,MAAMwC,QAAlB,CACA,MACD,IAAK,aAAL,CACC8wC,KAAKme,IAAL,CAAYzxD,MAAMyC,UAAlB,CACA,MACD,IAAK,cAAL,CACC0I,QAAQC,IAAR,CAAc,uEAAd,EACAkoC,KAAKoe,OAAL,CAAe5nD,KAAf,CACA,MACD,IAAK,WAAL,CACA,IAAK,YAAL,CACA,IAAK,YAAL,CACA,IAAK,SAAL,CACA,IAAK,cAAL,CACA,IAAK,aAAL,CACA,IAAK,SAAL,CACA,IAAK,WAAL,CACCwpC,KAAM5yC,IAAN,EAAeoJ,KAAf,CACA,MACD,IAAK,cAAL,CACC,GAAKA,QAAU,IAAf,CAAsBwpC,KAAKxS,YAAL,CAAoB9gC,MAAM8C,YAA1B,CACtB,GAAKgH,QAAU,MAAf,CAAwBwpC,KAAKxS,YAAL,CAAoB9gC,MAAM6C,UAA1B,CACxB,MACD,QACCsI,QAAQuL,KAAR,CAAe,0CAAf,CAA2DhW,IAA3D,CAAiEoJ,KAAjE,EACA,MAxHF,CA2HA,CAED,GAAKwpC,KAAK3Z,IAAL,GAAc,mBAAnB,CAAyC,YAAYu1B,QAAZ,CACzC,GAAK5b,KAAK3Z,IAAL,GAAc,mBAAnB,CAAyC,YAAYs1B,QAAZ,CAEzC,GAAK3b,KAAKoe,OAAL,CAAe,CAApB,CAAwBpe,KAAKqe,WAAL,CAAmB,IAAnB,CAExBtD,eAAeuD,WAAf,CAA4B9xB,QAA5B,EAEA,sBAAsBY,KAAf,CAAsB4S,IAAtB,CAAP,CAEA,CApND,CAsNA,CA1Ne,EAhCQ,CAAzB,CA8PAtzC,MAAM2tD,MAAN,CAAagB,QAAb,CAAwB,CAEvBkD,SAAU,EAFa,CAIvBzkD,IAAK,aAAW0kD,KAAX,CAAkB1E,MAAlB,CAA2B,CAE/B,KAAKyE,QAAL,CAAch+B,IAAd,CAAoBi+B,KAApB,CAA2B1E,MAA3B,EAEA,CARsB,CAUvBvsD,IAAK,aAAW4sD,IAAX,CAAkB,CAEtB,aAAe,KAAKoE,QAApB,CAEA,IAAM,MAAQ,CAAR,CAAWjnD,EAAIinD,SAASzwD,MAA9B,CAAsCyb,EAAIjS,CAA1C,CAA6CiS,GAAK,CAAlD,CAAsD,CAErD,UAAYg1C,SAAUh1C,CAAV,CAAZ,CACA,WAAcg1C,SAAUh1C,EAAI,CAAd,CAAd,CAEA,GAAKi1C,MAAMl3B,IAAN,CAAY6yB,IAAZ,CAAL,CAA0B,CAEzB,aAAA,CAEA,CAED,CAED,WAAA,CAEA,CA7BsB,CAAxB;;;IAuCAztD,MAAMmtD,SAAN,CAAkB,SAAWP,OAAX,CAAqB,CAEtC,KAAKA,OAAL,CAAiBA,UAAYzsD,SAAd,CAA4BysD,OAA5B,CAAsC5sD,MAAM6sD,qBAA3D,CAEA,CAJD,CAMA7sD,MAAMmtD,SAAN,CAAgB1sD,SAAhB,CAA4B,CAE3BoJ,YAAa7J,MAAMmtD,SAFQ,CAI3BL,KAAM,cAAWC,GAAX,CAAgBC,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEnD,GAAK,KAAK1T,IAAL,GAAcr5C,SAAnB,CAA+B4sD,IAAM,KAAKvT,IAAL,CAAYuT,GAAlB,CAE/B,UAAY,IAAZ,CAEA,WAAa/sD,MAAMutD,KAAN,CAAY1sD,GAAZ,CAAiBksD,GAAjB,CAAb,CAEA,GAAKgF,SAAW5xD,SAAhB,CAA4B,CAE3B,GAAK6sD,MAAL,CAAc,CAEbgF,WAAY,UAAY,CAEvBhF,OAAQ+E,MAAR,EAEA,CAJD,CAIG,CAJH,EAMA,CAED,aAAA,CAEA,CAED,YAAc,kBAAA,EAAd,CACAE,QAAQC,gBAAR,CAA0B,YAA1B,EACAD,QAAQE,IAAR,CAAc,KAAd,CAAqBpF,GAArB,CAA0B,IAA1B,EAEAkF,QAAQv4B,gBAAR,CAA0B,MAA1B,CAAkC,SAAWW,KAAX,CAAmB,CAEpD,aAAeA,MAAMp5B,MAAN,CAAamxD,QAA5B,CAEApyD,MAAMutD,KAAN,CAAYngD,GAAZ,CAAiB2/C,GAAjB,CAAsBqF,QAAtB,EAEA,GAAK,KAAKC,MAAL,GAAgB,GAArB,CAA2B,CAE1B,GAAKrF,MAAL,CAAcA,OAAQoF,QAAR,EAEdtzC,MAAM8tC,OAAN,CAAc0F,OAAd,CAAuBvF,GAAvB,EAEA,CAND,QAMY,KAAKsF,MAAL,GAAgB,CAArB,CAAyB;;CAK/BlnD,QAAQC,IAAR,CAAc,0CAAd,EAEA,GAAK4hD,MAAL,CAAcA,OAAQoF,QAAR,EAEdtzC,MAAM8tC,OAAN,CAAc0F,OAAd,CAAuBvF,GAAvB,EAEA,CAXM,IAWA,CAEN,GAAKG,OAAL,CAAeA,QAAS7yB,KAAT,EAEfvb,MAAM8tC,OAAN,CAAc2F,SAAd,CAAyBxF,GAAzB,EAEA,CAED,CA/BD,CA+BG,KA/BH,EAiCA,GAAKE,aAAe9sD,SAApB,CAAgC,CAE/B8xD,QAAQv4B,gBAAR,CAA0B,UAA1B,CAAsC,SAAWW,KAAX,CAAmB,CAExD4yB,WAAY5yB,KAAZ,EAEA,CAJD,CAIG,KAJH,EAMA,CAED43B,QAAQv4B,gBAAR,CAA0B,OAA1B,CAAmC,SAAWW,KAAX,CAAmB,CAErD,GAAK6yB,OAAL,CAAeA,QAAS7yB,KAAT,EAEfvb,MAAM8tC,OAAN,CAAc2F,SAAd,CAAyBxF,GAAzB,EAEA,CAND,CAMG,KANH,EAQA,GAAK,KAAKyF,YAAL,GAAsBryD,SAA3B,CAAuC8xD,QAAQO,YAAR,CAAuB,KAAKA,YAA5B,CACvC,GAAK,KAAKC,eAAL,GAAyBtyD,SAA9B,CAA0C8xD,QAAQQ,eAAR,CAA0B,KAAKA,eAA/B,CAE1CR,QAAQS,IAAR,CAAc,IAAd,EAEA5zC,MAAM8tC,OAAN,CAAc+F,SAAd,CAAyB5F,GAAzB,EAEA,cAAA,CAEA,CA5F0B,CA8F3B6F,QAAS,iBAAW9oD,KAAX,CAAmB,CAE3B,KAAK0vC,IAAL,CAAY1vC,KAAZ,CAEA,CAlG0B,CAoG3BujD,gBAAiB,yBAAWvjD,KAAX,CAAmB,CAEnC,KAAK0oD,YAAL,CAAoB1oD,KAApB,CAEA,CAxG0B,CA0G3B+oD,mBAAoB,4BAAW/oD,KAAX,CAAmB,CAEtC,KAAK2oD,eAAL,CAAuB3oD,KAAvB,CAEA,CA9G0B,CAA5B;;;IAwHA9J,MAAM8yD,UAAN,CAAmB,SAAWlG,OAAX,CAAqB,CAEvC,KAAKA,OAAL,CAAiBA,UAAYzsD,SAAd,CAA4BysD,OAA5B,CAAsC5sD,MAAM6sD,qBAA3D,CAEA,CAJD,CAMA7sD,MAAM8yD,UAAN,CAAiBryD,SAAjB,CAA6B,CAE5BoJ,YAAa7J,MAAM8yD,UAFS,CAI5BhG,KAAM,cAAWC,GAAX,CAAgBC,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEnD,UAAY,IAAZ,CAEA,WAAa,UAAUC,SAAV,CAAqB,KAAKP,OAA1B,CAAb,CACAQ,OAAON,IAAP,CAAaC,GAAb,CAAkB,SAAWgG,IAAX,CAAkB,CAEnC,QAAA,CAEA,GAAI,CAEHzf,KAAOnT,KAAKO,KAAL,CAAYqyB,IAAZ,CAAP,CAEA,CAAC,MAAQj8C,CAAR,CAAY,CAEb3L,QAAQC,IAAR,CAAc,uFAAd,EACAkoC,KAAOnT,KAAKO,KAAL,CAAYqyB,KAAKC,SAAL,CAAgB,EAAhB,CAAoBD,KAAK3xD,MAAL,CAAc,CAAlC,CAAZ,CAAP,CAEA,CAED,SAAW0d,MAAM4hB,KAAN,CAAa4S,IAAb,CAAX,CAEA,GAAK0Z,MAAL,CAAcA,OAAQiG,IAAR,EAEd,CAnBD,CAmBGhG,UAnBH,CAmBeC,OAnBf,EAqBA,CA9B2B,CAgC5BxsB,MAAO,eAAW4S,IAAX,CAAkB,CAExB,iBAAiB4f,IAAV,CAAgB5f,IAAhB,CAAP,CAEA,CApC2B,CAA7B;;;IA8CAtzC,MAAMmzD,WAAN,CAAoB,SAAWvG,OAAX,CAAqB,CAExC,KAAKA,OAAL,CAAiBA,UAAYzsD,SAAd,CAA4BysD,OAA5B,CAAsC5sD,MAAM6sD,qBAA3D,CAEA,CAJD,CAMA7sD,MAAMmzD,WAAN,CAAkB1yD,SAAlB,CAA8B,CAE7BoJ,YAAa7J,MAAMmzD,WAFU,CAI7BrG,KAAM,cAAWC,GAAX,CAAgBC,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEnD,GAAK,KAAK1T,IAAL,GAAcr5C,SAAnB,CAA+B4sD,IAAM,KAAKvT,IAAL,CAAYuT,GAAlB,CAE/B,UAAY,IAAZ,CAEA,WAAa/sD,MAAMutD,KAAN,CAAY1sD,GAAZ,CAAiBksD,GAAjB,CAAb,CAEA,GAAKgF,SAAW5xD,SAAhB,CAA4B,CAE3B2e,MAAM8tC,OAAN,CAAc+F,SAAd,CAAyB5F,GAAzB,EAEA,GAAKC,MAAL,CAAc,CAEbgF,WAAY,UAAY,CAEvBhF,OAAQ+E,MAAR,EAEAjzC,MAAM8tC,OAAN,CAAc0F,OAAd,CAAuBvF,GAAvB,EAEA,CAND,CAMG,CANH,EAQA,CAVD,IAUO,CAENjuC,MAAM8tC,OAAN,CAAc0F,OAAd,CAAuBvF,GAAvB,EAEA,CAED,aAAA,CAEA,CAED,UAAYqG,SAASC,aAAT,CAAwB,KAAxB,CAAZ,CAEAC,MAAM55B,gBAAN,CAAwB,MAAxB,CAAgC,SAAWW,KAAX,CAAmB,CAElDr6B,MAAMutD,KAAN,CAAYngD,GAAZ,CAAiB2/C,GAAjB,CAAsB,IAAtB,EAEA,GAAKC,MAAL,CAAcA,OAAQ,IAAR,EAEdluC,MAAM8tC,OAAN,CAAc0F,OAAd,CAAuBvF,GAAvB,EAEA,CARD,CAQG,KARH,EAUA,GAAKE,aAAe9sD,SAApB,CAAgC,CAE/BmzD,MAAM55B,gBAAN,CAAwB,UAAxB,CAAoC,SAAWW,KAAX,CAAmB,CAEtD4yB,WAAY5yB,KAAZ,EAEA,CAJD,CAIG,KAJH,EAMA,CAEDi5B,MAAM55B,gBAAN,CAAwB,OAAxB,CAAiC,SAAWW,KAAX,CAAmB,CAEnD,GAAK6yB,OAAL,CAAeA,QAAS7yB,KAAT,EAEfvb,MAAM8tC,OAAN,CAAc2F,SAAd,CAAyBxF,GAAzB,EAEA,CAND,CAMG,KANH,EAQA,GAAK,KAAKgB,WAAL,GAAqB5tD,SAA1B,CAAsCmzD,MAAMvF,WAAN,CAAoB,KAAKA,WAAzB,CAEtCjvC,MAAM8tC,OAAN,CAAc+F,SAAd,CAAyB5F,GAAzB,EAEAuG,MAAMC,GAAN,CAAYxG,GAAZ,CAEA,YAAA,CAEA,CA1E4B,CA4E7B8B,eAAgB,wBAAW/kD,KAAX,CAAmB,CAElC,KAAKikD,WAAL,CAAmBjkD,KAAnB,CAEA,CAhF4B,CAkF7B8oD,QAAS,iBAAW9oD,KAAX,CAAmB,CAE3B,KAAK0vC,IAAL,CAAY1vC,KAAZ,CAEA,CAtF4B,CAA9B;;;;IAiGA9J,MAAMwzD,UAAN,CAAmB,SAAW5G,OAAX,CAAqB,CAEvC,GAAK,cAAA,GAAmB,SAAxB,CAAoC,CAEnCzhD,QAAQC,IAAR,CAAc,2EAAd,EACAwhD,QAAUzsD,SAAV,CAEA,CAED,KAAKysD,OAAL,CAAiBA,UAAYzsD,SAAd,CAA4BysD,OAA5B,CAAsC5sD,MAAM6sD,qBAA3D,CAEA,KAAK4F,eAAL,CAAuB,KAAvB,CAEA,CAbD,CAeAzyD,MAAMwzD,UAAN,CAAiB/yD,SAAjB,CAA6B,CAE5BoJ,YAAa7J,MAAMwzD,UAFS;CAM5B,oBAAA,EAAwB,CAEvB,GAAK,KAAKC,iBAAL,GAA2BtzD,SAAhC,CAA4C,CAE3C,KAAKszD,iBAAL,CAAyBL,SAASC,aAAT,CAAwB,KAAxB,CAAzB,CAEA,CAEDloD,QAAQC,IAAR,CAAc,uDAAd,EACA,YAAYqoD,iBAAZ,CAEA,CAjB2B,CAmB5B3G,KAAM,cAAUC,GAAV,CAAeC,MAAf,CAAuBC,UAAvB,CAAmCC,OAAnC,CAA6C,CAElD,UAAY,IAAZ,CAEA,gBAAkB,KAAKgB,WAAL,EAAsB,YAAYA,WAAZ,GAA4B,QAAlD,CAA+D,KAAKA,WAApE,CAAkFluD,MAAM2tD,MAAN,CAAaltD,SAAb,CAAuButD,cAAvB,CAAuCjB,GAAvC,CAApG,CAEA,WAAa,UAAUI,SAAV,CAAqB,KAAKP,OAA1B,CAAb,CACAQ,OAAOyF,kBAAP,CAA2B,KAAKJ,eAAhC,EACArF,OAAON,IAAP,CAAaC,GAAb,CAAkB,SAAWgG,IAAX,CAAkB,CAEnC,SAAW5yB,KAAKO,KAAL,CAAYqyB,IAAZ,CAAX,CACA,aAAezf,KAAKtT,QAApB,CAEA,GAAKA,WAAa7/B,SAAlB,CAA8B,CAE7B,SAAW6/B,SAASrG,IAApB,CAEA,GAAKA,OAASx5B,SAAd,CAA0B,CAEzB,GAAKw5B,KAAKomB,WAAL,KAAuB,QAA5B,CAAuC,CAEtC50C,QAAQuL,KAAR,CAAe,qBAAuBq2C,GAAvB,CAA6B,oDAA5C,EACA,OAEA,CAED,GAAKpzB,KAAKomB,WAAL,KAAuB,OAA5B,CAAsC,CAErC50C,QAAQuL,KAAR,CAAe,qBAAuBq2C,GAAvB,CAA6B,mDAA5C,EACA,OAEA,CAED,CAED,CAED,WAAajuC,MAAM4hB,KAAN,CAAa4S,IAAb,CAAmB4a,WAAnB,CAAb,CACAlB,OAAQzuC,OAAOI,QAAf,CAAyBJ,OAAOshB,SAAhC,EAEA,CAhCD,CAgCGotB,UAhCH,CAgCeC,OAhCf,EAkCA,CA7D2B,CA+D5BwG,eAAgB,wBAAW5pD,KAAX,CAAmB,CAElC,KAAKokD,WAAL,CAAmBpkD,KAAnB,CAEA,CAnE2B,CAqE5B42B,MAAO,eAAW4S,IAAX,CAAiB4a,WAAjB,CAA+B,CAErC,aAAe,UAAUtvC,QAAV,EAAf,CACA6H,MAAU6sB,KAAK7sB,KAAL,GAAetmB,SAAjB,CAA+B,IAAMmzC,KAAK7sB,KAA1C,CAAkD,GAD1D,CAGAktC,WAAYltC,KAAZ,EAEAmtC,YACAC,cAAeptC,KAAf,EACAqtC,kBAEAn1C,SAAS0mB,kBAAT,GACA1mB,SAASyP,qBAAT,GAEA,mBAAA,CAAqB3H,KAArB,CAA6B,CAE5B,iBAAA,CAAmB3c,KAAnB,CAA0Byd,QAA1B,CAAqC,CAEpC,aAAiB,GAAKA,QAAtB,CAEA,CAED,KAAA,CAAO/G,CAAP,CAAUuzC,EAAV,CAEA9lD,MAFA,CAEQ+lD,OAFR,CAIDC,UAJC,CAIWC,WAJX,CAIwBC,OAJxB,CAIiCvzB,aAJjC,CAMAjH,IANA,CAOAy6B,MAPA,CAQA3rB,WARA,CASAE,eATA,CAUAC,aAVA,CAUeC,mBAVf,CAWAC,YAXA,CAWcC,kBAXd,CAaD3E,MAbC,CAaOC,IAbP,CAaagwB,KAbb,CAaoBC,KAbpB,CAa2BlqD,GAb3B,CAagC4O,MAbhC,CAeAu7C,OAfA,CAeS7vB,EAfT,CAeahQ,CAfb,CAegBnjB,CAfhB,CAiBA8xB,MAAQiQ,KAAKjQ,KAjBb,CAkBAxkB,SAAWy0B,KAAKz0B,QAlBhB,CAmBAgmB,QAAUyO,KAAKzO,OAnBf,CAoBAnD,OAAS4R,KAAK5R,MApBd,CAsBA8yB,UAAY,CAtBZ,CAwBA,GAAKlhB,KAAKvO,GAAL,GAAa5kC,SAAlB,CAA8B;CAI7B,IAAM0c,EAAI,CAAV,CAAaA,EAAIy2B,KAAKvO,GAAL,CAAS3jC,MAA1B,CAAkCyb,GAAlC,CAAyC,CAExC,GAAKy2B,KAAKvO,GAAL,CAAUloB,CAAV,EAAczb,MAAnB,CAA4BozD,YAE5B,CAED,IAAM33C,EAAI,CAAV,CAAaA,EAAI23C,SAAjB,CAA4B33C,GAA5B,CAAmC,CAElC8B,SAAS2kB,aAAT,CAAwBzmB,CAAxB,EAA8B,EAA9B,CAEA,CAED,CAED5O,OAAS,CAAT,CACA+lD,QAAUn1C,SAASzd,MAAnB,CAEA,MAAQ6M,OAAS+lD,OAAjB,CAA2B,CAE1B5vB,OAAS,UAAUrzB,OAAV,EAAT,CAEAqzB,OAAO7jC,CAAP,CAAWse,SAAU5Q,QAAV,EAAwBwY,KAAnC,CACA2d,OAAOh2B,CAAP,CAAWyQ,SAAU5Q,QAAV,EAAwBwY,KAAnC,CACA2d,OAAO/1B,CAAP,CAAWwQ,SAAU5Q,QAAV,EAAwBwY,KAAnC,CAEA9H,SAASE,QAAT,CAAkBgV,IAAlB,CAAwBuQ,MAAxB,EAEA,CAEDn2B,OAAS,CAAT,CACA+lD,QAAU3wB,MAAMjiC,MAAhB,CAEA,MAAQ6M,OAAS+lD,OAAjB,CAA2B,CAE1Br6B,KAAO0J,MAAOp1B,QAAP,CAAP,CAGAmmD,OAAsBK,SAAU96B,IAAV,CAAgB,CAAhB,CAAtB,CACA8O,YAAsBgsB,SAAU96B,IAAV,CAAgB,CAAhB,CAAtB,CACAgP,gBAAsB8rB,SAAU96B,IAAV,CAAgB,CAAhB,CAAtB,CACAiP,cAAsB6rB,SAAU96B,IAAV,CAAgB,CAAhB,CAAtB,CACAkP,oBAAsB4rB,SAAU96B,IAAV,CAAgB,CAAhB,CAAtB,CACAmP,aAAoB2rB,SAAU96B,IAAV,CAAgB,CAAhB,CAApB,CACAoP,mBAAsB0rB,SAAU96B,IAAV,CAAgB,CAAhB,CAAtB;CAIA,GAAKy6B,MAAL,CAAc,CAEbC,MAAQ,UAAU1zB,KAAV,EAAR,CACA0zB,MAAM1iD,CAAN,CAAU0xB,MAAOp1B,MAAP,CAAV,CACAomD,MAAM3qD,CAAN,CAAU25B,MAAOp1B,OAAS,CAAhB,CAAV,CACAomD,MAAMvmD,CAAN,CAAUu1B,MAAOp1B,OAAS,CAAhB,CAAV,CAEAqmD,MAAQ,UAAU3zB,KAAV,EAAR,CACA2zB,MAAM3iD,CAAN,CAAU0xB,MAAOp1B,OAAS,CAAhB,CAAV,CACAqmD,MAAM5qD,CAAN,CAAU25B,MAAOp1B,OAAS,CAAhB,CAAV,CACAqmD,MAAMxmD,CAAN,CAAUu1B,MAAOp1B,OAAS,CAAhB,CAAV,CAEAA,QAAU,CAAV,CAEA,GAAKw6B,WAAL,CAAmB,CAElB7H,cAAgByC,MAAOp1B,QAAP,CAAhB,CACAomD,MAAMzzB,aAAN,CAAsBA,aAAtB,CACA0zB,MAAM1zB,aAAN,CAAsBA,aAAtB,CAEA;CAIDmzB,GAAKp1C,SAAS0kB,KAAT,CAAejiC,MAApB,CAEA,GAAKunC,eAAL,CAAuB,CAEtB,IAAM9rB,EAAI,CAAV,CAAaA,EAAI23C,SAAjB,CAA4B33C,GAA5B,CAAmC,CAElC03C,QAAUjhB,KAAKvO,GAAL,CAAUloB,CAAV,CAAV,CAEA8B,SAAS2kB,aAAT,CAAwBzmB,CAAxB,EAA6Bk3C,EAA7B,EAAoC,EAApC,CACAp1C,SAAS2kB,aAAT,CAAwBzmB,CAAxB,EAA6Bk3C,GAAK,CAAlC,EAAwC,EAAxC,CAEA,IAAMvzC,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAE1B2zC,QAAU9wB,MAAOp1B,QAAP,CAAV,CAEAymB,EAAI6/B,QAASJ,QAAU,CAAnB,CAAJ,CACA5iD,EAAIgjD,QAASJ,QAAU,CAAV,CAAc,CAAvB,CAAJ,CAEAzvB,GAAK,UAAUtwB,OAAV,CAAmBsgB,CAAnB,CAAsBnjB,CAAtB,CAAL,CAEA,GAAKiP,IAAM,CAAX,CAAe7B,SAAS2kB,aAAT,CAAwBzmB,CAAxB,EAA6Bk3C,EAA7B,EAAkClgC,IAAlC,CAAwC6Q,EAAxC,EACf,GAAKlkB,IAAM,CAAX,CAAe7B,SAAS2kB,aAAT,CAAwBzmB,CAAxB,EAA6Bk3C,GAAK,CAAlC,EAAsClgC,IAAtC,CAA4C6Q,EAA5C,EAEf,CAED,CAED,CAED,GAAKkE,aAAL,CAAqB,CAEpBsrB,YAAc7wB,MAAOp1B,QAAP,EAAqB,CAAnC,CAEAomD,MAAMr7C,MAAN,CAAarP,GAAb,CACCk7B,QAASqvB,aAAT,CADD,CAECrvB,QAASqvB,aAAT,CAFD,CAGCrvB,QAASqvB,WAAT,CAHD,EAMAI,MAAMt7C,MAAN,CAAajP,IAAb,CAAmBsqD,MAAMr7C,MAAzB,EAEA,CAED,GAAK6vB,mBAAL,CAA2B,CAE1B,IAAMhsB,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAE1Bq3C,YAAc7wB,MAAOp1B,QAAP,EAAqB,CAAnC,CAEA+K,OAAS,UAAUjI,OAAV,CACR8zB,QAASqvB,aAAT,CADQ,CAERrvB,QAASqvB,aAAT,CAFQ,CAGRrvB,QAASqvB,WAAT,CAHQ,CAAT,CAOA,GAAKr3C,IAAM,CAAX,CAAew3C,MAAMxzB,aAAN,CAAoBhN,IAApB,CAA0B7a,MAA1B,EACf,GAAK6D,IAAM,CAAX,CAAey3C,MAAMzzB,aAAN,CAAoBhN,IAApB,CAA0B7a,MAA1B,EAEf,CAED,CAGD,GAAK8vB,YAAL,CAAoB,CAEnBmrB,WAAa5wB,MAAOp1B,QAAP,CAAb,CACA7D,IAAMs3B,OAAQuyB,UAAR,CAAN,CAEAI,MAAM9oD,KAAN,CAAYvB,MAAZ,CAAoBI,GAApB,EACAkqD,MAAM/oD,KAAN,CAAYvB,MAAZ,CAAoBI,GAApB,EAEA,CAGD,GAAK2+B,kBAAL,CAA0B,CAEzB,IAAMlsB,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAE1Bo3C,WAAa5wB,MAAOp1B,QAAP,CAAb,CACA7D,IAAMs3B,OAAQuyB,UAAR,CAAN,CAEA,GAAKp3C,IAAM,CAAX,CAAew3C,MAAMvzB,YAAN,CAAmBjN,IAAnB,CAAyB,UAAUtqB,KAAV,CAAiBa,GAAjB,CAAzB,EACf,GAAKyS,IAAM,CAAX,CAAey3C,MAAMxzB,YAAN,CAAmBjN,IAAnB,CAAyB,UAAUtqB,KAAV,CAAiBa,GAAjB,CAAzB,EAEf,CAED,CAEDuU,SAAS0kB,KAAT,CAAexP,IAAf,CAAqBwgC,KAArB,EACA11C,SAAS0kB,KAAT,CAAexP,IAAf,CAAqBygC,KAArB,EAEA,CApHD,IAoHO,CAENjwB,KAAO,UAAU1D,KAAV,EAAP,CACA0D,KAAK1yB,CAAL,CAAS0xB,MAAOp1B,QAAP,CAAT,CACAo2B,KAAK36B,CAAL,CAAS25B,MAAOp1B,QAAP,CAAT,CACAo2B,KAAKv2B,CAAL,CAASu1B,MAAOp1B,QAAP,CAAT,CAEA,GAAKw6B,WAAL,CAAmB,CAElB7H,cAAgByC,MAAOp1B,QAAP,CAAhB,CACAo2B,KAAKzD,aAAL,CAAqBA,aAArB,CAEA;CAIDmzB,GAAKp1C,SAAS0kB,KAAT,CAAejiC,MAApB,CAEA,GAAKunC,eAAL,CAAuB,CAEtB,IAAM9rB,EAAI,CAAV,CAAaA,EAAI23C,SAAjB,CAA4B33C,GAA5B,CAAmC,CAElC03C,QAAUjhB,KAAKvO,GAAL,CAAUloB,CAAV,CAAV,CAEA8B,SAAS2kB,aAAT,CAAwBzmB,CAAxB,EAA6Bk3C,EAA7B,EAAoC,EAApC,CAEA,IAAMvzC,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAE1B2zC,QAAU9wB,MAAOp1B,QAAP,CAAV,CAEAymB,EAAI6/B,QAASJ,QAAU,CAAnB,CAAJ,CACA5iD,EAAIgjD,QAASJ,QAAU,CAAV,CAAc,CAAvB,CAAJ,CAEAzvB,GAAK,UAAUtwB,OAAV,CAAmBsgB,CAAnB,CAAsBnjB,CAAtB,CAAL,CAEAoN,SAAS2kB,aAAT,CAAwBzmB,CAAxB,EAA6Bk3C,EAA7B,EAAkClgC,IAAlC,CAAwC6Q,EAAxC,EAEA,CAED,CAED,CAED,GAAKkE,aAAL,CAAqB,CAEpBsrB,YAAc7wB,MAAOp1B,QAAP,EAAqB,CAAnC,CAEAo2B,KAAKrrB,MAAL,CAAYrP,GAAZ,CACCk7B,QAASqvB,aAAT,CADD,CAECrvB,QAASqvB,aAAT,CAFD,CAGCrvB,QAASqvB,WAAT,CAHD,EAMA,CAED,GAAKrrB,mBAAL,CAA2B,CAE1B,IAAMhsB,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAE1Bq3C,YAAc7wB,MAAOp1B,QAAP,EAAqB,CAAnC,CAEA+K,OAAS,UAAUjI,OAAV,CACR8zB,QAASqvB,aAAT,CADQ,CAERrvB,QAASqvB,aAAT,CAFQ,CAGRrvB,QAASqvB,WAAT,CAHQ,CAAT,CAMA7vB,KAAKxD,aAAL,CAAmBhN,IAAnB,CAAyB7a,MAAzB,EAEA,CAED,CAGD,GAAK8vB,YAAL,CAAoB,CAEnBmrB,WAAa5wB,MAAOp1B,QAAP,CAAb,CACAo2B,KAAK94B,KAAL,CAAWvB,MAAX,CAAmB03B,OAAQuyB,UAAR,CAAnB,EAEA,CAGD,GAAKlrB,kBAAL,CAA0B,CAEzB,IAAMlsB,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAE1Bo3C,WAAa5wB,MAAOp1B,QAAP,CAAb,CACAo2B,KAAKvD,YAAL,CAAkBjN,IAAlB,CAAwB,UAAUtqB,KAAV,CAAiBm4B,OAAQuyB,UAAR,CAAjB,CAAxB,EAEA,CAED,CAEDt1C,SAAS0kB,KAAT,CAAexP,IAAf,CAAqBwQ,IAArB,EAEA,CAED,CAED,CAED,kBAAA,EAAqB,CAEpB,wBAA4BiP,KAAKohB,mBAAL,GAA6Bv0D,SAA/B,CAA6CmzC,KAAKohB,mBAAlD,CAAwE,CAAlG,CAEA,GAAKphB,KAAK7P,WAAV,CAAwB,CAEvB,IAAM,MAAQ,CAAR,CAAW74B,EAAI0oC,KAAK7P,WAAL,CAAiBriC,MAAtC,CAA8Cyb,EAAIjS,CAAlD,CAAqDiS,GAAK63C,mBAA1D,CAAgF,CAE/E,MAAsCphB,KAAK7P,WAAL,CAAkB5mB,CAAlB,CAAtC,CACA,MAAU63C,oBAAsB,CAAxB,CAA8BphB,KAAK7P,WAAL,CAAkB5mB,EAAI,CAAtB,CAA9B,CAA0D,CAAlE,CACA,MAAU63C,oBAAsB,CAAxB,CAA8BphB,KAAK7P,WAAL,CAAkB5mB,EAAI,CAAtB,CAA9B,CAA0D,CAAlE,CACA,MAAU63C,oBAAsB,CAAxB,CAA8BphB,KAAK7P,WAAL,CAAkB5mB,EAAI,CAAtB,CAA9B,CAA0D,CAAlE,CAEA8B,SAAS8kB,WAAT,CAAqB5P,IAArB,CAA2B,UAAU7Z,OAAV,CAAmBzZ,CAAnB,CAAsB6N,CAAtB,CAAyBC,CAAzB,CAA4BC,CAA5B,CAA3B,EAEA,CAED,CAED,GAAKglC,KAAK5P,WAAV,CAAwB,CAEvB,IAAM,MAAQ,CAAR,CAAW94B,EAAI0oC,KAAK5P,WAAL,CAAiBtiC,MAAtC,CAA8Cyb,EAAIjS,CAAlD,CAAqDiS,GAAK63C,mBAA1D,CAAgF,CAE/E,MAAsCphB,KAAK5P,WAAL,CAAkB7mB,CAAlB,CAAtC,CACA,MAAU63C,oBAAsB,CAAxB,CAA8BphB,KAAK5P,WAAL,CAAkB7mB,EAAI,CAAtB,CAA9B,CAA0D,CAAlE,CACA,MAAU63C,oBAAsB,CAAxB,CAA8BphB,KAAK5P,WAAL,CAAkB7mB,EAAI,CAAtB,CAA9B,CAA0D,CAAlE,CACA,MAAU63C,oBAAsB,CAAxB,CAA8BphB,KAAK5P,WAAL,CAAkB7mB,EAAI,CAAtB,CAA9B,CAA0D,CAAlE,CAEA8B,SAAS+kB,WAAT,CAAqB7P,IAArB,CAA2B,UAAU7Z,OAAV,CAAmBrI,CAAnB,CAAsBjI,CAAtB,CAAyBoE,CAAzB,CAA4BmJ,CAA5B,CAA3B,EAEA,CAED,CAED0H,SAASs2B,KAAT,CAAiB3B,KAAK2B,KAAtB,CAEA,GAAKt2B,SAASs2B,KAAT,EAAkBt2B,SAASs2B,KAAT,CAAe7zC,MAAf,CAAwB,CAA1C,GAAiDud,SAAS8kB,WAAT,CAAqBriC,MAArB,GAAgCud,SAAS+kB,WAAT,CAAqBtiC,MAArD,EAA+Dud,SAAS+kB,WAAT,CAAqBtiC,MAArB,GAAgCud,SAASE,QAAT,CAAkBzd,MAAlK,CAAL,CAAkL,CAEjL+J,QAAQC,IAAR,CAAc,sCAAwCuT,SAASE,QAAT,CAAkBzd,MAA1D,CAAmE,kBAAnE,CACbud,SAAS+kB,WAAT,CAAqBtiC,MADR,CACiB,sBADjB,CAC0Cud,SAAS8kB,WAAT,CAAqBriC,MAD/D,CACwE,iBADtF,EAGA,CAED,CAED,sBAAA,CAAwBqlB,KAAxB,CAAgC,CAE/B,GAAK6sB,KAAK/P,YAAL,GAAsBpjC,SAA3B,CAAuC,CAEtC,IAAM,MAAQ,CAAR,CAAWyK,EAAI0oC,KAAK/P,YAAL,CAAkBniC,MAAvC,CAA+Cyb,EAAIjS,CAAnD,CAAsDiS,GAAtD,CAA6D,CAE5D8B,SAAS4kB,YAAT,CAAuB1mB,CAAvB,EAA6B,EAA7B,CACA8B,SAAS4kB,YAAT,CAAuB1mB,CAAvB,EAA2Bnc,IAA3B,CAAkC4yC,KAAK/P,YAAL,CAAmB1mB,CAAnB,EAAuBnc,IAAzD,CACAie,SAAS4kB,YAAT,CAAuB1mB,CAAvB,EAA2BgC,QAA3B,CAAsC,EAAtC,CAEA,gBAAkBF,SAAS4kB,YAAT,CAAuB1mB,CAAvB,EAA2BgC,QAA7C,CACA,gBAAkBy0B,KAAK/P,YAAL,CAAmB1mB,CAAnB,EAAuBgC,QAAzC,CAEA,IAAM,MAAQ,CAAR,CAAWinB,GAAK6uB,YAAYvzD,MAAlC,CAA0CmQ,EAAIu0B,EAA9C,CAAkDv0B,GAAK,CAAvD,CAA2D,CAE1D,WAAa,UAAUR,OAAV,EAAb,CACAqzB,OAAO7jC,CAAP,CAAWo0D,YAAapjD,CAAb,EAAmBkV,KAA9B,CACA2d,OAAOh2B,CAAP,CAAWumD,YAAapjD,EAAI,CAAjB,EAAuBkV,KAAlC,CACA2d,OAAO/1B,CAAP,CAAWsmD,YAAapjD,EAAI,CAAjB,EAAuBkV,KAAlC,CAEAmuC,YAAY/gC,IAAZ,CAAkBuQ,MAAlB,EAEA,CAED,CAED,CAED,GAAKkP,KAAKuhB,WAAL,GAAqB10D,SAArB,EAAkCmzC,KAAKuhB,WAAL,CAAiBzzD,MAAjB,CAA0B,CAAjE,CAAqE,CAEpE+J,QAAQC,IAAR,CAAc,iFAAd,EAEA,UAAYuT,SAAS0kB,KAArB,CACA,gBAAkBiQ,KAAKuhB,WAAL,CAAkB,CAAlB,EAAsBnzB,MAAxC,CAEA,IAAM,MAAQ,CAAR,CAAW92B,EAAIy4B,MAAMjiC,MAA3B,CAAmCyb,EAAIjS,CAAvC,CAA0CiS,GAA1C,CAAiD,CAEhDwmB,MAAOxmB,CAAP,EAAWtR,KAAX,CAAiBwC,SAAjB,CAA4B8mD,WAA5B,CAAyCh4C,EAAI,CAA7C,EAEA,CAED,CAED,CAED,wBAAA,EAA2B,CAE1B,qBAAuB,EAAvB;CAGA,eAAiB,EAAjB,CAEA,GAAKy2B,KAAK0B,SAAL,GAAmB70C,SAAxB,CAAoC,CAEnCq0C,WAAW3gB,IAAX,CAAiByf,KAAK0B,SAAtB,EAEA,CAED,GAAK1B,KAAKkB,UAAL,GAAoBr0C,SAAzB,CAAqC,CAEpC,GAAKmzC,KAAKkB,UAAL,CAAgBpzC,MAArB,CAA8B,CAE7BozC,WAAaA,WAAWsgB,MAAX,CAAmBxhB,KAAKkB,UAAxB,CAAb,CAEA,CAJD,IAIO,CAENA,WAAW3gB,IAAX,CAAiByf,KAAKkB,UAAtB,EAEA,CAED,CAED,IAAM,MAAQ,CAAd,CAAiB33B,EAAI23B,WAAWpzC,MAAhC,CAAwCyb,GAAxC,CAA+C,CAE9C,SAAW7c,MAAMizC,aAAN,CAAoB8B,cAApB,CAAoCP,WAAY33B,CAAZ,CAApC,CAAqD8B,SAASs2B,KAA9D,CAAX,CACA,GAAKhI,IAAL,CAAY8nB,iBAAiBlhC,IAAjB,CAAuBoZ,IAAvB,EAEZ;CAGD,GAAKtuB,SAAS4kB,YAAd,CAA6B;CAG5B,wBAA0BvjC,MAAMizC,aAAN,CAAoBwB,mCAApB,CAAyD91B,SAAS4kB,YAAlE,CAAgF,EAAhF,CAA1B,CACAwxB,iBAAmBA,iBAAiBD,MAAjB,CAAyBE,mBAAzB,CAAnB,CAEA,CAED,GAAKD,iBAAiB3zD,MAAjB,CAA0B,CAA/B,CAAmCud,SAAS61B,UAAT,CAAsBugB,gBAAtB,CAEnC,CAED,GAAKzhB,KAAKzT,SAAL,GAAmB1/B,SAAnB,EAAgCmzC,KAAKzT,SAAL,CAAez+B,MAAf,GAA0B,CAA/D,CAAmE,CAElE,OAAO,CAAEud,SAAUA,QAAZ,CAAP,CAEA,CAJD,IAIO,CAEN,cAAgB3e,MAAM2tD,MAAN,CAAaltD,SAAb,CAAuBwtD,aAAvB,CAAsC3a,KAAKzT,SAA3C,CAAsDquB,WAAtD,CAAmE,KAAKH,WAAxE,CAAhB,CAEA,OAAO,CAAEpvC,SAAUA,QAAZ,CAAsBkhB,UAAWA,SAAjC,CAAP,CAEA,CAED,CAphB2B,CAA7B;;;IA8hBA7/B,MAAMi1D,cAAN,CAAuB,SAAWjI,MAAX,CAAmBC,UAAnB,CAA+BC,OAA/B,CAAyC,CAE/D,UAAY,IAAZ,CAEA,cAAgB,KAAhB,CAAuBgI,YAAc,CAArC,CAAwCC,WAAa,CAArD,CAEA,KAAKC,OAAL,CAAej1D,SAAf,CACA,KAAK6sD,MAAL,CAAcA,MAAd,CACA,KAAKC,UAAL,CAAkBA,UAAlB,CACA,KAAKC,OAAL,CAAeA,OAAf,CAEA,KAAKyF,SAAL,CAAiB,SAAW5F,GAAX,CAAiB,CAEjCoI,aAEA,GAAKE,YAAc,KAAnB,CAA2B,CAE1B,GAAKv2C,MAAMs2C,OAAN,GAAkBj1D,SAAvB,CAAmC,CAElC2e,MAAMs2C,OAAN,CAAerI,GAAf,CAAoBmI,WAApB,CAAiCC,UAAjC,EAEA,CAED,CAEDE,UAAY,IAAZ,CAEA,CAhBD,CAkBA,KAAK/C,OAAL,CAAe,SAAWvF,GAAX,CAAiB,CAE/BmI,cAEA,GAAKp2C,MAAMmuC,UAAN,GAAqB9sD,SAA1B,CAAsC,CAErC2e,MAAMmuC,UAAN,CAAkBF,GAAlB,CAAuBmI,WAAvB,CAAoCC,UAApC,EAEA,CAED,GAAKD,cAAgBC,UAArB,CAAkC,CAEjCE,UAAY,KAAZ,CAEA,GAAKv2C,MAAMkuC,MAAN,GAAiB7sD,SAAtB,CAAkC,CAEjC2e,MAAMkuC,MAAN,GAEA,CAED,CAED,CAtBD,CAwBA,KAAKuF,SAAL,CAAiB,SAAWxF,GAAX,CAAiB,CAEjC,GAAKjuC,MAAMouC,OAAN,GAAkB/sD,SAAvB,CAAmC,CAElC2e,MAAMouC,OAAN,CAAeH,GAAf,EAEA,CAED,CARD,CAUA,CA/DD,CAiEA/sD,MAAM6sD,qBAAN,CAA8B,UAAUoI,cAAV,EAA9B;;;IAQAj1D,MAAMs1D,oBAAN,CAA6B,SAAW1I,OAAX,CAAqB,CAEjD,KAAKA,OAAL,CAAiBA,UAAYzsD,SAAd,CAA4BysD,OAA5B,CAAsC5sD,MAAM6sD,qBAA3D,CAEA,CAJD,CAMA7sD,MAAMs1D,oBAAN,CAA2B70D,SAA3B,CAAuC,CAEtCoJ,YAAa7J,MAAMs1D,oBAFmB,CAItCxI,KAAM,cAAWC,GAAX,CAAgBC,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEnD,UAAY,IAAZ,CAEA,WAAa,UAAUC,SAAV,CAAqBruC,MAAM8tC,OAA3B,CAAb,CACAQ,OAAON,IAAP,CAAaC,GAAb,CAAkB,SAAWgG,IAAX,CAAkB,CAEnC/F,OAAQluC,MAAM4hB,KAAN,CAAaP,KAAKO,KAAL,CAAYqyB,IAAZ,CAAb,CAAR,EAEA,CAJD,CAIG9F,UAJH,CAIeC,OAJf,EAMA,CAfqC,CAiBtCxsB,MAAO,eAAW4S,IAAX,CAAkB,CAExB,aAAe,UAAUv0B,cAAV,EAAf,CAEA,UAAYu0B,KAAK7S,IAAL,CAAUv/B,KAAtB,CAEA,iBAAmB,CAClB,YAAaq0D,SADK,CAElB,aAAcC,UAFI,CAGlB,oBAAqBC,iBAHH,CAIlB,aAAcC,UAJI,CAKlB,cAAejqB,WALG,CAMlB,aAAckqB,UANI,CAOlB,cAAenqB,WAPG,CAQlB,eAAgBgT,YARE,CASlB,eAAgByE,YATE,CAAnB,CAYA,GAAK/hD,QAAUf,SAAf,CAA2B,CAE1B,eAAiB,iBAAkBe,MAAMy4B,IAApB,CAAJ,CAAgCz4B,MAAM8M,KAAtC,CAAjB,CACA2Q,SAASgsB,QAAT,CAAmB,UAAU5J,eAAV,CAA2B60B,UAA3B,CAAuC,CAAvC,CAAnB,EAEA,CAED,eAAiBtiB,KAAK7S,IAAL,CAAUzhB,UAA3B,CAEA,IAAM,OAAN,cAAA,CAA8B,CAE7B,cAAgBA,WAAYwhB,GAAZ,CAAhB,CACA,eAAiB,iBAAkBrqB,UAAUwjB,IAAxB,CAAJ,CAAoCxjB,UAAUnI,KAA9C,CAAjB,CAEA2Q,SAASisB,YAAT,CAAuBpK,GAAvB,CAA4B,UAAUO,eAAV,CAA2B60B,UAA3B,CAAuCz/C,UAAUC,QAAjD,CAA2DD,UAAU6qB,UAArE,CAA5B,EAEA,CAED,WAAasS,KAAK7S,IAAL,CAAUyE,MAAV,EAAoBoO,KAAK7S,IAAL,CAAUo1B,SAA9B,EAA2CviB,KAAK7S,IAAL,CAAUq1B,OAAlE,CAEA,GAAK5wB,SAAW/kC,SAAhB,CAA4B,CAE3B,IAAM,MAAQ,CAAR,CAAWikB,EAAI8gB,OAAO9jC,MAA5B,CAAoCyb,IAAMuH,CAA1C,CAA6C,EAAGvH,CAAhD,CAAoD,CAEnD,UAAYqoB,OAAQroB,CAAR,CAAZ,CAEA8B,SAASosB,QAAT,CAAmB5F,MAAM3pB,KAAzB,CAAgC2pB,MAAMhE,KAAtC,CAA6CgE,MAAMvE,aAAnD,EAEA,CAED,CAED,mBAAqB0S,KAAK7S,IAAL,CAAUtS,cAA/B,CAEA,GAAKA,iBAAmBhuB,SAAxB,CAAoC,CAEnC,WAAa,UAAU4Q,OAAV,EAAb,CAEA,GAAKod,eAAe7X,MAAf,GAA0BnW,SAA/B,CAA2C,CAE1CmW,OAAOvI,SAAP,CAAkBogB,eAAe7X,MAAjC,EAEA,CAEDqI,SAASwP,cAAT,CAA0B,UAAU1O,MAAV,CAAkBnJ,MAAlB,CAA0B6X,eAAe5U,MAAzC,CAA1B,CAEA,CAED,eAAA,CAEA,CArFqC,CAAvC;;;IA+FAvZ,MAAMuuD,cAAN,CAAuB,SAAW3B,OAAX,CAAqB,CAE3C,KAAKA,OAAL,CAAiBA,UAAYzsD,SAAd,CAA4BysD,OAA5B,CAAsC5sD,MAAM6sD,qBAA3D,CACA,KAAK/sB,QAAL,CAAgB,EAAhB,CAEA,CALD,CAOA9/B,MAAMuuD,cAAN,CAAqB9tD,SAArB,CAAiC,CAEhCoJ,YAAa7J,MAAMuuD,cAFa,CAIhCzB,KAAM,cAAWC,GAAX,CAAgBC,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEnD,UAAY,IAAZ,CAEA,WAAa,UAAUC,SAAV,CAAqBruC,MAAM8tC,OAA3B,CAAb,CACAQ,OAAON,IAAP,CAAaC,GAAb,CAAkB,SAAWgG,IAAX,CAAkB,CAEnC/F,OAAQluC,MAAM4hB,KAAN,CAAaP,KAAKO,KAAL,CAAYqyB,IAAZ,CAAb,CAAR,EAEA,CAJD,CAIG9F,UAJH,CAIeC,OAJf,EAMA,CAf+B,CAiBhC0E,YAAa,qBAAW9nD,KAAX,CAAmB,CAE/B,KAAKg2B,QAAL,CAAgBh2B,KAAhB,CAEA,CArB+B,CAuBhCisD,WAAY,oBAAWr1D,IAAX,CAAkB,CAE7B,aAAe,KAAKo/B,QAApB,CAEA,GAAKA,SAAUp/B,IAAV,IAAqBP,SAA1B,CAAsC,CAErCgL,QAAQC,IAAR,CAAc,yCAAd,CAAyD1K,IAAzD,EAEA,CAED,gBAAiBA,IAAV,CAAP,CAEA,CAnC+B,CAqChCggC,MAAO,eAAW4S,IAAX,CAAkB,CAExB,aAAe,UAAWA,KAAK3Z,IAAZ,CAAJ,EAAf,CAEA,GAAK2Z,KAAKtjB,IAAL,GAAc7vB,SAAnB,CAA+BkgC,SAASrQ,IAAT,CAAgBsjB,KAAKtjB,IAArB,CAC/B,GAAKsjB,KAAK5yC,IAAL,GAAcP,SAAnB,CAA+BkgC,SAAS3/B,IAAT,CAAgB4yC,KAAK5yC,IAArB,CAC/B,GAAK4yC,KAAK/nC,KAAL,GAAepL,SAApB,CAAgCkgC,SAAS90B,KAAT,CAAevB,MAAf,CAAuBspC,KAAK/nC,KAA5B,EAChC,GAAK+nC,KAAK0iB,SAAL,GAAmB71D,SAAxB,CAAoCkgC,SAAS21B,SAAT,CAAqB1iB,KAAK0iB,SAA1B,CACpC,GAAK1iB,KAAK2iB,SAAL,GAAmB91D,SAAxB,CAAoCkgC,SAAS41B,SAAT,CAAqB3iB,KAAK2iB,SAA1B,CACpC,GAAK3iB,KAAK4b,QAAL,GAAkB/uD,SAAvB,CAAmCkgC,SAAS6uB,QAAT,CAAkBllD,MAAlB,CAA0BspC,KAAK4b,QAA/B,EACnC,GAAK5b,KAAK2b,QAAL,GAAkB9uD,SAAvB,CAAmCkgC,SAAS4uB,QAAT,CAAkBjlD,MAAlB,CAA0BspC,KAAK2b,QAA/B,EACnC,GAAK3b,KAAK6b,SAAL,GAAmBhvD,SAAxB,CAAoCkgC,SAAS8uB,SAAT,CAAqB7b,KAAK6b,SAA1B,CACpC,GAAK7b,KAAK4iB,QAAL,GAAkB/1D,SAAvB,CAAmCkgC,SAAS61B,QAAT,CAAoB5iB,KAAK4iB,QAAzB,CACnC,GAAK5iB,KAAK6iB,YAAL,GAAsBh2D,SAA3B,CAAuCkgC,SAAS81B,YAAT,CAAwB7iB,KAAK6iB,YAA7B,CACvC,GAAK7iB,KAAK8iB,cAAL,GAAwBj2D,SAA7B,CAAyCkgC,SAAS+1B,cAAT,CAA0B9iB,KAAK8iB,cAA/B,CACzC,GAAK9iB,KAAKxS,YAAL,GAAsB3gC,SAA3B,CAAuCkgC,SAASS,YAAT,CAAwBwS,KAAKxS,YAA7B,CACvC,GAAKwS,KAAK+iB,OAAL,GAAiBl2D,SAAtB,CAAkCkgC,SAASg2B,OAAT,CAAmB/iB,KAAK+iB,OAAxB,CAClC,GAAK/iB,KAAK0b,QAAL,GAAkB7uD,SAAvB,CAAmCkgC,SAAS2uB,QAAT,CAAoB1b,KAAK0b,QAAzB,CACnC,GAAK1b,KAAKme,IAAL,GAActxD,SAAnB,CAA+BkgC,SAASoxB,IAAT,CAAgBne,KAAKme,IAArB,CAC/B,GAAKne,KAAKoe,OAAL,GAAiBvxD,SAAtB,CAAkCkgC,SAASqxB,OAAT,CAAmBpe,KAAKoe,OAAxB,CAClC,GAAKpe,KAAKqe,WAAL,GAAqBxxD,SAA1B,CAAsCkgC,SAASsxB,WAAT,CAAuBre,KAAKqe,WAA5B,CACtC,GAAKre,KAAKgjB,SAAL,GAAmBn2D,SAAxB,CAAoCkgC,SAASi2B,SAAT,CAAqBhjB,KAAKgjB,SAA1B,CACpC,GAAKhjB,KAAKijB,SAAL,GAAmBp2D,SAAxB,CAAoCkgC,SAASk2B,SAAT,CAAqBjjB,KAAKijB,SAA1B,CACpC,GAAKjjB,KAAKkjB,UAAL,GAAoBr2D,SAAzB,CAAqCkgC,SAASm2B,UAAT,CAAsBljB,KAAKkjB,UAA3B,CACrC,GAAKljB,KAAKmjB,UAAL,GAAoBt2D,SAAzB,CAAqCkgC,SAASo2B,UAAT,CAAsBnjB,KAAKmjB,UAA3B,CACrC,GAAKnjB,KAAKojB,SAAL,GAAmBv2D,SAAxB,CAAoCkgC,SAASq2B,SAAT,CAAqBpjB,KAAKojB,SAA1B,CACpC,GAAKpjB,KAAKqjB,kBAAL,GAA4Bx2D,SAAjC,CAA6CkgC,SAASs2B,kBAAT,CAA8BrjB,KAAKqjB,kBAAnC;CAG7C,GAAKrjB,KAAK1nC,IAAL,GAAczL,SAAnB,CAA+BkgC,SAASz0B,IAAT,CAAgB0nC,KAAK1nC,IAArB,CAC/B,GAAK0nC,KAAKsjB,eAAL,GAAyBz2D,SAA9B,CAA0CkgC,SAASu2B,eAAT,CAA2BtjB,KAAKsjB,eAAhC;CAI1C,GAAKtjB,KAAKyY,GAAL,GAAa5rD,SAAlB,CAA8BkgC,SAAS0rB,GAAT,CAAe,KAAKgK,UAAL,CAAiBziB,KAAKyY,GAAtB,CAAf,CAE9B,GAAKzY,KAAK8d,QAAL,GAAkBjxD,SAAvB,CAAmC,CAElCkgC,SAAS+wB,QAAT,CAAoB,KAAK2E,UAAL,CAAiBziB,KAAK8d,QAAtB,CAApB,CACA/wB,SAASsxB,WAAT,CAAuB,IAAvB,CAEA,CAED,GAAKre,KAAK6c,OAAL,GAAiBhwD,SAAtB,CAAkCkgC,SAAS8vB,OAAT,CAAmB,KAAK4F,UAAL,CAAiBziB,KAAK6c,OAAtB,CAAnB,CAClC,GAAK7c,KAAKkd,SAAL,GAAmBrwD,SAAxB,CAAoCkgC,SAASmwB,SAAT,CAAqBld,KAAKkd,SAA1B,CAEpC,GAAKld,KAAKmd,SAAL,GAAmBtwD,SAAxB,CAAoCkgC,SAASowB,SAAT,CAAqB,KAAKsF,UAAL,CAAiBziB,KAAKmd,SAAtB,CAArB,CACpC,GAAKnd,KAAKwd,WAAL,GAAqB3wD,SAA1B,CAAsC,CAErC,gBAAkBmzC,KAAKwd,WAAvB,CAEA,GAAKv0B,MAAMC,OAAN,CAAes0B,WAAf,IAAiC,KAAtC,CAA8C;CAI7CA,YAAc,CAAEA,WAAF,CAAeA,WAAf,CAAd,CAEA,CAEDzwB,SAASywB,WAAT,CAAuB,UAAU18C,OAAV,GAAoBrG,SAApB,CAA+B+iD,WAA/B,CAAvB,CAEA,CAED,GAAKxd,KAAKujB,eAAL,GAAyB12D,SAA9B,CAA0CkgC,SAASw2B,eAAT,CAA2B,KAAKd,UAAL,CAAiBziB,KAAKujB,eAAtB,CAA3B,CAC1C,GAAKvjB,KAAKwjB,iBAAL,GAA2B32D,SAAhC,CAA4CkgC,SAASy2B,iBAAT,CAA6BxjB,KAAKwjB,iBAAlC,CAC5C,GAAKxjB,KAAKyjB,gBAAL,GAA0B52D,SAA/B,CAA2CkgC,SAAS02B,gBAAT,CAA4BzjB,KAAKyjB,gBAAjC,CAE3C,GAAKzjB,KAAK0jB,YAAL,GAAsB72D,SAA3B,CAAuCkgC,SAAS22B,YAAT,CAAwB,KAAKjB,UAAL,CAAiBziB,KAAK0jB,YAAtB,CAAxB,CACvC,GAAK1jB,KAAK2jB,YAAL,GAAsB92D,SAA3B,CAAuCkgC,SAAS42B,YAAT,CAAwB,KAAKlB,UAAL,CAAiBziB,KAAK2jB,YAAtB,CAAxB,CAEvC,GAAK3jB,KAAK4jB,WAAL,GAAqB/2D,SAA1B,CAAsCkgC,SAAS62B,WAAT,CAAuB,KAAKnB,UAAL,CAAiBziB,KAAK4jB,WAAtB,CAAvB,CACtC,GAAK5jB,KAAK6jB,iBAAL,GAA2Bh3D,SAAhC,CAA4CkgC,SAAS82B,iBAAT,CAA6B7jB,KAAK6jB,iBAAlC,CAE5C,GAAK7jB,KAAKyd,WAAL,GAAqB5wD,SAA1B,CAAsCkgC,SAAS0wB,WAAT,CAAuB,KAAKgF,UAAL,CAAiBziB,KAAKyd,WAAtB,CAAvB,CAEtC,GAAKzd,KAAK8jB,MAAL,GAAgBj3D,SAArB,CAAiC,CAEhCkgC,SAAS+2B,MAAT,CAAkB,KAAKrB,UAAL,CAAiBziB,KAAK8jB,MAAtB,CAAlB,CACA/2B,SAASg3B,OAAT,CAAmBr3D,MAAM6E,iBAAzB,CAEA,CAED,GAAKyuC,KAAKgkB,YAAV,CAAyBj3B,SAASi3B,YAAT,CAAwBhkB,KAAKgkB,YAA7B,CAEzB,GAAKhkB,KAAKmc,QAAL,GAAkBtvD,SAAvB,CAAmCkgC,SAASovB,QAAT,CAAoB,KAAKsG,UAAL,CAAiBziB,KAAKmc,QAAtB,CAApB,CACnC,GAAKnc,KAAKikB,iBAAL,GAA2Bp3D,SAAhC,CAA4CkgC,SAASk3B,iBAAT,CAA6BjkB,KAAKikB,iBAAlC,CAE5C,GAAKjkB,KAAKwc,KAAL,GAAe3vD,SAApB,CAAgCkgC,SAASyvB,KAAT,CAAiB,KAAKiG,UAAL,CAAiBziB,KAAKwc,KAAtB,CAAjB,CAChC,GAAKxc,KAAKkkB,cAAL,GAAwBr3D,SAA7B,CAAyCkgC,SAASm3B,cAAT,CAA0BlkB,KAAKkkB,cAA/B;CAIzC,GAAKlkB,KAAKzT,SAAL,GAAmB1/B,SAAxB,CAAoC,CAEnC,IAAM,MAAQ,CAAR,CAAWyK,EAAI0oC,KAAKzT,SAAL,CAAez+B,MAApC,CAA4Cyb,EAAIjS,CAAhD,CAAmDiS,GAAnD,CAA0D,CAEzDwjB,SAASR,SAAT,CAAmBhM,IAAnB,CAAyB,KAAK6M,KAAL,CAAY4S,KAAKzT,SAAL,CAAgBhjB,CAAhB,CAAZ,CAAzB,EAEA,CAED,CAED,eAAA,CAEA,CA7I+B,CAAjC;;;IAuJA7c,MAAMy3D,YAAN,CAAqB,SAAW7K,OAAX,CAAqB,CAEzC,KAAKA,OAAL,CAAiBA,UAAYzsD,SAAd,CAA4BysD,OAA5B,CAAsC5sD,MAAM6sD,qBAA3D,CACA,KAAKqB,WAAL,CAAmB,EAAnB,CAEA,CALD,CAOAluD,MAAMy3D,YAAN,CAAmBh3D,SAAnB,CAA+B,CAE9BoJ,YAAa7J,MAAMy3D,YAFW,CAI9B3K,KAAM,cAAWC,GAAX,CAAgBC,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEnD,GAAK,KAAKgB,WAAL,GAAqB,EAA1B,CAA+B,CAE9B,KAAKA,WAAL,CAAmBnB,IAAIiG,SAAJ,CAAe,CAAf,CAAkBjG,IAAI2K,WAAJ,CAAiB,GAAjB,EAAyB,CAA3C,CAAnB,CAEA,CAED,UAAY,IAAZ,CAEA,WAAa,UAAUvK,SAAV,CAAqBruC,MAAM8tC,OAA3B,CAAb,CACAQ,OAAON,IAAP,CAAaC,GAAb,CAAkB,SAAWgG,IAAX,CAAkB,CAEnCj0C,MAAM4hB,KAAN,CAAaP,KAAKO,KAAL,CAAYqyB,IAAZ,CAAb,CAAiC/F,MAAjC,EAEA,CAJD,CAIGC,UAJH,CAIeC,OAJf,EAMA,CArB6B,CAuB9BwG,eAAgB,wBAAW5pD,KAAX,CAAmB,CAElC,KAAKokD,WAAL,CAAmBpkD,KAAnB,CAEA,CA3B6B,CA6B9B+kD,eAAgB,wBAAW/kD,KAAX,CAAmB,CAElC,KAAKikD,WAAL,CAAmBjkD,KAAnB,CAEA,CAjC6B,CAmC9B42B,MAAO,eAAW4S,IAAX,CAAiB0Z,MAAjB,CAA0B,CAEhC,eAAiB,KAAK2K,eAAL,CAAsBrkB,KAAK1T,UAA3B,CAAjB,CAEA,WAAa,KAAKg4B,WAAL,CAAkBtkB,KAAKvT,MAAvB,CAA+B,UAAY,CAEvD,GAAKitB,SAAW7sD,SAAhB,CAA4B6sD,OAAQzuC,MAAR,EAE5B,CAJY,CAAb,CAMA,aAAgB,KAAKs5C,aAAL,CAAoBvkB,KAAKxT,QAAzB,CAAmCC,MAAnC,CAAhB,CACA,cAAgB,KAAK+3B,cAAL,CAAqBxkB,KAAKzT,SAA1B,CAAqCC,QAArC,CAAhB,CAEA,WAAa,KAAKi4B,WAAL,CAAkBzkB,KAAK/0B,MAAvB,CAA+BqhB,UAA/B,CAA2CC,SAA3C,CAAb,CAEA,GAAKyT,KAAKkB,UAAV,CAAuB,CAEtBj2B,OAAOi2B,UAAP,CAAoB,KAAKsf,eAAL,CAAsBxgB,KAAKkB,UAA3B,CAApB,CAEA,CAED,GAAKlB,KAAKvT,MAAL,GAAgB5/B,SAAhB,EAA6BmzC,KAAKvT,MAAL,CAAY3+B,MAAZ,GAAuB,CAAzD,CAA6D,CAE5D,GAAK4rD,SAAW7sD,SAAhB,CAA4B6sD,OAAQzuC,MAAR,EAE5B,CAED,aAAA,CAEA,CAhE6B,CAkE9Bo5C,gBAAiB,yBAAWrkB,IAAX,CAAkB,CAElC,eAAiB,EAAjB,CAEA,GAAKA,OAASnzC,SAAd,CAA0B,CAEzB,mBAAqB,UAAUqzD,UAAV,EAArB,CACA,yBAA2B,UAAU8B,oBAAV,EAA3B,CAEA,IAAM,MAAQ,CAAR,CAAW1qD,EAAI0oC,KAAKlyC,MAA1B,CAAkCyb,EAAIjS,CAAtC,CAAyCiS,GAAzC,CAAgD,CAE/C,YAAA,CACA,SAAWy2B,KAAMz2B,CAAN,CAAX,CAEA,OAAS4jB,KAAK9G,IAAd,EAEC,IAAK,eAAL,CACA,IAAK,qBAAL,CAEChb,SAAW,UAAW8hB,KAAK9G,IAAZ,CAAJ,CACV8G,KAAKiqB,KADK,CAEVjqB,KAAKkqB,MAFK,CAGVlqB,KAAKu3B,aAHK,CAIVv3B,KAAKw3B,cAJK,CAAX,CAOA,MAED,IAAK,aAAL,CACA,IAAK,mBAAL,CACA,IAAK,cAAL;CAECt5C,SAAW,UAAW8hB,KAAK9G,IAAZ,CAAJ,CACV8G,KAAKiqB,KADK,CAEVjqB,KAAKkqB,MAFK,CAGVlqB,KAAKy3B,KAHK,CAIVz3B,KAAKu3B,aAJK,CAKVv3B,KAAKw3B,cALK,CAMVx3B,KAAK03B,aANK,CAAX,CASA,MAED,IAAK,gBAAL,CACA,IAAK,sBAAL,CAECx5C,SAAW,UAAW8hB,KAAK9G,IAAZ,CAAJ,CACV8G,KAAKlnB,MADK,CAEVknB,KAAK23B,QAFK,CAGV33B,KAAK43B,UAHK,CAIV53B,KAAK63B,WAJK,CAAX,CAOA,MAED,IAAK,kBAAL,CACA,IAAK,wBAAL,CAEC35C,SAAW,UAAW8hB,KAAK9G,IAAZ,CAAJ,CACV8G,KAAK83B,SADK,CAEV93B,KAAK+3B,YAFK,CAGV/3B,KAAKkqB,MAHK,CAIVlqB,KAAKg4B,cAJK,CAKVh4B,KAAKw3B,cALK,CAMVx3B,KAAKi4B,SANK,CAOVj4B,KAAK43B,UAPK,CAQV53B,KAAK63B,WARK,CAAX,CAWA,MAED,IAAK,cAAL,CACA,IAAK,oBAAL,CAEC35C,SAAW,UAAY8hB,KAAK9G,IAAb,CAAJ,CACV8G,KAAKlnB,MADK,CAEVknB,KAAKkqB,MAFK,CAGVlqB,KAAKg4B,cAHK,CAIVh4B,KAAKw3B,cAJK,CAKVx3B,KAAKi4B,SALK,CAMVj4B,KAAK43B,UANK,CAOV53B,KAAK63B,WAPK,CAAX,CAUA,MAED,IAAK,gBAAL,CACA,IAAK,sBAAL,CAEC35C,SAAW,UAAW8hB,KAAK9G,IAAZ,CAAJ,CACV8G,KAAKlnB,MADK,CAEVknB,KAAKu3B,aAFK,CAGVv3B,KAAKw3B,cAHK,CAIVx3B,KAAKk4B,QAJK,CAKVl4B,KAAKm4B,SALK,CAMVn4B,KAAK43B,UANK,CAOV53B,KAAK63B,WAPK,CAAX,CAUA,MAED,IAAK,sBAAL,CACA,IAAK,qBAAL,CACA,IAAK,oBAAL,CACA,IAAK,qBAAL,CAEC35C,SAAW,UAAW8hB,KAAK9G,IAAZ,CAAJ,CACV8G,KAAKlnB,MADK,CAEVknB,KAAKo4B,MAFK,CAAX,CAKA,MAED,IAAK,cAAL,CACA,IAAK,oBAAL,CAECl6C,SAAW,UAAW8hB,KAAK9G,IAAZ,CAAJ,CACV8G,KAAKq4B,WADK,CAEVr4B,KAAKs4B,WAFK,CAGVt4B,KAAKu4B,aAHK,CAIVv4B,KAAKw4B,WAJK,CAKVx4B,KAAK43B,UALK,CAMV53B,KAAK63B,WANK,CAAX,CASA,MAED,IAAK,eAAL,CACA,IAAK,qBAAL,CAEC35C,SAAW,UAAW8hB,KAAK9G,IAAZ,CAAJ,CACV8G,KAAKlnB,MADK,CAEVknB,KAAKy4B,IAFK,CAGVz4B,KAAKg4B,cAHK,CAIVh4B,KAAK04B,eAJK,CAKV14B,KAAK24B,GALK,CAAX,CAQA,MAED,IAAK,mBAAL,CACA,IAAK,yBAAL,CAECz6C,SAAW,UAAW8hB,KAAK9G,IAAZ,CAAJ,CACV8G,KAAKlnB,MADK,CAEVknB,KAAKy4B,IAFK,CAGVz4B,KAAK04B,eAHK,CAIV14B,KAAKg4B,cAJK,CAKVh4B,KAAKl2B,CALK,CAMVk2B,KAAKj2B,CANK,CAAX,CASA,MAED,IAAK,eAAL,CACA,IAAK,qBAAL,CAECmU,SAAW,UAAW8hB,KAAK9G,IAAZ,CAAJ,CACV8G,KAAK/jB,MADK,CAEV+jB,KAAK23B,QAFK,CAGV33B,KAAKk4B,QAHK,CAIVl4B,KAAKm4B,SAJK,CAAX,CAOA,MAED,IAAK,gBAAL,CAECj6C,SAAW06C,qBAAqB34B,KAArB,CAA4BD,IAA5B,CAAX,CAEA,MAED,IAAK,UAAL,CAEC9hB,SAAW26C,eAAe54B,KAAf,CAAsBD,KAAKA,IAA3B,CAAiC,KAAKytB,WAAtC,EAAoDvvC,QAA/D,CAEA,MAED,QAECxT,QAAQC,IAAR,CAAc,kDAAoDq1B,KAAK9G,IAAzD,CAAgE,GAA9E,EAEA,SAxKF,CA4KAhb,SAASqR,IAAT,CAAgByQ,KAAKzQ,IAArB,CAEA,GAAKyQ,KAAK//B,IAAL,GAAcP,SAAnB,CAA+Bwe,SAASje,IAAT,CAAgB+/B,KAAK//B,IAArB,CAE/Bk/B,WAAYa,KAAKzQ,IAAjB,EAA0BrR,QAA1B,CAEA,CAED,CAED,iBAAA,CAEA,CAxQ6B,CA0Q9Bm5C,eAAgB,wBAAWxkB,IAAX,CAAiBxT,QAAjB,CAA4B,CAE3C,cAAgB,EAAhB,CAEA,GAAKwT,OAASnzC,SAAd,CAA0B,CAEzB,WAAa,UAAUouD,cAAV,EAAb,CACAnB,OAAOwE,WAAP,CAAoB9xB,QAApB,EAEA,IAAM,MAAQ,CAAR,CAAWl1B,EAAI0oC,KAAKlyC,MAA1B,CAAkCyb,EAAIjS,CAAtC,CAAyCiS,GAAzC,CAAgD,CAE/C,aAAeuwC,OAAO1sB,KAAP,CAAc4S,KAAMz2B,CAAN,CAAd,CAAf,CACAgjB,UAAWQ,SAASrQ,IAApB,EAA6BqQ,QAA7B,CAEA,CAED,CAED,gBAAA,CAEA,CA9R6B,CAgS9ByzB,gBAAiB,yBAAWxgB,IAAX,CAAkB,CAElC,eAAiB,EAAjB,CAEA,IAAM,MAAQ,CAAd,CAAiBz2B,EAAIy2B,KAAKlyC,MAA1B,CAAkCyb,GAAlC,CAAyC,CAExC,SAAW7c,MAAMizC,aAAN,CAAoBvS,KAApB,CAA2B4S,KAAMz2B,CAAN,CAA3B,CAAX,CAEA23B,WAAW3gB,IAAX,CAAiBoZ,IAAjB,EAEA,CAED,iBAAA,CAEA,CA9S6B,CAgT9B2qB,YAAa,qBAAWtkB,IAAX,CAAiB0Z,MAAjB,CAA0B,CAEtC,UAAY,IAAZ,CACA,WAAa,EAAb,CAEA,kBAAA,CAAoBD,GAApB,CAA0B,CAEzBjuC,MAAM8tC,OAAN,CAAc+F,SAAd,CAAyB5F,GAAzB,EAEA,cAAcD,IAAP,CAAaC,GAAb,CAAkB,UAAY,CAEpCjuC,MAAM8tC,OAAN,CAAc0F,OAAd,CAAuBvF,GAAvB,EAEA,CAJM,CAAP,CAMA,CAED,GAAKzZ,OAASnzC,SAAT,EAAsBmzC,KAAKlyC,MAAL,CAAc,CAAzC,CAA6C,CAE5C,YAAc,UAAU6zD,cAAV,CAA0BjI,MAA1B,CAAd,CAEA,WAAa,UAAUmG,WAAV,CAAuBvG,OAAvB,CAAb,CACAQ,OAAOyB,cAAP,CAAuB,KAAKd,WAA5B,EAEA,IAAM,MAAQ,CAAR,CAAWnjD,EAAI0oC,KAAKlyC,MAA1B,CAAkCyb,EAAIjS,CAAtC,CAAyCiS,GAAzC,CAAgD,CAE/C,UAAYy2B,KAAMz2B,CAAN,CAAZ,CACA,SAAW,4BAA4B+d,IAA5B,CAAkC04B,MAAMvG,GAAxC,EAAgDuG,MAAMvG,GAAtD,CAA4DjuC,MAAMovC,WAAN,CAAoBoF,MAAMvG,GAAjG,CAEAhtB,OAAQuzB,MAAMtjC,IAAd,EAAuBupC,UAAW/f,IAAX,CAAvB,CAEA,CAED,CAED,aAAA,CAEA,CArV6B,CAuV9Bqe,cAAe,uBAAWvkB,IAAX,CAAiBvT,MAAjB,CAA0B,CAExC,sBAAA,CAAwBj2B,KAAxB,CAAgC,CAE/B,GAAK,YAAA,GAAoB,QAAzB,CAAoC,YAAA,CAEpCqB,QAAQC,IAAR,CAAc,sEAAd,CAAsFtB,KAAtF,EAEA,aAAcA,KAAP,CAAP,CAEA,CAED,aAAe,EAAf,CAEA,GAAKwpC,OAASnzC,SAAd,CAA0B,CAEzB,IAAM,MAAQ,CAAR,CAAWyK,EAAI0oC,KAAKlyC,MAA1B,CAAkCyb,EAAIjS,CAAtC,CAAyCiS,GAAzC,CAAgD,CAE/C,SAAWy2B,KAAMz2B,CAAN,CAAX,CAEA,GAAK4jB,KAAK6yB,KAAL,GAAenzD,SAApB,CAAgC,CAE/BgL,QAAQC,IAAR,CAAc,8CAAd,CAA8Dq1B,KAAKzQ,IAAnE,EAEA,CAED,GAAK+P,OAAQU,KAAK6yB,KAAb,IAAyBnzD,SAA9B,CAA0C,CAEzCgL,QAAQC,IAAR,CAAc,qCAAd,CAAqDq1B,KAAK6yB,KAA1D,EAEA,CAED,YAAc,UAAUkG,OAAV,CAAmBz5B,OAAQU,KAAK6yB,KAAb,CAAnB,CAAd,CACApK,QAAQhe,WAAR,CAAsB,IAAtB,CAEAge,QAAQl5B,IAAR,CAAeyQ,KAAKzQ,IAApB,CAEA,GAAKyQ,KAAK//B,IAAL,GAAcP,SAAnB,CAA+B+oD,QAAQxoD,IAAR,CAAe+/B,KAAK//B,IAApB,CAC/B,GAAK+/B,KAAKg5B,OAAL,GAAiBt5D,SAAtB,CAAkC+oD,QAAQuQ,OAAR,CAAkBC,cAAej5B,KAAKg5B,OAApB,CAAlB,CAClC,GAAKh5B,KAAKxyB,MAAL,GAAgB9N,SAArB,CAAiC+oD,QAAQj7C,MAAR,CAAiB,UAAUmG,OAAV,CAAmBqsB,KAAKxyB,MAAL,CAAa,CAAb,CAAnB,CAAqCwyB,KAAKxyB,MAAL,CAAa,CAAb,CAArC,CAAjB,CACjC,GAAKwyB,KAAK+tB,MAAL,GAAgBruD,SAArB,CAAiC+oD,QAAQsF,MAAR,CAAiB,UAAUp6C,OAAV,CAAmBqsB,KAAK+tB,MAAL,CAAa,CAAb,CAAnB,CAAqC/tB,KAAK+tB,MAAL,CAAa,CAAb,CAArC,CAAjB,CACjC,GAAK/tB,KAAKkoB,SAAL,GAAmBxoD,SAAxB,CAAoC+oD,QAAQP,SAAR,CAAoB+Q,cAAej5B,KAAKkoB,SAApB,CAApB,CACpC,GAAKloB,KAAKioB,SAAL,GAAmBvoD,SAAxB,CAAoC+oD,QAAQR,SAAR,CAAoBgR,cAAej5B,KAAKioB,SAApB,CAApB,CACpC,GAAKjoB,KAAKiuB,UAAL,GAAoBvuD,SAAzB,CAAqC+oD,QAAQwF,UAAR,CAAqBjuB,KAAKiuB,UAA1B,CACrC,GAAKnyB,MAAMC,OAAN,CAAeiE,KAAKguB,IAApB,CAAL,CAAkC,CAEjCvF,QAAQ4F,KAAR,CAAgB4K,cAAej5B,KAAKguB,IAAL,CAAW,CAAX,CAAf,CAAhB,CACAvF,QAAQ6F,KAAR,CAAgB2K,cAAej5B,KAAKguB,IAAL,CAAW,CAAX,CAAf,CAAhB,CAEA,CAED3uB,SAAUW,KAAKzQ,IAAf,EAAwBk5B,OAAxB,CAEA,CAED,CAED,eAAA,CAEA,CAlZ6B,CAoZ9B6O,YAAa,UAAY,CAExB,WAAa,UAAUlgD,OAAV,EAAb,CAEA,gBAAkB4oB,IAAX,CAAiBb,UAAjB,CAA6BC,SAA7B,CAAyC,CAE/C,UAAA,CAEA,oBAAA,CAAsBn/B,IAAtB,CAA6B,CAE5B,GAAKk/B,WAAYl/B,IAAZ,IAAuBP,SAA5B,CAAwC,CAEvCgL,QAAQC,IAAR,CAAc,wCAAd,CAAwD1K,IAAxD,EAEA,CAED,kBAAmBA,IAAZ,CAAP,CAEA,CAED,oBAAA,CAAsBA,IAAtB,CAA6B,CAE5B,GAAKA,OAASP,SAAd,CAA0B,gBAAA,CAE1B,GAAK0/B,UAAWn/B,IAAX,IAAsBP,SAA3B,CAAuC,CAEtCgL,QAAQC,IAAR,CAAc,wCAAd,CAAwD1K,IAAxD,EAEA,CAED,iBAAkBA,IAAX,CAAP,CAEA,CAED,OAAS+/B,KAAK9G,IAAd,EAEC,IAAK,OAAL,CAECpb,OAAS,UAAUo7C,KAAV,EAAT,CAEA,MAED,IAAK,mBAAL,CAECp7C,OAAS,UAAU0d,iBAAV,CAA6BwE,KAAKrY,GAAlC,CAAuCqY,KAAKpY,MAA5C,CAAoDoY,KAAKxY,IAAzD,CAA+DwY,KAAKvY,GAApE,CAAT,CAEA,GAAKuY,KAAKkpB,KAAL,GAAexpD,SAApB,CAAgCoe,OAAOorC,KAAP,CAAelpB,KAAKkpB,KAApB,CAChC,GAAKlpB,KAAK8oB,IAAL,GAAcppD,SAAnB,CAA+Boe,OAAOgrC,IAAP,CAAc9oB,KAAK8oB,IAAnB,CAC/B,GAAK9oB,KAAKopB,SAAL,GAAmB1pD,SAAxB,CAAoCoe,OAAOsrC,SAAP,CAAmBppB,KAAKopB,SAAxB,CACpC,GAAKppB,KAAKqpB,UAAL,GAAoB3pD,SAAzB,CAAqCoe,OAAOurC,UAAP,CAAoBrpB,KAAKqpB,UAAzB,CACrC,GAAKrpB,KAAKmpB,IAAL,GAAczpD,SAAnB,CAA+Boe,OAAOqrC,IAAP,CAAcjpD,OAAOK,MAAP,CAAe,EAAf,CAAmBy/B,KAAKmpB,IAAxB,CAAd,CAE/B,MAED,IAAK,oBAAL,CAECrrC,OAAS,UAAU2d,kBAAV,CAA8BuE,KAAK5Y,IAAnC,CAAyC4Y,KAAK3Y,KAA9C,CAAqD2Y,KAAKzY,GAA1D,CAA+DyY,KAAK1Y,MAApE,CAA4E0Y,KAAKxY,IAAjF,CAAuFwY,KAAKvY,GAA5F,CAAT,CAEA,MAED,IAAK,cAAL,CAEC3J,OAAS,UAAUytC,YAAV,CAAwBvrB,KAAKl1B,KAA7B,CAAoCk1B,KAAK+qB,SAAzC,CAAT,CAEA,MAED,IAAK,kBAAL,CAECjtC,OAAS,UAAU0tC,gBAAV,CAA4BxrB,KAAKl1B,KAAjC,CAAwCk1B,KAAK+qB,SAA7C,CAAT,CAEA,MAED,IAAK,YAAL,CAECjtC,OAAS,UAAUguC,UAAV,CAAsB9rB,KAAKl1B,KAA3B,CAAkCk1B,KAAK+qB,SAAvC,CAAkD/qB,KAAK7kB,QAAvD,CAAiE6kB,KAAKirB,KAAtE,CAAT,CAEA,MAED,IAAK,WAAL,CAECntC,OAAS,UAAUkuC,SAAV,CAAqBhsB,KAAKl1B,KAA1B,CAAiCk1B,KAAK+qB,SAAtC,CAAiD/qB,KAAK7kB,QAAtD,CAAgE6kB,KAAK7wB,KAArE,CAA4E6wB,KAAKkrB,QAAjF,CAA2FlrB,KAAKirB,KAAhG,CAAT,CAEA,MAED,IAAK,iBAAL,CAECntC,OAAS,UAAU8tC,eAAV,CAA2B5rB,KAAKl1B,KAAhC,CAAuCk1B,KAAKgrB,WAA5C,CAAyDhrB,KAAK+qB,SAA9D,CAAT,CAEA,MAED,IAAK,MAAL,CAEC,aAAeoO,YAAan5B,KAAK9hB,QAAlB,CAAf,CACA,aAAek7C,YAAap5B,KAAKJ,QAAlB,CAAf,CAEA,GAAK1hB,SAASs2B,KAAT,EAAkBt2B,SAASs2B,KAAT,CAAe7zC,MAAf,CAAwB,CAA/C,CAAmD,CAElDmd,OAAS,UAAUu7C,WAAV,CAAuBn7C,QAAvB,CAAiC0hB,QAAjC,CAAT,CAEA,CAJD,IAIO,CAEN9hB,OAAS,UAAUyc,IAAV,CAAgBrc,QAAhB,CAA0B0hB,QAA1B,CAAT,CAEA,CAED,MAED,IAAK,KAAL,CAEC9hB,OAAS,UAAU2c,GAAV,EAAT,CAEA,MAED,IAAK,MAAL,CAEC3c,OAAS,UAAU0c,IAAV,CAAgB2+B,YAAan5B,KAAK9hB,QAAlB,CAAhB,CAA8Ck7C,YAAap5B,KAAKJ,QAAlB,CAA9C,CAA4EI,KAAKiP,IAAjF,CAAT,CAEA,MAED,IAAK,YAAL,CACA,IAAK,QAAL,CAECnxB,OAAS,UAAU4c,MAAV,CAAkBy+B,YAAan5B,KAAK9hB,QAAlB,CAAlB,CAAgDk7C,YAAap5B,KAAKJ,QAAlB,CAAhD,CAAT,CAEA,MAED,IAAK,QAAL,CAEC9hB,OAAS,UAAU8c,MAAV,CAAkBw+B,YAAap5B,KAAKJ,QAAlB,CAAlB,CAAT,CAEA,MAED,IAAK,OAAL,CAEC9hB,OAAS,UAAUw7C,KAAV,EAAT,CAEA,MAED,QAECx7C,OAAS,UAAUke,QAAV,EAAT,CA1GF,CA8GAle,OAAOyR,IAAP,CAAcyQ,KAAKzQ,IAAnB,CAEA,GAAKyQ,KAAK//B,IAAL,GAAcP,SAAnB,CAA+Boe,OAAO7d,IAAP,CAAc+/B,KAAK//B,IAAnB,CAC/B,GAAK+/B,KAAK7oB,MAAL,GAAgBzX,SAArB,CAAiC,CAEhCyX,OAAO7J,SAAP,CAAkB0yB,KAAK7oB,MAAvB,EACAA,OAAO4P,SAAP,CAAkBjJ,OAAOgJ,QAAzB,CAAmChJ,OAAO3P,UAA1C,CAAsD2P,OAAOkI,KAA7D,EAEA,CALD,IAKO,CAEN,GAAKga,KAAKlZ,QAAL,GAAkBpnB,SAAvB,CAAmCoe,OAAOgJ,QAAP,CAAgBxZ,SAAhB,CAA2B0yB,KAAKlZ,QAAhC,EACnC,GAAKkZ,KAAK5D,QAAL,GAAkB18B,SAAvB,CAAmCoe,OAAOse,QAAP,CAAgB9uB,SAAhB,CAA2B0yB,KAAK5D,QAAhC,EACnC,GAAK4D,KAAKha,KAAL,GAAetmB,SAApB,CAAgCoe,OAAOkI,KAAP,CAAa1Y,SAAb,CAAwB0yB,KAAKha,KAA7B,EAEhC,CAED,GAAKga,KAAKpD,UAAL,GAAoBl9B,SAAzB,CAAqCoe,OAAO8e,UAAP,CAAoBoD,KAAKpD,UAAzB,CACrC,GAAKoD,KAAKnD,aAAL,GAAuBn9B,SAA5B,CAAwCoe,OAAO+e,aAAP,CAAuBmD,KAAKnD,aAA5B,CAExC,GAAKmD,KAAK9E,OAAL,GAAiBx7B,SAAtB,CAAkCoe,OAAOod,OAAP,CAAiB8E,KAAK9E,OAAtB,CAClC,GAAK8E,KAAKhD,QAAL,GAAkBt9B,SAAvB,CAAmCoe,OAAOkf,QAAP,CAAkBgD,KAAKhD,QAAvB,CAEnC,GAAKgD,KAAK5E,QAAL,GAAkB17B,SAAvB,CAAmC,CAElC,IAAM,SAAN,SAAwB07B,QAAxB,CAAmC,CAElCtd,OAAOnR,GAAP,CAAY,KAAK2qD,WAAL,CAAkBt3B,KAAK5E,QAAL,CAAekD,KAAf,CAAlB,CAA0Ca,UAA1C,CAAsDC,SAAtD,CAAZ,EAEA,CAED,CAED,GAAKY,KAAK9G,IAAL,GAAc,KAAnB,CAA2B,CAE1B,WAAa8G,KAAKu5B,MAAlB,CAEA,IAAM,MAAQ,CAAd,CAAiBpvD,EAAIovD,OAAO54D,MAA5B,CAAoCwJ,GAApC,CAA2C,CAE1C,UAAYovD,OAAQpvD,CAAR,CAAZ,CACA,UAAY2T,OAAOsgB,mBAAP,CAA4B,MAA5B,CAAoCo7B,MAAM17C,MAA1C,CAAZ,CAEA,GAAKwgB,QAAU5+B,SAAf,CAA2B,CAE1Boe,OAAO27C,QAAP,CAAiBn7B,KAAjB,CAAwBk7B,MAAMr+C,QAA9B,EAEA,CAED,CAED,CAED,aAAA,CAEA,CAjMD,CAmMA,CAvMY,EApZiB,CAA/B;;;IAqmBA5b,MAAMsuD,aAAN,CAAsB,SAAW1B,OAAX,CAAqB,CAE1C,KAAKA,OAAL,CAAiBA,UAAYzsD,SAAd,CAA4BysD,OAA5B,CAAsC5sD,MAAM6sD,qBAA3D,CAEA,CAJD,CAMA7sD,MAAMsuD,aAAN,CAAoB7tD,SAApB,CAAgC,CAE/BoJ,YAAa7J,MAAMsuD,aAFY,CAI/BxB,KAAM,cAAWC,GAAX,CAAgBC,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEnD,YAAc,UAAUsM,OAAV,EAAd,CAEA,WAAa,UAAUrG,WAAV,CAAuB,KAAKvG,OAA5B,CAAb,CACAQ,OAAOyB,cAAP,CAAuB,KAAKd,WAA5B,EACAX,OAAOwF,OAAP,CAAgB,KAAKpZ,IAArB,EACA4T,OAAON,IAAP,CAAaC,GAAb,CAAkB,SAAWuG,KAAX,CAAmB,CAEpCpK,QAAQoK,KAAR,CAAgBA,KAAhB,CACApK,QAAQhe,WAAR,CAAsB,IAAtB,CAEA,GAAK8hB,SAAW7sD,SAAhB,CAA4B,CAE3B6sD,OAAQ9D,OAAR,EAEA,CAED,CAXD,CAWG+D,UAXH,CAWeC,OAXf,EAaA,cAAA,CAEA,CA1B8B,CA4B/B2B,eAAgB,wBAAW/kD,KAAX,CAAmB,CAElC,KAAKikD,WAAL,CAAmBjkD,KAAnB,CAEA,CAhC8B,CAkC/B8oD,QAAS,iBAAW9oD,KAAX,CAAmB,CAE3B,KAAK0vC,IAAL,CAAY1vC,KAAZ,CAEA,CAtC8B,CAAhC;;;IAgDA9J,MAAMm6D,iBAAN,CAA0B,SAAWvN,OAAX,CAAqB,CAE9C,KAAKA,OAAL,CAAiBA,UAAYzsD,SAAd,CAA4BysD,OAA5B,CAAsC5sD,MAAM6sD,qBAA3D,CAEA,CAJD,CAMA7sD,MAAMm6D,iBAAN,CAAwB15D,SAAxB,CAAoC,CAEnCoJ,YAAa7J,MAAMm6D,iBAFgB,CAInCrN,KAAM,cAAWsN,IAAX,CAAiBpN,MAAjB,CAAyBC,UAAzB,CAAqCC,OAArC,CAA+C,CAEpD,YAAc,UAAUmN,WAAV,EAAd,CAEA,WAAa,UAAUlH,WAAV,CAAuB,KAAKvG,OAA5B,CAAb,CACAQ,OAAOyB,cAAP,CAAuB,KAAKd,WAA5B,EACAX,OAAOwF,OAAP,CAAgB,KAAKpZ,IAArB,EAEA,WAAa,CAAb,CAEA,oBAAA,CAAsB38B,CAAtB,CAA0B,CAEzBuwC,OAAON,IAAP,CAAasN,KAAMv9C,CAAN,CAAb,CAAwB,SAAWy2C,KAAX,CAAmB,CAE1CpK,QAAQnpB,MAAR,CAAgBljB,CAAhB,EAAsBy2C,KAAtB,CAEAgH,SAEA,GAAKA,SAAW,CAAhB,CAAoB,CAEnBpR,QAAQhe,WAAR,CAAsB,IAAtB,CAEA,GAAK8hB,MAAL,CAAcA,OAAQ9D,OAAR,EAEd,CAED,CAdD,CAcG/oD,SAdH,CAcc+sD,OAdd,EAgBA,CAED,IAAM,MAAQ,CAAd,CAAiBrwC,EAAIu9C,KAAKh5D,MAA1B,CAAkC,EAAGyb,CAArC,CAAyC,CAExCuyC,YAAavyC,CAAb,EAEA,CAED,cAAA,CAEA,CA1CkC,CA4CnCgyC,eAAgB,wBAAW/kD,KAAX,CAAmB,CAElC,KAAKikD,WAAL,CAAmBjkD,KAAnB,CAEA,CAhDkC,CAkDnC8oD,QAAS,iBAAW9oD,KAAX,CAAmB,CAE3B,KAAK0vC,IAAL,CAAY1vC,KAAZ,CAEA,CAtDkC,CAApC;;;;;IAkEA9J,MAAMu6D,iBAAN,CAA0Bv6D,MAAMw6D,mBAAN,CAA4B,SAAW5N,OAAX,CAAqB,CAE1E,KAAKA,OAAL,CAAiBA,UAAYzsD,SAAd,CAA4BysD,OAA5B,CAAsC5sD,MAAM6sD,qBAA3D;CAGA,KAAK4N,OAAL,CAAe,IAAf,CAEA,CAPD,CASAz6D,MAAMw6D,mBAAN,CAA0B/5D,SAA1B,CAAsC,CAErCoJ,YAAa7J,MAAMw6D,mBAFkB,CAIrC1N,KAAM,cAAWC,GAAX,CAAgBC,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEnD,UAAY,IAAZ,CAEA,YAAc,UAAUwN,WAAV,EAAd,CAEA,WAAa,UAAUvN,SAAV,CAAqB,KAAKP,OAA1B,CAAb,CACAQ,OAAOC,eAAP,CAAwB,aAAxB,EAEAD,OAAON,IAAP,CAAaC,GAAb,CAAkB,SAAWrsC,MAAX,CAAoB,CAErC,YAAc5B,MAAM27C,OAAN,CAAe/5C,MAAf,CAAd,CAEA,GAAK,CAAEi6C,OAAP,CAAiB,OAEjB,GAAKx6D,YAAcw6D,QAAQrH,KAA3B,CAAmC,CAElCpK,QAAQoK,KAAR,CAAgBqH,QAAQrH,KAAxB,CAEA,CAJD,QAIYnzD,YAAcw6D,QAAQl6B,IAA3B,CAAkC,CAExCyoB,QAAQoK,KAAR,CAAc5I,KAAd,CAAsBiQ,QAAQjQ,KAA9B,CACAxB,QAAQoK,KAAR,CAAc3I,MAAd,CAAuBgQ,QAAQhQ,MAA/B,CACAzB,QAAQoK,KAAR,CAAc7yB,IAAd,CAAqBk6B,QAAQl6B,IAA7B,CAEA,CAEDyoB,QAAQ4F,KAAR,CAAgB3uD,YAAcw6D,QAAQ7L,KAAtB,CAA8B6L,QAAQ7L,KAAtC,CAA8C9uD,MAAM8F,mBAApE,CACAojD,QAAQ6F,KAAR,CAAgB5uD,YAAcw6D,QAAQ5L,KAAtB,CAA8B4L,QAAQ5L,KAAtC,CAA8C/uD,MAAM8F,mBAApE,CAEAojD,QAAQR,SAAR,CAAoBvoD,YAAcw6D,QAAQjS,SAAtB,CAAkCiS,QAAQjS,SAA1C,CAAsD1oD,MAAMmG,YAAhF,CACA+iD,QAAQP,SAAR,CAAoBxoD,YAAcw6D,QAAQhS,SAAtB,CAAkCgS,QAAQhS,SAA1C,CAAsD3oD,MAAMqG,wBAAhF,CAEA6iD,QAAQwF,UAAR,CAAqBvuD,YAAcw6D,QAAQjM,UAAtB,CAAmCiM,QAAQjM,UAA3C,CAAwD,CAA7E,CAEA,GAAKvuD,YAAcw6D,QAAQlS,MAA3B,CAAoC,CAEnCS,QAAQT,MAAR,CAAiBkS,QAAQlS,MAAzB,CAEA,CACD,GAAKtoD,YAAcw6D,QAAQhhC,IAA3B,CAAkC,CAEjCuvB,QAAQvvB,IAAR,CAAeghC,QAAQhhC,IAAvB,CAEA,CAED,GAAKx5B,YAAcw6D,QAAQC,OAA3B,CAAqC,CAEpC1R,QAAQ0R,OAAR,CAAkBD,QAAQC,OAA1B,CAEA,CAED,GAAK,IAAMD,QAAQE,WAAnB,CAAiC,CAEhC3R,QAAQP,SAAR,CAAoB3oD,MAAMmG,YAA1B,CAEA,CAED+iD,QAAQhe,WAAR,CAAsB,IAAtB,CAEA,GAAK8hB,MAAL,CAAcA,OAAQ9D,OAAR,CAAiByR,OAAjB,EAEd,CArDD,CAqDG1N,UArDH,CAqDeC,OArDf,EAwDA,cAAA,CAEA,CAvEoC,CAAtC;;;;;IAmFAltD,MAAM86D,uBAAN,CAAgC,SAAWlO,OAAX,CAAqB,CAEpD,KAAKA,OAAL,CAAiBA,UAAYzsD,SAAd,CAA4BysD,OAA5B,CAAsC5sD,MAAM6sD,qBAA3D;CAGA,KAAK4N,OAAL,CAAe,IAAf,CAEA,CAPD,CAUAz6D,MAAM86D,uBAAN,CAA8Br6D,SAA9B,CAA0C,CAEzCoJ,YAAa7J,MAAM86D,uBAFsB,CAIzChO,KAAM,cAAWC,GAAX,CAAgBC,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEnD,UAAY,IAAZ,CAEA,WAAa,EAAb,CAEA,YAAc,UAAU6N,iBAAV,EAAd,CACA7R,QAAQoK,KAAR,CAAgBvzB,MAAhB,CAEA,WAAa,UAAUotB,SAAV,CAAqB,KAAKP,OAA1B,CAAb,CACAQ,OAAOwF,OAAP,CAAgB,KAAKpZ,IAArB,EACA4T,OAAOC,eAAP,CAAwB,aAAxB,EAEA,oBAAA,CAAsBxwC,CAAtB,CAA0B,CAEzBuwC,OAAON,IAAP,CAAaC,IAAKlwC,CAAL,CAAb,CAAuB,SAAW6D,MAAX,CAAoB,CAE1C,aAAe5B,MAAM27C,OAAN,CAAe/5C,MAAf,CAAuB,IAAvB,CAAf,CAEAqf,OAAQljB,CAAR,EAAc,CACb6tC,MAAOsQ,SAAStQ,KADH,CAEbC,OAAQqQ,SAASrQ,MAFJ,CAGblC,OAAQuS,SAASvS,MAHJ,CAIbmS,QAASI,SAASJ,OAJL,CAAd,CAOAN,QAAU,CAAV,CAEA,GAAKA,SAAW,CAAhB,CAAoB,CAEnB,GAAKU,SAASH,WAAT,GAAyB,CAA9B,CACC3R,QAAQP,SAAR,CAAoB3oD,MAAMmG,YAA1B,CAED+iD,QAAQT,MAAR,CAAiBuS,SAASvS,MAA1B,CACAS,QAAQhe,WAAR,CAAsB,IAAtB,CAEA,GAAK8hB,MAAL,CAAcA,OAAQ9D,OAAR,EAEd,CAED,CAzBD,CAyBG+D,UAzBH,CAyBeC,OAzBf,EA2BA,CAED,GAAK3wB,MAAMC,OAAN,CAAeuwB,GAAf,CAAL,CAA4B,CAE3B,WAAa,CAAb,CAEA,IAAM,MAAQ,CAAR,CAAWnwC,GAAKmwC,IAAI3rD,MAA1B,CAAkCyb,EAAID,EAAtC,CAA0C,EAAGC,CAA7C,CAAiD,CAEhDuyC,YAAavyC,CAAb,EAEA,CAED,CAVD,IAUO;CAINuwC,OAAON,IAAP,CAAaC,GAAb,CAAkB,SAAWrsC,MAAX,CAAoB,CAErC,aAAe5B,MAAM27C,OAAN,CAAe/5C,MAAf,CAAuB,IAAvB,CAAf,CAEA,GAAKs6C,SAASC,SAAd,CAA0B,CAEzB,UAAYD,SAASJ,OAAT,CAAiBx5D,MAAjB,CAA0B45D,SAASH,WAA/C,CAEA,IAAM,MAAQ,CAAd,CAAiB1mD,EAAIkvB,KAArB,CAA4BlvB,GAA5B,CAAmC,CAElC4rB,OAAQ5rB,CAAR,EAAc,CAAEymD,QAAU,EAAZ,CAAd,CAEA,IAAM,MAAQ,CAAd,CAAiB/9C,EAAIm+C,SAASH,WAA9B,CAA2Ch+C,GAA3C,CAAkD,CAEjDkjB,OAAQ5rB,CAAR,EAAYymD,OAAZ,CAAoB/mC,IAApB,CAA0BmnC,SAASJ,OAAT,CAAkBzmD,EAAI6mD,SAASH,WAAb,CAA2Bh+C,CAA7C,CAA1B,EACAkjB,OAAQ5rB,CAAR,EAAYs0C,MAAZ,CAAqBuS,SAASvS,MAA9B,CACA1oB,OAAQ5rB,CAAR,EAAYu2C,KAAZ,CAAoBsQ,SAAStQ,KAA7B,CACA3qB,OAAQ5rB,CAAR,EAAYw2C,MAAZ,CAAqBqQ,SAASrQ,MAA9B,CAEA,CAED,CAED,CAnBD,IAmBO,CAENzB,QAAQoK,KAAR,CAAc5I,KAAd,CAAsBsQ,SAAStQ,KAA/B,CACAxB,QAAQoK,KAAR,CAAc3I,MAAd,CAAuBqQ,SAASrQ,MAAhC,CACAzB,QAAQ0R,OAAR,CAAkBI,SAASJ,OAA3B,CAEA,CAED,GAAKI,SAASH,WAAT,GAAyB,CAA9B,CAAkC,CAEjC3R,QAAQP,SAAR,CAAoB3oD,MAAMmG,YAA1B,CAEA,CAED+iD,QAAQT,MAAR,CAAiBuS,SAASvS,MAA1B,CACAS,QAAQhe,WAAR,CAAsB,IAAtB,CAEA,GAAK8hB,MAAL,CAAcA,OAAQ9D,OAAR,EAEd,CA1CD,CA0CG+D,UA1CH,CA0CeC,OA1Cf,EA4CA,CAED,cAAA,CAEA,CA9GwC,CAgHzC0F,QAAS,iBAAW9oD,KAAX,CAAmB,CAE3B,KAAK0vC,IAAL,CAAY1vC,KAAZ,CAEA,CApHwC,CAA1C;;;;IA+HA9J,MAAMk7D,QAAN,CAAiB,UAAY,CAE5Bv6D,OAAOC,cAAP,CAAuB,IAAvB,CAA6B,IAA7B,CAAmC,CAAEkJ,MAAO9J,MAAMm7D,eAAN,EAAT,CAAnC,EAEA,KAAKnrC,IAAL,CAAYhwB,MAAMI,IAAN,CAAW0vB,YAAX,EAAZ,CAEA,KAAKpvB,IAAL,CAAY,EAAZ,CACA,KAAKi5B,IAAL,CAAY,UAAZ,CAEA,KAAKyhC,GAAL,CAAW,IAAX,CACA,KAAKC,MAAL,CAAc,IAAd,CAEA,KAAKrM,QAAL,CAAgBhvD,MAAMgD,cAAtB,CACA,KAAKyuD,IAAL,CAAYzxD,MAAMuC,SAAlB,CACA,KAAK8zD,OAAL,CAAer2D,MAAM2C,aAArB;CACA,KAAKm+B,YAAL,CAAoB9gC,MAAM4C,QAA1B;CAEA,KAAK8uD,OAAL,CAAe,CAAf,CACA,KAAKC,WAAL,CAAmB,KAAnB,CAEA,KAAK2J,QAAL,CAAgBt7D,MAAM8D,cAAtB,CACA,KAAKy3D,QAAL,CAAgBv7D,MAAM+D,sBAAtB,CACA,KAAKy3D,aAAL,CAAqBx7D,MAAMqD,WAA3B,CACA,KAAKo4D,aAAL,CAAqB,IAArB,CACA,KAAKC,aAAL,CAAqB,IAArB,CACA,KAAKC,kBAAL,CAA0B,IAA1B,CAEA,KAAKC,SAAL,CAAiB57D,MAAMwE,cAAvB,CACA,KAAK+xD,SAAL,CAAiB,IAAjB,CACA,KAAKC,UAAL,CAAkB,IAAlB,CAEA,KAAKqF,cAAL,CAAsB,IAAtB,CACA,KAAKC,WAAL,CAAmB,KAAnB,CAEA,KAAKrF,UAAL,CAAkB,IAAlB,CAEA,KAAK9uB,SAAL,CAAiB,IAAjB;CAEA,KAAKo0B,aAAL,CAAqB,KAArB,CACA,KAAKC,mBAAL,CAA2B,CAA3B,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CAEA,KAAK3F,SAAL,CAAiB,CAAjB,CACA,KAAK4F,kBAAL,CAA0B,KAA1B,CAEA,KAAKC,QAAL,CAAgB,CAAhB;CAEA,KAAKxgC,OAAL,CAAe,IAAf,CAEA,KAAKygC,YAAL,CAAoB,IAApB,CAEA,CAnDD,CAqDAp8D,MAAMk7D,QAAN,CAAez6D,SAAf,CAA2B,CAE1BoJ,YAAa7J,MAAMk7D,QAFO,CAI1B,eAAA,EAAkB,CAEjB,YAAYkB,YAAZ,CAEA,CARyB,CAU1B,eAAA,CAAiBtyD,KAAjB,CAAyB,CAExB,GAAKA,QAAU,IAAf,CAAsB,KAAKiF,MAAL,GACtB,KAAKqtD,YAAL,CAAoBtyD,KAApB,CAEA,CAfyB,CAiB1BuyD,UAAW,mBAAWxlC,MAAX,CAAoB,CAE9B,GAAKA,SAAW12B,SAAhB,CAA4B,OAE5B,IAAM,OAAN,UAAA,CAA0B,CAEzB,aAAe02B,OAAQ2J,GAAR,CAAf,CAEA,GAAK87B,WAAan8D,SAAlB,CAA8B,CAE7BgL,QAAQC,IAAR,CAAc,oBAAsBo1B,GAAtB,CAA4B,2BAA1C,EACA,SAEA,CAED,iBAAmB,KAAMA,GAAN,CAAnB,CAEA,GAAK+7B,eAAiBp8D,SAAtB,CAAkC,CAEjCgL,QAAQC,IAAR,CAAc,SAAW,KAAKuuB,IAAhB,CAAuB,KAAvB,CAA+B6G,GAA/B,CAAqC,uCAAnD,EACA,SAEA,CAED,GAAK+7B,8BAA8BhzD,KAAnC,CAA2C,CAE1CgzD,aAAa5yD,GAAb,CAAkB2yD,QAAlB,EAEA,CAJD,QAIYC,8BAA8BxrD,OAA9B,EAAyCurD,0BAA0BvrD,OAAxE,CAAkF,CAExFwrD,aAAaxyD,IAAb,CAAmBuyD,QAAnB,EAEA,CAJM,QAIK97B,MAAQ,UAAb,CAA0B;CAGhC,KAAMA,GAAN,EAAcvgC,OAAQq8D,QAAR,CAAd,CAEA,CALM,IAKA,CAEN,KAAM97B,GAAN,EAAc87B,QAAd,CAEA,CAED,CAED,CA9DyB,CAgE1B78B,OAAQ,gBAAWC,IAAX,CAAkB,CAEzB,WAAaA,OAASv/B,SAAtB,CAEA,GAAKq8D,MAAL,CAAc,CAEb98B,KAAO,CACNI,SAAU,EADJ,CAENC,OAAQ,EAFF,CAAP,CAKA,CAED,SAAW,CACVC,SAAU,CACTC,QAAS,GADA,CAETtG,KAAM,UAFG,CAGTuG,UAAW,iBAHF,CADA,CAAX;CASAO,KAAKzQ,IAAL,CAAY,KAAKA,IAAjB,CACAyQ,KAAK9G,IAAL,CAAY,KAAKA,IAAjB,CAEA,GAAK,KAAKj5B,IAAL,GAAc,EAAnB,CAAwB+/B,KAAK//B,IAAL,CAAY,KAAKA,IAAjB,CAExB,GAAK,KAAK6K,KAAL,kBAA4BhC,KAAjC,CAAyCk3B,KAAKl1B,KAAL,CAAa,KAAKA,KAAL,CAAWgB,MAAX,EAAb,CAEzC,GAAK,KAAKypD,SAAL,GAAmB,GAAxB,CAA8Bv1B,KAAKu1B,SAAL,CAAiB,KAAKA,SAAtB,CAC9B,GAAK,KAAKC,SAAL,GAAmB,GAAxB,CAA8Bx1B,KAAKw1B,SAAL,CAAiB,KAAKA,SAAtB,CAE9B,GAAK,KAAK/G,QAAL,kBAA+B3lD,KAApC,CAA4Ck3B,KAAKyuB,QAAL,CAAgB,KAAKA,QAAL,CAAc3iD,MAAd,EAAhB,CAC5C,GAAK,KAAK0iD,QAAL,kBAA+B1lD,KAApC,CAA4Ck3B,KAAKwuB,QAAL,CAAgB,KAAKA,QAAL,CAAc1iD,MAAd,EAAhB,CAC5C,GAAK,KAAK4iD,SAAL,GAAmBhvD,SAAxB,CAAoCsgC,KAAK0uB,SAAL,CAAiB,KAAKA,SAAtB,CAEpC,GAAK,KAAKpD,GAAL,kBAA0ByN,OAA/B,CAAyC/4B,KAAKsrB,GAAL,CAAW,KAAKA,GAAL,CAAStsB,MAAT,CAAiBC,IAAjB,EAAwB1P,IAAnC,CACzC,GAAK,KAAKohC,QAAL,kBAA+BoI,OAApC,CAA8C/4B,KAAK2wB,QAAL,CAAgB,KAAKA,QAAL,CAAc3xB,MAAd,CAAsBC,IAAtB,EAA6B1P,IAA7C,CAC9C,GAAK,KAAKy/B,QAAL,kBAA+B+J,OAApC,CAA8C/4B,KAAKgvB,QAAL,CAAgB,KAAKA,QAAL,CAAchwB,MAAd,CAAsBC,IAAtB,EAA6B1P,IAA7C,CAC9C,GAAK,KAAKmgC,OAAL,kBAA8BqJ,OAAnC,CAA6C,CAE5C/4B,KAAK0vB,OAAL,CAAe,KAAKA,OAAL,CAAa1wB,MAAb,CAAqBC,IAArB,EAA4B1P,IAA3C,CACAyQ,KAAK+vB,SAAL,CAAiB,KAAKA,SAAtB,CAEA,CACD,GAAK,KAAKC,SAAL,kBAAgC+I,OAArC,CAA+C,CAE9C/4B,KAAKgwB,SAAL,CAAiB,KAAKA,SAAL,CAAehxB,MAAf,CAAuBC,IAAvB,EAA8B1P,IAA/C,CACAyQ,KAAKqwB,WAAL,CAAmB,KAAKA,WAAL,CAAiB5iD,OAAjB,EAAnB,CAEA,CACD,GAAK,KAAK2oD,eAAL,kBAAsC2C,OAA3C,CAAqD,CAEpD/4B,KAAKo2B,eAAL,CAAuB,KAAKA,eAAL,CAAqBp3B,MAArB,CAA6BC,IAA7B,EAAoC1P,IAA3D,CACAyQ,KAAKq2B,iBAAL,CAAyB,KAAKA,iBAA9B,CACAr2B,KAAKs2B,gBAAL,CAAwB,KAAKA,gBAA7B,CAEA,CACD,GAAK,KAAKC,YAAL,kBAAmCwC,OAAxC,CAAkD/4B,KAAKu2B,YAAL,CAAoB,KAAKA,YAAL,CAAkBv3B,MAAlB,CAA0BC,IAA1B,EAAiC1P,IAArD,CAClD,GAAK,KAAKinC,YAAL,kBAAmCuC,OAAxC,CAAkD/4B,KAAKw2B,YAAL,CAAoB,KAAKA,YAAL,CAAkBx3B,MAAlB,CAA0BC,IAA1B,EAAiC1P,IAArD,CAElD,GAAK,KAAKknC,WAAL,kBAAkCsC,OAAvC,CAAiD/4B,KAAKy2B,WAAL,CAAmB,KAAKA,WAAL,CAAiBz3B,MAAjB,CAAyBC,IAAzB,EAAgC1P,IAAnD,CACjD,GAAK,KAAK+gC,WAAL,kBAAkCyI,OAAvC,CAAiD/4B,KAAKswB,WAAL,CAAmB,KAAKA,WAAL,CAAiBtxB,MAAjB,CAAyBC,IAAzB,EAAgC1P,IAAnD,CAEjD,GAAK,KAAKonC,MAAL,kBAA6BoC,OAAlC,CAA4C,CAE3C/4B,KAAK22B,MAAL,CAAc,KAAKA,MAAL,CAAY33B,MAAZ,CAAoBC,IAApB,EAA2B1P,IAAzC,CACAyQ,KAAK62B,YAAL,CAAoB,KAAKA,YAAzB;CAEA,CAED,GAAK,KAAK1rD,IAAL,GAAczL,SAAnB,CAA+BsgC,KAAK70B,IAAL,CAAY,KAAKA,IAAjB,CAC/B,GAAK,KAAKgrD,eAAL,GAAyBz2D,SAA9B,CAA0CsgC,KAAKm2B,eAAL,CAAuB,KAAKA,eAA5B,CAE1C,GAAK,KAAK5H,QAAL,GAAkBhvD,MAAMgD,cAA7B,CAA8Cy9B,KAAKuuB,QAAL,CAAgB,KAAKA,QAArB,CAC9C,GAAK,KAAKqH,OAAL,GAAiBr2D,MAAM2C,aAA5B,CAA4C89B,KAAK41B,OAAL,CAAe,KAAKA,OAApB,CAC5C,GAAK,KAAK5E,IAAL,GAAczxD,MAAMuC,SAAzB,CAAqCk+B,KAAKgxB,IAAL,CAAY,KAAKA,IAAjB,CACrC,GAAK,KAAK3wB,YAAL,GAAsB9gC,MAAM4C,QAAjC,CAA4C69B,KAAKK,YAAL,CAAoB,KAAKA,YAAzB,CAE5C,GAAK,KAAK4wB,OAAL,CAAe,CAApB,CAAwBjxB,KAAKixB,OAAL,CAAe,KAAKA,OAApB,CACxB,GAAK,KAAKC,WAAL,GAAqB,IAA1B,CAAiClxB,KAAKkxB,WAAL,CAAmB,KAAKA,WAAxB,CACjC,GAAK,KAAK2E,SAAL,CAAiB,CAAtB,CAA0B71B,KAAK61B,SAAL,CAAiB,KAAKA,SAAtB,CAC1B,GAAK,KAAK4F,kBAAL,GAA4B,IAAjC,CAAwCz7B,KAAKy7B,kBAAL,CAA0B,KAAKA,kBAA/B,CACxC,GAAK,KAAKxF,SAAL,GAAmB,IAAxB,CAA+Bj2B,KAAKi2B,SAAL,CAAiB,KAAKA,SAAtB,CAC/B,GAAK,KAAKC,kBAAL,CAA0B,CAA/B,CAAmCl2B,KAAKk2B,kBAAL,CAA0B,KAAKA,kBAA/B;CAInC,yBAAA,CAA4Bp2B,KAA5B,CAAoC,CAEnC,WAAa,EAAb,CAEA,IAAM,OAAN,SAAA,CAAyB,CAExB,SAAWA,MAAOC,GAAP,CAAX,CACA,YAAYR,QAAZ,CACAnJ,OAAOhD,IAAP,CAAa4M,IAAb,EAEA,CAED,aAAA,CAEA,CAED,GAAK+7B,MAAL,CAAc,CAEb,aAAel8B,iBAAkBZ,KAAKI,QAAvB,CAAf,CACA,WAAaQ,iBAAkBZ,KAAKK,MAAvB,CAAb,CAEA,GAAKD,SAAS1+B,MAAT,CAAkB,CAAvB,CAA2Bq/B,KAAKX,QAAL,CAAgBA,QAAhB,CAC3B,GAAKC,OAAO3+B,MAAP,CAAgB,CAArB,CAAyBq/B,KAAKV,MAAL,CAAcA,MAAd,CAEzB,CAED,WAAA,CAEA,CApLyB,CAsL1Bh0B,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CA1LyB,CA4L1BA,KAAM,cAAW1I,MAAX,CAAoB,CAEzB,KAAKX,IAAL,CAAYW,OAAOX,IAAnB,CAEA,KAAK06D,GAAL,CAAW/5D,OAAO+5D,GAAlB,CACA,KAAKC,MAAL,CAAch6D,OAAOg6D,MAArB,CAEA,KAAKrM,QAAL,CAAgB3tD,OAAO2tD,QAAvB,CACA,KAAKyC,IAAL,CAAYpwD,OAAOowD,IAAnB,CACA,KAAK3wB,YAAL,CAAoBz/B,OAAOy/B,YAA3B,CAEA,KAAK4wB,OAAL,CAAerwD,OAAOqwD,OAAtB,CACA,KAAKC,WAAL,CAAmBtwD,OAAOswD,WAA1B,CAEA,KAAK2J,QAAL,CAAgBj6D,OAAOi6D,QAAvB,CACA,KAAKC,QAAL,CAAgBl6D,OAAOk6D,QAAvB,CACA,KAAKC,aAAL,CAAqBn6D,OAAOm6D,aAA5B,CACA,KAAKC,aAAL,CAAqBp6D,OAAOo6D,aAA5B,CACA,KAAKC,aAAL,CAAqBr6D,OAAOq6D,aAA5B,CACA,KAAKC,kBAAL,CAA0Bt6D,OAAOs6D,kBAAjC,CAEA,KAAKC,SAAL,CAAiBv6D,OAAOu6D,SAAxB,CACA,KAAKrF,SAAL,CAAiBl1D,OAAOk1D,SAAxB,CACA,KAAKC,UAAL,CAAkBn1D,OAAOm1D,UAAzB,CAEA,KAAKC,UAAL,CAAkBp1D,OAAOo1D,UAAzB,CAEA,KAAK9uB,SAAL,CAAiBtmC,OAAOsmC,SAAxB,CAEA,KAAKo0B,aAAL,CAAqB16D,OAAO06D,aAA5B,CACA,KAAKC,mBAAL,CAA2B36D,OAAO26D,mBAAlC,CACA,KAAKC,kBAAL,CAA0B56D,OAAO46D,kBAAjC,CAEA,KAAK3F,SAAL,CAAiBj1D,OAAOi1D,SAAxB,CAEA,KAAK4F,kBAAL,CAA0B76D,OAAO66D,kBAAjC,CAEA,KAAKC,QAAL,CAAgB96D,OAAO86D,QAAvB,CAEA,KAAKxgC,OAAL,CAAet6B,OAAOs6B,OAAtB,CACA,KAAKmgC,WAAL,CAAmBz6D,OAAOy6D,WAA1B,CAEA,cAAgBz6D,OAAOw6D,cAAvB,CACCY,UAAY,IADb,CAGA,GAAKC,YAAc,IAAnB,CAA0B,CAEzB,MAAQA,UAAUt7D,MAAlB,CACAq7D,UAAY,SAAA,CAAWr4C,CAAX,CAAZ,CAEA,IAAM,MAAQ,CAAd,CAAiBvH,IAAMuH,CAAvB,CAA0B,EAAGvH,CAA7B,EACC4/C,UAAW5/C,CAAX,EAAiB6/C,UAAW7/C,CAAX,EAAe9Q,KAAf,EAAjB,CADD,CAGA,CAED,KAAK8vD,cAAL,CAAsBY,SAAtB,CAEA,WAAA,CAEA,CAvPyB,CAyP1B1tD,OAAQ,iBAAY,CAEnB,KAAKqrB,aAAL,CAAoB,CAAET,KAAM,QAAR,CAApB,EAEA,CA7PyB,CA+P1B+P,QAAS,kBAAY,CAEpB,KAAKtP,aAAL,CAAoB,CAAET,KAAM,SAAR,CAApB,EAEA,CAnQyB,CAA3B,CAuQAh5B,OAAOK,MAAP,CAAehB,MAAMk7D,QAAN,CAAez6D,SAA9B,CAAyCT,MAAMy5B,eAAN,CAAsBh5B,SAA/D,EAEAT,MAAMm7D,eAAN,CAAwB,CAAxB;;;;;;;;;;;;;IAkBAn7D,MAAM28D,iBAAN,CAA0B,SAAWr0B,UAAX,CAAwB,CAEjDtoC,MAAMk7D,QAAN,CAAe35D,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,mBAAZ,CAEA,KAAKpuB,KAAL,CAAa,UAAUhC,KAAV,CAAiB,QAAjB,CAAb,CAEA,KAAKqzD,SAAL,CAAiB,CAAjB,CACA,KAAKC,OAAL,CAAe,OAAf,CACA,KAAKC,QAAL,CAAgB,OAAhB,CAEA,KAAKzB,MAAL,CAAc,KAAd,CAEA,KAAKgB,SAAL,CAAgB/zB,UAAhB,EAEA,CAhBD,CAkBAtoC,MAAM28D,iBAAN,CAAwBl8D,SAAxB,CAAoCE,OAAOy2B,MAAP,CAAep3B,MAAMk7D,QAAN,CAAez6D,SAA9B,CAApC,CACAT,MAAM28D,iBAAN,CAAwBl8D,SAAxB,CAAkCoJ,WAAlC,CAAgD7J,MAAM28D,iBAAtD,CAEA38D,MAAM28D,iBAAN,CAAwBl8D,SAAxB,CAAkCsJ,IAAlC,CAAyC,SAAW1I,MAAX,CAAoB,CAE5DrB,MAAMk7D,QAAN,CAAez6D,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAKkK,KAAL,CAAWxB,IAAX,CAAiB1I,OAAOkK,KAAxB,EAEA,KAAKqxD,SAAL,CAAiBv7D,OAAOu7D,SAAxB,CACA,KAAKC,OAAL,CAAex7D,OAAOw7D,OAAtB,CACA,KAAKC,QAAL,CAAgBz7D,OAAOy7D,QAAvB,CAEA,WAAA,CAEA,CAZD;;;;;;;;;;;;;;IA+BA98D,MAAM+8D,kBAAN,CAA2B,SAAWz0B,UAAX,CAAwB,CAElDtoC,MAAMk7D,QAAN,CAAe35D,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,oBAAZ,CAEA,KAAKpuB,KAAL,CAAa,UAAUhC,KAAV,CAAiB,QAAjB,CAAb,CAEA,KAAKqzD,SAAL,CAAiB,CAAjB,CAEA,KAAKn2C,KAAL,CAAa,CAAb,CACA,KAAKu2C,QAAL,CAAgB,CAAhB,CACA,KAAKC,OAAL,CAAe,CAAf,CAEA,KAAK5B,MAAL,CAAc,KAAd,CAEA,KAAKgB,SAAL,CAAgB/zB,UAAhB,EAEA,CAlBD,CAoBAtoC,MAAM+8D,kBAAN,CAAyBt8D,SAAzB,CAAqCE,OAAOy2B,MAAP,CAAep3B,MAAMk7D,QAAN,CAAez6D,SAA9B,CAArC,CACAT,MAAM+8D,kBAAN,CAAyBt8D,SAAzB,CAAmCoJ,WAAnC,CAAiD7J,MAAM+8D,kBAAvD,CAEA/8D,MAAM+8D,kBAAN,CAAyBt8D,SAAzB,CAAmCsJ,IAAnC,CAA0C,SAAW1I,MAAX,CAAoB,CAE7DrB,MAAMk7D,QAAN,CAAez6D,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAKkK,KAAL,CAAWxB,IAAX,CAAiB1I,OAAOkK,KAAxB,EAEA,KAAKqxD,SAAL,CAAiBv7D,OAAOu7D,SAAxB,CAEA,KAAKn2C,KAAL,CAAaplB,OAAOolB,KAApB,CACA,KAAKu2C,QAAL,CAAgB37D,OAAO27D,QAAvB,CACA,KAAKC,OAAL,CAAe57D,OAAO47D,OAAtB,CAEA,WAAA,CAEA,CAdD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAmDAj9D,MAAMk9D,iBAAN,CAA0B,SAAW50B,UAAX,CAAwB,CAEjDtoC,MAAMk7D,QAAN,CAAe35D,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,mBAAZ,CAEA,KAAKpuB,KAAL,CAAa,UAAUhC,KAAV,CAAiB,QAAjB,CAAb;CAEA,KAAKwiD,GAAL,CAAW,IAAX,CAEA,KAAK+D,KAAL,CAAa,IAAb,CACA,KAAK0H,cAAL,CAAsB,GAAtB,CAEA,KAAKzG,WAAL,CAAmB,IAAnB,CAEA,KAAKK,QAAL,CAAgB,IAAhB,CAEA,KAAKgG,MAAL,CAAc,IAAd,CACA,KAAKC,OAAL,CAAer3D,MAAM6E,iBAArB,CACA,KAAKyyD,YAAL,CAAoB,CAApB,CACA,KAAK6F,eAAL,CAAuB,IAAvB,CAEA,KAAKzG,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CACA,KAAKyG,gBAAL,CAAwB,OAAxB,CACA,KAAKC,iBAAL,CAAyB,OAAzB,CAEA,KAAKC,QAAL,CAAgB,KAAhB,CACA,KAAK/5B,YAAL,CAAoB,KAApB,CAEA,KAAK83B,MAAL,CAAc,KAAd,CAEA,KAAKgB,SAAL,CAAgB/zB,UAAhB,EAEA,CAlCD,CAoCAtoC,MAAMk9D,iBAAN,CAAwBz8D,SAAxB,CAAoCE,OAAOy2B,MAAP,CAAep3B,MAAMk7D,QAAN,CAAez6D,SAA9B,CAApC,CACAT,MAAMk9D,iBAAN,CAAwBz8D,SAAxB,CAAkCoJ,WAAlC,CAAgD7J,MAAMk9D,iBAAtD,CAEAl9D,MAAMk9D,iBAAN,CAAwBz8D,SAAxB,CAAkCsJ,IAAlC,CAAyC,SAAW1I,MAAX,CAAoB,CAE5DrB,MAAMk7D,QAAN,CAAez6D,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAKkK,KAAL,CAAWxB,IAAX,CAAiB1I,OAAOkK,KAAxB,EAEA,KAAKwgD,GAAL,CAAW1qD,OAAO0qD,GAAlB,CAEA,KAAK+D,KAAL,CAAazuD,OAAOyuD,KAApB,CACA,KAAK0H,cAAL,CAAsBn2D,OAAOm2D,cAA7B,CAEA,KAAKzG,WAAL,CAAmB1vD,OAAO0vD,WAA1B,CAEA,KAAKK,QAAL,CAAgB/vD,OAAO+vD,QAAvB,CAEA,KAAKgG,MAAL,CAAc/1D,OAAO+1D,MAArB,CACA,KAAKC,OAAL,CAAeh2D,OAAOg2D,OAAtB,CACA,KAAKC,YAAL,CAAoBj2D,OAAOi2D,YAA3B,CACA,KAAK6F,eAAL,CAAuB97D,OAAO87D,eAA9B,CAEA,KAAKzG,SAAL,CAAiBr1D,OAAOq1D,SAAxB,CACA,KAAKC,kBAAL,CAA0Bt1D,OAAOs1D,kBAAjC,CACA,KAAKyG,gBAAL,CAAwB/7D,OAAO+7D,gBAA/B,CACA,KAAKC,iBAAL,CAAyBh8D,OAAOg8D,iBAAhC,CAEA,KAAKC,QAAL,CAAgBj8D,OAAOi8D,QAAvB,CACA,KAAK/5B,YAAL,CAAoBliC,OAAOkiC,YAA3B,CAEA,WAAA,CAEA,CA9BD;;;;;;;;;;;;;;;;;;;;;;IAyDAvjC,MAAMu9D,iBAAN,CAA0B,SAAWj1B,UAAX,CAAwB,CAEjDtoC,MAAMk7D,QAAN,CAAe35D,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,mBAAZ,CAEA,KAAK6jC,YAAL,CAAoBx9D,MAAMqJ,iBAA1B,CAEA,KAAKi0D,QAAL,CAAgB,KAAhB,CACA,KAAK/5B,YAAL,CAAoB,KAApB,CAEA,KAAKwoB,GAAL,CAAW,IAAX,CAEA,KAAKqF,QAAL,CAAgB,IAAhB,CAEA,KAAKyF,eAAL,CAAuB,IAAvB,CACA,KAAKC,iBAAL,CAAyB,CAAzB,CACA,KAAKC,gBAAL,CAAwB,CAAxB,CAEA,KAAKL,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CAEA,KAAKyE,GAAL,CAAW,KAAX,CACA,KAAKC,MAAL,CAAc,KAAd,CAEA,KAAKgB,SAAL,CAAgB/zB,UAAhB,EAEA,CA3BD,CA6BAtoC,MAAMu9D,iBAAN,CAAwB98D,SAAxB,CAAoCE,OAAOy2B,MAAP,CAAep3B,MAAMk7D,QAAN,CAAez6D,SAA9B,CAApC,CACAT,MAAMu9D,iBAAN,CAAwB98D,SAAxB,CAAkCoJ,WAAlC,CAAgD7J,MAAMu9D,iBAAtD,CAEAv9D,MAAMu9D,iBAAN,CAAwB98D,SAAxB,CAAkCsJ,IAAlC,CAAyC,SAAW1I,MAAX,CAAoB,CAE5DrB,MAAMk7D,QAAN,CAAez6D,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAKm8D,YAAL,CAAoBn8D,OAAOm8D,YAA3B,CAEA,KAAKF,QAAL,CAAgBj8D,OAAOi8D,QAAvB,CACA,KAAK/5B,YAAL,CAAoBliC,OAAOkiC,YAA3B,CAEA,KAAKwoB,GAAL,CAAW1qD,OAAO0qD,GAAlB,CAEA,KAAKqF,QAAL,CAAgB/vD,OAAO+vD,QAAvB,CAEA,KAAKyF,eAAL,CAAuBx1D,OAAOw1D,eAA9B,CACA,KAAKC,iBAAL,CAAyBz1D,OAAOy1D,iBAAhC,CACA,KAAKC,gBAAL,CAAwB11D,OAAO01D,gBAA/B,CAEA,KAAKL,SAAL,CAAiBr1D,OAAOq1D,SAAxB,CACA,KAAKC,kBAAL,CAA0Bt1D,OAAOs1D,kBAAjC,CAEA,WAAA,CAEA,CAtBD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAgEA32D,MAAMy9D,mBAAN,CAA4B,SAAWn1B,UAAX,CAAwB,CAEnDtoC,MAAMk7D,QAAN,CAAe35D,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,qBAAZ,CAEA,KAAKpuB,KAAL,CAAa,UAAUhC,KAAV,CAAiB,QAAjB,CAAb;CAEA,KAAKwiD,GAAL,CAAW,IAAX,CAEA,KAAK0D,QAAL,CAAgB,IAAhB,CACA,KAAK8H,iBAAL,CAAyB,GAAzB,CAEA,KAAKzH,KAAL,CAAa,IAAb,CACA,KAAK0H,cAAL,CAAsB,GAAtB,CAEA,KAAKtI,QAAL,CAAgB,UAAU3lD,KAAV,CAAiB,QAAjB,CAAhB,CACA,KAAK4tD,iBAAL,CAAyB,GAAzB,CACA,KAAKD,WAAL,CAAmB,IAAnB,CAEA,KAAKnG,WAAL,CAAmB,IAAnB,CAEA,KAAKK,QAAL,CAAgB,IAAhB,CAEA,KAAKgG,MAAL,CAAc,IAAd,CACA,KAAKC,OAAL,CAAer3D,MAAM6E,iBAArB,CACA,KAAKyyD,YAAL,CAAoB,CAApB,CACA,KAAK6F,eAAL,CAAuB,IAAvB,CAEA,KAAKzG,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CACA,KAAKyG,gBAAL,CAAwB,OAAxB,CACA,KAAKC,iBAAL,CAAyB,OAAzB,CAEA,KAAKC,QAAL,CAAgB,KAAhB,CACA,KAAK/5B,YAAL,CAAoB,KAApB,CACA,KAAKC,YAAL,CAAoB,KAApB,CAEA,KAAK64B,SAAL,CAAgB/zB,UAAhB,EAEA,CAxCD,CA0CAtoC,MAAMy9D,mBAAN,CAA0Bh9D,SAA1B,CAAsCE,OAAOy2B,MAAP,CAAep3B,MAAMk7D,QAAN,CAAez6D,SAA9B,CAAtC,CACAT,MAAMy9D,mBAAN,CAA0Bh9D,SAA1B,CAAoCoJ,WAApC,CAAkD7J,MAAMy9D,mBAAxD,CAEAz9D,MAAMy9D,mBAAN,CAA0Bh9D,SAA1B,CAAoCsJ,IAApC,CAA2C,SAAW1I,MAAX,CAAoB,CAE9DrB,MAAMk7D,QAAN,CAAez6D,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAKkK,KAAL,CAAWxB,IAAX,CAAiB1I,OAAOkK,KAAxB,EAEA,KAAKwgD,GAAL,CAAW1qD,OAAO0qD,GAAlB,CAEA,KAAK0D,QAAL,CAAgBpuD,OAAOouD,QAAvB,CACA,KAAK8H,iBAAL,CAAyBl2D,OAAOk2D,iBAAhC,CAEA,KAAKzH,KAAL,CAAazuD,OAAOyuD,KAApB,CACA,KAAK0H,cAAL,CAAsBn2D,OAAOm2D,cAA7B,CAEA,KAAKtI,QAAL,CAAcnlD,IAAd,CAAoB1I,OAAO6tD,QAA3B,EACA,KAAKgI,WAAL,CAAmB71D,OAAO61D,WAA1B,CACA,KAAKC,iBAAL,CAAyB91D,OAAO81D,iBAAhC,CAEA,KAAKpG,WAAL,CAAmB1vD,OAAO0vD,WAA1B,CAEA,KAAKK,QAAL,CAAgB/vD,OAAO+vD,QAAvB,CAEA,KAAKgG,MAAL,CAAc/1D,OAAO+1D,MAArB,CACA,KAAKC,OAAL,CAAeh2D,OAAOg2D,OAAtB,CACA,KAAKC,YAAL,CAAoBj2D,OAAOi2D,YAA3B,CACA,KAAK6F,eAAL,CAAuB97D,OAAO87D,eAA9B,CAEA,KAAKzG,SAAL,CAAiBr1D,OAAOq1D,SAAxB,CACA,KAAKC,kBAAL,CAA0Bt1D,OAAOs1D,kBAAjC,CACA,KAAKyG,gBAAL,CAAwB/7D,OAAO+7D,gBAA/B,CACA,KAAKC,iBAAL,CAAyBh8D,OAAOg8D,iBAAhC,CAEA,KAAKC,QAAL,CAAgBj8D,OAAOi8D,QAAvB,CACA,KAAK/5B,YAAL,CAAoBliC,OAAOkiC,YAA3B,CACA,KAAKC,YAAL,CAAoBniC,OAAOmiC,YAA3B,CAEA,WAAA,CAEA,CAtCD;;;;;;;;;;IAqDAxjC,MAAM09D,kBAAN,CAA2B,SAAWp1B,UAAX,CAAwB,CAElDtoC,MAAMk7D,QAAN,CAAe35D,IAAf,CAAqB,IAArB,CAA2B+mC,UAA3B,EAEA,KAAK3O,IAAL,CAAY,oBAAZ,CAEA,KAAK+8B,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CAEA,KAAKyE,GAAL,CAAW,KAAX,CACA,KAAKC,MAAL,CAAc,KAAd,CACA,KAAK93B,YAAL,CAAoB,KAApB,CAEA,KAAK84B,SAAL,CAAgB/zB,UAAhB,EAEA,CAfD,CAiBAtoC,MAAM09D,kBAAN,CAAyBj9D,SAAzB,CAAqCE,OAAOy2B,MAAP,CAAep3B,MAAMk7D,QAAN,CAAez6D,SAA9B,CAArC,CACAT,MAAM09D,kBAAN,CAAyBj9D,SAAzB,CAAmCoJ,WAAnC,CAAiD7J,MAAM09D,kBAAvD,CAEA19D,MAAM09D,kBAAN,CAAyBj9D,SAAzB,CAAmCsJ,IAAnC,CAA0C,SAAW1I,MAAX,CAAoB,CAE7DrB,MAAMk7D,QAAN,CAAez6D,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAKq1D,SAAL,CAAiBr1D,OAAOq1D,SAAxB,CACA,KAAKC,kBAAL,CAA0Bt1D,OAAOs1D,kBAAjC,CAEA,WAAA,CAEA,CATD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA+DA32D,MAAM29D,iBAAN,CAA0B,SAAWr1B,UAAX,CAAwB,CAEjDtoC,MAAMk7D,QAAN,CAAe35D,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,mBAAZ,CAEA,KAAKpuB,KAAL,CAAa,UAAUhC,KAAV,CAAiB,QAAjB,CAAb;CACA,KAAK0lD,QAAL,CAAgB,UAAU1lD,KAAV,CAAiB,QAAjB,CAAhB,CACA,KAAK4lD,SAAL,CAAiB,EAAjB,CAEA,KAAKpD,GAAL,CAAW,IAAX,CAEA,KAAK0D,QAAL,CAAgB,IAAhB,CACA,KAAK8H,iBAAL,CAAyB,GAAzB,CAEA,KAAKzH,KAAL,CAAa,IAAb,CACA,KAAK0H,cAAL,CAAsB,GAAtB,CAEA,KAAKtI,QAAL,CAAgB,UAAU3lD,KAAV,CAAiB,QAAjB,CAAhB,CACA,KAAK4tD,iBAAL,CAAyB,GAAzB,CACA,KAAKD,WAAL,CAAmB,IAAnB,CAEA,KAAK/G,OAAL,CAAe,IAAf,CACA,KAAKK,SAAL,CAAiB,CAAjB,CAEA,KAAKC,SAAL,CAAiB,IAAjB,CACA,KAAKK,WAAL,CAAmB,UAAU18C,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAnB,CAEA,KAAKyiD,eAAL,CAAuB,IAAvB,CACA,KAAKC,iBAAL,CAAyB,CAAzB,CACA,KAAKC,gBAAL,CAAwB,CAAxB,CAEA,KAAKhG,WAAL,CAAmB,IAAnB,CAEA,KAAKK,QAAL,CAAgB,IAAhB,CAEA,KAAKgG,MAAL,CAAc,IAAd,CACA,KAAKC,OAAL,CAAer3D,MAAM6E,iBAArB,CACA,KAAKyyD,YAAL,CAAoB,CAApB,CACA,KAAK6F,eAAL,CAAuB,IAAvB,CAEA,KAAKzG,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CACA,KAAKyG,gBAAL,CAAwB,OAAxB,CACA,KAAKC,iBAAL,CAAyB,OAAzB,CAEA,KAAKC,QAAL,CAAgB,KAAhB,CACA,KAAK/5B,YAAL,CAAoB,KAApB,CACA,KAAKC,YAAL,CAAoB,KAApB,CAEA,KAAK64B,SAAL,CAAgB/zB,UAAhB,EAEA,CApDD,CAsDAtoC,MAAM29D,iBAAN,CAAwBl9D,SAAxB,CAAoCE,OAAOy2B,MAAP,CAAep3B,MAAMk7D,QAAN,CAAez6D,SAA9B,CAApC,CACAT,MAAM29D,iBAAN,CAAwBl9D,SAAxB,CAAkCoJ,WAAlC,CAAgD7J,MAAM29D,iBAAtD,CAEA39D,MAAM29D,iBAAN,CAAwBl9D,SAAxB,CAAkCsJ,IAAlC,CAAyC,SAAW1I,MAAX,CAAoB,CAE5DrB,MAAMk7D,QAAN,CAAez6D,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAKkK,KAAL,CAAWxB,IAAX,CAAiB1I,OAAOkK,KAAxB,EACA,KAAK0jD,QAAL,CAAcllD,IAAd,CAAoB1I,OAAO4tD,QAA3B,EACA,KAAKE,SAAL,CAAiB9tD,OAAO8tD,SAAxB,CAEA,KAAKpD,GAAL,CAAW1qD,OAAO0qD,GAAlB,CAEA,KAAK0D,QAAL,CAAgBpuD,OAAOouD,QAAvB,CACA,KAAK8H,iBAAL,CAAyBl2D,OAAOk2D,iBAAhC,CAEA,KAAKzH,KAAL,CAAazuD,OAAOyuD,KAApB,CACA,KAAK0H,cAAL,CAAsBn2D,OAAOm2D,cAA7B,CAEA,KAAKtI,QAAL,CAAcnlD,IAAd,CAAoB1I,OAAO6tD,QAA3B,EACA,KAAKgI,WAAL,CAAmB71D,OAAO61D,WAA1B,CACA,KAAKC,iBAAL,CAAyB91D,OAAO81D,iBAAhC,CAEA,KAAKhH,OAAL,CAAe9uD,OAAO8uD,OAAtB,CACA,KAAKK,SAAL,CAAiBnvD,OAAOmvD,SAAxB,CAEA,KAAKC,SAAL,CAAiBpvD,OAAOovD,SAAxB,CACA,KAAKK,WAAL,CAAiB/mD,IAAjB,CAAuB1I,OAAOyvD,WAA9B,EAEA,KAAK+F,eAAL,CAAuBx1D,OAAOw1D,eAA9B,CACA,KAAKC,iBAAL,CAAyBz1D,OAAOy1D,iBAAhC,CACA,KAAKC,gBAAL,CAAwB11D,OAAO01D,gBAA/B,CAEA,KAAKhG,WAAL,CAAmB1vD,OAAO0vD,WAA1B,CAEA,KAAKK,QAAL,CAAgB/vD,OAAO+vD,QAAvB,CAEA,KAAKgG,MAAL,CAAc/1D,OAAO+1D,MAArB,CACA,KAAKC,OAAL,CAAeh2D,OAAOg2D,OAAtB,CACA,KAAKC,YAAL,CAAoBj2D,OAAOi2D,YAA3B,CACA,KAAK6F,eAAL,CAAuB97D,OAAO87D,eAA9B,CAEA,KAAKzG,SAAL,CAAiBr1D,OAAOq1D,SAAxB,CACA,KAAKC,kBAAL,CAA0Bt1D,OAAOs1D,kBAAjC,CACA,KAAKyG,gBAAL,CAAwB/7D,OAAO+7D,gBAA/B,CACA,KAAKC,iBAAL,CAAyBh8D,OAAOg8D,iBAAhC,CAEA,KAAKC,QAAL,CAAgBj8D,OAAOi8D,QAAvB,CACA,KAAK/5B,YAAL,CAAoBliC,OAAOkiC,YAA3B,CACA,KAAKC,YAAL,CAAoBniC,OAAOmiC,YAA3B,CAEA,WAAA,CAEA,CAlDD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAyGAxjC,MAAM49D,oBAAN,CAA6B,SAAWt1B,UAAX,CAAwB,CAEpDtoC,MAAMk7D,QAAN,CAAe35D,IAAf,CAAqB,IAArB,EAEA,KAAKs8D,OAAL,CAAe,CAAE,WAAY,EAAd,CAAf,CAEA,KAAKlkC,IAAL,CAAY,sBAAZ,CAEA,KAAKpuB,KAAL,CAAa,UAAUhC,KAAV,CAAiB,QAAjB,CAAb;CACA,KAAKysD,SAAL,CAAiB,GAAjB,CACA,KAAKC,SAAL,CAAiB,GAAjB,CAEA,KAAKlK,GAAL,CAAW,IAAX,CAEA,KAAK0D,QAAL,CAAgB,IAAhB,CACA,KAAK8H,iBAAL,CAAyB,GAAzB,CAEA,KAAKzH,KAAL,CAAa,IAAb,CACA,KAAK0H,cAAL,CAAsB,GAAtB,CAEA,KAAKtI,QAAL,CAAgB,UAAU3lD,KAAV,CAAiB,QAAjB,CAAhB,CACA,KAAK4tD,iBAAL,CAAyB,GAAzB,CACA,KAAKD,WAAL,CAAmB,IAAnB,CAEA,KAAK/G,OAAL,CAAe,IAAf,CACA,KAAKK,SAAL,CAAiB,CAAjB,CAEA,KAAKC,SAAL,CAAiB,IAAjB,CACA,KAAKK,WAAL,CAAmB,UAAU18C,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAnB,CAEA,KAAKyiD,eAAL,CAAuB,IAAvB,CACA,KAAKC,iBAAL,CAAyB,CAAzB,CACA,KAAKC,gBAAL,CAAwB,CAAxB,CAEA,KAAKC,YAAL,CAAoB,IAApB,CAEA,KAAKC,YAAL,CAAoB,IAApB,CAEA,KAAK7F,QAAL,CAAgB,IAAhB,CAEA,KAAKgG,MAAL,CAAc,IAAd,CACA,KAAK0G,eAAL,CAAuB,GAAvB,CAEA,KAAKX,eAAL,CAAuB,IAAvB,CAEA,KAAKzG,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CACA,KAAKyG,gBAAL,CAAwB,OAAxB,CACA,KAAKC,iBAAL,CAAyB,OAAzB,CAEA,KAAKC,QAAL,CAAgB,KAAhB,CACA,KAAK/5B,YAAL,CAAoB,KAApB,CACA,KAAKC,YAAL,CAAoB,KAApB,CAEA,KAAK64B,SAAL,CAAgB/zB,UAAhB,EAEA,CAxDD,CA0DAtoC,MAAM49D,oBAAN,CAA2Bn9D,SAA3B,CAAuCE,OAAOy2B,MAAP,CAAep3B,MAAMk7D,QAAN,CAAez6D,SAA9B,CAAvC,CACAT,MAAM49D,oBAAN,CAA2Bn9D,SAA3B,CAAqCoJ,WAArC,CAAmD7J,MAAM49D,oBAAzD,CAEA59D,MAAM49D,oBAAN,CAA2Bn9D,SAA3B,CAAqCsJ,IAArC,CAA4C,SAAW1I,MAAX,CAAoB,CAE/DrB,MAAMk7D,QAAN,CAAez6D,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAKw8D,OAAL,CAAe,CAAE,WAAY,EAAd,CAAf,CAEA,KAAKtyD,KAAL,CAAWxB,IAAX,CAAiB1I,OAAOkK,KAAxB,EACA,KAAKyqD,SAAL,CAAiB30D,OAAO20D,SAAxB,CACA,KAAKC,SAAL,CAAiB50D,OAAO40D,SAAxB,CAEA,KAAKlK,GAAL,CAAW1qD,OAAO0qD,GAAlB,CAEA,KAAK0D,QAAL,CAAgBpuD,OAAOouD,QAAvB,CACA,KAAK8H,iBAAL,CAAyBl2D,OAAOk2D,iBAAhC,CAEA,KAAKzH,KAAL,CAAazuD,OAAOyuD,KAApB,CACA,KAAK0H,cAAL,CAAsBn2D,OAAOm2D,cAA7B,CAEA,KAAKtI,QAAL,CAAcnlD,IAAd,CAAoB1I,OAAO6tD,QAA3B,EACA,KAAKgI,WAAL,CAAmB71D,OAAO61D,WAA1B,CACA,KAAKC,iBAAL,CAAyB91D,OAAO81D,iBAAhC,CAEA,KAAKhH,OAAL,CAAe9uD,OAAO8uD,OAAtB,CACA,KAAKK,SAAL,CAAiBnvD,OAAOmvD,SAAxB,CAEA,KAAKC,SAAL,CAAiBpvD,OAAOovD,SAAxB,CACA,KAAKK,WAAL,CAAiB/mD,IAAjB,CAAuB1I,OAAOyvD,WAA9B,EAEA,KAAK+F,eAAL,CAAuBx1D,OAAOw1D,eAA9B,CACA,KAAKC,iBAAL,CAAyBz1D,OAAOy1D,iBAAhC,CACA,KAAKC,gBAAL,CAAwB11D,OAAO01D,gBAA/B,CAEA,KAAKC,YAAL,CAAoB31D,OAAO21D,YAA3B,CAEA,KAAKC,YAAL,CAAoB51D,OAAO41D,YAA3B,CAEA,KAAK7F,QAAL,CAAgB/vD,OAAO+vD,QAAvB,CAEA,KAAKgG,MAAL,CAAc/1D,OAAO+1D,MAArB,CACA,KAAK0G,eAAL,CAAuBz8D,OAAOy8D,eAA9B,CAEA,KAAKX,eAAL,CAAuB97D,OAAO87D,eAA9B,CAEA,KAAKzG,SAAL,CAAiBr1D,OAAOq1D,SAAxB,CACA,KAAKC,kBAAL,CAA0Bt1D,OAAOs1D,kBAAjC,CACA,KAAKyG,gBAAL,CAAwB/7D,OAAO+7D,gBAA/B,CACA,KAAKC,iBAAL,CAAyBh8D,OAAOg8D,iBAAhC,CAEA,KAAKC,QAAL,CAAgBj8D,OAAOi8D,QAAvB,CACA,KAAK/5B,YAAL,CAAoBliC,OAAOkiC,YAA3B,CACA,KAAKC,YAAL,CAAoBniC,OAAOmiC,YAA3B,CAEA,WAAA,CAEA,CAtDD;;;;;;;IAkEAxjC,MAAM+9D,oBAAN,CAA6B,SAAWz1B,UAAX,CAAwB,CAEpDtoC,MAAM49D,oBAAN,CAA2Br8D,IAA3B,CAAiC,IAAjC,EAEA,KAAKs8D,OAAL,CAAe,CAAE,WAAY,EAAd,CAAf,CAEA,KAAKlkC,IAAL,CAAY,sBAAZ,CAEA,KAAK29B,YAAL,CAAoB,GAApB;CAEA,KAAK+E,SAAL,CAAgB/zB,UAAhB,EAEA,CAZD,CAcAtoC,MAAM+9D,oBAAN,CAA2Bt9D,SAA3B,CAAuCE,OAAOy2B,MAAP,CAAep3B,MAAM49D,oBAAN,CAA2Bn9D,SAA1C,CAAvC,CACAT,MAAM+9D,oBAAN,CAA2Bt9D,SAA3B,CAAqCoJ,WAArC,CAAmD7J,MAAM+9D,oBAAzD,CAEA/9D,MAAM+9D,oBAAN,CAA2Bt9D,SAA3B,CAAqCsJ,IAArC,CAA4C,SAAW1I,MAAX,CAAoB,CAE/DrB,MAAM49D,oBAAN,CAA2Bn9D,SAA3B,CAAqCsJ,IAArC,CAA0CxI,IAA1C,CAAgD,IAAhD,CAAsDF,MAAtD,EAEA,KAAKw8D,OAAL,CAAe,CAAE,WAAY,EAAd,CAAf,CAEA,KAAKvG,YAAL,CAAoBj2D,OAAOi2D,YAA3B,CAEA,WAAA,CAEA,CAVD;;;IAkBAt3D,MAAMg+D,aAAN,CAAsB,SAAWn+B,SAAX,CAAuB,CAE5C,KAAK7P,IAAL,CAAYhwB,MAAMI,IAAN,CAAW0vB,YAAX,EAAZ,CAEA,KAAK6J,IAAL,CAAY,eAAZ,CAEA,KAAKkG,SAAL,CAAiBA,0BAAA,CAA6BA,SAA7B,CAAyC,EAA1D,CAEA,KAAKlE,OAAL,CAAe,IAAf,CAEA,CAVD,CAYA37B,MAAMg+D,aAAN,CAAoBv9D,SAApB,CAAgC,CAE/BoJ,YAAa7J,MAAMg+D,aAFY,CAI/Bv+B,OAAQ,gBAAWC,IAAX,CAAkB,CAEzB,WAAa,CACZM,SAAU,CACTC,QAAS,GADA,CAETtG,KAAM,UAFG,CAGTuG,UAAW,kBAHF,CADE,CAMZlQ,KAAM,KAAKA,IANC,CAOZ2J,KAAM,KAAKA,IAPC,CAQZkG,UAAW,EARC,CAAb,CAWA,cAAgB,KAAKA,SAArB,CAEA,IAAM,MAAQ,CAAR,CAAWj1B,EAAIi1B,UAAUz+B,MAA/B,CAAuCyb,EAAIjS,CAA3C,CAA8CiS,GAA9C,CAAqD,CAEpD,aAAegjB,UAAWhjB,CAAX,EAAe4iB,MAAf,CAAuBC,IAAvB,CAAf,CACA,gBAAgBM,QAAhB,CAEAv+B,OAAOo+B,SAAP,CAAiBhM,IAAjB,CAAuBwM,QAAvB,EAEA,CAED5+B,OAAOk6B,OAAP,CAAiB,KAAKA,OAAtB,CAEA,aAAA,CAEA,CAhC8B,CAkC/B5vB,MAAO,gBAAY,CAElB,aAAe,SAASlC,WAAT,EAAf,CAEA,IAAM,MAAQ,CAAd,CAAiBgT,EAAI,KAAKgjB,SAAL,CAAez+B,MAApC,CAA4Cyb,GAA5C,CAAmD,CAElDwjB,SAASR,SAAT,CAAmBhM,IAAnB,CAAyB,KAAKgM,SAAL,CAAgBhjB,CAAhB,EAAoB9Q,KAApB,EAAzB,EAEA,CAEDs0B,SAAS1E,OAAT,CAAmB,KAAKA,OAAxB,CAEA,eAAA,CAEA,CAhD8B,CAAhC;;;;;;;;;;;;;IAoEA37B,MAAMi+D,cAAN,CAAuB,SAAW31B,UAAX,CAAwB,CAE9CtoC,MAAMk7D,QAAN,CAAe35D,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,gBAAZ,CAEA,KAAKpuB,KAAL,CAAa,UAAUhC,KAAV,CAAiB,QAAjB,CAAb,CAEA,KAAKwiD,GAAL,CAAW,IAAX,CAEA,KAAKngD,IAAL,CAAY,CAAZ,CACA,KAAKgrD,eAAL,CAAuB,IAAvB,CAEA,KAAKyE,MAAL,CAAc,KAAd,CAEA,KAAKgB,SAAL,CAAgB/zB,UAAhB,EAEA,CAjBD,CAmBAtoC,MAAMi+D,cAAN,CAAqBx9D,SAArB,CAAiCE,OAAOy2B,MAAP,CAAep3B,MAAMk7D,QAAN,CAAez6D,SAA9B,CAAjC,CACAT,MAAMi+D,cAAN,CAAqBx9D,SAArB,CAA+BoJ,WAA/B,CAA6C7J,MAAMi+D,cAAnD,CAEAj+D,MAAMi+D,cAAN,CAAqBx9D,SAArB,CAA+BsJ,IAA/B,CAAsC,SAAW1I,MAAX,CAAoB,CAEzDrB,MAAMk7D,QAAN,CAAez6D,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAKkK,KAAL,CAAWxB,IAAX,CAAiB1I,OAAOkK,KAAxB,EAEA,KAAKwgD,GAAL,CAAW1qD,OAAO0qD,GAAlB,CAEA,KAAKngD,IAAL,CAAYvK,OAAOuK,IAAnB,CACA,KAAKgrD,eAAL,CAAuBv1D,OAAOu1D,eAA9B,CAEA,WAAA,CAEA,CAbD;;;;;;;;;;;;;;;;;;;;IAsCA52D,MAAMk+D,cAAN,CAAuB,SAAW51B,UAAX,CAAwB,CAE9CtoC,MAAMk7D,QAAN,CAAe35D,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,gBAAZ,CAEA,KAAKkkC,OAAL,CAAe,EAAf,CACA,KAAK3H,QAAL,CAAgB,EAAhB,CAEA,KAAKC,YAAL,CAAoB,+FAApB,CACA,KAAKC,cAAL,CAAsB,gEAAtB,CAEA,KAAKwG,SAAL,CAAiB,CAAjB,CAEA,KAAKlG,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CAEA,KAAKyE,GAAL,CAAW,KAAX;CACA,KAAKC,MAAL,CAAc,KAAd;CACA,KAAK8C,QAAL,CAAgB,KAAhB;CAEA,KAAKb,QAAL,CAAgB,KAAhB;CACA,KAAK/5B,YAAL,CAAoB,KAApB;CACA,KAAKC,YAAL,CAAoB,KAApB;CAEA,KAAK46B,UAAL,CAAkB,CACjBC,YAAa,KADI;CAEjBC,UAAW,KAFM;CAGjBC,YAAa,KAHI;CAIjBC,iBAAkB;CAJD,CAAlB;;CASA,KAAKC,sBAAL,CAA8B,CAC7B,QAAS,CAAE,CAAF,CAAK,CAAL,CAAQ,CAAR,CADoB,CAE7B,KAAM,CAAE,CAAF,CAAK,CAAL,CAFuB,CAG7B,MAAO,CAAE,CAAF,CAAK,CAAL,CAHsB,CAA9B,CAMA,KAAKC,mBAAL,CAA2Bv+D,SAA3B,CAEA,GAAKmoC,aAAenoC,SAApB,CAAgC,CAE/B,GAAKmoC,WAAWtpB,UAAX,GAA0B7e,SAA/B,CAA2C,CAE1CgL,QAAQuL,KAAR,CAAe,yFAAf,EAEA,CAED,KAAK2lD,SAAL,CAAgB/zB,UAAhB,EAEA,CAED,CAtDD,CAwDAtoC,MAAMk+D,cAAN,CAAqBz9D,SAArB,CAAiCE,OAAOy2B,MAAP,CAAep3B,MAAMk7D,QAAN,CAAez6D,SAA9B,CAAjC,CACAT,MAAMk+D,cAAN,CAAqBz9D,SAArB,CAA+BoJ,WAA/B,CAA6C7J,MAAMk+D,cAAnD,CAEAl+D,MAAMk+D,cAAN,CAAqBz9D,SAArB,CAA+BsJ,IAA/B,CAAsC,SAAW1I,MAAX,CAAoB,CAEzDrB,MAAMk7D,QAAN,CAAez6D,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAK+0D,cAAL,CAAsB/0D,OAAO+0D,cAA7B,CACA,KAAKD,YAAL,CAAoB90D,OAAO80D,YAA3B,CAEA,KAAKD,QAAL,CAAgBl2D,MAAM2+D,aAAN,CAAoB5yD,KAApB,CAA2B1K,OAAO60D,QAAlC,CAAhB,CAEA,KAAK2H,OAAL,CAAex8D,OAAOw8D,OAAtB,CAEA,KAAKnH,SAAL,CAAiBr1D,OAAOq1D,SAAxB,CACA,KAAKC,kBAAL,CAA0Bt1D,OAAOs1D,kBAAjC,CAEA,KAAK0E,MAAL,CAAch6D,OAAOg6D,MAArB,CACA,KAAK8C,QAAL,CAAgB98D,OAAO88D,QAAvB,CAEA,KAAKb,QAAL,CAAgBj8D,OAAOi8D,QAAvB,CAEA,KAAK/5B,YAAL,CAAoBliC,OAAOkiC,YAA3B,CACA,KAAKC,YAAL,CAAoBniC,OAAOmiC,YAA3B,CAEA,KAAK46B,UAAL,CAAkB/8D,OAAO+8D,UAAzB,CAEA,WAAA,CAEA,CA1BD,CA4BAp+D,MAAMk+D,cAAN,CAAqBz9D,SAArB,CAA+Bg/B,MAA/B,CAAwC,SAAWC,IAAX,CAAkB,CAEzD,SAAW1/B,MAAMk7D,QAAN,CAAez6D,SAAf,CAAyBg/B,MAAzB,CAAgCl+B,IAAhC,CAAsC,IAAtC,CAA4Cm+B,IAA5C,CAAX,CAEAe,KAAKy1B,QAAL,CAAgB,KAAKA,QAArB,CACAz1B,KAAK01B,YAAL,CAAoB,KAAKA,YAAzB,CACA11B,KAAK21B,cAAL,CAAsB,KAAKA,cAA3B,CAEA,WAAA,CAEA,CAVD;;;IAkBAp2D,MAAM4+D,iBAAN,CAA0B,SAAWt2B,UAAX,CAAwB,CAEjDtoC,MAAMk+D,cAAN,CAAqB38D,IAArB,CAA2B,IAA3B,CAAiC+mC,UAAjC,EAEA,KAAK3O,IAAL,CAAY,mBAAZ,CAEA,CAND,CAQA35B,MAAM4+D,iBAAN,CAAwBn+D,SAAxB,CAAoCE,OAAOy2B,MAAP,CAAep3B,MAAMk+D,cAAN,CAAqBz9D,SAApC,CAApC,CACAT,MAAM4+D,iBAAN,CAAwBn+D,SAAxB,CAAkCoJ,WAAlC,CAAgD7J,MAAM4+D,iBAAtD;;;;;;;;;;;;IAiBA5+D,MAAM6+D,cAAN,CAAuB,SAAWv2B,UAAX,CAAwB,CAE9CtoC,MAAMk7D,QAAN,CAAe35D,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,gBAAZ,CAEA,KAAKpuB,KAAL,CAAa,UAAUhC,KAAV,CAAiB,QAAjB,CAAb,CACA,KAAKwiD,GAAL,CAAW,IAAX,CAEA,KAAKlvB,QAAL,CAAgB,CAAhB,CAEA,KAAKu+B,GAAL,CAAW,KAAX,CACA,KAAKC,MAAL,CAAc,KAAd,CAEA,KAAKgB,SAAL,CAAgB/zB,UAAhB,EAEA,CAhBD,CAkBAtoC,MAAM6+D,cAAN,CAAqBp+D,SAArB,CAAiCE,OAAOy2B,MAAP,CAAep3B,MAAMk7D,QAAN,CAAez6D,SAA9B,CAAjC,CACAT,MAAM6+D,cAAN,CAAqBp+D,SAArB,CAA+BoJ,WAA/B,CAA6C7J,MAAM6+D,cAAnD,CAEA7+D,MAAM6+D,cAAN,CAAqBp+D,SAArB,CAA+BsJ,IAA/B,CAAsC,SAAW1I,MAAX,CAAoB,CAEzDrB,MAAMk7D,QAAN,CAAez6D,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAKkK,KAAL,CAAWxB,IAAX,CAAiB1I,OAAOkK,KAAxB,EACA,KAAKwgD,GAAL,CAAW1qD,OAAO0qD,GAAlB,CAEA,KAAKlvB,QAAL,CAAgBx7B,OAAOw7B,QAAvB,CAEA,WAAA,CAEA,CAXD;;;IAmBA78B,MAAM8+D,cAAN,CAAuB,UAAY,CAElC9+D,MAAMk+D,cAAN,CAAqB38D,IAArB,CAA2B,IAA3B,CAAiC,CAChC20D,SAAUl2D,MAAM2+D,aAAN,CAAoBl4B,KAApB,CAA2B,CACpCzmC,MAAM++D,WAAN,CAAmB,QAAnB,CADoC,CAEpC,CACCrN,QAAS,CAAE5nD,MAAO,GAAT,CADV,CAFoC,CAA3B,CADsB,CAOhCqsD,aAAcn2D,MAAMg/D,WAAN,CAAmB,aAAnB,CAPkB,CAQhC5I,eAAgBp2D,MAAMg/D,WAAN,CAAmB,aAAnB,CARgB,CAAjC,EAWA,KAAK3D,MAAL,CAAc,IAAd,CACA,KAAK1J,WAAL,CAAmB,IAAnB,CAEAhxD,OAAO26B,gBAAP,CAAyB,IAAzB,CAA+B,CAC9Bo2B,QAAS,CACR10B,WAAY,IADJ,CAERn8B,IAAK,cAAY,CAChB,YAAYq1D,QAAL,CAAcxE,OAAd,CAAsB5nD,KAA7B,CACA,CAJO,CAKRH,IAAK,aAAWG,KAAX,CAAmB,CACvB,KAAKosD,QAAL,CAAcxE,OAAd,CAAsB5nD,KAAtB,CAA8BA,KAA9B,CACA,CAPO,CADqB,CAA/B,EAYA,CA5BD,CA8BA9J,MAAM8+D,cAAN,CAAqBr+D,SAArB,CAAiCE,OAAOy2B,MAAP,CAAep3B,MAAMk+D,cAAN,CAAqBz9D,SAApC,CAAjC,CACAT,MAAM8+D,cAAN,CAAqBr+D,SAArB,CAA+BoJ,WAA/B,CAA6C7J,MAAM8+D,cAAnD;;;;;IAUA9+D,MAAMw5D,OAAN,CAAgB,SAAWlG,KAAX,CAAkBmG,OAAlB,CAA2B3K,KAA3B,CAAkCC,KAAlC,CAAyCrG,SAAzC,CAAoDC,SAApD,CAA+DF,MAA/D,CAAuE9uB,IAAvE,CAA6E+0B,UAA7E,CAAyFuQ,QAAzF,CAAoG,CAEnHt+D,OAAOC,cAAP,CAAuB,IAAvB,CAA6B,IAA7B,CAAmC,CAAEkJ,MAAO9J,MAAMk/D,cAAN,EAAT,CAAnC,EAEA,KAAKlvC,IAAL,CAAYhwB,MAAMI,IAAN,CAAW0vB,YAAX,EAAZ,CAEA,KAAKpvB,IAAL,CAAY,EAAZ,CACA,KAAKy+D,UAAL,CAAkB,EAAlB,CAEA,KAAK7L,KAAL,CAAaA,QAAUnzD,SAAV,CAAsBmzD,KAAtB,CAA8BtzD,MAAMw5D,OAAN,CAAc4F,aAAzD,CACA,KAAKxE,OAAL,CAAe,EAAf,CAEA,KAAKnB,OAAL,CAAeA,UAAYt5D,SAAZ,CAAwBs5D,OAAxB,CAAkCz5D,MAAMw5D,OAAN,CAAc6F,eAA/D,CAEA,KAAKvQ,KAAL,CAAaA,QAAU3uD,SAAV,CAAsB2uD,KAAtB,CAA8B9uD,MAAM8F,mBAAjD,CACA,KAAKipD,KAAL,CAAaA,QAAU5uD,SAAV,CAAsB4uD,KAAtB,CAA8B/uD,MAAM8F,mBAAjD,CAEA,KAAK4iD,SAAL,CAAiBA,YAAcvoD,SAAd,CAA0BuoD,SAA1B,CAAsC1oD,MAAMmG,YAA7D,CACA,KAAKwiD,SAAL,CAAiBA,YAAcxoD,SAAd,CAA0BwoD,SAA1B,CAAsC3oD,MAAMqG,wBAA7D,CAEA,KAAKqoD,UAAL,CAAkBA,aAAevuD,SAAf,CAA2BuuD,UAA3B,CAAwC,CAA1D,CAEA,KAAKjG,MAAL,CAAcA,SAAWtoD,SAAX,CAAuBsoD,MAAvB,CAAgCzoD,MAAMmH,UAApD,CACA,KAAKwyB,IAAL,CAAYA,OAASx5B,SAAT,CAAqBw5B,IAArB,CAA4B35B,MAAMsG,gBAA9C,CAEA,KAAK2H,MAAL,CAAc,UAAUmG,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAd,CACA,KAAKo6C,MAAL,CAAc,UAAUp6C,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAd,CAEA,KAAK+0C,eAAL,CAAuB,IAAvB,CACA,KAAKmW,gBAAL,CAAwB,KAAxB,CACA,KAAKC,KAAL,CAAa,IAAb,CACA,KAAKC,eAAL,CAAuB,CAAvB;;;;;CAOA,KAAKP,QAAL,CAAgBA,WAAa9+D,SAAb,CAAyB8+D,QAAzB,CAAqCj/D,MAAM6I,cAA3D,CAEA,KAAKo3B,OAAL,CAAe,CAAf,CACA,KAAK2M,QAAL,CAAgB,IAAhB,CAEA,CA3CD,CA6CA5sC,MAAMw5D,OAAN,CAAc4F,aAAd,CAA8Bj/D,SAA9B,CACAH,MAAMw5D,OAAN,CAAc6F,eAAd,CAAgCr/D,MAAMqF,SAAtC,CAEArF,MAAMw5D,OAAN,CAAc/4D,SAAd,CAA0B,CAEzBoJ,YAAa7J,MAAMw5D,OAFM,CAIzB,eAAA,CAAiB1vD,KAAjB,CAAyB,CAExB,GAAKA,QAAU,IAAf,CAAsB,KAAKm2B,OAAL,GAEtB,CARwB,CAUzBl0B,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CAdwB,CAgBzBA,KAAM,cAAW1I,MAAX,CAAoB,CAEzB,KAAKiyD,KAAL,CAAajyD,OAAOiyD,KAApB,CACA,KAAKsH,OAAL,CAAev5D,OAAOu5D,OAAP,CAAenuD,KAAf,CAAsB,CAAtB,CAAf,CAEA,KAAKgtD,OAAL,CAAep4D,OAAOo4D,OAAtB,CAEA,KAAK3K,KAAL,CAAaztD,OAAOytD,KAApB,CACA,KAAKC,KAAL,CAAa1tD,OAAO0tD,KAApB,CAEA,KAAKrG,SAAL,CAAiBrnD,OAAOqnD,SAAxB,CACA,KAAKC,SAAL,CAAiBtnD,OAAOsnD,SAAxB,CAEA,KAAK+F,UAAL,CAAkBrtD,OAAOqtD,UAAzB,CAEA,KAAKjG,MAAL,CAAcpnD,OAAOonD,MAArB,CACA,KAAK9uB,IAAL,CAAYt4B,OAAOs4B,IAAnB,CAEA,KAAK1rB,MAAL,CAAYlE,IAAZ,CAAkB1I,OAAO4M,MAAzB,EACA,KAAKugD,MAAL,CAAYzkD,IAAZ,CAAkB1I,OAAOmtD,MAAzB,EAEA,KAAKrF,eAAL,CAAuB9nD,OAAO8nD,eAA9B,CACA,KAAKmW,gBAAL,CAAwBj+D,OAAOi+D,gBAA/B,CACA,KAAKC,KAAL,CAAal+D,OAAOk+D,KAApB,CACA,KAAKC,eAAL,CAAuBn+D,OAAOm+D,eAA9B,CACA,KAAKP,QAAL,CAAgB59D,OAAO49D,QAAvB,CAEA,WAAA,CAEA,CA7CwB,CA+CzBx/B,OAAQ,gBAAWC,IAAX,CAAkB,CAEzB,GAAKA,KAAKI,QAAL,CAAe,KAAK9P,IAApB,IAA+B7vB,SAApC,CAAgD,CAE/C,YAAY2/B,QAAL,CAAe,KAAK9P,IAApB,CAAP,CAEA,CAED,mBAAA,CAAqBsjC,KAArB,CAA6B,CAE5B,UAAA,CAEA,GAAKA,MAAMmM,SAAN,GAAoBt/D,SAAzB,CAAqC,CAEpCu/D,OAASpM,KAAT,CAEA,CAJD,IAIO,CAENoM,OAAStM,SAASC,aAAT,CAAwB,QAAxB,CAAT,CACAqM,OAAOhV,KAAP,CAAe4I,MAAM5I,KAArB,CACAgV,OAAO/U,MAAP,CAAgB2I,MAAM3I,MAAtB,CAEA+U,OAAOC,UAAP,CAAmB,IAAnB,EAA0BC,SAA1B,CAAqCtM,KAArC,CAA4C,CAA5C,CAA+C,CAA/C,CAAkDA,MAAM5I,KAAxD,CAA+D4I,MAAM3I,MAArE,EAEA,CAED,GAAK+U,OAAOhV,KAAP,CAAe,IAAf,EAAuBgV,OAAO/U,MAAP,CAAgB,IAA5C,CAAmD,CAElD,cAAc8U,SAAP,CAAkB,YAAlB,CAAgC,GAAhC,CAAP,CAEA,CAJD,IAIO,CAEN,cAAcA,SAAP,CAAkB,WAAlB,CAAP,CAEA,CAED,CAED,WAAa,CACZz/B,SAAU,CACTC,QAAS,GADA,CAETtG,KAAM,SAFG,CAGTuG,UAAW,gBAHF,CADE,CAOZlQ,KAAM,KAAKA,IAPC,CAQZtvB,KAAM,KAAKA,IARC,CAUZ+4D,QAAS,KAAKA,OAVF,CAYZjL,OAAQ,CAAE,KAAKA,MAAL,CAAYjuD,CAAd,CAAiB,KAAKiuD,MAAL,CAAYpgD,CAA7B,CAZI,CAaZH,OAAQ,CAAE,KAAKA,MAAL,CAAY1N,CAAd,CAAiB,KAAK0N,MAAL,CAAYG,CAA7B,CAbI,CAcZqgD,KAAM,CAAE,KAAKK,KAAP,CAAc,KAAKC,KAAnB,CAdM,CAgBZpG,UAAW,KAAKA,SAhBJ,CAiBZD,UAAW,KAAKA,SAjBJ,CAkBZgG,WAAY,KAAKA,UAlBL,CAAb,CAqBA,GAAK,KAAK4E,KAAL,GAAenzD,SAApB,CAAgC;CAI/B,UAAY,KAAKmzD,KAAjB,CAEA,GAAKA,MAAMtjC,IAAN,GAAe7vB,SAApB,CAAgC,CAE/BmzD,MAAMtjC,IAAN,CAAahwB,MAAMI,IAAN,CAAW0vB,YAAX,EAAb;CAEA,CAED,GAAK4P,KAAKK,MAAL,CAAauzB,MAAMtjC,IAAnB,IAA8B7vB,SAAnC,CAA+C,CAE9Cu/B,KAAKK,MAAL,CAAauzB,MAAMtjC,IAAnB,EAA4B,CAC3BA,KAAMsjC,MAAMtjC,IADe,CAE3B+8B,IAAK8S,WAAYvM,KAAZ,CAFsB,CAA5B,CAKA,CAED7xD,OAAO6xD,KAAP,CAAeA,MAAMtjC,IAArB,CAEA,CAED0P,KAAKI,QAAL,CAAe,KAAK9P,IAApB,EAA6BvuB,MAA7B,CAEA,aAAA,CAEA,CAvIwB,CAyIzBioC,QAAS,kBAAY,CAEpB,KAAKtP,aAAL,CAAoB,CAAET,KAAM,SAAR,CAApB,EAEA,CA7IwB,CA+IzBmmC,YAAa,qBAAWp7B,EAAX,CAAgB,CAE5B,GAAK,KAAK+0B,OAAL,GAAiBz5D,MAAMqF,SAA5B,CAAyC,OAEzCq/B,GAAGj3B,QAAH,CAAa,KAAK+gD,MAAlB,EACA9pB,GAAGt3B,GAAH,CAAQ,KAAKa,MAAb,EAEA,GAAKy2B,GAAGnkC,CAAH,CAAO,CAAP,EAAYmkC,GAAGnkC,CAAH,CAAO,CAAxB,CAA4B,CAE3B,OAAS,KAAKuuD,KAAd,EAEC,WAAWjpD,cAAX,CAEC6+B,GAAGnkC,CAAH,CAAOmkC,GAAGnkC,CAAH,CAAOH,KAAKiK,KAAL,CAAYq6B,GAAGnkC,CAAf,CAAd,CACA,MAED,WAAWuF,mBAAX,CAEC4+B,GAAGnkC,CAAH,CAAOmkC,GAAGnkC,CAAH,CAAO,CAAP,CAAW,CAAX,CAAe,CAAtB,CACA,MAED,WAAWwF,sBAAX,CAEC,GAAK3F,KAAK8Q,GAAL,CAAU9Q,KAAKiK,KAAL,CAAYq6B,GAAGnkC,CAAf,EAAqB,CAA/B,IAAuC,CAA5C,CAAgD,CAE/CmkC,GAAGnkC,CAAH,CAAOH,KAAKiV,IAAL,CAAWqvB,GAAGnkC,CAAd,EAAoBmkC,GAAGnkC,CAA9B,CAEA,CAJD,IAIO,CAENmkC,GAAGnkC,CAAH,CAAOmkC,GAAGnkC,CAAH,CAAOH,KAAKiK,KAAL,CAAYq6B,GAAGnkC,CAAf,CAAd,CAEA,CACD,MAvBF,CA2BA,CAED,GAAKmkC,GAAGt2B,CAAH,CAAO,CAAP,EAAYs2B,GAAGt2B,CAAH,CAAO,CAAxB,CAA4B,CAE3B,OAAS,KAAK2gD,KAAd,EAEC,WAAWlpD,cAAX,CAEC6+B,GAAGt2B,CAAH,CAAOs2B,GAAGt2B,CAAH,CAAOhO,KAAKiK,KAAL,CAAYq6B,GAAGt2B,CAAf,CAAd,CACA,MAED,WAAWtI,mBAAX,CAEC4+B,GAAGt2B,CAAH,CAAOs2B,GAAGt2B,CAAH,CAAO,CAAP,CAAW,CAAX,CAAe,CAAtB,CACA,MAED,WAAWrI,sBAAX,CAEC,GAAK3F,KAAK8Q,GAAL,CAAU9Q,KAAKiK,KAAL,CAAYq6B,GAAGt2B,CAAf,EAAqB,CAA/B,IAAuC,CAA5C,CAAgD,CAE/Cs2B,GAAGt2B,CAAH,CAAOhO,KAAKiV,IAAL,CAAWqvB,GAAGt2B,CAAd,EAAoBs2B,GAAGt2B,CAA9B,CAEA,CAJD,IAIO,CAENs2B,GAAGt2B,CAAH,CAAOs2B,GAAGt2B,CAAH,CAAOhO,KAAKiK,KAAL,CAAYq6B,GAAGt2B,CAAf,CAAd,CAEA,CACD,MAvBF,CA2BA,CAED,GAAK,KAAKmxD,KAAV,CAAkB,CAEjB76B,GAAGt2B,CAAH,CAAO,EAAIs2B,GAAGt2B,CAAd,CAEA,CAED,CA1NwB,CAA1B,CA8NAzN,OAAOK,MAAP,CAAehB,MAAMw5D,OAAN,CAAc/4D,SAA7B,CAAwCT,MAAMy5B,eAAN,CAAsBh5B,SAA9D,EAEAT,MAAMk/D,cAAN,CAAuB,CAAvB;;;IAQAl/D,MAAM+/D,YAAN,CAAqB,SAAWrV,KAAX,CAAkBC,MAAlB,CAA0BhxB,IAA1B,CAAgC8/B,OAAhC,CAAyC3K,KAAzC,CAAgDC,KAAhD,CAAuDrG,SAAvD,CAAkEC,SAAlE,CAA6E+F,UAA7E,CAA0F,CAE7G1uD,MAAMw5D,OAAN,CAAcj4D,IAAd,CAAoB,IAApB,CAA0B,IAA1B,CAAgCk4D,OAAhC,CAAyC3K,KAAzC,CAAgDC,KAAhD,CAAuDrG,SAAvD,CAAkEC,SAAlE,CAA6E3oD,MAAMuH,WAAnF,CAAgGoyB,IAAhG,CAAsG+0B,UAAtG,EAEA,KAAK4E,KAAL,CAAa,CAAE5I,MAAOA,KAAT,CAAgBC,OAAQA,MAAxB,CAAb,CAEA,KAAKhxB,IAAL,CAAYA,OAASx5B,SAAT,CAAqBw5B,IAArB,CAA4B35B,MAAMyG,iBAA9C,CAEA,KAAKiiD,SAAL,CAAiBA,YAAcvoD,SAAd,CAA0BuoD,SAA1B,CAAsC1oD,MAAMgG,aAA7D,CACA,KAAK2iD,SAAL,CAAiBA,YAAcxoD,SAAd,CAA0BwoD,SAA1B,CAAsC3oD,MAAMgG,aAA7D,CAEA,KAAKu5D,KAAL,CAAa,KAAb,CACA,KAAKpW,eAAL,CAAwB,KAAxB,CAED,CAdD,CAgBAnpD,MAAM+/D,YAAN,CAAmBt/D,SAAnB,CAA+BE,OAAOy2B,MAAP,CAAep3B,MAAMw5D,OAAN,CAAc/4D,SAA7B,CAA/B,CACAT,MAAM+/D,YAAN,CAAmBt/D,SAAnB,CAA6BoJ,WAA7B,CAA2C7J,MAAM+/D,YAAjD;;;IAQA//D,MAAMggE,aAAN,CAAsB,SAAWN,MAAX,CAAmBjG,OAAnB,CAA4B3K,KAA5B,CAAmCC,KAAnC,CAA0CrG,SAA1C,CAAqDC,SAArD,CAAgEF,MAAhE,CAAwE9uB,IAAxE,CAA8E+0B,UAA9E,CAA2F,CAEhH1uD,MAAMw5D,OAAN,CAAcj4D,IAAd,CAAoB,IAApB,CAA0Bm+D,MAA1B,CAAkCjG,OAAlC,CAA2C3K,KAA3C,CAAkDC,KAAlD,CAAyDrG,SAAzD,CAAoEC,SAApE,CAA+EF,MAA/E,CAAuF9uB,IAAvF,CAA6F+0B,UAA7F,EAEA,KAAKxjB,WAAL,CAAmB,IAAnB,CAEA,CAND,CAQAlrC,MAAMggE,aAAN,CAAoBv/D,SAApB,CAAgCE,OAAOy2B,MAAP,CAAep3B,MAAMw5D,OAAN,CAAc/4D,SAA7B,CAAhC,CACAT,MAAMggE,aAAN,CAAoBv/D,SAApB,CAA8BoJ,WAA9B,CAA4C7J,MAAMggE,aAAlD;;;IAQAhgE,MAAMq6D,WAAN,CAAoB,SAAWt6B,MAAX,CAAmB05B,OAAnB,CAA4B3K,KAA5B,CAAmCC,KAAnC,CAA0CrG,SAA1C,CAAqDC,SAArD,CAAgEF,MAAhE,CAAwE9uB,IAAxE,CAA8E+0B,UAA9E,CAA0FuQ,QAA1F,CAAqG,CAExHl/B,OAASA,SAAW5/B,SAAX,CAAuB4/B,MAAvB,CAAgC,EAAzC,CACA05B,QAAUA,UAAYt5D,SAAZ,CAAwBs5D,OAAxB,CAAkCz5D,MAAMsF,qBAAlD,CAEAtF,MAAMw5D,OAAN,CAAcj4D,IAAd,CAAoB,IAApB,CAA0Bw+B,MAA1B,CAAkC05B,OAAlC,CAA2C3K,KAA3C,CAAkDC,KAAlD,CAAyDrG,SAAzD,CAAoEC,SAApE,CAA+EF,MAA/E,CAAuF9uB,IAAvF,CAA6F+0B,UAA7F,CAAyGuQ,QAAzG,EAEA,KAAKM,KAAL,CAAa,KAAb,CAEA,CATD,CAWAv/D,MAAMq6D,WAAN,CAAkB55D,SAAlB,CAA8BE,OAAOy2B,MAAP,CAAep3B,MAAMw5D,OAAN,CAAc/4D,SAA7B,CAA9B,CACAT,MAAMq6D,WAAN,CAAkB55D,SAAlB,CAA4BoJ,WAA5B,CAA0C7J,MAAMq6D,WAAhD,CAEA15D,OAAOC,cAAP,CAAuBZ,MAAMq6D,WAAN,CAAkB55D,SAAzC,CAAoD,QAApD,CAA8D,CAE7DI,IAAK,cAAY,CAEhB,YAAYyyD,KAAZ,CAEA,CAN4D,CAQ7D3pD,IAAK,aAAWG,KAAX,CAAmB,CAEvB,KAAKwpD,KAAL,CAAaxpD,KAAb,CAEA,CAZ4D,CAA9D;;;IAsBA9J,MAAM+6D,iBAAN,CAA0B,SAAWH,OAAX,CAAoBlQ,KAApB,CAA2BC,MAA3B,CAAmClC,MAAnC,CAA2C9uB,IAA3C,CAAiD8/B,OAAjD,CAA0D3K,KAA1D,CAAiEC,KAAjE,CAAwErG,SAAxE,CAAmFC,SAAnF,CAA8F+F,UAA9F,CAA0GuQ,QAA1G,CAAqH,CAE9Ij/D,MAAMw5D,OAAN,CAAcj4D,IAAd,CAAoB,IAApB,CAA0B,IAA1B,CAAgCk4D,OAAhC,CAAyC3K,KAAzC,CAAgDC,KAAhD,CAAuDrG,SAAvD,CAAkEC,SAAlE,CAA6EF,MAA7E,CAAqF9uB,IAArF,CAA2F+0B,UAA3F,CAAuGuQ,QAAvG,EAEA,KAAK3L,KAAL,CAAa,CAAE5I,MAAOA,KAAT,CAAgBC,OAAQA,MAAxB,CAAb,CACA,KAAKiQ,OAAL,CAAeA,OAAf;;CAKA,KAAK2E,KAAL,CAAa,KAAb;;CAKA,KAAKpW,eAAL,CAAuB,KAAvB,CAEA,CAjBD,CAmBAnpD,MAAM+6D,iBAAN,CAAwBt6D,SAAxB,CAAoCE,OAAOy2B,MAAP,CAAep3B,MAAMw5D,OAAN,CAAc/4D,SAA7B,CAApC,CACAT,MAAM+6D,iBAAN,CAAwBt6D,SAAxB,CAAkCoJ,WAAlC,CAAgD7J,MAAM+6D,iBAAtD;;;IAQA/6D,MAAM06D,WAAN,CAAoB,SAAWj6B,IAAX,CAAiBiqB,KAAjB,CAAwBC,MAAxB,CAAgClC,MAAhC,CAAwC9uB,IAAxC,CAA8C8/B,OAA9C,CAAuD3K,KAAvD,CAA8DC,KAA9D,CAAqErG,SAArE,CAAgFC,SAAhF,CAA2F+F,UAA3F,CAAuGuQ,QAAvG,CAAkH,CAErIj/D,MAAMw5D,OAAN,CAAcj4D,IAAd,CAAoB,IAApB,CAA0B,IAA1B,CAAgCk4D,OAAhC,CAAyC3K,KAAzC,CAAgDC,KAAhD,CAAuDrG,SAAvD,CAAkEC,SAAlE,CAA6EF,MAA7E,CAAqF9uB,IAArF,CAA2F+0B,UAA3F,CAAuGuQ,QAAvG,EAEA,KAAK3L,KAAL,CAAa,CAAE7yB,KAAMA,IAAR,CAAciqB,MAAOA,KAArB,CAA4BC,OAAQA,MAApC,CAAb,CAEA,KAAKjC,SAAL,CAAiBA,YAAcvoD,SAAd,CAA0BuoD,SAA1B,CAAsC1oD,MAAMgG,aAA7D,CACA,KAAK2iD,SAAL,CAAiBA,YAAcxoD,SAAd,CAA0BwoD,SAA1B,CAAsC3oD,MAAMgG,aAA7D,CAEA,KAAKu5D,KAAL,CAAa,KAAb,CACA,KAAKpW,eAAL,CAAwB,KAAxB,CAEA,CAZD,CAcAnpD,MAAM06D,WAAN,CAAkBj6D,SAAlB,CAA8BE,OAAOy2B,MAAP,CAAep3B,MAAMw5D,OAAN,CAAc/4D,SAA7B,CAA9B,CACAT,MAAM06D,WAAN,CAAkBj6D,SAAlB,CAA4BoJ,WAA5B,CAA0C7J,MAAM06D,WAAhD;;;IAQA16D,MAAMigE,YAAN,CAAqB,SAAWC,KAAX,CAAkBzG,OAAlB,CAA2B3K,KAA3B,CAAkCC,KAAlC,CAAyCrG,SAAzC,CAAoDC,SAApD,CAA+DF,MAA/D,CAAuE9uB,IAAvE,CAA6E+0B,UAA7E,CAA0F,CAE9G1uD,MAAMw5D,OAAN,CAAcj4D,IAAd,CAAoB,IAApB,CAA0B2+D,KAA1B,CAAiCzG,OAAjC,CAA0C3K,KAA1C,CAAiDC,KAAjD,CAAwDrG,SAAxD,CAAmEC,SAAnE,CAA8EF,MAA9E,CAAsF9uB,IAAtF,CAA4F+0B,UAA5F,EAEA,KAAKvF,eAAL,CAAuB,KAAvB,CAEA,UAAY,IAAZ,CAEA,eAAA,EAAkB,CAEjBgX,sBAAuBpxD,MAAvB,EAEA,GAAKmxD,MAAME,UAAN,EAAoBF,MAAMG,iBAA/B,CAAmD,CAElDvhD,MAAMosB,WAAN,CAAoB,IAApB,CAEA,CAED,CAEDn8B,SAEA,CAtBD,CAwBA/O,MAAMigE,YAAN,CAAmBx/D,SAAnB,CAA+BE,OAAOy2B,MAAP,CAAep3B,MAAMw5D,OAAN,CAAc/4D,SAA7B,CAA/B,CACAT,MAAMigE,YAAN,CAAmBx/D,SAAnB,CAA6BoJ,WAA7B,CAA2C7J,MAAMigE,YAAjD;;;IAQAjgE,MAAM+5D,KAAN,CAAc,UAAY,CAEzB/5D,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,OAAZ,CAEA,CAND,CAQA35B,MAAM+5D,KAAN,CAAYt5D,SAAZ,CAAwBE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAf,CAA0D,CAEjFoJ,YAAa7J,MAAM+5D,KAF8D,CAA1D,CAAxB;;;IAYA/5D,MAAMm7B,MAAN,CAAe,SAAWxc,QAAX,CAAqB0hB,QAArB,CAAgC,CAE9CrgC,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,QAAZ,CAEA,KAAKhb,QAAL,CAAgBA,WAAaxe,SAAb,CAAyBwe,QAAzB,CAAoC,UAAUI,cAAV,EAApD,CACA,KAAKshB,QAAL,CAAgBA,WAAalgC,SAAb,CAAyBkgC,QAAzB,CAAoC,UAAU49B,cAAV,CAA0B,CAAE1yD,MAAOnL,KAAK8vB,MAAL,GAAgB,QAAzB,CAA1B,CAApD,CAEA,CATD,CAWAlwB,MAAMm7B,MAAN,CAAa16B,SAAb,CAAyBE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAf,CAA0D,CAElFoJ,YAAa7J,MAAMm7B,MAF+D,CAIlFS,QAAW,UAAY,CAEtB,kBAAoB,UAAU/jB,OAAV,EAApB,CACA,QAAU,UAAUgR,GAAV,EAAV,CACA,WAAa,UAAUpJ,MAAV,EAAb,CAEA,uBAAO,CAAkB+b,SAAlB,CAA6BC,UAA7B,CAA0C,CAEhD,WAAa,IAAb,CACA,aAAe,KAAK9c,QAApB,CACA,gBAAkB,KAAK1G,WAAvB,CACA,cAAgBujB,UAAUT,MAAV,CAAiBI,MAAjB,CAAwBC,SAAxC;CAIA,GAAKzc,SAASwP,cAAT,GAA4B,IAAjC,CAAwCxP,SAASyP,qBAAT,GAExCjP,OAAOpV,IAAP,CAAa4U,SAASwP,cAAtB,EACAhP,OAAOpI,YAAP,CAAqBkB,WAArB,EAEA,GAAKujB,UAAUxS,GAAV,CAAc9J,gBAAd,CAAgCC,MAAhC,IAA6C,KAAlD,CAA0D;CAI1DmhD,cAActoD,UAAd,CAA0BC,WAA1B,EACA+Q,IAAIjf,IAAJ,CAAUyxB,UAAUxS,GAApB,EAA0BjS,YAA1B,CAAwCupD,aAAxC,EAEA,mBAAqBllC,WAAc,CAAE,KAAK3U,KAAL,CAAWlmB,CAAX,CAAe,KAAKkmB,KAAL,CAAWrY,CAA1B,CAA8B,KAAKqY,KAAL,CAAWpY,CAA3C,EAAiD,CAA/D,CAArB,CACA,qBAAuBkyD,eAAiBA,cAAxC,CACA,aAAe,UAAUxvD,OAAV,EAAf,CAEA,kBAAA,CAAoBiL,KAApB,CAA2B9a,KAA3B,CAAmC,CAElC,uBAAyB8nB,IAAIG,iBAAJ,CAAuBnN,KAAvB,CAAzB,CAEA,GAAKwkD,mBAAqBC,gBAA1B,CAA6C,CAE5C,mBAAqBz3C,IAAI1M,mBAAJ,CAAyBN,KAAzB,CAArB,CACA0kD,eAAe3pD,YAAf,CAA6BkB,WAA7B,EAEA,aAAeujB,UAAUxS,GAAV,CAAcF,MAAd,CAAqBnT,UAArB,CAAiC+qD,cAAjC,CAAf,CAEA,GAAK9kD,SAAW4f,UAAUvT,IAArB,EAA6BrM,SAAW4f,UAAUtT,GAAvD,CAA6D,OAE7DuT,WAAW5H,IAAX,CAAiB,CAEhBjY,SAAUA,QAFM,CAGhB+kD,cAAevgE,KAAKkM,IAAL,CAAWk0D,kBAAX,CAHC,CAIhBxkD,MAAO0kD,eAAe30D,KAAf,EAJS,CAKhB7K,MAAOA,KALS,CAMhBmjC,KAAM,IANU,CAOhB9lB,OAAQA,MAPQ,CAAjB,EAWA,CAED,CAED,GAAKI,0BAA0BI,cAA/B,CAAgD,CAE/C,UAAYJ,SAASzd,KAArB,CACA,eAAiByd,SAASK,UAA1B,CACA,cAAgBA,WAAWuI,QAAX,CAAoBvZ,KAApC,CAEA,GAAK9M,QAAU,IAAf,CAAsB,CAErB,YAAcA,MAAM8M,KAApB,CAEA,IAAM,MAAQ,CAAR,CAAW4O,GAAKglB,QAAQxgC,MAA9B,CAAsCyb,EAAID,EAA1C,CAA8CC,GAA9C,CAAqD,CAEpD,MAAQ+kB,QAAS/kB,CAAT,CAAR,CAEA0K,SAASxZ,SAAT,CAAoBkR,SAApB,CAA+BtN,EAAI,CAAnC,EAEAivD,UAAWr5C,QAAX,CAAqB5V,CAArB,EAEA,CAED,CAdD,IAcO,CAEN,IAAM,MAAQ,CAAR,CAAW/G,EAAIqU,UAAU7d,MAAV,CAAmB,CAAxC,CAA2Cyb,EAAIjS,CAA/C,CAAkDiS,GAAlD,CAAyD,CAExD0K,SAASxZ,SAAT,CAAoBkR,SAApB,CAA+BpC,EAAI,CAAnC,EAEA+jD,UAAWr5C,QAAX,CAAqB1K,CAArB,EAEA,CAED,CAED,CAhCD,IAgCO,CAEN,aAAe8B,SAASE,QAAxB,CAEA,IAAM,MAAQ,CAAR,CAAWjU,EAAIiU,SAASzd,MAA9B,CAAsCyb,EAAIjS,CAA1C,CAA6CiS,GAA7C,CAAoD,CAEnD+jD,UAAW/hD,SAAUhC,CAAV,CAAX,CAA0BA,CAA1B,EAEA,CAED,CAED,CAjGD,CAmGA,CAzGU,EAJuE,CA+GlF9Q,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,CAAsB,KAAK8U,QAA3B,CAAqC,KAAK0hB,QAA1C,EAAqDt2B,IAArD,CAA2D,IAA3D,CAAP,CAEA,CAnHiF,CAA1D,CAAzB;;;IA6HA/J,MAAMi7B,IAAN,CAAa,SAAWtc,QAAX,CAAqB0hB,QAArB,CAA+BqP,IAA/B,CAAsC,CAElD,GAAKA,OAAS,CAAd,CAAkB,CAEjBvkC,QAAQC,IAAR,CAAc,iGAAd,EACA,iBAAiBy1D,YAAV,CAAwBliD,QAAxB,CAAkC0hB,QAAlC,CAAP,CAEA,CAEDrgC,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,MAAZ,CAEA,KAAKhb,QAAL,CAAgBA,WAAaxe,SAAb,CAAyBwe,QAAzB,CAAoC,UAAUI,cAAV,EAApD,CACA,KAAKshB,QAAL,CAAgBA,WAAalgC,SAAb,CAAyBkgC,QAAzB,CAAoC,UAAUs8B,iBAAV,CAA6B,CAAEpxD,MAAOnL,KAAK8vB,MAAL,GAAgB,QAAzB,CAA7B,CAApD,CAEA,CAhBD,CAkBAlwB,MAAMi7B,IAAN,CAAWx6B,SAAX,CAAuBE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAf,CAA0D,CAEhFoJ,YAAa7J,MAAMi7B,IAF6D,CAIhFW,QAAW,UAAY,CAEtB,kBAAoB,UAAU/jB,OAAV,EAApB,CACA,QAAU,UAAUgR,GAAV,EAAV,CACA,WAAa,UAAUpJ,MAAV,EAAb,CAEA,uBAAO,CAAkB+b,SAAlB,CAA6BC,UAA7B,CAA0C,CAEhD,cAAgBD,UAAUO,aAA1B,CACA,gBAAkB4L,UAAYA,SAA9B,CAEA,aAAe,KAAKhpB,QAApB,CACA,gBAAkB,KAAK1G,WAAvB;CAIA,GAAK0G,SAASwP,cAAT,GAA4B,IAAjC,CAAwCxP,SAASyP,qBAAT,GAExCjP,OAAOpV,IAAP,CAAa4U,SAASwP,cAAtB,EACAhP,OAAOpI,YAAP,CAAqBkB,WAArB,EAEA,GAAKujB,UAAUxS,GAAV,CAAc9J,gBAAd,CAAgCC,MAAhC,IAA6C,KAAlD,CAA0D;CAI1DmhD,cAActoD,UAAd,CAA0BC,WAA1B,EACA+Q,IAAIjf,IAAJ,CAAUyxB,UAAUxS,GAApB,EAA0BjS,YAA1B,CAAwCupD,aAAxC,EAEA,WAAa,UAAUvvD,OAAV,EAAb,CACA,SAAW,UAAUA,OAAV,EAAX,CACA,iBAAmB,UAAUA,OAAV,EAAnB,CACA,aAAe,UAAUA,OAAV,EAAf,CACA,SAAW,sBAAsB8vD,YAAtB,CAAqC,CAArC,CAAyC,CAApD,CAEA,GAAKliD,0BAA0BI,cAA/B,CAAgD,CAE/C,UAAYJ,SAASzd,KAArB,CACA,eAAiByd,SAASK,UAA1B,CACA,cAAgBA,WAAWuI,QAAX,CAAoBvZ,KAApC,CAEA,GAAK9M,QAAU,IAAf,CAAsB,CAErB,YAAcA,MAAM8M,KAApB,CAEA,IAAM,MAAQ,CAAR,CAAWpD,EAAIg3B,QAAQxgC,MAAR,CAAiB,CAAtC,CAAyCyb,EAAIjS,CAA7C,CAAgDiS,GAAKikD,IAArD,CAA4D,CAE3D,MAAQl/B,QAAS/kB,CAAT,CAAR,CACA,MAAQ+kB,QAAS/kB,EAAI,CAAb,CAAR,CAEAkkD,OAAOhzD,SAAP,CAAkBkR,SAAlB,CAA6BtN,EAAI,CAAjC,EACAqvD,KAAKjzD,SAAL,CAAgBkR,SAAhB,CAA2BvV,EAAI,CAA/B,EAEA,WAAasf,IAAII,mBAAJ,CAAyB23C,MAAzB,CAAiCC,IAAjC,CAAuCC,QAAvC,CAAiDC,YAAjD,CAAb,CAEA,GAAKC,OAASC,WAAd,CAA4B,SAE5BH,SAASlqD,YAAT,CAAuB,KAAKkB,WAA5B;CAEA,aAAeujB,UAAUxS,GAAV,CAAcF,MAAd,CAAqBnT,UAArB,CAAiCsrD,QAAjC,CAAf,CAEA,GAAKrlD,SAAW4f,UAAUvT,IAArB,EAA6BrM,SAAW4f,UAAUtT,GAAvD,CAA6D,SAE7DuT,WAAW5H,IAAX,CAAiB,CAEhBjY,SAAUA,QAFM;;CAKhBI,MAAOklD,aAAan1D,KAAb,GAAqBgL,YAArB,CAAmC,KAAKkB,WAAxC,CALS,CAMhB/W,MAAO2b,CANS,CAOhBwnB,KAAM,IAPU,CAQhBg9B,UAAW,IARK,CAShB9iD,OAAQ,IATQ,CAAjB,EAaA,CAED,CArCD,IAqCO,CAEN,IAAM,MAAQ,CAAR,CAAW3T,EAAIqU,UAAU7d,MAAV,CAAmB,CAAnB,CAAuB,CAA5C,CAA+Cyb,EAAIjS,CAAnD,CAAsDiS,GAAKikD,IAA3D,CAAkE,CAEjEC,OAAOhzD,SAAP,CAAkBkR,SAAlB,CAA6B,EAAIpC,CAAjC,EACAmkD,KAAKjzD,SAAL,CAAgBkR,SAAhB,CAA2B,EAAIpC,CAAJ,CAAQ,CAAnC,EAEA,WAAamM,IAAII,mBAAJ,CAAyB23C,MAAzB,CAAiCC,IAAjC,CAAuCC,QAAvC,CAAiDC,YAAjD,CAAb,CAEA,GAAKC,OAASC,WAAd,CAA4B,SAE5BH,SAASlqD,YAAT,CAAuB,KAAKkB,WAA5B;CAEA,aAAeujB,UAAUxS,GAAV,CAAcF,MAAd,CAAqBnT,UAArB,CAAiCsrD,QAAjC,CAAf,CAEA,GAAKrlD,SAAW4f,UAAUvT,IAArB,EAA6BrM,SAAW4f,UAAUtT,GAAvD,CAA6D,SAE7DuT,WAAW5H,IAAX,CAAiB,CAEhBjY,SAAUA,QAFM;;CAKhBI,MAAOklD,aAAan1D,KAAb,GAAqBgL,YAArB,CAAmC,KAAKkB,WAAxC,CALS,CAMhB/W,MAAO2b,CANS,CAOhBwnB,KAAM,IAPU,CAQhBg9B,UAAW,IARK,CAShB9iD,OAAQ,IATQ,CAAjB,EAaA,CAED,CAED,CA7ED,QA6EYI,0BAA0BC,QAA/B,CAA0C,CAEhD,aAAeD,SAASE,QAAxB,CACA,eAAiBA,SAASzd,MAA1B,CAEA,IAAM,MAAQ,CAAd,CAAiByb,EAAIykD,WAAa,CAAlC,CAAqCzkD,GAAKikD,IAA1C,CAAiD,CAEhD,WAAa93C,IAAII,mBAAJ,CAAyBvK,SAAUhC,CAAV,CAAzB,CAAwCgC,SAAUhC,EAAI,CAAd,CAAxC,CAA2DokD,QAA3D,CAAqEC,YAArE,CAAb,CAEA,GAAKC,OAASC,WAAd,CAA4B,SAE5BH,SAASlqD,YAAT,CAAuB,KAAKkB,WAA5B;CAEA,aAAeujB,UAAUxS,GAAV,CAAcF,MAAd,CAAqBnT,UAArB,CAAiCsrD,QAAjC,CAAf,CAEA,GAAKrlD,SAAW4f,UAAUvT,IAArB,EAA6BrM,SAAW4f,UAAUtT,GAAvD,CAA6D,SAE7DuT,WAAW5H,IAAX,CAAiB,CAEhBjY,SAAUA,QAFM;;CAKhBI,MAAOklD,aAAan1D,KAAb,GAAqBgL,YAArB,CAAmC,KAAKkB,WAAxC,CALS,CAMhB/W,MAAO2b,CANS,CAOhBwnB,KAAM,IAPU,CAQhBg9B,UAAW,IARK,CAShB9iD,OAAQ,IATQ,CAAjB,EAaA,CAED,CAED,CA3ID,CA6IA,CAnJU,EAJqE,CAyJhFxS,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,CAAsB,KAAK8U,QAA3B,CAAqC,KAAK0hB,QAA1C,EAAqDt2B,IAArD,CAA2D,IAA3D,CAAP,CAEA,CA7J+E,CAA1D,CAAvB;;;IAuKA/J,MAAM6gE,YAAN,CAAqB,SAAWliD,QAAX,CAAqB0hB,QAArB,CAAgC,CAEpDrgC,MAAMi7B,IAAN,CAAW15B,IAAX,CAAiB,IAAjB,CAAuBod,QAAvB,CAAiC0hB,QAAjC,EAEA,KAAK1G,IAAL,CAAY,cAAZ,CAEA,CAND,CAQA35B,MAAM6gE,YAAN,CAAmBpgE,SAAnB,CAA+BE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMi7B,IAAN,CAAWx6B,SAA1B,CAAf,CAAsD,CAEpFoJ,YAAa7J,MAAM6gE,YAFiE,CAAtD,CAA/B;;;;;;IAeA7gE,MAAMg7B,IAAN,CAAa,SAAWrc,QAAX,CAAqB0hB,QAArB,CAAgC,CAE5CrgC,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,MAAZ,CAEA,KAAKhb,QAAL,CAAgBA,WAAaxe,SAAb,CAAyBwe,QAAzB,CAAoC,UAAUI,cAAV,EAApD,CACA,KAAKshB,QAAL,CAAgBA,WAAalgC,SAAb,CAAyBkgC,QAAzB,CAAoC,UAAU68B,iBAAV,CAA6B,CAAE3xD,MAAOnL,KAAK8vB,MAAL,GAAgB,QAAzB,CAA7B,CAApD,CAEA,KAAKqxC,QAAL,CAAgBvhE,MAAM0I,iBAAtB,CAEA,KAAK84D,kBAAL,GAEA,CAbD,CAeAxhE,MAAMg7B,IAAN,CAAWv6B,SAAX,CAAuBE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAf,CAA0D,CAEhFoJ,YAAa7J,MAAMg7B,IAF6D,CAIhFymC,YAAa,qBAAW33D,KAAX,CAAmB,CAE/B,KAAKy3D,QAAL,CAAgBz3D,KAAhB,CAEA,CAR+E,CAUhF03D,mBAAoB,6BAAY,CAE/B,GAAK,KAAK7iD,QAAL,CAAc4kB,YAAd,GAA+BpjC,SAA/B,EAA4C,KAAKwe,QAAL,CAAc4kB,YAAd,CAA2BniC,MAA3B,CAAoC,CAArF,CAAyF,CAExF,KAAKsgE,eAAL,CAAuB,CAAE,CAAzB,CACA,KAAKC,qBAAL,CAA6B,EAA7B,CACA,KAAKC,qBAAL,CAA6B,EAA7B,CAEA,IAAM,MAAQ,CAAR,CAAWC,GAAK,KAAKljD,QAAL,CAAc4kB,YAAd,CAA2BniC,MAAjD,CAAyDiK,EAAIw2D,EAA7D,CAAiEx2D,GAAjE,CAAwE,CAEvE,KAAKs2D,qBAAL,CAA2B9tC,IAA3B,CAAiC,CAAjC,EACA,KAAK+tC,qBAAL,CAA4B,KAAKjjD,QAAL,CAAc4kB,YAAd,CAA4Bl4B,CAA5B,EAAgC3K,IAA5D,EAAqE2K,CAArE,CAEA,CAED,CAED,CA3B+E,CA6BhFy2D,0BAA2B,mCAAWphE,IAAX,CAAkB,CAE5C,GAAK,KAAKkhE,qBAAL,CAA4BlhE,IAA5B,IAAuCP,SAA5C,CAAwD,CAEvD,YAAYyhE,qBAAL,CAA4BlhE,IAA5B,CAAP,CAEA,CAEDyK,QAAQC,IAAR,CAAc,sDAAwD1K,IAAxD,CAA+D,+BAA7E,EAEA,QAAA,CAEA,CAzC+E,CA2ChFk7B,QAAW,UAAY,CAEtB,kBAAoB,UAAU/jB,OAAV,EAApB,CACA,QAAU,UAAUgR,GAAV,EAAV,CACA,WAAa,UAAUpJ,MAAV,EAAb,CAEA,OAAS,UAAU1O,OAAV,EAAT,CACA,OAAS,UAAUA,OAAV,EAAT,CACA,OAAS,UAAUA,OAAV,EAAT,CAEA,UAAY,UAAUA,OAAV,EAAZ,CACA,UAAY,UAAUA,OAAV,EAAZ,CACA,UAAY,UAAUA,OAAV,EAAZ,CAEA,QAAU,UAAUqD,OAAV,EAAV,CACA,QAAU,UAAUA,OAAV,EAAV,CACA,QAAU,UAAUA,OAAV,EAAV,CAEA,cAAgB,UAAUrD,OAAV,EAAhB,CAEA,sBAAwB,UAAUA,OAAV,EAAxB,CACA,2BAA6B,UAAUA,OAAV,EAA7B,CAEA,uBAAA,CAAyBiL,KAAzB,CAAgCwQ,EAAhC,CAAoCC,EAApC,CAAwCC,EAAxC,CAA4Cq1C,GAA5C,CAAiDp9B,GAAjD,CAAsDq9B,GAAtD,CAA4D,CAE3DhiE,MAAMg0B,QAAN,CAAeE,kBAAf,CAAmClY,KAAnC,CAA0CwQ,EAA1C,CAA8CC,EAA9C,CAAkDC,EAAlD,CAAsDu1C,SAAtD,EAEAF,IAAIr0D,cAAJ,CAAoBu0D,UAAU1hE,CAA9B,EACAokC,IAAIj3B,cAAJ,CAAoBu0D,UAAU7zD,CAA9B,EACA4zD,IAAIt0D,cAAJ,CAAoBu0D,UAAU5zD,CAA9B,EAEA0zD,IAAI30D,GAAJ,CAASu3B,GAAT,EAAev3B,GAAf,CAAoB40D,GAApB,EAEA,WAAWj2D,KAAJ,EAAP,CAEA,CAED,0BAAA,CAA4BwS,MAA5B,CAAoCid,SAApC,CAA+CxS,GAA/C,CAAoD2iB,EAApD,CAAwDC,EAAxD,CAA4DC,EAA5D,CAAgE7vB,KAAhE,CAAwE,CAEvE,aAAA,CACA,aAAeuC,OAAO8hB,QAAtB,CAEA,GAAKA,SAASoxB,IAAT,GAAkBzxD,MAAMwC,QAA7B,CAAwC,CAEvCmb,UAAYqL,IAAIwC,iBAAJ,CAAuBqgB,EAAvB,CAA2BD,EAA3B,CAA+BD,EAA/B,CAAmC,IAAnC,CAAyC3vB,KAAzC,CAAZ,CAEA,CAJD,IAIO,CAEN2B,UAAYqL,IAAIwC,iBAAJ,CAAuBmgB,EAAvB,CAA2BC,EAA3B,CAA+BC,EAA/B,CAAmCxL,SAASoxB,IAAT,GAAkBzxD,MAAMyC,UAA3D,CAAuEuZ,KAAvE,CAAZ,CAEA,CAED,GAAK2B,YAAc,IAAnB,CAA0B,WAAA,CAE1BukD,uBAAuBn4D,IAAvB,CAA6BiS,KAA7B,EACAkmD,uBAAuBnrD,YAAvB,CAAqCwH,OAAOtG,WAA5C,EAEA,aAAeujB,UAAUxS,GAAV,CAAcF,MAAd,CAAqBnT,UAArB,CAAiCusD,sBAAjC,CAAf,CAEA,GAAKtmD,SAAW4f,UAAUvT,IAArB,EAA6BrM,SAAW4f,UAAUtT,GAAvD,CAA6D,WAAA,CAE7D,OAAO,CACNtM,SAAUA,QADJ,CAENI,MAAOkmD,uBAAuBn2D,KAAvB,EAFD,CAGNwS,OAAQA,MAHF,CAAP,CAMA,CAED,wCAAA,CAA0CA,MAA1C,CAAkDid,SAAlD,CAA6DxS,GAA7D,CAAkE/J,SAAlE,CAA6E8lB,GAA7E,CAAkFpzB,CAAlF,CAAqFjI,CAArF,CAAwFoE,CAAxF,CAA4F,CAE3F63B,GAAG53B,SAAH,CAAckR,SAAd,CAAyBtN,EAAI,CAA7B,EACA+zB,GAAG33B,SAAH,CAAckR,SAAd,CAAyBvV,EAAI,CAA7B,EACA+7B,GAAG13B,SAAH,CAAckR,SAAd,CAAyBnR,EAAI,CAA7B,EAEA,iBAAmBq0D,kBAAmB5jD,MAAnB,CAA2Bid,SAA3B,CAAsCxS,GAAtC,CAA2C2c,EAA3C,CAA+CD,EAA/C,CAAmDD,EAAnD,CAAuD28B,iBAAvD,CAAnB,CAEA,GAAKC,YAAL,CAAoB,CAEnB,GAAKt9B,GAAL,CAAW,CAEVu9B,IAAIv0D,SAAJ,CAAeg3B,GAAf,CAAoBpzB,EAAI,CAAxB,EACA4wD,IAAIx0D,SAAJ,CAAeg3B,GAAf,CAAoBr7B,EAAI,CAAxB,EACA84D,IAAIz0D,SAAJ,CAAeg3B,GAAf,CAAoBj3B,EAAI,CAAxB,EAEAu0D,aAAa39B,EAAb,CAAkB+9B,eAAgBL,iBAAhB,CAAoCz8B,EAApC,CAAwCD,EAAxC,CAA4CD,EAA5C,CAAiD68B,GAAjD,CAAsDC,GAAtD,CAA2DC,GAA3D,CAAlB,CAEA,CAEDH,aAAah+B,IAAb,CAAoB,UAAU1D,KAAV,CAAiBhvB,CAAjB,CAAoBjI,CAApB,CAAuBoE,CAAvB,CAA0B9N,MAAMg0B,QAAN,CAAehb,MAAf,CAAuB2sB,EAAvB,CAA2BD,EAA3B,CAA+BD,EAA/B,CAA1B,CAApB,CACA48B,aAAahB,SAAb,CAAyB1vD,CAAzB,CAEA,CAED,mBAAA,CAEA,CAED,uBAAO,CAAkB6pB,SAAlB,CAA6BC,UAA7B,CAA0C,CAEhD,aAAe,KAAK9c,QAApB,CACA,aAAe,KAAK0hB,QAApB,CACA,gBAAkB,KAAKpoB,WAAvB,CAEA,GAAKooB,WAAalgC,SAAlB,CAA8B;CAI9B,GAAKwe,SAASwP,cAAT,GAA4B,IAAjC,CAAwCxP,SAASyP,qBAAT,GAExCjP,OAAOpV,IAAP,CAAa4U,SAASwP,cAAtB,EACAhP,OAAOpI,YAAP,CAAqBkB,WAArB,EAEA,GAAKujB,UAAUxS,GAAV,CAAc9J,gBAAd,CAAgCC,MAAhC,IAA6C,KAAlD,CAA0D;CAI1DmhD,cAActoD,UAAd,CAA0BC,WAA1B,EACA+Q,IAAIjf,IAAJ,CAAUyxB,UAAUxS,GAApB,EAA0BjS,YAA1B,CAAwCupD,aAAxC;CAIA,GAAK3hD,SAASilB,WAAT,GAAyB,IAA9B,CAAqC,CAEpC,GAAK5a,IAAIxL,aAAJ,CAAmBmB,SAASilB,WAA5B,IAA8C,KAAnD,CAA2D,OAE3D,CAED,OAAA,CAASy+B,YAAT,CAEA,GAAK1jD,0BAA0BI,cAA/B,CAAgD,CAE/C,KAAA,CAAOrV,CAAP,CAAUoE,CAAV,CACA,UAAY6Q,SAASzd,KAArB,CACA,eAAiByd,SAASK,UAA1B,CACA,cAAgBA,WAAWuI,QAAX,CAAoBvZ,KAApC,CAEA,GAAKgR,WAAW0lB,EAAX,GAAkBvkC,SAAvB,CAAmC,CAElC4kC,IAAM/lB,WAAW0lB,EAAX,CAAc12B,KAApB,CAEA,CAED,GAAK9M,QAAU,IAAf,CAAsB,CAErB,YAAcA,MAAM8M,KAApB,CAEA,IAAM,MAAQ,CAAR,CAAWpD,EAAIg3B,QAAQxgC,MAA7B,CAAqCyb,EAAIjS,CAAzC,CAA4CiS,GAAK,CAAjD,CAAqD,CAEpDlL,EAAIiwB,QAAS/kB,CAAT,CAAJ,CACAnT,EAAIk4B,QAAS/kB,EAAI,CAAb,CAAJ,CACA/O,EAAI8zB,QAAS/kB,EAAI,CAAb,CAAJ,CAEAwlD,aAAeK,gCAAiC,IAAjC,CAAuClnC,SAAvC,CAAkDxS,GAAlD,CAAuD/J,SAAvD,CAAkE8lB,GAAlE,CAAuEpzB,CAAvE,CAA0EjI,CAA1E,CAA6EoE,CAA7E,CAAf,CAEA,GAAKu0D,YAAL,CAAoB,CAEnBA,aAAahB,SAAb,CAAyBjhE,KAAKiK,KAAL,CAAYwS,EAAI,CAAhB,CAAzB;CACA4e,WAAW5H,IAAX,CAAiBwuC,YAAjB,EAEA,CAED,CAED,CArBD,IAqBO,CAGN,IAAM,MAAQ,CAAR,CAAWz3D,EAAIqU,UAAU7d,MAA/B,CAAuCyb,EAAIjS,CAA3C,CAA8CiS,GAAK,CAAnD,CAAuD,CAEtDlL,EAAIkL,EAAI,CAAR,CACAnT,EAAIiI,EAAI,CAAR,CACA7D,EAAI6D,EAAI,CAAR,CAEA0wD,aAAeK,gCAAiC,IAAjC,CAAuClnC,SAAvC,CAAkDxS,GAAlD,CAAuD/J,SAAvD,CAAkE8lB,GAAlE,CAAuEpzB,CAAvE,CAA0EjI,CAA1E,CAA6EoE,CAA7E,CAAf,CAEA,GAAKu0D,YAAL,CAAoB,CAEnBA,aAAanhE,KAAb,CAAqByQ,CAArB;CACA8pB,WAAW5H,IAAX,CAAiBwuC,YAAjB,EAEA,CAED,CAED,CAED,CAxDD,QAwDY1jD,0BAA0BC,QAA/B,CAA0C,CAEhD,OAAA,CAAS+jD,GAAT,CAAcC,GAAd,CACA,mBAAqBviC,0BAA0B29B,aAA/C,CACA,cAAgB6E,iBAAmB,IAAnB,CAA0BxiC,SAASR,SAAnC,CAA+C,IAA/D,CAEA,aAAelhB,SAASE,QAAxB,CACA,UAAYF,SAAS0kB,KAArB,CACA,kBAAoB1kB,SAAS2kB,aAAT,CAAwB,CAAxB,CAApB,CACA,GAAKA,cAAcliC,MAAd,CAAuB,CAA5B,CAAgC2jC,IAAMzB,aAAN,CAEhC,IAAM,MAAQ,CAAR,CAAWiC,GAAKlC,MAAMjiC,MAA5B,CAAoC+S,EAAIoxB,EAAxC,CAA4CpxB,GAA5C,CAAmD,CAElD,SAAWkvB,MAAOlvB,CAAP,CAAX,CACA,iBAAmB0uD,iBAAmB,IAAnB,CAA0BhjC,UAAWwE,KAAKzD,aAAhB,CAA1B,CAA4DP,QAA/E,CAEA,GAAKyiC,eAAiB3iE,SAAtB,CAAkC,SAElC4iE,IAAMlkD,SAAUwlB,KAAK1yB,CAAf,CAAN,CACAgxD,IAAM9jD,SAAUwlB,KAAK36B,CAAf,CAAN,CACAk5D,IAAM/jD,SAAUwlB,KAAKv2B,CAAf,CAAN,CAEA,GAAKg1D,aAAav/B,YAAb,GAA8B,IAAnC,CAA0C,CAEzC,iBAAmB5kB,SAAS4kB,YAA5B,CACA,oBAAsB,KAAKo+B,qBAA3B,CAEAh8B,GAAGh8B,GAAH,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,EACA+7B,GAAG/7B,GAAH,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,EACA87B,GAAG97B,GAAH,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,EAEA,IAAM,MAAQ,CAAR,CAAWq5D,GAAKz/B,aAAaniC,MAAnC,CAA2CqJ,EAAIu4D,EAA/C,CAAmDv4D,GAAnD,CAA0D,CAEzD,cAAgBw4D,gBAAiBx4D,CAAjB,CAAhB,CAEA,GAAKy4D,YAAc,CAAnB,CAAuB,SAEvB,YAAc3/B,aAAc94B,CAAd,EAAkBoU,QAAhC,CAEA8mB,GAAGjxB,eAAH,CAAoByuD,MAAMvuD,UAAN,CAAkBwuD,QAAS/+B,KAAK1yB,CAAd,CAAlB,CAAqCoxD,GAArC,CAApB,CAAgEG,SAAhE,EACAx9B,GAAGhxB,eAAH,CAAoB2uD,MAAMzuD,UAAN,CAAkBwuD,QAAS/+B,KAAK36B,CAAd,CAAlB,CAAqCi5D,GAArC,CAApB,CAAgEO,SAAhE,EACAz9B,GAAG/wB,eAAH,CAAoB4uD,MAAM1uD,UAAN,CAAkBwuD,QAAS/+B,KAAKv2B,CAAd,CAAlB,CAAqC80D,GAArC,CAApB,CAAgEM,SAAhE,EAEA,CAEDv9B,GAAGv4B,GAAH,CAAQ21D,GAAR,EACAr9B,GAAGt4B,GAAH,CAAQu1D,GAAR,EACAl9B,GAAGr4B,GAAH,CAAQw1D,GAAR,EAEAG,IAAMp9B,EAAN,CACAg9B,IAAMj9B,EAAN,CACAk9B,IAAMn9B,EAAN,CAEA,CAED48B,aAAeF,kBAAmB,IAAnB,CAAyB3mC,SAAzB,CAAoCxS,GAApC,CAAyC+5C,GAAzC,CAA8CJ,GAA9C,CAAmDC,GAAnD,CAAwDR,iBAAxD,CAAf,CAEA,GAAKC,YAAL,CAAoB,CAEnB,GAAKt9B,GAAL,CAAW,CAEV,UAAYA,IAAK5wB,CAAL,CAAZ,CACAmuD,IAAIv4D,IAAJ,CAAUw5D,MAAO,CAAP,CAAV,EACAhB,IAAIx4D,IAAJ,CAAUw5D,MAAO,CAAP,CAAV,EACAf,IAAIz4D,IAAJ,CAAUw5D,MAAO,CAAP,CAAV,EAEAlB,aAAa39B,EAAb,CAAkB+9B,eAAgBL,iBAAhB,CAAmCW,GAAnC,CAAwCJ,GAAxC,CAA6CC,GAA7C,CAAkDN,GAAlD,CAAuDC,GAAvD,CAA4DC,GAA5D,CAAlB,CAEA,CAEDH,aAAah+B,IAAb,CAAoBA,IAApB,CACAg+B,aAAahB,SAAb,CAAyBltD,CAAzB,CACAsnB,WAAW5H,IAAX,CAAiBwuC,YAAjB,EAEA,CAED,CAED,CAED,CAxKD,CA0KA,CA5QU,EA3CqE,CAyThFt2D,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,CAAsB,KAAK8U,QAA3B,CAAqC,KAAK0hB,QAA1C,EAAqDt2B,IAArD,CAA2D,IAA3D,CAAP,CAEA,CA7T+E,CAA1D,CAAvB;;;;;IAyUA/J,MAAMwjE,IAAN,CAAa,SAAWC,IAAX,CAAkB,CAE9BzjE,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,MAAZ,CAEA,KAAK8pC,IAAL,CAAYA,IAAZ,CAEA,CARD,CAUAzjE,MAAMwjE,IAAN,CAAW/iE,SAAX,CAAuBE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAf,CAA0D,CAEhFoJ,YAAa7J,MAAMwjE,IAF6D,CAIhFz5D,KAAM,cAAW1I,MAAX,CAAoB,CAEzBrB,MAAMy8B,QAAN,CAAeh8B,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAKoiE,IAAL,CAAYpiE,OAAOoiE,IAAnB,CAEA,WAAA,CAEA,CAZ+E,CAA1D,CAAvB;;;;;;IAyBAzjE,MAAM0jE,QAAN,CAAiB,SAAWzuB,KAAX,CAAkB0uB,YAAlB,CAAgCC,gBAAhC,CAAmD,CAEnE,KAAKA,gBAAL,CAAwBA,mBAAqBzjE,SAArB,CAAiCyjE,gBAAjC,CAAoD,IAA5E,CAEA,KAAKC,cAAL,CAAsB,UAAUhsD,OAAV,EAAtB;CAIAo9B,MAAQA,OAAS,EAAjB,CAEA,KAAKA,KAAL,CAAaA,MAAMxoC,KAAN,CAAa,CAAb,CAAb;CAIA,GAAK,KAAKm3D,gBAAV,CAA6B;;;;;;CAU5B,SAAWxjE,KAAKkM,IAAL,CAAW,KAAK2oC,KAAL,CAAW7zC,MAAX,CAAoB,CAA/B,CAAX;CACAwK,KAAO5L,MAAMI,IAAN,CAAWsxB,cAAX,CAA2BtxB,KAAKiV,IAAL,CAAWzJ,IAAX,CAA3B,CAAP,CACAA,KAAOxL,KAAKwM,GAAL,CAAUhB,IAAV,CAAgB,CAAhB,CAAP,CAEA,KAAKk4D,gBAAL,CAAwBl4D,IAAxB,CACA,KAAKm4D,iBAAL,CAAyBn4D,IAAzB,CAEA,KAAKo4D,YAAL,CAAoB,gBAAA,CAAkB,KAAKF,gBAAL,CAAwB,KAAKC,iBAA7B,CAAiD,CAAnE,CAApB;CACA,KAAKE,WAAL,CAAmB,UAAUvJ,WAAV,CAAuB,KAAKsJ,YAA5B,CAA0C,KAAKF,gBAA/C,CAAiE,KAAKC,iBAAtE,CAAyF/jE,MAAMmH,UAA/F,CAA2GnH,MAAM4G,SAAjH,CAAnB,CAEA,CApBD,IAoBO,CAEN,KAAKo9D,YAAL,CAAoB,gBAAA,CAAkB,GAAK,KAAK/uB,KAAL,CAAW7zC,MAAlC,CAApB,CAEA;CAID,GAAKuiE,eAAiBxjE,SAAtB,CAAkC,CAEjC,KAAK+jE,iBAAL,GAEA,CAJD,IAIO,CAEN,GAAK,KAAKjvB,KAAL,CAAW7zC,MAAX,GAAsBuiE,aAAaviE,MAAxC,CAAiD,CAEhD,KAAKuiE,YAAL,CAAoBA,aAAal3D,KAAb,CAAoB,CAApB,CAApB,CAEA,CAJD,IAIO,CAENtB,QAAQC,IAAR,CAAc,iDAAd,EAEA,KAAKu4D,YAAL,CAAoB,EAApB,CAEA,IAAM,MAAQ,CAAR,CAAWQ,GAAK,KAAKlvB,KAAL,CAAW7zC,MAAjC,CAAyCsI,EAAIy6D,EAA7C,CAAiDz6D,GAAjD,CAAwD,CAEvD,KAAKi6D,YAAL,CAAkB9vC,IAAlB,CAAwB,UAAUhc,OAAV,EAAxB,EAEA,CAED,CAED,CAED,CApED,CAsEAlX,OAAOK,MAAP,CAAehB,MAAM0jE,QAAN,CAAejjE,SAA9B,CAAyC,CAExCyjE,kBAAmB,4BAAY,CAE9B,KAAKP,YAAL,CAAoB,EAApB,CAEA,IAAM,MAAQ,CAAR,CAAWQ,GAAK,KAAKlvB,KAAL,CAAW7zC,MAAjC,CAAyCsI,EAAIy6D,EAA7C,CAAiDz6D,GAAjD,CAAwD,CAEvD,YAAc,UAAUmO,OAAV,EAAd,CAEA,GAAK,KAAKo9B,KAAL,CAAYvrC,CAAZ,CAAL,CAAuB,CAEtB2H,QAAQ2G,UAAR,CAAoB,KAAKi9B,KAAL,CAAYvrC,CAAZ,EAAgBuO,WAApC,EAEA,CAED,KAAK0rD,YAAL,CAAkB9vC,IAAlB,CAAwBxiB,OAAxB,EAEA,CAED,CApBuC,CAsBxC+yD,KAAM,eAAY,CAEjB,QAAA;CAIA,IAAM,MAAQ,CAAR,CAAWD,GAAK,KAAKlvB,KAAL,CAAW7zC,MAAjC,CAAyCsI,EAAIy6D,EAA7C,CAAiDz6D,GAAjD,CAAwD,CAEvDk5C,KAAO,KAAK3N,KAAL,CAAYvrC,CAAZ,CAAP,CAEA,GAAKk5C,IAAL,CAAY,CAEXA,KAAK3qC,WAAL,CAAiBD,UAAjB,CAA6B,KAAK2rD,YAAL,CAAmBj6D,CAAnB,CAA7B,EAEA,CAED;CAID,IAAM,MAAQ,CAAR,CAAWy6D,GAAK,KAAKlvB,KAAL,CAAW7zC,MAAjC,CAAyCsI,EAAIy6D,EAA7C,CAAiDz6D,GAAjD,CAAwD,CAEvDk5C,KAAO,KAAK3N,KAAL,CAAYvrC,CAAZ,CAAP,CAEA,GAAKk5C,IAAL,CAAY,CAEX,GAAKA,KAAKjmB,MAAV,CAAmB,CAElBimB,KAAKhrC,MAAL,CAAYI,UAAZ,CAAwB4qC,KAAKjmB,MAAL,CAAY1kB,WAApC,EACA2qC,KAAKhrC,MAAL,CAAYnK,QAAZ,CAAsBm1C,KAAK3qC,WAA3B,EAEA,CALD,IAKO,CAEN2qC,KAAKhrC,MAAL,CAAY7N,IAAZ,CAAkB64C,KAAK3qC,WAAvB,EAEA,CAED2qC,KAAKhrC,MAAL,CAAY4P,SAAZ,CAAuBo7B,KAAKr7B,QAA5B,CAAsCq7B,KAAKh0C,UAA3C,CAAuDg0C,KAAKn8B,KAA5D,EAEA,CAED,CAED,CAjEuC,CAmExC1X,OAAU,UAAY,CAErB,iBAAmB,UAAU8I,OAAV,EAAnB,CAEA,sBAAO,EAAkB;CAIxB,IAAM,MAAQ,CAAR,CAAWssD,GAAK,KAAKlvB,KAAL,CAAW7zC,MAAjC,CAAyCsI,EAAIy6D,EAA7C,CAAiDz6D,GAAjD,CAAwD;CAIvD,WAAa,KAAKurC,KAAL,CAAYvrC,CAAZ,EAAkB,KAAKurC,KAAL,CAAYvrC,CAAZ,EAAgBuO,WAAlC,CAAgD,KAAK4rD,cAAlE,CAEAQ,aAAavsD,gBAAb,CAA+BF,MAA/B,CAAuC,KAAK+rD,YAAL,CAAmBj6D,CAAnB,CAAvC,EACA26D,aAAan2D,OAAb,CAAsB,KAAK81D,YAA3B,CAAyCt6D,EAAI,EAA7C,EAEA,CAED,GAAK,KAAKk6D,gBAAV,CAA6B,CAE5B,KAAKK,WAAL,CAAiB/4B,WAAjB,CAA+B,IAA/B,CAEA,CAED,CArBD,CAuBA,CA3BO,EAnEgC,CAgGxCn/B,MAAO,gBAAY,CAElB,iBAAiB23D,QAAV,CAAoB,KAAKzuB,KAAzB,CAAgC,KAAK0uB,YAArC,CAAmD,KAAKC,gBAAxD,CAAP,CAEA,CApGuC,CAAzC;;;;;IAgHA5jE,MAAM85D,WAAN,CAAoB,SAAWn7C,QAAX,CAAqB0hB,QAArB,CAA+BujC,gBAA/B,CAAkD,CAErE5jE,MAAMg7B,IAAN,CAAWz5B,IAAX,CAAiB,IAAjB,CAAuBod,QAAvB,CAAiC0hB,QAAjC,EAEA,KAAK1G,IAAL,CAAY,aAAZ,CAEA,KAAK2qC,QAAL,CAAgB,UAAhB,CACA,KAAKC,UAAL,CAAkB,UAAU1sD,OAAV,EAAlB,CACA,KAAK2sD,iBAAL,CAAyB,UAAU3sD,OAAV,EAAzB;;;CAOA,UAAY,EAAZ,CAEA,GAAK,KAAK8G,QAAL,EAAiB,KAAKA,QAAL,CAAcs2B,KAAd,GAAwB90C,SAA9C,CAA0D,CAEzD,QAAA,CAAUskE,KAAV,CAEA,IAAM,MAAQ,CAAR,CAAWN,GAAK,KAAKxlD,QAAL,CAAcs2B,KAAd,CAAoB7zC,MAA1C,CAAkDsI,EAAIy6D,EAAtD,CAA0D,EAAGz6D,CAA7D,CAAiE,CAEhE+6D,MAAQ,KAAK9lD,QAAL,CAAcs2B,KAAd,CAAqBvrC,CAArB,CAAR,CAEAk5C,KAAO,UAAU4gB,IAAV,CAAgB,IAAhB,CAAP,CACAvuB,MAAMphB,IAAN,CAAY+uB,IAAZ,EAEAA,KAAKliD,IAAL,CAAY+jE,MAAM/jE,IAAlB,CACAkiD,KAAKr7B,QAAL,CAAcxZ,SAAd,CAAyB02D,MAAMC,GAA/B,EACA9hB,KAAKh0C,UAAL,CAAgBb,SAAhB,CAA2B02D,MAAME,IAAjC,EACA,GAAKF,MAAMG,GAAN,GAAczkE,SAAnB,CAA+ByiD,KAAKn8B,KAAL,CAAW1Y,SAAX,CAAsB02D,MAAMG,GAA5B,EAE/B,CAED,IAAM,MAAQ,CAAR,CAAWT,GAAK,KAAKxlD,QAAL,CAAcs2B,KAAd,CAAoB7zC,MAA1C,CAAkDsI,EAAIy6D,EAAtD,CAA0D,EAAGz6D,CAA7D,CAAiE,CAEhE+6D,MAAQ,KAAK9lD,QAAL,CAAcs2B,KAAd,CAAqBvrC,CAArB,CAAR,CAEA,GAAK+6D,MAAM9nC,MAAN,GAAiB,CAAE,CAAnB,EAAwB8nC,MAAM9nC,MAAN,GAAiB,IAAzC,EACHsY,MAAOwvB,MAAM9nC,MAAb,IAA0Bx8B,SAD5B,CACwC,CAEvC80C,MAAOwvB,MAAM9nC,MAAb,EAAsBvvB,GAAtB,CAA2B6nC,MAAOvrC,CAAP,CAA3B,EAEA,CALD,IAKO,CAEN,KAAK0D,GAAL,CAAU6nC,MAAOvrC,CAAP,CAAV,EAEA,CAED,CAED,CAED,KAAKm7D,oBAAL,GAEA,KAAKrmD,iBAAL,CAAwB,IAAxB,EACA,KAAK+hC,IAAL,CAAW,UAAUmjB,QAAV,CAAoBzuB,KAApB,CAA2B90C,SAA3B,CAAsCyjE,gBAAtC,CAAX,CAAqE,KAAK3rD,WAA1E,EAEA,CA3DD,CA8DAjY,MAAM85D,WAAN,CAAkBr5D,SAAlB,CAA8BE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMg7B,IAAN,CAAWv6B,SAA1B,CAAf,CAAsD,CAEnFoJ,YAAa7J,MAAM85D,WAFgE,CAInFvZ,KAAM,cAAUS,QAAV,CAAoBujB,UAApB,CAAiC,CAEtC,KAAKvjB,QAAL,CAAgBA,QAAhB,CAEA,GAAKujB,aAAepkE,SAApB,CAAgC,CAE/B,KAAKqe,iBAAL,CAAwB,IAAxB,EAEA,KAAKwiC,QAAL,CAAckjB,iBAAd,GAEAK,WAAa,KAAKtsD,WAAlB,CAEA,CAED,KAAKssD,UAAL,CAAgBx6D,IAAhB,CAAsBw6D,UAAtB,EACA,KAAKC,iBAAL,CAAuBxsD,UAAvB,CAAmCusD,UAAnC,EAEA,CArBkF,CAuBnFH,KAAM,eAAY,CAEjB,KAAKpjB,QAAL,CAAcojB,IAAd,GAEA,CA3BkF,CA6BnFS,qBAAsB,+BAAY,CAEjC,GAAK,KAAKlmD,QAAL,kBAA+BC,QAApC,CAA+C,CAE9C,IAAM,MAAQ,CAAd,CAAiB/B,EAAI,KAAK8B,QAAL,CAAc8kB,WAAd,CAA0BriC,MAA/C,CAAuDyb,GAAvD,CAA8D,CAE7D,OAAS,KAAK8B,QAAL,CAAc8kB,WAAd,CAA2B5mB,CAA3B,CAAT,CAEA,UAAY,IAAMioD,GAAGrvD,eAAH,EAAlB,CAEA,GAAKgR,QAAUjK,QAAf,CAA0B,CAEzBsoD,GAAGp3D,cAAH,CAAmB+Y,KAAnB,EAEA,CAJD,IAIO,CAENq+C,GAAGn7D,GAAH,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB;CAEA,CAED,CAED,CApBD,QAoBY,KAAKgV,QAAL,kBAA+BI,cAApC,CAAqD,CAE3D,QAAU,UAAU/E,OAAV,EAAV,CAEA,eAAiB,KAAK2E,QAAL,CAAcK,UAAd,CAAyB+lD,UAA1C,CAEA,IAAM,MAAQ,CAAd,CAAiBloD,EAAIkoD,WAAW5jC,KAAhC,CAAuCtkB,GAAvC,CAA8C,CAE7CmoD,IAAIzkE,CAAJ,CAAQwkE,WAAWpkD,IAAX,CAAiB9D,CAAjB,CAAR,CACAmoD,IAAI52D,CAAJ,CAAQ22D,WAAWnkD,IAAX,CAAiB/D,CAAjB,CAAR,CACAmoD,IAAI32D,CAAJ,CAAQ02D,WAAWlkD,IAAX,CAAiBhE,CAAjB,CAAR,CACAmoD,IAAI12D,CAAJ,CAAQy2D,WAAW9iC,IAAX,CAAiBplB,CAAjB,CAAR,CAEA,UAAY,IAAMmoD,IAAIvvD,eAAJ,EAAlB,CAEA,GAAKgR,QAAUjK,QAAf,CAA0B,CAEzBwoD,IAAIt3D,cAAJ,CAAoB+Y,KAApB,EAEA,CAJD,IAIO,CAENu+C,IAAIr7D,GAAJ,CAAS,CAAT,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB;CAEA,CAEDo7D,WAAW5iC,OAAX,CAAoBtlB,CAApB,CAAuBmoD,IAAIzkE,CAA3B,CAA8BykE,IAAI52D,CAAlC,CAAqC42D,IAAI32D,CAAzC,CAA4C22D,IAAI12D,CAAhD,EAEA,CAED,CAED,CAlFkF,CAoFnFkQ,kBAAmB,2BAAUghB,KAAV,CAAkB,CAEpCx/B,MAAMg7B,IAAN,CAAWv6B,SAAX,CAAqB+d,iBAArB,CAAuCjd,IAAvC,CAA6C,IAA7C,CAAmD,IAAnD,EAEA,GAAK,KAAK+iE,QAAL,GAAkB,UAAvB,CAAoC,CAEnC,KAAKE,iBAAL,CAAuBxsD,UAAvB,CAAmC,KAAKC,WAAxC,EAEA,CAJD,QAIY,KAAKqsD,QAAL,GAAkB,UAAvB,CAAoC,CAE1C,KAAKE,iBAAL,CAAuBxsD,UAAvB,CAAmC,KAAKusD,UAAxC,EAEA,CAJM,IAIA,CAENp5D,QAAQC,IAAR,CAAc,4CAA8C,KAAKk5D,QAAjE,EAEA,CAED,CAtGkF,CAwGnFv4D,MAAO,gBAAW,CAEjB,gBAAgBlC,WAAT,CAAsB,KAAK8U,QAA3B,CAAqC,KAAK0hB,QAA1C,CAAoD,KAAKujC,gBAAzD,EAA4E75D,IAA5E,CAAkF,IAAlF,CAAP,CAEA,CA5GkF,CAAtD,CAA9B;;;;;IAwHA/J,MAAMk7B,GAAN,CAAY,UAAY,CAEvBl7B,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,KAAZ,CAEAh5B,OAAO26B,gBAAP,CAAyB,IAAzB,CAA+B,CAC9B0+B,OAAQ,CACPh9B,WAAY,IADL,CAEPlzB,MAAO,EAFA,CADsB,CAA/B,EAOA,CAbD,CAgBA9J,MAAMk7B,GAAN,CAAUz6B,SAAV,CAAsBE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAf,CAA0D,CAE/EoJ,YAAa7J,MAAMk7B,GAF4D,CAI/EnxB,KAAM,cAAW1I,MAAX,CAAoB,CAEzBrB,MAAMy8B,QAAN,CAAeh8B,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,CAAkD,KAAlD,EAEA,WAAaA,OAAO24D,MAApB,CAEA,IAAM,MAAQ,CAAR,CAAWpvD,EAAIovD,OAAO54D,MAA5B,CAAoCyb,EAAIjS,CAAxC,CAA2CiS,GAA3C,CAAkD,CAEjD,UAAYm9C,OAAQn9C,CAAR,CAAZ,CAEA,KAAKq9C,QAAL,CAAeD,MAAM17C,MAAN,CAAaxS,KAAb,EAAf,CAAqCkuD,MAAMr+C,QAA3C,EAEA,CAED,WAAA,CAEA,CApB8E,CAsB/Es+C,SAAU,kBAAW37C,MAAX,CAAmB3C,QAAnB,CAA8B,CAEvC,GAAKA,WAAazb,SAAlB,CAA8Byb,SAAW,CAAX,CAE9BA,SAAWxb,KAAK8Q,GAAL,CAAU0K,QAAV,CAAX,CAEA,WAAa,KAAKo+C,MAAlB,CAEA,IAAM,MAAQ,CAAd,CAAiBpvD,EAAIovD,OAAO54D,MAA5B,CAAoCwJ,GAApC,CAA2C,CAE1C,GAAKgR,SAAWo+C,OAAQpvD,CAAR,EAAYgR,QAA5B,CAAuC,CAEtC,MAEA,CAED,CAEDo+C,OAAO7/B,MAAP,CAAevvB,CAAf,CAAkB,CAAlB,CAAqB,CAAEgR,SAAUA,QAAZ,CAAsB2C,OAAQA,MAA9B,CAArB,EAEA,KAAKnR,GAAL,CAAUmR,MAAV,EAEA,CA5C8E,CA8C/E0mD,qBAAsB,8BAAWrpD,QAAX,CAAsB,CAE3C,WAAa,KAAKo+C,MAAlB,CAEA,IAAM,MAAQ,CAAR,CAAWpvD,EAAIovD,OAAO54D,MAA5B,CAAoCyb,EAAIjS,CAAxC,CAA2CiS,GAA3C,CAAkD,CAEjD,GAAKjB,SAAWo+C,OAAQn9C,CAAR,EAAYjB,QAA5B,CAAuC,CAEtC,MAEA,CAED,CAED,cAAeiB,EAAI,CAAZ,EAAgB0B,MAAvB,CAEA,CA9D8E,CAgE/Eqd,QAAW,UAAY,CAEtB,mBAAqB,UAAU7qB,OAAV,EAArB,CAEA,uBAAO,CAAkByqB,SAAlB,CAA6BC,UAA7B,CAA0C,CAEhDypC,eAAezrD,qBAAf,CAAsC,KAAKxB,WAA3C,EAEA,aAAeujB,UAAUxS,GAAV,CAAcF,MAAd,CAAqBnT,UAArB,CAAiCuvD,cAAjC,CAAf,CAEA,KAAKD,oBAAL,CAA2BrpD,QAA3B,EAAsCggB,OAAtC,CAA+CJ,SAA/C,CAA0DC,UAA1D,EAEA,CARD,CAUA,CAdU,EAhEoE,CAgF/E1sB,OAAQ,UAAY,CAEnB,OAAS,UAAUgC,OAAV,EAAT,CACA,OAAS,UAAUA,OAAV,EAAT,CAEA,sBAAO,CAAiB4G,MAAjB,CAA0B,CAEhC,WAAa,KAAKqiD,MAAlB,CAEA,GAAKA,OAAO54D,MAAP,CAAgB,CAArB,CAAyB,CAExB0P,GAAG2I,qBAAH,CAA0B9B,OAAOM,WAAjC,EACAhC,GAAGwD,qBAAH,CAA0B,KAAKxB,WAA/B,EAEA,aAAenH,GAAG6E,UAAH,CAAeM,EAAf,CAAf,CAEA+jD,OAAQ,CAAR,EAAYz7C,MAAZ,CAAmBod,OAAnB,CAA6B,IAA7B,CAEA,IAAM,MAAQ,CAAR,CAAW/wB,EAAIovD,OAAO54D,MAA5B,CAAoCyb,EAAIjS,CAAxC,CAA2CiS,GAA3C,CAAkD,CAEjD,GAAKjB,UAAYo+C,OAAQn9C,CAAR,EAAYjB,QAA7B,CAAwC,CAEvCo+C,OAAQn9C,EAAI,CAAZ,EAAgB0B,MAAhB,CAAuBod,OAAvB,CAAiC,KAAjC,CACAq+B,OAAQn9C,CAAR,EAAY0B,MAAZ,CAAmBod,OAAnB,CAA6B,IAA7B,CAEA,CALD,IAKO,CAEN,MAEA,CAED,CAED,KAAQ9e,EAAIjS,CAAZ,CAAeiS,GAAf,CAAsB,CAErBm9C,OAAQn9C,CAAR,EAAY0B,MAAZ,CAAmBod,OAAnB,CAA6B,KAA7B,CAEA,CAED,CAED,CApCD,CAsCA,CA3CO,EAhFuE,CA6H/E8D,OAAQ,gBAAWC,IAAX,CAAkB,CAEzB,SAAW1/B,MAAMy8B,QAAN,CAAeh8B,SAAf,CAAyBg/B,MAAzB,CAAgCl+B,IAAhC,CAAsC,IAAtC,CAA4Cm+B,IAA5C,CAAX,CAEAe,KAAKliB,MAAL,CAAYy7C,MAAZ,CAAqB,EAArB,CAEA,WAAa,KAAKA,MAAlB,CAEA,IAAM,MAAQ,CAAR,CAAWpvD,EAAIovD,OAAO54D,MAA5B,CAAoCyb,EAAIjS,CAAxC,CAA2CiS,GAA3C,CAAkD,CAEjD,UAAYm9C,OAAQn9C,CAAR,CAAZ,CAEA4jB,KAAKliB,MAAL,CAAYy7C,MAAZ,CAAmBnmC,IAAnB,CAAyB,CACxBtV,OAAQ07C,MAAM17C,MAAN,CAAayR,IADG,CAExBpU,SAAUq+C,MAAMr+C,QAFQ,CAAzB,EAKA,CAED,WAAA,CAEA,CAlJ8E,CAA1D,CAAtB;;;;IA6JA5b,MAAMq7B,MAAN,CAAe,SAAWgF,QAAX,CAAsB,CAEpCrgC,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,QAAZ,CAEA,KAAK0G,QAAL,CAAkBA,WAAalgC,SAAf,CAA6BkgC,QAA7B,CAAwC,UAAUw+B,cAAV,EAAxD,CAEA,CARD,CAUA7+D,MAAMq7B,MAAN,CAAa56B,SAAb,CAAyBE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAf,CAA0D,CAElFoJ,YAAa7J,MAAMq7B,MAF+D,CAIlFO,QAAW,UAAY,CAEtB,mBAAqB,UAAU7qB,OAAV,EAArB,CAEA,uBAAO,CAAkByqB,SAAlB,CAA6BC,UAA7B,CAA0C,CAEhDypC,eAAezrD,qBAAf,CAAsC,KAAKxB,WAA3C,EAEA,eAAiBujB,UAAUxS,GAAV,CAAcG,iBAAd,CAAiC+7C,cAAjC,CAAjB,CACA,gBAAkB,KAAKz+C,KAAL,CAAWlmB,CAAX,CAAe,KAAKkmB,KAAL,CAAWrY,CAA1B,CAA8B,CAAhD,CAEA,GAAKuN,WAAawpD,WAAlB,CAAgC,CAE/B,OAEA,CAED1pC,WAAW5H,IAAX,CAAiB,CAEhBjY,SAAUxb,KAAKkM,IAAL,CAAWqP,UAAX,CAFM,CAGhBK,MAAO,KAAKuL,QAHI,CAIhB8c,KAAM,IAJU,CAKhB9lB,OAAQ,IALQ,CAAjB,EASA,CAtBD,CAwBA,CA5BU,EAJuE,CAkClFxS,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,CAAsB,KAAKw2B,QAA3B,EAAsCt2B,IAAtC,CAA4C,IAA5C,CAAP,CAEA,CAtCiF,CAA1D,CAAzB;;;;IAiDA/J,MAAMolE,SAAN,CAAkB,SAAWlc,OAAX,CAAoBt9C,IAApB,CAA0BgQ,QAA1B,CAAoCozC,QAApC,CAA8CzjD,KAA9C,CAAsD,CAEvEvL,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAK8jE,UAAL,CAAkB,EAAlB,CAEA,KAAKC,cAAL,CAAsB,UAAUv0D,OAAV,EAAtB,CACA,KAAKw0D,oBAAL,CAA4BplE,SAA5B,CAEA,GAAK+oD,UAAY/oD,SAAjB,CAA6B,CAE5B,KAAKiN,GAAL,CAAU87C,OAAV,CAAmBt9C,IAAnB,CAAyBgQ,QAAzB,CAAmCozC,QAAnC,CAA6CzjD,KAA7C,EAEA,CAED,CAfD,CAiBAvL,MAAMolE,SAAN,CAAgB3kE,SAAhB,CAA4BE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAf,CAA0D,CAErFoJ,YAAa7J,MAAMolE,SAFkE,CAIrFr7D,KAAM,cAAW1I,MAAX,CAAoB,CAEzBrB,MAAMy8B,QAAN,CAAeh8B,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,EAEA,KAAKikE,cAAL,CAAoBv7D,IAApB,CAA0B1I,OAAOikE,cAAjC,EACA,KAAKC,oBAAL,CAA4BlkE,OAAOkkE,oBAAnC,CAEA,IAAM,MAAQ,CAAR,CAAW36D,EAAIvJ,OAAOgkE,UAAP,CAAkBjkE,MAAvC,CAA+Cyb,EAAIjS,CAAnD,CAAsDiS,GAAtD,CAA6D,CAE5D,KAAKwoD,UAAL,CAAgBxxC,IAAhB,CAAsBxyB,OAAOgkE,UAAP,CAAmBxoD,CAAnB,CAAtB,EAEA,CAED,WAAA,CAEA,CAnBoF,CAqBrFzP,IAAK,aAAW87C,OAAX,CAAoBt9C,IAApB,CAA0BgQ,QAA1B,CAAoCozC,QAApC,CAA8CzjD,KAA9C,CAAqDmmD,OAArD,CAA+D,CAEnE,GAAK9lD,OAASzL,SAAd,CAA0ByL,KAAO,CAAE,CAAT,CAC1B,GAAKgQ,WAAazb,SAAlB,CAA8Byb,SAAW,CAAX,CAC9B,GAAK81C,UAAYvxD,SAAjB,CAA6BuxD,QAAU,CAAV,CAC7B,GAAKnmD,QAAUpL,SAAf,CAA2BoL,MAAQ,UAAUhC,KAAV,CAAiB,QAAjB,CAAR,CAC3B,GAAKylD,WAAa7uD,SAAlB,CAA8B6uD,SAAWhvD,MAAMgD,cAAjB,CAE9B4Y,SAAWxb,KAAKqL,GAAL,CAAUmQ,QAAV,CAAoBxb,KAAKwM,GAAL,CAAU,CAAV,CAAagP,QAAb,CAApB,CAAX,CAEA,KAAKypD,UAAL,CAAgBxxC,IAAhB,CAAsB,CACrBq1B,QAASA,OADY;CAErBt9C,KAAMA,IAFe;CAGrBgQ,SAAUA,QAHW;CAIrBrb,EAAG,CAJkB,CAIf6N,EAAG,CAJY,CAITC,EAAG,CAJM;CAKrBoY,MAAO,CALc;CAMrBoW,SAAU,CANW;CAOrB60B,QAASA,OAPY;CAQrBnmD,MAAOA,KARc;CASrByjD,SAAUA;CATW,CAAtB,EAYA,CA3CoF;;;KAkDrFwW,iBAAkB,2BAAY,CAE7B,KAAA,CAAOjgC,GAAK,KAAK8/B,UAAL,CAAgBjkE,MAA5B,CACA,SAAA,CACA,SAAW,CAAE,KAAKkkE,cAAL,CAAoB/kE,CAAtB,CAA0B,CAArC,CACA,SAAW,CAAE,KAAK+kE,cAAL,CAAoBl3D,CAAtB,CAA0B,CAArC,CAEA,IAAM+F,EAAI,CAAV,CAAaA,EAAIoxB,EAAjB,CAAqBpxB,GAArB,CAA4B,CAE3BsxD,MAAQ,KAAKJ,UAAL,CAAiBlxD,CAAjB,CAAR,CAEAsxD,MAAMllE,CAAN,CAAU,KAAK+kE,cAAL,CAAoB/kE,CAApB,CAAwBmlE,KAAOD,MAAM7pD,QAA/C,CACA6pD,MAAMr3D,CAAN,CAAU,KAAKk3D,cAAL,CAAoBl3D,CAApB,CAAwBu3D,KAAOF,MAAM7pD,QAA/C,CAEA6pD,MAAMG,cAAN,CAAuBH,MAAMllE,CAAN,CAAUH,KAAKsV,EAAf,CAAoB,IAA3C,CACA+vD,MAAM5oC,QAAN,EAAkB,CAAE4oC,MAAMG,cAAN,CAAuBH,MAAM5oC,QAA/B,EAA4C,IAA9D,CAEA,CAED,CArEoF,CAA1D,CAA5B;;;IA+EA78B,MAAM25D,KAAN,CAAc,UAAY,CAEzB35D,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,OAAZ,CAEA,KAAKyhC,GAAL,CAAW,IAAX,CACA,KAAKyK,gBAAL,CAAwB,IAAxB,CAEA,KAAKC,UAAL,CAAkB,IAAlB;CAEA,CAXD,CAaA9lE,MAAM25D,KAAN,CAAYl5D,SAAZ,CAAwBE,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAxB,CACAT,MAAM25D,KAAN,CAAYl5D,SAAZ,CAAsBoJ,WAAtB,CAAoC7J,MAAM25D,KAA1C,CAEA35D,MAAM25D,KAAN,CAAYl5D,SAAZ,CAAsBsJ,IAAtB,CAA6B,SAAW1I,MAAX,CAAmBq6B,SAAnB,CAA+B,CAE3D17B,MAAMy8B,QAAN,CAAeh8B,SAAf,CAAyBsJ,IAAzB,CAA8BxI,IAA9B,CAAoC,IAApC,CAA0CF,MAA1C,CAAkDq6B,SAAlD,EAEA,GAAKr6B,OAAO+5D,GAAP,GAAe,IAApB,CAA2B,KAAKA,GAAL,CAAW/5D,OAAO+5D,GAAP,CAAWrvD,KAAX,EAAX,CAC3B,GAAK1K,OAAOwkE,gBAAP,GAA4B,IAAjC,CAAwC,KAAKA,gBAAL,CAAwBxkE,OAAOwkE,gBAAP,CAAwB95D,KAAxB,EAAxB,CAExC,KAAK+5D,UAAL,CAAkBzkE,OAAOykE,UAAzB,CACA,KAAK5oC,gBAAL,CAAwB77B,OAAO67B,gBAA/B,CAEA,WAAA,CAEA,CAZD;;;;IAqBAl9B,MAAM+lE,GAAN,CAAY,SAAWx6D,KAAX,CAAkB0c,IAAlB,CAAwBC,GAAxB,CAA8B,CAEzC,KAAKxnB,IAAL,CAAY,EAAZ,CAEA,KAAK6K,KAAL,CAAa,UAAUhC,KAAV,CAAiBgC,KAAjB,CAAb,CAEA,KAAK0c,IAAL,CAAcA,OAAS9nB,SAAX,CAAyB8nB,IAAzB,CAAgC,CAA5C,CACA,KAAKC,GAAL,CAAaA,MAAQ/nB,SAAV,CAAwB+nB,GAAxB,CAA8B,IAAzC,CAEA,CATD,CAWAloB,MAAM+lE,GAAN,CAAUtlE,SAAV,CAAoBsL,KAApB,CAA4B,UAAY,CAEvC,iBAAiBg6D,GAAV,CAAe,KAAKx6D,KAAL,CAAWgB,MAAX,EAAf,CAAoC,KAAK0b,IAAzC,CAA+C,KAAKC,GAApD,CAAP,CAEA,CAJD;;;;IAaAloB,MAAMgmE,OAAN,CAAgB,SAAWz6D,KAAX,CAAkB06D,OAAlB,CAA4B,CAE3C,KAAKvlE,IAAL,CAAY,EAAZ,CAEA,KAAK6K,KAAL,CAAa,UAAUhC,KAAV,CAAiBgC,KAAjB,CAAb,CACA,KAAK06D,OAAL,CAAiBA,UAAY9lE,SAAd,CAA4B8lE,OAA5B,CAAsC,OAArD,CAEA,CAPD,CASAjmE,MAAMgmE,OAAN,CAAcvlE,SAAd,CAAwBsL,KAAxB,CAAgC,UAAY,CAE3C,iBAAiBi6D,OAAV,CAAmB,KAAKz6D,KAAL,CAAWgB,MAAX,EAAnB,CAAwC,KAAK05D,OAA7C,CAAP,CAEA,CAJD;CAQAjmE,MAAMg/D,WAAN,CAAoB,EAApB;CAIAh/D,MAAMg/D,WAAN,CAAmB,mBAAnB,EAA2C,iFAA3C;CAIAh/D,MAAMg/D,WAAN,CAAmB,wBAAnB,EAAgD,6DAAhD;CAIAh/D,MAAMg/D,WAAN,CAAmB,oBAAnB,EAA4C,yEAA5C;CAIAh/D,MAAMg/D,WAAN,CAAmB,gBAAnB,EAAwC,oaAAxC;CAIAh/D,MAAMg/D,WAAN,CAAmB,qBAAnB,EAA6C,qFAA7C;CAIAh/D,MAAMg/D,WAAN,CAAmB,cAAnB,EAAsC,0CAAtC;CAIAh/D,MAAMg/D,WAAN,CAAmB,oBAAnB,EAA4C,yCAA5C;CAIAh/D,MAAMg/D,WAAN,CAAmB,OAAnB,EAA+B,g6HAA/B;CAIAh/D,MAAMg/D,WAAN,CAAmB,uBAAnB,EAA+C,sxBAA/C;CAIAh/D,MAAMg/D,WAAN,CAAmB,0BAAnB,EAAkD,kMAAlD;CAIAh/D,MAAMg/D,WAAN,CAAmB,+BAAnB,EAAuD,uLAAvD;CAIAh/D,MAAMg/D,WAAN,CAAmB,6BAAnB,EAAqD,oHAArD;CAIAh/D,MAAMg/D,WAAN,CAAmB,wBAAnB,EAAgD,0HAAhD;CAIAh/D,MAAMg/D,WAAN,CAAmB,gBAAnB,EAAwC,wDAAxC;CAIAh/D,MAAMg/D,WAAN,CAAmB,qBAAnB,EAA6C,mDAA7C;CAIAh/D,MAAMg/D,WAAN,CAAmB,mBAAnB,EAA2C,iDAA3C;CAIAh/D,MAAMg/D,WAAN,CAAmB,cAAnB,EAAsC,oDAAtC;CAIAh/D,MAAMg/D,WAAN,CAAmB,QAAnB,EAAgC,+wDAAhC;CAIAh/D,MAAMg/D,WAAN,CAAmB,6BAAnB,EAAqD,o+HAArD;CAIAh/D,MAAMg/D,WAAN,CAAmB,sBAAnB,EAA8C,oHAA9C;CAIAh/D,MAAMg/D,WAAN,CAAmB,wBAAnB,EAAgD,+IAAhD;CAIAh/D,MAAMg/D,WAAN,CAAmB,6BAAnB,EAAqD,gJAArD;CAIAh/D,MAAMg/D,WAAN,CAAmB,sBAAnB,EAA8C,2MAA9C;CAIAh/D,MAAMg/D,WAAN,CAAmB,2BAAnB,EAAmD,mEAAnD;CAIAh/D,MAAMg/D,WAAN,CAAmB,yBAAnB,EAAiD,yvFAAjD;CAIAh/D,MAAMg/D,WAAN,CAAmB,oBAAnB,EAA4C,yDAA5C;CAIAh/D,MAAMg/D,WAAN,CAAmB,iBAAnB,EAAyC,4oDAAzC;CAIAh/D,MAAMg/D,WAAN,CAAmB,sBAAnB,EAA8C,6lBAA9C;CAIAh/D,MAAMg/D,WAAN,CAAmB,oBAAnB,EAA4C,uNAA5C;CAIAh/D,MAAMg/D,WAAN,CAAmB,eAAnB,EAAuC,ifAAvC;CAIAh/D,MAAMg/D,WAAN,CAAmB,cAAnB,EAAsC,gbAAtC;CAIAh/D,MAAMg/D,WAAN,CAAmB,mBAAnB,EAA2C,oKAA3C;CAIAh/D,MAAMg/D,WAAN,CAAmB,mBAAnB,EAA2C,6HAA3C;CAIAh/D,MAAMg/D,WAAN,CAAmB,wBAAnB,EAAgD,8FAAhD;CAIAh/D,MAAMg/D,WAAN,CAAmB,uBAAnB,EAA+C,6kEAA/C;CAIAh/D,MAAMg/D,WAAN,CAAmB,aAAnB,EAAqC,87NAArC;CAIAh/D,MAAMg/D,WAAN,CAAmB,uBAAnB,EAA+C,uMAA/C;CAIAh/D,MAAMg/D,WAAN,CAAmB,4BAAnB,EAAoD,iwCAApD;CAIAh/D,MAAMg/D,WAAN,CAAmB,0BAAnB,EAAkD,qYAAlD;CAIAh/D,MAAMg/D,WAAN,CAAmB,+BAAnB,EAAuD,myDAAvD;CAIAh/D,MAAMg/D,WAAN,CAAmB,iBAAnB,EAAyC,w2FAAzC;CAIAh/D,MAAMg/D,WAAN,CAAmB,sBAAnB,EAA8C,kIAA9C;CAIAh/D,MAAMg/D,WAAN,CAAmB,2BAAnB,EAAmD,oIAAnD;CAIAh/D,MAAMg/D,WAAN,CAAmB,yBAAnB,EAAiD,kIAAjD;CAIAh/D,MAAMg/D,WAAN,CAAmB,oBAAnB,EAA4C,4PAA5C;CAIAh/D,MAAMg/D,WAAN,CAAmB,cAAnB,EAAsC,kJAAtC;CAIAh/D,MAAMg/D,WAAN,CAAmB,mBAAnB,EAA2C,mDAA3C;CAIAh/D,MAAMg/D,WAAN,CAAmB,uBAAnB,EAA+C,kMAA/C;CAIAh/D,MAAMg/D,WAAN,CAAmB,4BAAnB,EAAoD,gFAApD;CAIAh/D,MAAMg/D,WAAN,CAAmB,uBAAnB,EAA+C,sKAA/C;CAIAh/D,MAAMg/D,WAAN,CAAmB,4BAAnB,EAAoD,mEAApD;CAIAh/D,MAAMg/D,WAAN,CAAmB,oBAAnB,EAA4C,2UAA5C;CAIAh/D,MAAMg/D,WAAN,CAAmB,yBAAnB,EAAiD,qKAAjD;CAIAh/D,MAAMg/D,WAAN,CAAmB,oBAAnB,EAA4C,+pBAA5C;CAIAh/D,MAAMg/D,WAAN,CAAmB,iBAAnB,EAAyC,ilBAAzC;CAIAh/D,MAAMg/D,WAAN,CAAmB,yBAAnB,EAAiD,qkBAAjD;CAIAh/D,MAAMg/D,WAAN,CAAmB,SAAnB,EAAiC,kxCAAjC;CAIAh/D,MAAMg/D,WAAN,CAAmB,8BAAnB,EAAsD,4EAAtD;CAIAh/D,MAAMg/D,WAAN,CAAmB,gBAAnB,EAAwC,mMAAxC;CAIAh/D,MAAMg/D,WAAN,CAAmB,uBAAnB,EAA+C,sKAA/C;CAIAh/D,MAAMg/D,WAAN,CAAmB,4BAAnB,EAAoD,mEAApD;CAIAh/D,MAAMg/D,WAAN,CAAmB,yBAAnB,EAAiD,otMAAjD;CAIAh/D,MAAMg/D,WAAN,CAAmB,uBAAnB,EAA+C,udAA/C;CAIAh/D,MAAMg/D,WAAN,CAAmB,kBAAnB,EAA0C,8fAA1C;CAIAh/D,MAAMg/D,WAAN,CAAmB,0BAAnB,EAAkD,8mCAAlD;CAIAh/D,MAAMg/D,WAAN,CAAmB,iBAAnB,EAAyC,6NAAzC;CAIAh/D,MAAMg/D,WAAN,CAAmB,sBAAnB,EAA8C,s/BAA9C;CAIAh/D,MAAMg/D,WAAN,CAAmB,iBAAnB,EAAyC,8WAAzC;CAIAh/D,MAAMg/D,WAAN,CAAmB,mBAAnB,EAA2C,sWAA3C;CAIAh/D,MAAMg/D,WAAN,CAAmB,sBAAnB,EAA8C,sLAA9C;CAIAh/D,MAAMg/D,WAAN,CAAmB,2BAAnB,EAAmD,iEAAnD;CAIAh/D,MAAMg/D,WAAN,CAAmB,sBAAnB,EAA8C,8FAA9C;CAIAh/D,MAAMg/D,WAAN,CAAmB,2BAAnB,EAAmD,m5BAAnD;CAIAh/D,MAAMg/D,WAAN,CAAmB,mBAAnB,EAA2C,kFAA3C;CAIAh/D,MAAMg/D,WAAN,CAAmB,iBAAnB,EAAyC,wGAAzC;CAIAh/D,MAAMg/D,WAAN,CAAmB,YAAnB,EAAoC,2EAApC;CAIAh/D,MAAMg/D,WAAN,CAAmB,kBAAnB,EAA0C,+PAA1C;CAIAh/D,MAAMg/D,WAAN,CAAmB,gBAAnB,EAAwC,8RAAxC;CAIAh/D,MAAMg/D,WAAN,CAAmB,WAAnB,EAAmC,2RAAnC;CAIAh/D,MAAMg/D,WAAN,CAAmB,iBAAnB,EAAyC,yRAAzC;;;IAQAh/D,MAAM2+D,aAAN,CAAsB,CAErBl4B,MAAO,eAAWyvB,QAAX,CAAsB,CAE5B,WAAa,EAAb,CAEA,IAAM,MAAQ,CAAd,CAAiBxhC,EAAIwhC,SAAS90D,MAA9B,CAAsCszB,GAAtC,CAA6C,CAE5C,QAAU,KAAK3oB,KAAL,CAAYmqD,SAAUxhC,CAAV,CAAZ,CAAV,CAEA,IAAM,KAAN,OAAA,CAAqB,CAEpBwxC,OAAQ37D,CAAR,EAAciX,IAAKjX,CAAL,CAAd,CAEA,CAED,CAED,aAAA,CAEA,CApBoB,CAsBrBwB,MAAO,eAAWo6D,YAAX,CAA0B,CAEhC,iBAAmB,EAAnB,CAEA,IAAM,KAAN,gBAAA,CAA8B,CAE7BC,aAAc1xC,CAAd,EAAoB,EAApB,CAEA,IAAM,KAAN,iBAA6BA,CAAd,CAAf,CAAmC,CAElC,kBAAoByxC,aAAczxC,CAAd,EAAmBnqB,CAAnB,CAApB,CAEA,GAAK87D,+BAA+B98D,KAA/B,EACH88D,+BAA+BjyD,OAD5B,EAEHiyD,+BAA+Bt1D,OAF5B,EAGHs1D,+BAA+BrsD,OAH5B,EAIHqsD,+BAA+B3mD,OAJ5B,EAKH2mD,+BAA+BxuD,OAL5B,EAMHwuD,+BAA+B7M,OANjC,CAM2C,CAE1C4M,aAAc1xC,CAAd,EAAmBnqB,CAAnB,EAAyB87D,cAAct6D,KAAd,EAAzB,CAEA,CAVD,QAUYwwB,MAAMC,OAAN,CAAe6pC,aAAf,CAAL,CAAsC,CAE5CD,aAAc1xC,CAAd,EAAmBnqB,CAAnB,EAAyB87D,cAAc55D,KAAd,EAAzB,CAEA,CAJM,IAIA,CAEN25D,aAAc1xC,CAAd,EAAmBnqB,CAAnB,EAAyB87D,aAAzB,CAEA,CAED,CAED,CAED,mBAAA,CAEA,CA5DoB,CAAtB;;;IAsEArmE,MAAM++D,WAAN,CAAoB,CAEnBuH,OAAQ,CAEP,UAAW,CAAE3sC,KAAM,GAAR,CAAa7vB,MAAO,UAAUP,KAAV,CAAiB,QAAjB,CAApB,CAFJ,CAGP,UAAW,CAAEowB,KAAM,IAAR,CAAc7vB,MAAO,GAArB,CAHJ,CAKP,MAAO,CAAE6vB,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CALA,CAMP,eAAgB,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,UAAUkQ,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAA4B,CAA5B,CAArB,CANT,CAQP,cAAe,CAAE2f,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CARR,CASP,WAAY,CAAE6vB,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CATL,CAWP,SAAU,CAAE6vB,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CAXH,CAYP,aAAc,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,CAAE,CAAvB,CAZP,CAaP,eAAgB,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,GAArB,CAbT,CAcP,kBAAmB,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,IAArB,CAdZ,CAFW,CAoBnBy8D,MAAO,CAEN,QAAS,CAAE5sC,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CAFH,CAGN,iBAAkB,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,CAArB,CAHZ,CApBY,CA2BnB08D,SAAU,CAET,WAAY,CAAE7sC,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CAFH,CAGT,oBAAqB,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,CAArB,CAHZ,CA3BS,CAkCnB28D,YAAa,CAEZ,cAAe,CAAE9sC,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CAFH,CAlCM,CAwCnB48D,QAAS,CAER,UAAW,CAAE/sC,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CAFH,CAGR,YAAa,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,CAArB,CAHL,CAxCU,CA+CnB68D,UAAW,CAEV,YAAa,CAAEhtC,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CAFH,CAGV,cAAe,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,UAAUsK,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAArB,CAHL,CA/CQ,CAsDnBwyD,gBAAiB,CAEhB,kBAAmB,CAAEjtC,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CAFH,CAGhB,oBAAqB,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,CAArB,CAHL,CAIhB,mBAAoB,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,CAArB,CAJJ,CAtDE,CA8DnB+8D,aAAc,CAEb,eAAgB,CAAEltC,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CAFH,CA9DK,CAoEnBg9D,aAAc,CAEb,eAAgB,CAAEntC,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CAFH,CApEK,CA0EnBsxD,IAAK,CAEJ,aAAc,CAAEzhC,KAAM,IAAR,CAAc7vB,MAAO,OAArB,CAFV,CAGJ,UAAW,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,CAArB,CAHP,CAIJ,SAAU,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,IAArB,CAJN,CAKJ,WAAY,CAAE6vB,KAAM,GAAR,CAAa7vB,MAAO,UAAUP,KAAV,CAAiB,QAAjB,CAApB,CALR,CA1Ec,CAmFnB8xD,OAAQ,CAEP,oBAAqB,CAAE1hC,KAAM,KAAR,CAAe7vB,MAAO,EAAtB,CAFd,CAIP,oBAAqB,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,EAArB,CAAyBi9D,WAAY,CACzD,YAAa,CAAEptC,KAAM,IAAR,CAD4C,CAEzD,QAAS,CAAEA,KAAM,GAAR,CAFgD,CAIzD,SAAU,CAAEA,KAAM,IAAR,CAJ+C,CAKzD,aAAc,CAAEA,KAAM,IAAR,CAL2C,CAMzD,eAAgB,CAAEA,KAAM,IAAR,CANyC,CAOzD,gBAAiB,CAAEA,KAAM,IAAR,CAPwC,CAArC,CAJd,CAcP,uBAAwB,CAAEA,KAAM,IAAR,CAAc7vB,MAAO,EAArB,CAdjB,CAeP,0BAA2B,CAAE6vB,KAAM,KAAR,CAAe7vB,MAAO,EAAtB,CAfpB,CAiBP,aAAc,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,EAArB,CAAyBi9D,WAAY,CAClD,QAAS,CAAEptC,KAAM,GAAR,CADyC,CAElD,WAAY,CAAEA,KAAM,IAAR,CAFsC,CAGlD,YAAa,CAAEA,KAAM,IAAR,CAHqC,CAIlD,WAAY,CAAEA,KAAM,IAAR,CAJsC,CAKlD,UAAW,CAAEA,KAAM,IAAR,CALuC,CAMlD,cAAe,CAAEA,KAAM,IAAR,CANmC,CAOlD,QAAS,CAAEA,KAAM,IAAR,CAPyC,CASlD,SAAU,CAAEA,KAAM,IAAR,CATwC,CAUlD,aAAc,CAAEA,KAAM,IAAR,CAVoC,CAWlD,eAAgB,CAAEA,KAAM,IAAR,CAXkC,CAYlD,gBAAiB,CAAEA,KAAM,IAAR,CAZiC,CAArC,CAjBP,CAgCP,gBAAiB,CAAEA,KAAM,IAAR,CAAc7vB,MAAO,EAArB,CAhCV,CAiCP,mBAAoB,CAAE6vB,KAAM,KAAR,CAAe7vB,MAAO,EAAtB,CAjCb,CAmCP,cAAe,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,EAArB,CAAyBi9D,WAAY,CACnD,QAAS,CAAEptC,KAAM,GAAR,CAD0C,CAEnD,WAAY,CAAEA,KAAM,IAAR,CAFuC,CAGnD,QAAS,CAAEA,KAAM,IAAR,CAH0C,CAInD,WAAY,CAAEA,KAAM,IAAR,CAJuC,CAMnD,SAAU,CAAEA,KAAM,IAAR,CANyC,CAOnD,aAAc,CAAEA,KAAM,IAAR,CAPqC,CAQnD,eAAgB,CAAEA,KAAM,IAAR,CARmC,CASnD,gBAAiB,CAAEA,KAAM,IAAR,CATkC,CAArC,CAnCR,CA+CP,iBAAkB,CAAEA,KAAM,IAAR,CAAc7vB,MAAO,EAArB,CA/CX,CAgDP,oBAAqB,CAAE6vB,KAAM,KAAR,CAAe7vB,MAAO,EAAtB,CAhDd,CAkDP,mBAAoB,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,EAArB,CAAyBi9D,WAAY,CACxD,YAAa,CAAEptC,KAAM,IAAR,CAD2C,CAExD,WAAY,CAAEA,KAAM,GAAR,CAF4C,CAGxD,cAAe,CAAEA,KAAM,GAAR,CAHyC,CAArC,CAlDb,CAnFW,CA6InBjd,OAAQ,CAEP,UAAW,CAAEid,KAAM,GAAR,CAAa7vB,MAAO,UAAUP,KAAV,CAAiB,QAAjB,CAApB,CAFJ,CAGP,UAAW,CAAEowB,KAAM,IAAR,CAAc7vB,MAAO,GAArB,CAHJ,CAIP,OAAQ,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,GAArB,CAJD,CAKP,QAAS,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,GAArB,CALF,CAMP,MAAO,CAAE6vB,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CANA,CAOP,eAAgB,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,UAAUkQ,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAA4B,CAA5B,CAArB,CAPT,CA7IW,CAApB;CA4JAha,MAAMg/D,WAAN,CAAmB,WAAnB,EAAmC,2WAAnC;CAIAh/D,MAAMg/D,WAAN,CAAmB,WAAnB,EAAmC,2UAAnC;CAIAh/D,MAAMg/D,WAAN,CAAmB,YAAnB,EAAoC,8tBAApC;CAIAh/D,MAAMg/D,WAAN,CAAmB,YAAnB,EAAoC,0gBAApC;CAIAh/D,MAAMg/D,WAAN,CAAmB,mBAAnB,EAA2C,4RAA3C;CAIAh/D,MAAMg/D,WAAN,CAAmB,mBAAnB,EAA2C,qaAA3C;CAIAh/D,MAAMg/D,WAAN,CAAmB,eAAnB,EAAuC,0gBAAvC;CAIAh/D,MAAMg/D,WAAN,CAAmB,eAAnB,EAAuC,2UAAvC;CAIAh/D,MAAMg/D,WAAN,CAAmB,iBAAnB,EAAyC,qxBAAzC;CAIAh/D,MAAMg/D,WAAN,CAAmB,iBAAnB,EAAyC,sdAAzC;CAIAh/D,MAAMg/D,WAAN,CAAmB,gBAAnB,EAAwC,6xCAAxC;CAIAh/D,MAAMg/D,WAAN,CAAmB,gBAAnB,EAAwC,+xBAAxC;CAIAh/D,MAAMg/D,WAAN,CAAmB,kBAAnB,EAA0C,8+DAA1C;CAIAh/D,MAAMg/D,WAAN,CAAmB,kBAAnB,EAA0C,m/BAA1C;CAIAh/D,MAAMg/D,WAAN,CAAmB,gBAAnB,EAAwC,8vDAAxC;CAIAh/D,MAAMg/D,WAAN,CAAmB,gBAAnB,EAAwC,4lCAAxC;CAIAh/D,MAAMg/D,WAAN,CAAmB,mBAAnB,EAA2C,o/DAA3C;CAIAh/D,MAAMg/D,WAAN,CAAmB,mBAAnB,EAA2C,2kCAA3C;CAIAh/D,MAAMg/D,WAAN,CAAmB,aAAnB,EAAqC,gUAArC;CAIAh/D,MAAMg/D,WAAN,CAAmB,aAAnB,EAAqC,wXAArC;CAIAh/D,MAAMg/D,WAAN,CAAmB,aAAnB,EAAqC,4wBAArC;CAIAh/D,MAAMg/D,WAAN,CAAmB,aAAnB,EAAqC,wiBAArC;CAIAh/D,MAAMg/D,WAAN,CAAmB,aAAnB,EAAqC,oRAArC;CAIAh/D,MAAMg/D,WAAN,CAAmB,aAAnB,EAAqC,uKAArC;;;;;;;IAaAh/D,MAAMgnE,SAAN,CAAkB,CAEjB,QAAS,CAER9Q,SAAUl2D,MAAM2+D,aAAN,CAAoBl4B,KAApB,CAA2B,CAEpCzmC,MAAM++D,WAAN,CAAmB,QAAnB,CAFoC,CAGpC/+D,MAAM++D,WAAN,CAAmB,OAAnB,CAHoC,CAIpC/+D,MAAM++D,WAAN,CAAmB,KAAnB,CAJoC,CAA3B,CAFF,CAUR5I,aAAcn2D,MAAMg/D,WAAN,CAAmB,gBAAnB,CAVN,CAWR5I,eAAgBp2D,MAAMg/D,WAAN,CAAmB,gBAAnB,CAXR,CAFQ,CAiBjB,UAAW,CAEV9I,SAAUl2D,MAAM2+D,aAAN,CAAoBl4B,KAApB,CAA2B,CAEpCzmC,MAAM++D,WAAN,CAAmB,QAAnB,CAFoC,CAGpC/+D,MAAM++D,WAAN,CAAmB,OAAnB,CAHoC,CAIpC/+D,MAAM++D,WAAN,CAAmB,UAAnB,CAJoC,CAKpC/+D,MAAM++D,WAAN,CAAmB,aAAnB,CALoC,CAMpC/+D,MAAM++D,WAAN,CAAmB,KAAnB,CANoC,CAOpC/+D,MAAM++D,WAAN,CAAmB,QAAnB,CAPoC,CASpC,CACC,WAAa,CAAEplC,KAAM,GAAR,CAAa7vB,MAAO,UAAUP,KAAV,CAAiB,QAAjB,CAApB,CADd,CAToC,CAA3B,CAFA,CAiBV4sD,aAAcn2D,MAAMg/D,WAAN,CAAmB,kBAAnB,CAjBJ,CAkBV5I,eAAgBp2D,MAAMg/D,WAAN,CAAmB,kBAAnB,CAlBN,CAjBM,CAuCjB,QAAS,CAER9I,SAAUl2D,MAAM2+D,aAAN,CAAoBl4B,KAApB,CAA2B,CAEpCzmC,MAAM++D,WAAN,CAAmB,QAAnB,CAFoC,CAGpC/+D,MAAM++D,WAAN,CAAmB,OAAnB,CAHoC,CAIpC/+D,MAAM++D,WAAN,CAAmB,UAAnB,CAJoC,CAKpC/+D,MAAM++D,WAAN,CAAmB,aAAnB,CALoC,CAMpC/+D,MAAM++D,WAAN,CAAmB,SAAnB,CANoC,CAOpC/+D,MAAM++D,WAAN,CAAmB,WAAnB,CAPoC,CAQpC/+D,MAAM++D,WAAN,CAAmB,iBAAnB,CARoC,CASpC/+D,MAAM++D,WAAN,CAAmB,KAAnB,CAToC,CAUpC/+D,MAAM++D,WAAN,CAAmB,QAAnB,CAVoC,CAYpC,CACC,WAAa,CAAEplC,KAAM,GAAR,CAAa7vB,MAAO,UAAUP,KAAV,CAAiB,QAAjB,CAApB,CADd,CAEC,WAAa,CAAEowB,KAAM,GAAR,CAAa7vB,MAAO,UAAUP,KAAV,CAAiB,QAAjB,CAApB,CAFd,CAGC,YAAa,CAAEowB,KAAM,IAAR,CAAc7vB,MAAO,EAArB,CAHd,CAZoC,CAA3B,CAFF,CAsBRqsD,aAAcn2D,MAAMg/D,WAAN,CAAmB,gBAAnB,CAtBN,CAuBR5I,eAAgBp2D,MAAMg/D,WAAN,CAAmB,gBAAnB,CAvBR,CAvCQ,CAkEjB,WAAY,CAEX9I,SAAUl2D,MAAM2+D,aAAN,CAAoBl4B,KAApB,CAA2B,CAEpCzmC,MAAM++D,WAAN,CAAmB,QAAnB,CAFoC,CAGpC/+D,MAAM++D,WAAN,CAAmB,OAAnB,CAHoC,CAIpC/+D,MAAM++D,WAAN,CAAmB,UAAnB,CAJoC,CAKpC/+D,MAAM++D,WAAN,CAAmB,aAAnB,CALoC,CAMpC/+D,MAAM++D,WAAN,CAAmB,SAAnB,CANoC,CAOpC/+D,MAAM++D,WAAN,CAAmB,WAAnB,CAPoC,CAQpC/+D,MAAM++D,WAAN,CAAmB,iBAAnB,CARoC,CASpC/+D,MAAM++D,WAAN,CAAmB,cAAnB,CAToC,CAUpC/+D,MAAM++D,WAAN,CAAmB,cAAnB,CAVoC,CAWpC/+D,MAAM++D,WAAN,CAAmB,KAAnB,CAXoC,CAYpC/+D,MAAM++D,WAAN,CAAmB,QAAnB,CAZoC,CAcpC,CACC,WAAa,CAAEplC,KAAM,GAAR,CAAa7vB,MAAO,UAAUP,KAAV,CAAiB,QAAjB,CAApB,CADd,CAEC,YAAa,CAAEowB,KAAM,IAAR,CAAc7vB,MAAO,GAArB,CAFd,CAGC,YAAa,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,CAArB,CAHd,CAIC,kBAAoB,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO;CAArB,CAJrB,CAdoC,CAA3B,CAFC,CAyBXqsD,aAAcn2D,MAAMg/D,WAAN,CAAmB,mBAAnB,CAzBH,CA0BX5I,eAAgBp2D,MAAMg/D,WAAN,CAAmB,mBAAnB,CA1BL,CAlEK,CAgGjB,SAAU,CAET9I,SAAUl2D,MAAM2+D,aAAN,CAAoBl4B,KAApB,CAA2B,CAEpCzmC,MAAM++D,WAAN,CAAmB,QAAnB,CAFoC,CAGpC/+D,MAAM++D,WAAN,CAAmB,KAAnB,CAHoC,CAA3B,CAFD,CAST5I,aAAcn2D,MAAMg/D,WAAN,CAAmB,aAAnB,CATL,CAUT5I,eAAgBp2D,MAAMg/D,WAAN,CAAmB,aAAnB,CAVP,CAhGO,CA8GjB,SAAU,CAET9I,SAAUl2D,MAAM2+D,aAAN,CAAoBl4B,KAApB,CAA2B,CAEpCzmC,MAAM++D,WAAN,CAAmB,QAAnB,CAFoC,CAGpC/+D,MAAM++D,WAAN,CAAmB,KAAnB,CAHoC,CAKpC,CACC,QAAa,CAAEplC,KAAM,IAAR,CAAc7vB,MAAO,CAArB,CADd,CAEC,WAAa,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,CAArB,CAFd,CAGC,YAAa,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,CAArB,CAHd,CALoC,CAA3B,CAFD,CAeTqsD,aAAcn2D,MAAMg/D,WAAN,CAAmB,iBAAnB,CAfL,CAgBT5I,eAAgBp2D,MAAMg/D,WAAN,CAAmB,iBAAnB,CAhBP,CA9GO,CAkIjB,QAAS,CAER9I,SAAUl2D,MAAM2+D,aAAN,CAAoBl4B,KAApB,CAA2B,CAEpCzmC,MAAM++D,WAAN,CAAmB,QAAnB,CAFoC,CAGpC/+D,MAAM++D,WAAN,CAAmB,iBAAnB,CAHoC,CAA3B,CAFF,CASR5I,aAAcn2D,MAAMg/D,WAAN,CAAmB,YAAnB,CATN,CAUR5I,eAAgBp2D,MAAMg/D,WAAN,CAAmB,YAAnB,CAVR,CAlIQ,CAgJjB,SAAU,CAET9I,SAAU,CAET,UAAY,CAAEv8B,KAAM,IAAR,CAAc7vB,MAAO,GAArB,CAFH,CAFD,CAQTqsD,aAAcn2D,MAAMg/D,WAAN,CAAmB,aAAnB,CARL,CAST5I,eAAgBp2D,MAAMg/D,WAAN,CAAmB,aAAnB,CATP,CAhJO;;+EAiKjB,OAAQ,CAEP9I,SAAU,CACT,QAAS,CAAEv8B,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CADA,CAET,QAAS,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,CAAE,CAAvB,CAFA,CAFH,CAOPqsD,aAAcn2D,MAAMg/D,WAAN,CAAmB,WAAnB,CAPP,CAQP5I,eAAgBp2D,MAAMg/D,WAAN,CAAmB,WAAnB,CART,CAjKS;;+EAiLjB,WAAY,CAEX9I,SAAU,CACT,YAAa,CAAEv8B,KAAM,GAAR,CAAa7vB,MAAO,IAApB,CADJ,CAET,QAAS,CAAE6vB,KAAM,IAAR,CAAc7vB,MAAO,CAAE,CAAvB,CAFA,CAFC,CAOXqsD,aAAcn2D,MAAMg/D,WAAN,CAAmB,eAAnB,CAPH,CAQX5I,eAAgBp2D,MAAMg/D,WAAN,CAAmB,eAAnB,CARL,CAjLK,CA6LjB,eAAgB,CAEf9I,SAAU,CAET,WAAY,CAAEv8B,KAAM,IAAR,CAAc7vB,MAAO,UAAUiH,OAAV,EAArB,CAFH,CAFK,CAQfolD,aAAcn2D,MAAMg/D,WAAN,CAAmB,mBAAnB,CARC,CASf5I,eAAgBp2D,MAAMg/D,WAAN,CAAmB,mBAAnB,CATD,CA7LC,CAAlB,CA4MAh/D,MAAMgnE,SAAN,CAAiB,UAAjB,EAAgC,CAE/B9Q,SAAUl2D,MAAM2+D,aAAN,CAAoBl4B,KAApB,CAA2B,CAEpCzmC,MAAMgnE,SAAN,CAAiB,UAAjB,EAA8B9Q,QAFM,CAIpC;CAAA,CAJoC,CAA3B,CAFqB,CAY/BC,aAAcn2D,MAAMg/D,WAAN,CAAmB,mBAAnB,CAZiB,CAa/B5I,eAAgBp2D,MAAMg/D,WAAN,CAAmB,mBAAnB,CAbe,CAAhC;;;;;;;IA4BAh/D,MAAMinE,aAAN,CAAsB,SAAW3+B,UAAX,CAAwB,CAE7Cn9B,QAAQqmB,GAAR,CAAa,qBAAb,CAAoCxxB,MAAMF,QAA1C,EAEAwoC,WAAaA,YAAc,EAA3B,CAEA,YAAcA,WAAWo3B,MAAX,GAAsBv/D,SAAtB,CAAkCmoC,WAAWo3B,MAA7C,CAAsDtM,SAASC,aAAT,CAAwB,QAAxB,CAApE,CACA6T,SAAW5+B,WAAWub,OAAX,GAAuB1jD,SAAvB,CAAmCmoC,WAAWub,OAA9C,CAAwD,IADnE,CAGAsjB,OAAS7+B,WAAW16B,KAAX,GAAqBzN,SAArB,CAAiCmoC,WAAW16B,KAA5C,CAAoD,KAH7D,CAIAw5D,OAAS9+B,WAAW4vB,KAAX,GAAqB/3D,SAArB,CAAiCmoC,WAAW4vB,KAA5C,CAAoD,IAJ7D,CAKAmP,SAAW/+B,WAAWg/B,OAAX,GAAuBnnE,SAAvB,CAAmCmoC,WAAWg/B,OAA9C,CAAwD,IALnE,CAMAC,WAAaj/B,WAAWk/B,SAAX,GAAyBrnE,SAAzB,CAAqCmoC,WAAWk/B,SAAhD,CAA4D,KANzE,CAOAC,oBAAsBn/B,WAAW4zB,kBAAX,GAAkC/7D,SAAlC,CAA8CmoC,WAAW4zB,kBAAzD,CAA8E,IAPpG,CAQAwL,uBAAyBp/B,WAAWq/B,qBAAX,GAAqCxnE,SAArC,CAAiDmoC,WAAWq/B,qBAA5D,CAAoF,KAR7G,CAUA,WAAa,EAAb,CAEA,kBAAoB,EAApB,CACA,2BAA6B,CAAE,CAA/B,CACA,uBAAyB,EAAzB,CACA,gCAAkC,CAAE,CAApC,CAEA,oBAAsB,gBAAA,CAAkB,CAAlB,CAAtB,CAEA,YAAc,EAAd,CACA,eAAiB,EAAjB;CAIA,KAAKC,UAAL,CAAkBC,OAAlB,CACA,KAAKhkB,OAAL,CAAe,IAAf;CAIA,KAAKikB,SAAL,CAAiB,IAAjB,CACA,KAAKC,cAAL,CAAsB,IAAtB,CACA,KAAKC,cAAL,CAAsB,IAAtB,CACA,KAAKC,gBAAL,CAAwB,IAAxB;CAIA,KAAKC,WAAL,CAAmB,IAAnB;CAIA,KAAKrM,cAAL,CAAsB,EAAtB,CACA,KAAKsM,oBAAL,CAA4B,KAA5B;CAIA,KAAKl8D,WAAL,CAAmB,GAAnB;CACA,KAAKm8D,UAAL,CAAkB,KAAlB,CACA,KAAKC,WAAL,CAAmB,KAAnB;CAIA,KAAKC,uBAAL,CAA+B,KAA/B;CAIA,KAAKC,WAAL,CAAmBvoE,MAAMiF,iBAAzB,CACA,KAAKujE,mBAAL,CAA2B,GAA3B,CACA,KAAKC,qBAAL,CAA6B,GAA7B;CAIA,KAAKC,eAAL,CAAuB,CAAvB,CACA,KAAKC,eAAL,CAAuB,CAAvB;CAIA,KAAKC,iBAAL,CAAyB,IAAzB;CAIA,UAAY,IAAZ;CAIAC,gBAAkB,IAJlB,CAKAC,qBAAuB,IALvB,CAMAC,oBAAsB,IANtB,CAOAC,mBAAqB,CAAE,CAPvB,CAQAC,wBAA0B,EAR1B,CASAC,eAAiB,IATjB,CAWAC,gBAAkB,UAAUnvD,OAAV,EAXlB,CAYAovD,oBAAsB,IAZtB,CAcAC,iBAAmB,UAAUrvD,OAAV,EAdnB;CAkBAsvD,kBAAoB,CAlBpB;CAsBAC,YAAc,UAAUhgE,KAAV,CAAiB,QAAjB,CAtBd,CAuBAigE,YAAc,CAvBd,CAyBAC,OAAS5B,QAAQnd,KAzBjB,CA0BAgf,QAAU7B,QAAQld,MA1BlB,CA4BAgf,YAAc,CA5Bd,CA8BAC,SAAW,UAAU5vD,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyByvD,MAAzB,CAAiCC,OAAjC,CA9BX,CA+BAG,aAAe,KA/Bf,CAiCAC,UAAY,UAAU9vD,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyByvD,MAAzB,CAAiCC,OAAjC,CAjCZ;CAqCAK,SAAW,UAAUz9C,OAAV,EArCX;CAyCA09C,UAAY,UAAUC,aAAV,EAzCZ,CA0CAC,iBAAmB,KA1CnB,CA2CAC,sBAAwB,KA3CxB,CA6CAC,QAAU,UAAU3qD,MAAV,EA7CV;CAiDA4qD,kBAAoB,UAAUxyD,OAAV,EAjDpB,CAmDAyyD,SAAW,UAAUv5D,OAAV,EAnDX;CAuDAw5D,QAAU,CAETlhC,KAAM,EAFG,CAITmhC,QAAS,CAAE,CAAF,CAAK,CAAL,CAAQ,CAAR,CAJA,CAKTC,YAAa,EALJ,CAMTC,qBAAsB,EANb,CAOTC,wBAAyB,EAPhB,CAQTC,KAAM,EARG,CASTC,cAAe,EATN,CAUTC,iBAAkB,EAVT,CAWT9uD,MAAO,EAXE,CAYT+uD,eAAgB,EAZP,CAaTC,kBAAmB,EAbV,CAcTC,KAAM,EAdG,CAgBTC,QAAS,EAhBA,CAvDV;CA6EAC,YAAc,CAEbvrC,WAAY,CAFC,CAGbE,SAAU,CAHG,CA7Ed,CAoFAsrC,YAAc,CAEbC,MAAO,CAFM,CAGbxsD,SAAU,CAHG,CAIbwkB,MAAO,CAJM,CAKb3mB,OAAQ,CALK,CApFd,CA6FA,KAAK4uD,IAAL,CAAY,CAEXjiB,OAAQ+hB,WAFG,CAGXG,OAAQJ,WAHG,CAIXK,SAAU,IAJC,CAAZ;CAWA,OAAA,CAEA,GAAI,CAEH,eAAiB,CAChB59D,MAAOu5D,MADS,CAEhBjP,MAAOkP,MAFS,CAGhBE,QAASD,QAHO,CAIhBG,UAAWD,UAJK,CAKhBrL,mBAAoBuL,mBALJ,CAMhBE,sBAAuBD,sBANP,CAAjB,CASA+D,IAAMvE,UAAYW,QAAQlI,UAAR,CAAoB,OAApB,CAA6B3gD,UAA7B,CAAZ,EAAyD6oD,QAAQlI,UAAR,CAAoB,oBAApB,CAA0C3gD,UAA1C,CAA/D,CAEA,GAAKysD,MAAQ,IAAb,CAAoB,CAEnB,GAAK5D,QAAQlI,UAAR,CAAoB,OAApB,IAAkC,IAAvC,CAA8C,CAE7C,KAAM,6DAAN,CAEA,CAJD,IAIO,CAEN,KAAM,+BAAN,CAEA,CAED;CAID,GAAK8L,IAAIC,wBAAJ,GAAiCvrE,SAAtC,CAAkD,CAEjDsrE,IAAIC,wBAAJ,CAA+B,UAAY,CAE1C,OAAO,CAAE,WAAY,CAAd,CAAiB,WAAY,CAA7B,CAAgC,YAAa,CAA7C,CAAP,CAEA,CAJD,CAMA,CAED7D,QAAQnuC,gBAAR,CAA0B,kBAA1B,CAA8CiyC,aAA9C,CAA6D,KAA7D,EAEA,CAAC,MAAQj1D,KAAR,CAAgB,CAEjBvL,QAAQuL,KAAR,CAAe,wBAA0BA,KAAzC,EAEA,CAED,cAAiB,6BAAA,GAAkC,WAAlC,EAAiD+0D,qCAAlE,CACA,eAAiB,UAAUG,eAAV,CAA2BH,GAA3B,CAAjB,CAEArN,WAAWv9D,GAAX,CAAgB,qBAAhB,EACAu9D,WAAWv9D,GAAX,CAAgB,mBAAhB,EACAu9D,WAAWv9D,GAAX,CAAgB,0BAAhB,EACAu9D,WAAWv9D,GAAX,CAAgB,wBAAhB,EACAu9D,WAAWv9D,GAAX,CAAgB,+BAAhB,EACAu9D,WAAWv9D,GAAX,CAAgB,0BAAhB,EACAu9D,WAAWv9D,GAAX,CAAgB,wBAAhB,EAEA,GAAKu9D,WAAWv9D,GAAX,CAAgB,wBAAhB,CAAL,CAAkD,CAEjDb,MAAM+e,cAAN,CAAqBwtB,QAArB,CAAgC,UAAhC,CAEA,CAED,iBAAmB,UAAUs/B,iBAAV,CAA6BJ,GAA7B,CAAkCrN,UAAlC,CAA8C91B,UAA9C,CAAnB,CAEA,UAAY,UAAUwjC,UAAV,CAAsBL,GAAtB,CAA2BrN,UAA3B,CAAuC2N,cAAvC,CAAZ,CACA,eAAiB,UAAUC,eAAV,EAAjB,CACA,YAAc,UAAUC,YAAV,CAAwBR,GAAxB,CAA6B1E,UAA7B,CAAyC,KAAKuE,IAA9C,CAAd,CACA,iBAAmB,UAAUY,aAAV,CAAyB,IAAzB,CAA+BC,YAA/B,CAAnB,CACA,eAAiB,UAAUC,WAAV,EAAjB,CAEA,KAAKd,IAAL,CAAUE,QAAV,CAAqBa,aAAab,QAAlC,CAEA,mBAAqB,UAAUc,mBAAV,CAA+Bb,GAA/B,CAAoCrN,UAApC,CAAgDgN,WAAhD,CAArB,CACA,0BAA4B,UAAUmB,0BAAV,CAAsCd,GAAtC,CAA2CrN,UAA3C,CAAuDgN,WAAvD,CAA5B;CAIA,4BAAA,EAA+B,CAE9B,8BAAgC,IAAzB,CAAgCzB,WAAhC,CAA8C,CAArD,CAEA,CAED,qBAAA,CAAuBngE,CAAvB,CAA0BC,CAA1B,CAA6BC,CAA7B,CAAgCiI,CAAhC,CAAoC,CAEnC,GAAK81D,sBAAwB,IAA7B,CAAoC,CAEnCj+D,GAAKmI,CAAL,CAAQlI,GAAKkI,CAAL,CAAQjI,GAAKiI,CAAL,CAEhB,CAED66D,MAAMC,UAAN,CAAkBjjE,CAAlB,CAAqBC,CAArB,CAAwBC,CAAxB,CAA2BiI,CAA3B,EAEA,CAED,0BAAA,EAA6B,CAE5B66D,MAAME,IAAN,GAEAF,MAAMG,OAAN,CAAexD,gBAAgBp/D,IAAhB,CAAsB6/D,QAAtB,EAAiCl8D,cAAjC,CAAiDi8D,WAAjD,CAAf,EACA6C,MAAMI,QAAN,CAAgBvD,iBAAiBt/D,IAAjB,CAAuB+/D,SAAvB,EAAmCp8D,cAAnC,CAAmDi8D,WAAnD,CAAhB,EAEAkD,aAActD,YAAY//D,CAA1B,CAA6B+/D,YAAY9/D,CAAzC,CAA4C8/D,YAAY7/D,CAAxD,CAA2D8/D,WAA3D,EAEA,CAED,qBAAA,EAAwB,CAEvBX,gBAAkB,IAAlB,CACAK,eAAiB,IAAjB,CAEAD,wBAA0B,EAA1B,CACAD,mBAAqB,CAAE,CAAvB,CAEAwD,MAAMt9B,KAAN,GAEA,CAED49B,oBAEA,KAAKjpB,OAAL,CAAe4nB,GAAf,CACA,KAAKU,YAAL,CAAoBA,YAApB,CACA,KAAK/N,UAAL,CAAkBA,UAAlB,CACA,KAAK2I,UAAL,CAAkBA,UAAlB,CACA,KAAKyF,KAAL,CAAaA,KAAb;CAIA,cAAgB,UAAUO,cAAV,CAA0B,IAA1B,CAAgCxC,OAAhC,CAAyCjuC,OAAzC,CAAhB,CAEA,KAAK0wC,SAAL,CAAiBA,SAAjB;CAKA,iBAAmB,UAAUC,YAAV,CAAwB,IAAxB,CAA8BC,OAA9B,CAAnB,CACA,oBAAsB,UAAUC,eAAV,CAA2B,IAA3B,CAAiC9H,UAAjC,CAAtB;CAIA,KAAK1F,UAAL,CAAkB,UAAY,CAE7B,UAAA,CAEA,CAJD,CAMA,KAAKyN,oBAAL,CAA4B,UAAY,CAEvC,WAAWA,oBAAJ,EAAP,CAEA,CAJD,CAMA,KAAKC,gBAAL,CAAwB,UAAY,CAEnCjP,WAAWv9D,GAAX,CAAgB,oBAAhB,EAAuCysE,WAAvC,GAEA,CAJD,CAMA,KAAKC,gBAAL,CAA0B,UAAY,CAErC,SAAA,CAEA,gCAAO,EAA4B,CAElC,GAAKzjE,QAAU3J,SAAf,CAA2B,YAAA,CAE3B,cAAgBi+D,WAAWv9D,GAAX,CAAgB,gCAAhB,CAAhB,CAEA,GAAK2sE,YAAc,IAAnB,CAA0B,CAEzB1jE,MAAQ2hE,IAAIluD,YAAJ,CAAkBiwD,UAAUC,8BAA5B,CAAR,CAEA,CAJD,IAIO,CAEN3jE,MAAQ,CAAR,CAEA,CAED,YAAA,CAEA,CAlBD,CAoBA,CAxBuB,EAAxB,CA0BA,KAAK4jE,YAAL,CAAoB,UAAY,CAE/B,oBAAoB/lC,SAApB,CAEA,CAJD,CAMA,KAAKgmC,aAAL,CAAqB,UAAY,CAEhC,kBAAA,CAEA,CAJD,CAMA,KAAKC,aAAL,CAAqB,SAAW9jE,KAAX,CAAmB,CAEvC,GAAKA,QAAU3J,SAAf,CAA2B,OAE3BwpE,YAAc7/D,KAAd,CAEA,KAAK+jE,OAAL,CAAc/D,UAAUz7D,CAAxB,CAA2By7D,UAAUx7D,CAArC,CAAwC,KAAxC,EAEA,CARD,CAUA,KAAKw/D,OAAL,CAAe,UAAY,CAE1B,OAAO,CACNpjB,MAAO+e,MADD,CAEN9e,OAAQ+e,OAFF,CAAP,CAKA,CAPD,CASA,KAAKmE,OAAL,CAAe,SAAWnjB,KAAX,CAAkBC,MAAlB,CAA0BojB,WAA1B,CAAwC,CAEtDtE,OAAS/e,KAAT,CACAgf,QAAU/e,MAAV,CAEAkd,QAAQnd,KAAR,CAAgBA,MAAQif,WAAxB,CACA9B,QAAQld,MAAR,CAAiBA,OAASgf,WAA1B,CAEA,GAAKoE,cAAgB,KAArB,CAA6B,CAE5BlG,QAAQ78D,KAAR,CAAc0/C,KAAd,CAAsBA,MAAQ,IAA9B,CACAmd,QAAQ78D,KAAR,CAAc2/C,MAAd,CAAuBA,OAAS,IAAhC,CAEA,CAED,KAAKqjB,WAAL,CAAkB,CAAlB,CAAqB,CAArB,CAAwBtjB,KAAxB,CAA+BC,MAA/B,EAEA,CAjBD,CAmBA,KAAKqjB,WAAL,CAAmB,SAAWztE,CAAX,CAAc6N,CAAd,CAAiBs8C,KAAjB,CAAwBC,MAAxB,CAAiC,CAEnD6hB,MAAMI,QAAN,CAAgB9C,UAAUngE,GAAV,CAAepJ,CAAf,CAAkB6N,CAAlB,CAAqBs8C,KAArB,CAA4BC,MAA5B,CAAhB,EAEA,CAJD,CAMA,KAAKsjB,UAAL,CAAkB,SAAW1tE,CAAX,CAAc6N,CAAd,CAAiBs8C,KAAjB,CAAwBC,MAAxB,CAAiC,CAElD6hB,MAAMG,OAAN,CAAe/C,SAASjgE,GAAT,CAAcpJ,CAAd,CAAiB6N,CAAjB,CAAoBs8C,KAApB,CAA2BC,MAA3B,CAAf,EAEA,CAJD,CAMA,KAAKujB,cAAL,CAAsB,SAAWC,OAAX,CAAqB,CAE1C3B,MAAM0B,cAAN,CAAsBrE,aAAesE,OAArC,EAEA,CAJD;CAQA,KAAKC,aAAL,CAAqB,UAAY,CAEhC,kBAAA,CAEA,CAJD,CAMA,KAAKC,aAAL,CAAqB,SAAW9iE,KAAX,CAAkBqC,KAAlB,CAA0B,CAE9C27D,YAAY5/D,GAAZ,CAAiB4B,KAAjB,EAEAi+D,YAAc57D,QAAUzN,SAAV,CAAsByN,KAAtB,CAA8B,CAA5C,CAEAi/D,aAActD,YAAY//D,CAA1B,CAA6B+/D,YAAY9/D,CAAzC,CAA4C8/D,YAAY7/D,CAAxD,CAA2D8/D,WAA3D,EAEA,CARD,CAUA,KAAK8E,aAAL,CAAqB,UAAY,CAEhC,kBAAA,CAEA,CAJD,CAMA,KAAKC,aAAL,CAAqB,SAAW3gE,KAAX,CAAmB,CAEvC47D,YAAc57D,KAAd,CAEAi/D,aAActD,YAAY//D,CAA1B,CAA6B+/D,YAAY9/D,CAAzC,CAA4C8/D,YAAY7/D,CAAxD,CAA2D8/D,WAA3D,EAEA,CAND,CAQA,KAAK9b,KAAL,CAAa,SAAWniD,KAAX,CAAkB2sD,KAAlB,CAAyBoP,OAAzB,CAAmC,CAE/C,SAAW,CAAX,CAEA,GAAK/7D,QAAUpL,SAAV,EAAuBoL,KAA5B,CAAoCijE,MAAQ/C,IAAIgD,gBAAZ,CACpC,GAAKvW,QAAU/3D,SAAV,EAAuB+3D,KAA5B,CAAoCsW,MAAQ/C,IAAIiD,gBAAZ,CACpC,GAAKpH,UAAYnnE,SAAZ,EAAyBmnE,OAA9B,CAAwCkH,MAAQ/C,IAAIkD,kBAAZ,CAExClD,IAAI/d,KAAJ,CAAW8gB,IAAX,EAEA,CAVD,CAYA,KAAK/B,UAAL,CAAkB,UAAY,CAE7B,KAAK/e,KAAL,CAAY,IAAZ,CAAkB,KAAlB,CAAyB,KAAzB,EAEA,CAJD,CAMA,KAAKkhB,UAAL,CAAkB,UAAY,CAE7B,KAAKlhB,KAAL,CAAY,KAAZ,CAAmB,IAAnB,CAAyB,KAAzB,EAEA,CAJD,CAMA,KAAKmhB,YAAL,CAAoB,UAAY,CAE/B,KAAKnhB,KAAL,CAAY,KAAZ,CAAmB,KAAnB,CAA0B,IAA1B,EAEA,CAJD,CAMA,KAAKohB,WAAL,CAAmB,SAAWlmB,YAAX,CAAyBr9C,KAAzB,CAAgC2sD,KAAhC,CAAuCoP,OAAvC,CAAiD,CAEnE,KAAKhe,eAAL,CAAsBV,YAAtB,EACA,KAAK8E,KAAL,CAAYniD,KAAZ,CAAmB2sD,KAAnB,CAA0BoP,OAA1B,EAEA,CALD;CASA,KAAKyH,YAAL,CAAoBA,YAApB,CAEA,KAAKrlC,OAAL,CAAe,UAAW,CAEzBm+B,QAAQ5tC,mBAAR,CAA6B,kBAA7B,CAAiD0xC,aAAjD,CAAgE,KAAhE,EAEA,CAJD;CAQA,sBAAA,CAAwBtxC,KAAxB,CAAgC,CAE/BA,MAAM20C,cAAN,GAEAD,eACAjC,oBAEA/F,WAAWrZ,KAAX,GAEA,CAED,yBAAA,CAA2BrzB,KAA3B,CAAmC,CAElC,YAAcA,MAAMp5B,MAApB,CAEAioD,QAAQjvB,mBAAR,CAA6B,SAA7B,CAAwCg1C,gBAAxC,EAEAC,kBAAmBhmB,OAAnB,EAEAiiB,YAAYrrC,QAAZ,GAGA,CAED,8BAAA,CAAgCzF,KAAhC,CAAwC,CAEvC,iBAAmBA,MAAMp5B,MAAzB,CAEA2nD,aAAa3uB,mBAAb,CAAkC,SAAlC,CAA6Ck1C,qBAA7C,EAEAC,uBAAwBxmB,YAAxB,EAEAuiB,YAAYrrC,QAAZ,GAEA,CAED,0BAAA,CAA4BzF,KAA5B,CAAoC,CAEnC,aAAeA,MAAMp5B,MAArB,CAEAo/B,SAASpG,mBAAT,CAA8B,SAA9B,CAAyCo1C,iBAAzC,EAEAC,mBAAoBjvC,QAApB,EAEA;CAID,0BAAA,CAA4B6oB,OAA5B,CAAsC,CAErC,sBAAwB6d,WAAWlmE,GAAX,CAAgBqoD,OAAhB,CAAxB,CAEA,GAAKA,QAAQoK,KAAR,EAAiBic,kBAAkBC,yBAAxC,CAAoE;CAInE/D,IAAIgE,aAAJ,CAAmBF,kBAAkBC,yBAArC,EAEA,CAND,IAMO;CAIN,GAAKD,kBAAkBG,WAAlB,GAAkCvvE,SAAvC,CAAmD,OAEnDsrE,IAAIgE,aAAJ,CAAmBF,kBAAkBI,cAArC,EAEA;CAGD5I,WAAW6I,MAAX,CAAmB1mB,OAAnB,EAEA,CAED,+BAAA,CAAiCN,YAAjC,CAAgD,CAE/C,2BAA6Bme,WAAWlmE,GAAX,CAAgB+nD,YAAhB,CAA7B,CACA,sBAAwBme,WAAWlmE,GAAX,CAAgB+nD,aAAaM,OAA7B,CAAxB,CAEA,GAAK,CAAEN,YAAP,CAAsB,OAEtB,GAAK2mB,kBAAkBI,cAAlB,GAAqCxvE,SAA1C,CAAsD,CAErDsrE,IAAIgE,aAAJ,CAAmBF,kBAAkBI,cAArC,EAEA,CAED,GAAK/mB,aAAainB,YAAlB,CAAiC,CAEhCjnB,aAAainB,YAAb,CAA0BnmC,OAA1B,GAEA,CAED,GAAKkf,8BAA8BC,qBAAnC,CAA2D,CAE1D,IAAM,MAAQ,CAAd,CAAiBhsC,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9B4uD,IAAIqE,iBAAJ,CAAuBC,uBAAuBC,kBAAvB,CAA2CnzD,CAA3C,CAAvB,EACA,GAAKkzD,uBAAuBE,kBAA5B,CAAiDxE,IAAIyE,kBAAJ,CAAwBH,uBAAuBE,kBAAvB,CAA2CpzD,CAA3C,CAAxB,EAEjD,CAED,CATD,IASO,CAEN4uD,IAAIqE,iBAAJ,CAAuBC,uBAAuBC,kBAA9C,EACA,GAAKD,uBAAuBE,kBAA5B,CAAiDxE,IAAIyE,kBAAJ,CAAwBH,uBAAuBE,kBAA/C,EAEjD,CAEDlJ,WAAW6I,MAAX,CAAmBhnB,aAAaM,OAAhC,EACA6d,WAAW6I,MAAX,CAAmBhnB,YAAnB,EAEA,CAED,2BAAA,CAA6BvoB,QAA7B,CAAwC,CAEvC8vC,gCAAiC9vC,QAAjC,EAEA0mC,WAAW6I,MAAX,CAAmBvvC,QAAnB,EAEA,CAGD,wCAAA,CAA0CA,QAA1C,CAAqD,CAEpD,gBAAkB0mC,WAAWlmE,GAAX,CAAgBw/B,QAAhB,EAA2B+vC,OAA7C,CAEA/vC,SAAS+vC,OAAT,CAAmBjwE,SAAnB,CAEA,GAAKkwE,cAAgBlwE,SAArB,CAAiC,CAEhCksE,aAAaiE,cAAb,CAA6BD,WAA7B,EAEA,CAED;CAID,KAAKE,qBAAL,CAA6B,SAAWhyD,MAAX,CAAmB6xD,OAAnB,CAA4B/vC,QAA5B,CAAuC,CAEnEmsC,MAAMgE,cAAN,GAEA,YAAczJ,WAAWlmE,GAAX,CAAgB0d,MAAhB,CAAd,CAEA,GAAKA,OAAOkyD,YAAP,EAAuB,CAAEC,QAAQnpD,QAAtC,CAAiDmpD,QAAQnpD,QAAR,CAAmBkkD,IAAIkF,YAAJ,EAAnB,CACjD,GAAKpyD,OAAOqyD,UAAP,EAAqB,CAAEF,QAAQ13D,MAApC,CAA6C03D,QAAQ13D,MAAR,CAAiByyD,IAAIkF,YAAJ,EAAjB,CAC7C,GAAKpyD,OAAOsyD,MAAP,EAAiB,CAAEH,QAAQhsC,EAAhC,CAAqCgsC,QAAQhsC,EAAR,CAAa+mC,IAAIkF,YAAJ,EAAb,CACrC,GAAKpyD,OAAOuyD,SAAP,EAAoB,CAAEJ,QAAQnlE,KAAnC,CAA2CmlE,QAAQnlE,KAAR,CAAgBkgE,IAAIkF,YAAJ,EAAhB,CAE3C,eAAiBP,QAAQW,aAAR,EAAjB,CAEA,GAAKxyD,OAAOkyD,YAAZ,CAA2B,CAE1BhF,IAAIuF,UAAJ,CAAgBvF,IAAIwF,YAApB,CAAkCP,QAAQnpD,QAA1C,EACAkkD,IAAIyF,UAAJ,CAAgBzF,IAAIwF,YAApB,CAAkC1yD,OAAO4yD,aAAzC,CAAwD1F,IAAI2F,YAA5D,EAEA5E,MAAM6E,eAAN,CAAuBryD,WAAWuI,QAAlC,EACAkkD,IAAI6F,mBAAJ,CAAyBtyD,WAAWuI,QAApC,CAA8C,CAA9C,CAAiDkkD,IAAI8F,KAArD,CAA4D,KAA5D,CAAmE,CAAnE,CAAsE,CAAtE,EAEA,CAED,GAAKhzD,OAAOqyD,UAAZ,CAAyB,CAExBnF,IAAIuF,UAAJ,CAAgBvF,IAAIwF,YAApB,CAAkCP,QAAQ13D,MAA1C,EAEA,GAAKqnB,SAAS1G,IAAT,GAAkB,mBAAlB,EAAyC0G,SAAS1G,IAAT,GAAkB,sBAA3D,EAAqF0G,SAAS1G,IAAT,GAAkB,sBAAvG,EAAiI0G,SAASg2B,OAAT,GAAqBr2D,MAAM0C,WAAjK,CAA+K,CAE9K,IAAM,MAAQ,CAAR,CAAWkI,EAAI2T,OAAO4iB,KAAP,CAAe,CAApC,CAAuCtkB,EAAIjS,CAA3C,CAA8CiS,GAAK,CAAnD,CAAuD,CAEtD,UAAY0B,OAAOizD,WAAnB,CAEA,OAAS,CAAExjE,MAAO6O,EAAI,CAAX,EAAiB7O,MAAO6O,EAAI,CAAX,CAAjB,CAAkC7O,MAAO6O,EAAI,CAAX,CAApC,EAAuD,CAAhE,CACA,OAAS,CAAE7O,MAAO6O,EAAI,CAAX,EAAiB7O,MAAO6O,EAAI,CAAX,CAAjB,CAAkC7O,MAAO6O,EAAI,CAAX,CAApC,EAAuD,CAAhE,CACA,OAAS,CAAE7O,MAAO6O,EAAI,CAAX,EAAiB7O,MAAO6O,EAAI,CAAX,CAAjB,CAAkC7O,MAAO6O,EAAI,CAAX,CAApC,EAAuD,CAAhE,CAEA7O,MAAO6O,EAAI,CAAX,EAAiB40D,EAAjB,CACAzjE,MAAO6O,EAAI,CAAX,EAAiB60D,EAAjB,CACA1jE,MAAO6O,EAAI,CAAX,EAAiB80D,EAAjB,CAEA3jE,MAAO6O,EAAI,CAAX,EAAiB40D,EAAjB,CACAzjE,MAAO6O,EAAI,CAAX,EAAiB60D,EAAjB,CACA1jE,MAAO6O,EAAI,CAAX,EAAiB80D,EAAjB,CAEA3jE,MAAO6O,EAAI,CAAX,EAAiB40D,EAAjB,CACAzjE,MAAO6O,EAAI,CAAX,EAAiB60D,EAAjB,CACA1jE,MAAO6O,EAAI,CAAX,EAAiB80D,EAAjB,CAEA,CAED,CAEDlG,IAAIyF,UAAJ,CAAgBzF,IAAIwF,YAApB,CAAkC1yD,OAAOizD,WAAzC,CAAsD/F,IAAI2F,YAA1D,EAEA5E,MAAM6E,eAAN,CAAuBryD,WAAWhG,MAAlC,EAEAyyD,IAAI6F,mBAAJ,CAAyBtyD,WAAWhG,MAApC,CAA4C,CAA5C,CAA+CyyD,IAAI8F,KAAnD,CAA0D,KAA1D,CAAiE,CAAjE,CAAoE,CAApE,EAEA,CAED,GAAKhzD,OAAOsyD,MAAP,EAAiBxwC,SAAS0rB,GAA/B,CAAqC,CAEpC0f,IAAIuF,UAAJ,CAAgBvF,IAAIwF,YAApB,CAAkCP,QAAQhsC,EAA1C,EACA+mC,IAAIyF,UAAJ,CAAgBzF,IAAIwF,YAApB,CAAkC1yD,OAAOqzD,OAAzC,CAAkDnG,IAAI2F,YAAtD,EAEA5E,MAAM6E,eAAN,CAAuBryD,WAAW0lB,EAAlC,EAEA+mC,IAAI6F,mBAAJ,CAAyBtyD,WAAW0lB,EAApC,CAAwC,CAAxC,CAA2C+mC,IAAI8F,KAA/C,CAAsD,KAAtD,CAA6D,CAA7D,CAAgE,CAAhE,EAEA,CAED,GAAKhzD,OAAOuyD,SAAP,EAAoBzwC,SAASS,YAAT,GAA0B9gC,MAAM4C,QAAzD,CAAoE,CAEnE6oE,IAAIuF,UAAJ,CAAgBvF,IAAIwF,YAApB,CAAkCP,QAAQnlE,KAA1C,EACAkgE,IAAIyF,UAAJ,CAAgBzF,IAAIwF,YAApB,CAAkC1yD,OAAOszD,UAAzC,CAAqDpG,IAAI2F,YAAzD,EAEA5E,MAAM6E,eAAN,CAAuBryD,WAAWzT,KAAlC,EAEAkgE,IAAI6F,mBAAJ,CAAyBtyD,WAAWzT,KAApC,CAA2C,CAA3C,CAA8CkgE,IAAI8F,KAAlD,CAAyD,KAAzD,CAAgE,CAAhE,CAAmE,CAAnE,EAEA,CAED/E,MAAMsF,uBAAN,GAEArG,IAAIsG,UAAJ,CAAgBtG,IAAIuG,SAApB,CAA+B,CAA/B,CAAkCzzD,OAAO4iB,KAAzC,EAEA5iB,OAAO4iB,KAAP,CAAe,CAAf,CAEA,CAzFD,CA2FA,KAAK8wC,kBAAL,CAA0B,SAAWt6D,MAAX,CAAmByjD,GAAnB,CAAwBz8C,QAAxB,CAAkC0hB,QAAlC,CAA4C9hB,MAA5C,CAAoD4mB,KAApD,CAA4D,CAErF+sC,YAAa7xC,QAAb,EAEA,YAAc8xC,WAAYx6D,MAAZ,CAAoByjD,GAApB,CAAyB/6B,QAAzB,CAAmC9hB,MAAnC,CAAd,CAEA,kBAAoB,KAApB,CACA,oBAAsBI,SAASigB,EAAT,CAAc,GAAd,CAAoBwxC,QAAQxxC,EAA5B,CAAiC,GAAjC,CAAuCyB,SAASq2B,SAAtE,CAEA,GAAK0b,kBAAoBnJ,uBAAzB,CAAmD,CAElDA,wBAA0BmJ,eAA1B,CACAC,cAAgB,IAAhB,CAEA;CAID,0BAA4B9zD,OAAOojD,qBAAnC,CAEA,GAAKA,wBAA0BxhE,SAA/B,CAA2C,CAE1C,qBAAuB,EAAvB,CAEA,IAAM,MAAQ,CAAR,CAAWyK,EAAI+2D,sBAAsBvgE,MAA3C,CAAmDyb,EAAIjS,CAAvD,CAA0DiS,GAA1D,CAAiE,CAEhE,cAAgB8kD,sBAAuB9kD,CAAvB,CAAhB,CACAy1D,iBAAiBz+C,IAAjB,CAAuB,CAAEqvC,SAAF,CAAarmD,CAAb,CAAvB,EAEA,CAEDy1D,iBAAiBn2C,IAAjB,CAAuBo2C,gBAAvB,EAEA,GAAKD,iBAAiBlxE,MAAjB,CAA0B,CAA/B,CAAmC,CAElCkxE,iBAAiBlxE,MAAjB,CAA0B,CAA1B,CAEA,CAED,oBAAsBud,SAAS6rB,eAA/B,CAEA,IAAM,MAAQ,CAAR,CAAW5/B,EAAI0nE,iBAAiBlxE,MAAtC,CAA8Cyb,EAAIjS,CAAlD,CAAqDiS,GAArD,CAA4D,CAE3D,cAAgBy1D,iBAAkBz1D,CAAlB,CAAhB,CACAomD,gBAAiBpmD,CAAjB,EAAuBqmD,UAAW,CAAX,CAAvB,CAEA,GAAKA,UAAW,CAAX,IAAmB,CAAxB,CAA4B,CAE3B,UAAYA,UAAW,CAAX,CAAZ,CAEA,GAAK7iC,SAASkD,YAAT,GAA0B,IAA1B,EAAkCiH,gBAAgBjjB,QAAvD,CAAkE5I,SAASisB,YAAT,CAAuB,cAAgB/tB,CAAvC,CAA0C2tB,gBAAgBjjB,QAAhB,CAA0BrmB,KAA1B,CAA1C,EAClE,GAAKm/B,SAASmD,YAAT,GAA0B,IAA1B,EAAkCgH,gBAAgBxxB,MAAvD,CAAgE2F,SAASisB,YAAT,CAAuB,cAAgB/tB,CAAvC,CAA0C2tB,gBAAgBxxB,MAAhB,CAAwB9X,KAAxB,CAA1C,EAEhE,CAPD,IAOO,CAEN,GAAKm/B,SAASkD,YAAT,GAA0B,IAA/B,CAAsC5kB,SAASmsB,eAAT,CAA0B,cAAgBjuB,CAA1C,EACtC,GAAKwjB,SAASmD,YAAT,GAA0B,IAA/B,CAAsC7kB,SAASmsB,eAAT,CAA0B,cAAgBjuB,CAA1C,EAEtC,CAED,CAEDuzD,QAAQoC,WAAR,GAAsBhyB,QAAtB,CACEirB,GADF,CACO,uBADP,CACgCxI,eADhC,EAGAoP,cAAgB,IAAhB,CAEA;CAID,UAAY1zD,SAASzd,KAArB,CACA,aAAeyd,SAASK,UAAT,CAAoBuI,QAAnC,CAEA,GAAK8Y,SAASq2B,SAAT,GAAuB,IAA5B,CAAmC,CAElCx1D,MAAQo7B,QAAQm2C,qBAAR,CAA+B9zD,QAA/B,CAAR,CAEA,CAED,YAAA,CAEA,GAAKzd,QAAU,IAAf,CAAsB,CAErB8nD,SAAW0pB,qBAAX,CACA1pB,SAASre,QAAT,CAAmBzpC,KAAnB,EAEA,CALD,IAKO,CAEN8nD,SAAW2pB,cAAX,CAEA,CAED,GAAKN,aAAL,CAAqB,CAEpBO,sBAAuBvyC,QAAvB,CAAiC+vC,OAAjC,CAA0CzxD,QAA1C,EAEA,GAAKzd,QAAU,IAAf,CAAsB,CAErBuqE,IAAIuF,UAAJ,CAAgBvF,IAAIoH,oBAApB,CAA0Cv2C,QAAQw2C,kBAAR,CAA4B5xE,KAA5B,CAA1C,EAEA,CAED;CAID,cAAgB,CAAhB,CACA,cAAgBsb,QAAhB,CAEA,GAAKtb,QAAU,IAAf,CAAsB,CAErB6xE,UAAY7xE,MAAMigC,KAAlB,CAEA,CAJD,QAIY5Z,WAAapnB,SAAlB,CAA8B,CAEpC4yE,UAAYxrD,SAAS4Z,KAArB,CAEA,CAED,eAAiBxiB,SAAS8rB,SAAT,CAAmBjvB,KAApC,CACA,eAAiBmD,SAAS8rB,SAAT,CAAmBtJ,KAApC,CAEA,eAAiBgE,QAAU,IAAV,CAAiBA,MAAM3pB,KAAvB,CAA+B,CAAhD,CACA,eAAiB2pB,QAAU,IAAV,CAAiBA,MAAMhE,KAAvB,CAA+B3kB,QAAhD,CAEA,cAAgBpc,KAAKwM,GAAL,CAAUomE,SAAV,CAAqBC,UAArB,CAAiCC,UAAjC,CAAhB,CACA,YAAc9yE,KAAKqL,GAAL,CAAUunE,UAAYD,SAAtB,CAAiCE,WAAaE,UAA9C,CAA0DD,WAAaE,UAAvE,EAAsF,CAApG,CAEA,cAAgBhzE,KAAKwM,GAAL,CAAU,CAAV,CAAaymE,QAAUC,SAAV,CAAsB,CAAnC,CAAhB;CAIA,GAAK/0D,wBAAwByc,IAA7B,CAAoC,CAEnC,GAAKqF,SAASq2B,SAAT,GAAuB,IAA5B,CAAmC,CAElC8V,MAAM+G,YAAN,CAAoBlzC,SAASs2B,kBAAT,CAA8B6c,qBAAlD,EACAxqB,SAASyqB,OAAT,CAAkBhI,IAAIiI,KAAtB,EAEA,CALD,IAKO,CAEN,OAASn1D,OAAOgjD,QAAhB,EAEC,WAAW74D,iBAAX,CACCsgD,SAASyqB,OAAT,CAAkBhI,IAAIuG,SAAtB,EACA,MAED,WAAWrpE,qBAAX,CACCqgD,SAASyqB,OAAT,CAAkBhI,IAAIkI,cAAtB,EACA,MAED,WAAW/qE,mBAAX,CACCogD,SAASyqB,OAAT,CAAkBhI,IAAImI,YAAtB,EACA,MAZF,CAgBA,CAGD,CA5BD,QA4BYr1D,wBAAwB0c,IAA7B,CAAoC,CAE1C,cAAgBoF,SAASu8B,SAAzB,CAEA,GAAKiX,YAAc1zE,SAAnB,CAA+B0zE,UAAY,CAAZ;CAE/BrH,MAAM+G,YAAN,CAAoBM,UAAYL,qBAAhC,EAEA,GAAKj1D,wBAAwBsiD,YAA7B,CAA4C,CAE3C7X,SAASyqB,OAAT,CAAkBhI,IAAIiI,KAAtB,EAEA,CAJD,IAIO,CAEN1qB,SAASyqB,OAAT,CAAkBhI,IAAIqI,UAAtB,EAEA,CAED,CAlBM,QAkBKv1D,wBAAwB4c,MAA7B,CAAsC,CAE5C6tB,SAASyqB,OAAT,CAAkBhI,IAAIsI,MAAtB,EAEA,CAED,GAAKp1D,0BAA0B6tB,uBAA/B,CAAyD,CAExD,GAAK7tB,SAAS8tB,iBAAT,CAA6B,CAAlC,CAAsC,CAErCuc,SAASgrB,eAAT,CAA0Br1D,QAA1B,CAAoC20D,SAApC,CAA+CW,SAA/C,EAEA,CAED,CARD,IAQO,CAENjrB,SAASK,MAAT,CAAiBiqB,SAAjB,CAA4BW,SAA5B,EAEA,CAED,CAvMD,CAyMA,8BAAA,CAAgC5zC,QAAhC,CAA0C+vC,OAA1C,CAAmDzxD,QAAnD,CAA6Du1D,UAA7D,CAA0E,CAEzE,aAAA,CAEA,GAAKv1D,0BAA0B6tB,uBAA/B,CAAyD,CAExDghC,UAAYpP,WAAWv9D,GAAX,CAAgB,wBAAhB,CAAZ,CAEA,GAAK2sE,YAAc,IAAnB,CAA0B,CAEzBriE,QAAQuL,KAAR,CAAe,gJAAf,EACA,OAEA,CAED,CAED,GAAKw9D,aAAe/zE,SAApB,CAAgC+zE,WAAa,CAAb,CAEhC1H,MAAMgE,cAAN,GAEA,uBAAyB7xD,SAASK,UAAlC,CAEA,sBAAwBoxD,QAAQW,aAAR,EAAxB,CAEA,mCAAqC1wC,SAASo+B,sBAA9C,CAEA,IAAM,QAAN,qBAAA,CAAsC,CAErC,qBAAuB0V,kBAAmBzzE,IAAnB,CAAvB,CAEA,GAAK0zE,kBAAoB,CAAzB,CAA6B,CAE5B,sBAAwBC,mBAAoB3zE,IAApB,CAAxB,CAEA,GAAK4zE,oBAAsBn0E,SAA3B,CAAuC,CAEtC,SAAWsrE,IAAI8F,KAAf,CACA,UAAY+C,kBAAkBtmE,KAA9B,CACA,eAAiBsmE,kBAAkBtzC,UAAnC,CAEA,GAAKhzB,6BAAL,CAAqC,CAEpC2rB,KAAO8xC,IAAI8F,KAAX,CAEA,CAJD,QAIYvjE,6BAAL,CAAqC,CAE3C7C,QAAQC,IAAR,CAAa,8CAAb,EAEA,CAJM,QAIK4C,4BAAL,CAAoC,CAE1C2rB,KAAO8xC,IAAI8I,cAAX,CAEA,CAJM,QAIKvmE,2BAAL,CAAmC,CAEzC2rB,KAAO8xC,IAAI+I,KAAX,CAEA,CAJM,QAIKxmE,4BAAL,CAAoC,CAE1C2rB,KAAO8xC,IAAIgJ,YAAX,CAEA,CAJM,QAIKzmE,2BAAL,CAAmC,CAEzC2rB,KAAO8xC,IAAIiJ,GAAX,CAEA,CAJM,QAIK1mE,0BAAL,CAAkC,CAExC2rB,KAAO8xC,IAAIkJ,IAAX,CAEA,CAJM,QAIK3mE,2BAAL,CAAmC,CAEzC2rB,KAAO8xC,IAAImJ,aAAX,CAEA,CAED,SAAWN,kBAAkBl+D,QAA7B,CACA,WAAakmB,QAAQw2C,kBAAR,CAA4BwB,iBAA5B,CAAb,CAEA,GAAKA,mCAAmCpxC,0BAAxC,CAAqE,CAEpE,SAAWoxC,kBAAkB7zC,IAA7B,CACA,WAAaA,KAAK3J,MAAlB,CACA,WAAaw9C,kBAAkBrmE,MAA/B,CAEA,GAAKwyB,sBAAsBwC,0BAA3B,CAAwD,CAEvDupC,MAAMqI,yBAAN,CAAiCT,gBAAjC,CAAmD3zC,KAAKsC,gBAAxD,CAA0EyqC,SAA1E,EAEA,GAAK7uD,SAAS8tB,iBAAT,GAA+BtsC,SAApC,CAAgD,CAE/Cwe,SAAS8tB,iBAAT,CAA6BhM,KAAKsC,gBAAL,CAAwBtC,KAAKU,KAA1D,CAEA,CAED,CAVD,IAUO,CAENqrC,MAAM6E,eAAN,CAAuB+C,gBAAvB,EAEA,CAED3I,IAAIuF,UAAJ,CAAgBvF,IAAIwF,YAApB,CAAkCvwD,MAAlC,EACA+qD,IAAI6F,mBAAJ,CAAyB8C,gBAAzB,CAA2CxoE,IAA3C,CAAiD+tB,IAAjD,CAAuDqH,UAAvD,CAAmElK,OAAS2J,KAAKzyB,KAAL,CAAW2vC,iBAAvF,CAA0G,CAAEu2B,WAAap9C,MAAb,CAAsB7oB,MAAxB,EAAmCwyB,KAAKzyB,KAAL,CAAW2vC,iBAAxJ,EAEA,CAzBD,IAyBO,CAEN,GAAK22B,mCAAmCxxC,wBAAxC,CAAmE,CAElE0pC,MAAMqI,yBAAN,CAAiCT,gBAAjC,CAAmDE,kBAAkBvxC,gBAArE,CAAuFyqC,SAAvF,EAEA,GAAK7uD,SAAS8tB,iBAAT,GAA+BtsC,SAApC,CAAgD,CAE/Cwe,SAAS8tB,iBAAT,CAA6B6nC,kBAAkBvxC,gBAAlB,CAAqCuxC,kBAAkBnzC,KAApF,CAEA,CAED,CAVD,IAUO,CAENqrC,MAAM6E,eAAN,CAAuB+C,gBAAvB,EAEA,CAED3I,IAAIuF,UAAJ,CAAgBvF,IAAIwF,YAApB,CAAkCvwD,MAAlC,EACA+qD,IAAI6F,mBAAJ,CAAyB8C,gBAAzB,CAA2CxoE,IAA3C,CAAiD+tB,IAAjD,CAAuDqH,UAAvD,CAAmE,CAAnE,CAAsEkzC,WAAatoE,IAAb,CAAoB0oE,kBAAkBtmE,KAAlB,CAAwB2vC,iBAAlH,EAEA,CAED,CA3FD,QA2FYm3B,iCAAmC30E,SAAxC,CAAoD,CAE1D,UAAY20E,+BAAgCp0E,IAAhC,CAAZ,CAEA,GAAKoJ,QAAU3J,SAAf,CAA2B,CAE1B,OAAS2J,MAAM1I,MAAf,EAEC,MAAA,CACCqqE,IAAIsJ,eAAJ,CAAqBX,gBAArB,CAAuCtqE,KAAvC,EACA,MAED,MAAA,CACC2hE,IAAIuJ,eAAJ,CAAqBZ,gBAArB,CAAuCtqE,KAAvC,EACA,MAED,MAAA,CACC2hE,IAAIwJ,eAAJ,CAAqBb,gBAArB,CAAuCtqE,KAAvC,EACA,MAED,QACC2hE,IAAIyJ,eAAJ,CAAqBd,gBAArB,CAAuCtqE,KAAvC,EAfF,CAmBA,CAED,CAED,CAED,CAED0iE,MAAMsF,uBAAN,GAEA;CAID,yBAAA,CAA2BngE,CAA3B,CAA8BjI,CAA9B,CAAkC,CAEjC,YAAYwH,GAAL,CAAUxH,EAAG,CAAH,CAAV,EAAqBtJ,KAAK8Q,GAAL,CAAUS,EAAG,CAAH,CAAV,CAA5B,CAEA,CAED,0BAAA,CAA6BA,CAA7B,CAAgCjI,CAAhC,CAAoC,CAEnC,GAAKiI,EAAE4M,MAAF,CAASif,WAAT,GAAyB9zB,EAAE6U,MAAF,CAASif,WAAvC,CAAqD,CAEpD,SAASjf,MAAF,CAASif,WAAT,CAAuB9zB,EAAE6U,MAAF,CAASif,WAAvC,CAEA,CAJD,QAIY7rB,EAAE0uB,QAAF,CAAWzB,EAAX,GAAkBl1B,EAAE22B,QAAF,CAAWzB,EAAlC,CAAuC,CAE7C,SAASyB,QAAF,CAAWzB,EAAX,CAAgBl1B,EAAE22B,QAAF,CAAWzB,EAAlC,CAEA,CAJM,QAIKjtB,EAAEtD,CAAF,GAAQ3E,EAAE2E,CAAf,CAAmB,CAEzB,SAASA,CAAF,CAAM3E,EAAE2E,CAAf,CAEA,CAJM,IAIA,CAEN,SAASuwB,EAAF,CAAOl1B,EAAEk1B,EAAhB,CAEA,CAED,CAED,iCAAA,CAAoCjtB,CAApC,CAAuCjI,CAAvC,CAA2C,CAE1C,GAAKiI,EAAE4M,MAAF,CAASif,WAAT,GAAyB9zB,EAAE6U,MAAF,CAASif,WAAvC,CAAqD,CAEpD,SAASjf,MAAF,CAASif,WAAT,CAAuB9zB,EAAE6U,MAAF,CAASif,WAAvC,CAEA,CAAC,GAAK7rB,EAAEtD,CAAF,GAAQ3E,EAAE2E,CAAf,CAAmB,CAEpB,SAASA,CAAF,CAAMsD,EAAEtD,CAAf,CAEA,CAJC,IAIK,CAEN,SAASuwB,EAAF,CAAOl1B,EAAEk1B,EAAhB,CAEA,CAED;CAID,KAAKyqB,MAAL,CAAc,SAAWJ,KAAX,CAAkBtxC,MAAlB,CAA0BixC,YAA1B,CAAwCusB,UAAxC,CAAqD,CAElE,GAAKx9D,wBAAwBowC,MAAxB,GAAmC,KAAxC,CAAgD,CAE/C58C,QAAQuL,KAAR,CAAe,wEAAf,EACA,OAEA,CAED,QAAUuyC,MAAMmS,GAAhB;CAIA6N,wBAA0B,EAA1B,CACAD,mBAAqB,CAAE,CAAvB,CACAE,eAAiB,IAAjB;CAIA,GAAKjgB,MAAM6c,UAAN,GAAqB,IAA1B,CAAiC7c,MAAMzqC,iBAAN;CAIjC,GAAK7G,OAAOglB,MAAP,GAAkB,IAAvB,CAA8BhlB,OAAO6G,iBAAP,GAE9B7G,OAAOqwC,kBAAP,CAA0BhwC,UAA1B,CAAsCL,OAAOM,WAA7C,EAEAoyD,kBAAkBvyD,gBAAlB,CAAoCH,OAAOI,gBAA3C,CAA6DJ,OAAOqwC,kBAApE,EACA+hB,SAAS/8C,aAAT,CAAwBq9C,iBAAxB,EAEAhP,OAAOj6D,MAAP,CAAgB,CAAhB,CAEAg0E,uBAAyB,CAAE,CAA3B,CACAC,4BAA8B,CAAE,CAAhC,CAEAnI,QAAQ9rE,MAAR,CAAiB,CAAjB,CACAikE,WAAWjkE,MAAX,CAAoB,CAApB,CAEA+oE,sBAAwB,KAAKhC,oBAA7B,CACA+B,iBAAmBF,UAAU0C,IAAV,CACjB,KAAK7Q,cADY,CACIsO,qBADJ,CAC2BxyD,MAD3B,CAAnB,CAGA29D,cAAersB,KAAf,CAAsBtxC,MAAtB,EAGA49D,cAAcn0E,MAAd,CAAuBg0E,uBAAyB,CAAhD,CACAI,mBAAmBp0E,MAAnB,CAA4Bi0E,4BAA8B,CAA1D,CAEA,GAAKI,MAAMvN,WAAN,GAAsB,IAA3B,CAAkC,CAEjCqN,cAAcp5C,IAAd,CAAoBu5C,iBAApB,EACAF,mBAAmBr5C,IAAnB,CAAyBw5C,wBAAzB,EAEA;CAID,GAAKzL,gBAAL,CAAwBF,UAAU4L,YAAV,GAExBC,aAAcxa,MAAd,EAEA2R,UAAU3jB,MAAV,CAAkBJ,KAAlB,CAAyBtxC,MAAzB,EAEAm+D,YAAaza,MAAb,CAAqB1jD,MAArB,EAEA,GAAKuyD,gBAAL,CAAwBF,UAAU+L,UAAV;CAIxB3K,YAAYC,KAAZ,CAAoB,CAApB,CACAD,YAAYvsD,QAAZ,CAAuB,CAAvB,CACAusD,YAAY/nC,KAAZ,CAAoB,CAApB,CACA+nC,YAAY1uD,MAAZ,CAAqB,CAArB,CAEA,GAAKksC,eAAiBzoD,SAAtB,CAAkC,CAEjCyoD,aAAe,IAAf,CAEA,CAED,KAAKU,eAAL,CAAsBV,YAAtB,EAEA,GAAK,KAAKkf,SAAL,EAAkBqN,UAAvB,CAAoC,CAEnC,KAAKznB,KAAL,CAAY,KAAKqa,cAAjB,CAAiC,KAAKC,cAAtC,CAAsD,KAAKC,gBAA3D,EAEA;CAID,GAAKhf,MAAM4c,gBAAX,CAA8B,CAE7B,qBAAuB5c,MAAM4c,gBAA7B,CAEAmQ,cAAeT,aAAf,CAA8B59D,MAA9B,CAAsCyjD,GAAtC,CAA2CyK,gBAA3C,EACAmQ,cAAeR,kBAAf,CAAmC79D,MAAnC,CAA2CyjD,GAA3C,CAAgDyK,gBAAhD,EAEA,CAPD,IAOO;CAIN2G,MAAMyJ,WAAN,CAAmBj2E,MAAM+C,UAAzB,EACAizE,cAAeT,aAAf,CAA8B59D,MAA9B,CAAsCyjD,GAAtC;CAIA4a,cAAeR,kBAAf,CAAmC79D,MAAnC,CAA2CyjD,GAA3C,EAEA;CAID8a,aAAa7sB,MAAb,CAAqBJ,KAArB,CAA4BtxC,MAA5B,EACAw+D,gBAAgB9sB,MAAhB,CAAwBJ,KAAxB,CAA+BtxC,MAA/B,CAAuC0xD,gBAAvC;CAIA,GAAKzgB,YAAL,CAAoB,CAEnB,YAAcA,aAAaM,OAA3B,CAEA,GAAKA,QAAQC,eAAR,EAA2B73B,aAAcs3B,YAAd,CAA3B,EACHM,QAAQP,SAAR,GAAsB3oD,MAAMgG,aADzB,EAEHkjD,QAAQP,SAAR,GAAsB3oD,MAAMmG,YAF9B,CAE6C,CAE5CiwE,yBAA0BxtB,YAA1B,EAEA,CAED;CAID4jB,MAAM6J,YAAN,CAAoB,IAApB,EACA7J,MAAM8J,aAAN,CAAqB,IAArB,EACA9J,MAAM+J,aAAN,CAAqB,IAArB;CAIA,CA3ID,CA6IA,uBAAA,CAAyBh4D,MAAzB,CAAiCI,QAAjC,CAA2C0hB,QAA3C,CAAqDhyB,CAArD,CAAwD82B,KAAxD,CAAgE,CAE/D,SAAA,CAAWjkC,KAAX;CAIA,GAAKm/B,SAASsxB,WAAd,CAA4B,CAE3B3jD,MAAQwnE,kBAAR,CACAt0E,MAAQ,EAAGm0E,2BAAX,CAEA,CALD,IAKO,CAENrnE,MAAQunE,aAAR,CACAr0E,MAAQ,EAAGk0E,sBAAX,CAEA;CAID,eAAiBpnE,MAAO9M,KAAP,CAAjB,CAEA,GAAKs1E,aAAer2E,SAApB,CAAgC,CAE/Bq2E,WAAW53C,EAAX,CAAgBrgB,OAAOqgB,EAAvB,CACA43C,WAAWj4D,MAAX,CAAoBA,MAApB,CACAi4D,WAAW73D,QAAX,CAAsBA,QAAtB,CACA63D,WAAWn2C,QAAX,CAAsBA,QAAtB,CACAm2C,WAAWnoE,CAAX,CAAei8D,SAASj8D,CAAxB,CACAmoE,WAAWrxC,KAAX,CAAmBA,KAAnB,CAEA,CATD,IASO,CAENqxC,WAAa,CACZ53C,GAAIrgB,OAAOqgB,EADC,CAEZrgB,OAAQA,MAFI,CAGZI,SAAUA,QAHE,CAIZ0hB,SAAUA,QAJE,CAKZhyB,EAAGi8D,SAASj8D,CALA,CAMZ82B,MAAOA,KANK,CAAb;CAUAn3B,MAAM6lB,IAAN,CAAY2iD,UAAZ,EAEA,CAED;CAID,yBAAA,CAA2Bj4D,MAA3B,CAAoC,CAEnC,aAAeA,OAAOI,QAAtB,CAEA,GAAKA,SAASwP,cAAT,GAA4B,IAAjC,CACCxP,SAASyP,qBAAT,GAEDg8C,QAAQrgE,IAAR,CAAc4U,SAASwP,cAAvB,EACCpX,YADD,CACewH,OAAOtG,WADtB,EAGA,wBAAyBmyD,OAAlB,CAAP,CAEA,CAED,yBAAA,CAA2B97C,MAA3B,CAAoC,CAEnC87C,QAAQ9zD,MAAR,CAAe3M,GAAf,CAAoB,CAApB,CAAuB,CAAvB,CAA0B,CAA1B,EACAygE,QAAQ7wD,MAAR,CAAiB,kBAAjB,CACA6wD,QAAQrzD,YAAR,CAAsBuX,OAAOrW,WAA7B,EAEA,wBAAyBmyD,OAAlB,CAAP,CAEA,CAED,yBAAA,CAA2BjrD,MAA3B,CAAoC,CAEnC,GAAK,CAAE4qD,SAAS7qD,gBAAT,CAA2BC,MAA3B,CAAP,CAA6C,YAAA,CAE7C,cAAgB6qD,UAAUyM,SAA1B,CAEA,GAAKA,YAAc,CAAnB,CAAuB,WAAA,CAEvB,WAAahB,MAAM5Z,cAAnB,CAECvlD,OAAS6I,OAAO7I,MAFjB,CAGCogE,OAAS,CAAEv3D,OAAO5F,MAHnB,CAICsD,EAAI,CAJL,CAMA,EAAG;CAGF,GAAKgQ,OAAQhQ,CAAR,EAAYa,eAAZ,CAA6BpH,MAA7B,EAAwCogE,MAA7C,CAAsD,YAAA,CAEtD,CALD,MAKU,EAAG75D,CAAH,GAAS45D,SALnB,EAOA,WAAA,CAEA,CAED,sBAAA,CAAwBl4D,MAAxB,CAAgC5G,MAAhC,CAAyC,CAExC,GAAK4G,OAAOod,OAAP,GAAmB,KAAxB,CAAgC,OAEhC,GAAKpd,OAAOsc,MAAP,CAAcD,IAAd,CAAoBjjB,OAAOkjB,MAA3B,CAAL,CAA2C,CAE1C,GAAKtc,wBAAwBgtC,KAA7B,CAAqC,CAEpC8P,OAAOxnC,IAAP,CAAatV,MAAb,EAEA,CAJD,QAIYA,wBAAwB8c,MAA7B,CAAsC,CAE5C,GAAK9c,OAAOgf,aAAP,GAAyB,KAAzB,EAAkCo5C,iBAAkBp4D,MAAlB,IAA+B,IAAtE,CAA6E,CAE5E2uD,QAAQr5C,IAAR,CAActV,MAAd,EAEA,CAED,CARM,QAQKA,wBAAwB6mD,SAA7B,CAAyC,CAE/CC,WAAWxxC,IAAX,CAAiBtV,MAAjB,EAEA,CAJM,QAIKA,wBAAwBq4D,qBAA7B,CAAqD,CAE3D,GAAKnB,MAAMvN,WAAN,GAAsB,IAA3B,CAAkC,CAEjCoC,SAAS7wD,qBAAT,CAAgC8E,OAAOtG,WAAvC,EACAqyD,SAAStzD,eAAT,CAA0BqzD,iBAA1B,EAEA,CAEDwM,eAAgBt4D,MAAhB,CAAwB,IAAxB,CAA8BA,OAAO8hB,QAArC,CAA+CiqC,SAASj8D,CAAxD,CAA2D,IAA3D,EAEA,CAXM,QAWKkQ,wBAAwByc,IAAxB,EAAgCzc,wBAAwB0c,IAAxD,EAAgE1c,wBAAwB4c,MAA7F,CAAsG,CAE5G,GAAK5c,wBAAwBu7C,WAA7B,CAA2C,CAE1Cv7C,OAAOyiC,QAAP,CAAgBjyC,MAAhB,GAEA,CAED,GAAKwP,OAAOgf,aAAP,GAAyB,KAAzB,EAAkCu5C,iBAAkBv4D,MAAlB,IAA+B,IAAtE,CAA6E,CAE5E,aAAeA,OAAO8hB,QAAtB,CAEA,GAAKA,SAAS1E,OAAT,GAAqB,IAA1B,CAAiC,CAEhC,GAAK85C,MAAMvN,WAAN,GAAsB,IAA3B,CAAkC,CAEjCoC,SAAS7wD,qBAAT,CAAgC8E,OAAOtG,WAAvC,EACAqyD,SAAStzD,eAAT,CAA0BqzD,iBAA1B,EAEA,CAED,aAAe/tC,QAAQvtB,MAAR,CAAgBwP,MAAhB,CAAf,CAEA,GAAK8hB,0BAA0B29B,aAA/B,CAA+C,CAE9C,WAAar/C,SAASumB,MAAtB,CACA,cAAgB7E,SAASR,SAAzB,CAEA,IAAM,MAAQ,CAAR,CAAWj1B,EAAIs6B,OAAO9jC,MAA5B,CAAoCyb,EAAIjS,CAAxC,CAA2CiS,GAA3C,CAAkD,CAEjD,UAAYqoB,OAAQroB,CAAR,CAAZ,CACA,kBAAoBgjB,UAAWsF,MAAMvE,aAAjB,CAApB,CAEA,GAAKm2C,cAAcp7C,OAAd,GAA0B,IAA/B,CAAsC,CAErCk7C,eAAgBt4D,MAAhB,CAAwBI,QAAxB,CAAkCo4D,aAAlC,CAAiDzM,SAASj8D,CAA1D,CAA6D82B,KAA7D,EAEA,CAED,CAED,CAlBD,IAkBO,CAEN0xC,eAAgBt4D,MAAhB,CAAwBI,QAAxB,CAAkC0hB,QAAlC,CAA4CiqC,SAASj8D,CAArD,CAAwD,IAAxD,EAEA,CAED,CAED,CAED,CAED,CAED,aAAekQ,OAAOsd,QAAtB,CAEA,IAAM,MAAQ,CAAR,CAAWjxB,EAAIixB,SAASz6B,MAA9B,CAAsCyb,EAAIjS,CAA1C,CAA6CiS,GAA7C,CAAoD,CAEnDy4D,cAAez5C,SAAUhf,CAAV,CAAf,CAA8BlF,MAA9B,EAEA,CAED,CAED,sBAAA,CAAwBq/D,UAAxB,CAAoCr/D,MAApC,CAA4CyjD,GAA5C,CAAiDyK,gBAAjD,CAAoE,CAEnE,IAAM,MAAQ,CAAR,CAAWj7D,EAAIosE,WAAW51E,MAAhC,CAAwCyb,EAAIjS,CAA5C,CAA+CiS,GAA/C,CAAsD,CAErD,eAAiBm6D,WAAYn6D,CAAZ,CAAjB,CAEA,WAAa25D,WAAWj4D,MAAxB,CACA,aAAei4D,WAAW73D,QAA1B,CACA,aAAeknD,mBAAqB1lE,SAArB,CAAiCq2E,WAAWn2C,QAA5C,CAAuDwlC,gBAAtE,CACA,UAAY2Q,WAAWrxC,KAAvB,CAEA5mB,OAAO0e,eAAP,CAAuBnlB,gBAAvB,CAAyCH,OAAOqwC,kBAAhD,CAAoEzpC,OAAOtG,WAA3E,EACAsG,OAAOgR,YAAP,CAAoB7N,eAApB,CAAqCnD,OAAO0e,eAA5C,EAEA,GAAK1e,wBAAwBq4D,qBAA7B,CAAqD,CAEpD1E,YAAa7xC,QAAb,EAEA,YAAc8xC,WAAYx6D,MAAZ,CAAoByjD,GAApB,CAAyB/6B,QAAzB,CAAmC9hB,MAAnC,CAAd,CAEA0qD,wBAA0B,EAA1B,CAEA1qD,OAAO8qC,MAAP,CAAe,SAAW9qC,MAAX,CAAoB,CAElCk3D,MAAMlF,qBAAN,CAA6BhyD,MAA7B,CAAqC6xD,OAArC,CAA8C/vC,QAA9C,EAEA,CAJD,EAMA,CAdD,IAcO,CAENo1C,MAAMxD,kBAAN,CAA0Bt6D,MAA1B,CAAkCyjD,GAAlC,CAAuCz8C,QAAvC,CAAiD0hB,QAAjD,CAA2D9hB,MAA3D,CAAmE4mB,KAAnE,EAEA,CAED,CAED,CAED,qBAAA,CAAuB9E,QAAvB,CAAiC+6B,GAAjC,CAAsC78C,MAAtC,CAA+C,CAE9C,uBAAyBwoD,WAAWlmE,GAAX,CAAgBw/B,QAAhB,CAAzB,CAEA,eAAiBgsC,aAAa4K,aAAb,CACf52C,QADe,CACLkqC,OADK,CACInP,GADJ,CACS4O,UAAUyM,SADnB,CAC8Bl4D,MAD9B,CAAjB,CAGA,SAAW8tD,aAAa6K,cAAb,CAA6B72C,QAA7B,CAAuCiI,UAAvC,CAAX,CAEA,YAAc6uC,mBAAmB/G,OAAjC,CACA,kBAAoB,IAApB,CAEA,GAAKA,UAAYjwE,SAAjB,CAA6B;CAG5BkgC,SAAS3G,gBAAT,CAA2B,SAA3B,CAAsC21C,iBAAtC,EAEA,CALD,QAKYe,QAAQgH,IAAR,GAAiBA,IAAtB,CAA6B;CAGnCjH,gCAAiC9vC,QAAjC,EAEA,CALM,QAKKiI,WAAW+uC,QAAX,GAAwBl3E,SAA7B,CAAyC;CAG/C,OAEA,CALM,IAKA;CAGNm3E,cAAgB,KAAhB,CAEA,CAED,GAAKA,aAAL,CAAqB,CAEpB,GAAKhvC,WAAW+uC,QAAhB,CAA2B,CAE1B,WAAar3E,MAAMgnE,SAAN,CAAiB1+B,WAAW+uC,QAA5B,CAAb,CAEAF,mBAAmBI,aAAnB,CAAmC,CAClC72E,KAAM2/B,SAAS1G,IADmB,CAElCu8B,SAAUl2D,MAAM2+D,aAAN,CAAoB5yD,KAApB,CAA2ByrE,OAAOthB,QAAlC,CAFwB,CAGlCC,aAAcqhB,OAAOrhB,YAHa,CAIlCC,eAAgBohB,OAAOphB,cAJW,CAAnC,CAOA,CAXD,IAWO,CAEN+gB,mBAAmBI,aAAnB,CAAmC,CAClC72E,KAAM2/B,SAAS1G,IADmB,CAElCu8B,SAAU71B,SAAS61B,QAFe,CAGlCC,aAAc91B,SAAS81B,YAHW,CAIlCC,eAAgB/1B,SAAS+1B,cAJS,CAAnC,CAOA,CAED/1B,SAASk3C,aAAT,CAAyBJ,mBAAmBI,aAA5C,CAEAnH,QAAU/D,aAAaoL,cAAb,CAA6Bp3C,QAA7B,CAAuCiI,UAAvC,CAAmD8uC,IAAnD,CAAV,CAEAD,mBAAmB/G,OAAnB,CAA6BA,OAA7B,CACA/vC,SAAS+vC,OAAT,CAAmBA,OAAnB,CAEA,CAED,eAAiBA,QAAQW,aAAR,EAAjB,CAEA,GAAK1wC,SAASkD,YAAd,CAA6B,CAE5BlD,SAASq3C,wBAAT,CAAoC,CAApC,CAEA,IAAM,MAAQ,CAAd,CAAiB76D,EAAI44D,MAAM/M,eAA3B,CAA4C7rD,GAA5C,CAAmD,CAElD,GAAKmC,WAAY,cAAgBnC,CAA5B,GAAmC,CAAxC,CAA4C,CAE3CwjB,SAASq3C,wBAAT,GAEA,CAED,CAED,CAED,GAAKr3C,SAASmD,YAAd,CAA6B,CAE5BnD,SAASs3C,wBAAT,CAAoC,CAApC,CAEA,IAAM,MAAQ,CAAd,CAAiB96D,EAAI44D,MAAM9M,eAA3B,CAA4C9rD,GAA5C,CAAmD,CAElD,GAAKmC,WAAY,cAAgBnC,CAA5B,GAAmC,CAAxC,CAA4C,CAE3CwjB,SAASs3C,wBAAT,GAEA,CAED,CAED,CAED,aAAeR,mBAAmBI,aAAnB,CAAiCrhB,QAAhD,CAEA,GAAK,EAAI71B,0BAA0B69B,cAA9B,GACH,EAAI79B,0BAA0Bu+B,iBAA9B,CADG,EAEHv+B,SAAS89B,QAAT,GAAsB,IAFxB,CAE+B,CAE9BgZ,mBAAmBS,iBAAnB,CAAuC5N,UAAUyM,SAAjD,CACAvgB,SAAS2F,cAAT,CAA0BmO,UAAU6N,OAApC,CAEA,CAED,GAAKx3C,SAASg7B,MAAd,CAAuB;CAItB8b,mBAAmBW,UAAnB,CAAgCvN,QAAQlhC,IAAxC;CAIA6sB,SAAS6hB,iBAAT,CAA2BjuE,KAA3B,CAAmCygE,QAAQC,OAA3C,CACAtU,SAAS8hB,iBAAT,CAA2BluE,KAA3B,CAAmCygE,QAAQE,WAA3C,CACAvU,SAAS+hB,UAAT,CAAoBnuE,KAApB,CAA4BygE,QAAQK,IAApC,CACA1U,SAASgiB,WAAT,CAAqBpuE,KAArB,CAA6BygE,QAAQvuD,KAArC,CACAk6C,SAASiiB,gBAAT,CAA0BruE,KAA1B,CAAkCygE,QAAQU,IAA1C,CAEA/U,SAASwU,oBAAT,CAA8B5gE,KAA9B,CAAsCygE,QAAQG,oBAA9C,CACAxU,SAASyU,uBAAT,CAAiC7gE,KAAjC,CAAyCygE,QAAQI,uBAAjD,CACAzU,SAAS2U,aAAT,CAAuB/gE,KAAvB,CAA+BygE,QAAQM,aAAvC,CACA3U,SAAS4U,gBAAT,CAA0BhhE,KAA1B,CAAkCygE,QAAQO,gBAA1C,CACA5U,SAAS6U,cAAT,CAAwBjhE,KAAxB,CAAgCygE,QAAQQ,cAAxC,CACA7U,SAAS8U,iBAAT,CAA2BlhE,KAA3B,CAAmCygE,QAAQS,iBAA3C,CAEA,CAED,iBAAmBmM,mBAAmB/G,OAAnB,CAA2BoC,WAA3B,EAAnB,CACC4F,aACEp4E,MAAMq4E,aAAN,CAAoBC,YAApB,CAAkCC,aAAaC,GAA/C,CAAoDtiB,QAApD,CAFH,CAIAihB,mBAAmBiB,YAAnB,CAAkCA,YAAlC,CACAjB,mBAAmBsB,eAAnB,CACEz4E,MAAMq4E,aAAN,CAAoBK,YAApB,CAAkCN,YAAlC,CAAgDliB,QAAhD,CADF,CAGA,CAED,oBAAA,CAAsB71B,QAAtB,CAAiC,CAEhC,GAAKA,SAASoxB,IAAT,GAAkBzxD,MAAMyC,UAA7B,CACC+pE,MAAM/xC,MAAN,CAAcgxC,IAAIkN,SAAlB,EADD,WAGOh+C,OAAN,CAAe8wC,IAAIkN,SAAnB,EAEDnM,MAAMoM,YAAN,CAAoBv4C,SAASoxB,IAAT,GAAkBzxD,MAAMwC,QAA5C,EAEA,GAAK69B,SAASsxB,WAAT,GAAyB,IAA9B,CAAqC,CAEpC6a,MAAMyJ,WAAN,CAAmB51C,SAAS2uB,QAA5B,CAAsC3uB,SAASm7B,aAA/C,CAA8Dn7B,SAASi7B,QAAvE,CAAiFj7B,SAASk7B,QAA1F,CAAoGl7B,SAASs7B,kBAA7G,CAAiIt7B,SAASo7B,aAA1I,CAAyJp7B,SAASq7B,aAAlK,CAAiLr7B,SAAS67B,kBAA1L,EAEA,CAJD,IAIO,CAENsQ,MAAMyJ,WAAN,CAAmBj2E,MAAM+C,UAAzB,EAEA,CAEDypE,MAAMqM,YAAN,CAAoBx4C,SAASu7B,SAA7B,EACA4Q,MAAM6J,YAAN,CAAoBh2C,SAASk2B,SAA7B,EACAiW,MAAM8J,aAAN,CAAqBj2C,SAASm2B,UAA9B,EACAgW,MAAM+J,aAAN,CAAqBl2C,SAASo2B,UAA9B,EACA+V,MAAMsM,gBAAN,CAAwBz4C,SAAS07B,aAAjC,CAAgD17B,SAAS27B,mBAAzD,CAA8E37B,SAAS47B,kBAAvF,EAEA,CAED,mBAAA,CAAqBtkD,MAArB,CAA6ByjD,GAA7B,CAAkC/6B,QAAlC,CAA4C9hB,MAA5C,CAAqD,CAEpD+qD,kBAAoB,CAApB,CAEA,uBAAyBvC,WAAWlmE,GAAX,CAAgBw/B,QAAhB,CAAzB,CAEA,GAAK6pC,gBAAL,CAAwB,CAEvB,GAAKC,uBAAyBxyD,SAAWuxD,cAAzC,CAA0D,CAEzD,aACEvxD,SAAWuxD,cAAX,EACA7oC,SAASzB,EAAT,GAAgBoqC,kBAFlB;;;CAOAgB,UAAU+O,QAAV,CACE14C,SAASw7B,cADX,CAC2Bx7B,SAASy7B,WADpC,CAEEnkD,MAFF,CAEUw/D,kBAFV,CAE8B6B,QAF9B,EAIA,CAED,GAAK7B,mBAAmBS,iBAAnB,GAAyCz3E,SAAzC,EACJg3E,mBAAmBS,iBAAnB,GAAyC5N,UAAUyM,SADpD,CACgE,CAE/Dp2C,SAAS6K,WAAT,CAAuB,IAAvB,CAEA,CAED,CAED,GAAKisC,mBAAmB/G,OAAnB,GAA+BjwE,SAApC,CAAgD,CAE/CkgC,SAAS6K,WAAT,CAAuB,IAAvB,CAEA,CAED,GAAKisC,mBAAmBW,UAAnB,GAAkC33E,SAAlC,EACJg3E,mBAAmBW,UAAnB,GAAkCvN,QAAQlhC,IAD3C,CACkD,CAEjDhJ,SAAS6K,WAAT,CAAuB,IAAvB,CAEA,CAED,GAAK7K,SAAS6K,WAAd,CAA4B,CAE3B+tC,aAAc54C,QAAd,CAAwB+6B,GAAxB,CAA6B78C,MAA7B,EACA8hB,SAAS6K,WAAT,CAAuB,KAAvB,CAEA,CAED,mBAAqB,KAArB,CACA,oBAAsB,KAAtB,CACA,kBAAoB,KAApB,CAEA,YAAcisC,mBAAmB/G,OAAjC,CACC8I,WAAa9I,QAAQoC,WAAR,EADd,CAEC2G,WAAahC,mBAAmBI,aAAnB,CAAiCrhB,QAF/C,CAIA,GAAKka,QAAQxxC,EAAR,GAAeiqC,eAApB,CAAsC,CAErC4C,IAAI2N,UAAJ,CAAgBhJ,QAAQA,OAAxB,EACAvH,gBAAkBuH,QAAQxxC,EAA1B,CAEAy6C,eAAiB,IAAjB,CACAC,gBAAkB,IAAlB,CACAC,cAAgB,IAAhB,CAEA,CAED,GAAKl5C,SAASzB,EAAT,GAAgBoqC,kBAArB,CAA0C,CAEzCA,mBAAqB3oC,SAASzB,EAA9B,CAEA06C,gBAAkB,IAAlB,CAEA,CAED,GAAKD,gBAAkB1hE,SAAWuxD,cAAlC,CAAmD,CAElDgQ,WAAWvvE,GAAX,CAAgB8hE,GAAhB,CAAqB9zD,MAArB,CAA6B,kBAA7B,EAEA,GAAKw0D,aAAaqN,sBAAlB,CAA2C,CAE1CN,WAAW14B,QAAX,CAAqBirB,GAArB,CAA0B,eAA1B,CACE,KAAQrrE,KAAKoxB,GAAL,CAAU7Z,OAAOuQ,GAAP,CAAa,GAAvB,EAA+B9nB,KAAKqxB,GAA5C,CADF,EAGA,CAGD,GAAK9Z,SAAWuxD,cAAhB,CAAiC,CAEhCA,eAAiBvxD,MAAjB;;;CAMA2hE,gBAAkB,IAAlB;CACAC,cAAgB,IAAhB;CAEA;;CAKD,GAAKl5C,0BAA0B69B,cAA1B,EACH79B,0BAA0Bs9B,iBADvB,EAEHt9B,0BAA0Bu9B,oBAFvB,EAGHv9B,SAAS+2B,MAHX,CAGoB,CAEnB,YAAc8hB,WAAWntB,GAAX,CAAe0tB,cAA7B,CAEA,GAAKC,UAAYv5E,SAAjB,CAA6B,CAE5Bu5E,QAAQl5B,QAAR,CAAkBirB,GAAlB,CACEnB,SAAS7wD,qBAAT,CAAgC9B,OAAOM,WAAvC,CADF,EAGA,CAED,CAED,GAAKooB,0BAA0Bs9B,iBAA1B,EACHt9B,0BAA0Bo9B,mBADvB,EAEHp9B,0BAA0B68B,iBAFvB,EAGH78B,0BAA0Bu9B,oBAHvB,EAIHv9B,0BAA0B69B,cAJvB,EAKH79B,SAASi9B,QALX,CAKsB,CAErB4b,WAAW14B,QAAX,CAAqBirB,GAArB,CAA0B,YAA1B,CAAwC9zD,OAAOqwC,kBAA/C,EAEA,CAEDkxB,WAAWvvE,GAAX,CAAgB8hE,GAAhB,CAAqBgK,KAArB,CAA4B,qBAA5B,EACAyD,WAAWvvE,GAAX,CAAgB8hE,GAAhB,CAAqBgK,KAArB,CAA4B,uBAA5B,EAEA;;;CAMD,GAAKp1C,SAASi9B,QAAd,CAAyB,CAExB4b,WAAWS,WAAX,CAAwBlO,GAAxB,CAA6BltD,MAA7B,CAAqC,YAArC,EACA26D,WAAWS,WAAX,CAAwBlO,GAAxB,CAA6BltD,MAA7B,CAAqC,mBAArC,EAEA,aAAeA,OAAOyiC,QAAtB,CAEA,GAAKA,QAAL,CAAgB,CAEf,GAAKmrB,aAAayN,mBAAb,EAAoC54B,SAAS4iB,gBAAlD,CAAqE,CAEpEsV,WAAWvvE,GAAX,CAAgB8hE,GAAhB,CAAqBzqB,QAArB,CAA+B,aAA/B,EACAk4B,WAAWvvE,GAAX,CAAgB8hE,GAAhB,CAAqBzqB,QAArB,CAA+B,kBAA/B,EACAk4B,WAAWvvE,GAAX,CAAgB8hE,GAAhB,CAAqBzqB,QAArB,CAA+B,mBAA/B,EAEA,CAND,IAMO,CAENk4B,WAAWS,WAAX,CAAwBlO,GAAxB,CAA6BzqB,QAA7B,CAAuC,cAAvC,EAEA,CAED,CAED,CAED,GAAKs4B,eAAL,CAAuB,CAEtB,GAAKj5C,SAASg7B,MAAd,CAAuB;;;;;;;CAWtBwe,8BAA+BV,UAA/B,CAA2CI,aAA3C,EAEA;CAID,GAAKne,KAAO/6B,SAAS+6B,GAArB,CAA2B,CAE1B0e,mBAAoBX,UAApB,CAAgC/d,GAAhC,EAEA,CAED,GAAK/6B,0BAA0B68B,iBAA1B,EACH78B,0BAA0Bo9B,mBADvB,EAEHp9B,0BAA0Bs9B,iBAFvB,EAGHt9B,0BAA0Bu9B,oBAHvB,EAIHv9B,0BAA0Bk9B,iBAJ5B,CAIgD,CAE/Cwc,sBAAuBZ,UAAvB,CAAmC94C,QAAnC,EAEA;CAID,GAAKA,0BAA0Bs8B,iBAA/B,CAAmD,CAElDqd,oBAAqBb,UAArB,CAAiC94C,QAAjC,EAEA,CAJD,QAIYA,0BAA0B08B,kBAA/B,CAAoD,CAE1Did,oBAAqBb,UAArB,CAAiC94C,QAAjC,EACA45C,oBAAqBd,UAArB,CAAiC94C,QAAjC,EAEA,CALM,QAKKA,0BAA0B49B,cAA/B,CAAgD,CAEtDic,sBAAuBf,UAAvB,CAAmC94C,QAAnC,EAEA,CAJM,QAIKA,0BAA0Bo9B,mBAA/B,CAAqD,CAE3D0c,uBAAwBhB,UAAxB,CAAoC94C,QAApC,EAEA,CAJM,QAIKA,0BAA0Bs9B,iBAA/B,CAAmD,CAEzDyc,qBAAsBjB,UAAtB,CAAkC94C,QAAlC,EAEA,CAJM,QAIKA,0BAA0B09B,oBAA/B,CAAsD,CAE5Dsc,wBAAyBlB,UAAzB,CAAqC94C,QAArC,EAEA,CAJM,QAIKA,0BAA0Bu9B,oBAA/B,CAAsD,CAE5D0c,wBAAyBnB,UAAzB,CAAqC94C,QAArC,EAEA,CAJM,QAIKA,0BAA0Bk9B,iBAA/B,CAAmD,CAEzD,GAAKl9B,SAASw2B,eAAd,CAAgC,CAE/BsiB,WAAWtiB,eAAX,CAA2B/sD,KAA3B,CAAmCu2B,SAASw2B,eAA5C,CACAsiB,WAAWriB,iBAAX,CAA6BhtD,KAA7B,CAAqCu2B,SAASy2B,iBAA9C,CACAqiB,WAAWpiB,gBAAX,CAA4BjtD,KAA5B,CAAoCu2B,SAAS02B,gBAA7C,CAEA,CAED,CAVM,QAUK12B,0BAA0Bq9B,kBAA/B,CAAoD,CAE1Dyb,WAAWznB,OAAX,CAAmB5nD,KAAnB,CAA2Bu2B,SAASqxB,OAApC,CAEA,CAED1xD,MAAMq4E,aAAN,CAAoBkC,MAApB,CACE9O,GADF,CACO0L,mBAAmBiB,YAD1B,CACwCe,UADxC,CACoD1D,KADpD,EAGA;CAKDyD,WAAWvvE,GAAX,CAAgB8hE,GAAhB,CAAqBltD,MAArB,CAA6B,iBAA7B,EACA26D,WAAWvvE,GAAX,CAAgB8hE,GAAhB,CAAqBltD,MAArB,CAA6B,cAA7B,EACA26D,WAAW14B,QAAX,CAAqBirB,GAArB,CAA0B,aAA1B,CAAyCltD,OAAOtG,WAAhD;CAKA,gBAAkBk/D,mBAAmBsB,eAArC,CAEA,GAAK+B,cAAgB,IAArB,CAA4B,CAE3Bx6E,MAAMq4E,aAAN,CAAoBoC,WAApB,CACED,WADF,CACerB,UADf,CAC2B56D,MAD3B,CACmC5G,MADnC,EAGA3X,MAAMq4E,aAAN,CAAoBkC,MAApB,CAA4B9O,GAA5B,CAAiC+O,WAAjC,CAA8CrB,UAA9C,CAA0D1D,KAA1D,EAEA,CAED,cAAA,CAEA;CAID,8BAAA,CAAiCvf,QAAjC,CAA2C71B,QAA3C,CAAsD,CAErD61B,SAASxE,OAAT,CAAiB5nD,KAAjB,CAAyBu2B,SAASqxB,OAAlC,CAEAwE,SAASwkB,OAAT,CAAiB5wE,KAAjB,CAAyBu2B,SAAS90B,KAAlC,CAEA,GAAK80B,SAAS6uB,QAAd,CAAyB,CAExBgH,SAAShH,QAAT,CAAkBplD,KAAlB,CAAwBC,IAAxB,CAA8Bs2B,SAAS6uB,QAAvC,EAAkDxhD,cAAlD,CAAkE2yB,SAAS82B,iBAA3E,EAEA,CAEDjB,SAASnK,GAAT,CAAajiD,KAAb,CAAqBu2B,SAAS0rB,GAA9B,CACAmK,SAASnF,WAAT,CAAqBjnD,KAArB,CAA6Bu2B,SAAS0wB,WAAtC,CACAmF,SAAS9E,QAAT,CAAkBtnD,KAAlB,CAA0Bu2B,SAAS+wB,QAAnC,CAEA,GAAK/wB,SAASyvB,KAAd,CAAsB,CAErBoG,SAASpG,KAAT,CAAehmD,KAAf,CAAuBu2B,SAASyvB,KAAhC,CACAoG,SAASsB,cAAT,CAAwB1tD,KAAxB,CAAgCu2B,SAASm3B,cAAzC,CAEA;;;;;;;CAUD,cAAA,CAEA,GAAKn3B,SAAS0rB,GAAd,CAAoB,CAEnB4uB,WAAat6C,SAAS0rB,GAAtB,CAEA,CAJD,QAIY1rB,SAAS0wB,WAAd,CAA4B,CAElC4pB,WAAat6C,SAAS0wB,WAAtB,CAEA,CAJM,QAIK1wB,SAASw2B,eAAd,CAAgC,CAEtC8jB,WAAat6C,SAASw2B,eAAtB,CAEA,CAJM,QAIKx2B,SAASowB,SAAd,CAA0B,CAEhCkqB,WAAat6C,SAASowB,SAAtB,CAEA,CAJM,QAIKpwB,SAAS8vB,OAAd,CAAwB,CAE9BwqB,WAAat6C,SAAS8vB,OAAtB,CAEA,CAJM,QAIK9vB,SAAS22B,YAAd,CAA6B,CAEnC2jB,WAAat6C,SAAS22B,YAAtB,CAEA,CAJM,QAIK32B,SAAS42B,YAAd,CAA6B,CAEnC0jB,WAAat6C,SAAS42B,YAAtB,CAEA,CAJM,QAIK52B,SAAS+wB,QAAd,CAAyB,CAE/BupB,WAAat6C,SAAS+wB,QAAtB,CAEA,CAJM,QAIK/wB,SAAS62B,WAAd,CAA4B,CAElCyjB,WAAat6C,SAAS62B,WAAtB,CAEA,CAED,GAAKyjB,aAAex6E,SAApB,CAAgC;CAG/B,GAAKw6E,4BAA4BC,iBAAjC,CAAqD,CAEpDD,WAAaA,WAAWzxB,OAAxB,CAEA,CAED,WAAayxB,WAAW1sE,MAAxB,CACA,WAAa0sE,WAAWnsB,MAAxB,CAEA0H,SAAS2kB,YAAT,CAAsB/wE,KAAtB,CAA4BH,GAA5B,CAAiCsE,OAAO1N,CAAxC,CAA2C0N,OAAOG,CAAlD,CAAqDogD,OAAOjuD,CAA5D,CAA+DiuD,OAAOpgD,CAAtE,EAEA,CAED8nD,SAASkB,MAAT,CAAgBttD,KAAhB,CAAwBu2B,SAAS+2B,MAAjC;;;;CAMAlB,SAAS4kB,UAAT,CAAoBhxE,KAApB,CAA8B,EAAIu2B,SAAS+2B,MAAT,kBAAiCiD,WAArC,CAAF,CAAyD,CAAzD,CAA6D,CAAE,CAA3F,CAEAnE,SAASoB,YAAT,CAAsBxtD,KAAtB,CAA8Bu2B,SAASi3B,YAAvC,CACApB,SAASiH,eAAT,CAAyBrzD,KAAzB,CAAiCu2B,SAAS88B,eAA1C,CAEA,CAED,4BAAA,CAA+BjH,QAA/B,CAAyC71B,QAAzC,CAAoD,CAEnD61B,SAASwkB,OAAT,CAAiB5wE,KAAjB,CAAyBu2B,SAAS90B,KAAlC,CACA2qD,SAASxE,OAAT,CAAiB5nD,KAAjB,CAAyBu2B,SAASqxB,OAAlC,CAEA,CAED,4BAAA,CAA+BwE,QAA/B,CAAyC71B,QAAzC,CAAoD,CAEnD61B,SAAS8G,QAAT,CAAkBlzD,KAAlB,CAA0Bu2B,SAAS28B,QAAnC,CACA9G,SAAS6kB,SAAT,CAAmBjxE,KAAnB,CAA2Bu2B,SAAS28B,QAAT,CAAoB38B,SAAS48B,OAAxD,CACA/G,SAASzvC,KAAT,CAAe3c,KAAf,CAAuBu2B,SAAS5Z,KAAhC,CAEA,CAED,8BAAA,CAAiCyvC,QAAjC,CAA2C71B,QAA3C,CAAsD,CAErD61B,SAASwkB,OAAT,CAAiB5wE,KAAjB,CAAyBu2B,SAAS90B,KAAlC,CACA2qD,SAASxE,OAAT,CAAiB5nD,KAAjB,CAAyBu2B,SAASqxB,OAAlC,CACAwE,SAAStqD,IAAT,CAAc9B,KAAd,CAAsBu2B,SAASz0B,IAAT,CAAgB+9D,WAAtC,CACAzT,SAASzvC,KAAT,CAAe3c,KAAf,CAAuB+9D,QAAQmT,YAAR,CAAuB,GAA9C,CAEA9kB,SAASnK,GAAT,CAAajiD,KAAb,CAAqBu2B,SAAS0rB,GAA9B,CAEA,GAAK1rB,SAAS0rB,GAAT,GAAiB,IAAtB,CAA6B,CAE5B,WAAa1rB,SAAS0rB,GAAT,CAAa99C,MAA1B,CACA,WAAaoyB,SAAS0rB,GAAT,CAAayC,MAA1B,CAEA0H,SAAS2kB,YAAT,CAAsB/wE,KAAtB,CAA4BH,GAA5B,CAAiCsE,OAAO1N,CAAxC,CAA2C0N,OAAOG,CAAlD,CAAqDogD,OAAOjuD,CAA5D,CAA+DiuD,OAAOpgD,CAAtE,EAEA,CAED,CAED,2BAAA,CAA8B8nD,QAA9B,CAAwCkF,GAAxC,CAA8C,CAE7ClF,SAAS+kB,QAAT,CAAkBnxE,KAAlB,CAA0BsxD,IAAI7vD,KAA9B,CAEA,GAAK6vD,qBAAqB2K,GAA1B,CAAgC,CAE/B7P,SAASglB,OAAT,CAAiBpxE,KAAjB,CAAyBsxD,IAAInzC,IAA7B,CACAiuC,SAASilB,MAAT,CAAgBrxE,KAAhB,CAAwBsxD,IAAIlzC,GAA5B,CAEA,CALD,QAKYkzC,qBAAqB4K,OAA1B,CAAoC,CAE1C9P,SAASklB,UAAT,CAAoBtxE,KAApB,CAA4BsxD,IAAI6K,OAAhC,CAEA,CAED,CAED,+BAAA,CAAkC/P,QAAlC,CAA4C71B,QAA5C,CAAuD,CAEtD,GAAKA,SAASovB,QAAd,CAAyB,CAExByG,SAASzG,QAAT,CAAkB3lD,KAAlB,CAA0Bu2B,SAASovB,QAAnC,CACAyG,SAASqB,iBAAT,CAA2BztD,KAA3B,CAAmCu2B,SAASk3B,iBAA5C,CAEA,CAED,GAAKl3B,SAAS62B,WAAd,CAA4B,CAE3BhB,SAASgB,WAAT,CAAqBptD,KAArB,CAA6Bu2B,SAAS62B,WAAtC,CAEA,CAED,CAED,6BAAA,CAAgChB,QAAhC,CAA0C71B,QAA1C,CAAqD,CAEpD61B,SAASjH,QAAT,CAAkBnlD,KAAlB,CAA0Bu2B,SAAS4uB,QAAnC,CACAiH,SAAS/G,SAAT,CAAmBrlD,KAAnB,CAA2B1J,KAAKwM,GAAL,CAAUyzB,SAAS8uB,SAAnB,CAA8B,IAA9B,CAA3B;CAEA,GAAK9uB,SAASovB,QAAd,CAAyB,CAExByG,SAASzG,QAAT,CAAkB3lD,KAAlB,CAA0Bu2B,SAASovB,QAAnC,CACAyG,SAASqB,iBAAT,CAA2BztD,KAA3B,CAAmCu2B,SAASk3B,iBAA5C,CAEA,CAED,GAAKl3B,SAAS62B,WAAd,CAA4B,CAE3BhB,SAASgB,WAAT,CAAqBptD,KAArB,CAA6Bu2B,SAAS62B,WAAtC,CAEA,CAED,GAAK72B,SAAS8vB,OAAd,CAAwB,CAEvB+F,SAAS/F,OAAT,CAAiBrmD,KAAjB,CAAyBu2B,SAAS8vB,OAAlC,CACA+F,SAAS1F,SAAT,CAAmB1mD,KAAnB,CAA2Bu2B,SAASmwB,SAApC,CAEA,CAED,GAAKnwB,SAASowB,SAAd,CAA0B,CAEzByF,SAASzF,SAAT,CAAmB3mD,KAAnB,CAA2Bu2B,SAASowB,SAApC,CACAyF,SAASpF,WAAT,CAAqBhnD,KAArB,CAA2BC,IAA3B,CAAiCs2B,SAASywB,WAA1C,EAEA,CAED,GAAKzwB,SAASw2B,eAAd,CAAgC,CAE/BX,SAASW,eAAT,CAAyB/sD,KAAzB,CAAiCu2B,SAASw2B,eAA1C,CACAX,SAASY,iBAAT,CAA2BhtD,KAA3B,CAAmCu2B,SAASy2B,iBAA5C,CACAZ,SAASa,gBAAT,CAA0BjtD,KAA1B,CAAkCu2B,SAAS02B,gBAA3C,CAEA,CAED,CAED,gCAAA,CAAmCb,QAAnC,CAA6C71B,QAA7C,CAAwD,CAEvD61B,SAASF,SAAT,CAAmBlsD,KAAnB,CAA2Bu2B,SAAS21B,SAApC,CACAE,SAASD,SAAT,CAAmBnsD,KAAnB,CAA2Bu2B,SAAS41B,SAApC,CAEA,GAAK51B,SAAS22B,YAAd,CAA6B,CAE5Bd,SAASc,YAAT,CAAsBltD,KAAtB,CAA8Bu2B,SAAS22B,YAAvC,CAEA,CAED,GAAK32B,SAAS42B,YAAd,CAA6B,CAE5Bf,SAASe,YAAT,CAAsBntD,KAAtB,CAA8Bu2B,SAAS42B,YAAvC,CAEA,CAED,GAAK52B,SAASovB,QAAd,CAAyB,CAExByG,SAASzG,QAAT,CAAkB3lD,KAAlB,CAA0Bu2B,SAASovB,QAAnC,CACAyG,SAASqB,iBAAT,CAA2BztD,KAA3B,CAAmCu2B,SAASk3B,iBAA5C,CAEA,CAED,GAAKl3B,SAAS62B,WAAd,CAA4B,CAE3BhB,SAASgB,WAAT,CAAqBptD,KAArB,CAA6Bu2B,SAAS62B,WAAtC,CAEA,CAED,GAAK72B,SAAS8vB,OAAd,CAAwB,CAEvB+F,SAAS/F,OAAT,CAAiBrmD,KAAjB,CAAyBu2B,SAAS8vB,OAAlC,CACA+F,SAAS1F,SAAT,CAAmB1mD,KAAnB,CAA2Bu2B,SAASmwB,SAApC,CAEA,CAED,GAAKnwB,SAASowB,SAAd,CAA0B,CAEzByF,SAASzF,SAAT,CAAmB3mD,KAAnB,CAA2Bu2B,SAASowB,SAApC,CACAyF,SAASpF,WAAT,CAAqBhnD,KAArB,CAA2BC,IAA3B,CAAiCs2B,SAASywB,WAA1C,EAEA,CAED,GAAKzwB,SAASw2B,eAAd,CAAgC,CAE/BX,SAASW,eAAT,CAAyB/sD,KAAzB,CAAiCu2B,SAASw2B,eAA1C,CACAX,SAASY,iBAAT,CAA2BhtD,KAA3B,CAAmCu2B,SAASy2B,iBAA5C,CACAZ,SAASa,gBAAT,CAA0BjtD,KAA1B,CAAkCu2B,SAAS02B,gBAA3C,CAEA,CAED,GAAK12B,SAAS+2B,MAAd,CAAuB;CAGtBlB,SAAS4H,eAAT,CAAyBh0D,KAAzB,CAAiCu2B,SAASy9B,eAA1C,CAEA,CAED,CAED,gCAAA,CAAmC5H,QAAnC,CAA6C71B,QAA7C,CAAwD,CAEvDi6C,wBAAyBpkB,QAAzB,CAAmC71B,QAAnC,EAEA;CAID,sCAAA,CAAyC61B,QAAzC,CAAmDpsD,KAAnD,CAA2D,CAE1DosD,SAAS6hB,iBAAT,CAA2B7sC,WAA3B,CAAyCphC,KAAzC,CAEAosD,SAAS8hB,iBAAT,CAA2B9sC,WAA3B,CAAyCphC,KAAzC,CACAosD,SAASgiB,WAAT,CAAqBhtC,WAArB,CAAmCphC,KAAnC,CACAosD,SAAS+hB,UAAT,CAAoB/sC,WAApB,CAAkCphC,KAAlC,CACAosD,SAASiiB,gBAAT,CAA0BjtC,WAA1B,CAAwCphC,KAAxC,CAEA;CAID,qBAAA,CAAwBuxD,MAAxB,CAAiC,CAEhC,uBAAyB,CAAzB,CAEA,IAAM,MAAQ,CAAR,CAAWzwD,EAAIywD,OAAOj6D,MAA5B,CAAoCyb,EAAIjS,CAAxC,CAA2CiS,GAA3C,CAAkD,CAEjD,UAAYw+C,OAAQx+C,CAAR,CAAZ,CAEA,GAAKuvC,MAAM/uB,UAAX,CAAwB,CAEvBktC,QAAQW,OAAR,CAAiBmQ,oBAAjB,EAA2CjvB,KAA3C,CAEA,CAED,CAEDme,QAAQW,OAAR,CAAgB9pE,MAAhB,CAAyBi6E,kBAAzB,CAEA,CAED,oBAAA,CAAuBhgB,MAAvB,CAA+B1jD,MAA/B,CAAwC,CAEvC,KAAA,CAAO2jE,EAAP,CAAWlvB,KAAX,CACA5iD,EAAI,CADJ,CACOC,EAAI,CADX,CACcC,EAAI,CADlB,CAEA6B,KAFA,CAGAigD,SAHA,CAIA5vC,QAJA,CAKAoxD,SALA,CAOAuO,WAAa5jE,OAAOqwC,kBAPpB,CASAwzB,kBAAoB,CATpB,CAUAC,YAAc,CAVd,CAWAC,WAAa,CAXb,CAYAC,WAAa,CAZb,CAcA,IAAM/wE,EAAI,CAAJ,CAAO0wE,GAAKjgB,OAAOj6D,MAAzB,CAAiCwJ,EAAI0wE,EAArC,CAAyC1wE,GAAzC,CAAgD,CAE/CwhD,MAAQiP,OAAQzwD,CAAR,CAAR,CAEAW,MAAQ6gD,MAAM7gD,KAAd,CACAigD,UAAYY,MAAMZ,SAAlB,CACA5vC,SAAWwwC,MAAMxwC,QAAjB,CAEAoxD,UAAc5gB,MAAMF,MAAN,EAAgBE,MAAMF,MAAN,CAAaH,GAA/B,CAAuCK,MAAMF,MAAN,CAAaH,GAAb,CAAiB7C,OAAxD,CAAkE,IAA9E,CAEA,GAAKkD,uBAAuBJ,YAA5B,CAA2C,CAE1CxiD,GAAK+B,MAAM/B,CAAN,CAAUgiD,SAAf,CACA/hD,GAAK8B,MAAM9B,CAAN,CAAU+hD,SAAf,CACA9hD,GAAK6B,MAAM7B,CAAN,CAAU8hD,SAAf,CAEA,CAND,QAMYY,uBAAuBH,gBAA5B,CAA+C,CAErD,aAAe2vB,WAAW/6E,GAAX,CAAgBurD,KAAhB,CAAf,CAEA8J,SAAS3qD,KAAT,CAAexB,IAAf,CAAqBqiD,MAAM7gD,KAA3B,EAAmCmC,cAAnC,CAAmD0+C,MAAMZ,SAAzD,EACA0K,SAASntC,SAAT,CAAmBtP,qBAAnB,CAA0C2yC,MAAMn0C,WAAhD,EACAqyD,SAAS7wD,qBAAT,CAAgC2yC,MAAMnrD,MAAN,CAAagX,WAA7C,EACAi+C,SAASntC,SAAT,CAAmBpU,GAAnB,CAAwB21D,QAAxB,EACApU,SAASntC,SAAT,CAAmB5Q,kBAAnB,CAAuCojE,UAAvC,EAEArlB,SAAShK,MAAT,CAAkBE,MAAM/uB,UAAxB,CAEA,GAAK+uB,MAAM/uB,UAAX,CAAwB,CAEvB64B,SAAS2lB,UAAT,CAAsBzvB,MAAMF,MAAN,CAAaL,IAAnC,CACAqK,SAAS4lB,YAAT,CAAwB1vB,MAAMF,MAAN,CAAa3yC,MAArC,CACA28C,SAAS6lB,aAAT,CAAyB3vB,MAAMF,MAAN,CAAaJ,OAAtC,CAEA,CAEDye,QAAQG,oBAAR,CAA8B8Q,iBAA9B,EAAoDxO,SAApD,CACAzC,QAAQI,uBAAR,CAAiC6Q,iBAAjC,EAAuDpvB,MAAMF,MAAN,CAAat0C,MAApE,CACA2yD,QAAQE,WAAR,CAAqB+Q,mBAArB,EAA8CtlB,QAA9C,CAEA,CAxBM,QAwBK9J,uBAAuBK,SAA5B,CAAwC,CAE9C,aAAemvB,WAAW/6E,GAAX,CAAgBurD,KAAhB,CAAf,CAEA8J,SAAS3uC,QAAT,CAAkB9N,qBAAlB,CAAyC2yC,MAAMn0C,WAA/C,EACAi+C,SAAS3uC,QAAT,CAAkBxQ,YAAlB,CAAgCwkE,UAAhC,EAEArlB,SAAS3qD,KAAT,CAAexB,IAAf,CAAqBwB,KAArB,EAA6BmC,cAA7B,CAA6C89C,SAA7C,EACA0K,SAASt6C,QAAT,CAAoBA,QAApB,CAEAs6C,SAASntC,SAAT,CAAmBtP,qBAAnB,CAA0C2yC,MAAMn0C,WAAhD,EACAqyD,SAAS7wD,qBAAT,CAAgC2yC,MAAMnrD,MAAN,CAAagX,WAA7C,EACAi+C,SAASntC,SAAT,CAAmBpU,GAAnB,CAAwB21D,QAAxB,EACApU,SAASntC,SAAT,CAAmB5Q,kBAAnB,CAAuCojE,UAAvC,EAEArlB,SAAS8lB,OAAT,CAAmB57E,KAAK6O,GAAL,CAAUm9C,MAAMx8C,KAAhB,CAAnB,CACAsmD,SAAS+lB,WAAT,CAAuB77E,KAAK6O,GAAL,CAAUm9C,MAAMx8C,KAAN,EAAgB,EAAIw8C,MAAMT,QAA1B,CAAV,CAAvB,CACAuK,SAASxK,KAAT,CAAmBU,MAAMxwC,QAAN,GAAmB,CAArB,CAA2B,GAA3B,CAAiCwwC,MAAMV,KAAxD,CAEAwK,SAAShK,MAAT,CAAkBE,MAAM/uB,UAAxB,CAEA,GAAK+uB,MAAM/uB,UAAX,CAAwB,CAEvB64B,SAAS2lB,UAAT,CAAsBzvB,MAAMF,MAAN,CAAaL,IAAnC,CACAqK,SAAS4lB,YAAT,CAAwB1vB,MAAMF,MAAN,CAAa3yC,MAArC,CACA28C,SAAS6lB,aAAT,CAAyB3vB,MAAMF,MAAN,CAAaJ,OAAtC,CAEA,CAEDye,QAAQM,aAAR,CAAuB6Q,UAAvB,EAAsC1O,SAAtC,CACAzC,QAAQO,gBAAR,CAA0B4Q,UAA1B,EAAyCtvB,MAAMF,MAAN,CAAat0C,MAAtD,CACA2yD,QAAQK,IAAR,CAAc8Q,YAAd,EAAgCxlB,QAAhC,CAEA,CAjCM,QAiCK9J,uBAAuBG,UAA5B,CAAyC,CAE/C,aAAeqvB,WAAW/6E,GAAX,CAAgBurD,KAAhB,CAAf,CAEA8J,SAAS3uC,QAAT,CAAkB9N,qBAAlB,CAAyC2yC,MAAMn0C,WAA/C,EACAi+C,SAAS3uC,QAAT,CAAkBxQ,YAAlB,CAAgCwkE,UAAhC,EAEArlB,SAAS3qD,KAAT,CAAexB,IAAf,CAAqBqiD,MAAM7gD,KAA3B,EAAmCmC,cAAnC,CAAmD0+C,MAAMZ,SAAzD,EACA0K,SAASt6C,QAAT,CAAoBwwC,MAAMxwC,QAA1B,CACAs6C,SAASxK,KAAT,CAAmBU,MAAMxwC,QAAN,GAAmB,CAArB,CAA2B,GAA3B,CAAiCwwC,MAAMV,KAAxD,CAEAwK,SAAShK,MAAT,CAAkBE,MAAM/uB,UAAxB,CAEA,GAAK+uB,MAAM/uB,UAAX,CAAwB,CAEvB64B,SAAS2lB,UAAT,CAAsBzvB,MAAMF,MAAN,CAAaL,IAAnC,CACAqK,SAAS4lB,YAAT,CAAwB1vB,MAAMF,MAAN,CAAa3yC,MAArC,CACA28C,SAAS6lB,aAAT,CAAyB3vB,MAAMF,MAAN,CAAaJ,OAAtC,CAEA,CAEDye,QAAQQ,cAAR,CAAwB0Q,WAAxB,EAAwCzO,SAAxC,CAEA,GAAKzC,QAAQS,iBAAR,CAA2ByQ,WAA3B,IAA6Ct7E,SAAlD,CAA8D,CAE7DoqE,QAAQS,iBAAR,CAA2ByQ,WAA3B,EAA2C,UAAU5jE,OAAV,EAA3C,CAEA;;CAIDyyD,SAAS7wD,qBAAT,CAAgC2yC,MAAMn0C,WAAtC,EAAoDzC,MAApD,GACA+0D,QAAQS,iBAAR,CAA2ByQ,WAA3B,EAAyCr7D,QAAzC,GAAoDmG,WAApD,CAAiE+jD,QAAjE,EAEAC,QAAQvuD,KAAR,CAAey/D,aAAf,EAAkCvlB,QAAlC,CAEA,CApCM,QAoCK9J,uBAAuBC,eAA5B,CAA8C,CAEpD,aAAeuvB,WAAW/6E,GAAX,CAAgBurD,KAAhB,CAAf,CAEA8J,SAASntC,SAAT,CAAmBtP,qBAAnB,CAA0C2yC,MAAMn0C,WAAhD,EACAi+C,SAASntC,SAAT,CAAmB5Q,kBAAnB,CAAuCojE,UAAvC,EACArlB,SAASntC,SAAT,CAAmB3X,SAAnB,GAEA8kD,SAAS5J,QAAT,CAAkBviD,IAAlB,CAAwBqiD,MAAM7gD,KAA9B,EAAsCmC,cAAtC,CAAsD89C,SAAtD,EACA0K,SAASzK,WAAT,CAAqB1hD,IAArB,CAA2BqiD,MAAMX,WAAjC,EAA+C/9C,cAA/C,CAA+D89C,SAA/D,EAEA+e,QAAQU,IAAR,CAAc0Q,YAAd,EAAgCzlB,QAAhC,CAEA,CAED,CAEDqU,QAAQC,OAAR,CAAiB,CAAjB,EAAuBhhE,CAAvB,CACA+gE,QAAQC,OAAR,CAAiB,CAAjB,EAAuB/gE,CAAvB,CACA8gE,QAAQC,OAAR,CAAiB,CAAjB,EAAuB9gE,CAAvB,CAEA6gE,QAAQE,WAAR,CAAoBrpE,MAApB,CAA6Bo6E,iBAA7B,CACAjR,QAAQK,IAAR,CAAaxpE,MAAb,CAAsBs6E,UAAtB,CACAnR,QAAQvuD,KAAR,CAAc5a,MAAd,CAAuBq6E,WAAvB,CACAlR,QAAQU,IAAR,CAAa7pE,MAAb,CAAsBu6E,UAAtB,CAEApR,QAAQlhC,IAAR,CAAemyC,kBAAoB,GAApB,CAA0BC,WAA1B,CAAwC,GAAxC,CAA8CC,UAA9C,CAA2D,GAA3D,CAAiEC,UAAjE,CAA8E,GAA9E,CAAoFpR,QAAQW,OAAR,CAAgB9pE,MAAnH,CAEA;CAID,KAAK86E,cAAL,CAAsB,SAAWC,QAAX,CAAqBC,kBAArB,CAA0C,CAE/D5P,MAAM6P,WAAN,CAAmBF,QAAnB,EACA3P,MAAMoM,YAAN,CAAoBwD,qBAAuBp8E,MAAMkC,oBAAjD,EAEA,CALD;CASA,yBAAA,EAA4B,CAE3B,gBAAkBonE,iBAAlB,CAEA,GAAKgT,aAAenQ,aAAaoQ,WAAjC,CAA+C,CAE9CpxE,QAAQC,IAAR,CAAc,gCAAkCkxE,WAAlC,CAAgD,8CAAhD,CAAiGnQ,aAAaoQ,WAA5H,EAEA,CAEDjT,mBAAqB,CAArB,CAEA,kBAAA,CAEA,CAED,6BAAA,CAAgCkT,WAAhC,CAA6CtzB,OAA7C,CAAsDuzB,iBAAtD,CAA0E,CAEzE,aAAA,CAEA,GAAKA,iBAAL,CAAyB,CAExBhR,IAAIiR,aAAJ,CAAmBF,WAAnB,CAAgC/Q,IAAIkR,cAApC,CAAoD5Q,eAAgB7iB,QAAQ4F,KAAxB,CAApD,EACA2c,IAAIiR,aAAJ,CAAmBF,WAAnB,CAAgC/Q,IAAImR,cAApC,CAAoD7Q,eAAgB7iB,QAAQ6F,KAAxB,CAApD,EAEA0c,IAAIiR,aAAJ,CAAmBF,WAAnB,CAAgC/Q,IAAIoR,kBAApC,CAAwD9Q,eAAgB7iB,QAAQR,SAAxB,CAAxD,EACA+iB,IAAIiR,aAAJ,CAAmBF,WAAnB,CAAgC/Q,IAAIqR,kBAApC,CAAwD/Q,eAAgB7iB,QAAQP,SAAxB,CAAxD,EAEA,CARD,IAQO,CAEN8iB,IAAIiR,aAAJ,CAAmBF,WAAnB,CAAgC/Q,IAAIkR,cAApC,CAAoDlR,IAAIsR,aAAxD,EACAtR,IAAIiR,aAAJ,CAAmBF,WAAnB,CAAgC/Q,IAAImR,cAApC,CAAoDnR,IAAIsR,aAAxD,EAEA,GAAK7zB,QAAQ4F,KAAR,GAAkB9uD,MAAM8F,mBAAxB,EAA+CojD,QAAQ6F,KAAR,GAAkB/uD,MAAM8F,mBAA5E,CAAkG,CAEjGqF,QAAQC,IAAR,CAAc,+HAAd,CAA+I89C,OAA/I,EAEA,CAEDuiB,IAAIiR,aAAJ,CAAmBF,WAAnB,CAAgC/Q,IAAIoR,kBAApC,CAAwDG,eAAgB9zB,QAAQR,SAAxB,CAAxD,EACA+iB,IAAIiR,aAAJ,CAAmBF,WAAnB,CAAgC/Q,IAAIqR,kBAApC,CAAwDE,eAAgB9zB,QAAQP,SAAxB,CAAxD,EAEA,GAAKO,QAAQP,SAAR,GAAsB3oD,MAAMgG,aAA5B,EAA6CkjD,QAAQP,SAAR,GAAsB3oD,MAAMmG,YAA9E,CAA6F,CAE5FgF,QAAQC,IAAR,CAAc,iIAAd,CAAiJ89C,OAAjJ,EAEA,CAED,CAEDskB,UAAYpP,WAAWv9D,GAAX,CAAgB,gCAAhB,CAAZ,CAEA,GAAK2sE,SAAL,CAAiB,CAEhB,GAAKtkB,QAAQvvB,IAAR,GAAiB35B,MAAM4G,SAAvB,EAAoCw3D,WAAWv9D,GAAX,CAAgB,0BAAhB,IAAiD,IAA1F,CAAiG,OACjG,GAAKqoD,QAAQvvB,IAAR,GAAiB35B,MAAM6G,aAAvB,EAAwCu3D,WAAWv9D,GAAX,CAAgB,+BAAhB,IAAsD,IAAnG,CAA0G,OAE1G,GAAKqoD,QAAQwF,UAAR,CAAqB,CAArB,EAA0BqY,WAAWlmE,GAAX,CAAgBqoD,OAAhB,EAA0B+zB,mBAAzD,CAA+E,CAE9ExR,IAAIyR,aAAJ,CAAmBV,WAAnB,CAAgChP,UAAU2P,0BAA1C,CAAsE/8E,KAAKqL,GAAL,CAAUy9C,QAAQwF,UAAlB,CAA8B+mB,MAAMlI,gBAAN,EAA9B,CAAtE,EACAxG,WAAWlmE,GAAX,CAAgBqoD,OAAhB,EAA0B+zB,mBAA1B,CAAgD/zB,QAAQwF,UAAxD,CAEA,CAED,CAED,CAED,sBAAA,CAAwB6gB,iBAAxB,CAA2CrmB,OAA3C,CAAoDk0B,IAApD,CAA2D,CAE1D,GAAK7N,kBAAkBG,WAAlB,GAAkCvvE,SAAvC,CAAmD,CAElDovE,kBAAkBG,WAAlB,CAAgC,IAAhC,CAEAxmB,QAAQxvB,gBAAR,CAA0B,SAA1B,CAAqCu1C,gBAArC,EAEAM,kBAAkBI,cAAlB,CAAmClE,IAAI4R,aAAJ,EAAnC,CAEAlS,YAAYrrC,QAAZ,GAEA,CAED0sC,MAAM8Q,aAAN,CAAqB7R,IAAI8R,QAAJ,CAAeH,IAApC,EACA5Q,MAAMgR,WAAN,CAAmB/R,IAAIgS,UAAvB,CAAmClO,kBAAkBI,cAArD,EAEAlE,IAAIiS,WAAJ,CAAiBjS,IAAIkS,mBAArB,CAA0Cz0B,QAAQqW,KAAlD,EACAkM,IAAIiS,WAAJ,CAAiBjS,IAAImS,8BAArB,CAAqD10B,QAAQoW,gBAA7D,EACAmM,IAAIiS,WAAJ,CAAiBjS,IAAIoS,gBAArB,CAAuC30B,QAAQsW,eAA/C,EAEA,UAAYse,eAAgB50B,QAAQoK,KAAxB,CAA+B6Y,aAAa4R,cAA5C,CAAZ,CAEA,GAAKC,uBAAwB90B,OAAxB,GAAqC53B,aAAcgiC,KAAd,IAA0B,KAApE,CAA4E,CAE3EA,MAAQ2qB,eAAgB3qB,KAAhB,CAAR,CAEA,CAED,sBAAwBhiC,aAAcgiC,KAAd,CAAxB,CACA4qB,SAAWnS,eAAgB7iB,QAAQT,MAAxB,CADX,CAEA01B,OAASpS,eAAgB7iB,QAAQvvB,IAAxB,CAFT,CAIAykD,qBAAsB3S,IAAIgS,UAA1B,CAAsCv0B,OAAtC,CAA+CuzB,iBAA/C,EAEA,UAAA,CAAY7hB,QAAU1R,QAAQ0R,OAA9B,CAEA,GAAK1R,yBAAyB6W,YAA9B,CAA6C;CAI5C,mBAAqB0L,IAAI4S,eAAzB,CAEA,GAAKn1B,QAAQvvB,IAAR,GAAiB35B,MAAM4G,SAA5B,CAAwC,CAEvC,GAAK,CAAC03E,SAAN,CAAkB,eAAM,CAAU,gDAAV,CAAN,CAClBC,eAAiB9S,IAAI+S,kBAArB,CAEA,CALD,QAKYF,SAAL,CAAiB;CAGvBC,eAAiB9S,IAAIgT,iBAArB,CAEA,CAEDjS,MAAMkS,UAAN,CAAkBjT,IAAIgS,UAAtB,CAAkC,CAAlC,CAAqCc,cAArC,CAAqDjrB,MAAM5I,KAA3D,CAAkE4I,MAAM3I,MAAxE,CAAgF,CAAhF,CAAmFuzB,QAAnF,CAA6FC,MAA7F,CAAqG,IAArG,EAEA,CApBD,QAoBYj1B,yBAAyBwR,WAA9B,CAA4C;;;CAMlD,GAAKE,QAAQx5D,MAAR,CAAiB,CAAjB,EAAsBq7E,iBAA3B,CAA+C,CAE9C,IAAM,MAAQ,CAAR,CAAW7/D,GAAKg+C,QAAQx5D,MAA9B,CAAsCyb,EAAID,EAA1C,CAA8CC,GAA9C,CAAqD,CAEpD8hE,OAAS/jB,QAAS/9C,CAAT,CAAT,CACA2vD,MAAMkS,UAAN,CAAkBjT,IAAIgS,UAAtB,CAAkC5gE,CAAlC,CAAqCqhE,QAArC,CAA+CS,OAAOj0B,KAAtD,CAA6Di0B,OAAOh0B,MAApE,CAA4E,CAA5E,CAA+EuzB,QAA/E,CAAyFC,MAAzF,CAAiGQ,OAAOl+C,IAAxG,EAEA,CAEDyoB,QAAQC,eAAR,CAA0B,KAA1B,CAEA,CAXD,IAWO,CAENqjB,MAAMkS,UAAN,CAAkBjT,IAAIgS,UAAtB,CAAkC,CAAlC,CAAqCS,QAArC,CAA+C5qB,MAAM5I,KAArD,CAA4D4I,MAAM3I,MAAlE,CAA0E,CAA1E,CAA6EuzB,QAA7E,CAAuFC,MAAvF,CAA+F7qB,MAAM7yB,IAArG,EAEA,CAED,CAvBM,QAuBKyoB,yBAAyB6R,iBAA9B,CAAkD,CAExD,IAAM,MAAQ,CAAR,CAAWn+C,GAAKg+C,QAAQx5D,MAA9B,CAAsCyb,EAAID,EAA1C,CAA8CC,GAA9C,CAAqD,CAEpD8hE,OAAS/jB,QAAS/9C,CAAT,CAAT,CAEA,GAAKqsC,QAAQT,MAAR,GAAmBzoD,MAAMmH,UAAzB,EAAuC+hD,QAAQT,MAAR,GAAmBzoD,MAAMkH,SAArE,CAAiF,CAEhF,GAAKslE,MAAMoS,2BAAN,GAAoC7kD,OAApC,CAA6CmkD,QAA7C,EAA0D,CAAE,CAAjE,CAAqE,CAEpE1R,MAAMqS,oBAAN,CAA4BpT,IAAIgS,UAAhC,CAA4C5gE,CAA5C,CAA+CqhE,QAA/C,CAAyDS,OAAOj0B,KAAhE,CAAuEi0B,OAAOh0B,MAA9E,CAAsF,CAAtF,CAAyFg0B,OAAOl+C,IAAhG,EAEA,CAJD,IAIO,CAENt1B,QAAQC,IAAR,CAAc,gGAAd,EAEA,CAED,CAZD,IAYO,CAENohE,MAAMkS,UAAN,CAAkBjT,IAAIgS,UAAtB,CAAkC5gE,CAAlC,CAAqCqhE,QAArC,CAA+CS,OAAOj0B,KAAtD,CAA6Di0B,OAAOh0B,MAApE,CAA4E,CAA5E,CAA+EuzB,QAA/E,CAAyFC,MAAzF,CAAiGQ,OAAOl+C,IAAxG,EAEA,CAED,CAED,CA1BM,IA0BA;;;;CAQN,GAAKm6B,QAAQx5D,MAAR,CAAiB,CAAjB,EAAsBq7E,iBAA3B,CAA+C,CAE9C,IAAM,MAAQ,CAAR,CAAW7/D,GAAKg+C,QAAQx5D,MAA9B,CAAsCyb,EAAID,EAA1C,CAA8CC,GAA9C,CAAqD,CAEpD8hE,OAAS/jB,QAAS/9C,CAAT,CAAT,CACA2vD,MAAMkS,UAAN,CAAkBjT,IAAIgS,UAAtB,CAAkC5gE,CAAlC,CAAqCqhE,QAArC,CAA+CA,QAA/C,CAAyDC,MAAzD,CAAiEQ,MAAjE,EAEA,CAEDz1B,QAAQC,eAAR,CAA0B,KAA1B,CAEA,CAXD,IAWO,CAENqjB,MAAMkS,UAAN,CAAkBjT,IAAIgS,UAAtB,CAAkC,CAAlC,CAAqCS,QAArC,CAA+CA,QAA/C,CAAyDC,MAAzD,CAAiE7qB,KAAjE,EAEA,CAED,CAED,GAAKpK,QAAQC,eAAR,EAA2BszB,iBAAhC,CAAoDhR,IAAIqT,cAAJ,CAAoBrT,IAAIgS,UAAxB,EAEpDlO,kBAAkBwP,SAAlB,CAA8B71B,QAAQjpB,OAAtC,CAEA,GAAKipB,QAAQtc,QAAb,CAAwBsc,QAAQtc,QAAR,CAAkBsc,OAAlB,EAExB,CAED,qBAAA,CAAuBA,OAAvB,CAAgCk0B,IAAhC,CAAuC,CAEtC,sBAAwBrW,WAAWlmE,GAAX,CAAgBqoD,OAAhB,CAAxB,CAEA,GAAKA,QAAQjpB,OAAR,CAAkB,CAAlB,EAAuBsvC,kBAAkBwP,SAAlB,GAAgC71B,QAAQjpB,OAApE,CAA8E,CAE7E,UAAYipB,QAAQoK,KAApB,CAEA,GAAKA,QAAUnzD,SAAf,CAA2B,CAE1BgL,QAAQC,IAAR,CAAc,uEAAd,CAAuF89C,OAAvF,EACA,OAEA,CAED,GAAKoK,MAAM0rB,QAAN,GAAmB,KAAxB,CAAgC,CAE/B7zE,QAAQC,IAAR,CAAc,wEAAd,CAAwF89C,OAAxF,EACA,OAEA,CAED+1B,cAAe1P,iBAAf,CAAkCrmB,OAAlC,CAA2Ck0B,IAA3C,EAEA,OAEA,CAED5Q,MAAM8Q,aAAN,CAAqB7R,IAAI8R,QAAJ,CAAeH,IAApC,EACA5Q,MAAMgR,WAAN,CAAmB/R,IAAIgS,UAAvB,CAAmClO,kBAAkBI,cAArD,EAEA,CAED,uBAAA,CAA0Brc,KAA1B,CAAiC4rB,OAAjC,CAA2C,CAE1C,GAAK5rB,MAAM5I,KAAN,CAAcw0B,OAAd,EAAyB5rB,MAAM3I,MAAN,CAAeu0B,OAA7C,CAAuD;;CAKtD,UAAYA,QAAU9+E,KAAKwM,GAAL,CAAU0mD,MAAM5I,KAAhB,CAAuB4I,MAAM3I,MAA7B,CAAtB,CAEA,WAAayI,SAASC,aAAT,CAAwB,QAAxB,CAAb,CACAqM,OAAOhV,KAAP,CAAetqD,KAAKiK,KAAL,CAAYipD,MAAM5I,KAAN,CAAcjkC,KAA1B,CAAf,CACAi5C,OAAO/U,MAAP,CAAgBvqD,KAAKiK,KAAL,CAAYipD,MAAM3I,MAAN,CAAelkC,KAA3B,CAAhB,CAEA,YAAci5C,OAAOC,UAAP,CAAmB,IAAnB,CAAd,CACA9b,QAAQ+b,SAAR,CAAmBtM,KAAnB,CAA0B,CAA1B,CAA6B,CAA7B,CAAgCA,MAAM5I,KAAtC,CAA6C4I,MAAM3I,MAAnD,CAA2D,CAA3D,CAA8D,CAA9D,CAAiE+U,OAAOhV,KAAxE,CAA+EgV,OAAO/U,MAAtF,EAEAx/C,QAAQC,IAAR,CAAc,0CAA4CkoD,MAAM5I,KAAlD,CAA0D,GAA1D,CAAgE4I,MAAM3I,MAAtE,CAA+E,gBAA/E,CAAkG+U,OAAOhV,KAAzG,CAAiH,GAAjH,CAAuHgV,OAAO/U,MAA5I,CAAoJ2I,KAApJ,EAEA,aAAA,CAEA,CAED,YAAA,CAEA,CAED,qBAAA,CAAuBA,KAAvB,CAA+B,CAE9B,aAAalzD,IAAN,CAAWkxB,YAAX,CAAyBgiC,MAAM5I,KAA/B,GAA0C1qD,MAAMI,IAAN,CAAWkxB,YAAX,CAAyBgiC,MAAM3I,MAA/B,CAAjD,CAEA,CAED,+BAAA,CAAiCzB,OAAjC,CAA2C,CAE1C,GAAKA,QAAQ4F,KAAR,GAAkB9uD,MAAM8F,mBAAxB,EAA+CojD,QAAQ6F,KAAR,GAAkB/uD,MAAM8F,mBAA5E,CAAkG,WAAA,CAClG,GAAKojD,QAAQP,SAAR,GAAsB3oD,MAAMgG,aAA5B,EAA6CkjD,QAAQP,SAAR,GAAsB3oD,MAAMmG,YAA9E,CAA6F,WAAA,CAE7F,YAAA,CAEA,CAED,uBAAA,CAAyBmtD,KAAzB,CAAiC,CAEhC,GAAKA,iCAAA,EAAqCA,kCAA1C,CAA+E,CAE9E,WAAaF,SAASC,aAAT,CAAwB,QAAxB,CAAb,CACAqM,OAAOhV,KAAP,CAAe1qD,MAAMI,IAAN,CAAWmxB,iBAAX,CAA8B+hC,MAAM5I,KAApC,CAAf,CACAgV,OAAO/U,MAAP,CAAgB3qD,MAAMI,IAAN,CAAWmxB,iBAAX,CAA8B+hC,MAAM3I,MAApC,CAAhB,CAEA,YAAc+U,OAAOC,UAAP,CAAmB,IAAnB,CAAd,CACA9b,QAAQ+b,SAAR,CAAmBtM,KAAnB,CAA0B,CAA1B,CAA6B,CAA7B,CAAgCoM,OAAOhV,KAAvC,CAA8CgV,OAAO/U,MAArD,EAEAx/C,QAAQC,IAAR,CAAc,mDAAqDkoD,MAAM5I,KAA3D,CAAmE,GAAnE,CAAyE4I,MAAM3I,MAA/E,CAAwF,gBAAxF,CAA2G+U,OAAOhV,KAAlH,CAA0H,GAA1H,CAAgIgV,OAAO/U,MAArJ,CAA6J2I,KAA7J,EAEA,aAAA,CAEA,CAED,YAAA,CAEA,CAED,uBAAA,CAA0BpK,OAA1B,CAAmCk0B,IAAnC,CAA0C,CAEzC,sBAAwBrW,WAAWlmE,GAAX,CAAgBqoD,OAAhB,CAAxB,CAEA,GAAKA,QAAQoK,KAAR,CAAclyD,MAAd,GAAyB,CAA9B,CAAkC,CAEjC,GAAK8nD,QAAQjpB,OAAR,CAAkB,CAAlB,EAAuBsvC,kBAAkBwP,SAAlB,GAAgC71B,QAAQjpB,OAApE,CAA8E,CAE7E,GAAK,CAAEsvC,kBAAkBC,yBAAzB,CAAqD,CAEpDtmB,QAAQxvB,gBAAR,CAA0B,SAA1B,CAAqCu1C,gBAArC,EAEAM,kBAAkBC,yBAAlB,CAA8C/D,IAAI4R,aAAJ,EAA9C,CAEAlS,YAAYrrC,QAAZ,GAEA,CAED0sC,MAAM8Q,aAAN,CAAqB7R,IAAI8R,QAAJ,CAAeH,IAApC,EACA5Q,MAAMgR,WAAN,CAAmB/R,IAAI0T,gBAAvB,CAAyC5P,kBAAkBC,yBAA3D,EAEA/D,IAAIiS,WAAJ,CAAiBjS,IAAIkS,mBAArB,CAA0Cz0B,QAAQqW,KAAlD,EAEA,iBAAmBrW,yBAAyB6R,iBAA5C,CACA,kBAAoB7R,QAAQoK,KAAR,CAAe,CAAf,kBAAoCoH,WAAxD,CAEA,cAAgB,EAAhB,CAEA,IAAM,MAAQ,CAAd,CAAiB79C,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9B,GAAK44D,MAAM7M,iBAAN,EAA2B,CAAEwW,YAA7B,EAA6C,CAAEC,aAApD,CAAoE,CAEnEC,UAAWziE,CAAX,EAAiBihE,eAAgB50B,QAAQoK,KAAR,CAAez2C,CAAf,CAAhB,CAAoCsvD,aAAaoT,cAAjD,CAAjB,CAEA,CAJD,IAIO,CAEND,UAAWziE,CAAX,EAAiBwiE,cAAgBn2B,QAAQoK,KAAR,CAAez2C,CAAf,EAAmBy2C,KAAnC,CAA2CpK,QAAQoK,KAAR,CAAez2C,CAAf,CAA5D,CAEA,CAED,CAED,UAAYyiE,UAAW,CAAX,CAAZ,CACA7C,kBAAoBnrD,aAAcgiC,KAAd,CADpB,CAEA4qB,SAAWnS,eAAgB7iB,QAAQT,MAAxB,CAFX,CAGA01B,OAASpS,eAAgB7iB,QAAQvvB,IAAxB,CAHT,CAKAykD,qBAAsB3S,IAAI0T,gBAA1B,CAA4Cj2B,OAA5C,CAAqDuzB,iBAArD,EAEA,IAAM,MAAQ,CAAd,CAAiB5/D,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9B,GAAK,CAAEuiE,YAAP,CAAsB,CAErB,GAAKC,aAAL,CAAqB,CAEpB7S,MAAMkS,UAAN,CAAkBjT,IAAI+T,2BAAJ,CAAkC3iE,CAApD,CAAuD,CAAvD,CAA0DqhE,QAA1D,CAAoEoB,UAAWziE,CAAX,EAAe6tC,KAAnF,CAA0F40B,UAAWziE,CAAX,EAAe8tC,MAAzG,CAAiH,CAAjH,CAAoHuzB,QAApH,CAA8HC,MAA9H,CAAsImB,UAAWziE,CAAX,EAAe4jB,IAArJ,EAEA,CAJD,IAIO,CAEN+rC,MAAMkS,UAAN,CAAkBjT,IAAI+T,2BAAJ,CAAkC3iE,CAApD,CAAuD,CAAvD,CAA0DqhE,QAA1D,CAAoEA,QAApE,CAA8EC,MAA9E,CAAsFmB,UAAWziE,CAAX,CAAtF,EAEA,CAED,CAZD,IAYO,CAEN,UAAA,CAAY+9C,QAAU0kB,UAAWziE,CAAX,EAAe+9C,OAArC,CAEA,IAAM,MAAQ,CAAR,CAAWt2B,GAAKs2B,QAAQx5D,MAA9B,CAAsCof,EAAI8jB,EAA1C,CAA8C9jB,GAA9C,CAAqD,CAEpDm+D,OAAS/jB,QAASp6C,CAAT,CAAT,CAEA,GAAK0oC,QAAQT,MAAR,GAAmBzoD,MAAMmH,UAAzB,EAAuC+hD,QAAQT,MAAR,GAAmBzoD,MAAMkH,SAArE,CAAiF,CAEhF,GAAKslE,MAAMoS,2BAAN,GAAoC7kD,OAApC,CAA6CmkD,QAA7C,EAA0D,CAAE,CAAjE,CAAqE,CAEpE1R,MAAMqS,oBAAN,CAA4BpT,IAAI+T,2BAAJ,CAAkC3iE,CAA9D,CAAiE2D,CAAjE,CAAoE09D,QAApE,CAA8ES,OAAOj0B,KAArF,CAA4Fi0B,OAAOh0B,MAAnG,CAA2G,CAA3G,CAA8Gg0B,OAAOl+C,IAArH,EAEA,CAJD,IAIO,CAENt1B,QAAQC,IAAR,CAAc,iGAAd,EAEA,CAED,CAZD,IAYO,CAENohE,MAAMkS,UAAN,CAAkBjT,IAAI+T,2BAAJ,CAAkC3iE,CAApD,CAAuD2D,CAAvD,CAA0D09D,QAA1D,CAAoES,OAAOj0B,KAA3E,CAAkFi0B,OAAOh0B,MAAzF,CAAiG,CAAjG,CAAoGuzB,QAApG,CAA8GC,MAA9G,CAAsHQ,OAAOl+C,IAA7H,EAEA,CAED,CAED,CAED,CAED,GAAKyoB,QAAQC,eAAR,EAA2BszB,iBAAhC,CAAoD,CAEnDhR,IAAIqT,cAAJ,CAAoBrT,IAAI0T,gBAAxB,EAEA,CAED5P,kBAAkBwP,SAAlB,CAA8B71B,QAAQjpB,OAAtC,CAEA,GAAKipB,QAAQtc,QAAb,CAAwBsc,QAAQtc,QAAR,CAAkBsc,OAAlB,EAExB,CAnGD,IAmGO,CAENsjB,MAAM8Q,aAAN,CAAqB7R,IAAI8R,QAAJ,CAAeH,IAApC,EACA5Q,MAAMgR,WAAN,CAAmB/R,IAAI0T,gBAAvB,CAAyC5P,kBAAkBC,yBAA3D,EAEA,CAED,CAED,CAED,8BAAA,CAAiCtmB,OAAjC,CAA0Ck0B,IAA1C,CAAiD,CAEhD5Q,MAAM8Q,aAAN,CAAqB7R,IAAI8R,QAAJ,CAAeH,IAApC,EACA5Q,MAAMgR,WAAN,CAAmB/R,IAAI0T,gBAAvB,CAAyCpY,WAAWlmE,GAAX,CAAgBqoD,OAAhB,EAA0BymB,cAAnE,EAEA,CAED,KAAK8P,gBAAL,CAAwBA,gBAAxB;CAGA,KAAKC,YAAL,CAAsB,UAAW,CAEhC,WAAa,KAAb;CAGA,gBAAiBx2B,OAAV,CAAmBk0B,IAAnB,CAA0B,CAEhC,GAAKl0B,yBAAyB0xB,iBAA9B,CAAkD,CAEjD,GAAK,CAAE+E,MAAP,CAAgB,CAEfx0E,QAAQC,IAAR,CAAc,8GAAd,EACAu0E,OAAS,IAAT,CAEA,CAEDz2B,QAAUA,QAAQA,OAAlB,CAEA,CAEDw2B,aAAcx2B,OAAd,CAAuBk0B,IAAvB,EAEA,CAjBD,CAmBA,CAxBqB,EAAtB,CA0BA,KAAKwC,UAAL,CAAoB,UAAW,CAE9B,WAAa,KAAb,CAEA,gBAAiB12B,OAAV,CAAmBk0B,IAAnB,CAA0B,CAEhC,GAAK,CAAEuC,MAAP,CAAgB,CAEfx0E,QAAQC,IAAR,CAAc,2EAAd,EACAu0E,OAAS,IAAT,CAEA,CAEDlK,MAAMiK,YAAN,CAAoBx2B,OAApB,CAA6Bk0B,IAA7B,EAEA,CAXD,CAaA,CAjBmB,EAApB,CAmBA,KAAKyC,cAAL,CAAwB,UAAW,CAElC,WAAa,KAAb,CAEA,gBAAiB32B,OAAV,CAAmBk0B,IAAnB,CAA0B;CAGhC,GAAKl0B,yBAAyBL,qBAA9B,CAAsD,CAErD,GAAK,CAAE82B,MAAP,CAAgB,CAEfx0E,QAAQC,IAAR,CAAc,qHAAd,EACAu0E,OAAS,IAAT,CAEA,CAEDz2B,QAAUA,QAAQA,OAAlB,CAEA;;CAID,GAAKA,yBAAyBmR,WAAzB,EACD99B,MAAMC,OAAN,CAAe0sB,QAAQoK,KAAvB,GAAkCpK,QAAQoK,KAAR,CAAclyD,MAAd,GAAyB,CAD/D,CACqE;;CAKpEy+E,eAAgB32B,OAAhB,CAAyBk0B,IAAzB,EAEA,CARD,IAQO;CAIN0C,sBAAuB52B,OAAvB,CAAgCk0B,IAAhC,EAEA,CAED,CAlCD,CAoCA,CAxCuB,EAAxB;;CA6CA,gCAAA,CAAmC2C,WAAnC,CAAgDn3B,YAAhD,CAA8Do3B,UAA9D,CAA0EC,aAA1E,CAA0F,CAEzF,aAAelU,eAAgBnjB,aAAaM,OAAb,CAAqBT,MAArC,CAAf,CACA,WAAasjB,eAAgBnjB,aAAaM,OAAb,CAAqBvvB,IAArC,CAAb,CACA6yC,MAAMkS,UAAN,CAAkBuB,aAAlB,CAAiC,CAAjC,CAAoC/B,QAApC,CAA8Ct1B,aAAa8B,KAA3D,CAAkE9B,aAAa+B,MAA/E,CAAuF,CAAvF,CAA0FuzB,QAA1F,CAAoGC,MAApG,CAA4G,IAA5G,EACA1S,IAAIyU,eAAJ,CAAqBzU,IAAI0U,WAAzB,CAAsCJ,WAAtC,EACAtU,IAAI2U,oBAAJ,CAA0B3U,IAAI0U,WAA9B,CAA2CH,UAA3C,CAAuDC,aAAvD,CAAsElZ,WAAWlmE,GAAX,CAAgB+nD,aAAaM,OAA7B,EAAuCymB,cAA7G,CAA6H,CAA7H,EACAlE,IAAIyU,eAAJ,CAAqBzU,IAAI0U,WAAzB,CAAsC,IAAtC,EAEA;CAGD,iCAAA,CAAoCE,YAApC,CAAkDz3B,YAAlD,CAAiE,CAEhE6iB,IAAI6U,gBAAJ,CAAsB7U,IAAI8U,YAA1B,CAAwCF,YAAxC,EAEA,GAAKz3B,aAAa43B,WAAb,EAA4B,CAAE53B,aAAa63B,aAAhD,CAAgE,CAE/DhV,IAAIiV,mBAAJ,CAAyBjV,IAAI8U,YAA7B,CAA2C9U,IAAIgT,iBAA/C,CAAkE71B,aAAa8B,KAA/E,CAAsF9B,aAAa+B,MAAnG,EACA8gB,IAAIkV,uBAAJ,CAA6BlV,IAAI0U,WAAjC,CAA8C1U,IAAImV,gBAAlD,CAAoEnV,IAAI8U,YAAxE,CAAsFF,YAAtF,EAEA,CALD,QAKYz3B,aAAa43B,WAAb,EAA4B53B,aAAa63B,aAA9C,CAA8D,CAEpEhV,IAAIiV,mBAAJ,CAAyBjV,IAAI8U,YAA7B,CAA2C9U,IAAIoV,aAA/C,CAA8Dj4B,aAAa8B,KAA3E,CAAkF9B,aAAa+B,MAA/F,EACA8gB,IAAIkV,uBAAJ,CAA6BlV,IAAI0U,WAAjC,CAA8C1U,IAAIqV,wBAAlD,CAA4ErV,IAAI8U,YAAhF,CAA8FF,YAA9F,EAEA,CALM,IAKA;CAGN5U,IAAIiV,mBAAJ,CAAyBjV,IAAI8U,YAA7B,CAA2C9U,IAAIsV,KAA/C,CAAsDn4B,aAAa8B,KAAnE,CAA0E9B,aAAa+B,MAAvF,EAEA,CAED8gB,IAAI6U,gBAAJ,CAAsB7U,IAAI8U,YAA1B,CAAwC,IAAxC,EAEA;CAGD,0BAAA,CAA6BR,WAA7B,CAA0Cn3B,YAA1C,CAAyD,CAExD,WAAeA,8BAA8BC,qBAA7C,CACA,GAAKm4B,MAAL,CAAc,eAAM,CAAU,0DAAV,CAAN,CAEdvV,IAAIyU,eAAJ,CAAqBzU,IAAI0U,WAAzB,CAAsCJ,WAAtC,EAEA,GAAK,EAAGn3B,aAAainB,YAAb,kBAA2C9P,YAA9C,CAAL,CAAoE,CAEnE,eAAM,CAAU,qEAAV,CAAN,CAEA;CAGD,GAAK,CAACgH,WAAWlmE,GAAX,CAAgB+nD,aAAainB,YAA7B,EAA4CF,cAA7C,EACH/mB,aAAainB,YAAb,CAA0Bvc,KAA1B,CAAgC5I,KAAhC,GAA0C9B,aAAa8B,KADpD,EAEH9B,aAAainB,YAAb,CAA0Bvc,KAA1B,CAAgC3I,MAAhC,GAA2C/B,aAAa+B,MAF1D,CAEmE,CAClE/B,aAAainB,YAAb,CAA0Bvc,KAA1B,CAAgC5I,KAAhC,CAAwC9B,aAAa8B,KAArD,CACA9B,aAAainB,YAAb,CAA0Bvc,KAA1B,CAAgC3I,MAAhC,CAAyC/B,aAAa+B,MAAtD,CACA/B,aAAainB,YAAb,CAA0B3kC,WAA1B,CAAwC,IAAxC,CACA,CAEDuqC,MAAMiK,YAAN,CAAoB92B,aAAainB,YAAjC,CAA+C,CAA/C,EAEA,sBAAwB9I,WAAWlmE,GAAX,CAAgB+nD,aAAainB,YAA7B,EAA4CF,cAApE,CACAlE,IAAI2U,oBAAJ,CAA0B3U,IAAI0U,WAA9B,CAA2C1U,IAAImV,gBAA/C,CAAiEnV,IAAIgS,UAArE,CAAiFwD,iBAAjF,CAAoG,CAApG,EAEA;CAGD,+BAAA,CAAiCr4B,YAAjC,CAAgD,CAE/C,2BAA6Bme,WAAWlmE,GAAX,CAAgB+nD,YAAhB,CAA7B,CAEA,WAAeA,8BAA8BC,qBAA7C,CAEA,GAAKD,aAAainB,YAAlB,CAAiC,CAEhC,GAAKmR,MAAL,CAAc,eAAM,CAAU,0DAAV,CAAN,CAEdE,kBAAmBnR,uBAAuBC,kBAA1C,CAA8DpnB,YAA9D,EAEA,CAND,IAMO,CAEN,GAAKo4B,MAAL,CAAc,CAEbjR,uBAAuBE,kBAAvB,CAA4C,EAA5C,CAEA,IAAM,MAAQ,CAAd,CAAiBpzD,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9B4uD,IAAIyU,eAAJ,CAAqBzU,IAAI0U,WAAzB,CAAsCpQ,uBAAuBC,kBAAvB,CAA2CnzD,CAA3C,CAAtC,EACAkzD,uBAAuBE,kBAAvB,CAA2CpzD,CAA3C,EAAiD4uD,IAAI0V,kBAAJ,EAAjD,CACAC,yBAA0BrR,uBAAuBE,kBAAvB,CAA2CpzD,CAA3C,CAA1B,CAA0E+rC,YAA1E,EAEA,CAED,CAZD,IAYO,CAEN6iB,IAAIyU,eAAJ,CAAqBzU,IAAI0U,WAAzB,CAAsCpQ,uBAAuBC,kBAA7D,EACAD,uBAAuBE,kBAAvB,CAA4CxE,IAAI0V,kBAAJ,EAA5C,CACAC,yBAA0BrR,uBAAuBE,kBAAjD,CAAqErnB,YAArE,EAEA,CAED,CAED6iB,IAAIyU,eAAJ,CAAqBzU,IAAI0U,WAAzB,CAAsC,IAAtC,EAEA;CAGD,0BAAA,CAA4Bv3B,YAA5B,CAA2C,CAE1C,2BAA6Bme,WAAWlmE,GAAX,CAAgB+nD,YAAhB,CAA7B,CACA,sBAAwBme,WAAWlmE,GAAX,CAAgB+nD,aAAaM,OAA7B,CAAxB,CAEAN,aAAalvB,gBAAb,CAA+B,SAA/B,CAA0Cy1C,qBAA1C,EAEAI,kBAAkBI,cAAlB,CAAmClE,IAAI4R,aAAJ,EAAnC,CAEAlS,YAAYrrC,QAAZ,GAEA,WAAe8oB,8BAA8BC,qBAA7C,CACA,uBAAyB7oD,MAAMI,IAAN,CAAWkxB,YAAX,CAAyBs3B,aAAa8B,KAAtC,GAAiD1qD,MAAMI,IAAN,CAAWkxB,YAAX,CAAyBs3B,aAAa+B,MAAtC,CAA1E;CAIA,GAAKq2B,MAAL,CAAc,CAEbjR,uBAAuBC,kBAAvB,CAA4C,EAA5C,CAEA,IAAM,MAAQ,CAAd,CAAiBnzD,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9BkzD,uBAAuBC,kBAAvB,CAA2CnzD,CAA3C,EAAiD4uD,IAAI4V,iBAAJ,EAAjD,CAEA,CAED,CAVD,IAUO,CAENtR,uBAAuBC,kBAAvB,CAA4CvE,IAAI4V,iBAAJ,EAA5C,CAEA;CAID,GAAKL,MAAL,CAAc,CAEbxU,MAAMgR,WAAN,CAAmB/R,IAAI0T,gBAAvB,CAAyC5P,kBAAkBI,cAA3D,EACAyO,qBAAsB3S,IAAI0T,gBAA1B,CAA4Cv2B,aAAaM,OAAzD,CAAkEo4B,kBAAlE,EAEA,IAAM,MAAQ,CAAd,CAAiBzkE,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9B0kE,wBAAyBxR,uBAAuBC,kBAAvB,CAA2CnzD,CAA3C,CAAzB,CAAyE+rC,YAAzE,CAAuF6iB,IAAI+V,iBAA3F,CAA8G/V,IAAI+T,2BAAJ,CAAkC3iE,CAAhJ,EAEA,CAED,GAAK+rC,aAAaM,OAAb,CAAqBC,eAArB,EAAwCm4B,kBAA7C,CAAkE7V,IAAIqT,cAAJ,CAAoBrT,IAAI0T,gBAAxB,EAClE3S,MAAMgR,WAAN,CAAmB/R,IAAI0T,gBAAvB,CAAyC,IAAzC,EAEA,CAdD,IAcO,CAEN3S,MAAMgR,WAAN,CAAmB/R,IAAIgS,UAAvB,CAAmClO,kBAAkBI,cAArD,EACAyO,qBAAsB3S,IAAIgS,UAA1B,CAAsC70B,aAAaM,OAAnD,CAA4Do4B,kBAA5D,EACAC,wBAAyBxR,uBAAuBC,kBAAhD,CAAoEpnB,YAApE,CAAkF6iB,IAAI+V,iBAAtF,CAAyG/V,IAAIgS,UAA7G,EAEA,GAAK70B,aAAaM,OAAb,CAAqBC,eAArB,EAAwCm4B,kBAA7C,CAAkE7V,IAAIqT,cAAJ,CAAoBrT,IAAIgS,UAAxB,EAClEjR,MAAMgR,WAAN,CAAmB/R,IAAIgS,UAAvB,CAAmC,IAAnC,EAEA;CAID,GAAK70B,aAAa43B,WAAlB,CAAgC,CAE/BiB,uBAAwB74B,YAAxB,EAEA,CAED,CAED,KAAK84B,sBAAL,CAA8B,UAAW,CAExC,2BAAA,CAEA,CAJD,CAMA,KAAKp4B,eAAL,CAAuB,SAAWV,YAAX,CAA0B,CAEhDkgB,qBAAuBlgB,YAAvB,CAEA,GAAKA,cAAgBme,WAAWlmE,GAAX,CAAgB+nD,YAAhB,EAA+BonB,kBAA/B,GAAsD7vE,SAA3E,CAAuF,CAEtFwhF,kBAAmB/4B,YAAnB,EAEA,CAED,WAAeA,8BAA8BC,qBAA7C,CACA,eAAA,CAEA,GAAKD,YAAL,CAAoB,CAEnB,2BAA6Bme,WAAWlmE,GAAX,CAAgB+nD,YAAhB,CAA7B,CAEA,GAAKo4B,MAAL,CAAc,CAEbjB,YAAchQ,uBAAuBC,kBAAvB,CAA2CpnB,aAAaQ,cAAxD,CAAd,CAEA,CAJD,IAIO,CAEN22B,YAAchQ,uBAAuBC,kBAArC,CAEA,CAED7G,gBAAgBp/D,IAAhB,CAAsB6+C,aAAa+jB,OAAnC,EACAvD,oBAAsBxgB,aAAag5B,WAAnC,CAEAvY,iBAAiBt/D,IAAjB,CAAuB6+C,aAAagkB,QAApC,EAEA,CAnBD,IAmBO,CAENmT,YAAc,IAAd,CAEA5W,gBAAgBp/D,IAAhB,CAAsB6/D,QAAtB,EAAiCl8D,cAAjC,CAAiDi8D,WAAjD,EACAP,oBAAsBS,YAAtB,CAEAR,iBAAiBt/D,IAAjB,CAAuB+/D,SAAvB,EAAmCp8D,cAAnC,CAAmDi8D,WAAnD,EAEA,CAED,GAAKZ,sBAAwBgX,WAA7B,CAA2C,CAE1CtU,IAAIyU,eAAJ,CAAqBzU,IAAI0U,WAAzB,CAAsCJ,WAAtC,EACAhX,oBAAsBgX,WAAtB,CAEA,CAEDvT,MAAMG,OAAN,CAAexD,eAAf,EACAqD,MAAM0B,cAAN,CAAsB9E,mBAAtB,EAEAoD,MAAMI,QAAN,CAAgBvD,gBAAhB,EAEA,GAAK2X,MAAL,CAAc,CAEb,sBAAwBja,WAAWlmE,GAAX,CAAgB+nD,aAAaM,OAA7B,CAAxB,CACAuiB,IAAI2U,oBAAJ,CAA0B3U,IAAI0U,WAA9B,CAA2C1U,IAAI+V,iBAA/C,CAAkE/V,IAAI+T,2BAAJ,CAAkC52B,aAAaQ,cAAjH,CAAiImmB,kBAAkBI,cAAnJ,CAAmK/mB,aAAai5B,iBAAhL,EAEA,CAED,CA9DD,CAgEA,KAAKC,sBAAL,CAA8B,SAAWl5B,YAAX,CAAyBroD,CAAzB,CAA4B6N,CAA5B,CAA+Bs8C,KAA/B,CAAsCC,MAAtC,CAA8CjqC,MAA9C,CAAuD,CAEpF,GAAKkoC,8BAA8BgyB,iBAA9B,GAAoD,KAAzD,CAAiE,CAEhEzvE,QAAQuL,KAAR,CAAe,0FAAf,EACA,OAEA,CAED,gBAAkBqwD,WAAWlmE,GAAX,CAAgB+nD,YAAhB,EAA+BonB,kBAAjD,CAEA,GAAK+P,WAAL,CAAmB,CAElB,YAAc,KAAd,CAEA,GAAKA,cAAgBhX,mBAArB,CAA2C,CAE1C0C,IAAIyU,eAAJ,CAAqBzU,IAAI0U,WAAzB,CAAsCJ,WAAtC,EAEAgC,QAAU,IAAV,CAEA,CAED,GAAI,CAEH,YAAcn5B,aAAaM,OAA3B,CAEA,GAAKA,QAAQT,MAAR,GAAmBzoD,MAAMmH,UAAzB,EAAuC4kE,eAAgB7iB,QAAQT,MAAxB,IAAqCgjB,IAAIluD,YAAJ,CAAkBkuD,IAAIuW,gCAAtB,CAAjF,CAA4I,CAE3I72E,QAAQuL,KAAR,CAAe,2GAAf,EACA,OAEA,CAED,GAAKwyC,QAAQvvB,IAAR,GAAiB35B,MAAMsG,gBAAvB,EACAylE,eAAgB7iB,QAAQvvB,IAAxB,IAAmC8xC,IAAIluD,YAAJ,CAAkBkuD,IAAIwW,8BAAtB,CADnC,EAEA,EAAI/4B,QAAQvvB,IAAR,GAAiB35B,MAAM4G,SAAvB,EAAoCw3D,WAAWv9D,GAAX,CAAgB,0BAAhB,CAAxC,CAFA,EAGA,EAAIqoD,QAAQvvB,IAAR,GAAiB35B,MAAM6G,aAAvB,EAAwCu3D,WAAWv9D,GAAX,CAAgB,6BAAhB,CAA5C,CAHL,CAGqG,CAEpGsK,QAAQuL,KAAR,CAAe,qHAAf,EACA,OAEA,CAED,GAAK+0D,IAAIyW,sBAAJ,CAA4BzW,IAAI0U,WAAhC,IAAkD1U,IAAI0W,oBAA3D,CAAkF;CAIjF,GAAO5hF,GAAK,CAAL,EAAUA,GAAOqoD,aAAa8B,KAAb,CAAqBA,KAAxC,EAAuDt8C,GAAK,CAAL,EAAUA,GAAOw6C,aAAa+B,MAAb,CAAsBA,MAAnG,CAAgH,CAE/G8gB,IAAI2W,UAAJ,CAAgB7hF,CAAhB,CAAmB6N,CAAnB,CAAsBs8C,KAAtB,CAA6BC,MAA7B,CAAqCohB,eAAgB7iB,QAAQT,MAAxB,CAArC,CAAuEsjB,eAAgB7iB,QAAQvvB,IAAxB,CAAvE,CAAuGjZ,MAAvG,EAEA,CAED,CAVD,IAUO,CAENvV,QAAQuL,KAAR,CAAe,4GAAf,EAEA,CAED,CArCD,OAqCU,CAET,GAAKqrE,OAAL,CAAe,CAEdtW,IAAIyU,eAAJ,CAAqBzU,IAAI0U,WAAzB,CAAsCpX,mBAAtC,EAEA,CAED,CAED,CAED,CAxED,CA0EA,iCAAA,CAAmCngB,YAAnC,CAAkD,CAEjD,WAAaA,8BAA8BC,qBAA9B,CAAsD4iB,IAAI0T,gBAA1D,CAA6E1T,IAAIgS,UAA9F,CACA,YAAc1W,WAAWlmE,GAAX,CAAgB+nD,aAAaM,OAA7B,EAAuCymB,cAArD,CAEAnD,MAAMgR,WAAN,CAAmBv8E,MAAnB,CAA2BioD,OAA3B,EACAuiB,IAAIqT,cAAJ,CAAoB79E,MAApB,EACAurE,MAAMgR,WAAN,CAAmBv8E,MAAnB,CAA2B,IAA3B,EAEA;CAID,uBAAA,CAA0BkT,CAA1B,CAA8B,CAE7B,GAAKA,IAAMnU,MAAMgG,aAAZ,EAA6BmO,IAAMnU,MAAMiG,0BAAzC,EAAuEkO,IAAMnU,MAAMkG,yBAAxF,CAAoH,CAEnH,WAAWm8E,OAAX,CAEA,CAED,WAAWC,MAAX,CAEA;CAID,uBAAA,CAA0B/3E,CAA1B,CAA8B,CAE7B,aAAA,CAEA,GAAKA,IAAMvK,MAAM6F,cAAjB,CAAkC,WAAW08E,MAAX,CAClC,GAAKh4E,IAAMvK,MAAM8F,mBAAjB,CAAuC,WAAWi3E,aAAX,CACvC,GAAKxyE,IAAMvK,MAAM+F,sBAAjB,CAA0C,WAAWy8E,eAAX,CAE1C,GAAKj4E,IAAMvK,MAAMgG,aAAjB,CAAiC,WAAWq8E,OAAX,CACjC,GAAK93E,IAAMvK,MAAMiG,0BAAjB,CAA8C,WAAWw8E,sBAAX,CAC9C,GAAKl4E,IAAMvK,MAAMkG,yBAAjB,CAA6C,WAAWw8E,qBAAX,CAE7C,GAAKn4E,IAAMvK,MAAMmG,YAAjB,CAAgC,WAAWm8E,MAAX,CAChC,GAAK/3E,IAAMvK,MAAMoG,yBAAjB,CAA6C,WAAWu8E,qBAAX,CAC7C,GAAKp4E,IAAMvK,MAAMqG,wBAAjB,CAA4C,WAAWu8E,oBAAX,CAE5C,GAAKr4E,IAAMvK,MAAMsG,gBAAjB,CAAoC,WAAWsuE,aAAX,CACpC,GAAKrqE,IAAMvK,MAAM8G,qBAAjB,CAAyC,WAAW+7E,sBAAX,CACzC,GAAKt4E,IAAMvK,MAAM+G,qBAAjB,CAAyC,WAAW+7E,sBAAX,CACzC,GAAKv4E,IAAMvK,MAAMgH,oBAAjB,CAAwC,WAAW+7E,oBAAX,CAExC,GAAKx4E,IAAMvK,MAAMuG,QAAjB,CAA4B,WAAWouE,IAAX,CAC5B,GAAKpqE,IAAMvK,MAAMwG,SAAjB,CAA6B,WAAWguE,KAAX,CAC7B,GAAKjqE,IAAMvK,MAAMyG,iBAAjB,CAAqC,WAAW8tE,cAAX,CACrC,GAAKhqE,IAAMvK,MAAM0G,OAAjB,CAA2B,WAAWguE,GAAX,CAC3B,GAAKnqE,IAAMvK,MAAM2G,eAAjB,CAAmC,WAAW8tE,YAAX,CACnC,GAAKlqE,IAAMvK,MAAM4G,SAAjB,CAA6B,WAAW2qE,KAAX,CAE7B/D,UAAYpP,WAAWv9D,GAAX,CAAgB,wBAAhB,CAAZ,CAEA,GAAK2sE,YAAc,IAAnB,CAA0B,CAEzB,GAAKjjE,IAAMvK,MAAM6G,aAAjB,CAAiC,iBAAiBm8E,cAAjB,CAEjC,CAED,GAAKz4E,IAAMvK,MAAMiH,WAAjB,CAA+B,WAAWg8E,KAAX,CAC/B,GAAK14E,IAAMvK,MAAMkH,SAAjB,CAA6B,WAAWg8E,GAAX,CAC7B,GAAK34E,IAAMvK,MAAMmH,UAAjB,CAA8B,WAAWg8E,IAAX,CAC9B,GAAK54E,IAAMvK,MAAMoH,eAAjB,CAAmC,WAAWg8E,SAAX,CACnC,GAAK74E,IAAMvK,MAAMqH,oBAAjB,CAAwC,WAAWg8E,eAAX,CACxC,GAAK94E,IAAMvK,MAAMuH,WAAjB,CAA+B,WAAW82E,eAAX,CAE/B,GAAK9zE,IAAMvK,MAAMqD,WAAjB,CAA+B,WAAWigF,QAAX,CAC/B,GAAK/4E,IAAMvK,MAAMsD,gBAAjB,CAAoC,WAAWigF,aAAX,CACpC,GAAKh5E,IAAMvK,MAAMuD,uBAAjB,CAA2C,WAAWigF,qBAAX,CAE3C,GAAKj5E,IAAMvK,MAAM0D,UAAjB,CAA8B,WAAW+/E,IAAX,CAC9B,GAAKl5E,IAAMvK,MAAM2D,SAAjB,CAA6B,WAAW+/E,GAAX,CAC7B,GAAKn5E,IAAMvK,MAAM4D,cAAjB,CAAkC,WAAW+/E,SAAX,CAClC,GAAKp5E,IAAMvK,MAAM6D,sBAAjB,CAA0C,WAAW+/E,mBAAX,CAC1C,GAAKr5E,IAAMvK,MAAM8D,cAAjB,CAAkC,WAAW+/E,SAAX,CAClC,GAAKt5E,IAAMvK,MAAM+D,sBAAjB,CAA0C,WAAW+/E,mBAAX,CAC1C,GAAKv5E,IAAMvK,MAAMgE,cAAjB,CAAkC,WAAW+/E,SAAX,CAClC,GAAKx5E,IAAMvK,MAAMiE,sBAAjB,CAA0C,WAAW+/E,mBAAX,CAE1C,GAAKz5E,IAAMvK,MAAMkE,cAAjB,CAAkC,WAAW+/E,SAAX,CAClC,GAAK15E,IAAMvK,MAAMmE,sBAAjB,CAA0C,WAAW+/E,mBAAX,CAC1C,GAAK35E,IAAMvK,MAAMoE,sBAAjB,CAA0C,WAAW+/E,kBAAX,CAE1C3W,UAAYpP,WAAWv9D,GAAX,CAAgB,+BAAhB,CAAZ,CAEA,GAAK2sE,YAAc,IAAnB,CAA0B,CAEzB,GAAKjjE,IAAMvK,MAAMwH,oBAAjB,CAAwC,iBAAiB48E,4BAAjB,CACxC,GAAK75E,IAAMvK,MAAMyH,qBAAjB,CAAyC,iBAAiB48E,6BAAjB,CACzC,GAAK95E,IAAMvK,MAAM0H,qBAAjB,CAAyC,iBAAiB48E,6BAAjB,CACzC,GAAK/5E,IAAMvK,MAAM2H,qBAAjB,CAAyC,iBAAiB48E,6BAAjB,CAEzC,CAED/W,UAAYpP,WAAWv9D,GAAX,CAAgB,gCAAhB,CAAZ,CAEA,GAAK2sE,YAAc,IAAnB,CAA0B,CAEzB,GAAKjjE,IAAMvK,MAAM4H,uBAAjB,CAA2C,iBAAiB48E,+BAAjB,CAC3C,GAAKj6E,IAAMvK,MAAM6H,uBAAjB,CAA2C,iBAAiB48E,+BAAjB,CAC3C,GAAKl6E,IAAMvK,MAAM8H,wBAAjB,CAA4C,iBAAiB48E,gCAAjB,CAC5C,GAAKn6E,IAAMvK,MAAM+H,wBAAjB,CAA4C,iBAAiB48E,gCAAjB,CAE5C,CAEDnX,UAAYpP,WAAWv9D,GAAX,CAAgB,+BAAhB,CAAZ,CAEA,GAAK2sE,YAAc,IAAnB,CAA0B,CAEzB,GAAKjjE,IAAMvK,MAAMgI,eAAjB,CAAmC,iBAAiB48E,yBAAjB,CAEnC,CAEDpX,UAAYpP,WAAWv9D,GAAX,CAAgB,kBAAhB,CAAZ,CAEA,GAAK2sE,YAAc,IAAnB,CAA0B,CAEzB,GAAKjjE,IAAMvK,MAAMwD,WAAjB,CAA+B,iBAAiBqhF,OAAjB,CAC/B,GAAKt6E,IAAMvK,MAAMyD,WAAjB,CAA+B,iBAAiBqhF,OAAjB,CAE/B,CAED,QAAA,CAEA,CAED,CAl3GD;;;;;;;;;GAi4GA9kF,MAAM46E,iBAAN,CAA0B,SAAWlwB,KAAX,CAAkBC,MAAlB,CAA0B7B,OAA1B,CAAoC,CAE7D,KAAK94B,IAAL,CAAYhwB,MAAMI,IAAN,CAAW0vB,YAAX,EAAZ,CAEA,KAAK46B,KAAL,CAAaA,KAAb,CACA,KAAKC,MAAL,CAAcA,MAAd,CAEA,KAAKgiB,OAAL,CAAe,UAAU3yD,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB0wC,KAAzB,CAAgCC,MAAhC,CAAf,CACA,KAAKi3B,WAAL,CAAmB,KAAnB,CAEA,KAAKhV,QAAL,CAAgB,UAAU5yD,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB0wC,KAAzB,CAAgCC,MAAhC,CAAhB,CAEA7B,QAAUA,SAAW,EAArB,CAEA,GAAKA,QAAQH,SAAR,GAAsBxoD,SAA3B,CAAuC2oD,QAAQH,SAAR,CAAoB3oD,MAAMmG,YAA1B,CAEvC,KAAK+iD,OAAL,CAAe,UAAUsQ,OAAV,CAAmBr5D,SAAnB,CAA8BA,SAA9B,CAAyC2oD,QAAQgG,KAAjD,CAAwDhG,QAAQiG,KAAhE,CAAuEjG,QAAQJ,SAA/E,CAA0FI,QAAQH,SAAlG,CAA6GG,QAAQL,MAArH,CAA6HK,QAAQnvB,IAArI,CAA2ImvB,QAAQ4F,UAAnJ,CAA+J5F,QAAQmW,QAAvK,CAAf,CAEA,KAAKuhB,WAAL,CAAmB13B,QAAQ03B,WAAR,GAAwBrgF,SAAxB,CAAoC2oD,QAAQ03B,WAA5C,CAA0D,IAA7E,CACA,KAAKC,aAAL,CAAqB33B,QAAQ23B,aAAR,GAA0BtgF,SAA1B,CAAsC2oD,QAAQ23B,aAA9C,CAA8D,IAAnF,CACA,KAAK5Q,YAAL,CAAoB,IAApB,CAEA,CAtBD,CAwBAlvE,OAAOK,MAAP,CAAehB,MAAM46E,iBAAN,CAAwBn6E,SAAvC,CAAkDT,MAAMy5B,eAAN,CAAsBh5B,SAAxE,CAAmF,CAElFotE,QAAS,iBAAWnjB,KAAX,CAAkBC,MAAlB,CAA2B,CAEnC,GAAK,KAAKD,KAAL,GAAeA,KAAf,EAAwB,KAAKC,MAAL,GAAgBA,MAA7C,CAAsD,CAErD,KAAKD,KAAL,CAAaA,KAAb,CACA,KAAKC,MAAL,CAAcA,MAAd,CAEA,KAAKjhB,OAAL,GAEA,CAED,KAAKkjC,QAAL,CAAcjjE,GAAd,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB+gD,KAAzB,CAAgCC,MAAhC,EACA,KAAKgiB,OAAL,CAAahjE,GAAb,CAAkB,CAAlB,CAAqB,CAArB,CAAwB+gD,KAAxB,CAA+BC,MAA/B,EAEA,CAhBiF,CAkBlF5+C,MAAO,gBAAY,CAElB,gBAAgBlC,WAAT,GAAuBE,IAAvB,CAA6B,IAA7B,CAAP,CAEA,CAtBiF,CAwBlFA,KAAM,cAAW1I,MAAX,CAAoB,CAEzB,KAAKqpD,KAAL,CAAarpD,OAAOqpD,KAApB,CACA,KAAKC,MAAL,CAActpD,OAAOspD,MAArB,CAEA,KAAKiiB,QAAL,CAAc7iE,IAAd,CAAoB1I,OAAOurE,QAA3B,EAEA,KAAK1jB,OAAL,CAAe7nD,OAAO6nD,OAAP,CAAen9C,KAAf,EAAf,CAEA,KAAKy0E,WAAL,CAAmBn/E,OAAOm/E,WAA1B,CACA,KAAKC,aAAL,CAAqBp/E,OAAOo/E,aAA5B,CACA,KAAK5Q,YAAL,CAAoBxuE,OAAOwuE,YAA3B,CAEA,WAAA,CAEA,CAvCiF,CAyClFnmC,QAAS,kBAAY,CAEpB,KAAKtP,aAAL,CAAoB,CAAET,KAAM,SAAR,CAApB,EAEA,CA7CiF,CAAnF;;;IAuDA35B,MAAM6oD,qBAAN,CAA8B,SAAW6B,KAAX,CAAkBC,MAAlB,CAA0B7B,OAA1B,CAAoC,CAEjE9oD,MAAM46E,iBAAN,CAAwBr5E,IAAxB,CAA8B,IAA9B,CAAoCmpD,KAApC,CAA2CC,MAA3C,CAAmD7B,OAAnD,EAEA,KAAKM,cAAL,CAAsB,CAAtB;CACA,KAAKy4B,iBAAL,CAAyB,CAAzB,CAEA,CAPD,CASA7hF,MAAM6oD,qBAAN,CAA4BpoD,SAA5B,CAAwCE,OAAOy2B,MAAP,CAAep3B,MAAM46E,iBAAN,CAAwBn6E,SAAvC,CAAxC,CACAT,MAAM6oD,qBAAN,CAA4BpoD,SAA5B,CAAsCoJ,WAAtC,CAAoD7J,MAAM6oD,qBAA1D;;;GAQA7oD,MAAMssE,mBAAN,CAA4B,SAAWb,GAAX,CAAgBrN,UAAhB,CAA4BgN,WAA5B,CAA0C,CAErE,QAAA,CAEA,gBAAA,CAAkBthE,KAAlB,CAA0B,CAEzB4lC,KAAO5lC,KAAP,CAEA,CAED,eAAA,CAAiB0R,KAAjB,CAAwB2lB,KAAxB,CAAgC,CAE/BsqC,IAAIsG,UAAJ,CAAgBriC,IAAhB,CAAsBl0B,KAAtB,CAA6B2lB,KAA7B,EAEAiqC,YAAYC,KAAZ,GACAD,YAAYvsD,QAAZ,EAAwBsiB,KAAxB,CACA,GAAKuO,OAAS+7B,IAAIuG,SAAlB,CAA8B5G,YAAY/nC,KAAZ,EAAqBlC,MAAQ,CAA7B,CAE9B,CAED,wBAAA,CAA0BxiB,QAA1B,CAAqC,CAEpC,cAAgBy/C,WAAWv9D,GAAX,CAAgB,wBAAhB,CAAhB,CAEA,GAAK2sE,YAAc,IAAnB,CAA0B,CAEzBriE,QAAQuL,KAAR,CAAe,gIAAf,EACA,OAEA,CAED,aAAeiI,SAASK,UAAT,CAAoBuI,QAAnC,CAEA,UAAY,CAAZ,CAEA,GAAKA,0BAA0B2b,0BAA/B,CAA4D,CAE3D/B,MAAQ5Z,SAASkZ,IAAT,CAAcU,KAAtB,CAEAqsC,UAAUuX,wBAAV,CAAoCr1C,IAApC,CAA0C,CAA1C,CAA6CvO,KAA7C,CAAoDxiB,SAAS8tB,iBAA7D,EAEA,CAND,IAMO,CAENtL,MAAQ5Z,SAAS4Z,KAAjB,CAEAqsC,UAAUuX,wBAAV,CAAoCr1C,IAApC,CAA0C,CAA1C,CAA6CvO,KAA7C,CAAoDxiB,SAAS8tB,iBAA7D,EAEA,CAED2+B,YAAYC,KAAZ,GACAD,YAAYvsD,QAAZ,EAAwBsiB,MAAQxiB,SAAS8tB,iBAAzC,CACA,GAAKiD,OAAS+7B,IAAIuG,SAAlB,CAA8B5G,YAAY/nC,KAAZ,EAAqB1kB,SAAS8tB,iBAAT,CAA6BtL,KAA7B,CAAqC,CAA1D,CAE9B,CAED,KAAKsyC,OAAL,CAAeA,OAAf,CACA,KAAKpqB,MAAL,CAAcA,MAAd,CACA,KAAK2qB,eAAL,CAAuBA,eAAvB,CAEA,CA3DD;CA+DAh0E,MAAMiqE,aAAN,CAAsB,UAAW,CAEhC,UAAY,IAAZ,CAEC+a,YAAc,IAFf,CAGCC,gBAAkB,CAHnB,CAIC9c,qBAAuB,KAJxB,CAKC+c,iBAAmB,KALpB,CAOC5lE,MAAQ,UAAUwN,KAAV,EAPT,CAQCq4D,iBAAmB,UAAUzlE,OAAV,EARpB,CAUCm4D,QAAU,CAAE/tE,MAAO,IAAT,CAAeohC,YAAa,KAA5B,CAVX,CAYA,KAAK2sC,OAAL,CAAeA,OAAf,CACA,KAAKpB,SAAL,CAAiB,CAAjB,CAEA,KAAK/J,IAAL,CAAY,SAAU7/C,MAAV,CAAkBu4D,mBAAlB,CAAuCztE,MAAvC,CAAgD,CAE3D,YACCkV,OAAOzrB,MAAP,GAAkB,CAAlB,EACAgkF,mBADA;;CAIAH,kBAAoB,CAJpB,EAKA9c,oBAND,CAQAA,qBAAuBid,mBAAvB,CAEAJ,YAAcK,cAAex4D,MAAf,CAAuBlV,MAAvB,CAA+B,CAA/B,CAAd,CACAstE,gBAAkBp4D,OAAOzrB,MAAzB,CAEA,cAAA,CAEA,CAjBD,CAmBA,KAAKw0E,YAAL,CAAoB,UAAW,CAE9BsP,iBAAmB,IAAnB,CACAG,cAAe,IAAf,EAEA,CALD,CAOA,KAAKtP,UAAL,CAAkB,UAAW,CAE5BmP,iBAAmB,KAAnB,CACAI,mBAEA,CALD,CAOA,KAAKvM,QAAL,CAAgB,SAAUlsD,MAAV,CAAkBivC,WAAlB,CAA+BnkD,MAA/B,CAAuC4oB,KAAvC,CAA8CglD,SAA9C,CAA0D,CAEzE,GAAK,CAAEpd,oBAAF,EACHt7C,SAAW,IADR,EACgBA,OAAOzrB,MAAP,GAAkB,CADlC,EAEH8jF,kBAAoB,CAAEppB,WAFxB,CAEsC;CAGrC,GAAKopB,gBAAL,CAAwB;CAGvBG,cAAe,IAAf,EAEA,CALD,IAKO,CAENC,mBACA,CAED,CAfD,IAeO,CAEN,YAAcJ,iBAAmB,CAAnB,CAAuBD,eAArC,CACCO,QAAUC,QAAU,CADrB,CAGCC,SAAWnlD,MAAMolD,aAAN,EAAuB,IAHnC,CAKA9N,QAAQ/tE,KAAR,CAAgB47E,QAAhB;CAEAA,SAAWL,cAAex4D,MAAf,CAAuBlV,MAAvB,CAA+B6tE,OAA/B,CAAwCD,SAAxC,CAAX,CAEA,IAAM,MAAQ,CAAd,CAAiB1oE,IAAM2oE,OAAvB,CAAgC,EAAG3oE,CAAnC,CAAuC,CAEtC6oE,SAAU7oE,CAAV,EAAgBmoE,YAAanoE,CAAb,CAAhB,CAEA,CAED0jB,MAAMolD,aAAN,CAAsBD,QAAtB,CACA,KAAKjP,SAAL,EAAkBgP,OAAlB,CAEA,CAGD,CAxCD,CA0CA,yBAAA,EAA4B,CAE3B,GAAK5N,QAAQ/tE,KAAR,GAAkBk7E,WAAvB,CAAqC,CAEpCnN,QAAQ/tE,KAAR,CAAgBk7E,WAAhB,CACAnN,QAAQ3sC,WAAR,CAAsB+5C,gBAAkB,CAAxC,CAEA,CAEDnmE,MAAM23D,SAAN,CAAkBwO,eAAlB,CAEA,CAED,sBAAA,CAAwBp4D,MAAxB,CAAgClV,MAAhC,CAAwCzE,SAAxC,CAAmD0yE,aAAnD,CAAmE,CAElE,YAAc/4D,SAAW,IAAX,CAAkBA,OAAOzrB,MAAzB,CAAkC,CAAhD,CACCskF,SAAW,IADZ,CAGA,GAAKG,UAAY,CAAjB,CAAqB,CAEpBH,SAAW7N,QAAQ/tE,KAAnB,CAEA,GAAK87E,gBAAkB,IAAlB,EAA0BF,WAAa,IAA5C,CAAmD,CAElD,aAAexyE,UAAY2yE,QAAU,CAArC,CACCtK,WAAa5jE,OAAOqwC,kBADrB,CAGAm9B,iBAAiBzjE,eAAjB,CAAkC65D,UAAlC,EAEA,GAAKmK,WAAa,IAAb,EAAqBA,SAAStkF,MAAT,CAAkB0kF,QAA5C,CAAuD,CAEtDJ,SAAW,gBAAA,CAAkBI,QAAlB,CAAX,CAEA,CAED,IAAM,MAAQ,CAAR,CAAWC,GAAK7yE,SAAtB,CACK2J,IAAMgpE,OADX,CACoB,EAAGhpE,CAAH,CAAMkpE,IAAM,CADhC,CACoC,CAEnCzmE,MAAMvV,IAAN,CAAY8iB,OAAQhQ,CAAR,CAAZ,EACE9F,YADF,CACgBwkE,UADhB,CAC4B4J,gBAD5B,EAGA7lE,MAAMtG,MAAN,CAAa9K,OAAb,CAAsBw3E,QAAtB,CAAgCK,EAAhC,EACAL,SAAUK,GAAK,CAAf,EAAqBzmE,MAAMC,QAA3B,CAEA,CAED,CAEDs4D,QAAQ/tE,KAAR,CAAgB47E,QAAhB,CACA7N,QAAQ3sC,WAAR,CAAsB,IAAtB,CAEA,CAEDpsB,MAAM23D,SAAN,CAAkBoP,OAAlB,CACA,eAAA,CAEA,CAED,CAtJD;;;GA+JA7lF,MAAMusE,0BAAN,CAAmC,SAAWd,GAAX,CAAgBrN,UAAhB,CAA4BgN,WAA5B,CAA0C,CAE5E,QAAA,CAEA,gBAAA,CAAkBthE,KAAlB,CAA0B,CAEzB4lC,KAAO5lC,KAAP,CAEA,CAED,QAAA,CAAU8B,IAAV,CAEA,iBAAA,CAAmB1K,KAAnB,CAA2B,CAE1B,GAAKA,MAAM8M,KAAN,uBAAA,EAAsCowD,WAAWv9D,GAAX,CAAgB,wBAAhB,CAA3C,CAAwF,CAEvF84B,KAAO8xC,IAAIgJ,YAAX,CACA7oE,KAAO,CAAP,CAEA,CALD,IAKO,CAEN+tB,KAAO8xC,IAAI8I,cAAX,CACA3oE,KAAO,CAAP,CAEA,CAED,CAED,eAAA,CAAiB4P,KAAjB,CAAwB2lB,KAAxB,CAAgC,CAE/BsqC,IAAIua,YAAJ,CAAkBt2C,IAAlB,CAAwBvO,KAAxB,CAA+BxH,IAA/B,CAAqCne,MAAQ5P,IAA7C,EAEAw/D,YAAYC,KAAZ,GACAD,YAAYvsD,QAAZ,EAAwBsiB,KAAxB,CACA,GAAKuO,OAAS+7B,IAAIuG,SAAlB,CAA8B5G,YAAY/nC,KAAZ,EAAqBlC,MAAQ,CAA7B,CAE9B,CAED,wBAAA,CAA0BxiB,QAA1B,CAAoCnD,KAApC,CAA2C2lB,KAA3C,CAAmD,CAElD,cAAgBi9B,WAAWv9D,GAAX,CAAgB,wBAAhB,CAAhB,CAEA,GAAK2sE,YAAc,IAAnB,CAA0B,CAEzBriE,QAAQuL,KAAR,CAAe,gIAAf,EACA,OAEA,CAED82D,UAAUyY,0BAAV,CAAsCv2C,IAAtC,CAA4CvO,KAA5C,CAAmDxH,IAAnD,CAAyDne,MAAQ5P,IAAjE,CAAuE+S,SAAS8tB,iBAAhF,EAEA2+B,YAAYC,KAAZ,GACAD,YAAYvsD,QAAZ,EAAwBsiB,MAAQxiB,SAAS8tB,iBAAzC,CACA,GAAKiD,OAAS+7B,IAAIuG,SAAlB,CAA8B5G,YAAY/nC,KAAZ,EAAqB1kB,SAAS8tB,iBAAT,CAA6BtL,KAA7B,CAAqC,CAA1D,CAC9B,CAED,KAAKsyC,OAAL,CAAeA,OAAf,CACA,KAAK9oC,QAAL,CAAgBA,QAAhB,CACA,KAAK0e,MAAL,CAAcA,MAAd,CACA,KAAK2qB,eAAL,CAAuBA,eAAvB,CAEA,CA7DD;;;GAqEAh0E,MAAM4rE,eAAN,CAAwB,SAAWsa,EAAX,CAAgB,CAEvC,eAAiB,EAAjB,CAEA,KAAKrlF,GAAL,CAAW,SAAWH,IAAX,CAAkB,CAE5B,GAAK09D,WAAY19D,IAAZ,IAAuBP,SAA5B,CAAwC,CAEvC,kBAAmBO,IAAZ,CAAP,CAEA,CAED,aAAA,CAEA,OAASA,IAAT,EAEC,IAAK,qBAAL,CACC8sE,UAAY0Y,GAAGC,YAAH,CAAiB,qBAAjB,GAA4CD,GAAGC,YAAH,CAAiB,yBAAjB,CAA5C,EAA4FD,GAAGC,YAAH,CAAiB,4BAAjB,CAAxG,CACA,MAED,IAAK,gCAAL,CACC3Y,UAAY0Y,GAAGC,YAAH,CAAiB,gCAAjB,GAAuDD,GAAGC,YAAH,CAAiB,oCAAjB,CAAvD,EAAkHD,GAAGC,YAAH,CAAiB,uCAAjB,CAA9H,CACA,MAED,IAAK,+BAAL,CACC3Y,UAAY0Y,GAAGC,YAAH,CAAiB,+BAAjB,GAAsDD,GAAGC,YAAH,CAAiB,mCAAjB,CAAtD,EAAgHD,GAAGC,YAAH,CAAiB,sCAAjB,CAA5H,CACA,MAED,IAAK,gCAAL,CACC3Y,UAAY0Y,GAAGC,YAAH,CAAiB,gCAAjB,GAAuDD,GAAGC,YAAH,CAAiB,uCAAjB,CAAnE,CACA,MAED,IAAK,+BAAL,CACC3Y,UAAY0Y,GAAGC,YAAH,CAAiB,+BAAjB,CAAZ,CACA,MAED,QACC3Y,UAAY0Y,GAAGC,YAAH,CAAiBzlF,IAAjB,CAAZ,CAvBF,CA2BA,GAAK8sE,YAAc,IAAnB,CAA0B,CAEzBriE,QAAQC,IAAR,CAAc,wBAA0B1K,IAA1B,CAAiC,2BAA/C,EAEA,CAED09D,WAAY19D,IAAZ,EAAqB8sE,SAArB,CAEA,gBAAA,CAEA,CA/CD,CAiDA,CArDD;CAyDAxtE,MAAM6rE,iBAAN,CAA0B,SAAWqa,EAAX,CAAe9nB,UAAf,CAA2B91B,UAA3B,CAAwC,CAEjE,wBAAA,CAA0BX,SAA1B,CAAsC,CAErC,GAAKA,YAAc,OAAnB,CAA6B,CAE5B,GAAKu+C,GAAGxa,wBAAH,CAA6Bwa,GAAGE,aAAhC,CAA+CF,GAAGG,UAAlD,EAA+D1+C,SAA/D,CAA2E,CAA3E,EACAu+C,GAAGxa,wBAAH,CAA6Bwa,GAAGI,eAAhC,CAAiDJ,GAAGG,UAApD,EAAiE1+C,SAAjE,CAA6E,CADlF,CACsF,CAErF,OAAO,OAAP,CAEA,CAEDA,UAAY,SAAZ,CAEA,CAED,GAAKA,YAAc,SAAnB,CAA+B,CAE9B,GAAKu+C,GAAGxa,wBAAH,CAA6Bwa,GAAGE,aAAhC,CAA+CF,GAAGK,YAAlD,EAAiE5+C,SAAjE,CAA6E,CAA7E,EACAu+C,GAAGxa,wBAAH,CAA6Bwa,GAAGI,eAAhC,CAAiDJ,GAAGK,YAApD,EAAmE5+C,SAAnE,CAA+E,CADpF,CACwF,CAEvF,OAAO,SAAP,CAEA,CAED,CAED,OAAO,MAAP,CAEA,CAED,KAAK6+C,eAAL,CAAuBA,eAAvB,CAEA,KAAK7+C,SAAL,CAAiBW,WAAWX,SAAX,GAAyBxnC,SAAzB,CAAqCmoC,WAAWX,SAAhD,CAA4D,OAA7E,CACA,KAAK6xC,sBAAL,CAA8BlxC,WAAWkxC,sBAAX,GAAsCr5E,SAAtC,CAAkDmoC,WAAWkxC,sBAA7D,CAAsF,KAApH,CAEA,KAAK+C,WAAL,CAAmB2J,GAAG3oE,YAAH,CAAiB2oE,GAAGO,uBAApB,CAAnB,CACA,KAAKC,iBAAL,CAAyBR,GAAG3oE,YAAH,CAAiB2oE,GAAGS,8BAApB,CAAzB,CACA,KAAK5I,cAAL,CAAsBmI,GAAG3oE,YAAH,CAAiB2oE,GAAGU,gBAApB,CAAtB,CACA,KAAKrH,cAAL,CAAsB2G,GAAG3oE,YAAH,CAAiB2oE,GAAGW,yBAApB,CAAtB,CAEA,KAAKC,aAAL,CAAqBZ,GAAG3oE,YAAH,CAAiB2oE,GAAGa,kBAApB,CAArB,CACA,KAAKC,iBAAL,CAAyBd,GAAG3oE,YAAH,CAAiB2oE,GAAGe,0BAApB,CAAzB,CACA,KAAKC,WAAL,CAAmBhB,GAAG3oE,YAAH,CAAiB2oE,GAAGiB,mBAApB,CAAnB,CACA,KAAKC,mBAAL,CAA2BlB,GAAG3oE,YAAH,CAAiB2oE,GAAGmB,4BAApB,CAA3B,CAEA,KAAKC,cAAL,CAAsB,KAAKZ,iBAAL,CAAyB,CAA/C,CACA,KAAKa,qBAAL,CAA6B,CAAC,CAAEnpB,WAAWv9D,GAAX,CAAgB,mBAAhB,CAAhC,CACA,KAAK+4E,mBAAL,CAA2B,KAAK0N,cAAL,EAAuB,KAAKC,qBAAvD,CAEA,kBAAoBf,gBAAiB,KAAK7+C,SAAtB,CAApB,CAEA,GAAK6/C,gBAAkB,KAAK7/C,SAA5B,CAAwC,CAEvCx8B,QAAQC,IAAR,CAAc,sBAAd,CAAsC,KAAKu8B,SAA3C,CAAsD,sBAAtD,CAA8E6/C,aAA9E,CAA6F,UAA7F,EACA,KAAK7/C,SAAL,CAAiB6/C,aAAjB,CAEA,CAED,GAAK,KAAKhO,sBAAV,CAAmC,CAElC,KAAKA,sBAAL,CAA8B,CAAC,CAAEpb,WAAWv9D,GAAX,CAAgB,gBAAhB,CAAjC,CAEA,CAED,CAlED;;;GA0EAb,MAAMynF,eAAN,CAAwB,SAAWvB,EAAX,CAAenf,UAAf,CAA2BuE,IAA3B,CAAkC,CAEzD,eAAiB,EAAjB,CAEA,YAAA,CAAc/sD,MAAd,CAAuB,CAEtB,aAAeA,OAAOI,QAAtB,CAEA,GAAKihB,WAAYjhB,SAASigB,EAArB,IAA8Bz+B,SAAnC,CAA+C,CAE9C,kBAAmBwe,SAASigB,EAArB,CAAP,CAEA,CAEDjgB,SAAS+a,gBAAT,CAA2B,SAA3B,CAAsCguD,iBAAtC,EAEA,kBAAA,CAEA,GAAK/oE,0BAA0BI,cAA/B,CAAgD,CAE/C4oE,eAAiBhpE,QAAjB,CAEA,CAJD,QAIYA,0BAA0BC,QAA/B,CAA0C,CAEhD,GAAKD,SAASipE,eAAT,GAA6BznF,SAAlC,CAA8C,CAE7Cwe,SAASipE,eAAT,CAA2B,UAAU7oE,cAAV,GAA2BT,aAA3B,CAA0CC,MAA1C,CAA3B,CAEA,CAEDopE,eAAiBhpE,SAASipE,eAA1B,CAEA,CAEDhoD,WAAYjhB,SAASigB,EAArB,EAA4B+oD,cAA5B,CAEArc,KAAKC,MAAL,CAAY3rC,UAAZ,GAEA,qBAAA,CAEA,CAED,0BAAA,CAA4BvF,KAA5B,CAAoC,CAEnC,aAAeA,MAAMp5B,MAArB,CACA,mBAAqB2+B,WAAYjhB,SAASigB,EAArB,CAArB,CAEA,GAAK+oD,eAAezmF,KAAf,GAAyB,IAA9B,CAAqC,CAEpC2mF,gBAAiBF,eAAezmF,KAAhC,EAEA,CAED4mF,iBAAkBH,eAAe3oE,UAAjC,EAEAL,SAASsb,mBAAT,CAA8B,SAA9B,CAAyCytD,iBAAzC,EAEA,kBAAmB/oE,SAASigB,EAArB,CAAP;CAIA,aAAemoC,WAAWlmE,GAAX,CAAgB8d,QAAhB,CAAf,CAEA,GAAKopE,SAASrxB,SAAd,CAA0B,CAEzBmxB,gBAAiBE,SAASrxB,SAA1B,EAEA,CAEDqQ,WAAW6I,MAAX,CAAmBjxD,QAAnB,EAEA,mBAAqBooD,WAAWlmE,GAAX,CAAgB8mF,cAAhB,CAArB,CAEA,GAAKK,eAAetxB,SAApB,CAAgC,CAE/BmxB,gBAAiBG,eAAetxB,SAAhC,EAEA,CAEDqQ,WAAW6I,MAAX,CAAmB+X,cAAnB;CAIArc,KAAKC,MAAL,CAAY3rC,UAAZ,GAEA,CAED,2BAAA,CAA6BzpB,SAA7B,CAAyC,CAExC,GAAKA,2BAA2B+sB,0BAAhC,CAA6D,CAE5D,kBAAkBriC,GAAX,CAAgBsV,UAAUsqB,IAA1B,EAAiCwnD,aAAxC,CAEA,CAED,kBAAkBpnF,GAAX,CAAgBsV,SAAhB,EAA4B8xE,aAAnC,CAEA,CAED,wBAAA,CAA0B9xE,SAA1B,CAAsC,CAErC,WAAa28D,mBAAoB38D,SAApB,CAAb,CAEA,GAAKuK,SAAWvgB,SAAhB,CAA4B,CAE3B+lF,GAAGgC,YAAH,CAAiBxnE,MAAjB,EACAynE,sBAAuBhyE,SAAvB,EAEA,CAED,CAED,yBAAA,CAA2B6I,UAA3B,CAAwC,CAEvC,IAAM,QAAN,cAAA,CAA+B,CAE9B6oE,gBAAiB7oE,WAAYte,IAAZ,CAAjB,EAEA,CAED,CAED,8BAAA,CAAgCyV,SAAhC,CAA4C,CAE3C,GAAKA,2BAA2B+sB,0BAAhC,CAA6D,CAE5D6jC,WAAW6I,MAAX,CAAmBz5D,UAAUsqB,IAA7B,EAEA,CAJD,IAIO,CAENsmC,WAAW6I,MAAX,CAAmBz5D,SAAnB,EAEA,CAED,CAED,KAAKtV,GAAL,CAAWA,GAAX,CAEA,CA1ID;;;GAkJAb,MAAMosE,WAAN,CAAoB,UAAY,CAE/B,WAAa,EAAb,CAEA,KAAKvrE,GAAL,CAAW,SAAWurD,KAAX,CAAmB,CAE7B,GAAKiP,OAAQjP,MAAMxtB,EAAd,IAAuBz+B,SAA5B,CAAwC,CAEvC,cAAeisD,MAAMxtB,EAAd,CAAP,CAEA,CAED,YAAA,CAEA,OAASwtB,MAAMzyB,IAAf,EAEC,IAAK,kBAAL,CACCu8B,SAAW,CACVntC,UAAW,UAAUhY,OAAV,EADD,CAEVxF,MAAO,UAAUhC,KAAV,EAFG,CAIV2iD,OAAQ,KAJE,CAKV2vB,WAAY,CALF,CAMVC,aAAc,CANJ,CAOVC,cAAe,UAAU3nE,OAAV,EAPL,CAAX,CASA,MAED,IAAK,WAAL,CACC8hD,SAAW,CACV3uC,SAAU,UAAUxW,OAAV,EADA,CAEVgY,UAAW,UAAUhY,OAAV,EAFD,CAGVxF,MAAO,UAAUhC,KAAV,EAHG,CAIVqS,SAAU,CAJA,CAKVogE,QAAS,CALC,CAMVC,YAAa,CANH,CAOVvwB,MAAO,CAPG,CASVQ,OAAQ,KATE,CAUV2vB,WAAY,CAVF,CAWVC,aAAc,CAXJ,CAYVC,cAAe,UAAU3nE,OAAV,EAZL,CAAX,CAcA,MAED,IAAK,YAAL,CACC8hD,SAAW,CACV3uC,SAAU,UAAUxW,OAAV,EADA,CAEVxF,MAAO,UAAUhC,KAAV,EAFG,CAGVqS,SAAU,CAHA,CAIV8vC,MAAO,CAJG,CAMVQ,OAAQ,KANE,CAOV2vB,WAAY,CAPF,CAQVC,aAAc,CARJ,CASVC,cAAe,UAAU3nE,OAAV,EATL,CAAX,CAWA,MAED,IAAK,iBAAL,CACC8hD,SAAW,CACVntC,UAAW,UAAUhY,OAAV,EADD,CAEVu7C,SAAU,UAAU/iD,KAAV,EAFA,CAGVkiD,YAAa,UAAUliD,KAAV,EAHH,CAAX,CAKA,MAnDF,CAuDA8xD,OAAQjP,MAAMxtB,EAAd,EAAqBs3B,QAArB,CAEA,eAAA,CAEA,CArED,CAuEA,CA3ED;;;GAmFAl2D,MAAMisE,YAAN,CAAqB,SAAWia,EAAX,CAAenf,UAAf,CAA2BuE,IAA3B,CAAkC,CAEtD,eAAiB,UAAUmc,eAAV,CAA2BvB,EAA3B,CAA+Bnf,UAA/B,CAA2CuE,IAA3C,CAAjB;CAIA,eAAA,CAAiB/sD,MAAjB,CAA0B;CAIzB,aAAeqhB,WAAW/+B,GAAX,CAAgB0d,MAAhB,CAAf,CAEA,GAAKA,OAAOI,QAAP,kBAAiCC,QAAtC,CAAiD,CAEhDD,SAASwsB,gBAAT,CAA2B5sB,MAA3B,EAEA,CAED,UAAYI,SAASzd,KAArB,CACA,eAAiByd,SAASK,UAA1B,CAEA,GAAK9d,QAAU,IAAf,CAAsB,CAErBknF,gBAAiBlnF,KAAjB,CAAwBglF,GAAGrT,oBAA3B,EAEA,CAED,IAAM,QAAN,cAAA,CAA+B,CAE9BuV,gBAAiBppE,WAAYte,IAAZ,CAAjB,CAAqCwlF,GAAGjV,YAAxC,EAEA;CAID,oBAAsBtyD,SAAS6rB,eAA/B,CAEA,IAAM,QAAN,mBAAA,CAAoC,CAEnC,UAAYA,gBAAiB9pC,IAAjB,CAAZ,CAEA,IAAM,MAAQ,CAAR,CAAWkK,EAAIoD,MAAM5M,MAA3B,CAAmCyb,EAAIjS,CAAvC,CAA0CiS,GAA1C,CAAiD,CAEhDurE,gBAAiBp6E,MAAO6O,CAAP,CAAjB,CAA6BqpE,GAAGjV,YAAhC,EAEA,CAED,CAED,eAAA,CAEA,CAED,wBAAA,CAA0B96D,SAA1B,CAAqCitC,UAArC,CAAkD,CAEjD,SAAajtC,2BAA2B+sB,0BAA7B,CAA4D/sB,UAAUsqB,IAAtE,CAA6EtqB,SAAxF,CAEA,wBAA0B4wD,WAAWlmE,GAAX,CAAgB4/B,IAAhB,CAA1B,CAEA,GAAK4nD,oBAAoBJ,aAApB,GAAsC9nF,SAA3C,CAAuD,CAEtDwwE,aAAc0X,mBAAd,CAAmC5nD,IAAnC,CAAyC2iB,UAAzC,EAEA,CAJD,QAIYilC,oBAAoBpoD,OAApB,GAAgCQ,KAAKR,OAA1C,CAAoD,CAE1DqoD,aAAcD,mBAAd,CAAmC5nD,IAAnC,CAAyC2iB,UAAzC,EAEA,CAED,CAED,qBAAA,CAAuBilC,mBAAvB,CAA4C5nD,IAA5C,CAAkD2iB,UAAlD,CAA+D,CAE9DilC,oBAAoBJ,aAApB,CAAoC/B,GAAGvV,YAAH,EAApC,CACAuV,GAAGlV,UAAH,CAAe5tB,UAAf,CAA2BilC,oBAAoBJ,aAA/C,EAEA,UAAYxnD,KAAKQ,OAAL,CAAeilD,GAAG9U,YAAlB,CAAiC8U,GAAGqC,WAAhD,CAEArC,GAAGhV,UAAH,CAAe9tB,UAAf,CAA2B3iB,KAAKzyB,KAAhC,CAAuCw6E,KAAvC,EAEAH,oBAAoBpoD,OAApB,CAA8BQ,KAAKR,OAAnC,CAEA,CAED,qBAAA,CAAuBooD,mBAAvB,CAA4C5nD,IAA5C,CAAkD2iB,UAAlD,CAA+D,CAE9D8iC,GAAGlV,UAAH,CAAe5tB,UAAf,CAA2BilC,oBAAoBJ,aAA/C,EAEA,GAAKxnD,KAAKQ,OAAL,GAAiB,KAAjB,EAA0BR,KAAKS,WAAL,CAAiBC,KAAjB,GAA2B,CAAE,CAA5D,CAAgE;CAI/D+kD,GAAGuC,aAAH,CAAkBrlC,UAAlB,CAA8B,CAA9B,CAAiC3iB,KAAKzyB,KAAtC,EAEA,CAND,QAMYyyB,KAAKS,WAAL,CAAiBC,KAAjB,GAA2B,CAAhC,CAAoC,CAE1Ch2B,QAAQuL,KAAR,CAAe,yKAAf,EAEA,CAJM,IAIA,CAENwvE,GAAGuC,aAAH,CAAkBrlC,UAAlB,CAA8B3iB,KAAKS,WAAL,CAAiBjzB,MAAjB,CAA0BwyB,KAAKzyB,KAAL,CAAW2vC,iBAAnE,CACMld,KAAKzyB,KAAL,CAAWwvC,QAAX,CAAqB/c,KAAKS,WAAL,CAAiBjzB,MAAtC,CAA8CwyB,KAAKS,WAAL,CAAiBjzB,MAAjB,CAA0BwyB,KAAKS,WAAL,CAAiBC,KAAzF,CADN,EAGAV,KAAKS,WAAL,CAAiBC,KAAjB,CAAyB,CAAzB;CAEA,CAEDknD,oBAAoBpoD,OAApB,CAA8BQ,KAAKR,OAAnC,CAEA,CAED,2BAAA,CAA6B9pB,SAA7B,CAAyC,CAExC,GAAKA,2BAA2B+sB,0BAAhC,CAA6D,CAE5D,kBAAkBriC,GAAX,CAAgBsV,UAAUsqB,IAA1B,EAAiCwnD,aAAxC,CAEA,CAED,kBAAkBpnF,GAAX,CAAgBsV,SAAhB,EAA4B8xE,aAAnC,CAEA,CAED,8BAAA,CAAgCtpE,QAAhC,CAA2C,CAE1C,aAAeooD,WAAWlmE,GAAX,CAAgB8d,QAAhB,CAAf,CAEA,GAAKopE,SAASrxB,SAAT,GAAuBv2D,SAA5B,CAAwC,CAEvC,gBAAgBu2D,SAAhB,CAEA,CAED,YAAc,EAAd,CAEA,UAAY/3C,SAASzd,KAArB,CACA,eAAiByd,SAASK,UAA1B,CACA,aAAeA,WAAWuI,QAA1B;CAIA,GAAKrmB,QAAU,IAAf,CAAsB,CAErB,UAAY,EAAZ,CACA,UAAYA,MAAM8M,KAAlB,CAEA,IAAM,MAAQ,CAAR,CAAWpD,EAAIoD,MAAM5M,MAA3B,CAAmCyb,EAAIjS,CAAvC,CAA0CiS,GAAK,CAA/C,CAAmD,CAElD,MAAQ7O,MAAO6O,EAAI,CAAX,CAAR,CACA,MAAQ7O,MAAO6O,EAAI,CAAX,CAAR,CACA,MAAQ7O,MAAO6O,EAAI,CAAX,CAAR,CAEA,GAAK6rE,UAAWC,KAAX,CAAkBh3E,CAAlB,CAAqBjI,CAArB,CAAL,CAAgCk4B,QAAQ/N,IAAR,CAAcliB,CAAd,CAAiBjI,CAAjB,EAChC,GAAKg/E,UAAWC,KAAX,CAAkBj/E,CAAlB,CAAqBoE,CAArB,CAAL,CAAgC8zB,QAAQ/N,IAAR,CAAcnqB,CAAd,CAAiBoE,CAAjB,EAChC,GAAK46E,UAAWC,KAAX,CAAkB76E,CAAlB,CAAqB6D,CAArB,CAAL,CAAgCiwB,QAAQ/N,IAAR,CAAc/lB,CAAd,CAAiB6D,CAAjB,EAEhC,CAED,CAjBD,IAiBO,CAEN,UAAYqN,WAAWuI,QAAX,CAAoBvZ,KAAhC,CAEA,IAAM,MAAQ,CAAR,CAAWpD,EAAMoD,MAAM5M,MAAN,CAAe,CAAjB,CAAuB,CAA5C,CAA+Cyb,EAAIjS,CAAnD,CAAsDiS,GAAK,CAA3D,CAA+D,CAE9D,MAAQA,EAAI,CAAZ,CACA,MAAQA,EAAI,CAAZ,CACA,MAAQA,EAAI,CAAZ,CAEA+kB,QAAQ/N,IAAR,CAAcliB,CAAd,CAAiBjI,CAAjB,CAAoBA,CAApB,CAAuBoE,CAAvB,CAA0BA,CAA1B,CAA6B6D,CAA7B,EAEA,CAED;CAID,cAAgB4V,SAAS4Z,KAAT,CAAiB,KAAjB,CAAyBqK,WAAzB,CAAuCC,WAAvD,CACA,cAAgB,UAAU1K,eAAV,CAA2B,aAAA,CAAea,OAAf,CAA3B,CAAqD,CAArD,CAAhB,CAEAwmD,gBAAiBjyE,SAAjB,CAA4B+vE,GAAGrT,oBAA/B,EAEAkV,SAASrxB,SAAT,CAAqBvgD,SAArB,CAEA,gBAAA,CAEA,CAED,kBAAA,CAAoBwyE,KAApB,CAA2Bh3E,CAA3B,CAA8BjI,CAA9B,CAAkC,CAEjC,GAAKiI,EAAIjI,CAAT,CAAa,CAEZ,QAAUiI,CAAV,CACAA,EAAIjI,CAAJ,CACAA,EAAI8X,GAAJ,CAEA,CAED,SAAWmnE,MAAOh3E,CAAP,CAAX,CAEA,GAAKi3E,OAASzoF,SAAd,CAA0B,CAEzBwoF,MAAOh3E,CAAP,EAAa,CAAEjI,CAAF,CAAb,CACA,WAAA,CAEA,CALD,QAKYk/E,KAAK7uD,OAAL,CAAcrwB,CAAd,IAAsB,CAAC,CAA5B,CAAgC,CAEtCk/E,KAAK/0D,IAAL,CAAWnqB,CAAX,EACA,WAAA,CAEA,CAED,YAAA,CAEA,CAED,KAAKopE,kBAAL,CAA0BA,kBAA1B,CACA,KAAKL,qBAAL,CAA6BA,qBAA7B,CAEA,KAAK1jE,MAAL,CAAcA,MAAd,CAEA,CA5ND;CAgOA/O,MAAM6oF,YAAN,CAAuB,UAAY,CAElC,mBAAqB,CAArB,CAEA,8BAAA,CAAgC5pB,QAAhC,CAA2C,CAE1C,OAASA,QAAT,EAEC,WAAWp2D,cAAX,CACC,OAAO,CAAE,QAAF,CAAW,WAAX,CAAP,CACD,WAAWC,YAAX,CACC,OAAO,CAAE,MAAF,CAAS,WAAT,CAAP,CACD,WAAWE,YAAX,CACC,OAAO,CAAE,MAAF,CAAS,WAAT,CAAP,CACD,WAAWE,aAAX,CACC,OAAO,CAAE,MAAF,CAAS,gBAAT,CAAP,CACD,WAAWC,cAAX,CACC,OAAO,CAAE,MAAF,CAAS,iBAAT,CAAP,CACD,WAAWC,YAAX,CACC,OAAO,CAAE,MAAF,CAAS,kBAAT,CAAP,CACD,WAAWL,aAAX,CACC,OAAO,CAAE,OAAF,CAAU,kCAAV,CAAP,CACD,QACC,eAAM,CAAW,yBAA2Bk2D,QAAtC,CAAN,CAjBF,CAqBA,CAED,iCAAA,CAAmC6pB,YAAnC,CAAiD7pB,QAAjD,CAA4D,CAE3D,eAAiB8pB,sBAAuB9pB,QAAvB,CAAjB,CACA,OAAO,QAAU6pB,YAAV,CAAyB,0BAAzB,CAAsDt9E,WAAY,CAAZ,CAAtD,CAAwE,UAAxE,CAAqFA,WAAY,CAAZ,CAArF,CAAuG,KAA9G,CAEA,CAED,iCAAA,CAAmCs9E,YAAnC,CAAiD7pB,QAAjD,CAA4D,CAE3D,eAAiB8pB,sBAAuB9pB,QAAvB,CAAjB,CACA,OAAO,QAAU6pB,YAAV,CAAyB,kCAAzB,CAA8Dt9E,WAAY,CAAZ,CAA9D,CAAgFA,WAAY,CAAZ,CAAhF,CAAkG,KAAzG,CAEA,CAED,+BAAA,CAAiCs9E,YAAjC,CAA+CvgB,WAA/C,CAA6D,CAE5D,mBAAA,CAEA,OAASA,WAAT,EAEC,WAAWtjE,iBAAX,CACC+jF,gBAAkB,QAAlB,CACA,MAED,WAAW9jF,mBAAX,CACC8jF,gBAAkB,UAAlB,CACA,MAED,WAAW7jF,qBAAX,CACC6jF,gBAAkB,YAAlB,CACA,MAED,WAAW5jF,iBAAX,CACC4jF,gBAAkB,iBAAlB,CACA,MAED,QACC,eAAM,CAAW,4BAA8BzgB,WAAzC,CAAN,CAnBF,CAuBA,OAAO,QAAUugB,YAAV,CAAyB,0BAAzB,CAAsDE,eAAtD,CAAwE,yBAA/E,CAEA,CAED,2BAAA,CAA6B5qB,UAA7B,CAAyC91B,UAAzC,CAAqD2gD,kBAArD,CAA0E,CAEzE7qB,WAAaA,YAAc,EAA3B,CAEA,WAAa,CACVA,WAAWC,WAAX,EAA0B/1B,WAAW4gD,YAArC,EAAqD5gD,WAAW6nB,OAAhE,EAA2E7nB,WAAWmoB,SAAtF,EAAmGnoB,WAAW6gD,WAAhH,CAAgI,iDAAhI,CAAoL,EADxK,CAEZ,CAAE/qB,WAAWE,SAAX,EAAwBh2B,WAAWkxC,sBAArC,GAAiEyP,mBAAmBpoF,GAAnB,CAAwB,gBAAxB,CAAjE,CAA8G,uCAA9G,CAAwJ,EAF5I,CAGVu9D,WAAWG,WAAb,EAA8B0qB,mBAAmBpoF,GAAnB,CAAwB,oBAAxB,CAA9B,CAA+E,0CAA/E,CAA4H,EAHhH,CAIZ,CAAEu9D,WAAWI,gBAAX,EAA+Bl2B,WAAW8uB,MAA5C,GAAwD6xB,mBAAmBpoF,GAAnB,CAAwB,wBAAxB,CAAxD,CAA6G,+CAA7G,CAA+J,EAJnJ,CAAb,CAOA,cAAc0kD,MAAP,CAAe6jC,eAAf,EAAiCh5D,IAAjC,CAAuC,IAAvC,CAAP,CAEA,CAED,wBAAA,CAA0BytC,OAA1B,CAAoC,CAEnC,WAAa,EAAb,CAEA,IAAM,QAAN,WAAA,CAA4B,CAE3B,UAAYA,QAASn9D,IAAT,CAAZ,CAEA,GAAKoJ,QAAU,KAAf,CAAuB,SAEvBqpB,OAAOU,IAAP,CAAa,WAAanzB,IAAb,CAAoB,GAApB,CAA0BoJ,KAAvC,EAEA,CAED,cAAcsmB,IAAP,CAAa,IAAb,CAAP,CAEA,CAED,gCAAA,CAAkC81D,EAAlC,CAAsC9V,OAAtC,CAA+CiZ,WAA/C,CAA6D,CAE5D,eAAiB,EAAjB,CAEA,MAAQnD,GAAGoD,mBAAH,CAAwBlZ,OAAxB,CAAiC8V,GAAGqD,iBAApC,CAAR,CAEA,IAAM,MAAQ,CAAd,CAAiB1sE,EAAIuH,CAArB,CAAwBvH,GAAxB,CAA+B,CAE9B,SAAWqpE,GAAGsD,eAAH,CAAoBpZ,OAApB,CAA6BvzD,CAA7B,CAAX,CACA,SAAWyuD,KAAK5qE,IAAhB;CAIAse,WAAYte,IAAZ,EAAqBwlF,GAAGuD,iBAAH,CAAsBrZ,OAAtB,CAA+B1vE,IAA/B,CAArB,CAEA,CAED,iBAAA,CAEA,CAED,wBAAA,CAA0BuK,MAA1B,CAAmC,CAElC,gBAAkB,EAAlB,CAEA,CAED,yBAAA,CAA2BA,MAA3B,CAAmCq9B,UAAnC,CAAgD,CAE/C,cACEohD,OADK,CACI,iBADJ,CACuBphD,WAAWqhD,YADlC,EAELD,OAFK,CAEI,kBAFJ,CAEwBphD,WAAWshD,aAFnC,EAGLF,OAHK,CAGI,mBAHJ,CAGyBphD,WAAWuhD,cAHpC,EAILH,OAJK,CAII,kBAJJ,CAIwBphD,WAAWwhD,aAJnC,CAAP,CAMA,CAED,sBAAA,CAAwB7+E,MAAxB,CAAiC,CAEhC,YAAc,yBAAd,CAEA,gBAAA,CAAkBlK,KAAlB,CAAyBgpF,OAAzB,CAAmC,CAElC,YAAc/pF,MAAMg/D,WAAN,CAAmB+qB,OAAnB,CAAd,CAEA,GAAKL,UAAYvpF,SAAjB,CAA6B,CAE5B,eAAM,CAAW,6BAA+B4pF,OAA/B,CAAyC,GAApD,CAAN,CAEA,CAED,qBAAsBL,OAAf,CAAP,CAEA,CAED,cAAcA,OAAP,CAAgBh1C,OAAhB,CAAyBg1C,OAAzB,CAAP,CAEA,CAED,oBAAA,CAAsBz+E,MAAtB,CAA+B,CAE9B,YAAc,qEAAd,CAEA,gBAAA,CAAkBlK,KAAlB,CAAyBya,KAAzB,CAAgCC,GAAhC,CAAqCuuE,OAArC,CAA+C,CAE9C,WAAa,EAAb,CAEA,IAAM,MAAQt+E,SAAU8P,KAAV,CAAd,CAAiCqB,EAAInR,SAAU+P,GAAV,CAArC,CAAsDoB,GAAtD,CAA6D,CAE5DotE,QAAUD,QAAQN,OAAR,CAAiB,UAAjB,CAA6B,KAAO7sE,CAAP,CAAW,IAAxC,CAAV,CAEA,CAED,aAAA,CAEA,CAED,cAAc6sE,OAAP,CAAgBh1C,OAAhB,CAAyBg1C,OAAzB,CAAP,CAEA,CAED,4BAAO,CAAuB1gC,QAAvB,CAAiCouB,IAAjC,CAAuC/2C,QAAvC,CAAiDiI,UAAjD,CAA8D,CAEpE,OAAS0gB,SAASnF,OAAlB,CAEA,eAAiBxjB,SAAS+9B,UAA1B,CACA,YAAc/9B,SAASw9B,OAAvB,CAEA,iBAAmBx9B,SAASk3C,aAAT,CAAuBphB,YAA1C,CACA,mBAAqB91B,SAASk3C,aAAT,CAAuBnhB,cAA5C,CAEA,wBAA0B,sBAA1B,CAEA,GAAK9tB,WAAW4hD,aAAX,GAA6BlqF,MAAMqC,YAAxC,CAAuD,CAEtD8nF,oBAAsB,oBAAtB,CAEA,CAJD,QAIY7hD,WAAW4hD,aAAX,GAA6BlqF,MAAMsC,gBAAxC,CAA2D,CAEjE6nF,oBAAsB,yBAAtB,CAEA,CAED,qBAAuB,kBAAvB,CACA,qBAAuB,wBAAvB,CACA,yBAA2B,0BAA3B,CAEA,GAAK7hD,WAAW8uB,MAAhB,CAAyB,CAExB,OAAS/2B,SAAS+2B,MAAT,CAAgBqC,OAAzB,EAEC,WAAWn0D,qBAAX,CACA,WAAWC,qBAAX,CACC6kF,iBAAmB,kBAAnB,CACA,MAED,WAAWzkF,uBAAX,CACA,WAAWC,uBAAX,CACCwkF,iBAAmB,qBAAnB,CACA,MAED,WAAW5kF,gCAAX,CACA,WAAWC,gCAAX,CACC2kF,iBAAmB,qBAAnB,CACA,MAED,WAAW1kF,0BAAX,CACC0kF,iBAAmB,oBAAnB,CACA,MAnBF,CAuBA,OAAS/pD,SAAS+2B,MAAT,CAAgBqC,OAAzB,EAEC,WAAWl0D,qBAAX,CACA,WAAWE,gCAAX,CACC4kF,iBAAmB,wBAAnB,CACA,MALF,CASA,OAAShqD,SAASg3B,OAAlB,EAEC,WAAWxyD,iBAAX,CACCylF,qBAAuB,0BAAvB,CACA,MAED,WAAWxlF,YAAX,CACCwlF,qBAAuB,qBAAvB,CACA,MAED,WAAWvlF,YAAX,CACCulF,qBAAuB,qBAAvB,CACA,MAZF,CAgBA,CAED,sBAA0BthC,SAAS/8C,WAAT,CAAuB,CAAzB,CAA+B+8C,SAAS/8C,WAAxC,CAAsD,GAA9E;;CAMA,qBAAuBs+E,mBAAoBnsB,UAApB,CAAgC91B,UAAhC,CAA4C0gB,SAASoV,UAArD,CAAvB,CAEA,kBAAoBosB,gBAAiB3sB,OAAjB,CAApB;CAIA,YAAcqoB,GAAGuE,aAAH,EAAd,CAEA,gBAAA,CAAkBC,cAAlB,CAEA,GAAKrqD,0BAA0Bu+B,iBAA/B,CAAmD,CAElD+rB,aAAe,EAAf,CACAD,eAAiB,EAAjB,CAEA,CALD,IAKO,CAENC,aAAe,CAEd,aAAeriD,WAAWX,SAA1B,CAAsC,SAFxB,CAGd,aAAeW,WAAWX,SAA1B,CAAsC,OAHxB,CAKd,uBAAyBtH,SAASk3C,aAAT,CAAuB72E,IALlC,CAOdkqF,aAPc,CASdtiD,WAAWuiD,sBAAX,CAAoC,yBAApC,CAAgE,EATlD,CAWd,wBAA0BC,iBAXZ,CAad,qBAAuBxiD,WAAWyiD,QAbpB,CAedziD,WAAWyjB,GAAX,CAAiB,iBAAjB,CAAqC,EAfvB,CAgBdzjB,WAAW8uB,MAAX,CAAoB,oBAApB,CAA2C,EAhB7B,CAiBd9uB,WAAW8uB,MAAX,CAAoB,WAAaizB,gBAAjC,CAAoD,EAjBtC,CAkBd/hD,WAAWmnB,QAAX,CAAsB,sBAAtB,CAA+C,EAlBjC,CAmBdnnB,WAAWwnB,KAAX,CAAmB,mBAAnB,CAAyC,EAnB3B,CAoBdxnB,WAAW4uB,WAAX,CAAyB,yBAAzB,CAAqD,EApBvC,CAqBd5uB,WAAW6nB,OAAX,CAAqB,qBAArB,CAA6C,EArB/B,CAsBd7nB,WAAWmoB,SAAX,CAAuB,uBAAvB,CAAiD,EAtBnC,CAuBdnoB,WAAWuuB,eAAX,EAA8BvuB,WAAWuiD,sBAAzC,CAAkE,6BAAlE,CAAkG,EAvBpF,CAwBdviD,WAAWyoB,WAAX,CAAyB,yBAAzB,CAAqD,EAxBvC,CAyBdzoB,WAAW0uB,YAAX,CAA0B,0BAA1B,CAAuD,EAzBzC,CA0Bd1uB,WAAW2uB,YAAX,CAA0B,0BAA1B,CAAuD,EA1BzC,CA2Bd3uB,WAAW8oB,QAAX,CAAsB,sBAAtB,CAA+C,EA3BjC,CA4Bd9oB,WAAWxH,YAAX,CAA0B,mBAA1B,CAAgD,EA5BlC,CA8BdwH,WAAW6gD,WAAX,CAAyB,qBAAzB,CAAiD,EA9BnC,CAgCd7gD,WAAWg1B,QAAX,CAAsB,sBAAtB,CAA+C,EAhCjC,CAiCdh1B,WAAWs7B,gBAAX,CAA8B,sBAA9B,CAAuD,EAjCzC,CAmCdt7B,WAAW/E,YAAX,CAA0B,0BAA1B,CAAuD,EAnCzC,CAoCd+E,WAAW9E,YAAX,EAA2B8E,WAAW6gD,WAAX,GAA2B,KAAtD,CAA8D,0BAA9D,CAA2F,EApC7E,CAqCd7gD,WAAW0iD,WAAX,CAAyB,sBAAzB,CAAkD,EArCpC,CAsCd1iD,WAAW2iD,SAAX,CAAuB,oBAAvB,CAA8C,EAtChC,CAwCd,+BAAiC3iD,WAAWsvC,iBAxC9B,CA0CdtvC,WAAW4iD,gBAAX,CAA8B,uBAA9B,CAAwD,EA1C1C,CA2Cd5iD,WAAW4iD,gBAAX,CAA8B,WAAaf,mBAA3C,CAAiE,EA3CnD,CA6Cd7hD,WAAWsuB,eAAX,CAA6B,6BAA7B,CAA6D,EA7C/C,CA+CdtuB,WAAWkxC,sBAAX,CAAoC,yBAApC,CAAgE,EA/ClD,CAgDdlxC,WAAWkxC,sBAAX,EAAqCxwB,SAASoV,UAAT,CAAoBv9D,GAApB,CAAyB,gBAAzB,CAArC,CAAmF,6BAAnF,CAAmH,EAhDrG,CAkDd,2BAlDc,CAmDd,+BAnDc,CAoDd,gCApDc,CAqDd,0BArDc,CAsDd,4BAtDc,CAuDd,8BAvDc,CAyDd,0BAzDc,CA0Dd,wBA1Dc,CA2Dd,oBA3Dc,CA6Dd,kBA7Dc,CA+Dd,wBA/Dc,CAiEd,QAjEc,CAmEd,yBAnEc,CAqEd,+BArEc,CAsEd,+BAtEc,CAuEd,+BAvEc,CAwEd,+BAxEc,CA0Ed,0BA1Ec,CA4Ed,gCA5Ec,CA6Ed,gCA7Ec,CA8Ed,gCA9Ec,CA+Ed,gCA/Ec,CAiFd,QAjFc,CAmFd,gCAnFc,CAoFd,gCApFc,CAqFd,gCArFc,CAsFd,gCAtFc,CAwFd,SAxFc,CA0Fd,QA1Fc,CA4Fd,qBA5Fc,CA8Fd,4BA9Fc,CA+Fd,6BA/Fc,CAiGd,QAjGc,CAmGd,IAnGc,EAqGb0kD,MArGa,CAqGL6jC,eArGK,EAqGah5D,IArGb,CAqGmB,IArGnB,CAAf,CAuGAs6D,eAAiB,CAEhBS,gBAFgB,CAIhB,aAAe7iD,WAAWX,SAA1B,CAAsC,SAJtB,CAKhB,aAAeW,WAAWX,SAA1B,CAAsC,OALtB,CAOhB,uBAAyBtH,SAASk3C,aAAT,CAAuB72E,IAPhC,CAShBkqF,aATgB,CAWhBtiD,WAAWguB,SAAX,CAAuB,qBAAuBhuB,WAAWguB,SAAzD,CAAqE,EAXrD,CAahB,wBAA0Bw0B,iBAbV,CAedxiD,WAAW8iD,MAAX,EAAqB9iD,WAAW8yB,GAAlC,CAA0C,iBAA1C,CAA8D,EAf9C,CAgBd9yB,WAAW8iD,MAAX,EAAqB9iD,WAAW+iD,MAAlC,CAA6C,kBAA7C,CAAkE,EAhBlD,CAkBhB/iD,WAAWyjB,GAAX,CAAiB,iBAAjB,CAAqC,EAlBrB,CAmBhBzjB,WAAW8uB,MAAX,CAAoB,oBAApB,CAA2C,EAnB3B,CAoBhB9uB,WAAW8uB,MAAX,CAAoB,WAAagzB,gBAAjC,CAAoD,EApBpC,CAqBhB9hD,WAAW8uB,MAAX,CAAoB,WAAaizB,gBAAjC,CAAoD,EArBpC,CAsBhB/hD,WAAW8uB,MAAX,CAAoB,WAAakzB,oBAAjC,CAAwD,EAtBxC,CAuBhBhiD,WAAWmnB,QAAX,CAAsB,sBAAtB,CAA+C,EAvB/B,CAwBhBnnB,WAAWwnB,KAAX,CAAmB,mBAAnB,CAAyC,EAxBzB,CAyBhBxnB,WAAW4uB,WAAX,CAAyB,yBAAzB,CAAqD,EAzBrC,CA0BhB5uB,WAAW6nB,OAAX,CAAqB,qBAArB,CAA6C,EA1B7B,CA2BhB7nB,WAAWmoB,SAAX,CAAuB,uBAAvB,CAAiD,EA3BjC,CA4BhBnoB,WAAWyoB,WAAX,CAAyB,yBAAzB,CAAqD,EA5BrC,CA6BhBzoB,WAAW0uB,YAAX,CAA0B,0BAA1B,CAAuD,EA7BvC,CA8BhB1uB,WAAW2uB,YAAX,CAA0B,0BAA1B,CAAuD,EA9BvC,CA+BhB3uB,WAAW8oB,QAAX,CAAsB,sBAAtB,CAA+C,EA/B/B,CAgChB9oB,WAAWxH,YAAX,CAA0B,mBAA1B,CAAgD,EAhChC,CAkChBwH,WAAW6gD,WAAX,CAAyB,qBAAzB,CAAiD,EAlCjC,CAoChB7gD,WAAW0iD,WAAX,CAAyB,sBAAzB,CAAkD,EApClC,CAqChB1iD,WAAW2iD,SAAX,CAAuB,oBAAvB,CAA8C,EArC9B,CAuChB,+BAAiC3iD,WAAWsvC,iBAvC5B,CAyChBtvC,WAAW4iD,gBAAX,CAA8B,uBAA9B,CAAwD,EAzCxC,CA0ChB5iD,WAAW4iD,gBAAX,CAA8B,WAAaf,mBAA3C,CAAiE,EA1CjD,CA4ChB7hD,WAAW4zB,kBAAX,CAAgC,6BAAhC,CAAgE,EA5ChD,CA8ChB5zB,WAAWggC,uBAAX,CAAqC,mCAArC,CAA2E,EA9C3D,CAgDhBhgC,WAAWkxC,sBAAX,CAAoC,yBAApC,CAAgE,EAhDhD,CAiDhBlxC,WAAWkxC,sBAAX,EAAqCxwB,SAASoV,UAAT,CAAoBv9D,GAApB,CAAyB,gBAAzB,CAArC,CAAmF,6BAAnF,CAAmH,EAjDnG,CAmDhBynC,WAAW8uB,MAAX,EAAqBpO,SAASoV,UAAT,CAAoBv9D,GAApB,CAAyB,wBAAzB,CAArB,CAA2E,yBAA3E,CAAuG,EAnDvF,CAqDhB,0BArDgB,CAsDhB,8BAtDgB,CAwDdynC,WAAWigC,WAAX,GAA2BvoE,MAAMgF,aAAnC,CAAqD,sBAArD,CAA8E,EAxD9D,CAyDdsjC,WAAWigC,WAAX,GAA2BvoE,MAAMgF,aAAnC,CAAqDhF,MAAMg/D,WAAN,CAAmB,2BAAnB,CAArD,CAAwG,EAzDxF;CA0Dd12B,WAAWigC,WAAX,GAA2BvoE,MAAMgF,aAAnC,CAAqDsmF,uBAAwB,aAAxB,CAAuChjD,WAAWigC,WAAlD,CAArD,CAAuH,EA1DvG,CA4DdjgC,WAAWijD,cAAX,EAA6BjjD,WAAWkjD,WAAxC,EAAuDljD,WAAWmjD,cAAlE,EAAoFnjD,WAAWojD,mBAAjG,CAAyH1rF,MAAMg/D,WAAN,CAAmB,yBAAnB,CAAzH,CAA0K,EA5D1J;CA6DhB12B,WAAWkjD,WAAX,CAAyBG,yBAA0B,kBAA1B,CAA8CrjD,WAAWkjD,WAAzD,CAAzB,CAAkG,EA7DlF,CA8DhBljD,WAAWmjD,cAAX,CAA4BE,yBAA0B,qBAA1B,CAAiDrjD,WAAWmjD,cAA5D,CAA5B,CAA2G,EA9D3F,CA+DhBnjD,WAAWojD,mBAAX,CAAiCC,yBAA0B,0BAA1B,CAAsDrjD,WAAWojD,mBAAjE,CAAjC,CAA0H,EA/D1G,CAgEhBpjD,WAAWijD,cAAX,CAA4BK,yBAA0B,qBAA1B,CAAiDtjD,WAAWijD,cAA5D,CAA5B,CAA2G,EAhE3F,CAkEhBjjD,WAAWk1B,YAAX,CAA0B,yBAA2Bn9B,SAASm9B,YAA9D,CAA6E,EAlE7D,CAoEhB,IApEgB,EAsEfjY,MAtEe,CAsEP6jC,eAtEO,EAsEWh5D,IAtEX,CAsEiB,IAtEjB,CAAjB,CAwEA,CAED+lC,aAAe01B,cAAe11B,YAAf,CAA6B7tB,UAA7B,CAAf,CACA6tB,aAAe21B,iBAAkB31B,YAAlB,CAAgC7tB,UAAhC,CAAf,CAEA8tB,eAAiBy1B,cAAez1B,cAAf,CAA+B9tB,UAA/B,CAAjB,CACA8tB,eAAiB01B,iBAAkB11B,cAAlB,CAAkC9tB,UAAlC,CAAjB,CAEA,GAAKjI,0BAA0B69B,cAA1B,GAA6C,KAAlD,CAA0D,CAEzD/H,aAAe41B,YAAa51B,YAAb,CAAf,CACAC,eAAiB21B,YAAa31B,cAAb,CAAjB,CAEA,CAED,eAAiBu0B,aAAex0B,YAAhC,CACA,iBAAmBu0B,eAAiBt0B,cAApC;;CAKA,mBAAqBp2D,MAAMgsF,WAAN,CAAmB9F,EAAnB,CAAuBA,GAAGE,aAA1B,CAAyC6F,UAAzC,CAArB,CACA,qBAAuBjsF,MAAMgsF,WAAN,CAAmB9F,EAAnB,CAAuBA,GAAGI,eAA1B,CAA2C4F,YAA3C,CAAvB,CAEAhG,GAAGiG,YAAH,CAAiB/b,OAAjB,CAA0Bgc,cAA1B,EACAlG,GAAGiG,YAAH,CAAiB/b,OAAjB,CAA0Bic,gBAA1B;CAIA,GAAKhsD,SAASq+B,mBAAT,GAAiCv+D,SAAtC,CAAkD,CAEjD+lF,GAAGoG,kBAAH,CAAuBlc,OAAvB,CAAgC,CAAhC,CAAmC/vC,SAASq+B,mBAA5C,EAEA,CAJD,QAIYp2B,WAAW/E,YAAX,GAA4B,IAAjC,CAAwC;CAG9C2iD,GAAGoG,kBAAH,CAAuBlc,OAAvB,CAAgC,CAAhC,CAAmC,UAAnC,EAEA,CAED8V,GAAGqG,WAAH,CAAgBnc,OAAhB,EAEA,eAAiB8V,GAAGsG,iBAAH,CAAsBpc,OAAtB,CAAjB,CACA,cAAgB8V,GAAGuG,gBAAH,CAAqBL,cAArB,CAAhB,CACA,gBAAkBlG,GAAGuG,gBAAH,CAAqBJ,gBAArB,CAAlB,CAEA,aAAe,IAAf,CACA,oBAAsB,IAAtB;;CAKA,GAAKnG,GAAGoD,mBAAH,CAAwBlZ,OAAxB,CAAiC8V,GAAGwG,WAApC,IAAsD,KAA3D,CAAmE,CAElEC,SAAW,KAAX,CAEAxhF,QAAQuL,KAAR,CAAe,oCAAf,CAAqDwvE,GAAG0G,QAAH,EAArD,CAAoE,oBAApE,CAA0F1G,GAAGoD,mBAAH,CAAwBlZ,OAAxB,CAAiC8V,GAAG2G,eAApC,CAA1F,CAAiJ,sBAAjJ,CAAyKC,UAAzK,CAAqLC,SAArL,CAAgMC,WAAhM,EAEA,CAND,QAMYF,aAAe,EAApB,CAAyB,CAE/B3hF,QAAQC,IAAR,CAAc,4CAAd,CAA4D0hF,UAA5D,EAEA,CAJM,QAIKC,YAAc,EAAd,EAAoBC,cAAgB,EAAzC,CAA8C,CAEpDC,gBAAkB,KAAlB,CAEA,CAED,GAAKA,eAAL,CAAuB,CAEtB,KAAKC,WAAL,CAAmB,CAElBP,SAAUA,QAFQ,CAGlBtsD,SAAUA,QAHQ,CAKlBysD,WAAYA,UALM,CAOlB32B,aAAc,CAEb3kC,IAAKu7D,SAFQ,CAGbI,OAAQxC,YAHK,CAPI,CAclBv0B,eAAgB,CAEf5kC,IAAKw7D,WAFU,CAGfG,OAAQzC,cAHO,CAdE,CAAnB,CAuBA;CAIDxE,GAAGkH,YAAH,CAAiBhB,cAAjB,EACAlG,GAAGkH,YAAH,CAAiBf,gBAAjB;CAIA,kBAAA,CAEA,KAAK7Z,WAAL,CAAmB,UAAW,CAE7B,GAAK6a,iBAAmBltF,SAAxB,CAAoC,CAEnCktF,eACE,UAAUhV,aAAV,CAAyB6N,EAAzB,CAA6B9V,OAA7B,CAAsCpnB,QAAtC,CADF,CAGA,CAED,qBAAA,CAEA,CAXD;CAeA,oBAAA,CAEA,KAAK+nB,aAAL,CAAqB,UAAW,CAE/B,GAAKuc,mBAAqBntF,SAA1B,CAAsC,CAErCmtF,iBAAmBC,wBAAyBrH,EAAzB,CAA6B9V,OAA7B,CAAnB,CAEA,CAED,uBAAA,CAEA,CAVD;CAcA,KAAKod,OAAL,CAAe,UAAW,CAEzBtH,GAAGuH,aAAH,CAAkBrd,OAAlB,EACA,KAAKA,OAAL,CAAejwE,SAAf,CAEA,CALD;CASAQ,OAAO26B,gBAAP,CAAyB,IAAzB,CAA+B,CAE9B46B,SAAU,CACTr1D,IAAK,cAAW,CAEfsK,QAAQC,IAAR,CAAc,sDAAd,EACA,YAAYonE,WAAL,EAAP,CAEA,CANQ,CAFoB,CAW9BxzD,WAAY,CACXne,IAAK,cAAW,CAEfsK,QAAQC,IAAR,CAAc,0DAAd,EACA,YAAY2lE,aAAL,EAAP,CAEA,CANU,CAXkB,CAA/B;CAyBA,KAAKnyC,EAAL,CAAU8uD,gBAAV,CACA,KAAKtW,IAAL,CAAYA,IAAZ,CACA,KAAKuW,SAAL,CAAiB,CAAjB,CACA,KAAKvd,OAAL,CAAeA,OAAf,CACA,KAAKja,YAAL,CAAoBi2B,cAApB,CACA,KAAKh2B,cAAL,CAAsBi2B,gBAAtB,CAEA,WAAA,CAEA,CAtcD,CAwcA,CApoBoB,EAArB;CAwoBArsF,MAAMksE,aAAN,CAAsB,SAAWljB,QAAX,CAAqBmjB,YAArB,CAAoC,CAEzD,aAAe,EAAf,CAEA,cAAgB,CACf5O,kBAAmB,OADJ,CAEfG,mBAAoB,QAFL,CAGfR,kBAAmB,OAHJ,CAIfO,oBAAqB,SAJN,CAKfE,kBAAmB,OALJ,CAMfC,qBAAsB,UANP,CAOfG,qBAAsB,UAPP,CAQfpB,kBAAmB,OARJ,CASfI,mBAAoB,QATL,CAUfkB,eAAgB,QAVD,CAAhB,CAaA,mBAAqB,CACpB,WADoB,CACP,wBADO,CACmB,KADnB,CAC0B,aAD1B,CACyC,QADzC,CACmD,YADnD,CACiE,gBADjE,CAEpB,UAFoB,CAER,OAFQ,CAEC,aAFD,CAEgB,qBAFhB,CAEuC,SAFvC,CAEkD,WAFlD,CAE+D,iBAF/D,CAEkF,aAFlF,CAGpB,cAHoB,CAGJ,cAHI,CAIpB,UAJoB,CAIR,SAJQ,CAIG,cAJH,CAImB,KAJnB,CAI0B,QAJ1B,CAIoC,QAJpC,CAKpB,aALoB,CAKL,iBALK,CAKc,wBALd,CAKwC,UALxC,CAMpB,UANoB,CAMR,kBANQ,CAMY,cANZ,CAM4B,cAN5B,CAOpB,iBAPoB,CAOD,iBAPC,CAOkB,oBAPlB,CAQpB,cARoB,CAQJ,gBARI,CAQc,eARd,CAQ+B,eAR/B,CASpB,kBAToB,CASA,eATA,CASiB,aATjB,CASgC,yBAThC,CAUpB,WAVoB,CAUP,aAVO,CAUQ,WAVR,CAUqB,mBAVrB,CAU0C,cAV1C,CAArB,CAcA,sBAAA,CAAyB1/C,MAAzB,CAAkC,CAEjC,GAAK4tD,aAAayN,mBAAb,EAAoCr7D,MAApC,EAA8CA,OAAOyiC,QAArD,EAAiEziC,OAAOyiC,QAAP,CAAgB4iB,gBAAtF,CAAyG,CAExG,WAAA,CAEA,CAJD,IAIO;;;;;;CASN,oBAAsBuI,aAAa6a,iBAAnC,CACA,oBAAsB5mF,KAAKiK,KAAL,CAAY,CAAEujF,gBAAkB,EAApB,EAA2B,CAAvC,CAAtB,CAEA,aAAeC,eAAf,CAEA,GAAKtvE,SAAWpe,SAAX,EAAwBoe,wBAAwBu7C,WAArD,CAAmE,CAElEixB,SAAW3qF,KAAKqL,GAAL,CAAU8S,OAAOyiC,QAAP,CAAgB/L,KAAhB,CAAsB7zC,MAAhC,CAAwC2pF,QAAxC,CAAX,CAEA,GAAKA,SAAWxsE,OAAOyiC,QAAP,CAAgB/L,KAAhB,CAAsB7zC,MAAtC,CAA+C,CAE9C+J,QAAQC,IAAR,CAAc,mCAAqCmT,OAAOyiC,QAAP,CAAgB/L,KAAhB,CAAsB7zC,MAA3D,CAAoE,2BAApE,CAAkG2pF,QAAlG,CAA6G,gCAA3H,EAEA,CAED,CAED,eAAA,CAEA,CAED,CAED,kCAAA,CAAoCh/B,GAApC,CAAyC+hC,mBAAzC,CAA+D,CAE9D,YAAA,CAEA,GAAK,CAAE/hC,GAAP,CAAa,CAEZkT,SAAWj/D,MAAM6I,cAAjB,CAEA,CAJD,QAIYkjD,qBAAqByN,OAA1B,CAAoC,CAE1CyF,SAAWlT,IAAIkT,QAAf,CAEA,CAJM,QAIKlT,qBAAqB6uB,iBAA1B,CAA8C,CAEpDzvE,QAAQC,IAAR,CAAc,2HAAd,EACA6zD,SAAWlT,IAAI7C,OAAJ,CAAY+V,QAAvB,CAEA;CAGD,GAAKA,WAAaj/D,MAAM6I,cAAnB,EAAqCilF,mBAA1C,CAAgE,CAE/D7uB,SAAWj/D,MAAM+I,aAAjB,CAEA,CAED,eAAA,CAEA,CAED,KAAKkuE,aAAL,CAAqB,SAAW52C,QAAX,CAAqBg7B,MAArB,CAA6BD,GAA7B,CAAkC2yB,WAAlC,CAA+CxvE,MAA/C,CAAwD,CAE5E,aAAeyvE,UAAW3tD,SAAS1G,IAApB,CAAf;;CAKA,aAAes0D,cAAe1vE,MAAf,CAAf,CACA,cAAgByqC,SAAS0kB,YAAT,EAAhB,CAEA,GAAKrtC,SAASsH,SAAT,GAAuB,IAA5B,CAAmC,CAElCA,UAAYwkC,aAAaqa,eAAb,CAA8BnmD,SAASsH,SAAvC,CAAZ,CAEA,GAAKA,YAActH,SAASsH,SAA5B,CAAwC,CAEvCx8B,QAAQC,IAAR,CAAc,mCAAd,CAAmDi1B,SAASsH,SAA5D,CAAuE,sBAAvE,CAA+FA,SAA/F,CAA0G,UAA1G,EAEA,CAED,CAED,wBAA0BqhB,SAAS04B,sBAAT,EAA1B,CAEA,eAAiB,CAEhBrK,SAAUA,QAFM,CAIhB1vC,UAAWA,SAJK,CAKhBkjD,uBAAwB1e,aAAamb,cALrB,CAMhBiE,eAAgB2C,0BAA6B,CAAEC,mBAAJ,CAA4B,IAA5B,CAAmCA,oBAAoBjlC,OAAlF,CAA2FF,SAASqf,WAApG,CANA,CAOhBtc,IAAK,CAAC,CAAE1rB,SAAS0rB,GAPD,CAQhBy/B,YAAa0C,0BAA2B7tD,SAAS0rB,GAApC,CAAyC/C,SAASof,UAAlD,CARG,CAShBhR,OAAQ,CAAC,CAAE/2B,SAAS+2B,MATJ,CAUhBg3B,WAAY/tD,SAAS+2B,MAAT,EAAmB/2B,SAAS+2B,MAAT,CAAgBqC,OAV/B,CAWhBgyB,eAAgByC,0BAA2B7tD,SAAS+2B,MAApC,CAA4CpO,SAASof,UAArD,CAXA,CAYhB8gB,aAAgB,CAAC,CAAE7oD,SAAS+2B,MAAd,GAA8B/2B,SAAS+2B,MAAT,CAAgBqC,OAAhB,GAA4Bz5D,MAAM2F,uBAApC,EAAmE06B,SAAS+2B,MAAT,CAAgBqC,OAAhB,GAA4Bz5D,MAAM4F,uBAAjI,CAZE,CAahB6pD,SAAU,CAAC,CAAEpvB,SAASovB,QAbN,CAchBK,MAAO,CAAC,CAAEzvB,SAASyvB,KAdH,CAehBoH,YAAa,CAAC,CAAE72B,SAAS62B,WAfT,CAgBhBw0B,oBAAqBwC,0BAA2B7tD,SAAS62B,WAApC,CAAiDlO,SAASof,UAA1D,CAhBL,CAiBhBjY,QAAS,CAAC,CAAE9vB,SAAS8vB,OAjBL,CAkBhBM,UAAW,CAAC,CAAEpwB,SAASowB,SAlBP,CAmBhBoG,gBAAiB,CAAC,CAAEx2B,SAASw2B,eAnBb,CAoBhBG,aAAc,CAAC,CAAE32B,SAAS22B,YApBV,CAqBhBC,aAAc,CAAC,CAAE52B,SAAS42B,YArBV,CAsBhBlG,YAAa,CAAC,CAAE1wB,SAAS0wB,WAtBT,CAuBhBK,SAAU,CAAC,CAAE/wB,SAAS+wB,QAvBN,CAyBhBiG,QAASh3B,SAASg3B,OAzBF,CA2BhBv2B,aAAcT,SAASS,YA3BP,CA6BhBs6B,IAAKA,GA7BW,CA8BhBgwB,OAAQ/qD,SAAS+6B,GA9BD,CA+BhBiwB,OAAQjwB,qBAAqB4K,OA/Bb,CAiChBmjB,YAAa9oD,SAASg2B,OAAT,GAAqBr2D,MAAM0C,WAjCxB,CAmChBk0D,gBAAiBv2B,SAASu2B,eAnCV,CAoChB4iB,uBAAwBrN,aAAaqN,sBApCrB,CAsChBlc,SAAUj9B,SAASi9B,QAtCH,CAuChBytB,SAAUA,QAvCM,CAwChBnnB,iBAAkBuI,aAAayN,mBAAb,EAAoCr7D,MAApC,EAA8CA,OAAOyiC,QAArD,EAAiEziC,OAAOyiC,QAAP,CAAgB4iB,gBAxCnF,CA0ChBrgC,aAAclD,SAASkD,YA1CP,CA2ChBC,aAAcnD,SAASmD,YA3CP,CA4ChBklC,gBAAiB1f,SAAS0f,eA5CV,CA6ChBC,gBAAiB3f,SAAS2f,eA7CV,CA+ChBghB,aAActuB,OAAOoP,WAAP,CAAmBrpE,MA/CjB,CAgDhByoF,eAAgBxuB,OAAOr/C,KAAP,CAAa5a,MAhDb,CAiDhBwoF,cAAevuB,OAAOuP,IAAP,CAAYxpE,MAjDX,CAkDhB0oF,cAAezuB,OAAO4P,IAAP,CAAY7pE,MAlDX,CAoDhBw2E,kBAAmBmW,WApDH,CAsDhB7C,iBAAkBliC,SAASgkB,SAAT,CAAmB7jC,OAAnB,EAA8B5qB,OAAO+e,aAArC,EAAsD+9B,OAAO6P,OAAP,CAAe9pE,MAAf,CAAwB,CAtDhF,CAuDhB8oF,cAAelhC,SAASgkB,SAAT,CAAmBrzC,IAvDlB,CAyDhB4uC,YAAavf,SAASuf,WAzDN,CA0DhBD,wBAAyBtf,SAASsf,uBA1DlB,CA4DhBpM,mBAAoB77B,SAAS67B,kBA5Db,CA8DhB5F,UAAWj2B,SAASi2B,SA9DJ,CA+DhB00B,YAAa3qD,SAASoxB,IAAT,GAAkBzxD,MAAMyC,UA/DrB,CAgEhBwoF,UAAW5qD,SAASoxB,IAAT,GAAkBzxD,MAAMwC,QAhEnB,CAkEhBg7D,aAAgBn9B,SAASm9B,YAAT,GAA0Br9D,SAA5B,CAA0CkgC,SAASm9B,YAAnD,CAAkE,KAlEhE,CAAjB,CAsEA,iBAAA,CAEA,CAhGD,CAkGA,KAAK0Z,cAAL,CAAsB,SAAW72C,QAAX,CAAqBiI,UAArB,CAAkC,CAEvD,UAAY,EAAZ,CAEA,GAAKA,WAAW+uC,QAAhB,CAA2B,CAE1BrpE,MAAM6lB,IAAN,CAAYyU,WAAW+uC,QAAvB,EAEA,CAJD,IAIO,CAENrpE,MAAM6lB,IAAN,CAAYwM,SAAS+1B,cAArB,EACApoD,MAAM6lB,IAAN,CAAYwM,SAAS81B,YAArB,EAEA,CAED,GAAK91B,SAASw9B,OAAT,GAAqB19D,SAA1B,CAAsC,CAErC,IAAM,QAAN,aAA2B09D,OAA3B,CAAqC,CAEpC7vD,MAAM6lB,IAAN,CAAYnzB,IAAZ,EACAsN,MAAM6lB,IAAN,CAAYwM,SAASw9B,OAAT,CAAkBn9D,IAAlB,CAAZ,EAEA,CAED,CAED,IAAM,MAAQ,CAAd,CAAiBmc,EAAIwxE,eAAejtF,MAApC,CAA4Cyb,GAA5C,CAAmD,CAElD7O,MAAM6lB,IAAN,CAAYyU,WAAY+lD,eAAgBxxE,CAAhB,CAAZ,CAAZ,EAEA,CAED,aAAauT,IAAN,EAAP,CAEA,CAlCD,CAoCA,KAAKqnD,cAAL,CAAsB,SAAWp3C,QAAX,CAAqBiI,UAArB,CAAiC8uC,IAAjC,CAAwC,CAE7D,WAAA;CAGA,IAAM,MAAQ,CAAR,CAAWkX,GAAK9iB,SAASpqE,MAA/B,CAAuCmJ,EAAI+jF,EAA3C,CAA+C/jF,GAA/C,CAAsD,CAErD,gBAAkBihE,SAAUjhE,CAAV,CAAlB,CAEA,GAAK8lE,YAAY+G,IAAZ,GAAqBA,IAA1B,CAAiC,CAEhChH,QAAUC,WAAV,CACA,EAAGD,QAAQud,SAAX,CAEA,MAEA,CAED,CAED,GAAKvd,UAAYjwE,SAAjB,CAA6B,CAE5BiwE,QAAU,UAAUyY,YAAV,CAAwB7/B,QAAxB,CAAkCouB,IAAlC,CAAwC/2C,QAAxC,CAAkDiI,UAAlD,CAAV,CACAkjC,SAAS33C,IAAT,CAAeu8C,OAAf,EAEA,CAED,cAAA,CAEA,CA7BD,CA+BA,KAAKE,cAAL,CAAsB,SAAUF,OAAV,CAAoB,CAEzC,GAAK,EAAGA,QAAQud,SAAX,GAAyB,CAA9B,CAAkC;CAGjC,MAAQniB,SAASzxC,OAAT,CAAkBq2C,OAAlB,CAAR,CACA5E,SAAU3uD,CAAV,EAAgB2uD,SAAUA,SAASpqE,MAAT,CAAkB,CAA5B,CAAhB,CACAoqE,SAASjzB,GAAT;CAGA63B,QAAQod,OAAR,GAEA,CAED,CAdD;CAiBA,KAAKhiB,QAAL,CAAgBA,QAAhB,CAEA,CA3RD;;;GAmSAxrE,MAAMgsE,eAAN,CAAwB,UAAY,CAEnC,eAAiB,EAAjB,CAEA,KAAKnrE,GAAL,CAAW,SAAW0d,MAAX,CAAoB,CAE9B,SAAWA,OAAOyR,IAAlB,CACA,QAAU+2C,WAAY/2C,IAAZ,CAAV,CAEA,GAAK+7B,MAAQ5rD,SAAb,CAAyB,CAExB4rD,IAAM,EAAN,CACAgb,WAAY/2C,IAAZ,EAAqB+7B,GAArB,CAEA,CAED,UAAA,CAEA,CAdD,CAgBA,KAAK6jB,MAAL,CAAc,SAAWrxD,MAAX,CAAoB,CAEjC,kBAAmBA,OAAOyR,IAAnB,CAAP,CAEA,CAJD,CAMA,KAAK09B,KAAL,CAAa,UAAY,CAExBqZ,WAAa,EAAb,CAEA,CAJD,CAMA,CAhCD;CAoCA/mE,MAAMgsF,WAAN,CAAsB,UAAY,CAEjC,uBAAA,CAAyB/gF,MAAzB,CAAkC,CAEjC,UAAYA,OAAO8kB,KAAP,CAAc,IAAd,CAAZ,CAEA,IAAM,MAAQ,CAAd,CAAiBlT,EAAI0xE,MAAMntF,MAA3B,CAAmCyb,GAAnC,CAA0C,CAEzC0xE,MAAO1xE,CAAP,EAAeA,EAAI,CAAN,CAAY,IAAZ,CAAmB0xE,MAAO1xE,CAAP,CAAhC,CAEA,CAED,aAAauT,IAAN,CAAY,IAAZ,CAAP,CAEA,CAED,2BAAO,CAAsB81D,EAAtB,CAA0BvsD,IAA1B,CAAgC1uB,MAAhC,CAAyC,CAE/C,WAAai7E,GAAGsI,YAAH,CAAiB70D,IAAjB,CAAb,CAEAusD,GAAGuI,YAAH,CAAiBjX,MAAjB,CAAyBvsE,MAAzB,EACAi7E,GAAGwI,aAAH,CAAkBlX,MAAlB,EAEA,GAAK0O,GAAGyI,kBAAH,CAAuBnX,MAAvB,CAA+B0O,GAAG0I,cAAlC,IAAuD,KAA5D,CAAoE,CAEnEzjF,QAAQuL,KAAR,CAAe,8CAAf,EAEA,CAED,GAAKwvE,GAAGuG,gBAAH,CAAqBjV,MAArB,IAAkC,EAAvC,CAA4C,CAE3CrsE,QAAQC,IAAR,CAAc,0CAAd,CAA0DuuB,OAASusD,GAAGE,aAAZ,CAA4B,QAA5B,CAAuC,UAAjG,CAA6GF,GAAGuG,gBAAH,CAAqBjV,MAArB,CAA7G,CAA4IqX,eAAgB5jF,MAAhB,CAA5I,EAEA;;CAKD,aAAA,CAEA,CAxBD,CA0BA,CA1CmB,EAApB;;;;IAmDAjL,MAAM+sE,cAAN,CAAuB,SAAW+hB,SAAX,CAAsBvkB,OAAtB,CAA+BhvB,QAA/B,CAA0C,CAEhE,QAAUuzC,UAAUjrC,OAApB,CACAkrC,OAASD,UAAUtiB,KADnB,CAEAzC,SAAW,UAAUz9C,OAAV,EAFX,CAGA+9C,kBAAoB,UAAUxyD,OAAV,EAHpB,CAKAm3E,cAAgBzkB,QAAQW,OALxB,CAOA+jB,eAAiB,UAAU76E,OAAV,EAPjB,CASA86E,YAAc,UAAUn+E,OAAV,EATd,CAUAo+E,oBAAsB,UAAUp+E,OAAV,EAVtB,CAYAq+E,YAAc,EAZd,CAcAC,cAAgB,CAdhB,CAeAC,cAAgB,CAfhB,CAiBAC,0BAA4B,CAAEF,cAAgBC,aAAlB,EAAoC,CAjBhE,CAmBAE,gBAAkB,SAAA,CAAWD,yBAAX,CAnBlB,CAoBAE,mBAAqB,SAAA,CAAWF,yBAAX,CApBrB,CAsBAG,eAAiB,EAtBjB,CAwBA,mBAAqB,CACpB,UAAU3+E,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CADoB,CACU,UAAUA,OAAV,CAAmB,CAAE,CAArB,CAAwB,CAAxB,CAA2B,CAA3B,CADV,CAC0C,UAAUA,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAD1C,CAEpB,UAAUA,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAE,CAA3B,CAFoB,CAEY,UAAUA,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAFZ,CAE0C,UAAUA,OAAV,CAAmB,CAAnB,CAAsB,CAAE,CAAxB,CAA2B,CAA3B,CAF1C,CAArB,CAKA,YAAc,CACb,UAAUA,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CADa,CACiB,UAAUA,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CADjB,CAC+C,UAAUA,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAD/C,CAEb,UAAUA,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAFa,CAEiB,UAAUA,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAFjB,CAE+C,UAAUA,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAE,CAA3B,CAF/C,CAAd,CAKA,oBAAsB,CACrB,UAAUiJ,OAAV,EADqB,CACA,UAAUA,OAAV,EADA,CACqB,UAAUA,OAAV,EADrB,CAErB,UAAUA,OAAV,EAFqB,CAEA,UAAUA,OAAV,EAFA,CAEqB,UAAUA,OAAV,EAFrB,CAAtB;CAOA,0BAA4B,UAAUujD,iBAAV,EAA5B,CACAoyB,sBAAsBnyB,YAAtB,CAAqCx9D,MAAMsJ,gBAA3C,CACAqmF,sBAAsBxxB,QAAtB,CAAiC,IAAjC,CAEA,mBAAqBn+D,MAAMgnE,SAAN,CAAiB,cAAjB,CAArB,CACA,qBAAuBhnE,MAAM2+D,aAAN,CAAoB5yD,KAApB,CAA2B6jF,eAAe15B,QAA1C,CAAvB,CAEA,IAAM,MAAQ,CAAd,CAAiBr5C,IAAM0yE,yBAAvB,CAAkD,EAAG1yE,CAArD,CAAyD,CAExD,gBAAkB,CAAEA,EAAIwyE,aAAN,IAA0B,CAA5C,CACA,gBAAkB,CAAExyE,EAAIyyE,aAAN,IAA0B,CAA5C,CAEA,kBAAoBK,sBAAsB5jF,KAAtB,EAApB,CACA8jF,cAActsD,YAAd,CAA6BusD,WAA7B,CACAD,cAAcvyB,QAAd,CAAyByyB,WAAzB,CAEAP,gBAAiB3yE,CAAjB,EAAuBgzE,aAAvB,CAEA,qBAAuB,UAAU3xB,cAAV,CAA0B,CAChDL,QAAS,CACR,gBAAiB,EADT,CADuC,CAIhD3H,SAAU85B,gBAJsC,CAKhD75B,aAAcy5B,eAAez5B,YALmB,CAMhDC,eAAgBw5B,eAAex5B,cANiB,CAOhD7yB,aAAcusD,WAPkC,CAQhDxyB,SAAUyyB,WARsC,CAShD5xB,SAAU,IATsC,CAA1B,CAAvB,CAYAsxB,mBAAoB5yE,CAApB,EAA0BozE,gBAA1B,CAEA;CAID,UAAY,IAAZ,CAEA,KAAK9mD,OAAL,CAAe,KAAf,CAEA,KAAK28B,UAAL,CAAkB,IAAlB,CACA,KAAK56B,WAAL,CAAmB,KAAnB,CAEA,KAAKvR,IAAL,CAAY35B,MAAMqC,YAAlB,CAEA,KAAK6tF,kBAAL,CAA0B,IAA1B,CACA,KAAKC,iBAAL,CAAyB,IAAzB,CAEA,KAAK9mC,MAAL,CAAc,SAAWJ,KAAX,CAAkBtxC,MAAlB,CAA2B,CAExC,GAAKmH,MAAMqqB,OAAN,GAAkB,KAAvB,CAA+B,OAC/B,GAAKrqB,MAAMgnD,UAAN,GAAqB,KAArB,EAA8BhnD,MAAMosB,WAAN,GAAsB,KAAzD,CAAiE,OAEjE,GAAK8jD,cAAc5tF,MAAd,GAAyB,CAA9B,CAAkC;CAGlC2tF,OAAOtiB,UAAP,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAA4B,CAA5B,EACAsiB,OAAOp0D,OAAP,CAAgB8wC,IAAI2kB,KAApB,EACArB,OAAO1Y,YAAP,CAAqB,IAArB,EACA0Y,OAAO7gB,cAAP,CAAuB,KAAvB;CAIA,aAAA,CAAemiB,YAAf,CAEA,IAAM,MAAQ,CAAR,CAAWzzE,GAAKoyE,cAAc5tF,MAApC,CAA4Cyb,EAAID,EAAhD,CAAoDC,GAApD,CAA2D,CAE1D,UAAYmyE,cAAenyE,CAAf,CAAZ,CACA,WAAauvC,MAAMF,MAAnB,CAEA,GAAKA,SAAW/rD,SAAhB,CAA4B,CAE3BgL,QAAQC,IAAR,CAAc,uBAAd,CAAuCghD,KAAvC,CAA8C,gBAA9C,EACA,SAEA,CAED,iBAAmBF,OAAOv0C,MAA1B,CAEAs3E,eAAellF,IAAf,CAAqBmiD,OAAOJ,OAA5B,EAEA,GAAKM,uBAAuBG,UAA5B,CAAyC,CAExC+jC,UAAY,CAAZ,CACAD,aAAe,IAAf,CAEA,YAAcpB,eAAe1uF,CAA7B,CACA,aAAe0uF,eAAe7gF,CAA9B;;;;;;;;;;;;;CAgBAmiF,gBAAiB,CAAjB,EAAqB5mF,GAArB,CAA0B6mF,QAAU,CAApC,CAAuCC,QAAvC,CAAiDD,OAAjD,CAA0DC,QAA1D;CAEAF,gBAAiB,CAAjB,EAAqB5mF,GAArB,CAA0B,CAA1B,CAA6B8mF,QAA7B,CAAuCD,OAAvC,CAAgDC,QAAhD;CAEAF,gBAAiB,CAAjB,EAAqB5mF,GAArB,CAA0B6mF,QAAU,CAApC,CAAuCC,QAAvC,CAAiDD,OAAjD,CAA0DC,QAA1D;CAEAF,gBAAiB,CAAjB,EAAqB5mF,GAArB,CAA0B6mF,OAA1B,CAAmCC,QAAnC,CAA6CD,OAA7C,CAAsDC,QAAtD;CAEAF,gBAAiB,CAAjB,EAAqB5mF,GAArB,CAA0B6mF,QAAU,CAApC,CAAuC,CAAvC,CAA0CA,OAA1C,CAAmDC,QAAnD;CAEAF,gBAAiB,CAAjB,EAAqB5mF,GAArB,CAA0B6mF,OAA1B,CAAmC,CAAnC,CAAsCA,OAAtC,CAA+CC,QAA/C,EAEAxB,eAAe1uF,CAAf,EAAoB,GAApB,CACA0uF,eAAe7gF,CAAf,EAAoB,GAApB,CAEA,CArCD,IAqCO,CAENkiF,UAAY,CAAZ,CACAD,aAAe,KAAf,CAEA,CAED,GAAKnkC,OAAOH,GAAP,GAAe,IAApB,CAA2B,CAE1B,SAAW,CAAEpD,UAAW3oD,MAAMgG,aAAnB,CAAkC0iD,UAAW1oD,MAAMgG,aAAnD,CAAkEyiD,OAAQzoD,MAAMmH,UAAhF,CAAX,CAEA+kD,OAAOH,GAAP,CAAa,UAAU6uB,iBAAV,CAA6BqU,eAAe1uF,CAA5C,CAA+C0uF,eAAe7gF,CAA9D,CAAiEsiF,IAAjE,CAAb,CAEAC,aAAannC,sBAAb,GAEA,CAED,GAAK0C,wBAAwBQ,eAA7B,CAA+C,CAE9CR,OAAOn9C,MAAP,CAAeq9C,KAAf,EAEA,CAED,cAAgBF,OAAOH,GAAvB,CACA,iBAAmBG,OAAOt0C,MAA1B,CAEAu3E,oBAAoB11E,qBAApB,CAA2C2yC,MAAMn0C,WAAjD,EACA04E,aAAappE,QAAb,CAAsBxd,IAAtB,CAA4BolF,mBAA5B,EAEAL,UAAUxlC,eAAV,CAA2B0jB,SAA3B,EACA8hB,UAAUphC,KAAV;;CAKA,IAAM,SAAW,CAAjB,CAAoBrpB,KAAOisD,SAA3B,CAAsCjsD,MAAtC,CAAgD,CAE/C,GAAKgsD,YAAL,CAAoB,CAEnBnB,YAAYnlF,IAAZ,CAAkB4mF,aAAappE,QAA/B,EACA2nE,YAAY9hF,GAAZ,CAAiBwjF,eAAgBvsD,IAAhB,CAAjB,EACAssD,aAAaxsE,EAAb,CAAgBpa,IAAhB,CAAsB8mF,QAASxsD,IAAT,CAAtB,EACAssD,aAAa1sE,MAAb,CAAqBirE,WAArB,EAEA,iBAAmBqB,gBAAiBlsD,IAAjB,CAAnB,CACA0qD,OAAOniB,QAAP,CAAiBkkB,YAAjB,EAEA,CAVD,IAUO,CAEN5B,YAAYz1E,qBAAZ,CAAmC2yC,MAAMnrD,MAAN,CAAagX,WAAhD,EACA04E,aAAa1sE,MAAb,CAAqBirE,WAArB,EAEA,CAEDyB,aAAanyE,iBAAb,GACAmyE,aAAa3oC,kBAAb,CAAgChwC,UAAhC,CAA4C24E,aAAa14E,WAAzD;CAIA84E,aAAapnF,GAAb,CACC,GADD,CACM,GADN,CACW,GADX,CACgB,GADhB,CAEC,GAFD,CAEM,GAFN,CAEW,GAFX,CAEgB,GAFhB,CAGC,GAHD,CAGM,GAHN,CAGW,GAHX,CAGgB,GAHhB,CAIC,GAJD,CAIM,GAJN,CAIW,GAJX,CAIgB,GAJhB,EAOAonF,aAAatjF,QAAb,CAAuBkjF,aAAa54E,gBAApC,EACAg5E,aAAatjF,QAAb,CAAuBkjF,aAAa3oC,kBAApC;CAIAqiB,kBAAkBvyD,gBAAlB,CAAoC64E,aAAa54E,gBAAjD,CAAmE44E,aAAa3oC,kBAAhF,EACA+hB,SAAS/8C,aAAT,CAAwBq9C,iBAAxB;CAIA+kB,YAAYhuF,MAAZ,CAAqB,CAArB,CAEAk0E,cAAersB,KAAf,CAAsBtxC,MAAtB,CAA8Bg5E,YAA9B;;CAKA,IAAM,MAAQ,CAAR,CAAWrsD,GAAK8qD,YAAYhuF,MAAlC,CAA0Cof,EAAI8jB,EAA9C,CAAkD9jB,GAAlD,CAAyD,CAExD,WAAa4uE,YAAa5uE,CAAb,CAAb,CACA,aAAe+6B,SAASxsC,MAAT,CAAiBwP,MAAjB,CAAf,CACA,aAAeA,OAAO8hB,QAAtB,CAEA,GAAKA,0BAA0B29B,aAA/B,CAA+C,CAE9C,WAAar/C,SAASumB,MAAtB,CACA,cAAgB7E,SAASR,SAAzB,CAEA,IAAM,MAAQ,CAAR,CAAW4J,GAAKvE,OAAO9jC,MAA7B,CAAqCmxB,EAAIkX,EAAzC,CAA6ClX,GAA7C,CAAoD,CAEnD,UAAY2S,OAAQ3S,CAAR,CAAZ,CACA,kBAAoBsN,UAAWsF,MAAMvE,aAAjB,CAApB,CAEA,GAAKm2C,cAAcp7C,OAAd,GAA0B,IAA/B,CAAsC,CAErC,kBAAoBq1D,iBAAkBzyE,MAAlB,CAA0Bw4D,aAA1B,CAAyCsZ,YAAzC,CAAuDlB,mBAAvD,CAApB,CACAL,UAAU7c,kBAAV,CAA8B0e,YAA9B,CAA4C,IAA5C,CAAkDhyE,QAAlD,CAA4DkxE,aAA5D,CAA2EtxE,MAA3E,CAAmF4mB,KAAnF,EAEA,CAED,CAED,CAnBD,IAmBO,CAEN,kBAAoB6rD,iBAAkBzyE,MAAlB,CAA0B8hB,QAA1B,CAAoCgwD,YAApC,CAAkDlB,mBAAlD,CAApB,CACAL,UAAU7c,kBAAV,CAA8B0e,YAA9B,CAA4C,IAA5C,CAAkDhyE,QAAlD,CAA4DkxE,aAA5D,CAA2EtxE,MAA3E,CAAmF,IAAnF,EAEA,CAED,CAED,CAED;CAGD,eAAiBuwE,UAAU1gB,aAAV,EAAjB,CACA6iB,WAAanC,UAAUxgB,aAAV,EADb,CAEAwgB,UAAUzgB,aAAV,CAAyB5B,UAAzB,CAAqCwkB,UAArC,EAEAnyE,MAAMosB,WAAN,CAAoB,KAApB,CAEA,CAtMD,CAwMA,yBAAA,CAA2B3sB,MAA3B,CAAmC8hB,QAAnC,CAA6CgwD,YAA7C,CAA2Da,kBAA3D,CAAgF,CAE/E,aAAe3yE,OAAOI,QAAtB,CAEA,WAAa,IAAb,CAEA,qBAAuB6wE,eAAvB,CACA,mBAAqBjxE,OAAO4yE,mBAA5B,CAEA,GAAKd,YAAL,CAAoB,CAEnBe,iBAAmB3B,kBAAnB,CACA4B,eAAiB9yE,OAAO+yE,sBAAxB,CAEA,CAED,GAAK,CAAED,cAAP,CAAwB,CAEvB,gBAAkB1yE,SAAS4kB,YAAT,GAA0BpjC,SAA1B,EAChBwe,SAAS4kB,YAAT,CAAsBniC,MAAtB,CAA+B,CADf,EACoBi/B,SAASkD,YAD/C,CAGA,gBAAkBhlB,wBAAwBu7C,WAAxB,EAAuCz5B,SAASi9B,QAAlE,CAEA,iBAAmB,CAAnB,CAEA,GAAKwyB,WAAL,CAAmByB,cAAgBlC,aAAhB,CACnB,GAAKU,WAAL,CAAmBwB,cAAgBjC,aAAhB,CAEnBxzE,OAASs1E,iBAAkBG,YAAlB,CAAT,CAEA,CAdD,IAcO,CAENz1E,OAASu1E,cAAT,CAEA,CAED,GAAKvC,UAAU3mB,oBAAV,EACH9nC,SAASy7B,WAAT,GAAyB,IADtB,EAEHz7B,SAASw7B,cAAT,CAAwBz6D,MAAxB,GAAmC,CAFrC,CAEyC;;CAKxC,SAAW0a,OAAOkU,IAAlB,CAAwBwhE,KAAOnxD,SAASrQ,IAAxC,CAEA,wBAA0B0/D,eAAgB+B,IAAhB,CAA1B,CAEA,GAAKC,sBAAwBvxF,SAA7B,CAAyC,CAExCuxF,oBAAsB,EAAtB,CACAhC,eAAgB+B,IAAhB,EAAyBC,mBAAzB,CAEA,CAED,mBAAqBA,oBAAqBF,IAArB,CAArB,CAEA,GAAKG,iBAAmBxxF,SAAxB,CAAoC,CAEnCwxF,eAAiB71E,OAAO/P,KAAP,EAAjB,CACA2lF,oBAAqBF,IAArB,EAA8BG,cAA9B,CAEA,CAED71E,OAAS61E,cAAT,CAEA,CAED71E,OAAO6f,OAAP,CAAiB0E,SAAS1E,OAA1B,CACA7f,OAAO46C,SAAP,CAAmBr2B,SAASq2B,SAA5B,CAEA,SAAWr2B,SAASoxB,IAApB,CAEA,GAAK3yC,MAAMqxE,iBAAN,EAA2B1+B,MAAQzxD,MAAMyC,UAA9C,CAA2D,CAE1DgvD,KAAOzxD,MAAMuC,SAAb,CAEA,CAED,GAAKuc,MAAMoxE,kBAAX,CAAgC,CAE/B,GAAKz+B,OAASzxD,MAAMuC,SAApB,CAAgCkvD,KAAOzxD,MAAMwC,QAAb,CAAhC,QACUivD,OAASzxD,MAAMwC,QAApB,CAA+BivD,KAAOzxD,MAAMuC,SAAb,CAEpC,CAEDuZ,OAAO21C,IAAP,CAAcA,IAAd,CAEA31C,OAAOggD,WAAP,CAAqBz7B,SAASy7B,WAA9B,CACAhgD,OAAO+/C,cAAP,CAAwBx7B,SAASw7B,cAAjC,CAEA//C,OAAO66C,kBAAP,CAA4Bt2B,SAASs2B,kBAArC,CACA76C,OAAO8gD,SAAP,CAAmBv8B,SAASu8B,SAA5B,CAEA,GAAKyzB,cAAgBv0E,OAAOo6C,QAAP,CAAgB07B,QAAhB,GAA6BzxF,SAAlD,CAA8D,CAE7D2b,OAAOo6C,QAAP,CAAgB07B,QAAhB,CAAyB9nF,KAAzB,CAA+BC,IAA/B,CAAqCmnF,kBAArC,EAEA,CAED,aAAA,CAEA,CAED,sBAAA,CAAwB3yE,MAAxB,CAAgC5G,MAAhC,CAAwCg5E,YAAxC,CAAuD,CAEtD,GAAKpyE,OAAOod,OAAP,GAAmB,KAAxB,CAAgC,OAEhC,GAAKpd,OAAOsc,MAAP,CAAcD,IAAd,CAAoBjjB,OAAOkjB,MAA3B,IAAyCtc,wBAAwByc,IAAxB,EAAgCzc,wBAAwB0c,IAAxD,EAAgE1c,wBAAwB4c,MAAjI,CAAL,CAAiJ,CAEhJ,GAAK5c,OAAO8e,UAAP,GAAuB9e,OAAOgf,aAAP,GAAyB,KAAzB,EAAkCwsC,SAAS77C,gBAAT,CAA2B3P,MAA3B,IAAwC,IAAjG,CAAL,CAA+G,CAE9G,aAAeA,OAAO8hB,QAAtB,CAEA,GAAKA,SAAS1E,OAAT,GAAqB,IAA1B,CAAiC,CAEhCpd,OAAO0e,eAAP,CAAuBnlB,gBAAvB,CAAyC64E,aAAa3oC,kBAAtD,CAA0EzpC,OAAOtG,WAAjF,EACAm3E,YAAYv7D,IAAZ,CAAkBtV,MAAlB,EAEA,CAED,CAED,CAED,aAAeA,OAAOsd,QAAtB,CAEA,IAAM,MAAQ,CAAR,CAAWjxB,EAAIixB,SAASz6B,MAA9B,CAAsCyb,EAAIjS,CAA1C,CAA6CiS,GAA7C,CAAoD,CAEnDy4D,cAAez5C,SAAUhf,CAAV,CAAf,CAA8BlF,MAA9B,CAAsCg5E,YAAtC,EAEA,CAED,CAED,CAzaD;;;GAibA3wF,MAAM8rE,UAAN,CAAmB,SAAWoa,EAAX,CAAe9nB,UAAf,CAA2B2N,cAA3B,CAA4C,CAE9D,UAAY,IAAZ,CAEA,KAAK2E,OAAL,CAAe,CACdnlE,MAAO,UAAUsmF,gBAAV,CAA4B3L,EAA5B,CAAgC,IAAhC,CADO,CAEdhuB,MAAO,UAAU45B,gBAAV,CAA4B5L,EAA5B,CAAgC,IAAhC,CAFO,CAGd5e,QAAS,UAAUyqB,kBAAV,CAA8B7L,EAA9B,CAAkC,IAAlC,CAHK,CAAf,CAMA,wBAA0BA,GAAG3oE,YAAH,CAAiB2oE,GAAGa,kBAApB,CAA1B,CACA,kBAAoB,cAAA,CAAgBiL,mBAAhB,CAApB,CACA,sBAAwB,cAAA,CAAgBA,mBAAhB,CAAxB,CACA,sBAAwB,cAAA,CAAgBA,mBAAhB,CAAxB,CAEA,iBAAmB,EAAnB,CAEA,6BAA+B,IAA/B,CAEA,oBAAsB,IAAtB,CACA,yBAA2B,IAA3B,CACA,oBAAsB,IAAtB,CACA,oBAAsB,IAAtB,CACA,8BAAgC,IAAhC,CACA,yBAA2B,IAA3B,CACA,yBAA2B,IAA3B,CACA,6BAA+B,KAA/B,CAEA,qBAAuB,IAAvB,CACA,oBAAsB,IAAtB,CAEA,qBAAuB,IAAvB,CAEA,+BAAiC,IAAjC,CACA,8BAAgC,IAAhC,CAEA,uBAAyB,IAAzB,CAEA,gBAAkB9L,GAAG3oE,YAAH,CAAiB2oE,GAAGO,uBAApB,CAAlB,CAEA,uBAAyB,IAAzB,CACA,yBAA2B,EAA3B,CAEA,mBAAqB,UAAUzsE,OAAV,EAArB,CACA,oBAAsB,UAAUA,OAAV,EAAtB,CAEA,sBAAA,CAAwB2f,IAAxB,CAA8B14B,MAA9B,CAAsCkgC,KAAtC,CAA8C,CAE7C,SAAW,cAAA,CAAgB,CAAhB,CAAX,CACA,YAAc+kD,GAAG7I,aAAH,EAAd,CAEA6I,GAAG1I,WAAH,CAAgB7jD,IAAhB,CAAsBuvB,OAAtB,EACAg9B,GAAGxJ,aAAH,CAAkB/iD,IAAlB,CAAwBusD,GAAGpJ,kBAA3B,CAA+CoJ,GAAG7D,OAAlD,EACA6D,GAAGxJ,aAAH,CAAkB/iD,IAAlB,CAAwBusD,GAAGrJ,kBAA3B,CAA+CqJ,GAAG7D,OAAlD,EAEA,IAAM,MAAQ,CAAd,CAAiBxlE,EAAIskB,KAArB,CAA4BtkB,GAA5B,CAAmC,CAElCqpE,GAAGxH,UAAH,CAAez9E,OAAS4b,CAAxB,CAA2B,CAA3B,CAA8BqpE,GAAGhD,GAAjC,CAAsC,CAAtC,CAAyC,CAAzC,CAA4C,CAA5C,CAA+CgD,GAAGhD,GAAlD,CAAuDgD,GAAGtR,aAA1D,CAAyEn0C,IAAzE,EAEA,CAED,cAAA,CAEA,CAED,kBAAoB,EAApB,CACAwxD,cAAe/L,GAAGzI,UAAlB,EAAiCJ,cAAe6I,GAAGzI,UAAlB,CAA8ByI,GAAGzI,UAAjC,CAA6C,CAA7C,CAAjC,CACAwU,cAAe/L,GAAG/G,gBAAlB,EAAuC9B,cAAe6I,GAAG/G,gBAAlB,CAAoC+G,GAAG1G,2BAAvC,CAAoE,CAApE,CAAvC;CAIA,KAAK9S,IAAL,CAAY,UAAY,CAEvB,KAAKD,UAAL,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,CAA0B,CAA1B,EACA,KAAKmC,UAAL,CAAiB,CAAjB,EACA,KAAKC,YAAL,CAAmB,CAAnB,EAEA,KAAKp0C,MAAL,CAAayrD,GAAGgM,UAAhB,EACA,KAAKrZ,YAAL,CAAmB74E,MAAMwE,cAAzB,EAEA,KAAKo0E,YAAL,CAAmB,KAAnB,EACA,KAAKyD,WAAL,CAAkBr8E,MAAM+B,YAAxB,EACA,KAAK04B,MAAL,CAAayrD,GAAGvN,SAAhB,EAEA,KAAKl+C,MAAL,CAAayrD,GAAGkK,KAAhB,EACA,KAAKna,WAAL,CAAkBj2E,MAAMgD,cAAxB,EAEA,CAhBD,CAkBA,KAAKwtE,cAAL,CAAsB,UAAY,CAEjC,IAAM,MAAQ,CAAR,CAAW5lE,EAAIunF,cAAc/wF,MAAnC,CAA2Cyb,EAAIjS,CAA/C,CAAkDiS,GAAlD,CAAyD,CAExDs1E,cAAet1E,CAAf,EAAqB,CAArB,CAEA,CAED,CARD,CAUA,KAAKw0D,eAAL,CAAuB,SAAWl7D,SAAX,CAAuB,CAE7Cg8E,cAAeh8E,SAAf,EAA6B,CAA7B,CAEA,GAAKi8E,kBAAmBj8E,SAAnB,IAAmC,CAAxC,CAA4C,CAE3C+vE,GAAGmM,uBAAH,CAA4Bl8E,SAA5B,EACAi8E,kBAAmBj8E,SAAnB,EAAiC,CAAjC,CAEA,CAED,GAAKm8E,kBAAmBn8E,SAAnB,IAAmC,CAAxC,CAA4C,CAE3C,cAAgBioD,WAAWv9D,GAAX,CAAgB,wBAAhB,CAAhB,CAEA2sE,UAAU+kB,wBAAV,CAAoCp8E,SAApC,CAA+C,CAA/C,EACAm8E,kBAAmBn8E,SAAnB,EAAiC,CAAjC,CAEA,CAED,CApBD,CAsBA,KAAK0+D,yBAAL,CAAiC,SAAW1+D,SAAX,CAAsB4sB,gBAAtB,CAAwCyqC,SAAxC,CAAoD,CAEpF2kB,cAAeh8E,SAAf,EAA6B,CAA7B,CAEA,GAAKi8E,kBAAmBj8E,SAAnB,IAAmC,CAAxC,CAA4C,CAE3C+vE,GAAGmM,uBAAH,CAA4Bl8E,SAA5B,EACAi8E,kBAAmBj8E,SAAnB,EAAiC,CAAjC,CAEA,CAED,GAAKm8E,kBAAmBn8E,SAAnB,IAAmC4sB,gBAAxC,CAA2D,CAE1DyqC,UAAU+kB,wBAAV,CAAoCp8E,SAApC,CAA+C4sB,gBAA/C,EACAuvD,kBAAmBn8E,SAAnB,EAAiC4sB,gBAAjC,CAEA,CAED,CAlBD,CAoBA,KAAK+uC,uBAAL,CAA+B,UAAY,CAE1C,IAAM,MAAQ,CAAR,CAAWlnE,EAAIwnF,kBAAkBhxF,MAAvC,CAA+Cyb,IAAMjS,CAArD,CAAwD,EAAGiS,CAA3D,CAA+D,CAE9D,GAAKu1E,kBAAmBv1E,CAAnB,IAA2Bs1E,cAAet1E,CAAf,CAAhC,CAAqD,CAEpDqpE,GAAGsM,wBAAH,CAA6B31E,CAA7B,EACAu1E,kBAAmBv1E,CAAnB,EAAyB,CAAzB,CAEA,CAED,CAED,CAbD,CAeA,KAAK4d,MAAL,CAAc,SAAWmE,EAAX,CAAgB,CAE7B,GAAKutC,aAAcvtC,EAAd,IAAuB,IAA5B,CAAmC,CAElCsnD,GAAGzrD,MAAH,CAAWmE,EAAX,EACAutC,aAAcvtC,EAAd,EAAqB,IAArB,CAEA,CAED,CATD,CAWA,KAAKjE,OAAL,CAAe,SAAWiE,EAAX,CAAgB,CAE9B,GAAKutC,aAAcvtC,EAAd,IAAuB,KAA5B,CAAoC,CAEnCsnD,GAAGvrD,OAAH,CAAYiE,EAAZ,EACAutC,aAAcvtC,EAAd,EAAqB,KAArB,CAEA,CAED,CATD,CAWA,KAAKggD,2BAAL,CAAmC,UAAY,CAE9C,GAAK6T,2BAA6B,IAAlC,CAAyC,CAExCA,yBAA2B,EAA3B,CAEA,GAAKr0B,WAAWv9D,GAAX,CAAgB,gCAAhB,GACAu9D,WAAWv9D,GAAX,CAAgB,+BAAhB,CADA,EAEAu9D,WAAWv9D,GAAX,CAAgB,+BAAhB,CAFL,CAEyD,CAExD,YAAcqlF,GAAG3oE,YAAH,CAAiB2oE,GAAGwM,0BAApB,CAAd,CAEA,IAAM,MAAQ,CAAd,CAAiB71E,EAAI81E,QAAQvxF,MAA7B,CAAqCyb,GAArC,CAA4C,CAE3C41E,yBAAyB5+D,IAAzB,CAA+B8+D,QAAS91E,CAAT,CAA/B,EAEA,CAED,CAED,CAED,+BAAA,CAEA,CAxBD,CA0BA,KAAKo5D,WAAL,CAAmB,SAAWjnB,QAAX,CAAqBwM,aAArB,CAAoCF,QAApC,CAA8CC,QAA9C,CAAwDI,kBAAxD,CAA4EF,aAA5E,CAA2FC,aAA3F,CAA0GQ,kBAA1G,CAA+H,CAEjJ,GAAKlN,WAAahvD,MAAM+C,UAAxB,CAAqC,CAEpC,KAAK03B,MAAL,CAAayrD,GAAGkK,KAAhB,EAEA,CAJD,IAIO,CAEN,KAAKz1D,OAAL,CAAcurD,GAAGkK,KAAjB,EACAwC,gBAAkB5jC,QAAlB;CACA,OAEA,CAED,GAAKA,WAAa4jC,eAAb,EAAgC12B,qBAAuB22B,wBAA5D,CAAuF,CAEtF,GAAK7jC,WAAahvD,MAAMiD,gBAAxB,CAA2C,CAE1C,GAAKi5D,kBAAL,CAA0B,CAEzBgqB,GAAG4M,qBAAH,CAA0B5M,GAAG5C,QAA7B,CAAuC4C,GAAG5C,QAA1C,EACA4C,GAAG6M,iBAAH,CAAsB7M,GAAGxC,GAAzB,CAA8BwC,GAAGxC,GAAjC,CAAsCwC,GAAGxC,GAAzC,CAA8CwC,GAAGxC,GAAjD,EAEA,CALD,IAKO,CAENwC,GAAG1qB,aAAH,CAAkB0qB,GAAG5C,QAArB,EACA4C,GAAG8M,SAAH,CAAc9M,GAAGrC,SAAjB,CAA4BqC,GAAGxC,GAA/B,EAEA,CAED,CAdD,QAcY10B,WAAahvD,MAAMkD,mBAAxB,CAA8C,CAEpD,GAAKg5D,kBAAL,CAA0B,CAEzBgqB,GAAG4M,qBAAH,CAA0B5M,GAAG5C,QAA7B,CAAuC4C,GAAG5C,QAA1C,EACA4C,GAAG6M,iBAAH,CAAsB7M,GAAGzC,IAAzB,CAA+ByC,GAAGzC,IAAlC,CAAwCyC,GAAGtC,mBAA3C,CAAgEsC,GAAGpC,mBAAnE,EAEA,CALD,IAKO,CAENoC,GAAG1qB,aAAH,CAAkB0qB,GAAG5C,QAArB,EACA4C,GAAG8M,SAAH,CAAc9M,GAAGzC,IAAjB,CAAuByC,GAAGtC,mBAA1B,EAEA,CAED,CAdM,QAcK50B,WAAahvD,MAAMmD,gBAAxB,CAA2C,CAEjD,GAAK+4D,kBAAL,CAA0B,CAEzBgqB,GAAG4M,qBAAH,CAA0B5M,GAAG5C,QAA7B,CAAuC4C,GAAG5C,QAA1C,EACA4C,GAAG6M,iBAAH,CAAsB7M,GAAGzC,IAAzB,CAA+ByC,GAAGvC,SAAlC,CAA6CuC,GAAGzC,IAAhD,CAAsDyC,GAAGrC,SAAzD,EAEA,CALD,IAKO,CAENqC,GAAG1qB,aAAH,CAAkB0qB,GAAG5C,QAArB,EACA4C,GAAG8M,SAAH,CAAc9M,GAAGzC,IAAjB,CAAuByC,GAAGvC,SAA1B,EAEA,CAED,CAdM,IAcA,CAEN,GAAKznB,kBAAL,CAA0B,CAEzBgqB,GAAG4M,qBAAH,CAA0B5M,GAAG5C,QAA7B,CAAuC4C,GAAG5C,QAA1C,EACA4C,GAAG6M,iBAAH,CAAsB7M,GAAGxC,GAAzB,CAA8BwC,GAAGpC,mBAAjC,CAAsDoC,GAAGxC,GAAzD,CAA8DwC,GAAGpC,mBAAjE,EAEA,CALD,IAKO,CAENoC,GAAG4M,qBAAH,CAA0B5M,GAAG5C,QAA7B,CAAuC4C,GAAG5C,QAA1C,EACA4C,GAAG6M,iBAAH,CAAsB7M,GAAGrC,SAAzB,CAAoCqC,GAAGpC,mBAAvC,CAA4DoC,GAAGxC,GAA/D,CAAoEwC,GAAGpC,mBAAvE,EAEA,CAED,CAED8O,gBAAkB5jC,QAAlB,CACA6jC,yBAA2B32B,kBAA3B,CAEA,CAED,GAAKlN,WAAahvD,MAAMoD,cAAxB,CAAyC,CAExCu4D,mBAAqBA,oBAAsBH,aAA3C,CACAC,cAAgBA,eAAiBH,QAAjC,CACAI,cAAgBA,eAAiBH,QAAjC,CAEA,GAAKC,gBAAkBy3B,oBAAlB,EAA0Ct3B,qBAAuBu3B,yBAAtE,CAAkG,CAEjGhN,GAAG4M,qBAAH,CAA0B/mB,eAAgBvQ,aAAhB,CAA1B,CAA2DuQ,eAAgBpQ,kBAAhB,CAA3D,EAEAs3B,qBAAuBz3B,aAAvB,CACA03B,0BAA4Bv3B,kBAA5B,CAEA,CAED,GAAKL,WAAa63B,eAAb,EAAgC53B,WAAa63B,eAA7C,EAAgE33B,gBAAkB43B,oBAAlF,EAA0G33B,gBAAkB43B,oBAAjI,CAAwJ,CAEvJpN,GAAG6M,iBAAH,CAAsBhnB,eAAgBzQ,QAAhB,CAAtB,CAAkDyQ,eAAgBxQ,QAAhB,CAAlD,CAA8EwQ,eAAgBtQ,aAAhB,CAA9E,CAA+GsQ,eAAgBrQ,aAAhB,CAA/G,EAEAy3B,gBAAkB73B,QAAlB,CACA83B,gBAAkB73B,QAAlB,CACA83B,qBAAuB53B,aAAvB,CACA63B,qBAAuB53B,aAAvB,CAEA,CAED,CA1BD,IA0BO,CAENu3B,qBAAuB,IAAvB,CACAE,gBAAkB,IAAlB,CACAC,gBAAkB,IAAlB,CACAF,0BAA4B,IAA5B,CACAG,qBAAuB,IAAvB,CACAC,qBAAuB,IAAvB,CAEA,CAED,CApHD;CAwHA,KAAK/c,aAAL,CAAqB,SAAW9f,UAAX,CAAwB,CAE5C,KAAKia,OAAL,CAAanlE,KAAb,CAAmBgoF,OAAnB,CAA4B98B,UAA5B,EAEA,CAJD,CAMA,KAAK4f,YAAL,CAAoB,SAAW9f,SAAX,CAAuB,CAE1C,KAAKma,OAAL,CAAaxY,KAAb,CAAmBs7B,OAAnB,CAA4Bj9B,SAA5B,EAEA,CAJD,CAMA,KAAK+f,aAAL,CAAqB,SAAW9f,UAAX,CAAwB,CAE5C,KAAKka,OAAL,CAAaxY,KAAb,CAAmBq7B,OAAnB,CAA4B/8B,UAA5B,EAEA,CAJD,CAMA,KAAKqiB,YAAL,CAAoB,SAAWjd,SAAX,CAAuB,CAE1C,KAAK8U,OAAL,CAAaxY,KAAb,CAAmBu7B,OAAnB,CAA4B73B,SAA5B,EAEA,CAJD,CAMA,KAAK83B,cAAL,CAAsB,SAAWC,WAAX,CAAyB,CAE9C,KAAKjjB,OAAL,CAAapJ,OAAb,CAAqBksB,OAArB,CAA8BG,WAA9B,EAEA,CAJD,CAMA,KAAKC,eAAL,CAAuB,SAAWC,YAAX,CAA0B,CAEhD,KAAKnjB,OAAL,CAAapJ,OAAb,CAAqBisB,OAArB,CAA8BM,YAA9B,EAEA,CAJD,CAMA,KAAKC,cAAL,CAAsB,SAAWC,WAAX,CAAwBC,UAAxB,CAAoCC,WAApC,CAAkD,CAEvE,KAAKvjB,OAAL,CAAapJ,OAAb,CAAqBmsB,OAArB,CAA8BM,WAA9B,CAA2CC,UAA3C,CAAuDC,WAAvD,EAEA,CAJD,CAMA,KAAKC,YAAL,CAAoB,SAAWC,WAAX,CAAwBC,YAAxB,CAAsCC,YAAtC,CAAqD,CAExE,KAAK3jB,OAAL,CAAapJ,OAAb,CAAqBgtB,KAArB,CAA4BH,WAA5B,CAAyCC,YAAzC,CAAuDC,YAAvD,EAEA,CAJD;CAQA,KAAKzb,YAAL,CAAoB,SAAWqS,SAAX,CAAuB,CAE1C,GAAKsJ,mBAAqBtJ,SAA1B,CAAsC,CAErC,GAAKA,SAAL,CAAiB,CAEhB/E,GAAGsO,SAAH,CAActO,GAAGuO,EAAjB,EAEA,CAJD,IAIO,CAENvO,GAAGsO,SAAH,CAActO,GAAGwO,GAAjB,EAEA,CAEDH,iBAAmBtJ,SAAnB,CAEA,CAED,CAlBD,CAoBA,KAAK5O,WAAL,CAAmB,SAAWF,QAAX,CAAsB,CAExC,GAAKA,WAAan8E,MAAM8B,YAAxB,CAAuC,CAEtC,KAAK24B,MAAL,CAAayrD,GAAGvN,SAAhB,EAEA,GAAKwD,WAAawY,eAAlB,CAAoC,CAEnC,GAAKxY,WAAan8E,MAAM+B,YAAxB,CAAuC,CAEtCmkF,GAAG/J,QAAH,CAAa+J,GAAG0O,IAAhB,EAEA,CAJD,QAIYzY,WAAan8E,MAAMgC,aAAxB,CAAwC,CAE9CkkF,GAAG/J,QAAH,CAAa+J,GAAG2O,KAAhB,EAEA,CAJM,IAIA,CAEN3O,GAAG/J,QAAH,CAAa+J,GAAG4O,cAAhB,EAEA,CAED,CAED,CAtBD,IAsBO,CAEN,KAAKn6D,OAAL,CAAcurD,GAAGvN,SAAjB,EAEA,CAEDgc,gBAAkBxY,QAAlB,CAEA,CAhCD,CAkCA,KAAK5I,YAAL,CAAoB,SAAW7oB,KAAX,CAAmB,CAEtC,GAAKA,QAAUqqC,gBAAf,CAAkC,CAEjC7O,GAAGrS,SAAH,CAAcnpB,KAAd,EAEAqqC,iBAAmBrqC,KAAnB,CAEA,CAED,CAVD,CAYA,KAAKouB,gBAAL,CAAwB,SAAW/c,aAAX,CAA0Bi5B,MAA1B,CAAkCC,KAAlC,CAA0C,CAEjE,GAAKl5B,aAAL,CAAqB,CAEpB,KAAKthC,MAAL,CAAayrD,GAAGgP,mBAAhB,EAEA,GAAKC,6BAA+BH,MAA/B,EAAyCI,4BAA8BH,KAA5E,CAAoF,CAEnF/O,GAAGnqB,aAAH,CAAkBi5B,MAAlB,CAA0BC,KAA1B,EAEAE,2BAA6BH,MAA7B,CACAI,0BAA4BH,KAA5B,CAEA,CAED,CAbD,IAaO,CAEN,KAAKt6D,OAAL,CAAcurD,GAAGgP,mBAAjB,EAEA,CAED,CArBD,CAuBA,KAAKG,cAAL,CAAsB,UAAY,CAEjC,yBAAA,CAEA,CAJD,CAMA,KAAKnnB,cAAL,CAAsB,SAAW0T,WAAX,CAAyB,CAE9C0T,mBAAqB1T,WAArB,CAEA,GAAKA,WAAL,CAAmB,CAElB,KAAKnnD,MAAL,CAAayrD,GAAGqP,YAAhB,EAEA,CAJD,IAIO,CAEN,KAAK56D,OAAL,CAAcurD,GAAGqP,YAAjB,EAEA,CAED,CAdD;CAkBA,KAAKjY,aAAL,CAAqB,SAAWkY,SAAX,CAAuB,CAE3C,GAAKA,YAAcr1F,SAAnB,CAA+Bq1F,UAAYtP,GAAG3I,QAAH,CAAchB,WAAd,CAA4B,CAAxC,CAE/B,GAAKkZ,qBAAuBD,SAA5B,CAAwC,CAEvCtP,GAAG5I,aAAH,CAAkBkY,SAAlB,EACAC,mBAAqBD,SAArB,CAEA,CAED,CAXD,CAaA,KAAKhY,WAAL,CAAmB,SAAWkY,SAAX,CAAsBC,YAAtB,CAAqC,CAEvD,GAAKF,qBAAuB,IAA5B,CAAmC,CAElChgB,MAAM6H,aAAN,GAEA,CAED,iBAAmBsY,qBAAsBH,kBAAtB,CAAnB,CAEA,GAAKI,eAAiB11F,SAAtB,CAAkC,CAEjC01F,aAAe,CAAEl8D,KAAMx5B,SAAR,CAAmB+oD,QAAS/oD,SAA5B,CAAf,CACAy1F,qBAAsBH,kBAAtB,EAA6CI,YAA7C,CAEA,CAED,GAAKA,aAAal8D,IAAb,GAAsB+7D,SAAtB,EAAmCG,aAAa3sC,OAAb,GAAyBysC,YAAjE,CAAgF,CAE/EzP,GAAG1I,WAAH,CAAgBkY,SAAhB,CAA2BC,cAAgB1D,cAAeyD,SAAf,CAA3C,EAEAG,aAAal8D,IAAb,CAAoB+7D,SAApB,CACAG,aAAa3sC,OAAb,CAAuBysC,YAAvB,CAEA,CAED,CA1BD,CA4BA,KAAK9W,oBAAL,CAA4B,UAAY,CAEvC,GAAI,CAEHqH,GAAGrH,oBAAH,CAAwB5mC,KAAxB,CAA+BiuC,EAA/B,CAAmC/kF,SAAnC,EAEA,CAAC,MAAQuV,KAAR,CAAgB,CAEjBvL,QAAQuL,KAAR,CAAeA,KAAf,EAEA,CAED,CAZD,CAcA,KAAKgoE,UAAL,CAAkB,UAAY,CAE7B,GAAI,CAEHwH,GAAGxH,UAAH,CAAczmC,KAAd,CAAqBiuC,EAArB,CAAyB/kF,SAAzB,EAEA,CAAC,MAAQuV,KAAR,CAAgB,CAEjBvL,QAAQuL,KAAR,CAAeA,KAAf,EAEA,CAED,CAZD;CAgBA,KAAK+1D,UAAL,CAAkB,SAAWjjE,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAoBiI,CAApB,CAAwB,CAEzC,KAAK++D,OAAL,CAAanlE,KAAb,CAAmBuqF,QAAnB,CAA6BtsF,CAA7B,CAAgCC,CAAhC,CAAmCC,CAAnC,CAAsCiI,CAAtC,EAEA,CAJD,CAMA,KAAKi9D,UAAL,CAAkB,SAAW1W,KAAX,CAAmB,CAEpC,KAAKwY,OAAL,CAAaxY,KAAb,CAAmB49B,QAAnB,CAA6B59B,KAA7B,EAEA,CAJD,CAMA,KAAK2W,YAAL,CAAoB,SAAWvH,OAAX,CAAqB,CAExC,KAAKoJ,OAAL,CAAapJ,OAAb,CAAqBwuB,QAArB,CAA+BxuB,OAA/B,EAEA,CAJD;CAQA,KAAKqF,OAAL,CAAe,SAAWA,OAAX,CAAqB,CAEnC,GAAKopB,eAAeloF,MAAf,CAAuB8+D,OAAvB,IAAqC,KAA1C,CAAkD,CAEjDuZ,GAAGvZ,OAAH,CAAYA,QAAQpsE,CAApB,CAAuBosE,QAAQv+D,CAA/B,CAAkCu+D,QAAQt+D,CAA1C,CAA6Cs+D,QAAQr+D,CAArD,EACAynF,eAAehsF,IAAf,CAAqB4iE,OAArB,EAEA,CAED,CATD,CAWA,KAAKC,QAAL,CAAgB,SAAWA,QAAX,CAAsB,CAErC,GAAKopB,gBAAgBnoF,MAAhB,CAAwB++D,QAAxB,IAAuC,KAA5C,CAAoD,CAEnDsZ,GAAGtZ,QAAH,CAAaA,SAASrsE,CAAtB,CAAyBqsE,SAASx+D,CAAlC,CAAqCw+D,SAASv+D,CAA9C,CAAiDu+D,SAASt+D,CAA1D,EACA0nF,gBAAgBjsF,IAAhB,CAAsB6iE,QAAtB,EAEA,CAED,CATD;CAaA,KAAK19B,KAAL,CAAa,UAAY,CAExB,IAAM,MAAQ,CAAd,CAAiBryB,EAAIu1E,kBAAkBhxF,MAAvC,CAA+Cyb,GAA/C,CAAsD,CAErD,GAAKu1E,kBAAmBv1E,CAAnB,IAA2B,CAAhC,CAAoC,CAEnCqpE,GAAGsM,wBAAH,CAA6B31E,CAA7B,EACAu1E,kBAAmBv1E,CAAnB,EAAyB,CAAzB,CAEA,CAED,CAEDsvD,aAAe,EAAf,CAEAsmB,yBAA2B,IAA3B,CAEAgD,mBAAqB,IAArB,CACAG,qBAAuB,EAAvB,CAEAhD,gBAAkB,IAAlB,CAEA2B,iBAAmB,IAAnB,CACAI,gBAAkB,IAAlB,CAEA,KAAKjkB,OAAL,CAAanlE,KAAb,CAAmB2jC,KAAnB,GACA,KAAKwhC,OAAL,CAAaxY,KAAb,CAAmBhpB,KAAnB,GACA,KAAKwhC,OAAL,CAAapJ,OAAb,CAAqBp4B,KAArB,GAEA,CA7BD,CA+BA,CAznBD,CA2nBAlvC,MAAM6xF,gBAAN,CAAyB,SAAW3L,EAAX,CAAe1Z,KAAf,CAAuB,CAE/C,WAAa,KAAb,CAEA,UAAY,UAAUxyD,OAAV,EAAZ,CACA,qBAAuB,IAAvB,CACA,sBAAwB,UAAUA,OAAV,EAAxB,CAEA,KAAKu5E,OAAL,CAAe,SAAW0C,SAAX,CAAuB,CAErC,GAAKC,mBAAqBD,SAArB,EAAkC,CAAEE,MAAzC,CAAkD,CAEjDjQ,GAAG+P,SAAH,CAAcA,SAAd,CAAyBA,SAAzB,CAAoCA,SAApC,CAA+CA,SAA/C,EACAC,iBAAmBD,SAAnB,CAEA,CAED,CATD,CAWA,KAAKG,SAAL,CAAiB,SAAWC,IAAX,CAAkB,CAElCF,OAASE,IAAT,CAEA,CAJD,CAMA,KAAKP,QAAL,CAAgB,SAAWtsF,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAoBiI,CAApB,CAAwB,CAEvCpG,MAAM5B,GAAN,CAAWH,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAoBiI,CAApB,EAEA,GAAK2kF,kBAAkBzoF,MAAlB,CAA0BtC,KAA1B,IAAsC,KAA3C,CAAmD,CAElD26E,GAAGzZ,UAAH,CAAejjE,CAAf,CAAkBC,CAAlB,CAAqBC,CAArB,CAAwBiI,CAAxB,EACA2kF,kBAAkBvsF,IAAlB,CAAwBwB,KAAxB,EAEA,CAED,CAXD,CAaA,KAAK2jC,KAAL,CAAa,UAAY,CAExBinD,OAAS,KAAT,CAEAD,iBAAmB,IAAnB,CACAI,kBAAoB,UAAUt8E,OAAV,EAApB,CAEA,CAPD,CASA,CA/CD,CAiDAha,MAAM8xF,gBAAN,CAAyB,SAAU5L,EAAV,CAAc1Z,KAAd,CAAsB,CAE9C,WAAa,KAAb,CAEA,qBAAuB,IAAvB,CACA,qBAAuB,IAAvB,CACA,sBAAwB,IAAxB,CAEA,KAAKgnB,OAAL,CAAe,SAAWj9B,SAAX,CAAuB,CAErC,GAAKA,SAAL,CAAiB,CAEhBiW,MAAM/xC,MAAN,CAAcyrD,GAAGgM,UAAjB,EAEA,CAJD,IAIO,CAEN1lB,MAAM7xC,OAAN,CAAeurD,GAAGgM,UAAlB,EAEA,CAED,CAZD,CAcA,KAAKqB,OAAL,CAAe,SAAUgD,SAAV,CAAqB,CAEnC,GAAKC,mBAAqBD,SAArB,EAAkC,CAAEJ,MAAzC,CAAkD,CAEjDjQ,GAAGqQ,SAAH,CAAcA,SAAd,EACAC,iBAAmBD,SAAnB,CAEA,CAED,CATD,CAWA,KAAK9C,OAAL,CAAe,SAAW73B,SAAX,CAAuB,CAErC,GAAK66B,mBAAqB76B,SAA1B,CAAsC,CAErC,GAAKA,SAAL,CAAiB,CAEhB,OAASA,SAAT,EAEC,WAAWv3D,UAAX,CAEC6hF,GAAGtqB,SAAH,CAAcsqB,GAAGwQ,KAAjB,EACA,MAED,WAAWpyF,WAAX,CAEC4hF,GAAGtqB,SAAH,CAAcsqB,GAAGyQ,MAAjB,EACA,MAED,WAAWpyF,SAAX,CAEC2hF,GAAGtqB,SAAH,CAAcsqB,GAAG0Q,IAAjB,EACA,MAED,WAAWpyF,cAAX,CAEC0hF,GAAGtqB,SAAH,CAAcsqB,GAAG2Q,MAAjB,EACA,MAED,WAAWpyF,UAAX,CAECyhF,GAAGtqB,SAAH,CAAcsqB,GAAG4Q,KAAjB,EACA,MAED,WAAWpyF,iBAAX,CAECwhF,GAAGtqB,SAAH,CAAcsqB,GAAG6Q,MAAjB,EACA,MAED,WAAWpyF,YAAX,CAECuhF,GAAGtqB,SAAH,CAAcsqB,GAAG8Q,OAAjB,EACA,MAED,WAAWpyF,aAAX,CAECshF,GAAGtqB,SAAH,CAAcsqB,GAAG+Q,QAAjB,EACA,MAED,QAEC/Q,GAAGtqB,SAAH,CAAcsqB,GAAG2Q,MAAjB,EA5CF,CAgDA,CAlDD,IAkDO,CAEN3Q,GAAGtqB,SAAH,CAAcsqB,GAAG2Q,MAAjB,EAEA,CAEDJ,iBAAmB76B,SAAnB,CAEA,CAED,CAhED,CAkEA,KAAKw6B,SAAL,CAAiB,SAAWC,IAAX,CAAkB,CAElCF,OAASE,IAAT,CAEA,CAJD,CAMA,KAAKP,QAAL,CAAgB,SAAW59B,KAAX,CAAmB,CAElC,GAAKg/B,oBAAsBh/B,KAA3B,CAAmC,CAElCguB,GAAGtX,UAAH,CAAe1W,KAAf,EACAg/B,kBAAoBh/B,KAApB,CAEA,CAED,CATD,CAWA,KAAKhpB,KAAL,CAAa,UAAY,CAExBinD,OAAS,KAAT,CAEAK,iBAAmB,IAAnB,CACAC,iBAAmB,IAAnB,CACAS,kBAAoB,IAApB,CAEA,CARD,CAUA,CA9HD,CAgIAl3F,MAAM+xF,kBAAN,CAA2B,SAAW7L,EAAX,CAAe1Z,KAAf,CAAuB,CAEjD,WAAa,KAAb,CAEA,uBAAyB,IAAzB,CACA,uBAAyB,IAAzB,CACA,sBAAwB,IAAxB,CACA,2BAA6B,IAA7B,CACA,uBAA0B,IAA1B,CACA,wBAA0B,IAA1B,CACA,wBAA0B,IAA1B,CACA,wBAA0B,IAA1B,CAEA,KAAKgnB,OAAL,CAAe,SAAWG,WAAX,CAAyB,CAEvC,GAAKA,WAAL,CAAmB,CAElBnnB,MAAM/xC,MAAN,CAAcyrD,GAAGiR,YAAjB,EAEA,CAJD,IAIO,CAEN3qB,MAAM7xC,OAAN,CAAeurD,GAAGiR,YAAlB,EAEA,CAED,CAZD,CAcA,KAAK5D,OAAL,CAAe,SAAWU,WAAX,CAAyB,CAEvC,GAAKmD,qBAAuBnD,WAAvB,EAAsC,CAAEkC,MAA7C,CAAsD,CAErDjQ,GAAG+N,WAAH,CAAgBA,WAAhB,EACAmD,mBAAqBnD,WAArB,CAEA,CAED,CATD,CAWA,KAAKR,OAAL,CAAe,SAAWM,WAAX,CAAwBC,UAAxB,CAAoCC,WAApC,CAAkD,CAEhE,GAAKoD,qBAAuBtD,WAAvB,EACAuD,oBAAuBtD,UADvB,EAEAuD,yBAA2BtD,WAFhC,CAE8C,CAE7C/N,GAAG6N,WAAH,CAAgBA,WAAhB,CAA8BC,UAA9B,CAA0CC,WAA1C,EAEAoD,mBAAqBtD,WAArB,CACAuD,kBAAqBtD,UAArB,CACAuD,uBAAyBtD,WAAzB,CAEA,CAED,CAdD,CAgBA,KAAKK,KAAL,CAAc,SAAWH,WAAX,CAAwBC,YAAxB,CAAsCC,YAAtC,CAAqD,CAElE,GAAKmD,qBAAwBrD,WAAxB,EACAsD,sBAAwBrD,YADxB,EAEAsD,sBAAwBrD,YAF7B,CAE4C,CAE3CnO,GAAGyR,SAAH,CAAcxD,WAAd,CAA4BC,YAA5B,CAA0CC,YAA1C,EAEAmD,mBAAsBrD,WAAtB,CACAsD,oBAAsBrD,YAAtB,CACAsD,oBAAsBrD,YAAtB,CAEA,CAED,CAdD,CAgBA,KAAK+B,SAAL,CAAiB,SAAWC,IAAX,CAAkB,CAElCF,OAASE,IAAT,CAEA,CAJD,CAMA,KAAKP,QAAL,CAAgB,SAAWxuB,OAAX,CAAqB,CAEpC,GAAKswB,sBAAwBtwB,OAA7B,CAAuC,CAEtC4e,GAAGrX,YAAH,CAAiBvH,OAAjB,EACAswB,oBAAsBtwB,OAAtB,CAEA,CAED,CATD,CAWA,KAAKp4B,KAAL,CAAa,UAAY,CAExBinD,OAAS,KAAT,CAEAiB,mBAAqB,IAArB,CACAC,mBAAqB,IAArB,CACAC,kBAAoB,IAApB,CACAC,uBAAyB,IAAzB,CACAC,mBAAqB,IAArB,CACAC,oBAAsB,IAAtB,CACAC,oBAAsB,IAAtB,CACAE,oBAAsB,IAAtB,CAEA,CAbD,CAeA,CAtGD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAiKA53F,MAAMq4E,aAAN,CAAwB,UAAW;;AAIlC,AAAIwf,sBAAmB,yBAAA,EAAW,CAEhC,KAAKrf,GAAL,CAAW,EAAX,CACA,KAAKzsB,GAAL,CAAW,EAAX,CAEA,CALF;;CAWC+rC,cAAgB,EAXjB,CAYCC,cAAgB,EAZjB,CAuBCC,QAAU,gBAAA,CAAUhqF,KAAV,CAAiBiqF,OAAjB,CAA0BC,SAA1B,CAAsC,CAE/C,cAAgBlqF,MAAO,CAAP,CAAhB,CAEA,GAAKmqF,WAAa,CAAb,EAAkBA,UAAY,CAAnC,CAAuC,YAAA;;CAIvC,MAAQF,QAAUC,SAAlB,CACC1uF,EAAIsuF,cAAe1zE,CAAf,CADL,CAGA,GAAK5a,IAAMrJ,SAAX,CAAuB,CAEtBqJ,EAAI,gBAAA,CAAkB4a,CAAlB,CAAJ,CACA0zE,cAAe1zE,CAAf,EAAqB5a,CAArB,CAEA,CAED,GAAKyuF,UAAY,CAAjB,CAAqB,CAEpBE,UAAUjqF,OAAV,CAAmB1E,CAAnB,CAAsB,CAAtB,EAEA,IAAM,MAAQ,CAAR,CAAWyE,OAAS,CAA1B,CAA6B4O,IAAMo7E,OAAnC,CAA4C,EAAGp7E,CAA/C,CAAmD,CAElD5O,QAAUiqF,SAAV,CACAlqF,MAAO6O,CAAP,EAAW3O,OAAX,CAAoB1E,CAApB,CAAuByE,MAAvB,EAEA,CAED,CAED,QAAA,CAEA,CAxDF;CA4DCmqF,cAAgB,sBAAA,CAAUpvC,QAAV,CAAoB5kC,CAApB,CAAwB,CAEvC,MAAQ2zE,cAAe3zE,CAAf,CAAR,CAEA,GAAK5a,IAAMrJ,SAAX,CAAuB,CAEtBqJ,EAAI,cAAA,CAAgB4a,CAAhB,CAAJ,CACA2zE,cAAe3zE,CAAf,EAAqB5a,CAArB,CAEA,CAED,IAAM,MAAQ,CAAd,CAAiBqT,IAAMuH,CAAvB,CAA0B,EAAGvH,CAA7B,EACCrT,EAAGqT,CAAH,EAASmsC,SAASy2B,gBAAT,EAAT,CADD,CAGA,QAAA,CAEA,CA5EF;;;;CAqFC4Y,WAAa,mBAAA,CAAUnS,EAAV,CAAc30E,CAAd,CAAkB,CAAE20E,GAAGoS,SAAH,CAAc,KAAKC,IAAnB,CAAyBhnF,CAAzB,EAA+B,CArFjE,CAsFCinF,WAAa,mBAAA,CAAUtS,EAAV,CAAc30E,CAAd,CAAkB,CAAE20E,GAAGuS,SAAH,CAAc,KAAKF,IAAnB,CAAyBhnF,CAAzB,EAA+B,CAtFjE;CA0FCmnF,YAAc,oBAAA,CAAUxS,EAAV,CAAc30E,CAAd,CAAkB,CAE/B,GAAKA,EAAEhR,CAAF,GAAQJ,SAAb,CAAyB+lF,GAAGyS,UAAH,CAAe,KAAKJ,IAApB,CAA0BhnF,CAA1B,EAAzB,QACQqnF,SAAH,CAAc,KAAKL,IAAnB,CAAyBhnF,EAAEhR,CAA3B,CAA8BgR,EAAEnD,CAAhC,EAEL,CA/FF,CAiGCyqF,YAAc,oBAAA,CAAU3S,EAAV,CAAc30E,CAAd,CAAkB,CAE/B,GAAKA,EAAEhR,CAAF,GAAQJ,SAAb,CACC+lF,GAAG4S,SAAH,CAAc,KAAKP,IAAnB,CAAyBhnF,EAAEhR,CAA3B,CAA8BgR,EAAEnD,CAAhC,CAAmCmD,EAAElD,CAArC,EADD,QAEUkD,EAAE/H,CAAF,GAAQrJ,SAAb,CACJ+lF,GAAG4S,SAAH,CAAc,KAAKP,IAAnB,CAAyBhnF,EAAE/H,CAA3B,CAA8B+H,EAAE9H,CAAhC,CAAmC8H,EAAE7H,CAArC,EADI,QAGDqvF,UAAH,CAAe,KAAKR,IAApB,CAA0BhnF,CAA1B,EAED,CA1GF,CA4GCynF,YAAc,oBAAA,CAAU9S,EAAV,CAAc30E,CAAd,CAAkB,CAE/B,GAAKA,EAAEhR,CAAF,GAAQJ,SAAb,CAAyB+lF,GAAG+S,UAAH,CAAe,KAAKV,IAApB,CAA0BhnF,CAA1B,EAAzB,QACQ2nF,SAAH,CAAc,KAAKX,IAAnB,CAAyBhnF,EAAEhR,CAA3B,CAA8BgR,EAAEnD,CAAhC,CAAmCmD,EAAElD,CAArC,CAAwCkD,EAAEjD,CAA1C,EAEL,CAjHF;CAqHC6qF,YAAc,oBAAA,CAAUjT,EAAV,CAAc30E,CAAd,CAAkB,CAE/B20E,GAAGkT,gBAAH,CAAqB,KAAKb,IAA1B,CAAgC,KAAhC,CAAuChnF,EAAExB,QAAF,EAAcwB,CAArD,EAEA,CAzHF,CA2HC8nF,YAAc,oBAAA,CAAUnT,EAAV,CAAc30E,CAAd,CAAkB,CAE/B20E,GAAGoT,gBAAH,CAAqB,KAAKf,IAA1B,CAAgC,KAAhC,CAAuChnF,EAAExB,QAAF,EAAcwB,CAArD,EAEA,CA/HF,CAiICgoF,YAAc,oBAAA,CAAUrT,EAAV,CAAc30E,CAAd,CAAkB,CAE/B20E,GAAGsT,gBAAH,CAAqB,KAAKjB,IAA1B,CAAgC,KAAhC,CAAuChnF,EAAExB,QAAF,EAAcwB,CAArD,EAEA,CArIF;CAyICkoF,WAAa,mBAAA,CAAUvT,EAAV,CAAc30E,CAAd,CAAiBy3C,QAAjB,CAA4B,CAExC,SAAWA,SAASy2B,gBAAT,EAAX,CACAyG,GAAGuS,SAAH,CAAc,KAAKF,IAAnB,CAAyBmB,IAAzB,EACA,GAAKnoF,CAAL,CAASy3C,SAAS02B,YAAT,CAAuBnuE,CAAvB,CAA0BmoF,IAA1B,EAET,CA/IF,CAiJCC,WAAa,mBAAA,CAAUzT,EAAV,CAAc30E,CAAd,CAAiBy3C,QAAjB,CAA4B,CAExC,SAAWA,SAASy2B,gBAAT,EAAX,CACAyG,GAAGuS,SAAH,CAAc,KAAKF,IAAnB,CAAyBmB,IAAzB,EACA,GAAKnoF,CAAL,CAASy3C,SAAS62B,cAAT,CAAyBtuE,CAAzB,CAA4BmoF,IAA5B,EAET,CAvJF;CA2JCE,YAAc,oBAAA,CAAU1T,EAAV,CAAc30E,CAAd,CAAkB,CAAE20E,GAAG2T,UAAH,CAAe,KAAKtB,IAApB,CAA0BhnF,CAA1B,EAAgC,CA3JnE,CA4JCuoF,YAAc,oBAAA,CAAU5T,EAAV,CAAc30E,CAAd,CAAkB,CAAE20E,GAAG6T,UAAH,CAAe,KAAKxB,IAApB,CAA0BhnF,CAA1B,EAAgC,CA5JnE,CA6JCyoF,YAAc,oBAAA,CAAU9T,EAAV,CAAc30E,CAAd,CAAkB,CAAE20E,GAAG+T,UAAH,CAAe,KAAK1B,IAApB,CAA0BhnF,CAA1B,EAAgC,CA7JnE;CAiKC2oF,kBAAoB,0BAAA,CAAUvgE,IAAV,CAAiB,CAEpC,OAASA,IAAT,EAEC,WAAA,CAAa,iBAAA;CACb,WAAA,CAAa,kBAAA;CACb,WAAA,CAAa,kBAAA;CACb,WAAA,CAAa,kBAAA;CAEb,WAAA,CAAa,kBAAA;CACb,WAAA,CAAa,kBAAA;CACb,WAAA,CAAa,kBAAA;CAEb,WAAA,CAAa,iBAAA;CACb,WAAA,CAAa,iBAAA;CAEb,WAAA,CAAa,WAAA,CAAa,iBAAA;CAC1B,WAAA,CAAa,WAAA,CAAa,kBAAA;CAC1B,WAAA,CAAa,WAAA,CAAa,kBAAA;CAC1B,WAAA,CAAa,WAAA,CAAa,kBAAA;CAjB3B,CAqBA,CAxLF;CA4LCwgE,YAAc,oBAAA,CAAUjU,EAAV,CAAc30E,CAAd,CAAkB,CAAE20E,GAAGkU,UAAH,CAAe,KAAK7B,IAApB,CAA0BhnF,CAA1B,EAAgC,CA5LnE,CA6LC8oF,YAAc,oBAAA,CAAUnU,EAAV,CAAc30E,CAAd,CAAkB,CAAE20E,GAAGoU,UAAH,CAAe,KAAK/B,IAApB,CAA0BhnF,CAA1B,EAAgC,CA7LnE;CAiMCgpF,YAAc,oBAAA,CAAUrU,EAAV,CAAc30E,CAAd,CAAkB,CAE/B20E,GAAGyS,UAAH,CAAe,KAAKJ,IAApB,CAA0BP,QAASzmF,CAAT,CAAY,KAAK3F,IAAjB,CAAuB,CAAvB,CAA1B,EAEA,CArMF,CAuMC4uF,YAAc,oBAAA,CAAUtU,EAAV,CAAc30E,CAAd,CAAkB,CAE/B20E,GAAG6S,UAAH,CAAe,KAAKR,IAApB,CAA0BP,QAASzmF,CAAT,CAAY,KAAK3F,IAAjB,CAAuB,CAAvB,CAA1B,EAEA,CA3MF,CA6MC6uF,YAAc,oBAAA,CAAUvU,EAAV,CAAc30E,CAAd,CAAkB,CAE/B20E,GAAG+S,UAAH,CAAe,KAAKV,IAApB,CAA0BP,QAASzmF,CAAT,CAAY,KAAK3F,IAAjB,CAAuB,CAAvB,CAA1B,EAEA,CAjNF;CAqNC8uF,YAAc,oBAAA,CAAUxU,EAAV,CAAc30E,CAAd,CAAkB,CAE/B20E,GAAGkT,gBAAH,CAAqB,KAAKb,IAA1B,CAAgC,KAAhC,CAAuCP,QAASzmF,CAAT,CAAY,KAAK3F,IAAjB,CAAuB,CAAvB,CAAvC,EAEA,CAzNF,CA2NC+uF,YAAc,oBAAA,CAAUzU,EAAV,CAAc30E,CAAd,CAAkB,CAE/B20E,GAAGoT,gBAAH,CAAqB,KAAKf,IAA1B,CAAgC,KAAhC,CAAuCP,QAASzmF,CAAT,CAAY,KAAK3F,IAAjB,CAAuB,CAAvB,CAAvC,EAEA,CA/NF,CAiOCgvF,YAAc,oBAAA,CAAU1U,EAAV,CAAc30E,CAAd,CAAkB,CAE/B20E,GAAGsT,gBAAH,CAAqB,KAAKjB,IAA1B,CAAgC,KAAhC,CAAuCP,QAASzmF,CAAT,CAAY,KAAK3F,IAAjB,CAAuB,EAAvB,CAAvC,EAEA,CArOF;CAyOCivF,YAAc,oBAAA,CAAU3U,EAAV,CAAc30E,CAAd,CAAiBy3C,QAAjB,CAA4B,CAEzC,MAAQz3C,EAAEnQ,MAAV,CACC6zF,MAAQmD,cAAepvC,QAAf,CAAyB5kC,CAAzB,CADT,CAGA8hE,GAAGoU,UAAH,CAAe,KAAK/B,IAApB,CAA0BtD,KAA1B,EAEA,IAAM,MAAQ,CAAd,CAAiBp4E,IAAMuH,CAAvB,CAA0B,EAAGvH,CAA7B,CAAiC,CAEhC,QAAUtL,EAAGsL,CAAH,CAAV,CACA,GAAKi+E,GAAL,CAAW9xC,SAAS02B,YAAT,CAAuBob,GAAvB,CAA4B7F,MAAOp4E,CAAP,CAA5B,EAEX,CAED,CAvPF,CAyPCk+E,YAAc,oBAAA,CAAU7U,EAAV,CAAc30E,CAAd,CAAiBy3C,QAAjB,CAA4B,CAEzC,MAAQz3C,EAAEnQ,MAAV,CACC6zF,MAAQmD,cAAepvC,QAAf,CAAyB5kC,CAAzB,CADT,CAGA8hE,GAAGoU,UAAH,CAAe,KAAK/B,IAApB,CAA0BtD,KAA1B,EAEA,IAAM,MAAQ,CAAd,CAAiBp4E,IAAMuH,CAAvB,CAA0B,EAAGvH,CAA7B,CAAiC,CAEhC,QAAUtL,EAAGsL,CAAH,CAAV,CACA,GAAKi+E,GAAL,CAAW9xC,SAAS62B,cAAT,CAAyBib,GAAzB,CAA8B7F,MAAOp4E,CAAP,CAA9B,EAEX,CAED,CAvQF;CA4QCm+E,mBAAqB,2BAAA,CAAUrhE,IAAV,CAAiB,CAErC,OAASA,IAAT,EAEC,WAAA,CAAa,kBAAA;CACb,WAAA,CAAa,kBAAA;CACb,WAAA,CAAa,kBAAA;CACb,WAAA,CAAa,kBAAA;CAEb,WAAA,CAAa,kBAAA;CACb,WAAA,CAAa,kBAAA;CACb,WAAA,CAAa,kBAAA;CAEb,WAAA,CAAa,kBAAA;CACb,WAAA,CAAa,kBAAA;CAEb,WAAA,CAAa,WAAA,CAAa,kBAAA;CAC1B,WAAA,CAAa,WAAA,CAAa,kBAAA;CAC1B,WAAA,CAAa,WAAA,CAAa,kBAAA;CAC1B,WAAA,CAAa,WAAA,CAAa,kBAAA;CAjB3B,CAqBA,CAnSF;CAuSCshE,cAAgB,sBAAA,CAAwBr8D,EAAxB,CAA4Bs8D,UAA5B,CAAwC3C,IAAxC,CAA+C,CAE9D,KAAK35D,EAAL,CAAUA,EAAV,CACA,KAAK25D,IAAL,CAAYA,IAAZ,CACA,KAAK/3C,QAAL,CAAgB05C,kBAAmBgB,WAAWvhE,IAA9B,CAAhB;CAIA,CA/SF,CAiTCwhE,iBAAmB,yBAAA,CAAUv8D,EAAV,CAAcs8D,UAAd,CAA0B3C,IAA1B,CAAiC,CAEnD,KAAK35D,EAAL,CAAUA,EAAV,CACA,KAAK25D,IAAL,CAAYA,IAAZ,CACA,KAAK3sF,IAAL,CAAYsvF,WAAWtvF,IAAvB,CACA,KAAK40C,QAAL,CAAgBw6C,mBAAoBE,WAAWvhE,IAA/B,CAAhB;CAIA,CA1TF,CA4TCyhE,kBAAoB,0BAAA,CAAUx8D,EAAV,CAAe,CAElC,KAAKA,EAAL,CAAUA,EAAV,CAEAi5D,iBAAiBt2F,IAAjB,CAAuB,IAAvB;CAEA,CAlUF,CAoUA65F,kBAAkB36F,SAAlB,CAA4B+/C,QAA5B,CAAuC,SAAU0lC,EAAV,CAAcp8E,KAAd,CAAsB;;CAK5D,QAAU,KAAK0uE,GAAf,CAEA,IAAM,MAAQ,CAAR,CAAWp0D,EAAIo0D,IAAIp3E,MAAzB,CAAiCyb,IAAMuH,CAAvC,CAA0C,EAAGvH,CAA7C,CAAiD,CAEhD,MAAQ27D,IAAK37D,CAAL,CAAR,CACA6X,EAAE8rB,QAAF,CAAY0lC,EAAZ,CAAgBp8E,MAAO4qB,EAAEkK,EAAT,CAAhB,EAEA,CAED,CAdD;;CAoBA,eAAiB,0BAAjB;;;;;;;;CAUCy8D,WAAa,mBAAA,CAAUC,SAAV,CAAqBC,aAArB,CAAqC,CAEjDD,UAAU9iB,GAAV,CAAc3kD,IAAd,CAAoB0nE,aAApB,EACAD,UAAUvvC,GAAV,CAAewvC,cAAc38D,EAA7B,EAAoC28D,aAApC,CAEA,CAfF,CAiBCC,aAAe,qBAAA,CAAUN,UAAV,CAAsB3C,IAAtB,CAA4B+C,SAA5B,CAAwC,CAEtD,SAAWJ,WAAWx6F,IAAtB,CACC+6F,WAAajiD,KAAKp4C,MADnB;CAIAs6F,WAAW/+C,SAAX,CAAuB,CAAvB,CAEA,OAAU,CAET,UAAY++C,WAAWpwF,IAAX,CAAiBkuC,IAAjB,CAAZ,CACCmiD,SAAWD,WAAW/+C,SADvB,CAGC/d,GAAK79B,MAAO,CAAP,CAHN,CAIC66F,UAAY76F,MAAO,CAAP,IAAe,GAJ5B,CAKC86F,UAAY96F,MAAO,CAAP,CALb,CAOA,GAAK66F,SAAL,CAAiBh9D,GAAKA,GAAK,CAAV;CAEjB,GAAKi9D,YAAc17F,SAAd,EACH07F,YAAc,GAAd,EAAqBF,SAAW,CAAX,GAAiBF,UADxC,CACqD;CAGpDJ,WAAYC,SAAZ,CAAuBO,YAAc17F,SAAd,CACrB,iBAAA,CAAmBy+B,EAAnB,CAAuBs8D,UAAvB,CAAmC3C,IAAnC,CADqB,CAErB,oBAAA,CAAsB35D,EAAtB,CAA0Bs8D,UAA1B,CAAsC3C,IAAtC,CAFF,EAIA,MAEA,CAVD,IAUO;CAGN,QAAU+C,UAAUvvC,GAApB,CACC+vC,KAAO/vC,IAAKntB,EAAL,CADR,CAGA,GAAKk9D,OAAS37F,SAAd,CAA0B,CAEzB27F,KAAO,qBAAA,CAAuBl9D,EAAvB,CAAP,CACAy8D,WAAYC,SAAZ,CAAuBQ,IAAvB,EAEA,CAEDR,UAAYQ,IAAZ,CAEA,CAED,CAED,CAjEF;CAqECzjB,cAAgB,sBAAA,CAAwB6N,EAAxB,CAA4B9V,OAA5B,CAAqCpnB,QAArC,CAAgD,CAE/D6uC,iBAAiBt2F,IAAjB,CAAuB,IAAvB,EAEA,KAAKynD,QAAL,CAAgBA,QAAhB,CAEA,MAAQk9B,GAAGoD,mBAAH,CAAwBlZ,OAAxB,CAAiC8V,GAAG6V,eAApC,CAAR,CAEA,IAAM,MAAQ,CAAd,CAAiBl/E,IAAMuH,CAAvB,CAA0B,EAAGvH,CAA7B,CAAiC,CAEhC,SAAWqpE,GAAG8V,gBAAH,CAAqB5rB,OAArB,CAA8BvzD,CAA9B,CAAX,CACC28B,KAAO8xB,KAAK5qE,IADb,CAEC63F,KAAOrS,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC52B,IAAhC,CAFR,CAIAgiD,aAAclwB,IAAd,CAAoBitB,IAApB,CAA0B,IAA1B,EAEA,CAED,CAvFF,CA0FAlgB,cAAc53E,SAAd,CAAwB+/C,QAAxB,CAAmC,SAAU0lC,EAAV,CAAcxlF,IAAd,CAAoBoJ,KAApB,CAA4B,CAE9D,MAAQ,KAAKiiD,GAAL,CAAUrrD,IAAV,CAAR,CAEA,GAAKg0B,IAAMv0B,SAAX,CAAuBu0B,EAAE8rB,QAAF,CAAY0lC,EAAZ,CAAgBp8E,KAAhB,CAAuB,KAAKk/C,QAA5B,EAEvB,CAND,CAQAqvB,cAAc53E,SAAd,CAAwBkJ,GAAxB,CAA8B,SAAUu8E,EAAV,CAAc3nE,MAAd,CAAsB7d,IAAtB,CAA6B,CAE1D,MAAQ,KAAKqrD,GAAL,CAAUrrD,IAAV,CAAR,CAEA,GAAKg0B,IAAMv0B,SAAX,CAAuBu0B,EAAE8rB,QAAF,CAAY0lC,EAAZ,CAAgB3nE,OAAQ7d,IAAR,CAAhB,CAAgC,KAAKsoD,QAArC,EAEvB,CAND,CAQAqvB,cAAc53E,SAAd,CAAwBk5E,WAAxB,CAAsC,SAAUuM,EAAV,CAAc3nE,MAAd,CAAsB7d,IAAtB,CAA6B,CAElE,MAAQ6d,OAAQ7d,IAAR,CAAR,CAEA,GAAK6Q,IAAMpR,SAAX,CAAuB,KAAKqgD,QAAL,CAAe0lC,EAAf,CAAmBxlF,IAAnB,CAAyB6Q,CAAzB,EAEvB,CAND;CAWA8mE,cAAckC,MAAd,CAAuB,SAAU2L,EAAV,CAAc1N,GAAd,CAAmB3hD,MAAnB,CAA2BmyB,QAA3B,CAAsC,CAE5D,IAAM,MAAQ,CAAR,CAAW5kC,EAAIo0D,IAAIp3E,MAAzB,CAAiCyb,IAAMuH,CAAvC,CAA0C,EAAGvH,CAA7C,CAAiD,CAEhD,MAAQ27D,IAAK37D,CAAL,CAAR,CACCtL,EAAIslB,OAAQnC,EAAEkK,EAAV,CADL,CAGA,GAAKrtB,EAAE25B,WAAF,GAAkB,KAAvB,CAA+B;CAG9BxW,EAAE8rB,QAAF,CAAY0lC,EAAZ,CAAgB30E,EAAEzH,KAAlB,CAAyBk/C,QAAzB,EAEA,CAED,CAED,CAhBD,CAkBAqvB,cAAcC,YAAd,CAA6B,SAAUE,GAAV,CAAe3hD,MAAf,CAAwB,CAEpD,MAAQ,EAAR,CAEA,IAAM,MAAQ,CAAR,CAAWzS,EAAIo0D,IAAIp3E,MAAzB,CAAiCyb,IAAMuH,CAAvC,CAA0C,EAAGvH,CAA7C,CAAiD,CAEhD,MAAQ27D,IAAK37D,CAAL,CAAR,CACA,GAAK6X,EAAEkK,EAAF,UAAL,CAAsBp1B,EAAEqqB,IAAF,CAAQa,CAAR,EAEtB,CAED,QAAA,CAEA,CAbD,CAeA2jD,cAAcK,YAAd,CAA6B,SAAUF,GAAV,CAAe3hD,MAAf,CAAwB,CAEpD,MAAQ,IAAR,CACCzS,EAAIo0D,IAAIp3E,MADT,CAECkN,EAAI,CAFL,CAIA,IAAM,MAAQ,CAAd,CAAiBuO,IAAMuH,CAAvB,CAA0B,EAAGvH,CAA7B,CAAiC,CAEhC,MAAQ27D,IAAK37D,CAAL,CAAR,CACCtL,EAAIslB,OAAQnC,EAAEkK,EAAV,CADL,CAGA,GAAKrtB,GAAKA,EAAE0vB,OAAF,GAAc,IAAxB,CAA+B,CAE9B,GAAKz3B,IAAM,IAAX,CAAkBA,EAAI,EAAJ,CAClBA,EAAEqqB,IAAF,CAAQa,CAAR,EAEA,CALD,IAKO;CAGN,GAAKpmB,EAAIuO,CAAT,CAAa27D,IAAKlqE,CAAL,EAAWomB,CAAX,CACb,EAAGpmB,CAAH,CAEA,CAED,CAED,GAAKA,EAAI8V,CAAT,CAAao0D,IAAIp3E,MAAJ,CAAakN,CAAb,CAEb,QAAA,CAEA,CA9BD,CAgCA+pE,cAAcoC,WAAd,CAA4B,SAAUjC,GAAV,CAAe3hD,MAAf,CAAuBtY,MAAvB,CAA+B5G,MAA/B,CAAwC,CAEnE,IAAM,MAAQ,CAAR,CAAWyM,EAAIo0D,IAAIp3E,MAAzB,CAAiCyb,IAAMuH,CAAvC,CAA0C,EAAGvH,CAA7C,CAAiD,CAEhD,MAAQga,OAAQ2hD,IAAK37D,CAAL,EAAS+hB,EAAjB,CAAR,CACCzqB,EAAI5C,EAAEs7B,gBADP,CAGA,GAAK14B,IAAMhU,SAAX,CAAuBgU,EAAE5S,IAAF,CAAQgQ,CAAR,CAAWgN,MAAX,CAAmB5G,MAAnB,EAEvB,CAED,CAXD,CAaA,oBAAA,CAEA,CAjiBqB,EAAtB;;;;IA2iBA3X,MAAMmtE,eAAN,CAAwB,SAAWnkB,QAAX,CAAqBkzC,MAArB,CAA8B,CAErD,OAASlzC,SAASnF,OAAlB,CACA,UAAYmF,SAASwjB,KAArB,CAEA,gBAAA,CAAkB2vB,aAAlB,CACA,UAAA,CAAY/rB,OAAZ,CAAqBpxD,UAArB,CAAiCk3C,QAAjC,CAEA,eAAA,CAAiBkmC,gBAAjB,CAEA,aAAA,EAAgB,CAEf,aAAe,gBAAA,CAAkB,CAChC,CAAE,CAD8B,CAC3B,CAAE,CADyB,CACrB,CADqB,CAClB,CADkB,CAE/B,CAF+B,CAE5B,CAAE,CAF0B,CAEtB,CAFsB,CAEnB,CAFmB,CAG/B,CAH+B,CAG3B,CAH2B,CAGvB,CAHuB,CAGpB,CAHoB,CAIhC,CAAE,CAJ8B,CAI1B,CAJ0B,CAItB,CAJsB,CAInB,CAJmB,CAAlB,CAAf,CAOA,UAAY,eAAA,CAAiB,CAC5B,CAD4B,CACzB,CADyB,CACtB,CADsB,CAE5B,CAF4B,CAEzB,CAFyB,CAEtB,CAFsB,CAAjB,CAAZ;CAOAC,aAAmBnW,GAAGvV,YAAH,EAAnB,CACAwrB,cAAmBjW,GAAGvV,YAAH,EAAnB,CAEAuV,GAAGlV,UAAH,CAAekV,GAAGjV,YAAlB,CAAgCorB,YAAhC,EACAnW,GAAGhV,UAAH,CAAegV,GAAGjV,YAAlB,CAAgCpyD,QAAhC,CAA0CqnE,GAAGqC,WAA7C,EAEArC,GAAGlV,UAAH,CAAekV,GAAGrT,oBAAlB,CAAwCspB,aAAxC,EACAjW,GAAGhV,UAAH,CAAegV,GAAGrT,oBAAlB,CAAwCxvC,KAAxC,CAA+C6iD,GAAGqC,WAAlD;CAIA+T,YAAmBpW,GAAG7I,aAAH,EAAnB,CACA+e,iBAAmBlW,GAAG7I,aAAH,EAAnB,CAEA7Q,MAAMgR,WAAN,CAAmB0I,GAAGzI,UAAtB,CAAkC6e,WAAlC,EACApW,GAAGxH,UAAH,CAAewH,GAAGzI,UAAlB,CAA8B,CAA9B,CAAiCyI,GAAGhD,GAApC,CAAyC,EAAzC,CAA6C,EAA7C,CAAiD,CAAjD,CAAoDgD,GAAGhD,GAAvD,CAA4DgD,GAAGtR,aAA/D,CAA8E,IAA9E,EACAsR,GAAGxJ,aAAH,CAAkBwJ,GAAGzI,UAArB,CAAiCyI,GAAGvJ,cAApC,CAAoDuJ,GAAGnJ,aAAvD,EACAmJ,GAAGxJ,aAAH,CAAkBwJ,GAAGzI,UAArB,CAAiCyI,GAAGtJ,cAApC,CAAoDsJ,GAAGnJ,aAAvD,EACAmJ,GAAGxJ,aAAH,CAAkBwJ,GAAGzI,UAArB,CAAiCyI,GAAGrJ,kBAApC,CAAwDqJ,GAAG7D,OAA3D,EACA6D,GAAGxJ,aAAH,CAAkBwJ,GAAGzI,UAArB,CAAiCyI,GAAGpJ,kBAApC,CAAwDoJ,GAAG7D,OAA3D,EAEA7V,MAAMgR,WAAN,CAAmB0I,GAAGzI,UAAtB,CAAkC2e,gBAAlC,EACAlW,GAAGxH,UAAH,CAAewH,GAAGzI,UAAlB,CAA8B,CAA9B,CAAiCyI,GAAG/C,IAApC,CAA0C,EAA1C,CAA8C,EAA9C,CAAkD,CAAlD,CAAqD+C,GAAG/C,IAAxD,CAA8D+C,GAAGtR,aAAjE,CAAgF,IAAhF,EACAsR,GAAGxJ,aAAH,CAAkBwJ,GAAGzI,UAArB,CAAiCyI,GAAGvJ,cAApC,CAAoDuJ,GAAGnJ,aAAvD,EACAmJ,GAAGxJ,aAAH,CAAkBwJ,GAAGzI,UAArB,CAAiCyI,GAAGtJ,cAApC,CAAoDsJ,GAAGnJ,aAAvD,EACAmJ,GAAGxJ,aAAH,CAAkBwJ,GAAGzI,UAArB,CAAiCyI,GAAGrJ,kBAApC,CAAwDqJ,GAAG7D,OAA3D,EACA6D,GAAGxJ,aAAH,CAAkBwJ,GAAGzI,UAArB,CAAiCyI,GAAGpJ,kBAApC,CAAwDoJ,GAAG7D,OAA3D,EAEA7K,OAAS,CAERrhB,aAAc,CAEb,8BAFa,CAIb,8BAJa,CAKb,qBALa,CAMb,yBANa,CAQb,iCARa,CAUb,0BAVa,CAWb,oBAXa,CAab,mBAba,CAcb,4BAda,CAgBb,eAhBa,CAkBZ,WAlBY,CAoBZ,sBApBY,CAsBZ,0BAtBY,CAwBX,gEAxBW,CAyBX,4DAzBW,CA0BX,4DA1BW,CA2BX,4DA3BW,CA4BX,4DA5BW,CA6BX,4DA7BW,CA8BX,4DA9BW,CA+BX,4DA/BW,CAgCX,4DAhCW,CAkCX,0CAlCW,CAmCX,0CAnCW,CAoCX,0CApCW,CAqCX,0CArCW,CAuCX,sEAvCW,CAwCX,sEAxCW,CA0CZ,GA1CY,CA4CZ,sFA5CY,CA8Cb,GA9Ca,EAgDZ/lC,IAhDY,CAgDN,IAhDM,CAFN,CAoDRgmC,eAAgB,CAEf,8BAFe,CAIf,wBAJe,CAKf,wBALe,CAMf,qBANe,CAQf,mBARe,CASf,4BATe,CAWf,eAXe;CAed,0BAfc,CAiBb,4CAjBa;CAqBd,iCArBc,CAuBb,uCAvBa;CA2Bd,UA3Bc,CA6Bb,uCA7Ba,CA8Bb,qCA9Ba,CA+Bb,yBA/Ba,CAgCb,4BAhCa,CAkCd,GAlCc,CAoCf,GApCe,EAsCdhmC,IAtCc,CAsCR,IAtCQ,CApDR,CAAT,CA8FAggD,QAAUqa,cAAejT,MAAf,CAAV,CAEAx4D,WAAa,CACZolB,OAAQ8hD,GAAGuD,iBAAH,CAAuBrZ,OAAvB,CAAgC,UAAhC,CADI,CAEZ1rC,GAAQwhD,GAAGuD,iBAAH,CAAuBrZ,OAAvB,CAAgC,IAAhC,CAFI,CAAb,CAKAla,SAAW,CACVqmC,WAAgBrW,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,YAAhC,CADN,CAEVrkB,IAAgBm6B,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,KAAhC,CAFN,CAGVosB,aAAgBtW,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,cAAhC,CAHN,CAIV1e,QAAgBw0B,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,SAAhC,CAJN,CAKV7kE,MAAgB26E,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,OAAhC,CALN,CAMV3pD,MAAgBy/D,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,OAAhC,CANN,CAOVvzC,SAAgBqpD,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,UAAhC,CAPN,CAQVqsB,eAAgBvW,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,gBAAhC,CARN,CAAX,CAWA;;;;KAQD,KAAK/mB,MAAL,CAAc,SAAWJ,KAAX,CAAkBtxC,MAAlB,CAA0Bi1D,QAA1B,CAAqC,CAElD,GAAKsvB,OAAO96F,MAAP,GAAkB,CAAvB,CAA2B,OAE3B,iBAAmB,UAAU2P,OAAV,EAAnB,CAEA,cAAgB67D,SAASt+D,CAAT,CAAas+D,SAASv+D,CAAtC,CACCquF,kBAAoB9vB,SAASv+D,CAAT,CAAa,GADlC,CAECsuF,mBAAqB/vB,SAASt+D,CAAT,CAAa,GAFnC,CAIA,SAAW,GAAKs+D,SAASt+D,CAAzB,CACCmY,MAAQ,UAAUrS,OAAV,CAAmBxI,KAAOgxF,SAA1B,CAAqChxF,IAArC,CADT,CAGA,mBAAqB,UAAUmF,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,CAArB,CACC8rF,qBAAuB,UAAUzoF,OAAV,CAAmB,CAAnB,CAAsB,CAAtB,CADxB,CAGA,cAAgB,UAAUmI,IAAV,EAAhB,CAEAugF,UAAUrxF,GAAV,CAAc9B,GAAd,CAAmB,CAAnB,CAAsB,CAAtB,EACAmzF,UAAUlwF,GAAV,CAAcjD,GAAd,CAAmBijE,SAASv+D,CAAT,CAAa,EAAhC,CAAoCu+D,SAASt+D,CAAT,CAAa,EAAjD,EAEA,GAAK8hE,UAAYjwE,SAAjB,CAA6B,CAE5BusE,OAEA,CAEDwZ,GAAG9M,UAAH,CAAehJ,OAAf,EAEA5D,MAAMgE,cAAN,GACAhE,MAAM6E,eAAN,CAAuBryD,WAAWolB,MAAlC,EACAooC,MAAM6E,eAAN,CAAuBryD,WAAW0lB,EAAlC,EACA8nC,MAAMsF,uBAAN;;CAKAoU,GAAGuS,SAAH,CAAcviC,SAASsmC,YAAvB,CAAqC,CAArC,EACAtW,GAAGuS,SAAH,CAAcviC,SAASnK,GAAvB,CAA4B,CAA5B,EAEAm6B,GAAGlV,UAAH,CAAekV,GAAGjV,YAAlB,CAAgCorB,YAAhC,EACAnW,GAAG5U,mBAAH,CAAwBtyD,WAAWolB,MAAnC,CAA2C,CAA3C,CAA8C8hD,GAAG3U,KAAjD,CAAwD,KAAxD,CAA+D,EAAI,CAAnE,CAAsE,CAAtE,EACA2U,GAAG5U,mBAAH,CAAwBtyD,WAAW0lB,EAAnC,CAAuC,CAAvC,CAA0CwhD,GAAG3U,KAA7C,CAAoD,KAApD,CAA2D,EAAI,CAA/D,CAAkE,CAAlE,EAEA2U,GAAGlV,UAAH,CAAekV,GAAGrT,oBAAlB,CAAwCspB,aAAxC,EAEA3vB,MAAM7xC,OAAN,CAAeurD,GAAGvN,SAAlB,EACAnM,MAAM8J,aAAN,CAAqB,KAArB,EAEA,IAAM,MAAQ,CAAR,CAAW1rE,EAAIsxF,OAAO96F,MAA5B,CAAoCyb,EAAIjS,CAAxC,CAA2CiS,GAA3C,CAAkD,CAEjDjR,KAAO,GAAKghE,SAASt+D,CAArB,CACAmY,MAAM9c,GAAN,CAAWiC,KAAOgxF,SAAlB,CAA6BhxF,IAA7B;CAIA,UAAYswF,OAAQr/E,CAAR,CAAZ,CAEAkgF,aAAapzF,GAAb,CAAkB87D,MAAMxtD,WAAN,CAAkBlI,QAAlB,CAA4B,EAA5B,CAAlB,CAAoD01D,MAAMxtD,WAAN,CAAkBlI,QAAlB,CAA4B,EAA5B,CAApD,CAAsF01D,MAAMxtD,WAAN,CAAkBlI,QAAlB,CAA4B,EAA5B,CAAtF,EAEAgtF,aAAahmF,YAAb,CAA2BY,OAAOqwC,kBAAlC,EACA+0C,aAAa/lF,eAAb,CAA8BW,OAAOI,gBAArC;CAIA0kF,eAAe1yF,IAAf,CAAqBgzF,YAArB;CAIAF,qBAAqBt8F,CAArB,CAAyBqsE,SAASrsE,CAAT,CAAek8F,eAAel8F,CAAf,CAAmBm8F,iBAAlC,CAAwDA,iBAAxD,CAA4E,CAArG,CACAG,qBAAqBzuF,CAArB,CAAyBw+D,SAASx+D,CAAT,CAAequF,eAAeruF,CAAf,CAAmBuuF,kBAAlC,CAAyDA,kBAAzD,CAA8E,CAAvG;CAIA,GAAKG,UAAUz/E,aAAV,CAAyBw/E,oBAAzB,IAAoD,IAAzD,CAAgE;CAI/DrwB,MAAM8Q,aAAN,CAAqB4I,GAAG3I,QAAxB,EACA/Q,MAAMgR,WAAN,CAAmB0I,GAAGzI,UAAtB,CAAkC,IAAlC,EACAjR,MAAM8Q,aAAN,CAAqB4I,GAAG8W,QAAxB,EACAxwB,MAAMgR,WAAN,CAAmB0I,GAAGzI,UAAtB,CAAkC6e,WAAlC,EACApW,GAAG+W,cAAH,CAAmB/W,GAAGzI,UAAtB,CAAkC,CAAlC,CAAqCyI,GAAGhD,GAAxC,CAA6C2Z,qBAAqBt8F,CAAlE,CAAqEs8F,qBAAqBzuF,CAA1F,CAA6F,EAA7F,CAAiG,EAAjG,CAAqG,CAArG;CAKA83E,GAAGuS,SAAH,CAAcviC,SAASqmC,UAAvB,CAAmC,CAAnC,EACArW,GAAG0S,SAAH,CAAc1iC,SAASzvC,KAAvB,CAA8BA,MAAMlmB,CAApC,CAAuCkmB,MAAMrY,CAA7C,EACA83E,GAAG4S,SAAH,CAAc5iC,SAASumC,cAAvB,CAAuCA,eAAel8F,CAAtD,CAAyDk8F,eAAeruF,CAAxE,CAA2EquF,eAAepuF,CAA1F,EAEAm+D,MAAM7xC,OAAN,CAAeurD,GAAGkK,KAAlB,EACA5jB,MAAM/xC,MAAN,CAAcyrD,GAAGgM,UAAjB,EAEAhM,GAAGF,YAAH,CAAiBE,GAAGlU,SAApB,CAA+B,CAA/B,CAAkCkU,GAAG3R,cAArC,CAAqD,CAArD;CAKA/H,MAAM8Q,aAAN,CAAqB4I,GAAG3I,QAAxB,EACA/Q,MAAMgR,WAAN,CAAmB0I,GAAGzI,UAAtB,CAAkC2e,gBAAlC,EACAlW,GAAG+W,cAAH,CAAmB/W,GAAGzI,UAAtB,CAAkC,CAAlC,CAAqCyI,GAAG/C,IAAxC,CAA8C0Z,qBAAqBt8F,CAAnE,CAAsEs8F,qBAAqBzuF,CAA3F,CAA8F,EAA9F,CAAkG,EAAlG,CAAsG,CAAtG;CAKA83E,GAAGuS,SAAH,CAAcviC,SAASqmC,UAAvB,CAAmC,CAAnC,EACA/vB,MAAM7xC,OAAN,CAAeurD,GAAGgM,UAAlB,EAEA1lB,MAAM8Q,aAAN,CAAqB4I,GAAG8W,QAAxB,EACAxwB,MAAMgR,WAAN,CAAmB0I,GAAGzI,UAAtB,CAAkC6e,WAAlC,EACApW,GAAGF,YAAH,CAAiBE,GAAGlU,SAApB,CAA+B,CAA/B,CAAkCkU,GAAG3R,cAArC,CAAqD,CAArD;CAKA9O,MAAMH,cAAN,CAAqBv7D,IAArB,CAA2B0yF,cAA3B,EAEA,GAAKh3B,MAAMF,oBAAX,CAAkC,CAEjCE,MAAMF,oBAAN,CAA4BE,KAA5B,EAEA,CAJD,IAIO,CAENA,MAAMD,gBAAN,GAEA;CAID0gB,GAAGuS,SAAH,CAAcviC,SAASqmC,UAAvB,CAAmC,CAAnC,EACA/vB,MAAM/xC,MAAN,CAAcyrD,GAAGkK,KAAjB,EAEA,IAAM,MAAQ,CAAR,CAAW9rD,GAAKmhC,MAAMJ,UAAN,CAAiBjkE,MAAvC,CAA+Cof,EAAI8jB,EAAnD,CAAuD9jB,GAAvD,CAA8D,CAE7D,WAAailD,MAAMJ,UAAN,CAAkB7kD,CAAlB,CAAb,CAEA,GAAK8N,OAAOojC,OAAP,CAAiB,KAAjB,EAA0BpjC,OAAO7H,KAAP,CAAe,KAA9C,CAAsD,CAErDg2E,eAAel8F,CAAf,CAAmB+tB,OAAO/tB,CAA1B,CACAk8F,eAAeruF,CAAf,CAAmBkgB,OAAOlgB,CAA1B,CACAquF,eAAepuF,CAAf,CAAmBigB,OAAOjgB,CAA1B,CAEAzC,KAAO0iB,OAAO1iB,IAAP,CAAc0iB,OAAO7H,KAArB,CAA6BmmD,SAASt+D,CAA7C,CAEAmY,MAAMlmB,CAAN,CAAUqL,KAAOgxF,SAAjB,CACAn2E,MAAMrY,CAAN,CAAUxC,IAAV,CAEAs6E,GAAG4S,SAAH,CAAc5iC,SAASumC,cAAvB,CAAuCA,eAAel8F,CAAtD,CAAyDk8F,eAAeruF,CAAxE,CAA2EquF,eAAepuF,CAA1F,EACA63E,GAAG0S,SAAH,CAAc1iC,SAASzvC,KAAvB,CAA8BA,MAAMlmB,CAApC,CAAuCkmB,MAAMrY,CAA7C,EACA83E,GAAGoS,SAAH,CAAcpiC,SAASr5B,QAAvB,CAAiCvO,OAAOuO,QAAxC,EAEAqpD,GAAGoS,SAAH,CAAcpiC,SAASxE,OAAvB,CAAgCpjC,OAAOojC,OAAvC,EACAw0B,GAAG4S,SAAH,CAAc5iC,SAAS3qD,KAAvB,CAA8B+iB,OAAO/iB,KAAP,CAAa/B,CAA3C,CAA8C8kB,OAAO/iB,KAAP,CAAa9B,CAA3D,CAA8D6kB,OAAO/iB,KAAP,CAAa7B,CAA3E,EAEA8iE,MAAMyJ,WAAN,CAAmB3nD,OAAO0gC,QAA1B,CAAoC1gC,OAAOktC,aAA3C,CAA0DltC,OAAOgtC,QAAjE,CAA2EhtC,OAAOitC,QAAlF,EACAvS,SAAS02B,YAAT,CAAuBpxD,OAAO46B,OAA9B,CAAuC,CAAvC,EAEAg9B,GAAGF,YAAH,CAAiBE,GAAGlU,SAApB,CAA+B,CAA/B,CAAkCkU,GAAG3R,cAArC,CAAqD,CAArD,EAEA,CAED,CAED,CAED;CAID/H,MAAM/xC,MAAN,CAAcyrD,GAAGvN,SAAjB,EACAnM,MAAM/xC,MAAN,CAAcyrD,GAAGgM,UAAjB,EACA1lB,MAAM8J,aAAN,CAAqB,IAArB,EAEAttB,SAAS+lB,YAAT,GAEA,CAhLD,CAkLA,sBAAA,CAAyByI,MAAzB,CAAkC,CAEjC,YAAc0O,GAAGuE,aAAH,EAAd,CAEA,mBAAqBvE,GAAGsI,YAAH,CAAiBtI,GAAGI,eAApB,CAArB,CACA,iBAAmBJ,GAAGsI,YAAH,CAAiBtI,GAAGE,aAApB,CAAnB,CAEA,WAAa,aAAep9B,SAAS0kB,YAAT,EAAf,CAAyC,WAAtD,CAEAwY,GAAGuI,YAAH,CAAiBr4B,cAAjB,CAAiC+2B,OAAS3V,OAAOphB,cAAjD,EACA8vB,GAAGuI,YAAH,CAAiBt4B,YAAjB,CAA+Bg3B,OAAS3V,OAAOrhB,YAA/C,EAEA+vB,GAAGwI,aAAH,CAAkBt4B,cAAlB,EACA8vB,GAAGwI,aAAH,CAAkBv4B,YAAlB,EAEA+vB,GAAGiG,YAAH,CAAiB/b,OAAjB,CAA0Bha,cAA1B,EACA8vB,GAAGiG,YAAH,CAAiB/b,OAAjB,CAA0Bja,YAA1B,EAEA+vB,GAAGqG,WAAH,CAAgBnc,OAAhB,EAEA,cAAA,CAEA,CAED,CAxXD;;;;IAiYApwE,MAAMitE,YAAN,CAAqB,SAAWjkB,QAAX,CAAqBkkB,OAArB,CAA+B,CAEnD,OAASlkB,SAASnF,OAAlB,CACA,UAAYmF,SAASwjB,KAArB,CAEA,gBAAA,CAAkB2vB,aAAlB,CACA,WAAA,CAAan9E,UAAb,CAAyBk3C,QAAzB,CAEA,WAAA;CAIA,mBAAqB,UAAUnlD,OAAV,EAArB,CACA,mBAAqB,UAAU5C,UAAV,EAArB,CACA,gBAAkB,UAAU4C,OAAV,EAAlB,CAEA,aAAA,EAAgB,CAEf,aAAe,gBAAA,CAAkB,CAChC,CAAE,GAD8B,CACzB,CAAE,GADuB,CACjB,CADiB,CACd,CADc,CAE9B,GAF8B,CAEzB,CAAE,GAFuB,CAEjB,CAFiB,CAEd,CAFc,CAG9B,GAH8B,CAGvB,GAHuB,CAGjB,CAHiB,CAGd,CAHc,CAIhC,CAAE,GAJ8B,CAIvB,GAJuB,CAIjB,CAJiB,CAId,CAJc,CAAlB,CAAf,CAOA,UAAY,eAAA,CAAiB,CAC5B,CAD4B,CACzB,CADyB,CACtB,CADsB,CAE5B,CAF4B,CAEzB,CAFyB,CAEtB,CAFsB,CAAjB,CAAZ,CAKAsrF,aAAgBnW,GAAGvV,YAAH,EAAhB,CACAwrB,cAAgBjW,GAAGvV,YAAH,EAAhB,CAEAuV,GAAGlV,UAAH,CAAekV,GAAGjV,YAAlB,CAAgCorB,YAAhC,EACAnW,GAAGhV,UAAH,CAAegV,GAAGjV,YAAlB,CAAgCpyD,QAAhC,CAA0CqnE,GAAGqC,WAA7C,EAEArC,GAAGlV,UAAH,CAAekV,GAAGrT,oBAAlB,CAAwCspB,aAAxC,EACAjW,GAAGhV,UAAH,CAAegV,GAAGrT,oBAAlB,CAAwCxvC,KAAxC,CAA+C6iD,GAAGqC,WAAlD,EAEAnY,QAAUqa,eAAV,CAEAzrE,WAAa,CACZuI,SAAY2+D,GAAGuD,iBAAH,CAAuBrZ,OAAvB,CAAgC,UAAhC,CADA,CAEZ1rC,GAAQwhD,GAAGuD,iBAAH,CAAuBrZ,OAAvB,CAAgC,IAAhC,CAFI,CAAb,CAKAla,SAAW,CACVgnC,SAAYhX,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,UAAhC,CADF,CAEV+sB,QAAWjX,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,SAAhC,CAFD,CAIVvzC,SAAYqpD,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,UAAhC,CAJF,CAKV3pD,MAAUy/D,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,OAAhC,CALA,CAOV7kE,MAAU26E,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,OAAhC,CAPA,CAQVrkB,IAAQm6B,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,KAAhC,CARE,CASV1e,QAAWw0B,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,SAAhC,CATD,CAWVnzC,gBAAkBipD,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,iBAAhC,CAXR,CAYVr4D,iBAAkBmuE,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,kBAAhC,CAZR,CAcVgtB,QAAWlX,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,SAAhC,CAdD,CAeVgL,WAAc8K,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,YAAhC,CAfJ,CAgBV8K,QAAWgL,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,SAAhC,CAhBD,CAiBV+K,OAAW+K,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,QAAhC,CAjBD,CAkBV6K,SAAYiL,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,UAAhC,CAlBF,CAoBV9Z,UAAa4vB,GAAG+V,kBAAH,CAAuB7rB,OAAvB,CAAgC,WAAhC,CApBH,CAAX,CAuBA,WAAahd,SAASC,aAAT,CAAwB,QAAxB,CAAb,CACAqM,OAAOhV,KAAP,CAAe,CAAf,CACAgV,OAAO/U,MAAP,CAAgB,CAAhB,CAEA,YAAc+U,OAAOC,UAAP,CAAmB,IAAnB,CAAd,CACA9b,QAAQw5C,SAAR,CAAoB,OAApB,CACAx5C,QAAQy5C,QAAR,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,CAA2B,CAA3B,EAEAp0C,QAAU,UAAUsQ,OAAV,CAAmBkG,MAAnB,CAAV,CACAxW,QAAQhe,WAAR,CAAsB,IAAtB,CAEA,CAED,KAAKme,MAAL,CAAc,SAAWJ,KAAX,CAAkBtxC,MAAlB,CAA2B,CAExC,GAAKu1D,QAAQ9rE,MAAR,GAAmB,CAAxB,CAA4B;CAI5B,GAAKgvE,UAAYjwE,SAAjB,CAA6B,CAE5BusE,OAEA,CAEDwZ,GAAG9M,UAAH,CAAehJ,OAAf,EAEA5D,MAAMgE,cAAN,GACAhE,MAAM6E,eAAN,CAAuBryD,WAAWuI,QAAlC,EACAilD,MAAM6E,eAAN,CAAuBryD,WAAW0lB,EAAlC,EACA8nC,MAAMsF,uBAAN,GAEAtF,MAAM7xC,OAAN,CAAeurD,GAAGvN,SAAlB,EACAnM,MAAM/xC,MAAN,CAAcyrD,GAAGkK,KAAjB,EAEAlK,GAAGlV,UAAH,CAAekV,GAAGjV,YAAlB,CAAgCorB,YAAhC,EACAnW,GAAG5U,mBAAH,CAAwBtyD,WAAWuI,QAAnC,CAA6C,CAA7C,CAAgD2+D,GAAG3U,KAAnD,CAA0D,KAA1D,CAAiE,EAAI,CAArE,CAAwE,CAAxE,EACA2U,GAAG5U,mBAAH,CAAwBtyD,WAAW0lB,EAAnC,CAAuC,CAAvC,CAA0CwhD,GAAG3U,KAA7C,CAAoD,KAApD,CAA2D,EAAI,CAA/D,CAAkE,CAAlE,EAEA2U,GAAGlV,UAAH,CAAekV,GAAGrT,oBAAlB,CAAwCspB,aAAxC,EAEAjW,GAAGsT,gBAAH,CAAqBtjC,SAASn+C,gBAA9B,CAAgD,KAAhD,CAAuDJ,OAAOI,gBAAP,CAAwBhI,QAA/E,EAEAy8D,MAAM8Q,aAAN,CAAqB4I,GAAG3I,QAAxB,EACA2I,GAAGuS,SAAH,CAAcviC,SAASnK,GAAvB,CAA4B,CAA5B,EAEA,eAAiB,CAAjB,CACA,iBAAmB,CAAnB,CACA,QAAU9C,MAAMmS,GAAhB,CAEA,GAAKA,GAAL,CAAW,CAEV8qB,GAAG4S,SAAH,CAAc5iC,SAAS+kB,QAAvB,CAAiC7f,IAAI7vD,KAAJ,CAAU/B,CAA3C,CAA8C4xD,IAAI7vD,KAAJ,CAAU9B,CAAxD,CAA2D2xD,IAAI7vD,KAAJ,CAAU7B,CAArE,EAEA,GAAK0xD,qBAAqB2K,GAA1B,CAAgC,CAE/BmgB,GAAGoS,SAAH,CAAcpiC,SAASglB,OAAvB,CAAgC9f,IAAInzC,IAApC,EACAi+D,GAAGoS,SAAH,CAAcpiC,SAASilB,MAAvB,CAA+B/f,IAAIlzC,GAAnC,EAEAg+D,GAAGuS,SAAH,CAAcviC,SAASknC,OAAvB,CAAgC,CAAhC,EACAG,WAAa,CAAb,CACAC,aAAe,CAAf,CAEA,CATD,QASYpiC,qBAAqB4K,OAA1B,CAAoC,CAE1CkgB,GAAGoS,SAAH,CAAcpiC,SAASklB,UAAvB,CAAmChgB,IAAI6K,OAAvC,EAEAigB,GAAGuS,SAAH,CAAcviC,SAASknC,OAAvB,CAAgC,CAAhC,EACAG,WAAa,CAAb,CACAC,aAAe,CAAf,CAEA,CAED,CAvBD,IAuBO,CAENtX,GAAGuS,SAAH,CAAcviC,SAASknC,OAAvB,CAAgC,CAAhC,EACAG,WAAa,CAAb,CACAC,aAAe,CAAf,CAEA;CAKD,IAAM,MAAQ,CAAR,CAAW5yF,EAAIsiE,QAAQ9rE,MAA7B,CAAqCyb,EAAIjS,CAAzC,CAA4CiS,GAA5C,CAAmD,CAElD,WAAaqwD,QAASrwD,CAAT,CAAb,CAEAyR,OAAO2O,eAAP,CAAuBnlB,gBAAvB,CAAyCH,OAAOqwC,kBAAhD,CAAoE15B,OAAOrW,WAA3E,EACAqW,OAAOjgB,CAAP,CAAW,CAAEigB,OAAO2O,eAAP,CAAuBltB,QAAvB,CAAiC,EAAjC,CAAb,CAEA,CAEDm9D,QAAQ/wC,IAAR,CAAcu5C,iBAAd;CAIA,UAAY,EAAZ,CAEA,IAAM,MAAQ,CAAR,CAAW9qE,EAAIsiE,QAAQ9rE,MAA7B,CAAqCyb,EAAIjS,CAAzC,CAA4CiS,GAA5C,CAAmD,CAElD,WAAaqwD,QAASrwD,CAAT,CAAb,CACA,aAAeyR,OAAO+R,QAAtB,CAEA6lD,GAAGoS,SAAH,CAAcpiC,SAASI,SAAvB,CAAkCj2B,SAASi2B,SAA3C,EACA4vB,GAAGsT,gBAAH,CAAqBtjC,SAASj5B,eAA9B,CAA+C,KAA/C,CAAsD3O,OAAO2O,eAAP,CAAuBltB,QAA7E,EAEAue,OAAOrW,WAAP,CAAmBuP,SAAnB,CAA8Bi2E,cAA9B,CAA8CC,cAA9C,CAA8DC,WAA9D,EAEAl3E,MAAO,CAAP,EAAak3E,YAAYp9F,CAAzB,CACAkmB,MAAO,CAAP,EAAak3E,YAAYvvF,CAAzB,CAEA,YAAc,CAAd,CAEA,GAAK66C,MAAMmS,GAAN,EAAa/6B,SAAS+6B,GAA3B,CAAiC,CAEhCgiC,QAAUI,YAAV,CAEA,CAED,GAAKD,aAAeH,OAApB,CAA8B,CAE7BlX,GAAGuS,SAAH,CAAcviC,SAASknC,OAAvB,CAAgCA,OAAhC,EACAG,WAAaH,OAAb,CAEA,CAED,GAAK/8D,SAAS0rB,GAAT,GAAiB,IAAtB,CAA6B,CAE5Bm6B,GAAG0S,SAAH,CAAc1iC,SAASgnC,QAAvB,CAAiC78D,SAAS0rB,GAAT,CAAa99C,MAAb,CAAoB1N,CAArD,CAAwD8/B,SAAS0rB,GAAT,CAAa99C,MAAb,CAAoBG,CAA5E,EACA83E,GAAG0S,SAAH,CAAc1iC,SAASinC,OAAvB,CAAgC98D,SAAS0rB,GAAT,CAAayC,MAAb,CAAoBjuD,CAApD,CAAuD8/B,SAAS0rB,GAAT,CAAayC,MAAb,CAAoBpgD,CAA3E,EAEA,CALD,IAKO,CAEN83E,GAAG0S,SAAH,CAAc1iC,SAASgnC,QAAvB,CAAiC,CAAjC,CAAoC,CAApC,EACAhX,GAAG0S,SAAH,CAAc1iC,SAASinC,OAAvB,CAAgC,CAAhC,CAAmC,CAAnC,EAEA,CAEDjX,GAAGoS,SAAH,CAAcpiC,SAASxE,OAAvB,CAAgCrxB,SAASqxB,OAAzC,EACAw0B,GAAG4S,SAAH,CAAc5iC,SAAS3qD,KAAvB,CAA8B80B,SAAS90B,KAAT,CAAe/B,CAA7C,CAAgD62B,SAAS90B,KAAT,CAAe9B,CAA/D,CAAkE42B,SAAS90B,KAAT,CAAe7B,CAAjF,EAEAw8E,GAAGoS,SAAH,CAAcpiC,SAASr5B,QAAvB,CAAiCwD,SAASxD,QAA1C,EACAqpD,GAAGyS,UAAH,CAAeziC,SAASzvC,KAAxB,CAA+BA,KAA/B,EAEA+lD,MAAMyJ,WAAN,CAAmB51C,SAAS2uB,QAA5B,CAAsC3uB,SAASm7B,aAA/C,CAA8Dn7B,SAASi7B,QAAvE,CAAiFj7B,SAASk7B,QAA1F,EACAiR,MAAM6J,YAAN,CAAoBh2C,SAASk2B,SAA7B,EACAiW,MAAM8J,aAAN,CAAqBj2C,SAASm2B,UAA9B,EAEA,GAAKn2B,SAAS0rB,GAAd,CAAoB,CAEnB/C,SAAS02B,YAAT,CAAuBr/C,SAAS0rB,GAAhC,CAAqC,CAArC,EAEA,CAJD,IAIO,CAEN/C,SAAS02B,YAAT,CAAuBx2B,OAAvB,CAAgC,CAAhC,EAEA,CAEDg9B,GAAGF,YAAH,CAAiBE,GAAGlU,SAApB,CAA+B,CAA/B,CAAkCkU,GAAG3R,cAArC,CAAqD,CAArD,EAEA;CAID/H,MAAM/xC,MAAN,CAAcyrD,GAAGvN,SAAjB,EAEA3vB,SAAS+lB,YAAT,GAEA,CA5JD,CA8JA,sBAAA,EAA0B,CAEzB,YAAcmX,GAAGuE,aAAH,EAAd,CAEA,iBAAmBvE,GAAGsI,YAAH,CAAiBtI,GAAGE,aAApB,CAAnB,CACA,mBAAqBF,GAAGsI,YAAH,CAAiBtI,GAAGI,eAApB,CAArB,CAEAJ,GAAGuI,YAAH,CAAiBt4B,YAAjB,CAA+B,CAE9B,aAAenN,SAAS0kB,YAAT,EAAf,CAAyC,SAFX,CAI9B,+BAJ8B,CAK9B,gCAL8B,CAM9B,yBAN8B,CAO9B,qBAP8B,CAQ9B,wBAR8B,CAS9B,uBAT8B,CAW9B,0BAX8B,CAY9B,oBAZ8B,CAc9B,mBAd8B,CAgB9B,eAhB8B,CAkB7B,gCAlB6B,CAoB7B,0CApB6B,CAsB7B,uBAtB6B,CAuB7B,gGAvB6B,CAwB7B,gGAxB6B,CA0B7B,qBA1B6B,CA4B7B,+DA5B6B,CA6B7B,sCA7B6B,CA8B7B,mDA9B6B,CAgC7B,8BAhC6B,CAkC9B,GAlC8B,EAoC7Bt9C,IApC6B,CAoCvB,IApCuB,CAA/B,EAsCA81D,GAAGuI,YAAH,CAAiBr4B,cAAjB,CAAiC,CAEhC,aAAepN,SAAS0kB,YAAT,EAAf,CAAyC,SAFT,CAIhC,qBAJgC,CAKhC,wBALgC,CAMhC,wBANgC,CAQhC,sBARgC,CAShC,wBATgC,CAUhC,2BAVgC,CAWhC,wBAXgC,CAYhC,uBAZgC,CAahC,0BAbgC,CAehC,mBAfgC,CAiBhC,eAjBgC,CAmB/B,uCAnB+B,CAqB/B,uCArB+B,CAuB/B,kEAvB+B,CAyB/B,sBAzB+B,CA2B9B,gDA3B8B,CA4B9B,wBA5B8B,CA8B9B,uBA9B8B,CAgC7B,mDAhC6B,CAkC9B,UAlC8B,CAoC7B,8BApC6B,CAqC7B,uEArC6B,CAsC7B,iDAtC6B,CAwC9B,GAxC8B,CA0C9B,kFA1C8B,CA4C/B,GA5C+B,CA8ChC,GA9CgC,EAgD/Bt9C,IAhD+B,CAgDzB,IAhDyB,CAAjC,EAkDA81D,GAAGwI,aAAH,CAAkBv4B,YAAlB,EACA+vB,GAAGwI,aAAH,CAAkBt4B,cAAlB,EAEA8vB,GAAGiG,YAAH,CAAiB/b,OAAjB,CAA0Bja,YAA1B,EACA+vB,GAAGiG,YAAH,CAAiB/b,OAAjB,CAA0Bha,cAA1B,EAEA8vB,GAAGqG,WAAH,CAAgBnc,OAAhB,EAEA,cAAA,CAEA,CAED,0BAAA,CAA6Bz+D,CAA7B,CAAgCjI,CAAhC,CAAoC,CAEnC,GAAKiI,EAAE6rB,WAAF,GAAkB9zB,EAAE8zB,WAAzB,CAAuC,CAEtC,SAASA,WAAF,CAAgB9zB,EAAE8zB,WAAzB,CAEA,CAJD,QAIY7rB,EAAEtD,CAAF,GAAQ3E,EAAE2E,CAAf,CAAmB,CAEzB,SAASA,CAAF,CAAMsD,EAAEtD,CAAf,CAEA,CAJM,IAIA,CAEN,SAASuwB,EAAF,CAAOjtB,EAAEitB,EAAhB,CAEA,CAED,CAED,CA7WD;;;IAqXAj+B,OAAOK,MAAP,CAAehB,KAAf,CAAsB,CACrB49F,MAAO,eAAWjsF,CAAX,CAAcjI,CAAd,CAAiBoE,CAAjB,CAAoBmJ,CAApB,CAAuB+B,MAAvB,CAA+BzN,KAA/B,CAAsCq1B,aAAtC,CAAsD,CAC5Dz1B,QAAQC,IAAR,CAAc,sEAAd,EACA,iBAAiBu1B,KAAV,CAAiBhvB,CAAjB,CAAoBjI,CAApB,CAAuBoE,CAAvB,CAA0BkL,MAA1B,CAAkCzN,KAAlC,CAAyCq1B,aAAzC,CAAP,CACA,CAJoB,CAKrBi9D,UAAW,CALU,CAMrBC,WAAY,CANS,CAOrBC,iBAAkB/9F,MAAMg+D,aAPH,CAQrBziC,WAAY,oBAAW5c,QAAX,CAAqB0hB,QAArB,CAAgC,CAC3Cl1B,QAAQC,IAAR,CAAc,oDAAd,EACA,iBAAiB+vB,MAAV,CAAkBxc,QAAlB,CAA4B0hB,QAA5B,CAAP,CACA,CAXoB,CAYrB29D,SAAUh+F,MAAMq7B,MAZK,CAarB4iE,eAAgB,wBAAWt/E,QAAX,CAAqB0hB,QAArB,CAAgC,CAC/Cl1B,QAAQC,IAAR,CAAc,wDAAd,EACA,iBAAiB+vB,MAAV,CAAkBxc,QAAlB,CAA4B0hB,QAA5B,CAAP,CACA,CAhBoB,CAiBrB69D,mBAAoB,4BAAW51D,UAAX,CAAwB,CAC3Cn9B,QAAQC,IAAR,CAAc,oEAAd,EACA,iBAAiB6yD,cAAV,CAA0B31B,UAA1B,CAAP,CACA,CApBoB,CAqBrB61D,sBAAuB,+BAAW71D,UAAX,CAAwB,CAC9Cn9B,QAAQC,IAAR,CAAc,uEAAd,EACA,iBAAiB6yD,cAAV,CAA0B31B,UAA1B,CAAP,CACA,CAxBoB,CAyBrB81D,uBAAwB,gCAAW91D,UAAX,CAAwB,CAC/Cn9B,QAAQC,IAAR,CAAc,wEAAd,EACA,iBAAiB6yD,cAAV,CAA0B31B,UAA1B,CAAP,CACA,CA5BoB,CA6BrB+1D,OAAQ,gBAAW99F,CAAX,CAAc6N,CAAd,CAAiBC,CAAjB,CAAqB,CAC5BlD,QAAQC,IAAR,CAAc,2DAAd,EACA,iBAAiB2F,OAAV,CAAmBxQ,CAAnB,CAAsB6N,CAAtB,CAAyBC,CAAzB,CAAP,CACA,CAhCoB,CAAtB;CAqCA1N,OAAOK,MAAP,CAAehB,MAAMuc,IAAN,CAAW9b,SAA1B,CAAqC,CACpCyrB,MAAO,gBAAY,CAClB/gB,QAAQC,IAAR,CAAc,sDAAd,EACA,YAAY8R,OAAL,EAAP,CACA,CAJmC,CAKpCohF,kBAAmB,2BAAWrhF,GAAX,CAAiB,CACnC9R,QAAQC,IAAR,CAAc,wEAAd,EACA,YAAYoS,aAAL,CAAoBP,GAApB,CAAP,CACA,CARmC,CAArC,EAWAtc,OAAOK,MAAP,CAAehB,MAAM8d,IAAN,CAAWrd,SAA1B,CAAqC,CACpCyrB,MAAO,gBAAY,CAClB/gB,QAAQC,IAAR,CAAc,sDAAd,EACA,YAAY8R,OAAL,EAAP,CACA,CAJmC,CAKpCohF,kBAAmB,2BAAWrhF,GAAX,CAAiB,CACnC9R,QAAQC,IAAR,CAAc,wEAAd,EACA,YAAYoS,aAAL,CAAoBP,GAApB,CAAP,CACA,CARmC,CASpCshF,qBAAsB,8BAAWp/E,MAAX,CAAoB,CACzChU,QAAQC,IAAR,CAAc,8EAAd,EACA,YAAY8T,gBAAL,CAAuBC,MAAvB,CAAP,CACA,CAZmC,CAArC,EAeAxe,OAAOK,MAAP,CAAehB,MAAM0f,OAAN,CAAcjf,SAA7B,CAAwC,CACvC+9F,gBAAiB,yBAAW5lF,MAAX,CAAoB,CACpCzN,QAAQC,IAAR,CAAc,gGAAd,EACA,cAAcyL,YAAP,CAAqB,IAArB,CAAP,CACA,CAJsC,CAKvC4nF,qBAAsB,8BAAW9sF,CAAX,CAAe,CACpCxG,QAAQC,IAAR,CAAc,2GAAd,EACA,YAAYmV,mBAAL,CAA0B5O,CAA1B,CAAP,CACA,CARsC,CAAxC,EAWAhR,OAAOK,MAAP,CAAehB,MAAM6X,OAAN,CAAcpX,SAA7B,CAAwC,CACvCi+F,gBAAiB,yBAAWrzF,CAAX,CAAe,CAC/BF,QAAQC,IAAR,CAAc,wEAAd,EACA,YAAYgX,YAAL,CAAmB/W,CAAnB,CAAP,CACA,CAJsC,CAKvCyyB,0BAA2B,mCAAWtzB,CAAX,CAAe,CACzCW,QAAQC,IAAR,CAAc,gGAAd,EACA,YAAY6P,0BAAL,CAAiCzQ,CAAjC,CAAP,CACA,CARsC,CASvCg0F,gBAAiB,yBAAW5lF,MAAX,CAAoB,CACpCzN,QAAQC,IAAR,CAAc,oIAAd,EACA,cAAc4L,eAAP,CAAwB,IAAxB,CAAP,CACA,CAZsC,CAavC2nF,gBAAiB,yBAAW/lF,MAAX,CAAoB,CACpCzN,QAAQC,IAAR,CAAc,gGAAd,EACA,cAAc2L,YAAP,CAAqB,IAArB,CAAP,CACA,CAhBsC,CAiBvC0nF,qBAAsB,8BAAW9sF,CAAX,CAAe,CACpCxG,QAAQC,IAAR,CAAc,2GAAd,EACA,YAAYmV,mBAAL,CAA0B5O,CAA1B,CAAP,CACA,CApBsC,CAqBvCitF,WAAY,oBAAWrtF,CAAX,CAAe,CAC1BpG,QAAQC,IAAR,CAAc,kGAAd,EACAmG,EAAE4G,kBAAF,CAAsB,IAAtB,EACA,CAxBsC,CAyBvC0mF,YAAa,qBAAWjmF,MAAX,CAAoB,CAChCzN,QAAQC,IAAR,CAAc,4FAAd,EACA,cAAc2L,YAAP,CAAqB,IAArB,CAAP,CACA,CA5BsC,CA6BvC8G,UAAW,mBAAWtM,CAAX,CAAe,CACzBpG,QAAQuL,KAAR,CAAe,+CAAf,EACA,CA/BsC,CAgCvCunB,QAAS,iBAAWruB,KAAX,CAAmB,CAC3BzE,QAAQuL,KAAR,CAAe,6CAAf,EACA,CAlCsC,CAmCvCwnB,QAAS,iBAAWtuB,KAAX,CAAmB,CAC3BzE,QAAQuL,KAAR,CAAe,6CAAf,EACA,CArCsC,CAsCvCynB,QAAS,iBAAWvuB,KAAX,CAAmB,CAC3BzE,QAAQuL,KAAR,CAAe,6CAAf,EACA,CAxCsC,CAyCvCooF,aAAc,sBAAWnvF,IAAX,CAAiBC,KAAjB,CAAyB,CACtCzE,QAAQuL,KAAR,CAAe,kDAAf,EACA,CA3CsC,CAAxC,EA8CA/V,OAAOK,MAAP,CAAehB,MAAM8sB,KAAN,CAAYrsB,SAA3B,CAAsC,CACrCs+F,mBAAoB,4BAAWrjF,IAAX,CAAkB,CACrCvQ,QAAQC,IAAR,CAAc,2EAAd,EACA,YAAY6jB,cAAL,CAAqBvT,IAArB,CAAP,CACA,CAJoC,CAAtC,EAOA/a,OAAOK,MAAP,CAAehB,MAAMmO,UAAN,CAAiB1N,SAAhC,CAA2C,CAC1C+9F,gBAAiB,yBAAW5lF,MAAX,CAAoB,CACpCzN,QAAQC,IAAR,CAAc,iHAAd,EACA,cAAcuL,eAAP,CAAwB,IAAxB,CAAP,CACA,CAJyC,CAA3C,EAOAhW,OAAOK,MAAP,CAAehB,MAAM6oB,GAAN,CAAUpoB,SAAzB,CAAoC,CACnC69F,kBAAmB,2BAAWrhF,GAAX,CAAiB,CACnC9R,QAAQC,IAAR,CAAc,uEAAd,EACA,YAAYoS,aAAL,CAAoBP,GAApB,CAAP,CACA,CAJkC,CAKnC+hF,oBAAqB,6BAAW1/E,KAAX,CAAmB,CACvCnU,QAAQC,IAAR,CAAc,2EAAd,EACA,YAAYiU,eAAL,CAAsBC,KAAtB,CAAP,CACA,CARkC,CASnCi/E,qBAAsB,8BAAWp/E,MAAX,CAAoB,CACzChU,QAAQC,IAAR,CAAc,6EAAd,EACA,YAAY8T,gBAAL,CAAuBC,MAAvB,CAAP,CACA,CAZkC,CAApC,EAeAxe,OAAOK,MAAP,CAAehB,MAAM+Q,OAAN,CAActQ,SAA7B,CAAwC,CACvCw+F,2BAA4B,qCAAY,CACvC9zF,QAAQuL,KAAR,CAAe,2GAAf,EACA,CAHsC,CAIvCwoF,uBAAwB,iCAAY,CACnC/zF,QAAQuL,KAAR,CAAe,mGAAf,EACA,CANsC,CAOvCyoF,sBAAuB,+BAAW9zF,CAAX,CAAe,CACrCF,QAAQC,IAAR,CAAc,uFAAd,EACA,YAAYqO,qBAAL,CAA4BpO,CAA5B,CAAP,CACA,CAVsC,CAWvC+zF,mBAAoB,4BAAW/zF,CAAX,CAAe,CAClCF,QAAQC,IAAR,CAAc,iFAAd,EACA,YAAYuO,kBAAL,CAAyBtO,CAAzB,CAAP,CACA,CAdsC,CAevCg0F,oBAAqB,6BAAWn+F,KAAX,CAAkB0W,MAAlB,CAA2B,CAC/CzM,QAAQC,IAAR,CAAc,mFAAd,EACA,YAAYsO,mBAAL,CAA0B9B,MAA1B,CAAkC1W,KAAlC,CAAP,CACA,CAlBsC,CAAxC;CAuBAP,OAAOK,MAAP,CAAehB,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAyC,CACxC6+F,eAAgB,wBAAW5+F,IAAX,CAAkB,CACjCyK,QAAQC,IAAR,CAAc,2EAAd,EACA,YAAY0zB,eAAL,CAAsBp+B,IAAtB,CAAP,CACA,CAJuC,CAKxC6+F,YAAa,qBAAWz1F,KAAX,CAAmB,CAC/BqB,QAAQC,IAAR,CAAc,2EAAd,EACA,CAPuC,CAQxCyS,UAAW,mBAAWjC,QAAX,CAAqBjM,IAArB,CAA4B,CACtCxE,QAAQC,IAAR,CAAc,gGAAd,EACA,YAAYgzB,eAAL,CAAsBzuB,IAAtB,CAA4BiM,QAA5B,CAAP,CACA,CAXuC,CAAzC,EAcAjb,OAAO26B,gBAAP,CAAyBt7B,MAAMy8B,QAAN,CAAeh8B,SAAxC,CAAmD,CAClD++F,WAAY,CACX3+F,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,qDAAd,EACA,YAAYyxB,QAAL,CAAc1tB,KAArB,CACA,CAJU,CAKXxF,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,qDAAd,EACA,KAAKyxB,QAAL,CAAc1tB,KAAd,CAAsBrF,KAAtB,CACA,CARU,CADsC,CAWlD21F,cAAe,CACd5+F,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,+FAAd,EACA,CAHa,CAIdzB,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,+FAAd,EACA,CANa,CAXmC,CAAnD,EAqBAzK,OAAO26B,gBAAP,CAAyBt7B,MAAMk7B,GAAN,CAAUz6B,SAAnC,CAA8C,CAC7C67B,QAAS,CACRz7B,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,kDAAd,EACA,YAAY4uD,MAAZ,CACA,CAJO,CADoC,CAA9C;CAWAh6D,MAAMi8B,iBAAN,CAAwBx7B,SAAxB,CAAkCi/F,OAAlC,CAA4C,SAAW11C,WAAX,CAAwBH,SAAxB,CAAoC,CAE/E1+C,QAAQC,IAAR,CAAc,kDACZ,8DADF,EAGA,GAAKy+C,YAAc1pD,SAAnB,CAA+B,KAAK0pD,SAAL,CAAiBA,SAAjB,CAC/B,KAAKE,cAAL,CAAqBC,WAArB,EAEA,CARD;CAYArpD,OAAO26B,gBAAP,CAAyBt7B,MAAMurD,KAAN,CAAY9qD,SAArC,CAAgD,CAC/Ck/F,WAAY,CACXh2F,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,4CAAd,EACA,CAHU,CADmC,CAM/Cw0F,gBAAiB,CAChBj2F,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,0DAAd,EACA,KAAK8gD,MAAL,CAAYv0C,MAAZ,CAAmByQ,GAAnB,CAAyBte,KAAzB,CACA,CAJe,CAN8B,CAY/C+1F,iBAAkB,CACjBl2F,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,4DAAd,EACA,KAAK8gD,MAAL,CAAYv0C,MAAZ,CAAmBkQ,IAAnB,CAA0B/d,KAA1B,CACA,CAJgB,CAZ6B,CAkB/Cg2F,kBAAmB,CAClBn2F,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,8DAAd,EACA,KAAK8gD,MAAL,CAAYv0C,MAAZ,CAAmBmQ,KAAnB,CAA2Bhe,KAA3B,CACA,CAJiB,CAlB4B,CAwB/Ci2F,gBAAiB,CAChBp2F,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,0DAAd,EACA,KAAK8gD,MAAL,CAAYv0C,MAAZ,CAAmBqQ,GAAnB,CAAyBle,KAAzB,CACA,CAJe,CAxB8B,CA8B/Ck2F,mBAAoB,CACnBr2F,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,gEAAd,EACA,KAAK8gD,MAAL,CAAYv0C,MAAZ,CAAmBoQ,MAAnB,CAA4Bje,KAA5B,CACA,CAJkB,CA9B2B,CAoC/Cm2F,iBAAkB,CACjBt2F,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,4DAAd,EACA,KAAK8gD,MAAL,CAAYv0C,MAAZ,CAAmBsQ,IAAnB,CAA0Bne,KAA1B,CACA,CAJgB,CApC6B,CA0C/Co2F,gBAAiB,CAChBv2F,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,0DAAd,EACA,KAAK8gD,MAAL,CAAYv0C,MAAZ,CAAmBuQ,GAAnB,CAAyBpe,KAAzB,CACA,CAJe,CA1C8B,CAgD/Cq2F,oBAAqB,CACpBx2F,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,gHAAd,EACA,CAHmB,CAhD0B,CAqD/CywE,WAAY,CACXlyE,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,+CAAd,EACA,KAAK8gD,MAAL,CAAYL,IAAZ,CAAmB/hD,KAAnB,CACA,CAJU,CArDmC,CA2D/Cs2F,eAAgB,CACfz2F,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,gDAAd,EACA,CAHc,CA3D+B,CAgE/Ci1F,eAAgB,CACf12F,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,4DAAd,EACA,KAAK8gD,MAAL,CAAYJ,OAAZ,CAAoBpB,KAApB,CAA4B5gD,KAA5B,CACA,CAJc,CAhE+B,CAsE/Cw2F,gBAAiB,CAChB32F,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,8DAAd,EACA,KAAK8gD,MAAL,CAAYJ,OAAZ,CAAoBnB,MAApB,CAA6B7gD,KAA7B,CACA,CAJe,CAtE8B,CAAhD;CAgFAnJ,OAAO26B,gBAAP,CAAyBt7B,MAAM+gC,eAAN,CAAsBtgC,SAA/C,CAA0D,CACzDW,OAAQ,CACPP,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,wEAAd,EACA,YAAY4C,KAAL,CAAW5M,MAAlB,CACA,CAJM,CADiD,CAA1D,EASAT,OAAOK,MAAP,CAAehB,MAAM+e,cAAN,CAAqBte,SAApC,CAA+C,CAC9C8/F,SAAU,kBAAWr/F,KAAX,CAAmB,CAC5BiK,QAAQC,IAAR,CAAc,oEAAd,EACA,KAAKu/B,QAAL,CAAezpC,KAAf,EACA,CAJ6C,CAK9Cs/F,YAAa,qBAAWhlF,KAAX,CAAkB2lB,KAAlB,CAAyBs/D,WAAzB,CAAuC,CACnD,GAAKA,cAAgBtgG,SAArB,CAAiC,CAChCgL,QAAQC,IAAR,CAAc,sEAAd,EACA,CACDD,QAAQC,IAAR,CAAc,0DAAd,EACA,KAAK2/B,QAAL,CAAevvB,KAAf,CAAsB2lB,KAAtB,EACA,CAX6C,CAY9Cu/D,eAAgB,yBAAY,CAC3Bv1F,QAAQC,IAAR,CAAc,gEAAd,EACA,KAAK4/B,WAAL,GACA,CAf6C,CAgB9CzE,gBAAiB,0BAAY,CAC5Bp7B,QAAQC,IAAR,CAAc,4DAAd,EACA,CAlB6C,CAmB9Cu1F,eAAgB,yBAAY,CAC3Bx1F,QAAQC,IAAR,CAAc,2DAAd,EACA,CArB6C,CAA/C,EAwBAzK,OAAO26B,gBAAP,CAAyBt7B,MAAM+e,cAAN,CAAqBte,SAA9C,CAAyD,CACxDo1D,UAAW,CACVh1D,IAAK,cAAY,CAChBsK,QAAQuL,KAAR,CAAe,+DAAf,EACA,YAAYwuB,MAAZ,CACA,CAJS,CAD6C,CAOxD4wB,QAAS,CACRj1D,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,6DAAd,EACA,YAAY85B,MAAZ,CACA,CAJO,CAP+C,CAAzD;CAiBAvkC,OAAO26B,gBAAP,CAAyBt7B,MAAMk7D,QAAN,CAAez6D,SAAxC,CAAmD,CAClDmgG,WAAY,CACX//F,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,SAAW,KAAKuuB,IAAhB,CAAuB,iCAArC,EACA,CAHU,CAIXhwB,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,SAAW,KAAKuuB,IAAhB,CAAuB,iCAArC,EACA,CANU,CADsC,CASlDknE,QAAS,CACRhgG,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,SAAW,KAAKuuB,IAAhB,CAAuB,8BAArC,EACA,iBAAiBpwB,KAAV,EAAP,CACA,CAJO,CATyC,CAAnD,EAiBA5I,OAAO26B,gBAAP,CAAyBt7B,MAAM29D,iBAAN,CAAwBl9D,SAAjD,CAA4D,CAC3DqgG,MAAO,CACNjgG,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,2FAAd,EACA,YAAA,CACA,CAJK,CAKNzB,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,0FAAd,EACA,CAPK,CADoD,CAA5D,EAYAzK,OAAO26B,gBAAP,CAAyBt7B,MAAMk+D,cAAN,CAAqBz9D,SAA9C,CAAyD,CACxD49D,YAAa,CACZx9D,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,+EAAd,EACA,YAAYgzD,UAAL,CAAgBC,WAAvB,CACA,CAJW,CAKZ10D,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,gFAAd,EACA,KAAKgzD,UAAL,CAAgBC,WAAhB,CAA8Bv0D,KAA9B,CACA,CARW,CAD2C,CAAzD;CAeA9J,MAAMy5B,eAAN,CAAsBh5B,SAAtB,CAAkCE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAe;CAI/DvtB,YAAa7J,MAAMy5B,eAJ4C,CAM/Dwe,MAAO,eAAWh3C,MAAX,CAAoB,CAE1BkK,QAAQC,IAAR,CAAc,gDACZ,wDADF,EAGAzK,OAAOK,MAAP,CAAeC,MAAf,CAAuB,IAAvB,EAEA,CAb8D,CAAf,CAAf,CAe7BjB,MAAMy5B,eAAN,CAAsBh5B,SAfO,CAAlC;CAmBAE,OAAOK,MAAP,CAAehB,MAAMinE,aAAN,CAAoBxmE,SAAnC,CAA8C,CAC7CsgG,sBAAuB,gCAAY,CAClC51F,QAAQC,IAAR,CAAc,gGAAd,EACA,YAAYgzD,UAAL,CAAgBv9D,GAAhB,CAAqB,mBAArB,CAAP,CACA,CAJ4C,CAK7CmgG,0BAA2B,oCAAY,CACtC71F,QAAQC,IAAR,CAAc,yGAAd,EACA,YAAYgzD,UAAL,CAAgBv9D,GAAhB,CAAqB,wBAArB,CAAP,CACA,CAR4C,CAS7CogG,4BAA6B,sCAAY,CACxC91F,QAAQC,IAAR,CAAc,6GAAd,EACA,YAAYgzD,UAAL,CAAgBv9D,GAAhB,CAAqB,0BAArB,CAAP,CACA,CAZ4C,CAa7CqgG,8BAA+B,wCAAY,CAC1C/1F,QAAQC,IAAR,CAAc,oHAAd,EACA,YAAYgzD,UAAL,CAAgBv9D,GAAhB,CAAqB,+BAArB,CAAP,CACA,CAhB4C,CAiB7CsgG,+BAAgC,yCAAY,CAC3Ch2F,QAAQC,IAAR,CAAc,sHAAd,EACA,YAAYgzD,UAAL,CAAgBv9D,GAAhB,CAAqB,gCAArB,CAAP,CACA,CApB4C,CAqB7CugG,oBAAqB,8BAAY,CAChCj2F,QAAQC,IAAR,CAAc,6FAAd,EACA,YAAYgzD,UAAL,CAAgBv9D,GAAhB,CAAqB,kBAArB,CAAP,CACA,CAxB4C,CAyB7CgqF,uBAAwB,iCAAY,CACnC,YAAY1e,YAAL,CAAkBmb,cAAzB,CACA,CA3B4C,CA4B7C+Z,wBAAyB,kCAAY,CACpCl2F,QAAQC,IAAR,CAAc,uGAAd,EACA,YAAYgzD,UAAL,CAAgBv9D,GAAhB,CAAqB,wBAArB,CAAP,CACA,CA/B4C,CAgC7CygG,kBAAmB,2BAAWnzB,OAAX,CAAqB,CACvChjE,QAAQC,IAAR,CAAc,qEAAd,EACA,KAAK8iE,cAAL,CAAqBC,OAArB,EACA,CAnC4C,CAoC7C8K,aAAc,uBAAY,CACzB9tE,QAAQC,IAAR,CAAc,wDAAd,EACA,CAtC4C,CAuC7Cm2F,aAAc,uBAAY,CACzBp2F,QAAQC,IAAR,CAAc,wDAAd,EACA,CAzC4C,CA0C7Co2F,cAAe,wBAAY,CAC1Br2F,QAAQC,IAAR,CAAc,yDAAd,EACA,CA5C4C,CA6C7Cq2F,gBAAiB,0BAAY,CAC5Bt2F,QAAQC,IAAR,CAAc,2DAAd,EACA,CA/C4C,CAA9C,EAkDAzK,OAAO26B,gBAAP,CAAyBt7B,MAAMinE,aAAN,CAAoBxmE,SAA7C,CAAwD,CACvDyqF,iBAAkB,CACjBrqF,IAAK,cAAY,CAChB,YAAYmsE,SAAL,CAAe7jC,OAAtB,CACA,CAHgB,CAIjBx/B,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,mEAAd,EACA,KAAK4hE,SAAL,CAAe7jC,OAAf,CAAyBr/B,KAAzB,CACA,CAPgB,CADqC,CAUvDogF,cAAe,CACdrpF,IAAK,cAAY,CAChB,YAAYmsE,SAAL,CAAerzC,IAAtB,CACA,CAHa,CAIdhwB,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,6DAAd,EACA,KAAK4hE,SAAL,CAAerzC,IAAf,CAAsB7vB,KAAtB,CACA,CAPa,CAVwC,CAmBvD43F,kBAAmB,CAClB7gG,IAAK,cAAY,CAChB,YAAYmsE,SAAL,CAAemP,QAAtB,CACA,CAHiB,CAIlBxyE,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,qEAAd,EACA,KAAK4hE,SAAL,CAAemP,QAAf,CAA0BryE,KAA1B,CACA,CAPiB,CAnBoC,CAAxD,EA8BAnJ,OAAO26B,gBAAP,CAAyBt7B,MAAM+sE,cAAN,CAAqBtsE,SAA9C,CAAyD,CACxD07E,SAAU,CACTt7E,IAAK,cAAY,CAChB,YAAYqvF,kBAAL,CAA0BlwF,MAAMgC,aAAhC,CAAgDhC,MAAM+B,YAA7D,CACA,CAHQ,CAIT4H,IAAK,aAAWwyE,QAAX,CAAsB,CAC1B,UAAcA,WAAan8E,MAAM+B,YAAjC,CACAoJ,QAAQC,IAAR,CAAc,0FAA4FtB,KAA5F,CAAoG,GAAlH,EACA,KAAKomF,kBAAL,CAA0BpmF,KAA1B,CACA,CARQ,CAD8C,CAAzD;CAeAnJ,OAAO26B,gBAAP,CAAyBt7B,MAAM46E,iBAAN,CAAwBn6E,SAAjD,CAA4D,CAC3DquD,MAAO,CACNjuD,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,wDAAd,EACA,YAAY89C,OAAL,CAAa4F,KAApB,CACA,CAJK,CAKNnlD,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,wDAAd,EACA,KAAK89C,OAAL,CAAa4F,KAAb,CAAqBhlD,KAArB,CACA,CARK,CADoD,CAW3DilD,MAAO,CACNluD,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,wDAAd,EACA,YAAY89C,OAAL,CAAa6F,KAApB,CACA,CAJK,CAKNplD,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,wDAAd,EACA,KAAK89C,OAAL,CAAa6F,KAAb,CAAqBjlD,KAArB,CACA,CARK,CAXoD,CAqB3D4+C,UAAW,CACV7nD,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,gEAAd,EACA,YAAY89C,OAAL,CAAaR,SAApB,CACA,CAJS,CAKV/+C,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,gEAAd,EACA,KAAK89C,OAAL,CAAaR,SAAb,CAAyB5+C,KAAzB,CACA,CARS,CArBgD,CA+B3D6+C,UAAW,CACV9nD,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,gEAAd,EACA,YAAY89C,OAAL,CAAaP,SAApB,CACA,CAJS,CAKVh/C,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,gEAAd,EACA,KAAK89C,OAAL,CAAaP,SAAb,CAAyB7+C,KAAzB,CACA,CARS,CA/BgD,CAyC3D4kD,WAAY,CACX7tD,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,kEAAd,EACA,YAAY89C,OAAL,CAAawF,UAApB,CACA,CAJU,CAKX/kD,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,kEAAd,EACA,KAAK89C,OAAL,CAAawF,UAAb,CAA0B5kD,KAA1B,CACA,CARU,CAzC+C,CAmD3DmE,OAAQ,CACPpN,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,0DAAd,EACA,YAAY89C,OAAL,CAAaj7C,MAApB,CACA,CAJM,CAKPtE,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,0DAAd,EACA,KAAK89C,OAAL,CAAaj7C,MAAb,CAAsBnE,KAAtB,CACA,CARM,CAnDmD,CA6D3D0kD,OAAQ,CACP3tD,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,0DAAd,EACA,YAAY89C,OAAL,CAAasF,MAApB,CACA,CAJM,CAKP7kD,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,0DAAd,EACA,KAAK89C,OAAL,CAAasF,MAAb,CAAsB1kD,KAAtB,CACA,CARM,CA7DmD,CAuE3D2+C,OAAQ,CACP5nD,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,0DAAd,EACA,YAAY89C,OAAL,CAAaT,MAApB,CACA,CAJM,CAKP9+C,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,0DAAd,EACA,KAAK89C,OAAL,CAAaT,MAAb,CAAsB3+C,KAAtB,CACA,CARM,CAvEmD,CAiF3D6vB,KAAM,CACL94B,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,sDAAd,EACA,YAAY89C,OAAL,CAAavvB,IAApB,CACA,CAJI,CAKLhwB,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,sDAAd,EACA,KAAK89C,OAAL,CAAavvB,IAAb,CAAoB7vB,KAApB,CACA,CARI,CAjFqD,CA2F3Dq/C,gBAAiB,CAChBtoD,IAAK,cAAY,CAChBsK,QAAQC,IAAR,CAAc,4EAAd,EACA,YAAY89C,OAAL,CAAaC,eAApB,CACA,CAJe,CAKhBx/C,IAAK,aAAWG,KAAX,CAAmB,CACvBqB,QAAQC,IAAR,CAAc,4EAAd,EACA,KAAK89C,OAAL,CAAaC,eAAb,CAA+Br/C,KAA/B,CACA,CARe,CA3F0C,CAA5D;CAyGAnJ,OAAOK,MAAP,CAAehB,MAAM4jD,KAAN,CAAYnjD,SAA3B,CAAsC,CACrCqsD,KAAM,cAAWW,IAAX,CAAkB,CACvBtiD,QAAQC,IAAR,CAAc,uEAAd,EACA,UAAY,IAAZ,CACA,gBAAkB,UAAUuhD,WAAV,EAAlB,CACAg1C,YAAY70C,IAAZ,CAAkBW,IAAlB,CAAwB,SAAW/sC,MAAX,CAAoB,CAC3C5B,MAAMgmC,SAAN,CAAiBpkC,MAAjB,EACA,CAFD,EAGA,WAAA,CACA,CAToC,CAAtC,EAYA/f,OAAOK,MAAP,CAAehB,MAAM6lD,aAAN,CAAoBplD,SAAnC,CAA8C,CAC7CmhG,QAAS,iBAAWn0C,IAAX,CAAkB,CAC1BtiD,QAAQC,IAAR,CAAc,6DAAd,EACA,YAAY+6C,gBAAL,EAAP,CACA,CAJ4C,CAA9C;CASAnmD,MAAM6hG,aAAN,CAAsB,CAErBp7D,MAAO,eAAWq7D,SAAX,CAAsBx1D,SAAtB,CAAiC5F,mBAAjC,CAAuD,CAE7Dv7B,QAAQC,IAAR,CAAc,iIAAd,EAEA,UAAA,CAEA,GAAKkhC,2BAA2BtR,IAAhC,CAAuC,CAEtCsR,UAAUpP,gBAAV,EAA8BoP,UAAU/M,YAAV,EAA9B,CAEA3nB,OAAS00B,UAAU10B,MAAnB,CACA00B,UAAYA,UAAU3tB,QAAtB,CAEA,CAEDmjF,UAAUr7D,KAAV,CAAiB6F,SAAjB,CAA4B10B,MAA5B,CAAoC8uB,mBAApC,EAEA,CAnBoB,CAqBrBpwB,OAAQ,gBAAWqI,QAAX,CAAsB,CAE7BxT,QAAQC,IAAR,CAAc,2FAAd,EACA,gBAAgBkL,MAAT,EAAP,CAEA,CA1BoB,CAAtB,CA8BAtW,MAAM+hG,UAAN,CAAmB,CAElBh0C,YAAa5tD,SAFK,CAIlBivD,YAAa,qBAAWrC,GAAX,CAAgB0M,OAAhB,CAAyBzM,MAAzB,CAAiCE,OAAjC,CAA2C,CAEvD/hD,QAAQC,IAAR,CAAc,sFAAd,EAEA,WAAa,UAAUkjD,aAAV,EAAb,CACAlB,OAAOyB,cAAP,CAAuB,KAAKd,WAA5B,EAEA,YAAcX,OAAON,IAAP,CAAaC,GAAb,CAAkBC,MAAlB,CAA0B7sD,SAA1B,CAAqC+sD,OAArC,CAAd,CAEA,GAAKuM,OAAL,CAAevQ,QAAQuQ,OAAR,CAAkBA,OAAlB,CAEf,cAAA,CAEA,CAjBiB,CAmBlBuoC,gBAAiB,yBAAW5nC,IAAX,CAAiBX,OAAjB,CAA0BzM,MAA1B,CAAkCE,OAAlC,CAA4C,CAE5D/hD,QAAQC,IAAR,CAAc,8FAAd,EAEA,WAAa,UAAU+uD,iBAAV,EAAb,CACA/M,OAAOyB,cAAP,CAAuB,KAAKd,WAA5B,EAEA,YAAcX,OAAON,IAAP,CAAasN,IAAb,CAAmBpN,MAAnB,CAA2B7sD,SAA3B,CAAsC+sD,OAAtC,CAAd,CAEA,GAAKuM,OAAL,CAAevQ,QAAQuQ,OAAR,CAAkBA,OAAlB,CAEf,cAAA,CAEA,CAhCiB,CAkClBwoC,sBAAuB,gCAAY,CAElC92F,QAAQuL,KAAR,CAAe,uFAAf,EAEA,CAtCiB,CAwClBwrF,0BAA2B,oCAAY,CAEtC/2F,QAAQuL,KAAR,CAAe,2FAAf,EAEA,CA5CiB,CAAnB;CAkDA1W,MAAMmiG,SAAN,CAAkB,UAAY,CAE7Bh3F,QAAQuL,KAAR,CAAe,wEAAf,EAEA,KAAK0rF,aAAL,CAAqB,SAAWxpF,MAAX,CAAmBjB,MAAnB,CAA4B,CAEhDxM,QAAQC,IAAR,CAAc,4DAAd,EACAwN,OAAOlB,OAAP,CAAgBC,MAAhB,EAEA,CALD,CAOA,KAAK0qF,eAAL,CAAuB,SAAWzpF,MAAX,CAAmBjB,MAAnB,CAA4B,CAElDxM,QAAQC,IAAR,CAAc,gEAAd,EACAwN,OAAOV,SAAP,CAAkBP,MAAlB,EAEA,CALD,CAOA,KAAK2qF,UAAL,CAAkB,SAAW1pF,MAAX,CAAmBjB,MAAnB,CAA4B,CAE7CxM,QAAQuL,KAAR,CAAe,kEAAf,EAEA,CAJD,CAMA,CAxBD;CA4BA1W,MAAMuiG,cAAN,CAAuB,UAAY,CAElCp3F,QAAQuL,KAAR,CAAe,iFAAf,EAEA,KAAKkxD,UAAL,CAAkBxU,SAASC,aAAT,CAAwB,QAAxB,CAAlB,CACA,KAAK3F,KAAL,CAAa,UAAY,EAAzB,CACA,KAAKrE,MAAL,CAAc,UAAY,EAA1B,CACA,KAAKglB,aAAL,CAAqB,UAAY,EAAjC,CACA,KAAKR,OAAL,CAAe,UAAY,EAA3B,CAEA,CAVD;;;IAkBA7tE,MAAMwiG,UAAN,CAAmB,CAElBC,uBAAwB,gCAAWh4F,CAAX,CAAc8hB,EAAd,CAAkBC,EAAlB,CAAsBC,EAAtB,CAA2B,CAElD,UAAa,EAAIhiB,CAAV,GAAkB+hB,GAAKD,EAAvB,EAA8B,EAAI9hB,CAAJ,EAAUgiB,GAAKD,EAAf,CAArC,CAEA,CANiB;CAUlBk2E,mBAAoB,4BAAWj4F,CAAX,CAAc8hB,EAAd,CAAkBC,EAAlB,CAAsBC,EAAtB,CAA0BC,EAA1B,CAA+B,CAElD,OAAO,CAAE,CAAF,CAAMH,EAAN,EAAa,EAAI9hB,CAAjB,GAAyB,EAAIA,CAA7B,EACN,EAAI+hB,EAAJ,EAAW,EAAI/hB,CAAf,GAAuB,EAAIA,CAA3B,CADM,CAC2B,EAAIA,CAAJ,CAAQ+hB,EAAR,EAAe,EAAI/hB,CAAnB,CAD3B,CAEN,EAAIA,CAAJ,CAASgiB,EAAT,EAAgB,EAAIhiB,CAApB,CAFM,CAEoB,EAAIA,CAAJ,CAAQA,CAAR,CAAYgiB,EAFhC,CAGN,EAAIhiB,CAAJ,CAAQA,CAAR,CAAYiiB,EAHb,CAKA,CAjBiB,CAmBlBi2E,cAAe,uBAAWl4F,CAAX,CAAc8hB,EAAd,CAAkBC,EAAlB,CAAsBC,EAAtB,CAA0BC,EAA1B,CAA+B;CAI7C,QAAU,EAAIjiB,CAAJ,CAAQA,CAAR,CAAY,EAAIA,CAA1B;CACA,QAAU,EAAIA,CAAJ,CAAQA,CAAR,CAAY,EAAIA,CAAhB,CAAoB,CAA9B;CACA,QAAU,CAAE,CAAF,CAAMA,CAAN,CAAUA,CAAV,CAAc,EAAIA,CAA5B;CACA,QAAU,EAAIA,CAAJ,CAAQA,CAAR,CAAY,EAAIA,CAA1B;CAEA,WAAam4F,GAAN,CAAYC,GAAZ,CAAkBC,GAAzB,CAEA,CA9BiB;CAkClBtwE,YAAa,qBAAUjG,EAAV,CAAcC,EAAd,CAAkBC,EAAlB,CAAsBC,EAAtB,CAA0BjiB,CAA1B,CAA8B,CAE1C,OAAS,CAAEgiB,GAAKF,EAAP,EAAc,GAAvB,CACA,OAAS,CAAEG,GAAKF,EAAP,EAAc,GAAvB,CACA,OAAS/hB,EAAIA,CAAb,CACA,OAASA,EAAIqpB,EAAb,CACA,OAAO,CAAE,EAAItH,EAAJ,CAAS,EAAIC,EAAb,CAAkBpD,EAAlB,CAAuBvY,EAAzB,EAAgCijB,EAAhC,CAAqC,CAAE,CAAE,CAAF,CAAMvH,EAAN,CAAW,EAAIC,EAAf,CAAoB,EAAIpD,EAAxB,CAA6BvY,EAA/B,EAAsCgjB,EAA3E,CAAgFzK,GAAK5e,CAArF,CAAyF+hB,EAAhG,CAEA,CA1CiB,CAAnB;;;IAoDAxsB,MAAM+iG,UAAN,CAAmB,CAElBC,0BAA2B,mCAAWrkF,QAAX,CAAqBkhB,SAArB,CAAiC,CAE3D,UAAY,UAAUk6B,KAAV,EAAZ,CAEA,IAAM,MAAQ,CAAR,CAAWnvD,EAAIi1B,UAAUz+B,MAA/B,CAAuCyb,EAAIjS,CAA3C,CAA8CiS,GAA9C,CAAqD,CAEpDsoB,MAAM/3B,GAAN,CAAW,UAAU4tB,IAAV,CAAgBrc,QAAhB,CAA0BkhB,UAAWhjB,CAAX,CAA1B,CAAX,EAEA,CAED,YAAA,CAEA,CAdiB,CAgBlBomF,OAAQ,gBAAWlkE,KAAX,CAAkBpC,MAAlB,CAA0BssB,KAA1B,CAAkC,CAEzClqB,MAAMrB,WAAN,CAAmBf,OAAO1kB,WAA1B,EACA0kB,OAAO+B,MAAP,CAAeK,KAAf,EACAkqB,MAAM77C,GAAN,CAAW2xB,KAAX,EAEA,CAtBiB,CAwBlBmkE,OAAQ,gBAAWnkE,KAAX,CAAkBkqB,KAAlB,CAAyBtsB,MAAzB,CAAkC,CAEzC,uBAAyB,UAAU9kB,OAAV,EAAzB,CACAmwC,mBAAmBhwC,UAAnB,CAA+B2kB,OAAO1kB,WAAtC,EACA8mB,MAAMrB,WAAN,CAAmBsqB,kBAAnB,EAEAiB,MAAMvqB,MAAN,CAAcK,KAAd,EACApC,OAAOvvB,GAAP,CAAY2xB,KAAZ,EAEA,CAjCiB,CAAnB;;;IA2CA/+B,MAAMmjG,UAAN,CAAmB;CAIlBnuE,KAAM,cAAWouE,OAAX,CAAqB,CAE1B,MAAQA,QAAQhiG,MAAhB,CACA,MAAQ,GAAR,CAEA,IAAM,MAAQgjB,EAAI,CAAZ,CAAe5Z,EAAI,CAAzB,CAA4BA,EAAI4Z,CAAhC,CAAmC7Z,EAAIC,GAAvC,CAA8C,CAE7CmH,GAAKyxF,QAAS74F,CAAT,EAAahK,CAAb,CAAiB6iG,QAAS54F,CAAT,EAAa4D,CAA9B,CAAkCg1F,QAAS54F,CAAT,EAAajK,CAAb,CAAiB6iG,QAAS74F,CAAT,EAAa6D,CAArE,CAEA,CAED,SAAW,GAAX,CAEA,CAjBiB,CAmBlBi1F,YAAe,UAAY;;;;;;;;;;;;MAgB1B,aAAA,CAAeD,OAAf,CAAwB1uE,CAAxB,CAA2BnjB,CAA3B,CAA8BjD,CAA9B,CAAiC8V,CAAjC,CAAoCk/E,KAApC,CAA4C,CAE3C,KAAA,CACA,MAAA,CAAQjrF,EAAR,CAAYI,EAAZ,CAAgBF,EAAhB,CACA,MAAA,CAAQmxC,EAAR,CAAY65C,EAAZ,CAAgBC,EAAhB,CAEA9qF,GAAK0qF,QAASE,MAAO5uE,CAAP,CAAT,EAAsBn0B,CAA3B,CACA8X,GAAK+qF,QAASE,MAAO5uE,CAAP,CAAT,EAAsBtmB,CAA3B,CAEAqK,GAAK2qF,QAASE,MAAO/xF,CAAP,CAAT,EAAsBhR,CAA3B,CACAgY,GAAK6qF,QAASE,MAAO/xF,CAAP,CAAT,EAAsBnD,CAA3B,CAEAq7C,GAAK25C,QAASE,MAAOh1F,CAAP,CAAT,EAAsB/N,CAA3B,CACAmpD,GAAK05C,QAASE,MAAOh1F,CAAP,CAAT,EAAsBF,CAA3B,CAEA,GAAKnO,OAAOC,OAAP,CAAqB,CAAEuY,GAAKC,EAAP,GAAgBgxC,GAAKrxC,EAArB,CAAF,CAAkC,CAAEE,GAAKF,EAAP,GAAgBoxC,GAAK/wC,EAArB,CAA1D,CAA0F,YAAA,CAE1F,MAAA,CAAQ+qF,EAAR,CAAYC,EAAZ,CAAgBC,EAAhB,CAAoBC,EAApB,CAAwBC,EAAxB,CACA,OAAA,CAASC,GAAT,CAAcC,GAAd,CAAmBC,GAAnB,CAAwBC,GAAxB,CAA6BC,GAA7B,CACA,YAAA,CAAcC,QAAd,CAAwBC,QAAxB,CAEAC,GAAK56C,GAAKhxC,EAAV,CAAegrF,GAAK/5C,GAAKnxC,EAAV,CACfmrF,GAAKhrF,GAAK+wC,EAAV,CAAek6C,GAAKtrF,GAAKqxC,EAAV,CACfk6C,GAAKnrF,GAAKC,EAAV,CAAemrF,GAAKtrF,GAAKF,EAAV,CAEf,IAAM9N,EAAI,CAAV,CAAaA,EAAI6Z,CAAjB,CAAoB7Z,GAApB,CAA2B,CAE1Bg5F,GAAKH,QAASE,MAAO/4F,CAAP,CAAT,EAAsBhK,CAA3B,CACAijG,GAAKJ,QAASE,MAAO/4F,CAAP,CAAT,EAAsB6D,CAA3B,CAEA,GAASm1F,KAAO7qF,EAAT,EAAmB8qF,KAAOnrF,EAA5B,EACCkrF,KAAO9qF,EAAT,EAAmB+qF,KAAOjrF,EADzB,EAECgrF,KAAO95C,EAAT,EAAmB+5C,KAAO95C,EAF9B,CAEuC,SAEvC46C,IAAMf,GAAK7qF,EAAX,CAAgBorF,IAAMN,GAAKnrF,EAAX,CAChB0rF,IAAMR,GAAK9qF,EAAX,CAAgBurF,IAAMR,GAAKjrF,EAAX,CAChB0rF,IAAMV,GAAK95C,EAAX,CAAgBy6C,IAAMV,GAAK95C,EAAX;CAIhB06C,SAAWC,GAAKL,GAAL,CAAWP,GAAKM,GAA3B,CACAQ,SAAWX,GAAKE,GAAL,CAAWD,GAAKS,GAA3B,CACAH,SAAWT,GAAKQ,GAAL,CAAWP,GAAKM,GAA3B,CAEA,GAAOG,UAAY,CAAEnkG,OAAOC,OAAvB,EAAsCikG,UAAY,CAAElkG,OAAOC,OAA3D,EAA0EqkG,UAAY,CAAEtkG,OAAOC,OAApG,CAAgH,YAAA,CAEhH,CAED,WAAA,CAEA;CAID,gBAAkBkjG,OAAX,CAAoBxhE,OAApB,CAA8B,CAEpC,MAAQwhE,QAAQhiG,MAAhB,CAEA,GAAKgjB,EAAI,CAAT,CAAa,WAAA,CAEb,WAAa,EAAb,CACCk/E,MAAQ,EADT,CAECkB,YAAc,EAFf,mDAMA,KAAA,CAAOjzF,CAAP,CAAUjD,CAAV,CAEA,GAAKtO,MAAMmjG,UAAN,CAAiBnuE,IAAjB,CAAuBouE,OAAvB,EAAmC,GAAxC,CAA8C,CAE7C,IAAM7xF,EAAI,CAAV,CAAaA,EAAI6S,CAAjB,CAAoB7S,GAApB,EAA2B+xF,MAAO/xF,CAAP,EAAaA,CAAb,CAA3B,CAEA,CAJD,IAIO,CAEN,IAAMA,EAAI,CAAV,CAAaA,EAAI6S,CAAjB,CAAoB7S,GAApB,EAA2B+xF,MAAO/xF,CAAP,EAAe6S,EAAI,CAAN,CAAY7S,CAAzB,CAA3B,CAEA,CAED,OAAS6S,CAAT,8DAIA,UAAY,EAAIqgF,EAAhB,sBAEA,IAAMlzF,EAAIkzF,GAAK,CAAf,CAAkBA,GAAK,CAAvB,EAA4B,sDAI3B,GAAOtjE,OAAF,EAAgB,CAArB,CAAyB;;;;CAOxBh2B,QAAQC,IAAR,CAAc,mEAAd,EAEA,GAAKw2B,OAAL,CAAe,kBAAA,CACf,aAAA,CAEA,6DAIDlN,EAAInjB,CAAJ,CAAU,GAAKkzF,IAAM/vE,CAAX,CAAeA,EAAI,CAAJ,eACzBnjB,EAAImjB,EAAI,CAAR,CAAY,GAAK+vE,IAAMlzF,CAAX,CAAeA,EAAI,CAAJ,eAC3BjD,EAAIiD,EAAI,CAAR,CAAY,GAAKkzF,IAAMn2F,CAAX,CAAeA,EAAI,CAAJ,eAE3B,GAAKo2F,KAAMtB,OAAN,CAAe1uE,CAAf,CAAkBnjB,CAAlB,CAAqBjD,CAArB,CAAwBm2F,EAAxB,CAA4BnB,KAA5B,CAAL,CAA2C,CAE1C,KAAA,CAAO55F,CAAP,CAAUoE,CAAV,CAAanD,CAAb,CAAgBF,CAAhB,iCAIAkH,EAAI2xF,MAAO5uE,CAAP,CAAJ,CACAhrB,EAAI45F,MAAO/xF,CAAP,CAAJ,CACAzD,EAAIw1F,MAAOh1F,CAAP,CAAJ,sBAIAwN,OAAO+X,IAAP,CAAa,CAAEuvE,QAASzxF,CAAT,CAAF,CACZyxF,QAAS15F,CAAT,CADY,CAEZ05F,QAASt1F,CAAT,CAFY,CAAb,EAKA02F,YAAY3wE,IAAZ,CAAkB,CAAEyvE,MAAO5uE,CAAP,CAAF,CAAc4uE,MAAO/xF,CAAP,CAAd,CAA0B+xF,MAAOh1F,CAAP,CAA1B,CAAlB,2CAIA,IAAM3D,EAAI4G,CAAJ,CAAO9G,EAAI8G,EAAI,CAArB,CAAwB9G,EAAIg6F,EAA5B,CAAgC95F,IAAMF,GAAtC,CAA6C,CAE5C64F,MAAO34F,CAAP,EAAa24F,MAAO74F,CAAP,CAAb,CAEA,CAEDg6F,wCAIAtjE,MAAQ,EAAIsjE,EAAZ,CAEA,CAED,CAED,GAAK7iE,OAAL,CAAe,kBAAA,CACf,aAAA,CAEA,CA9FD,CAgGA,CAtKY,EAnBK,CA2LlB+iE,iBAAkB,0BAAWvB,OAAX,CAAoBwB,KAApB,CAA4B,CAE7C,kCAAA,CAAoCC,QAApC,CAA8CC,QAA9C,CAAwDC,SAAxD,CAAoE;CAGnE,GAAKF,SAAStkG,CAAT,GAAeukG,SAASvkG,CAA7B,CAAiC,CAEhC,GAAKskG,SAAStkG,CAAT,CAAaukG,SAASvkG,CAA3B,CAA+B,CAE9B,gBAAoBA,CAAT,EAAcwkG,UAAUxkG,CAA1B,EAAmCwkG,UAAUxkG,CAAV,EAAeukG,SAASvkG,CAApE,CAEA,CAJD,IAIO,CAEN,gBAAoBA,CAAT,EAAcwkG,UAAUxkG,CAA1B,EAAmCwkG,UAAUxkG,CAAV,EAAeskG,SAAStkG,CAApE,CAEA,CAED,CAZD,IAYO,CAEN,GAAKskG,SAASz2F,CAAT,CAAa02F,SAAS12F,CAA3B,CAA+B,CAE9B,gBAAoBA,CAAT,EAAc22F,UAAU32F,CAA1B,EAAmC22F,UAAU32F,CAAV,EAAe02F,SAAS12F,CAApE,CAEA,CAJD,IAIO,CAEN,gBAAoBA,CAAT,EAAc22F,UAAU32F,CAA1B,EAAmC22F,UAAU32F,CAAV,EAAey2F,SAASz2F,CAApE,CAEA,CAED,CAED,CAED,8BAAA,CAAgC42F,SAAhC,CAA2CC,SAA3C,CAAsDC,SAAtD,CAAiEC,SAAjE,CAA4EC,qBAA5E,CAAoG,CAEnG,WAAaH,UAAU1kG,CAAV,CAAcykG,UAAUzkG,CAArC,CAA0C8kG,OAASJ,UAAU72F,CAAV,CAAc42F,UAAU52F,CAA3E,CACA,WAAa+2F,UAAU5kG,CAAV,CAAc2kG,UAAU3kG,CAArC,CAA0C+kG,OAASH,UAAU/2F,CAAV,CAAc82F,UAAU92F,CAA3E,CAEA,eAAiB42F,UAAUzkG,CAAV,CAAc2kG,UAAU3kG,CAAzC,CACA,eAAiBykG,UAAU52F,CAAV,CAAc82F,UAAU92F,CAAzC,CAEA,UAAai3F,OAASE,MAAT,CAAkBC,OAASF,MAAxC,CACA,aAAeD,OAASI,UAAT,CAAsBD,OAASE,UAA9C,CAEA,GAAKtlG,KAAK8Q,GAAL,CAAUy0F,KAAV,EAAoB1lG,OAAOC,OAAhC,CAA0C;CAIzC,YAAA,CACA,GAAKylG,MAAQ,CAAb,CAAiB,CAEhB,GAAOC,SAAW,CAAb,EAAsBA,SAAWD,KAAtC,CAAkD,OAAO,EAAP,CAClDE,SAAWP,OAASG,UAAT,CAAsBF,OAASG,UAA1C,CACA,GAAOG,SAAW,CAAb,EAAsBA,SAAWF,KAAtC,CAAkD,OAAO,EAAP,CAElD,CAND,IAMO,CAEN,GAAOC,SAAW,CAAb,EAAsBA,SAAWD,KAAtC,CAAkD,OAAO,EAAP,CAClDE,SAAWP,OAASG,UAAT,CAAsBF,OAASG,UAA1C,CACA,GAAOG,SAAW,CAAb,EAAsBA,SAAWF,KAAtC,CAAkD,OAAO,EAAP,CAElD;;CAID,GAAKE,WAAa,CAAlB,CAAsB,CAErB,GAAOT,qBAAF,GACCQ,WAAa,CAAf,EAAwBA,WAAaD,KADpC,CAAL,CACsD,OAAO,EAAP,CACtD,OAAO,CAAEX,SAAF,CAAP,CAEA,CACD,GAAKa,WAAaF,KAAlB,CAA0B,CAEzB,GAAOP,qBAAF,GACCQ,WAAa,CAAf,EAAwBA,WAAaD,KADpC,CAAL,CACsD,OAAO,EAAP,CACtD,OAAO,CAAEV,SAAF,CAAP,CAEA;CAED,GAAKW,WAAa,CAAlB,CAAuB,OAAO,CAAEV,SAAF,CAAP,CACvB,GAAKU,WAAaD,KAAlB,CAA0B,OAAO,CAAER,SAAF,CAAP;CAG1B,eAAiBU,SAAWF,KAA5B,CACA,OAAO,CAAE,CAAEplG,EAAGykG,UAAUzkG,CAAV,CAAculG,WAAaN,MAAhC,CACNp3F,EAAG42F,UAAU52F,CAAV,CAAc03F,WAAaT,MADxB,CAAF,CAAP,CAGA,CA5CD,IA4CO;CAGN,GAAOO,WAAa,CAAf,EACDN,OAASG,UAAT,GAAwBF,OAASG,UADrC,CACuD,OAAO,EAAP;CAGvD,WAAiBF,SAAW,CAAb,EAAsBH,SAAW,CAAhD;CACA,WAAiBE,SAAW,CAAb,EAAsBD,SAAW,CAAhD;;CAEA,GAAKS,QAAUC,MAAf,CAAwB,CAEvB,GAAOhB,UAAUzkG,CAAV,GAAgB2kG,UAAU3kG,CAA5B,EACDykG,UAAU52F,CAAV,GAAgB82F,UAAU92F,CAD9B,CACqC,OAAO,EAAP;CACrC,OAAO,CAAE42F,SAAF,CAAP;CAEA;CAED,GAAKe,MAAL,CAAc,CAEb,GAAK,CAAEE,0BAA2Bf,SAA3B,CAAsCC,SAAtC,CAAiDH,SAAjD,CAAP,CAAuE,OAAO,EAAP;CACvE,OAAO,CAAEA,SAAF,CAAP,CAEA;CAED,GAAKgB,MAAL,CAAc,CAEb,GAAK,CAAEC,0BAA2BjB,SAA3B,CAAsCC,SAAtC,CAAiDC,SAAjD,CAAP,CAAuE,OAAO,EAAP;CACvE,OAAO,CAAEA,SAAF,CAAP,CAEA;CAGD,WAAA,CAAagB,OAAb,CAAsBC,UAAtB,CAAkCC,UAAlC,CACA,WAAA,CAAaC,OAAb,CAAsBC,UAAtB,CAAkCC,UAAlC,CACA,GAAKf,SAAW,CAAhB,CAAoB;CAGnB,GAAKR,UAAUzkG,CAAV,CAAc0kG,UAAU1kG,CAA7B,CAAiC,CAEhCimG,QAAUxB,SAAV,CAAqBmB,WAAanB,UAAUzkG,CAAvB,CACrB2lG,QAAUjB,SAAV,CAAqBmB,WAAanB,UAAU1kG,CAAvB,CAErB,CALD,IAKO,CAENimG,QAAUvB,SAAV,CAAqBkB,WAAalB,UAAU1kG,CAAvB,CACrB2lG,QAAUlB,SAAV,CAAqBoB,WAAapB,UAAUzkG,CAAvB,CAErB,CACD,GAAK2kG,UAAU3kG,CAAV,CAAc4kG,UAAU5kG,CAA7B,CAAiC,CAEhCkmG,QAAUvB,SAAV,CAAqBoB,WAAapB,UAAU3kG,CAAvB,CACrB8lG,QAAUlB,SAAV,CAAqBoB,WAAapB,UAAU5kG,CAAvB,CAErB,CALD,IAKO,CAENkmG,QAAUtB,SAAV,CAAqBmB,WAAanB,UAAU5kG,CAAvB,CACrB8lG,QAAUnB,SAAV,CAAqBqB,WAAarB,UAAU3kG,CAAvB,CAErB,CAED,CA1BD,IA0BO;CAGN,GAAKykG,UAAU52F,CAAV,CAAc62F,UAAU72F,CAA7B,CAAiC,CAEhCo4F,QAAUxB,SAAV,CAAqBmB,WAAanB,UAAU52F,CAAvB,CACrB83F,QAAUjB,SAAV,CAAqBmB,WAAanB,UAAU72F,CAAvB,CAErB,CALD,IAKO,CAENo4F,QAAUvB,SAAV,CAAqBkB,WAAalB,UAAU72F,CAAvB,CACrB83F,QAAUlB,SAAV,CAAqBoB,WAAapB,UAAU52F,CAAvB,CAErB,CACD,GAAK82F,UAAU92F,CAAV,CAAc+2F,UAAU/2F,CAA7B,CAAiC,CAEhCq4F,QAAUvB,SAAV,CAAqBoB,WAAapB,UAAU92F,CAAvB,CACrBi4F,QAAUlB,SAAV,CAAqBoB,WAAapB,UAAU/2F,CAAvB,CAErB,CALD,IAKO,CAENq4F,QAAUtB,SAAV,CAAqBmB,WAAanB,UAAU/2F,CAAvB,CACrBi4F,QAAUnB,SAAV,CAAqBqB,WAAarB,UAAU92F,CAAvB,CAErB,CAED,CACD,GAAK+3F,YAAcG,UAAnB,CAAgC,CAE/B,GAAKF,WAAcE,UAAnB,CAAgC,OAAO,EAAP,CAChC,GAAKF,aAAeE,UAApB,CAAiC,CAEhC,GAAKlB,qBAAL,CAA8B,OAAO,EAAP,CAC9B,OAAO,CAAEqB,OAAF,CAAP,CAEA,CACD,GAAKL,YAAcG,UAAnB,CAAgC,OAAO,CAAEE,OAAF,CAAWP,OAAX,CAAP,CAChC,OAAO,CAAEO,OAAF,CAAWJ,OAAX,CAAP,CAEA,CAZD,IAYO,CAEN,GAAKF,WAAcI,UAAnB,CAAgC,OAAO,EAAP,CAChC,GAAKJ,aAAeI,UAApB,CAAiC,CAEhC,GAAKnB,qBAAL,CAA8B,OAAO,EAAP,CAC9B,OAAO,CAAEoB,OAAF,CAAP,CAEA,CACD,GAAKJ,YAAcG,UAAnB,CAAgC,OAAO,CAAEC,OAAF,CAAWN,OAAX,CAAP,CAChC,OAAO,CAAEM,OAAF,CAAWH,OAAX,CAAP,CAEA,CAED,CAED,CAED,2BAAA,CAA6BK,QAA7B,CAAuCC,WAAvC,CAAoDC,SAApD,CAA+D7B,SAA/D,CAA2E;;CAK1E,eAAiB4B,YAAYpmG,CAAZ,CAAgBmmG,SAASnmG,CAA1C,CAA8CsmG,WAAaF,YAAYv4F,CAAZ,CAAgBs4F,SAASt4F,CAApF,CACA,aAAew4F,UAAUrmG,CAAV,CAAcmmG,SAASnmG,CAAtC,CAA0CumG,SAAYF,UAAUx4F,CAAV,CAAcs4F,SAASt4F,CAA7E,CACA,aAAe22F,UAAUxkG,CAAV,CAAcmmG,SAASnmG,CAAtC,CAA0CwmG,SAAYhC,UAAU32F,CAAV,CAAcs4F,SAASt4F,CAA7E;CAGA,iBAAmB44F,WAAaF,QAAb,CAAwBD,WAAaI,QAAxD,CACA,oBAAsBD,WAAaD,QAAb,CAAwBF,WAAaK,QAA3D,CAEA,GAAK9mG,KAAK8Q,GAAL,CAAUi2F,YAAV,EAA2BlnG,OAAOC,OAAvC,CAAiD;CAIhD,kBAAqBgnG,SAAWJ,QAAX,CAAsBC,SAAWE,QAAtD;CAGA,GAAKE,aAAe,CAApB,CAAwB;CAGvB,wBAA8B,CAArB,EAA8BC,eAAiB,CAAxD,CAEA,CALD,IAKO;CAGN,wBAA8B,CAArB,EAA8BA,eAAiB,CAAxD,CAEA,CAED,CAnBD,IAmBO;;CAIN,uBAA2B,CAA3B,CAEA,CAED,CAGD,oBAAA,CAAsBhE,OAAtB,CAA+BwB,KAA/B,CAAuC,CAEtC,UAAYxB,QAAQtuC,MAAR,EAAZ;CACA,QAAA,CAEA,8BAAA,CAAgCuyC,UAAhC,CAA4CC,SAA5C,CAAwD;CAGvD,iBAAmBC,MAAMnmG,MAAN,CAAe,CAAlC,CAEA,iBAAmBimG,WAAa,CAAhC,CACA,GAAKG,aAAe,CAApB,CAA0BA,aAAeC,YAAf,CAE1B,iBAAmBJ,WAAa,CAAhC,CACA,GAAKK,aAAeD,YAApB,CAAmCC,aAAe,CAAf,CAEnC,gBAAkBC,mBAAoBJ,MAAOF,UAAP,CAApB,CAAyCE,MAAOC,YAAP,CAAzC,CAAgED,MAAOG,YAAP,CAAhE,CAAuFE,KAAMN,SAAN,CAAvF,CAAlB,CACA,GAAK,CAAEO,WAAP,CAAqB;CAGpB,YAAA,CAEA;CAGD,gBAAkBD,KAAKxmG,MAAL,CAAc,CAAhC,CAEA,gBAAkBkmG,UAAY,CAA9B,CACA,GAAKQ,YAAc,CAAnB,CAAyBA,YAAcC,WAAd,CAEzB,gBAAkBT,UAAY,CAA9B,CACA,GAAKU,YAAcD,WAAnB,CAAiCC,YAAc,CAAd,CAEjCH,YAAcF,mBAAoBC,KAAMN,SAAN,CAApB,CAAuCM,KAAME,WAAN,CAAvC,CAA4DF,KAAMI,WAAN,CAA5D,CAAiFT,MAAOF,UAAP,CAAjF,CAAd,CACA,GAAK,CAAEQ,WAAP,CAAqB;CAGpB,YAAA,CAEA,CAED,WAAA,CAEA,CAED,4BAAA,CAA8BI,SAA9B,CAAyCC,QAAzC,CAAoD;CAGnD,QAAA,CAAUC,OAAV,CAAmB9lC,YAAnB,CACA,IAAM+lC,KAAO,CAAb,CAAgBA,KAAOb,MAAMnmG,MAA7B,CAAqCgnG,MAArC,CAA+C,CAE9CD,QAAUC,KAAO,CAAjB,CAAoBD,SAAWZ,MAAMnmG,MAAjB,CACpBihE,aAAegmC,sBAAuBJ,SAAvB,CAAkCC,QAAlC,CAA4CX,MAAOa,IAAP,CAA5C,CAA2Db,MAAOY,OAAP,CAA3D,CAA6E,IAA7E,CAAf,CACA,GAAK9lC,aAAajhE,MAAb,CAAsB,CAA3B,CAAgC,WAAA,CAEhC,CAED,YAAA,CAEA,CAED,eAAiB,EAAjB,CAEA,2BAAA,CAA6B6mG,SAA7B,CAAwCC,QAAxC,CAAmD;CAGlD,SAAA,CAAWI,OAAX,CACCC,IADD,CACOJ,OADP,CACgB9lC,YADhB,CAEA,IAAMmmC,MAAQ,CAAd,CAAiBA,MAAQC,WAAWrnG,MAApC,CAA4ConG,OAA5C,CAAuD,CAEtDF,QAAU1D,MAAO6D,WAAYD,KAAZ,CAAP,CAAV,CACA,IAAMD,KAAO,CAAb,CAAgBA,KAAOD,QAAQlnG,MAA/B,CAAuCmnG,MAAvC,CAAiD,CAEhDJ,QAAUI,KAAO,CAAjB,CAAoBJ,SAAWG,QAAQlnG,MAAnB,CACpBihE,aAAegmC,sBAAuBJ,SAAvB,CAAkCC,QAAlC,CAA4CI,QAASC,IAAT,CAA5C,CAA6DD,QAASH,OAAT,CAA7D,CAAiF,IAAjF,CAAf,CACA,GAAK9lC,aAAajhE,MAAb,CAAsB,CAA3B,CAAgC,WAAA,CAEhC,CAED,CACD,YAAA,CAEA,CAED,aAAA,CAAesnG,UAAf,CACCC,OADD,CACUC,MADV,CAECC,OAFD,CAEUC,MAFV,CAEkBC,WAAa,EAF/B,CAGCC,SAHD,CAGYC,SAHZ,CAICC,QAJD,CAIWC,QAJX,CAMA,IAAM,MAAQ,CAAR,CAAWC,GAAKxE,MAAMxjG,MAA5B,CAAoCsJ,EAAI0+F,EAAxC,CAA4C1+F,GAA5C,CAAmD,CAElD+9F,WAAW50E,IAAX,CAAiBnpB,CAAjB,EAEA,CAED,kBAAoB,CAApB,CACA,YAAc+9F,WAAWrnG,MAAX,CAAoB,CAAlC,CACA,MAAQqnG,WAAWrnG,MAAX,CAAoB,CAA5B,CAAgC,CAE/BioG,UACA,GAAKA,QAAU,CAAf,CAAmB,CAElBl+F,QAAQqmB,GAAR,CAAa,6BAA+Bi3E,WAAWrnG,MAA1C,CAAmD,gCAAhE,EACA,MAEA;;CAID,IAAMsnG,WAAaY,aAAnB,CAAkCZ,WAAanB,MAAMnmG,MAArD,CAA6DsnG,YAA7D,CAA6E,CAE5EC,QAAUpB,MAAOmB,UAAP,CAAV,CACAa,UAAY,CAAE,CAAd;CAGA,IAAM,MAAQ,CAAd,CAAiB7+F,EAAI+9F,WAAWrnG,MAAhC,CAAwCsJ,GAAxC,CAA+C,CAE9Cm+F,QAAUJ,WAAY/9F,CAAZ,CAAV;CAGAo+F,OAASH,QAAQpoG,CAAR,CAAY,GAAZ,CAAkBooG,QAAQv6F,CAA1B,CAA8B,GAA9B,CAAoCy6F,OAA7C,CACA,GAAKE,WAAYD,MAAZ,IAAyB3oG,SAA9B,CAA4C,SAE5CynG,KAAOhD,MAAOiE,OAAP,CAAP,CACA,IAAM,OAAS,CAAf,CAAkBW,GAAK5B,KAAKxmG,MAA5B,CAAoCooG,IAApC,CAA4C,CAE3CZ,OAAShB,KAAM4B,EAAN,CAAT,CACA,GAAK,CAAEC,sBAAuBf,UAAvB,CAAmCc,EAAnC,CAAP,CAAkD,SAClD,GAAKE,oBAAqBf,OAArB,CAA8BC,MAA9B,CAAL,CAA+C,SAC/C,GAAKe,mBAAoBhB,OAApB,CAA6BC,MAA7B,CAAL,CAA8C,SAE9CW,UAAYC,EAAZ,CACAf,WAAWtuE,MAAX,CAAmBzvB,CAAnB,CAAsB,CAAtB,EAEAs+F,UAAYzB,MAAM96F,KAAN,CAAa,CAAb,CAAgBi8F,WAAa,CAA7B,CAAZ,CACAO,UAAY1B,MAAM96F,KAAN,CAAai8F,UAAb,CAAZ,CACAQ,SAAWtB,KAAKn7F,KAAL,CAAY88F,SAAZ,CAAX,CACAJ,SAAWvB,KAAKn7F,KAAL,CAAY,CAAZ,CAAe88F,UAAY,CAA3B,CAAX,CAEAhC,MAAQyB,UAAUl0C,MAAV,CAAkBo0C,QAAlB,EAA6Bp0C,MAA7B,CAAqCq0C,QAArC,EAAgDr0C,MAAhD,CAAwDm0C,SAAxD,CAAR,CAEAK,cAAgBZ,UAAhB;;CAKA,MAEA,CACD,GAAKa,WAAa,CAAlB,CAAsB;CAEtBR,WAAYD,MAAZ,EAAuB,IAAvB;CAEA,CACD,GAAKS,WAAa,CAAlB,CAAsB;CAEtB,CAED,CAED,YAAA,2BAKD,KAAA,CAAO3sF,EAAP,CAAWzI,CAAX,CAAckwB,IAAd,CACC7D,GADD,CACMt/B,KADN,CAEC0oG,aAAe,EAFhB;CAMA,cAAgBxG,QAAQtuC,MAAR,EAAhB,CAEA,IAAM,MAAQ,CAAR,CAAWs0C,GAAKxE,MAAMxjG,MAA5B,CAAoCsJ,EAAI0+F,EAAxC,CAA4C1+F,GAA5C,CAAmD,CAElD6xB,MAAM97B,SAAN,CAAgBozB,IAAhB,CAAqBokB,KAArB,CAA4B4xD,SAA5B,CAAuCjF,MAAOl6F,CAAP,CAAvC,EAEA;;CAMD,IAAMmS,EAAI,CAAJ,CAAOD,GAAKitF,UAAUzoG,MAA5B,CAAoCyb,EAAID,EAAxC,CAA4CC,GAA5C,CAAmD,CAElD2jB,IAAMqpE,UAAWhtF,CAAX,EAAetc,CAAf,CAAmB,GAAnB,CAAyBspG,UAAWhtF,CAAX,EAAezO,CAA9C,CAEA,GAAKw7F,aAAcppE,GAAd,IAAwBrgC,SAA7B,CAAyC,CAExCgL,QAAQC,IAAR,CAAc,8BAAd,CAA8Co1B,GAA9C,EAEA,CAEDopE,aAAcppE,GAAd,EAAsB3jB,CAAtB,CAEA;CAGD,sBAAwBitF,YAAa1G,OAAb,CAAsBwB,KAAtB,CAAxB,CAEA,cAAgB5kG,MAAMmjG,UAAN,CAAiBE,WAAjB,CAA8B0G,iBAA9B,CAAiD,KAAjD,CAAhB;;;CAKA,IAAMltF,EAAI,CAAJ,CAAOD,GAAKotF,UAAU5oG,MAA5B,CAAoCyb,EAAID,EAAxC,CAA4CC,GAA5C,CAAmD,CAElDwnB,KAAO2lE,UAAWntF,CAAX,CAAP,CAEA,IAAM1I,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAE1BqsB,IAAM6D,KAAMlwB,CAAN,EAAU5T,CAAV,CAAc,GAAd,CAAoB8jC,KAAMlwB,CAAN,EAAU/F,CAApC,CAEAlN,MAAQ0oG,aAAcppE,GAAd,CAAR,CAEA,GAAKt/B,QAAUf,SAAf,CAA2B,CAE1BkkC,KAAMlwB,CAAN,EAAYjT,KAAZ,CAEA,CAED,CAED,CAED,iBAAiB4zD,MAAV,EAAP,CAEA,CAxpBiB,CA0pBlBm1C,YAAa,qBAAWC,GAAX,CAAiB,CAE7B,aAAa/G,UAAN,CAAiBnuE,IAAjB,CAAuBk1E,GAAvB,EAA+B,CAAtC,CAEA,CA9pBiB;;;CAqqBlB15E,GAAM,UAAY,CAEjB,aAAA,CAAe/lB,CAAf,CAAkBF,CAAlB,CAAsB,CAErB,MAAQ,EAAIE,CAAZ,CACA,SAAW8nB,CAAJ,CAAQhoB,CAAf,CAEA,CAED,aAAA,CAAeE,CAAf,CAAkBF,CAAlB,CAAsB,CAErB,UAAa,EAAIE,CAAV,EAAgBA,CAAhB,CAAoBF,CAA3B,CAEA,CAED,aAAA,CAAeE,CAAf,CAAkBF,CAAlB,CAAsB,CAErB,SAAWE,CAAJ,CAAQF,CAAf,CAEA,CAED,gBAAkBE,CAAX,CAAc8hB,EAAd,CAAkBC,EAAlB,CAAsBC,EAAtB,CAA2B,CAEjC,YAAahiB,CAAN,CAAS8hB,EAAT,EAAgB49E,KAAM1/F,CAAN,CAAS+hB,EAAT,CAAhB,CAAgC49E,KAAM3/F,CAAN,CAASgiB,EAAT,CAAvC,CAEA,CAJD,CAMA,CA3BG,EArqBc;CAosBlB49E,GAAM,UAAY,CAEjB,aAAA,CAAe5/F,CAAf,CAAkBF,CAAlB,CAAsB,CAErB,MAAQ,EAAIE,CAAZ,CACA,SAAW8nB,CAAJ,CAAQA,CAAR,CAAYhoB,CAAnB,CAEA,CAED,aAAA,CAAeE,CAAf,CAAkBF,CAAlB,CAAsB,CAErB,MAAQ,EAAIE,CAAZ,CACA,SAAW8nB,CAAJ,CAAQA,CAAR,CAAY9nB,CAAZ,CAAgBF,CAAvB,CAEA,CAED,aAAA,CAAeE,CAAf,CAAkBF,CAAlB,CAAsB,CAErB,MAAQ,EAAIE,CAAZ,CACA,SAAW8nB,CAAJ,CAAQ9nB,CAAR,CAAYA,CAAZ,CAAgBF,CAAvB,CAEA,CAED,aAAA,CAAeE,CAAf,CAAkBF,CAAlB,CAAsB,CAErB,SAAWE,CAAJ,CAAQA,CAAR,CAAYF,CAAnB,CAEA,CAED,gBAAkBE,CAAX,CAAc8hB,EAAd,CAAkBC,EAAlB,CAAsBC,EAAtB,CAA0BC,EAA1B,CAA+B,CAErC,YAAajiB,CAAN,CAAS8hB,EAAT,EAAgB+9E,KAAM7/F,CAAN,CAAS+hB,EAAT,CAAhB,CAAgC+9E,KAAM9/F,CAAN,CAASgiB,EAAT,CAAhC,CAAgD+9E,KAAM//F,CAAN,CAASiiB,EAAT,CAAvD,CAEA,CAJD,CAMA,CAnCG,EApsBc,CAAnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iEAgxBA1sB,MAAMyqG,KAAN,CAAc,UAAY,EAA1B,CAIAzqG,MAAMyqG,KAAN,CAAYhqG,SAAZ,CAAwB,CAEvBoJ,YAAa7J,MAAMyqG,KAFI;;CAOvBn4E,SAAU,kBAAW7nB,CAAX,CAAe,CAExBU,QAAQC,IAAR,CAAc,mDAAd,EACA,WAAA,CAEA,CAZsB;;CAiBvBs/F,WAAY,oBAAWh2E,CAAX,CAAe,CAE1B,MAAQ,KAAKi2E,cAAL,CAAqBj2E,CAArB,CAAR,CACA,YAAYpC,QAAL,CAAe7nB,CAAf,CAAP,CAEA,CAtBsB;CA0BvBmgG,UAAW,mBAAWC,SAAX,CAAuB,CAEjC,GAAK,CAAEA,SAAP,CAAmBA,UAAY,CAAZ,CAEnB,KAAA,CAAOX,IAAM,EAAb,CAEA,IAAMjzF,EAAI,CAAV,CAAaA,GAAK4zF,SAAlB,CAA6B5zF,GAA7B,CAAoC,CAEnCizF,IAAIr2E,IAAJ,CAAU,KAAKvB,QAAL,CAAerb,EAAI4zF,SAAnB,CAAV,EAEA,CAED,UAAA,CAEA,CAxCsB;CA4CvBC,gBAAiB,yBAAWD,SAAX,CAAuB,CAEvC,GAAK,CAAEA,SAAP,CAAmBA,UAAY,CAAZ,CAEnB,KAAA,CAAOX,IAAM,EAAb,CAEA,IAAMjzF,EAAI,CAAV,CAAaA,GAAK4zF,SAAlB,CAA6B5zF,GAA7B,CAAoC,CAEnCizF,IAAIr2E,IAAJ,CAAU,KAAK62E,UAAL,CAAiBzzF,EAAI4zF,SAArB,CAAV,EAEA,CAED,UAAA,CAEA,CA1DsB;CA8DvBl4E,UAAW,oBAAY,CAEtB,YAAc,KAAKo4E,UAAL,EAAd,CACA,eAAgBC,QAAQ5pG,MAAR,CAAiB,CAA1B,CAAP,CAEA,CAnEsB;CAuEvB2pG,WAAY,oBAAWF,SAAX,CAAuB,CAElC,GAAK,CAAEA,SAAP,CAAmBA,UAAc,KAAKI,oBAAP,CAAkC,KAAKA,oBAAvC,CAAgE,GAA5E,CAEnB,GAAK,KAAKC,eAAL,EACC,KAAKA,eAAL,CAAqB9pG,MAArB,GAAgCypG,UAAY,CAD7C,EAED,CAAE,KAAK3/D,WAFX,CAEyB;CAGxB,YAAYggE,eAAZ,CAEA,CAED,KAAKhgE,WAAL,CAAmB,KAAnB,CAEA,UAAY,EAAZ,CACA,WAAA,CAAa2R,KAAO,KAAKvqB,QAAL,CAAe,CAAf,CAApB,CACA,KAAA,CAAO64E,IAAM,CAAb,CAEA5qE,MAAM1M,IAAN,CAAY,CAAZ,EAEA,IAAMtpB,EAAI,CAAV,CAAaA,GAAKsgG,SAAlB,CAA6BtgG,GAA7B,CAAoC,CAEnC6gG,QAAU,KAAK94E,QAAL,CAAgB/nB,EAAIsgG,SAApB,CAAV,CACAM,KAAOC,QAAQz1F,UAAR,CAAoBknC,IAApB,CAAP,CACAtc,MAAM1M,IAAN,CAAYs3E,GAAZ,EACAtuD,KAAOuuD,OAAP,CAEA,CAED,KAAKF,eAAL,CAAuB3qE,KAAvB,CAEA,YAAA;CAEA,CAzGsB,CA2GvB8qE,iBAAkB,2BAAW,CAE5B,KAAKngE,WAAL,CAAmB,IAAnB,CACA,KAAK6/D,UAAL,GAEA,CAhHsB;CAoHvBJ,eAAgB,wBAAWj2E,CAAX,CAAc9Y,QAAd,CAAyB,CAExC,eAAiB,KAAKmvF,UAAL,EAAjB,CAEA,MAAQ,CAAR,CAAWnuF,GAAK0uF,WAAWlqG,MAA3B,CAEA,mBAAA;CAEA,GAAKwa,QAAL,CAAgB,CAEf2vF,gBAAkB3vF,QAAlB,CAEA,CAJD,IAIO,CAEN2vF,gBAAkB72E,EAAI42E,WAAY1uF,GAAK,CAAjB,CAAtB,CAEA;;CAMD,QAAU,CAAV,CAAakU,KAAOlU,GAAK,CAAzB,CAA4B4uF,UAA5B,CAEA,MAAQ36E,KAAOC,IAAf,CAAsB,CAErBjU,EAAIzc,KAAKiK,KAAL,CAAYwmB,IAAM,CAAEC,KAAOD,GAAT,EAAiB,CAAnC,CAAJ;CAEA26E,WAAaF,WAAYzuF,CAAZ,EAAkB0uF,eAA/B,CAEA,GAAKC,WAAa,CAAlB,CAAsB,CAErB36E,IAAMhU,EAAI,CAAV,CAEA,CAJD,QAIY2uF,WAAa,CAAlB,CAAsB,CAE5B16E,KAAOjU,EAAI,CAAX,CAEA,CAJM,IAIA,CAENiU,KAAOjU,CAAP,CACA;CAIA,CAED,CAEDA,EAAIiU,IAAJ;CAIA,GAAKw6E,WAAYzuF,CAAZ,IAAoB0uF,eAAzB,CAA2C,CAE1C,MAAQ1uF,GAAMD,GAAK,CAAX,CAAR,CACA,QAAA,CAEA;CAID,iBAAmB0uF,WAAYzuF,CAAZ,CAAnB,CACA,gBAAkByuF,WAAYzuF,EAAI,CAAhB,CAAlB,CAEA,kBAAoB4uF,YAAcC,YAAlC;CAIA,oBAAsB,CAAEH,gBAAkBG,YAApB,EAAqCC,aAA3D;CAIA,MAAQ,CAAE9uF,EAAI+uF,eAAN,GAA4BhvF,GAAK,CAAjC,CAAR,CAEA,QAAA,CAEA,CAjMsB;;;;CAwMvBivF,WAAY,oBAAUphG,CAAV,CAAc,CAEzB,UAAY,MAAZ,CACA,OAASA,EAAIuC,KAAb,CACA,OAASvC,EAAIuC,KAAb;CAIA,GAAKyd,GAAK,CAAV,CAAcA,GAAK,CAAL,CACd,GAAKqJ,GAAK,CAAV,CAAcA,GAAK,CAAL,CAEd,QAAU,KAAKxB,QAAL,CAAe7H,EAAf,CAAV,CACA,QAAU,KAAK6H,QAAL,CAAewB,EAAf,CAAV,CAEA,QAAUg4E,IAAI//F,KAAJ,GAAY4I,GAAZ,CAAiBo3F,GAAjB,CAAV,CACA,WAAW36F,SAAJ,EAAP,CAEA,CAzNsB,CA2NvB46F,aAAc,sBAAWt3E,CAAX,CAAe,CAE5B,MAAQ,KAAKi2E,cAAL,CAAqBj2E,CAArB,CAAR,CACA,YAAYm3E,UAAL,CAAiBphG,CAAjB,CAAP,CAEA,CAhOsB,CAAxB;;;;CA4OAzK,MAAMyqG,KAAN,CAAYrzE,MAAZ,CAAqB,SAAWvtB,WAAX,CAAwBoiG,YAAxB,CAAuC,CAE3DpiG,YAAYpJ,SAAZ,CAAwBE,OAAOy2B,MAAP,CAAep3B,MAAMyqG,KAAN,CAAYhqG,SAA3B,CAAxB,CACAoJ,YAAYpJ,SAAZ,CAAsBoJ,WAAtB,CAAoCA,WAApC,CACAA,YAAYpJ,SAAZ,CAAsB6xB,QAAtB,CAAiC25E,YAAjC,CAEA,kBAAA,CAEA,CARD;;;;;;;iEAsBAjsG,MAAMksG,SAAN,CAAkB,UAAY,CAE7B,KAAKC,MAAL,CAAc,EAAd,CAEA,KAAKC,SAAL,CAAiB,KAAjB;CAEA,CAND,CAQApsG,MAAMksG,SAAN,CAAgBzrG,SAAhB,CAA4BE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMyqG,KAAN,CAAYhqG,SAA3B,CAAf,CAAuD,CAElFoJ,YAAa7J,MAAMksG,SAF+D,CAIlF9+F,IAAK,aAAWi/F,KAAX,CAAmB,CAEvB,KAAKF,MAAL,CAAYt4E,IAAZ,CAAkBw4E,KAAlB,EAEA,CARiF,CAUlFC,UAAW,oBAAY;;;CAKtB,eAAiB,KAAKH,MAAL,CAAa,CAAb,EAAiB75E,QAAjB,CAA2B,CAA3B,CAAjB,CACA,aAAe,KAAK65E,MAAL,CAAa,KAAKA,MAAL,CAAY/qG,MAAZ,CAAqB,CAAlC,EAAsCkxB,QAAtC,CAAgD,CAAhD,CAAf,CAEA,GAAK,CAAEi6E,WAAW1+F,MAAX,CAAmB2+F,QAAnB,CAAP,CAAuC,CAEtC,KAAKL,MAAL,CAAYt4E,IAAZ,CAAkB,UAAU44E,SAAV,CAAqBD,QAArB,CAA+BD,UAA/B,CAAlB,EAEA,CAED,CAxBiF;;;;;;;CAmClFj6E,SAAU,kBAAW7nB,CAAX,CAAe,CAExB,MAAQA,EAAI,KAAKkoB,SAAL,EAAZ,CACA,iBAAmB,KAAK+5E,eAAL,EAAnB,CACA,MAAQ,CAAR;CAIA,MAAQ7vF,EAAI8vF,aAAavrG,MAAzB,CAAkC,CAEjC,GAAKurG,aAAc9vF,CAAd,GAAqB5F,CAA1B,CAA8B,CAE7B,SAAW01F,aAAc9vF,CAAd,EAAoB5F,CAA/B,CACA,UAAY,KAAKk1F,MAAL,CAAatvF,CAAb,CAAZ,CAEA,MAAQ,EAAI6M,KAAO2iF,MAAM15E,SAAN,EAAnB,CAEA,aAAa+3E,UAAN,CAAkBh2E,CAAlB,CAAP,CAEA,CAED7X,IAEA,CAED,WAAA;CAIA,CAhEiF;;;CAsElF8V,UAAW,oBAAY,CAEtB,SAAW,KAAK+5E,eAAL,EAAX,CACA,YAAaE,KAAKxrG,MAAL,CAAc,CAApB,CAAP,CAEA,CA3EiF;;CAgFlFsrG,gBAAiB,0BAAY;CAI5B,GAAK,KAAKG,YAAL,EAAqB,KAAKA,YAAL,CAAkBzrG,MAAlB,GAA6B,KAAK+qG,MAAL,CAAY/qG,MAAnE,CAA4E,CAE3E,YAAYyrG,YAAZ,CAEA;;CAKD,YAAc,EAAd,CAAkBC,KAAO,CAAzB,CAEA,IAAM,MAAQ,CAAR,CAAWliG,EAAI,KAAKuhG,MAAL,CAAY/qG,MAAjC,CAAyCyb,EAAIjS,CAA7C,CAAgDiS,GAAhD,CAAuD,CAEtDiwF,MAAQ,KAAKX,MAAL,CAAatvF,CAAb,EAAiB8V,SAAjB,EAAR,CACAq4E,QAAQn3E,IAAR,CAAci5E,IAAd,EAEA,CAED,KAAKD,YAAL,CAAoB7B,OAApB,CAEA,cAAA,CAEA,CA1GiF;;;CAkHlF+B,qBAAsB,8BAAWlC,SAAX,CAAuB,CAE5C,QAAU,KAAKD,SAAL,CAAgBC,SAAhB,CAAV,CACA,YAAYmC,cAAL,CAAqB9C,GAArB,CAAP,CAEA,CAvHiF;CA2HlF+C,2BAA4B,oCAAWpC,SAAX,CAAuB,CAElD,QAAU,KAAKC,eAAL,CAAsBD,SAAtB,CAAV,CACA,YAAYmC,cAAL,CAAqB9C,GAArB,CAAP,CAEA,CAhIiF,CAkIlF8C,eAAgB,wBAAWtwF,MAAX,CAAoB,CAEnC,aAAe,UAAUkC,QAAV,EAAf,CAEA,IAAM,MAAQ,CAAR,CAAWhU,EAAI8R,OAAOtb,MAA5B,CAAoCyb,EAAIjS,CAAxC,CAA2CiS,GAA3C,CAAkD,CAEjD,UAAYH,OAAQG,CAAR,CAAZ,CACA8B,SAASE,QAAT,CAAkBgV,IAAlB,CAAwB,UAAU9iB,OAAV,CAAmBiL,MAAMzb,CAAzB,CAA4Byb,MAAM5N,CAAlC,CAAqC4N,MAAM3N,CAAN,EAAW,CAAhD,CAAxB,EAEA,CAED,eAAA,CAEA,CA/IiF,CAAvD,CAA5B;;;;IA0JArO,MAAMkzD,IAAN,CAAa,SAAWzyB,IAAX,CAAkB,CAE9B,KAAKA,IAAL,CAAYA,IAAZ,CAEA,CAJD,CAMA9/B,OAAOK,MAAP,CAAehB,MAAMkzD,IAAN,CAAWzyD,SAA1B,CAAqC,CAEpCysG,eAAgB,wBAAWn6C,IAAX,CAAiBnnD,IAAjB,CAAuBi/F,SAAvB,CAAmC,CAElD,oBAAA,CAAsB93C,IAAtB,CAA6B,CAE5B,UAAYo6C,OAAQp6C,IAAR,EAAehjC,KAAf,CAAsB,EAAtB,CAAZ,CACA,UAAYnkB,KAAO60B,KAAK2sE,UAAxB,CACA,WAAa,CAAb,CAEA,UAAY,EAAZ,CAEA,IAAM,MAAQ,CAAd,CAAiBvwF,EAAIsT,MAAM/uB,MAA3B,CAAmCyb,GAAnC,CAA0C,CAEzC,QAAUwwF,WAAYl9E,MAAOtT,CAAP,CAAZ,CAAwB4J,KAAxB,CAA+BxY,MAA/B,CAAV,CACAA,QAAUq/F,IAAIr/F,MAAd,CAEA+tC,MAAMnoB,IAAN,CAAYy5E,IAAI9zD,IAAhB,EAEA,CAED,YAAA,CAEA,CAED,mBAAA,CAAqB1rC,CAArB,CAAwB2Y,KAAxB,CAA+BxY,MAA/B,CAAwC,CAEvC,UAAYwyB,KAAK8sE,MAAL,CAAaz/F,CAAb,GAAoB2yB,KAAK8sE,MAAL,CAAa,GAAb,CAAhC,CAEA,GAAK,CAAEC,KAAP,CAAe,OAEf,SAAW,UAAUC,IAAV,EAAX,CAEA,QAAU,EAAV,CAAcj9E,GAAKxwB,MAAMmjG,UAAN,CAAiB3yE,EAApC,CAAwC65E,GAAKrqG,MAAMmjG,UAAN,CAAiBkH,EAA9D,CACA,KAAA,CAAOj8F,CAAP,CAAU61F,GAAV,CAAeC,GAAf,CAAoBwJ,IAApB,CAA0BC,IAA1B,CAAgCC,IAAhC,CAAsCC,IAAtC,CAA4CC,IAA5C,CAAkDC,IAAlD,CAAwDC,KAAxD,CAEA,GAAKR,MAAMj5D,CAAX,CAAe,CAEd,YAAci5D,MAAMS,cAAN,GAA0BT,MAAMS,cAAN,CAAuBT,MAAMj5D,CAAN,CAAQxkB,KAAR,CAAe,GAAf,CAAjD,CAAd,CAEA,IAAM,MAAQ,CAAR,CAAWnlB,EAAIsjG,QAAQ9sG,MAA7B,CAAqCyb,EAAIjS,CAAzC,EAA8C,CAE7C,WAAasjG,QAASrxF,GAAT,CAAb,CAEA,OAASm0B,MAAT,EAEC,IAAK,GAAL;CAECzwC,EAAI2tG,QAASrxF,GAAT,EAAkB4J,KAAlB,CAA0BxY,MAA9B,CACAG,EAAI8/F,QAASrxF,GAAT,EAAkB4J,KAAtB,CAEA+yB,KAAK20D,MAAL,CAAa5tG,CAAb,CAAgB6N,CAAhB,EAEA,MAED,IAAK,GAAL;CAEC7N,EAAI2tG,QAASrxF,GAAT,EAAkB4J,KAAlB,CAA0BxY,MAA9B,CACAG,EAAI8/F,QAASrxF,GAAT,EAAkB4J,KAAtB,CAEA+yB,KAAK40D,MAAL,CAAa7tG,CAAb,CAAgB6N,CAAhB,EAEA,MAED,IAAK,GAAL;CAEC61F,IAAOiK,QAASrxF,GAAT,EAAkB4J,KAAlB,CAA0BxY,MAAjC,CACAi2F,IAAOgK,QAASrxF,GAAT,EAAkB4J,KAAzB,CACAmnF,KAAOM,QAASrxF,GAAT,EAAkB4J,KAAlB,CAA0BxY,MAAjC,CACA4/F,KAAOK,QAASrxF,GAAT,EAAkB4J,KAAzB,CAEA+yB,KAAK60D,gBAAL,CAAuBT,IAAvB,CAA6BC,IAA7B,CAAmC5J,GAAnC,CAAwCC,GAAxC,EAEA8J,MAAQ9D,IAAKA,IAAI9oG,MAAJ,CAAa,CAAlB,CAAR,CAEA,GAAK4sG,KAAL,CAAa,CAEZN,KAAOM,MAAMztG,CAAb,CACAotG,KAAOK,MAAM5/F,CAAb,CAEA,IAAM,OAAS,CAAf,CAAkB0mB,IAAM+1E,SAAxB,CAAmC/1E,IAAnC,CAA2C,CAE1C,MAAQA,GAAK+1E,SAAb,CACAr6E,GAAI/lB,CAAJ,CAAOijG,IAAP,CAAaE,IAAb,CAAmB3J,GAAnB,EACAzzE,GAAI/lB,CAAJ,CAAOkjG,IAAP,CAAaE,IAAb,CAAmB3J,GAAnB,EAEA,CAED,CAED,MAED,IAAK,GAAL;CAECD,IAAOiK,QAASrxF,GAAT,EAAkB4J,KAAlB,CAA0BxY,MAAjC,CACAi2F,IAAOgK,QAASrxF,GAAT,EAAkB4J,KAAzB,CACAmnF,KAAOM,QAASrxF,GAAT,EAAkB4J,KAAlB,CAA0BxY,MAAjC,CACA4/F,KAAOK,QAASrxF,GAAT,EAAkB4J,KAAzB,CACAqnF,KAAOI,QAASrxF,GAAT,EAAkB4J,KAAlB,CAA0BxY,MAAjC,CACA8/F,KAAOG,QAASrxF,GAAT,EAAkB4J,KAAzB,CAEA+yB,KAAK80D,aAAL,CAAoBV,IAApB,CAA0BC,IAA1B,CAAgCC,IAAhC,CAAsCC,IAAtC,CAA4C9J,GAA5C,CAAiDC,GAAjD,EAEA8J,MAAQ9D,IAAKA,IAAI9oG,MAAJ,CAAa,CAAlB,CAAR,CAEA,GAAK4sG,KAAL,CAAa,CAEZN,KAAOM,MAAMztG,CAAb,CACAotG,KAAOK,MAAM5/F,CAAb,CAEA,IAAM,OAAS,CAAf,CAAkB0mB,IAAM+1E,SAAxB,CAAmC/1E,IAAnC,CAA2C,CAE1C,MAAQA,GAAK+1E,SAAb,CACAR,GAAI5/F,CAAJ,CAAOijG,IAAP,CAAaE,IAAb,CAAmBE,IAAnB,CAAyB7J,GAAzB,EACAoG,GAAI5/F,CAAJ,CAAOkjG,IAAP,CAAaE,IAAb,CAAmBE,IAAnB,CAAyB7J,GAAzB,EAEA,CAED,CAED,MA5EF,CAgFA,CAED,CAED,OAAO,CAAEj2F,OAAQu/F,MAAMe,EAAN,CAAW9nF,KAArB,CAA4B+yB,KAAMA,IAAlC,CAAP,CAEA;CAID,GAAK5tC,OAASzL,SAAd,CAA0ByL,KAAO,GAAP,CAC1B,GAAKi/F,YAAc1qG,SAAnB,CAA+B0qG,UAAY,CAAZ,CAE/B,SAAW,KAAKpqE,IAAhB,CAEA,UAAY+tE,YAAaz7C,IAAb,CAAZ,CACA,WAAa,EAAb,CAEA,IAAM,MAAQ,CAAR,CAAWu7B,GAAKtyC,MAAM56C,MAA5B,CAAoCmJ,EAAI+jF,EAAxC,CAA4C/jF,GAA5C,CAAmD,CAElDgyB,MAAM97B,SAAN,CAAgBozB,IAAhB,CAAqBokB,KAArB,CAA4Bw2D,MAA5B,CAAoCzyD,MAAOzxC,CAAP,EAAWmkG,QAAX,EAApC,EAEA,CAED,aAAA,CAEA,CAtJmC,CAArC;;;;;KAkKA1uG,MAAMytG,IAAN,CAAa,SAAW/wF,MAAX,CAAoB,CAEhC1c,MAAMksG,SAAN,CAAgB3qG,IAAhB,CAAsB,IAAtB,EAEA,KAAKw2C,OAAL,CAAe,EAAf,CAEA,GAAKr7B,MAAL,CAAc,CAEb,KAAKiyF,UAAL,CAAiBjyF,MAAjB,EAEA,CAED,CAZD,CAcA1c,MAAMytG,IAAN,CAAWhtG,SAAX,CAAuBE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMksG,SAAN,CAAgBzrG,SAA/B,CAAf,CAA2D,CAEjFoJ,YAAa7J,MAAMytG,IAF8D;;;CASjFkB,WAAY,oBAAW7sE,OAAX,CAAqB,CAEhC,KAAKqsE,MAAL,CAAarsE,QAAS,CAAT,EAAavhC,CAA1B,CAA6BuhC,QAAS,CAAT,EAAa1zB,CAA1C,EAEA,IAAM,MAAQ,CAAR,CAAWxD,EAAIk3B,QAAQ1gC,MAA7B,CAAqCyb,EAAIjS,CAAzC,CAA4CiS,GAA5C,CAAmD,CAElD,KAAKuxF,MAAL,CAAatsE,QAASjlB,CAAT,EAAatc,CAA1B,CAA6BuhC,QAASjlB,CAAT,EAAazO,CAA1C,EAEA,CAED,CAnBgF,CAqBjF+/F,OAAQ,gBAAW5tG,CAAX,CAAc6N,CAAd,CAAkB,CAEzB,KAAK2pC,OAAL,CAAalkB,IAAb,CAAmB,CAAEmd,OAAQ,QAAV,CAAoB49D,KAAM,CAAEruG,CAAF,CAAK6N,CAAL,CAA1B,CAAnB,EAEA,CAzBgF,CA2BjFggG,OAAQ,gBAAW7tG,CAAX,CAAc6N,CAAd,CAAkB,CAEzB,aAAe,KAAK2pC,OAAL,CAAc,KAAKA,OAAL,CAAa32C,MAAb,CAAsB,CAApC,EAAwCwtG,IAAvD,CAEA,OAASC,SAAUA,SAASztG,MAAT,CAAkB,CAA5B,CAAT,CACA,OAASytG,SAAUA,SAASztG,MAAT,CAAkB,CAA5B,CAAT,CAEA,UAAY,UAAUqrG,SAAV,CAAqB,UAAUr4F,OAAV,CAAmBN,EAAnB,CAAuBP,EAAvB,CAArB,CAAkD,UAAUa,OAAV,CAAmB7T,CAAnB,CAAsB6N,CAAtB,CAAlD,CAAZ,CACA,KAAK+9F,MAAL,CAAYt4E,IAAZ,CAAkBw4E,KAAlB,EAEA,KAAKt0D,OAAL,CAAalkB,IAAb,CAAmB,CAAEmd,OAAQ,QAAV,CAAoB49D,KAAM,CAAEruG,CAAF,CAAK6N,CAAL,CAA1B,CAAnB,EAEA,CAvCgF,CAyCjFigG,iBAAkB,0BAAWS,IAAX,CAAiBC,IAAjB,CAAuB1K,EAAvB,CAA2BZ,EAA3B,CAAgC,CAEjD,aAAe,KAAK1rD,OAAL,CAAc,KAAKA,OAAL,CAAa32C,MAAb,CAAsB,CAApC,EAAwCwtG,IAAvD,CAEA,OAASC,SAAUA,SAASztG,MAAT,CAAkB,CAA5B,CAAT,CACA,OAASytG,SAAUA,SAASztG,MAAT,CAAkB,CAA5B,CAAT,CAEA,UAAY,UAAU4tG,oBAAV,CACX,UAAU56F,OAAV,CAAmBN,EAAnB,CAAuBP,EAAvB,CADW,CAEX,UAAUa,OAAV,CAAmB06F,IAAnB,CAAyBC,IAAzB,CAFW,CAGX,UAAU36F,OAAV,CAAmBiwF,EAAnB,CAAuBZ,EAAvB,CAHW,CAAZ,CAMA,KAAK0I,MAAL,CAAYt4E,IAAZ,CAAkBw4E,KAAlB,EAEA,KAAKt0D,OAAL,CAAalkB,IAAb,CAAmB,CAAEmd,OAAQ,kBAAV,CAA8B49D,KAAM,CAAEE,IAAF,CAAQC,IAAR,CAAc1K,EAAd,CAAkBZ,EAAlB,CAApC,CAAnB,EAEA,CA1DgF,CA4DjF6K,cAAe,uBAAWW,KAAX,CAAkBC,KAAlB,CAAyBC,KAAzB,CAAgCC,KAAhC,CAAuC/K,EAAvC,CAA2CZ,EAA3C,CAAgD,CAE9D,aAAe,KAAK1rD,OAAL,CAAc,KAAKA,OAAL,CAAa32C,MAAb,CAAsB,CAApC,EAAwCwtG,IAAvD,CAEA,OAASC,SAAUA,SAASztG,MAAT,CAAkB,CAA5B,CAAT,CACA,OAASytG,SAAUA,SAASztG,MAAT,CAAkB,CAA5B,CAAT,CAEA,UAAY,UAAUiuG,gBAAV,CACX,UAAUj7F,OAAV,CAAmBN,EAAnB,CAAuBP,EAAvB,CADW,CAEX,UAAUa,OAAV,CAAmB66F,KAAnB,CAA0BC,KAA1B,CAFW,CAGX,UAAU96F,OAAV,CAAmB+6F,KAAnB,CAA0BC,KAA1B,CAHW,CAIX,UAAUh7F,OAAV,CAAmBiwF,EAAnB,CAAuBZ,EAAvB,CAJW,CAAZ,CAOA,KAAK0I,MAAL,CAAYt4E,IAAZ,CAAkBw4E,KAAlB,EAEA,KAAKt0D,OAAL,CAAalkB,IAAb,CAAmB,CAAEmd,OAAQ,eAAV,CAA2B49D,KAAM,CAAEK,KAAF,CAASC,KAAT,CAAgBC,KAAhB,CAAuBC,KAAvB,CAA8B/K,EAA9B,CAAkCZ,EAAlC,CAAjC,CAAnB,EAEA,CA9EgF,CAgFjF6L,WAAY,oBAAWpF,uBAA0B,CAEhD,SAAW3tE,MAAM97B,SAAN,CAAgBgM,KAAhB,CAAsBlL,IAAtB,CAA4BJ,SAA5B,CAAX,CAEA,aAAe,KAAK42C,OAAL,CAAc,KAAKA,OAAL,CAAa32C,MAAb,CAAsB,CAApC,EAAwCwtG,IAAvD,CAEA,OAASC,SAAUA,SAASztG,MAAT,CAAkB,CAA5B,CAAT,CACA,OAASytG,SAAUA,SAASztG,MAAT,CAAkB,CAA5B,CAAT,CAEA,SAAW,CAAE,UAAUgT,OAAV,CAAmBN,EAAnB,CAAuBP,EAAvB,CAAF,CAAX,CACAgpB,MAAM97B,SAAN,CAAgBozB,IAAhB,CAAqBokB,KAArB,CAA4Bs3D,IAA5B,CAAkCrF,GAAlC,EAEA,UAAY,UAAUsF,WAAV,CAAuBD,IAAvB,CAAZ,CACA,KAAKpD,MAAL,CAAYt4E,IAAZ,CAAkBw4E,KAAlB,EAEA,KAAKt0D,OAAL,CAAalkB,IAAb,CAAmB,CAAEmd,OAAQ,YAAV,CAAwB49D,KAAMA,IAA9B,CAAnB,EAEA,CAjGgF,CAmGjFx1C,IAAK,aAAWirC,EAAX,CAAeZ,EAAf,CAAmBgM,OAAnB,CAA4BC,WAA5B,CAAyCC,SAAzC,CAAoDC,UAApD,CAAiE,CAErE,aAAe,KAAK73D,OAAL,CAAc,KAAKA,OAAL,CAAa32C,MAAb,CAAsB,CAApC,EAAwCwtG,IAAvD,CACA,OAASC,SAAUA,SAASztG,MAAT,CAAkB,CAA5B,CAAT,CACA,OAASytG,SAAUA,SAASztG,MAAT,CAAkB,CAA5B,CAAT,CAEA,KAAKyuG,MAAL,CAAaxL,GAAKvwF,EAAlB,CAAsB2vF,GAAKlwF,EAA3B,CAA+Bk8F,OAA/B,CACCC,WADD,CACcC,SADd,CACyBC,UADzB,EAGA,CA5GgF,CA8GjFC,OAAQ,gBAAWxL,EAAX,CAAeZ,EAAf,CAAmBgM,OAAnB,CAA4BC,WAA5B,CAAyCC,SAAzC,CAAoDC,UAApD,CAAiE,CAExE,KAAKE,UAAL,CAAiBzL,EAAjB,CAAqBZ,EAArB,CAAyBgM,OAAzB,CAAkCA,OAAlC,CAA2CC,WAA3C,CAAwDC,SAAxD,CAAmEC,UAAnE,EAEA,CAlHgF,CAoHjFG,QAAS,iBAAW1L,EAAX,CAAeZ,EAAf,CAAmBuM,OAAnB,CAA4BC,OAA5B,CAAqCP,WAArC,CAAkDC,SAAlD,CAA6DC,UAA7D,CAAyEM,SAAzE,CAAqF,CAE7F,aAAe,KAAKn4D,OAAL,CAAc,KAAKA,OAAL,CAAa32C,MAAb,CAAsB,CAApC,EAAwCwtG,IAAvD,CACA,OAASC,SAAUA,SAASztG,MAAT,CAAkB,CAA5B,CAAT,CACA,OAASytG,SAAUA,SAASztG,MAAT,CAAkB,CAA5B,CAAT,CAEA,KAAK0uG,UAAL,CAAiBzL,GAAKvwF,EAAtB,CAA0B2vF,GAAKlwF,EAA/B,CAAmCy8F,OAAnC,CAA4CC,OAA5C,CAAqDP,WAArD,CAAkEC,SAAlE,CAA6EC,UAA7E,CAAyFM,SAAzF,EAEA,CA5HgF,CA8HjFJ,WAAY,oBAAWzL,EAAX,CAAeZ,EAAf,CAAmBuM,OAAnB,CAA4BC,OAA5B,CAAqCP,WAArC,CAAkDC,SAAlD,CAA6DC,UAA7D,CAAyEM,SAAzE,CAAqF,CAEhG,SAAW,CACV7L,EADU,CACNZ,EADM,CAEVuM,OAFU,CAEDC,OAFC,CAGVP,WAHU,CAGGC,SAHH,CAIVC,UAJU,CAKVM,WAAa;CALH,CAAX,CAQA,UAAY,UAAUC,YAAV,CAAwB9L,EAAxB,CAA4BZ,EAA5B,CAAgCuM,OAAhC,CAAyCC,OAAzC,CAAkDP,WAAlD,CAA+DC,SAA/D,CAA0EC,UAA1E,CAAsFM,SAAtF,CAAZ,CACA,KAAK/D,MAAL,CAAYt4E,IAAZ,CAAkBw4E,KAAlB,EAEA,cAAgBA,MAAM/5E,QAAN,CAAgB,CAAhB,CAAhB,CACAs8E,KAAK/6E,IAAL,CAAWu8E,UAAU7vG,CAArB,EACAquG,KAAK/6E,IAAL,CAAWu8E,UAAUhiG,CAArB,EAEA,KAAK2pC,OAAL,CAAalkB,IAAb,CAAmB,CAAEmd,OAAQ,SAAV,CAAqB49D,KAAMA,IAA3B,CAAnB,EAEA,CAjJgF,CAmJjF9D,gBAAiB,yBAAWD,SAAX,CAAuB,CAEvC,GAAK,CAAEA,SAAP,CAAmBA,UAAY,EAAZ,CAEnB,WAAa,EAAb,CAEA,IAAM,MAAQ,CAAd,CAAiBhuF,EAAIguF,SAArB,CAAgChuF,GAAhC,CAAuC,CAEtCH,OAAOmX,IAAP,CAAa,KAAKvB,QAAL,CAAezV,EAAIguF,SAAnB,CAAb;CAIA,CAED,GAAK,KAAKuB,SAAV,CAAsB,CAErB1vF,OAAOmX,IAAP,CAAanX,OAAQ,CAAR,CAAb,EAEA,CAED,aAAA,CAEA,CAzKgF,CA2KjFkuF,UAAW,mBAAWC,SAAX,CAAuB,CAEjCA,UAAYA,WAAa,EAAzB,CAEA,OAAS7qG,MAAMmjG,UAAN,CAAiB3yE,EAA1B,CACA,OAASxwB,MAAMmjG,UAAN,CAAiBkH,EAA1B,CAEA,WAAa,EAAb,CAEA,OAAA,CAASnG,GAAT,CAAc4J,IAAd,CAAoBC,IAApB,CAA0BH,IAA1B,CAAgCC,IAAhC,CAAsCH,IAAtC,CAA4CC,IAA5C,CACCK,KADD,CACQ5mF,EADR,CACYD,EADZ,CAGA,IAAM,MAAQ,CAAR,CAAWvc,EAAI,KAAKmtC,OAAL,CAAa32C,MAAlC,CAA0Cyb,EAAIjS,CAA9C,CAAiDiS,GAAjD,CAAwD,CAEvD,SAAW,KAAKk7B,OAAL,CAAcl7B,CAAd,CAAX,CAEA,WAAawzF,KAAKr/D,MAAlB,CACA,SAAWq/D,KAAKzB,IAAhB,CAEA,OAAS59D,MAAT,EAEA,IAAK,QAAL,CAECt0B,OAAOmX,IAAP,CAAa,UAAUzf,OAAV,CAAmBw6F,KAAM,CAAN,CAAnB,CAA8BA,KAAM,CAAN,CAA9B,CAAb,EAEA,MAED,IAAK,QAAL,CAEClyF,OAAOmX,IAAP,CAAa,UAAUzf,OAAV,CAAmBw6F,KAAM,CAAN,CAAnB,CAA8BA,KAAM,CAAN,CAA9B,CAAb,EAEA,MAED,IAAK,kBAAL,CAEC3K,IAAO2K,KAAM,CAAN,CAAP,CACA1K,IAAO0K,KAAM,CAAN,CAAP,CAEAhB,KAAOgB,KAAM,CAAN,CAAP,CACAf,KAAOe,KAAM,CAAN,CAAP,CAEA,GAAKlyF,OAAOtb,MAAP,CAAgB,CAArB,CAAyB,CAExB4sG,MAAQtxF,OAAQA,OAAOtb,MAAP,CAAgB,CAAxB,CAAR,CAEAssG,KAAOM,MAAMztG,CAAb,CACAotG,KAAOK,MAAM5/F,CAAb,CAEA,CAPD,IAOO,CAEN4/F,MAAQ,KAAKj2D,OAAL,CAAcl7B,EAAI,CAAlB,EAAsB+xF,IAA9B,CAEAlB,KAAOM,MAAOA,MAAM5sG,MAAN,CAAe,CAAtB,CAAP,CACAusG,KAAOK,MAAOA,MAAM5sG,MAAN,CAAe,CAAtB,CAAP,CAEA,CAED,IAAM,MAAQ,CAAd,CAAiBof,GAAKqqF,SAAtB,CAAiCrqF,GAAjC,CAAwC,CAEvC,MAAQA,EAAIqqF,SAAZ,CAEAzjF,GAAKoJ,GAAI/lB,CAAJ,CAAOijG,IAAP,CAAaE,IAAb,CAAmB3J,GAAnB,CAAL,CACA98E,GAAKqJ,GAAI/lB,CAAJ,CAAOkjG,IAAP,CAAaE,IAAb,CAAmB3J,GAAnB,CAAL,CAEAxnF,OAAOmX,IAAP,CAAa,UAAUzf,OAAV,CAAmBgT,EAAnB,CAAuBD,EAAvB,CAAb,EAEA,CAED,MAED,IAAK,eAAL,CAEC88E,IAAO2K,KAAM,CAAN,CAAP,CACA1K,IAAO0K,KAAM,CAAN,CAAP,CAEAhB,KAAOgB,KAAM,CAAN,CAAP,CACAf,KAAOe,KAAM,CAAN,CAAP,CAEAd,KAAOc,KAAM,CAAN,CAAP,CACAb,KAAOa,KAAM,CAAN,CAAP,CAEA,GAAKlyF,OAAOtb,MAAP,CAAgB,CAArB,CAAyB,CAExB4sG,MAAQtxF,OAAQA,OAAOtb,MAAP,CAAgB,CAAxB,CAAR,CAEAssG,KAAOM,MAAMztG,CAAb,CACAotG,KAAOK,MAAM5/F,CAAb,CAEA,CAPD,IAOO,CAEN4/F,MAAQ,KAAKj2D,OAAL,CAAcl7B,EAAI,CAAlB,EAAsB+xF,IAA9B,CAEAlB,KAAOM,MAAOA,MAAM5sG,MAAN,CAAe,CAAtB,CAAP,CACAusG,KAAOK,MAAOA,MAAM5sG,MAAN,CAAe,CAAtB,CAAP,CAEA,CAGD,IAAM,MAAQ,CAAd,CAAiBof,GAAKqqF,SAAtB,CAAiCrqF,GAAjC,CAAwC,CAEvC,MAAQA,EAAIqqF,SAAZ,CAEAzjF,GAAKijF,GAAI5/F,CAAJ,CAAOijG,IAAP,CAAaE,IAAb,CAAmBE,IAAnB,CAAyB7J,GAAzB,CAAL,CACA98E,GAAKkjF,GAAI5/F,CAAJ,CAAOkjG,IAAP,CAAaE,IAAb,CAAmBE,IAAnB,CAAyB7J,GAAzB,CAAL,CAEAxnF,OAAOmX,IAAP,CAAa,UAAUzf,OAAV,CAAmBgT,EAAnB,CAAuBD,EAAvB,CAAb,EAEA,CAED,MAED,IAAK,YAAL,CAEC6mF,MAAQ,KAAKj2D,OAAL,CAAcl7B,EAAI,CAAlB,EAAsB+xF,IAA9B,CAEA,SAAW,UAAUx6F,OAAV,CAAmB45F,MAAOA,MAAM5sG,MAAN,CAAe,CAAtB,CAAnB,CAA8C4sG,MAAOA,MAAM5sG,MAAN,CAAe,CAAtB,CAA9C,CAAX,CACA,SAAW,CAAEy7C,IAAF,CAAX,CAEA,MAAQguD,UAAY+D,KAAM,CAAN,EAAUxtG,MAA9B,CAEAkvG,KAAOA,KAAKx7C,MAAL,CAAa85C,KAAM,CAAN,CAAb,CAAP,CAEA,WAAa,UAAUY,WAAV,CAAuBc,IAAvB,CAAb,CAEA,IAAM,MAAQ,CAAd,CAAiB9vF,GAAK4D,CAAtB,CAAyB5D,GAAzB,CAAgC,CAE/B9D,OAAOmX,IAAP,CAAa08E,OAAO7F,UAAP,CAAmBlqF,EAAI4D,CAAvB,CAAb,EAEA,CAED,MAED,IAAK,KAAL,CAEC,OAASwqF,KAAM,CAAN,CAAT,CAAoBnL,GAAKmL,KAAM,CAAN,CAAzB,CACCa,QAAUb,KAAM,CAAN,CADX,CAECc,YAAcd,KAAM,CAAN,CAFf,CAE0Be,UAAYf,KAAM,CAAN,CAFtC,CAGCgB,WAAa,CAAC,CAAEhB,KAAM,CAAN,CAHjB,CAKA,eAAiBe,UAAYD,WAA7B,CACA,SAAA,CACA,eAAiB7E,UAAY,CAA7B,CAEA,IAAM,MAAQ,CAAd,CAAiBrqF,GAAKgwF,UAAtB,CAAkChwF,GAAlC,CAAyC,CAExC,MAAQA,EAAIgwF,UAAZ,CAEA,GAAK,CAAEZ,UAAP,CAAoB,CAEnBnlG,EAAI,EAAIA,CAAR,CAEA,CAEDmF,MAAQ8/F,YAAcjlG,EAAIgmG,UAA1B,CAEArpF,GAAKi9E,GAAKoL,QAAUrvG,KAAK6O,GAAL,CAAUW,KAAV,CAApB,CACAuX,GAAKs8E,GAAKgM,QAAUrvG,KAAK8O,GAAL,CAAUU,KAAV,CAApB;CAIA8M,OAAOmX,IAAP,CAAa,UAAUzf,OAAV,CAAmBgT,EAAnB,CAAuBD,EAAvB,CAAb,EAEA;CAID,MAED,IAAK,SAAL,CAEC,OAASynF,KAAM,CAAN,CAAT,CAAoBnL,GAAKmL,KAAM,CAAN,CAAzB,CACCoB,QAAUpB,KAAM,CAAN,CADX,CAECqB,QAAUrB,KAAM,CAAN,CAFX,CAGCc,YAAcd,KAAM,CAAN,CAHf,CAG0Be,UAAYf,KAAM,CAAN,CAHtC,CAICgB,WAAa,CAAC,CAAEhB,KAAM,CAAN,CAJjB,CAKCsB,UAAYtB,KAAM,CAAN,CALb,CAQA,eAAiBe,UAAYD,WAA7B,CACA,SAAA,CACA,eAAiB7E,UAAY,CAA7B,CAEA,OAAA,CAAS37F,GAAT,CACA,GAAKghG,YAAc,CAAnB,CAAuB,CAEtBjhG,IAAM7O,KAAK6O,GAAL,CAAUihG,SAAV,CAAN,CACAhhG,IAAM9O,KAAK8O,GAAL,CAAUghG,SAAV,CAAN,CAEA,CAED,IAAM,MAAQ,CAAd,CAAiB1vF,GAAKgwF,UAAtB,CAAkChwF,GAAlC,CAAyC,CAExC,MAAQA,EAAIgwF,UAAZ,CAEA,GAAK,CAAEZ,UAAP,CAAoB,CAEnBnlG,EAAI,EAAIA,CAAR,CAEA,CAEDmF,MAAQ8/F,YAAcjlG,EAAIgmG,UAA1B,CAEArpF,GAAKi9E,GAAK2L,QAAU5vG,KAAK6O,GAAL,CAAUW,KAAV,CAApB,CACAuX,GAAKs8E,GAAKwM,QAAU7vG,KAAK8O,GAAL,CAAUU,KAAV,CAApB,CAEA,GAAKsgG,YAAc,CAAnB,CAAuB,CAEtB,MAAQ9oF,EAAR,CAAYhZ,EAAI+Y,EAAhB;CAGAC,GAAK,CAAE7mB,EAAI8jG,EAAN,EAAap1F,GAAb,CAAmB,CAAEb,EAAIq1F,EAAN,EAAav0F,GAAhC,CAAsCm1F,EAA3C,CACAl9E,GAAK,CAAE5mB,EAAI8jG,EAAN,EAAan1F,GAAb,CAAmB,CAAEd,EAAIq1F,EAAN,EAAax0F,GAAhC,CAAsCw0F,EAA3C,CAEA;CAID/mF,OAAOmX,IAAP,CAAa,UAAUzf,OAAV,CAAmBgT,EAAnB,CAAuBD,EAAvB,CAAb,EAEA;CAID,MA5MD;CAgNA;CAKD,cAAgBzK,OAAQA,OAAOtb,MAAP,CAAgB,CAAxB,CAAhB,CACA,GAAKhB,KAAK8Q,GAAL,CAAUk/F,UAAU7vG,CAAV,CAAcmc,OAAQ,CAAR,EAAYnc,CAApC,EAA0CN,OAAOC,OAAjD,EACFE,KAAK8Q,GAAL,CAAUk/F,UAAUhiG,CAAV,CAAcsO,OAAQ,CAAR,EAAYtO,CAApC,EAA0CnO,OAAOC,OADpD,CAECwc,OAAOyd,MAAP,CAAezd,OAAOtb,MAAP,CAAgB,CAA/B,CAAkC,CAAlC,EAED,GAAK,KAAKgrG,SAAV,CAAsB,CAErB1vF,OAAOmX,IAAP,CAAanX,OAAQ,CAAR,CAAb,EAEA,CAED,aAAA,CAEA,CAhagF,CAkajFgyF,SAAU,kBAAWgC,KAAX,CAAkBC,OAAlB,CAA4B,CAErC,wBAAA,CAA0BC,SAA1B,CAAsC,CAErC,aAAe,EAAf,CAAmBC,SAAW,UAAUpD,IAAV,EAA9B,CAEA,IAAM,MAAQ,CAAR,CAAW7iG,EAAIgmG,UAAUxvG,MAA/B,CAAuCyb,EAAIjS,CAA3C,CAA8CiS,GAA9C,CAAqD,CAEpD,SAAW+zF,UAAW/zF,CAAX,CAAX,CAEA,SAAWwzF,KAAKzB,IAAhB,CACA,WAAayB,KAAKr/D,MAAlB,CAEA,GAAKA,SAAW,QAAhB,CAA2B,CAE1B,GAAK6/D,SAAS94D,OAAT,CAAiB32C,MAAjB,GAA4B,CAAjC,CAAqC,CAEpC0vG,SAASj9E,IAAT,CAAeg9E,QAAf,EACAA,SAAW,UAAUpD,IAAV,EAAX,CAEA,CAED,CAEDoD,SAAU7/D,MAAV,EAAmBiH,KAAnB,CAA0B44D,QAA1B,CAAoCjC,IAApC,EAEA,CAED,GAAKiC,SAAS94D,OAAT,CAAiB32C,MAAjB,GAA4B,CAAjC,CAAqC,CAEpC0vG,SAASj9E,IAAT,CAAeg9E,QAAf,EAEA;CAID,eAAA,CAEA,CAED,wBAAA,CAA0BE,UAA1B,CAAuC,CAEtC,WAAa,EAAb,CAEA,IAAM,MAAQ,CAAR,CAAWnmG,EAAImmG,WAAW3vG,MAAhC,CAAwCyb,EAAIjS,CAA5C,CAA+CiS,GAA/C,CAAsD,CAErD,YAAck0F,WAAYl0F,CAAZ,CAAd,CAEA,aAAe,UAAUm0F,KAAV,EAAf,CACAC,SAASl5D,OAAT,CAAmBm5D,QAAQn5D,OAA3B,CACAk5D,SAAS9E,MAAT,CAAkB+E,QAAQ/E,MAA1B,CAEAsC,OAAO56E,IAAP,CAAao9E,QAAb,EAEA;CAID,aAAA,CAEA,CAED,6BAAA,CAA+BE,IAA/B,CAAqCC,SAArC,CAAiD,CAEhD,YAAcA,UAAUhwG,MAAxB;;;;CAMA,WAAa,KAAb,CACA,IAAM,MAAQiwG,QAAU,CAAlB,CAAqB7mG,EAAI,CAA/B,CAAkCA,EAAI6mG,OAAtC,CAA+C9mG,EAAIC,GAAnD,CAA0D,CAEzD,cAAiB4mG,UAAW7mG,CAAX,CAAjB,CACA,eAAiB6mG,UAAW5mG,CAAX,CAAjB,CAEA,WAAa8mG,WAAW/wG,CAAX,CAAegxG,UAAUhxG,CAAtC,CACA,WAAa+wG,WAAWljG,CAAX,CAAemjG,UAAUnjG,CAAtC,CAEA,GAAKhO,KAAK8Q,GAAL,CAAUsgG,MAAV,EAAqBvxG,OAAOC,OAAjC,CAA2C;CAG1C,GAAKsxG,OAAS,CAAd,CAAkB,CAEjBD,UAAaH,UAAW5mG,CAAX,CAAb,CAA6BinG,OAAS,CAAEA,MAAX,CAC7BH,WAAaF,UAAW7mG,CAAX,CAAb,CAA6BinG,OAAS,CAAEA,MAAX,CAE7B,CACD,GAAOL,KAAK/iG,CAAL,CAASmjG,UAAUnjG,CAArB,EAA8B+iG,KAAK/iG,CAAL,CAASkjG,WAAWljG,CAAvD,CAA+D,SAE/D,GAAK+iG,KAAK/iG,CAAL,GAAWmjG,UAAUnjG,CAA1B,CAA8B,CAE7B,GAAK+iG,KAAK5wG,CAAL,GAAWgxG,UAAUhxG,CAA1B,CAA+B,WAAA;;CAG/B,CALD,IAKO,CAEN,aAAeixG,QAAWL,KAAK5wG,CAAL,CAASgxG,UAAUhxG,CAA9B,EAAoCkxG,QAAWN,KAAK/iG,CAAL,CAASmjG,UAAUnjG,CAA9B,CAAnD,CACA,GAAKsjG,WAAa,CAAlB,CAAyB,WAAA;CACzB,GAAKA,SAAW,CAAhB,CAAwB,SACxBC,OAAS,CAAEA,MAAX;CAEA,CAED,CAzBD,IAyBO;CAGN,GAAKR,KAAK/iG,CAAL,GAAWmjG,UAAUnjG,CAA1B,CAAgC;;CAEhC,GAASkjG,WAAW/wG,CAAX,EAAgB4wG,KAAK5wG,CAAvB,EAAgC4wG,KAAK5wG,CAAL,EAAUgxG,UAAUhxG,CAAtD,EACCgxG,UAAUhxG,CAAV,EAAe4wG,KAAK5wG,CAAtB,EAA+B4wG,KAAK5wG,CAAL,EAAU+wG,WAAW/wG,CADxD,CACiE,WAAA;;CAGjE,CAED,CAED,aAAA,CAEA,CAED,gBAAkBP,MAAMmjG,UAAN,CAAiB8G,WAAnC,CAEA,aAAe2H,gBAAiB,KAAK75D,OAAtB,CAAf,CACA,GAAK+4D,SAAS1vG,MAAT,GAAoB,CAAzB,CAA6B,OAAO,EAAP,CAE7B,GAAKuvG,UAAY,IAAjB,CAAwB,uBAAwBG,QAAjB,CAAP,CAGxB,SAAA,CAAWI,OAAX,CAAoBD,QAApB,CAA8BxC,OAAS,EAAvC,CAEA,GAAKqC,SAAS1vG,MAAT,GAAoB,CAAzB,CAA6B,CAE5B8vG,QAAUJ,SAAU,CAAV,CAAV,CACAG,SAAW,UAAUD,KAAV,EAAX,CACAC,SAASl5D,OAAT,CAAmBm5D,QAAQn5D,OAA3B,CACAk5D,SAAS9E,MAAT,CAAkB+E,QAAQ/E,MAA1B,CACAsC,OAAO56E,IAAP,CAAao9E,QAAb,EACA,aAAA,CAEA,CAED,eAAiB,CAAEhH,YAAa6G,SAAU,CAAV,EAAclG,SAAd,EAAb,CAAnB,CACAiH,WAAanB,MAAQ,CAAEmB,UAAV,CAAuBA,UAApC;CAIA,qBAAuB,EAAvB,CACA,cAAgB,EAAhB,CACA,kBAAoB,EAApB,CACA,YAAc,CAAd,CACA,aAAA,CAEAC,UAAWC,OAAX,EAAuB5xG,SAAvB,CACA6xG,cAAeD,OAAf,EAA2B,EAA3B,CAEA,IAAM,MAAQ,CAAR,CAAWnnG,EAAIkmG,SAAS1vG,MAA9B,CAAsCyb,EAAIjS,CAA1C,CAA6CiS,GAA7C,CAAoD,CAEnDq0F,QAAUJ,SAAUj0F,CAAV,CAAV,CACAo1F,UAAYf,QAAQtG,SAAR,EAAZ,CACAsH,MAAQjI,YAAagI,SAAb,CAAR,CACAC,MAAQxB,MAAQ,CAAEwB,KAAV,CAAkBA,KAA1B,CAEA,GAAKA,KAAL,CAAa,CAEZ,GAAO,CAAEL,UAAJ,EAAsBC,UAAWC,OAAX,CAA3B,CAAoDA,UAEpDD,UAAWC,OAAX,EAAuB,CAAEpnG,EAAG,UAAUqmG,KAAV,EAAL,CAAwBzmG,EAAG0nG,SAA3B,CAAvB,CACAH,UAAWC,OAAX,EAAqBpnG,CAArB,CAAuBotC,OAAvB,CAAiCm5D,QAAQn5D,OAAzC,CACA+5D,UAAWC,OAAX,EAAqBpnG,CAArB,CAAuBwhG,MAAvB,CAAgC+E,QAAQ/E,MAAxC,CAEA,GAAK0F,UAAL,CAAkBE,UAClBC,cAAeD,OAAf,EAA2B,EAA3B;CAIA,CAbD,IAaO,CAENC,cAAeD,OAAf,EAAyBl+E,IAAzB,CAA+B,CAAEnpB,EAAGwmG,OAAL,CAAc3mG,EAAG0nG,UAAW,CAAX,CAAjB,CAA/B;CAIA,CAED;CAGD,GAAK,CAAEH,UAAW,CAAX,CAAP,CAAwB,uBAAwBhB,QAAjB,CAAP,CAGxB,GAAKgB,UAAU1wG,MAAV,CAAmB,CAAxB,CAA4B,CAE3B,cAAgB,KAAhB,CACA,aAAe,EAAf,CAEA,IAAM,SAAW,CAAX,CAAc+wG,KAAOL,UAAU1wG,MAArC,CAA6CgnG,KAAO+J,IAApD,CAA0D/J,MAA1D,CAAoE,CAEnEgK,iBAAkBhK,IAAlB,EAA2B,EAA3B,CAEA,CAED,IAAM,SAAW,CAAX,CAAc+J,KAAOL,UAAU1wG,MAArC,CAA6CgnG,KAAO+J,IAApD,CAA0D/J,MAA1D,CAAoE,CAEnE,QAAU4J,cAAe5J,IAAf,CAAV,CAEA,IAAM,SAAW,CAAjB,CAAoBG,KAAO8J,IAAIjxG,MAA/B,CAAuCmnG,MAAvC,CAAiD,CAEhD,OAAS8J,IAAK9J,IAAL,CAAT,CACA,oBAAsB,IAAtB,CAEA,IAAM,UAAY,CAAlB,CAAqB+J,MAAQR,UAAU1wG,MAAvC,CAA+CkxG,OAA/C,CAA0D,CAEzD,GAAKC,qBAAsBC,GAAGjoG,CAAzB,CAA4BunG,UAAWQ,KAAX,EAAmB/nG,CAA/C,CAAL,CAA0D,CAEzD,GAAK69F,OAASkK,KAAd,CAAsBG,SAAS5+E,IAAT,CAAe,CAAE6+E,MAAOtK,IAAT,CAAeuK,IAAKL,KAApB,CAA2B1K,KAAMW,IAAjC,CAAf,EACtB,GAAKqK,eAAL,CAAuB,CAEtBA,gBAAkB,KAAlB,CACAR,iBAAkBE,KAAlB,EAA0Bz+E,IAA1B,CAAgC2+E,EAAhC,EAEA,CALD,IAKO,CAENK,UAAY,IAAZ,CAEA,CAED,CAED,CACD,GAAKD,eAAL,CAAuB,CAEtBR,iBAAkBhK,IAAlB,EAAyBv0E,IAAzB,CAA+B2+E,EAA/B,EAEA,CAED,CAED;CAED,GAAKC,SAASrxG,MAAT,CAAkB,CAAvB,CAA2B;CAG1B,GAAK,CAAEyxG,SAAP,CAAmBb,cAAgBI,gBAAhB,CAEnB,CAED,CAED,YAAA,CAEA,IAAM,MAAQ,CAAR,CAAWx1F,GAAKk1F,UAAU1wG,MAAhC,CAAwCyb,EAAID,EAA5C,CAAgDC,GAAhD,CAAuD,CAEtDo0F,SAAWa,UAAWj1F,CAAX,EAAelS,CAA1B,CACA8jG,OAAO56E,IAAP,CAAao9E,QAAb,EACA6B,SAAWd,cAAen1F,CAAf,CAAX,CAEA,IAAM,MAAQ,CAAR,CAAWynB,GAAKwuE,SAAS1xG,MAA/B,CAAuCof,EAAI8jB,EAA3C,CAA+C9jB,GAA/C,CAAsD,CAErDywF,SAASrM,KAAT,CAAe/wE,IAAf,CAAqBi/E,SAAUtyF,CAAV,EAAc9V,CAAnC,EAEA,CAED;CAID,aAAA,CAEA,CA9qBgF,CAA3D,CAAvB;;;;;;;;;CA+rBA1K,MAAMgxG,KAAN,CAAc,UAAY,CAEzBhxG,MAAMytG,IAAN,CAAWx1D,KAAX,CAAkB,IAAlB,CAAwB92C,SAAxB,EAEA,KAAKyjG,KAAL,CAAa,EAAb,CAEA,CAND,CAQA5kG,MAAMgxG,KAAN,CAAYvwG,SAAZ,CAAwBE,OAAOK,MAAP,CAAeL,OAAOy2B,MAAP,CAAep3B,MAAMytG,IAAN,CAAWhtG,SAA1B,CAAf,CAAsD,CAE7EoJ,YAAa7J,MAAMgxG,KAF0D;CAM7E+B,QAAS,iBAAWjqD,OAAX,CAAqB,CAE7B,iBAAiBkqD,eAAV,CAA2B,IAA3B,CAAiClqD,OAAjC,CAAP,CAEA,CAV4E;CAc7EmqD,aAAc,sBAAWnqD,OAAX,CAAqB,CAElC,iBAAiBoqD,aAAV,CAAyB,IAAzB,CAA+BpqD,OAA/B,CAAP,CAEA,CAlB4E,CAoB7EqqD,eAAgB,wBAAWtI,SAAX,CAAuB,CAEtC,aAAe,EAAf,CAEA,IAAM,MAAQ,CAAR,CAAWjgG,EAAI,KAAKg6F,KAAL,CAAWxjG,MAAhC,CAAwCyb,EAAIjS,CAA5C,CAA+CiS,GAA/C,CAAsD,CAErDu2F,SAAUv2F,CAAV,EAAgB,KAAK+nF,KAAL,CAAY/nF,CAAZ,EAAgB+tF,SAAhB,CAA2BC,SAA3B,CAAhB,CAEA,CAED,eAAA,CAEA,CAhC4E;CAoC7EwI,iBAAkB,0BAAWxI,SAAX,CAAuB,CAExC,OAAO,CAENtD,MAAO,KAAKqD,SAAL,CAAgBC,SAAhB,CAFD,CAGNjG,MAAO,KAAKuO,cAAL,CAAqBtI,SAArB,CAHD,CAAP,CAOA,CA7C4E,CA+C7EyI,cAAe,uBAAWzI,SAAX,CAAuB,CAErC,YAAYwI,gBAAL,CAAuBxI,SAAvB,CAAP,CAEA,CAnD4E,CAAtD,CAAxB;;;iEA6DA7qG,MAAMysG,SAAN,CAAkB,SAAW37F,EAAX,CAAemF,EAAf,CAAoB,CAErC,KAAKnF,EAAL,CAAUA,EAAV,CACA,KAAKmF,EAAL,CAAUA,EAAV,CAEA,CALD,CAOAjW,MAAMysG,SAAN,CAAgBhsG,SAAhB,CAA4BE,OAAOy2B,MAAP,CAAep3B,MAAMyqG,KAAN,CAAYhqG,SAA3B,CAA5B,CACAT,MAAMysG,SAAN,CAAgBhsG,SAAhB,CAA0BoJ,WAA1B,CAAwC7J,MAAMysG,SAA9C,CAEAzsG,MAAMysG,SAAN,CAAgBhsG,SAAhB,CAA0B6xB,QAA1B,CAAqC,SAAW7nB,CAAX,CAAe,CAEnD,UAAY,KAAKwL,EAAL,CAAQlK,KAAR,GAAgB4I,GAAhB,CAAqB,KAAK7D,EAA1B,CAAZ,CACAkL,MAAMtO,cAAN,CAAsBjD,CAAtB,EAA0B2C,GAA1B,CAA+B,KAAK0D,EAApC,EAEA,YAAA,CAEA,CAPD;CAWA9Q,MAAMysG,SAAN,CAAgBhsG,SAAhB,CAA0BiqG,UAA1B,CAAuC,SAAWh2E,CAAX,CAAe,CAErD,YAAYpC,QAAL,CAAeoC,CAAf,CAAP,CAEA,CAJD,CAMA10B,MAAMysG,SAAN,CAAgBhsG,SAAhB,CAA0BorG,UAA1B,CAAuC,SAAUphG,CAAV,CAAc,CAEpD,YAAc,KAAKwL,EAAL,CAAQlK,KAAR,GAAgB4I,GAAhB,CAAqB,KAAK7D,EAA1B,CAAd,CAEA,eAAeM,SAAR,EAAP,CAEA,CAND;;;iEAeApR,MAAMgvG,oBAAN,CAA6B,SAAW3lF,EAAX,CAAevY,EAAf,CAAmBmF,EAAnB,CAAwB,CAEpD,KAAKoT,EAAL,CAAUA,EAAV,CACA,KAAKvY,EAAL,CAAUA,EAAV,CACA,KAAKmF,EAAL,CAAUA,EAAV,CAEA,CAND,CAQAjW,MAAMgvG,oBAAN,CAA2BvuG,SAA3B,CAAuCE,OAAOy2B,MAAP,CAAep3B,MAAMyqG,KAAN,CAAYhqG,SAA3B,CAAvC,CACAT,MAAMgvG,oBAAN,CAA2BvuG,SAA3B,CAAqCoJ,WAArC,CAAmD7J,MAAMgvG,oBAAzD,CAGAhvG,MAAMgvG,oBAAN,CAA2BvuG,SAA3B,CAAqC6xB,QAArC,CAAgD,SAAW7nB,CAAX,CAAe,CAE9D,OAASzK,MAAMmjG,UAAN,CAAiB3yE,EAA1B,CAEA,iBAAiBpc,OAAV,CACNoc,GAAI/lB,CAAJ,CAAO,KAAK4e,EAAL,CAAQ9oB,CAAf,CAAkB,KAAKuQ,EAAL,CAAQvQ,CAA1B,CAA6B,KAAK0V,EAAL,CAAQ1V,CAArC,CADM,CAENiwB,GAAI/lB,CAAJ,CAAO,KAAK4e,EAAL,CAAQjb,CAAf,CAAkB,KAAK0C,EAAL,CAAQ1C,CAA1B,CAA6B,KAAK6H,EAAL,CAAQ7H,CAArC,CAFM,CAAP,CAKA,CATD,CAYApO,MAAMgvG,oBAAN,CAA2BvuG,SAA3B,CAAqCorG,UAArC,CAAkD,SAAUphG,CAAV,CAAc,CAE/D,2BAA6BzK,MAAMwiG,UAAN,CAAiBC,sBAA9C,CAEA,iBAAiBruF,OAAV,CACNquF,uBAAwBh4F,CAAxB,CAA2B,KAAK4e,EAAL,CAAQ9oB,CAAnC,CAAsC,KAAKuQ,EAAL,CAAQvQ,CAA9C,CAAiD,KAAK0V,EAAL,CAAQ1V,CAAzD,CADM,CAENkiG,uBAAwBh4F,CAAxB,CAA2B,KAAK4e,EAAL,CAAQjb,CAAnC,CAAsC,KAAK0C,EAAL,CAAQ1C,CAA9C,CAAiD,KAAK6H,EAAL,CAAQ7H,CAAzD,CAFM,EAGLgD,SAHK,EAAP,CAKA,CATD;;;iEAiBApR,MAAMqvG,gBAAN,CAAyB,SAAWhmF,EAAX,CAAevY,EAAf,CAAmBmF,EAAnB,CAAuB2b,EAAvB,CAA4B,CAEpD,KAAKvI,EAAL,CAAUA,EAAV,CACA,KAAKvY,EAAL,CAAUA,EAAV,CACA,KAAKmF,EAAL,CAAUA,EAAV,CACA,KAAK2b,EAAL,CAAUA,EAAV,CAEA,CAPD,CASA5xB,MAAMqvG,gBAAN,CAAuB5uG,SAAvB,CAAmCE,OAAOy2B,MAAP,CAAep3B,MAAMyqG,KAAN,CAAYhqG,SAA3B,CAAnC,CACAT,MAAMqvG,gBAAN,CAAuB5uG,SAAvB,CAAiCoJ,WAAjC,CAA+C7J,MAAMqvG,gBAArD,CAEArvG,MAAMqvG,gBAAN,CAAuB5uG,SAAvB,CAAiC6xB,QAAjC,CAA4C,SAAW7nB,CAAX,CAAe,CAE1D,OAASzK,MAAMmjG,UAAN,CAAiBkH,EAA1B,CAEA,iBAAiBj2F,OAAV,CACNi2F,GAAI5/F,CAAJ,CAAO,KAAK4e,EAAL,CAAQ9oB,CAAf,CAAkB,KAAKuQ,EAAL,CAAQvQ,CAA1B,CAA6B,KAAK0V,EAAL,CAAQ1V,CAArC,CAAwC,KAAKqxB,EAAL,CAAQrxB,CAAhD,CADM,CAEN8pG,GAAI5/F,CAAJ,CAAO,KAAK4e,EAAL,CAAQjb,CAAf,CAAkB,KAAK0C,EAAL,CAAQ1C,CAA1B,CAA6B,KAAK6H,EAAL,CAAQ7H,CAArC,CAAwC,KAAKwjB,EAAL,CAAQxjB,CAAhD,CAFM,CAAP,CAKA,CATD,CAWApO,MAAMqvG,gBAAN,CAAuB5uG,SAAvB,CAAiCorG,UAAjC,CAA8C,SAAUphG,CAAV,CAAc,CAE3D,uBAAyBzK,MAAMwiG,UAAN,CAAiBE,kBAA1C,CAEA,iBAAiBtuF,OAAV,CACNsuF,mBAAoBj4F,CAApB,CAAuB,KAAK4e,EAAL,CAAQ9oB,CAA/B,CAAkC,KAAKuQ,EAAL,CAAQvQ,CAA1C,CAA6C,KAAK0V,EAAL,CAAQ1V,CAArD,CAAwD,KAAKqxB,EAAL,CAAQrxB,CAAhE,CADM,CAENmiG,mBAAoBj4F,CAApB,CAAuB,KAAK4e,EAAL,CAAQjb,CAA/B,CAAkC,KAAK0C,EAAL,CAAQ1C,CAA1C,CAA6C,KAAK6H,EAAL,CAAQ7H,CAArD,CAAwD,KAAKwjB,EAAL,CAAQxjB,CAAhE,CAFM,EAGLgD,SAHK,EAAP,CAKA,CATD;;;iEAiBApR,MAAMwvG,WAAN,CAAoB,SAAW9yF,6BAAgC,CAE9D,KAAKA,MAAL,CAAgBA,QAAUvc,SAAZ,CAA0B,EAA1B,CAA+Buc,MAA7C,CAEA,CAJD,CAMA1c,MAAMwvG,WAAN,CAAkB/uG,SAAlB,CAA8BE,OAAOy2B,MAAP,CAAep3B,MAAMyqG,KAAN,CAAYhqG,SAA3B,CAA9B,CACAT,MAAMwvG,WAAN,CAAkB/uG,SAAlB,CAA4BoJ,WAA5B,CAA0C7J,MAAMwvG,WAAhD,CAEAxvG,MAAMwvG,WAAN,CAAkB/uG,SAAlB,CAA4B6xB,QAA5B,CAAuC,SAAW7nB,CAAX,CAAe,CAErD,WAAa,KAAKiS,MAAlB,CACA,UAAY,CAAEA,OAAOtb,MAAP,CAAgB,CAAlB,EAAwBqJ,CAApC,CAEA,aAAerK,KAAKiK,KAAL,CAAY2R,KAAZ,CAAf,CACA,WAAaA,MAAQ6V,QAArB,CAEA,WAAanV,OAAQmV,WAAa,CAAb,CAAiBA,QAAjB,CAA4BA,SAAW,CAA/C,CAAb,CACA,WAAanV,OAAQmV,QAAR,CAAb,CACA,WAAanV,OAAQmV,SAAWnV,OAAOtb,MAAP,CAAgB,CAA3B,CAA+Bsb,OAAOtb,MAAP,CAAgB,CAA/C,CAAmDywB,SAAW,CAAtE,CAAb,CACA,WAAanV,OAAQmV,SAAWnV,OAAOtb,MAAP,CAAgB,CAA3B,CAA+Bsb,OAAOtb,MAAP,CAAgB,CAA/C,CAAmDywB,SAAW,CAAtE,CAAb,CAEA,gBAAkB7xB,MAAMwiG,UAAN,CAAiBhwE,WAAnC,CAEA,iBAAiBpe,OAAV,CACNoe,YAAa+gF,OAAOhzG,CAApB,CAAuBizG,OAAOjzG,CAA9B,CAAiCkzG,OAAOlzG,CAAxC,CAA2CmzG,OAAOnzG,CAAlD,CAAqDuxB,MAArD,CADM,CAENU,YAAa+gF,OAAOnlG,CAApB,CAAuBolG,OAAOplG,CAA9B,CAAiCqlG,OAAOrlG,CAAxC,CAA2CslG,OAAOtlG,CAAlD,CAAqD0jB,MAArD,CAFM,CAAP,CAKA,CApBD;;;iEA4BA9xB,MAAMmwG,YAAN,CAAqB,SAAW9L,EAAX,CAAeZ,EAAf,CAAmBuM,OAAnB,CAA4BC,OAA5B,CAAqCP,WAArC,CAAkDC,SAAlD,CAA6DC,UAA7D,CAAyEM,SAAzE,CAAqF,CAEzG,KAAK7L,EAAL,CAAUA,EAAV,CACA,KAAKZ,EAAL,CAAUA,EAAV,CAEA,KAAKuM,OAAL,CAAeA,OAAf,CACA,KAAKC,OAAL,CAAeA,OAAf,CAEA,KAAKP,WAAL,CAAmBA,WAAnB,CACA,KAAKC,SAAL,CAAiBA,SAAjB,CAEA,KAAKC,UAAL,CAAkBA,UAAlB,CAEA,KAAKM,SAAL,CAAiBA,WAAa,CAA9B,CAEA,CAfD,CAiBAlwG,MAAMmwG,YAAN,CAAmB1vG,SAAnB,CAA+BE,OAAOy2B,MAAP,CAAep3B,MAAMyqG,KAAN,CAAYhqG,SAA3B,CAA/B,CACAT,MAAMmwG,YAAN,CAAmB1vG,SAAnB,CAA6BoJ,WAA7B,CAA2C7J,MAAMmwG,YAAjD,CAEAnwG,MAAMmwG,YAAN,CAAmB1vG,SAAnB,CAA6B6xB,QAA7B,CAAwC,SAAW7nB,CAAX,CAAe,CAEtD,eAAiB,KAAKklG,SAAL,CAAiB,KAAKD,WAAvC,CAEA,GAAKe,WAAa,CAAlB,CAAsBA,YAAcrwG,KAAKsV,EAAL,CAAU,CAAxB,CACtB,GAAK+6F,WAAarwG,KAAKsV,EAAL,CAAU,CAA5B,CAAgC+6F,YAAcrwG,KAAKsV,EAAL,CAAU,CAAxB,CAEhC,SAAA,CAEA,GAAK,KAAKk6F,UAAL,GAAoB,IAAzB,CAAgC,CAE/BhgG,MAAQ,KAAK+/F,SAAL,CAAiB,CAAE,EAAIllG,CAAN,GAAcrK,KAAKsV,EAAL,CAAU,CAAV,CAAc+6F,UAA5B,CAAzB,CAEA,CAJD,IAIO,CAEN7gG,MAAQ,KAAK8/F,WAAL,CAAmBjlG,EAAIgmG,UAA/B,CAEA,CAED,MAAQ,KAAKpM,EAAL,CAAU,KAAK2L,OAAL,CAAe5vG,KAAK6O,GAAL,CAAUW,KAAV,CAAjC,CACA,MAAQ,KAAK6zF,EAAL,CAAU,KAAKwM,OAAL,CAAe7vG,KAAK8O,GAAL,CAAUU,KAAV,CAAjC,CAEA,GAAK,KAAKsgG,SAAL,GAAmB,CAAxB,CAA4B,CAE3B,QAAU9vG,KAAK6O,GAAL,CAAU,KAAKihG,SAAf,CAAV,CACA,QAAU9vG,KAAK8O,GAAL,CAAU,KAAKghG,SAAf,CAAV,CAEA,OAAS3vG,CAAT,CAAY4mB,GAAK/Y,CAAjB;CAGA7N,EAAI,CAAE6mB,GAAK,KAAKi9E,EAAZ,EAAmBp1F,GAAnB,CAAyB,CAAEkY,GAAK,KAAKs8E,EAAZ,EAAmBv0F,GAA5C,CAAkD,KAAKm1F,EAA3D,CACAj2F,EAAI,CAAEgZ,GAAK,KAAKi9E,EAAZ,EAAmBn1F,GAAnB,CAAyB,CAAEiY,GAAK,KAAKs8E,EAAZ,EAAmBx0F,GAA5C,CAAkD,KAAKw0F,EAA3D,CAEA,CAED,iBAAiBrvF,OAAV,CAAmB7T,CAAnB,CAAsB6N,CAAtB,CAAP,CAEA,CArCD;;;iEA6CApO,MAAM2zG,QAAN,CAAiB,SAAWtP,EAAX,CAAeZ,EAAf,CAAmBgM,OAAnB,CAA4BC,WAA5B,CAAyCC,SAAzC,CAAoDC,UAApD,CAAiE,CAEjF5vG,MAAMmwG,YAAN,CAAmB5uG,IAAnB,CAAyB,IAAzB,CAA+B8iG,EAA/B,CAAmCZ,EAAnC,CAAuCgM,OAAvC,CAAgDA,OAAhD,CAAyDC,WAAzD,CAAsEC,SAAtE,CAAiFC,UAAjF,EAEA,CAJD,CAMA5vG,MAAM2zG,QAAN,CAAelzG,SAAf,CAA2BE,OAAOy2B,MAAP,CAAep3B,MAAMmwG,YAAN,CAAmB1vG,SAAlC,CAA3B,CACAT,MAAM2zG,QAAN,CAAelzG,SAAf,CAAyBoJ,WAAzB,CAAuC7J,MAAM2zG,QAA7C;;;iEAQA3zG,MAAM4zG,UAAN,CAAmB5zG,MAAMyqG,KAAN,CAAYrzE,MAAZ,CAElB,SAAWtmB,EAAX,CAAemF,EAAf,CAAoB,CAEnB,KAAKnF,EAAL,CAAUA,EAAV,CACA,KAAKmF,EAAL,CAAUA,EAAV,CAEA,CAPiB,CASlB,SAAWxL,CAAX,CAAe,CAEd,WAAa,UAAUsG,OAAV,EAAb,CAEA6H,OAAOhE,UAAP,CAAmB,KAAKqB,EAAxB,CAA4B,KAAKnF,EAAjC;CACA8H,OAAOlL,cAAP,CAAuBjD,CAAvB,EACAmO,OAAOxL,GAAP,CAAY,KAAK0D,EAAjB,EAEA,aAAA,CAEA,CAnBiB,CAAnB;;;iEA6BA9Q,MAAM6zG,qBAAN,CAA8B7zG,MAAMyqG,KAAN,CAAYrzE,MAAZ,CAE7B,SAAW/N,EAAX,CAAevY,EAAf,CAAmBmF,EAAnB,CAAwB,CAEvB,KAAKoT,EAAL,CAAUA,EAAV,CACA,KAAKvY,EAAL,CAAUA,EAAV,CACA,KAAKmF,EAAL,CAAUA,EAAV,CAEA,CAR4B,CAU7B,SAAWxL,CAAX,CAAe,CAEd,OAASzK,MAAMmjG,UAAN,CAAiB3yE,EAA1B,CAEA,iBAAiBzf,OAAV,CACNyf,GAAI/lB,CAAJ,CAAO,KAAK4e,EAAL,CAAQ9oB,CAAf,CAAkB,KAAKuQ,EAAL,CAAQvQ,CAA1B,CAA6B,KAAK0V,EAAL,CAAQ1V,CAArC,CADM,CAENiwB,GAAI/lB,CAAJ,CAAO,KAAK4e,EAAL,CAAQjb,CAAf,CAAkB,KAAK0C,EAAL,CAAQ1C,CAA1B,CAA6B,KAAK6H,EAAL,CAAQ7H,CAArC,CAFM,CAGNoiB,GAAI/lB,CAAJ,CAAO,KAAK4e,EAAL,CAAQhb,CAAf,CAAkB,KAAKyC,EAAL,CAAQzC,CAA1B,CAA6B,KAAK4H,EAAL,CAAQ5H,CAArC,CAHM,CAAP,CAMA,CApB4B,CAA9B;;;iEA8BArO,MAAM8zG,iBAAN,CAA0B9zG,MAAMyqG,KAAN,CAAYrzE,MAAZ,CAEzB,SAAW/N,EAAX,CAAevY,EAAf,CAAmBmF,EAAnB,CAAuB2b,EAAvB,CAA4B,CAE3B,KAAKvI,EAAL,CAAUA,EAAV,CACA,KAAKvY,EAAL,CAAUA,EAAV,CACA,KAAKmF,EAAL,CAAUA,EAAV,CACA,KAAK2b,EAAL,CAAUA,EAAV,CAEA,CATwB,CAWzB,SAAWnnB,CAAX,CAAe,CAEd,OAASzK,MAAMmjG,UAAN,CAAiBkH,EAA1B,CAEA,iBAAiBt5F,OAAV,CACNs5F,GAAI5/F,CAAJ,CAAO,KAAK4e,EAAL,CAAQ9oB,CAAf,CAAkB,KAAKuQ,EAAL,CAAQvQ,CAA1B,CAA6B,KAAK0V,EAAL,CAAQ1V,CAArC,CAAwC,KAAKqxB,EAAL,CAAQrxB,CAAhD,CADM,CAEN8pG,GAAI5/F,CAAJ,CAAO,KAAK4e,EAAL,CAAQjb,CAAf,CAAkB,KAAK0C,EAAL,CAAQ1C,CAA1B,CAA6B,KAAK6H,EAAL,CAAQ7H,CAArC,CAAwC,KAAKwjB,EAAL,CAAQxjB,CAAhD,CAFM,CAGNi8F,GAAI5/F,CAAJ,CAAO,KAAK4e,EAAL,CAAQhb,CAAf,CAAkB,KAAKyC,EAAL,CAAQzC,CAA1B,CAA6B,KAAK4H,EAAL,CAAQ5H,CAArC,CAAwC,KAAKujB,EAAL,CAAQvjB,CAAhD,CAHM,CAAP,CAMA,CArBwB,CAA1B;;;iEAgCArO,MAAM+zG,YAAN,CAAqB/zG,MAAMyqG,KAAN,CAAYrzE,MAAZ,CAEpB,SAAW1a,6BAAgC,CAE1CvR,QAAQC,IAAR,CAAc,0EAAd,EACA,KAAKsR,MAAL,CAAgBA,QAAUvc,SAAZ,CAA0B,EAA1B,CAA+Buc,MAA7C,CAEA,CAPmB,CASpB,SAAWjS,CAAX,CAAe,CAEd,WAAa,KAAKiS,MAAlB,CACA,UAAY,CAAEA,OAAOtb,MAAP,CAAgB,CAAlB,EAAwBqJ,CAApC,CAEA,aAAerK,KAAKiK,KAAL,CAAY2R,KAAZ,CAAf,CACA,WAAaA,MAAQ6V,QAArB,CAEA,WAAanV,OAAQmV,UAAY,CAAZ,CAAgBA,QAAhB,CAA2BA,SAAW,CAA9C,CAAb,CACA,WAAanV,OAAQmV,QAAR,CAAb,CACA,WAAanV,OAAQmV,SAAWnV,OAAOtb,MAAP,CAAgB,CAA3B,CAA+Bsb,OAAOtb,MAAP,CAAgB,CAA/C,CAAmDywB,SAAW,CAAtE,CAAb,CACA,WAAanV,OAAQmV,SAAWnV,OAAOtb,MAAP,CAAgB,CAA3B,CAA+Bsb,OAAOtb,MAAP,CAAgB,CAA/C,CAAmDywB,SAAW,CAAtE,CAAb,CAEA,gBAAkB7xB,MAAMwiG,UAAN,CAAiBhwE,WAAnC,CAEA,iBAAiBzhB,OAAV,CACNyhB,YAAa+gF,OAAOhzG,CAApB,CAAuBizG,OAAOjzG,CAA9B,CAAiCkzG,OAAOlzG,CAAxC,CAA2CmzG,OAAOnzG,CAAlD,CAAqDuxB,MAArD,CADM,CAENU,YAAa+gF,OAAOnlG,CAApB,CAAuBolG,OAAOplG,CAA9B,CAAiCqlG,OAAOrlG,CAAxC,CAA2CslG,OAAOtlG,CAAlD,CAAqD0jB,MAArD,CAFM,CAGNU,YAAa+gF,OAAOllG,CAApB,CAAuBmlG,OAAOnlG,CAA9B,CAAiColG,OAAOplG,CAAxC,CAA2CqlG,OAAOrlG,CAAlD,CAAqDyjB,MAArD,CAHM,CAAP,CAMA,CA9BmB,CAArB;;;;;;;;;;IA+CA9xB,MAAMg0G,gBAAN,CAA2B,UAAW,CAErC,QACO,UAAUjjG,OAAV,EADP,CAECwyF,GAAK,aAAA,EAFN,CAGCC,GAAK,aAAA,EAHN,CAICyQ,GAAK,aAAA,EAJN;;;;;;;;IAgBA,kBAAA,EAAqB;;;;;;;KAYrBC,UAAUzzG,SAAV,CAAoBisE,IAApB,CAA2B,SAAU54D,EAAV,CAAcJ,EAAd,CAAkB8W,EAAlB,CAAsBC,EAAtB,CAA2B,CAErD,KAAK0pF,EAAL,CAAUrgG,EAAV,CACA,KAAKvE,EAAL,CAAUib,EAAV,CACA,KAAKnb,EAAL,CAAU,CAAE,CAAF,CAAMyE,EAAN,CAAW,EAAIJ,EAAf,CAAoB,EAAI8W,EAAxB,CAA6BC,EAAvC,CACA,KAAKnb,EAAL,CAAU,EAAIwE,EAAJ,CAAS,EAAIJ,EAAb,CAAkB8W,EAAlB,CAAuBC,EAAjC,CAEA,CAPD,CASAypF,UAAUzzG,SAAV,CAAoB2zG,wBAApB,CAA+C,SAAUtgG,EAAV,CAAcJ,EAAd,CAAkBmQ,EAAlB,CAAsBwwF,EAAtB,CAA0BC,GAA1B,CAA+BC,GAA/B,CAAoCC,GAApC,CAA0C;CAGxF,OAAS,CAAE9gG,GAAKI,EAAP,EAAcwgG,GAAd,CAAoB,CAAEzwF,GAAK/P,EAAP,GAAgBwgG,IAAMC,GAAtB,CAApB,CAAkD,CAAE1wF,GAAKnQ,EAAP,EAAc6gG,GAAzE,CACA,OAAS,CAAE1wF,GAAKnQ,EAAP,EAAc6gG,GAAd,CAAoB,CAAEF,GAAK3gG,EAAP,GAAgB6gG,IAAMC,GAAtB,CAApB,CAAkD,CAAEH,GAAKxwF,EAAP,EAAc2wF,GAAzE;CAGA/pF,IAAM8pF,GAAN,CACAzgF,IAAMygF,GAAN;CAGA,KAAK7nC,IAAL,CAAWh5D,EAAX,CAAemQ,EAAf,CAAmB4G,EAAnB,CAAuBqJ,EAAvB,EAEA,CAbD;CAgBAogF,UAAUzzG,SAAV,CAAoBg0G,cAApB,CAAqC,SAAU3gG,EAAV,CAAcJ,EAAd,CAAkBmQ,EAAlB,CAAsBwwF,EAAtB,CAA0BK,OAA1B,CAAoC,CAExE,KAAKhoC,IAAL,CAAWh5D,EAAX,CAAemQ,EAAf,CAAmB6wF,SAAY7wF,GAAK/P,EAAjB,CAAnB,CAA0C4gG,SAAYL,GAAK3gG,EAAjB,CAA1C,EAEA,CAJD,CAMAwgG,UAAUzzG,SAAV,CAAoBk0G,IAApB,CAA2B,SAAUlqG,CAAV,CAAc,CAExC,OAASA,EAAIA,CAAb,CACA,OAASqpB,GAAKrpB,CAAd,CACA,YAAY0pG,EAAL,CAAU,KAAK5kG,EAAL,CAAU9E,CAApB,CAAwB,KAAK4E,EAAL,CAAUykB,EAAlC,CAAuC,KAAKxkB,EAAL,CAAUykB,EAAxD,CAEA,CAND;CASA,aAAa02E,KAAN,CAAYrzE,MAAZ,CAEN,SAAW7sB,wBAA2B,CAErC,KAAKmS,MAAL,CAAcnS,GAAK,EAAnB,CACA,KAAKqqG,MAAL,CAAc,KAAd,CAEA,CAPK,CASN,SAAWnqG,CAAX,CAAe,CAEd,WAAa,KAAKiS,MAAlB,CACCV,KADD,CACQ6V,QADR,CACkBC,MADlB,CAC0BlnB,CAD1B,CAGAA,EAAI8R,OAAOtb,MAAX,CAEA,GAAKwJ,EAAI,CAAT,CAAaO,QAAQqmB,GAAR,CAAa,iCAAb,EAEbxV,MAAQ,CAAEpR,GAAM,KAAKgqG,MAAL,CAAc,CAAd,CAAkB,CAAxB,CAAF,EAAkCnqG,CAA1C,CACAonB,SAAWzxB,KAAKiK,KAAL,CAAY2R,KAAZ,CAAX,CACA8V,OAAS9V,MAAQ6V,QAAjB,CAEA,GAAK,KAAK+iF,MAAV,CAAmB,CAElB/iF,UAAYA,SAAW,CAAX,CAAe,CAAf,CAAmB,CAAEzxB,KAAKiK,KAAL,CAAYjK,KAAK8Q,GAAL,CAAU2gB,QAAV,EAAuBnV,OAAOtb,MAA1C,EAAqD,CAAvD,EAA6Dsb,OAAOtb,MAAnG,CAEA,CAJD,QAIY0wB,SAAW,CAAX,EAAgBD,WAAajnB,EAAI,CAAtC,CAA0C,CAEhDinB,SAAWjnB,EAAI,CAAf,CACAknB,OAAS,CAAT,CAEA,CAED,MAAA,CAAQtF,EAAR,CAAYC,EAAZ,CAAgBC,EAAhB;CAEA,GAAK,KAAKkoF,MAAL,EAAe/iF,SAAW,CAA/B,CAAmC,CAElCtF,GAAK7P,OAAQ,CAAEmV,SAAW,CAAb,EAAmBjnB,CAA3B,CAAL,CAEA,CAJD,IAIO;CAGN4W,IAAI5M,UAAJ,CAAgB8H,OAAQ,CAAR,CAAhB,CAA6BA,OAAQ,CAAR,CAA7B,EAA2CtP,GAA3C,CAAgDsP,OAAQ,CAAR,CAAhD,EACA6P,GAAK/K,GAAL,CAEA,CAEDgL,GAAK9P,OAAQmV,SAAWjnB,CAAnB,CAAL,CACA6hB,GAAK/P,OAAQ,CAAEmV,SAAW,CAAb,EAAmBjnB,CAA3B,CAAL,CAEA,GAAK,KAAKgqG,MAAL,EAAe/iF,SAAW,CAAX,CAAejnB,CAAnC,CAAuC,CAEtC8hB,GAAKhQ,OAAQ,CAAEmV,SAAW,CAAb,EAAmBjnB,CAA3B,CAAL,CAEA,CAJD,IAIO;CAGN4W,IAAI5M,UAAJ,CAAgB8H,OAAQ9R,EAAI,CAAZ,CAAhB,CAAiC8R,OAAQ9R,EAAI,CAAZ,CAAjC,EAAmDwC,GAAnD,CAAwDsP,OAAQ9R,EAAI,CAAZ,CAAxD,EACA8hB,GAAKlL,GAAL,CAEA,CAED,GAAK,KAAKmY,IAAL,GAAcx5B,SAAd,EAA2B,KAAKw5B,IAAL,GAAc,aAAzC,EAA0D,KAAKA,IAAL,GAAc,SAA7E,CAAyF;CAGxF,QAAU,KAAKA,IAAL,GAAc,SAAd,CAA0B,GAA1B,CAAgC,IAA1C,CACA,QAAUv5B,KAAKC,GAAL,CAAUksB,GAAG3W,iBAAH,CAAsB4W,EAAtB,CAAV,CAAsCnsB,GAAtC,CAAV,CACA,QAAUD,KAAKC,GAAL,CAAUmsB,GAAG5W,iBAAH,CAAsB6W,EAAtB,CAAV,CAAsCpsB,GAAtC,CAAV,CACA,QAAUD,KAAKC,GAAL,CAAUosB,GAAG7W,iBAAH,CAAsB8W,EAAtB,CAAV,CAAsCrsB,GAAtC,CAAV;CAGA,GAAKk0G,IAAM,IAAX,CAAkBA,IAAM,GAAN,CAClB,GAAKD,IAAM,IAAX,CAAkBA,IAAMC,GAAN,CAClB,GAAKC,IAAM,IAAX,CAAkBA,IAAMD,GAAN,CAElBhR,GAAG6Q,wBAAH,CAA6B7nF,GAAGhsB,CAAhC,CAAmCisB,GAAGjsB,CAAtC,CAAyCksB,GAAGlsB,CAA5C,CAA+CmsB,GAAGnsB,CAAlD,CAAqD+zG,GAArD,CAA0DC,GAA1D,CAA+DC,GAA/D,EACAhR,GAAG4Q,wBAAH,CAA6B7nF,GAAGne,CAAhC,CAAmCoe,GAAGpe,CAAtC,CAAyCqe,GAAGre,CAA5C,CAA+Cse,GAAGte,CAAlD,CAAqDkmG,GAArD,CAA0DC,GAA1D,CAA+DC,GAA/D,EACAP,GAAGG,wBAAH,CAA6B7nF,GAAGle,CAAhC,CAAmCme,GAAGne,CAAtC,CAAyCoe,GAAGpe,CAA5C,CAA+Cqe,GAAGre,CAAlD,CAAqDimG,GAArD,CAA0DC,GAA1D,CAA+DC,GAA/D,EAEA,CAjBD,QAiBY,KAAK76E,IAAL,GAAc,YAAnB,CAAkC,CAExC,YAAc,KAAK+6E,OAAL,GAAiBv0G,SAAjB,CAA6B,KAAKu0G,OAAlC,CAA4C,GAA1D,CACAnR,GAAGkR,cAAH,CAAmBloF,GAAGhsB,CAAtB,CAAyBisB,GAAGjsB,CAA5B,CAA+BksB,GAAGlsB,CAAlC,CAAqCmsB,GAAGnsB,CAAxC,CAA2Cm0G,OAA3C,EACAlR,GAAGiR,cAAH,CAAmBloF,GAAGne,CAAtB,CAAyBoe,GAAGpe,CAA5B,CAA+Bqe,GAAGre,CAAlC,CAAqCse,GAAGte,CAAxC,CAA2CsmG,OAA3C,EACAT,GAAGQ,cAAH,CAAmBloF,GAAGle,CAAtB,CAAyBme,GAAGne,CAA5B,CAA+Boe,GAAGpe,CAAlC,CAAqCqe,GAAGre,CAAxC,CAA2CqmG,OAA3C,EAEA,CAED,MAAQ,UAAU3jG,OAAV,CACPwyF,GAAGoR,IAAH,CAAS7iF,MAAT,CADO,CAEP0xE,GAAGmR,IAAH,CAAS7iF,MAAT,CAFO,CAGPmiF,GAAGU,IAAH,CAAS7iF,MAAT,CAHO,CAAR,CAMA,QAAA,CAEA,CAhGK,CAAP,CAoGA,CA1KwB,EAAzB;;;iEAmLA9xB,MAAM60G,kBAAN,CAA2B,SAAWn4F,MAAX,CAAoB,CAE9CvR,QAAQC,IAAR,CAAc,kFAAd,EAEApL,MAAMg0G,gBAAN,CAAuBzyG,IAAvB,CAA6B,IAA7B,CAAmCmb,MAAnC,EACA,KAAKid,IAAL,CAAY,YAAZ,CACA,KAAKi7E,MAAL,CAAc,IAAd,CAEA,CARD,CAUA50G,MAAM60G,kBAAN,CAAyBp0G,SAAzB,CAAqCE,OAAOy2B,MAAP,CAAep3B,MAAMg0G,gBAAN,CAAuBvzG,SAAtC,CAArC;;;;IASAT,MAAM80G,WAAN,CAAoB,SAAWpqD,KAAX,CAAkBC,MAAlB,CAA0BuN,KAA1B,CAAiCF,aAAjC,CAAgDC,cAAhD,CAAgEE,aAAhE,CAAgF,CAEnGn4D,MAAM4e,QAAN,CAAerd,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,aAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjBoiB,MAAOA,KADU,CAEjBC,OAAQA,MAFS,CAGjBuN,MAAOA,KAHU,CAIjBF,cAAeA,aAJE,CAKjBC,eAAgBA,cALC,CAMjBE,cAAeA,aANE,CAAlB,CASA,KAAK1zB,kBAAL,CAAyB,UAAUswE,iBAAV,CAA6BrqD,KAA7B,CAAoCC,MAApC,CAA4CuN,KAA5C,CAAmDF,aAAnD,CAAkEC,cAAlE,CAAkFE,aAAlF,CAAzB,EACA,KAAK3wB,aAAL,GAEA,CAlBD,CAoBAxnC,MAAM80G,WAAN,CAAkBr0G,SAAlB,CAA8BE,OAAOy2B,MAAP,CAAep3B,MAAM4e,QAAN,CAAene,SAA9B,CAA9B,CACAT,MAAM80G,WAAN,CAAkBr0G,SAAlB,CAA4BoJ,WAA5B,CAA0C7J,MAAM80G,WAAhD,CAEA90G,MAAMg1G,YAAN,CAAqBh1G,MAAM80G,WAA3B;;;IAQA90G,MAAM+0G,iBAAN,CAA0B,SAAWrqD,KAAX,CAAkBC,MAAlB,CAA0BuN,KAA1B,CAAiCF,aAAjC,CAAgDC,cAAhD,CAAgEE,aAAhE,CAAgF,CAEzGn4D,MAAM+e,cAAN,CAAqBxd,IAArB,CAA2B,IAA3B,EAEA,KAAKo4B,IAAL,CAAY,mBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjBoiB,MAAOA,KADU,CAEjBC,OAAQA,MAFS,CAGjBuN,MAAOA,KAHU,CAIjBF,cAAeA,aAJE,CAKjBC,eAAgBA,cALC,CAMjBE,cAAeA,aANE,CAAlB,CASA,UAAY,IAAZ;CAGAH,cAAgB53D,KAAKiK,KAAL,CAAY2tD,aAAZ,GAA+B,CAA/C,CACAC,eAAiB73D,KAAKiK,KAAL,CAAY4tD,cAAZ,GAAgC,CAAjD,CACAE,cAAgB/3D,KAAKiK,KAAL,CAAY8tD,aAAZ,GAA+B,CAA/C;CAGA,gBAAkB88C,qBAAsBj9C,aAAtB,CAAqCC,cAArC,CAAqDE,aAArD,CAAlB,CACA,eAAiB+8C,oBAAqBl9C,aAArB,CAAoCC,cAApC,CAAoDE,aAApD,CAAjB;CAGA,YAAc,IAAMg9C,WAAa,KAAb,CAAqB3pE,WAArB,CAAmCC,WAAzC,EAAwD0pE,UAAxD,CAAd,CACA,aAAe,gBAAA,CAAkBC,YAAc,CAAhC,CAAf,CACA,YAAc,gBAAA,CAAkBA,YAAc,CAAhC,CAAd,CACA,QAAU,gBAAA,CAAkBA,YAAc,CAAhC,CAAV;CAGA,uBAAyB,CAAzB,CACA,mBAAqB,CAArB,CACA,sBAAwB,CAAxB,CACA,qBAAuB,CAAvB;CAGA,eAAiB,CAAjB;CAGAC,WAAY,GAAZ,CAAiB,GAAjB,CAAsB,GAAtB,CAA2B,CAAE,CAA7B,CAAgC,CAAE,CAAlC,CAAqCn9C,KAArC,CAA4CvN,MAA5C,CAAsDD,KAAtD,CAA8DyN,aAA9D,CAA6EF,cAA7E,CAA6F,CAA7F;CACAo9C,WAAY,GAAZ,CAAiB,GAAjB,CAAsB,GAAtB,CAA6B,CAA7B,CAAgC,CAAE,CAAlC,CAAqCn9C,KAArC,CAA4CvN,MAA5C,CAAoD,CAAED,KAAtD,CAA8DyN,aAA9D,CAA6EF,cAA7E,CAA6F,CAA7F;CACAo9C,WAAY,GAAZ,CAAiB,GAAjB,CAAsB,GAAtB,CAA6B,CAA7B,CAAkC,CAAlC,CAAqC3qD,KAArC,CAA4CwN,KAA5C,CAAsDvN,MAAtD,CAA8DqN,aAA9D,CAA6EG,aAA7E,CAA6F,CAA7F;CACAk9C,WAAY,GAAZ,CAAiB,GAAjB,CAAsB,GAAtB,CAA6B,CAA7B,CAAgC,CAAE,CAAlC,CAAqC3qD,KAArC,CAA4CwN,KAA5C,CAAoD,CAAEvN,MAAtD,CAA8DqN,aAA9D,CAA6EG,aAA7E,CAA6F,CAA7F;CACAk9C,WAAY,GAAZ,CAAiB,GAAjB,CAAsB,GAAtB,CAA6B,CAA7B,CAAgC,CAAE,CAAlC,CAAqC3qD,KAArC,CAA4CC,MAA5C,CAAsDuN,KAAtD,CAA8DF,aAA9D,CAA6EC,cAA7E,CAA6F,CAA7F;CACAo9C,WAAY,GAAZ,CAAiB,GAAjB,CAAsB,GAAtB,CAA2B,CAAE,CAA7B,CAAgC,CAAE,CAAlC,CAAqC3qD,KAArC,CAA4CC,MAA5C,CAAoD,CAAEuN,KAAtD,CAA8DF,aAA9D,CAA6EC,cAA7E,CAA6F,CAA7F;;CAGA,KAAKttB,QAAL,CAAe,UAAU5J,eAAV,CAA2Ba,OAA3B,CAAoC,CAApC,CAAf,EACA,KAAKgJ,YAAL,CAAmB,UAAnB,CAA+B,UAAU7J,eAAV,CAA2BliB,QAA3B,CAAqC,CAArC,CAA/B,EACA,KAAK+rB,YAAL,CAAmB,QAAnB,CAA6B,UAAU7J,eAAV,CAA2B8D,OAA3B,CAAoC,CAApC,CAA7B,EACA,KAAK+F,YAAL,CAAmB,IAAnB,CAAyB,UAAU7J,eAAV,CAA2BgE,GAA3B,CAAgC,CAAhC,CAAzB;CAIA,6BAAA,CAAgCz2B,CAAhC,CAAmC5D,CAAnC,CAAsCuM,CAAtC,CAA0C,CAEzC,aAAe,CAAf;CAGA4H,UAAY,CAACvQ,EAAI,CAAL,GAAW5D,EAAI,CAAf,EAAoB,CAAhC;CACAmU,UAAY,CAACvQ,EAAI,CAAL,GAAW2I,EAAI,CAAf,EAAoB,CAAhC;CACA4H,UAAY,CAAC5H,EAAI,CAAL,GAAWvM,EAAI,CAAf,EAAoB,CAAhC;CAEA,eAAA,CAEA,CAED,4BAAA,CAA+B4D,CAA/B,CAAkC5D,CAAlC,CAAqCuM,CAArC,CAAyC,CAExC,UAAY,CAAZ;CAGA/V,OAASoN,EAAI5D,CAAJ,CAAQ,CAAjB;CACAxJ,OAASoN,EAAI2I,CAAJ,CAAQ,CAAjB;CACA/V,OAAS+V,EAAIvM,CAAJ,CAAQ,CAAjB;CAEA,aAAe,CAAf;CAEA,CAED,mBAAA,CAAsBgqB,CAAtB,CAAyBnjB,CAAzB,CAA4BjD,CAA5B,CAA+BgnG,IAA/B,CAAqCC,IAArC,CAA2C7qD,KAA3C,CAAkDC,MAAlD,CAA0DuN,KAA1D,CAAiEs9C,KAAjE,CAAwEC,KAAxE,CAA+E70E,aAA/E,CAA+F,CAE9F,iBAAmB8pB,MAAQ8qD,KAA3B,CACA,kBAAoB7qD,OAAS8qD,KAA7B,CAEA,cAAgB/qD,MAAQ,CAAxB,CACA,eAAiBC,OAAS,CAA1B,CACA,cAAgBuN,MAAQ,CAAxB,CAEA,WAAas9C,MAAQ,CAArB,CACA,WAAaC,MAAQ,CAArB,CAEA,kBAAoB,CAApB,CACA,eAAiB,CAAjB,CAEA,WAAa,UAAU1kG,OAAV,EAAb;CAIA,IAAM,OAAS,CAAf,CAAkByG,GAAKk+F,MAAvB,CAA+Bl+F,IAA/B,CAAuC,CAEtC,MAAQA,GAAKm+F,aAAL,CAAqBC,UAA7B,CAEA,IAAM,OAAS,CAAf,CAAkBt+F,GAAKu+F,MAAvB,CAA+Bv+F,IAA/B,CAAuC,CAEtC,MAAQA,GAAKw+F,YAAL,CAAoBC,SAA5B;CAGAn9F,OAAQ8b,CAAR,EAAcn0B,EAAI+0G,IAAlB,CACA18F,OAAQrH,CAAR,EAAcnD,EAAImnG,IAAlB,CACA38F,OAAQtK,CAAR,EAAc0nG,SAAd;CAGAn3F,SAAUo3F,kBAAV,EAAiCr9F,OAAOrY,CAAxC,CACAse,SAAUo3F,mBAAqB,CAA/B,EAAqCr9F,OAAOxK,CAA5C,CACAyQ,SAAUo3F,mBAAqB,CAA/B,EAAqCr9F,OAAOvK,CAA5C;CAGAuK,OAAQ8b,CAAR,EAAc,CAAd,CACA9b,OAAQrH,CAAR,EAAc,CAAd,CACAqH,OAAQtK,CAAR,EAAc4pD,MAAQ,CAAR,CAAY,CAAZ,CAAgB,CAAE,CAAhC;CAGArzB,QAASoxE,kBAAT,EAAgCr9F,OAAOrY,CAAvC,CACAskC,QAASoxE,mBAAqB,CAA9B,EAAoCr9F,OAAOxK,CAA3C,CACAy2B,QAASoxE,mBAAqB,CAA9B,EAAoCr9F,OAAOvK,CAA3C;CAGA02B,IAAKmxE,cAAL,EAAwB5+F,GAAKk+F,KAA7B,CACAzwE,IAAKmxE,eAAiB,CAAtB,EAA4B,EAAM1+F,GAAKi+F,KAAvC;CAGAQ,oBAAsB,CAAtB,CACAC,gBAAkB,CAAlB,CACAC,eAAiB,CAAjB,CAEA,CAED;;;CAMD,IAAM3+F,GAAK,CAAX,CAAcA,GAAKi+F,KAAnB,CAA0Bj+F,IAA1B,CAAkC,CAEjC,IAAMF,GAAK,CAAX,CAAcA,GAAKk+F,KAAnB,CAA0Bl+F,IAA1B,CAAkC;CAGjC,MAAQ8+F,iBAAmB9+F,EAAnB,CAAwBu+F,OAASr+F,EAAzC,CACA,MAAQ4+F,iBAAmB9+F,EAAnB,CAAwBu+F,QAAWr+F,GAAK,CAAhB,CAAhC,CACA,MAAQ4+F,kBAAqB9+F,GAAK,CAA1B,EAAgCu+F,QAAWr+F,GAAK,CAAhB,CAAxC,CACA,MAAQ4+F,kBAAqB9+F,GAAK,CAA1B,EAAgCu+F,OAASr+F,EAAjD;CAGAoqB,QAASy0E,iBAAT,EAA+B1kG,CAA/B,CACAiwB,QAASy0E,kBAAoB,CAA7B,EAAmC3sG,CAAnC,CACAk4B,QAASy0E,kBAAoB,CAA7B,EAAmCp/F,CAAnC;CAGA2qB,QAASy0E,kBAAoB,CAA7B,EAAmC3sG,CAAnC,CACAk4B,QAASy0E,kBAAoB,CAA7B,EAAmCvoG,CAAnC,CACA8zB,QAASy0E,kBAAoB,CAA7B,EAAmCp/F,CAAnC;CAGAo/F,mBAAqB,CAArB,CACAjjC,YAAc,CAAd,CAEA,CAED;CAGDt0D,MAAMisB,QAAN,CAAgBmoC,UAAhB,CAA4BE,UAA5B,CAAwCxyC,aAAxC;CAGAsyC,YAAcE,UAAd;CAGAgjC,kBAAoBD,aAApB,CAEA,CAED,CA1LD,CA4LAn2G,MAAM+0G,iBAAN,CAAwBt0G,SAAxB,CAAoCE,OAAOy2B,MAAP,CAAep3B,MAAM+e,cAAN,CAAqBte,SAApC,CAApC,CACAT,MAAM+0G,iBAAN,CAAwBt0G,SAAxB,CAAkCoJ,WAAlC,CAAgD7J,MAAM+0G,iBAAtD;;;IAQA/0G,MAAMs2G,cAAN,CAAuB,SAAW/8F,MAAX,CAAmB6+C,QAAnB,CAA6BC,UAA7B,CAAyCC,WAAzC,CAAuD,CAE7Et4D,MAAM4e,QAAN,CAAerd,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,gBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB/uB,OAAQA,MADS,CAEjB6+C,SAAUA,QAFO,CAGjBC,WAAYA,UAHK,CAIjBC,YAAaA,WAJI,CAAlB,CAOA,KAAK7zB,kBAAL,CAAyB,UAAU8xE,oBAAV,CAAgCh9F,MAAhC,CAAwC6+C,QAAxC,CAAkDC,UAAlD,CAA8DC,WAA9D,CAAzB,EAEA,CAfD,CAiBAt4D,MAAMs2G,cAAN,CAAqB71G,SAArB,CAAiCE,OAAOy2B,MAAP,CAAep3B,MAAM4e,QAAN,CAAene,SAA9B,CAAjC,CACAT,MAAMs2G,cAAN,CAAqB71G,SAArB,CAA+BoJ,WAA/B,CAA6C7J,MAAMs2G,cAAnD;;;IAQAt2G,MAAMu2G,oBAAN,CAA6B,SAAWh9F,MAAX,CAAmB6+C,QAAnB,CAA6BC,UAA7B,CAAyCC,WAAzC,CAAuD,CAEnFt4D,MAAM+e,cAAN,CAAqBxd,IAArB,CAA2B,IAA3B,EAEA,KAAKo4B,IAAL,CAAY,sBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB/uB,OAAQA,MADS,CAEjB6+C,SAAUA,QAFO,CAGjBC,WAAYA,UAHK,CAIjBC,YAAaA,WAJI,CAAlB,CAOA/+C,OAASA,QAAU,EAAnB,CACA6+C,SAAWA,WAAaj4D,SAAb,CAAyBC,KAAKwM,GAAL,CAAU,CAAV,CAAawrD,QAAb,CAAzB,CAAmD,CAA9D,CAEAC,WAAaA,aAAel4D,SAAf,CAA2Bk4D,UAA3B,CAAwC,CAArD,CACAC,YAAcA,cAAgBn4D,SAAhB,CAA4Bm4D,WAA5B,CAA0Cl4D,KAAKsV,EAAL,CAAU,CAAlE,CAEA,aAAe0iD,SAAW,CAA1B,CAEA,cAAgB,gBAAA,CAAkBv5C,SAAW,CAA7B,CAAhB,CACA,YAAc,gBAAA,CAAkBA,SAAW,CAA7B,CAAd,CACA,QAAU,gBAAA,CAAkBA,SAAW,CAA7B,CAAV;CAGAgmB,QAAS,CAAT,EAAe,GAAf,CACAE,IAAK,CAAL,EAAW,GAAX,CACAA,IAAK,CAAL,EAAW,GAAX,CAEA,IAAM,MAAQ,CAAR,CAAWloB,EAAI,CAAf,CAAkB25F,GAAK,CAA7B,CAAiC7rG,GAAKytD,QAAtC,CAAgDztD,IAAMkS,GAAK,CAAX,CAAc25F,IAAM,CAApE,CAAwE,CAEvE,YAAcn+C,WAAa1tD,EAAIytD,QAAJ,CAAeE,WAA1C,CAEAr5C,UAAWpC,CAAX,EAAiBtD,OAASnZ,KAAK6O,GAAL,CAAUwnG,OAAV,CAA1B,CACAx3F,UAAWpC,EAAI,CAAf,EAAqBtD,OAASnZ,KAAK8O,GAAL,CAAUunG,OAAV,CAA9B,CAEA5xE,QAAShoB,EAAI,CAAb,EAAmB,CAAnB;CAEAkoB,IAAKyxE,EAAL,EAAY,CAAEv3F,UAAWpC,CAAX,EAAiBtD,MAAjB,CAA0B,CAA5B,EAAkC,CAA9C,CACAwrB,IAAKyxE,GAAK,CAAV,EAAgB,CAAEv3F,UAAWpC,EAAI,CAAf,EAAqBtD,MAArB,CAA8B,CAAhC,EAAsC,CAAtD,CAEA,CAED,YAAc,EAAd,CAEA,IAAM,MAAQ,CAAd,CAAiBsD,GAAKu7C,QAAtB,CAAgCv7C,GAAhC,CAAuC,CAEtC+kB,QAAQ/N,IAAR,CAAchX,CAAd,CAAiBA,EAAI,CAArB,CAAwB,CAAxB,EAEA,CAED,KAAK8tB,QAAL,CAAe,UAAU5J,eAAV,CAA2B,eAAA,CAAiBa,OAAjB,CAA3B,CAAuD,CAAvD,CAAf,EACA,KAAKgJ,YAAL,CAAmB,UAAnB,CAA+B,UAAU7J,eAAV,CAA2B9hB,SAA3B,CAAsC,CAAtC,CAA/B,EACA,KAAK2rB,YAAL,CAAmB,QAAnB,CAA6B,UAAU7J,eAAV,CAA2B8D,OAA3B,CAAoC,CAApC,CAA7B,EACA,KAAK+F,YAAL,CAAmB,IAAnB,CAAyB,UAAU7J,eAAV,CAA2BgE,GAA3B,CAAgC,CAAhC,CAAzB,EAEA,KAAK5W,cAAL,CAAsB,UAAU1O,MAAV,CAAkB,UAAU1O,OAAV,EAAlB,CAAuCwI,MAAvC,CAAtB,CAEA,CA3DD,CA6DAvZ,MAAMu2G,oBAAN,CAA2B91G,SAA3B,CAAuCE,OAAOy2B,MAAP,CAAep3B,MAAM+e,cAAN,CAAqBte,SAApC,CAAvC,CACAT,MAAMu2G,oBAAN,CAA2B91G,SAA3B,CAAqCoJ,WAArC,CAAmD7J,MAAMu2G,oBAAzD;;;IAQAv2G,MAAM02G,sBAAN,CAA+B,SAAUn+C,SAAV,CAAqBC,YAArB,CAAmC7N,MAAnC,CAA2C8N,cAA3C,CAA2DR,cAA3D,CAA2ES,SAA3E,CAAsFL,UAAtF,CAAkGC,WAAlG,CAAgH,CAE9It4D,MAAM+e,cAAN,CAAqBxd,IAArB,CAA2B,IAA3B,EAEA,KAAKo4B,IAAL,CAAY,wBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjBiwB,UAAWA,SADM,CAEjBC,aAAcA,YAFG,CAGjB7N,OAAQA,MAHS,CAIjB8N,eAAgBA,cAJC,CAKjBR,eAAgBA,cALC,CAMjBS,UAAWA,SANM,CAOjBL,WAAYA,UAPK,CAQjBC,YAAaA,WARI,CAAlB,CAWA,UAAY,IAAZ,CAEAC,UAAYA,YAAcp4D,SAAd,CAA0Bo4D,SAA1B,CAAsC,EAAlD,CACAC,aAAeA,eAAiBr4D,SAAjB,CAA6Bq4D,YAA7B,CAA4C,EAA3D,CACA7N,OAASA,SAAWxqD,SAAX,CAAuBwqD,MAAvB,CAAgC,GAAzC,CAEA8N,eAAiBr4D,KAAKiK,KAAL,CAAYouD,cAAZ,GAAgC,CAAjD,CACAR,eAAiB73D,KAAKiK,KAAL,CAAY4tD,cAAZ,GAAgC,CAAjD,CAEAS,UAAYA,YAAcv4D,SAAd,CAA0Bu4D,SAA1B,CAAsC,KAAlD,CACAL,WAAaA,aAAel4D,SAAf,CAA2Bk4D,UAA3B,CAAwC,GAArD,CACAC,YAAcA,cAAgBn4D,SAAhB,CAA4Bm4D,WAA5B,CAA0C,IAAMl4D,KAAKsV,EAAnE;CAIA,UAAY,CAAZ,CAEA,GAAKgjD,YAAc,KAAnB,CAA2B,CAE1B,GAAKH,UAAY,CAAjB,CAAqBo+C,QACrB,GAAKn+C,aAAe,CAApB,CAAwBm+C,QAExB,CAED,gBAAkB1B,sBAAlB,CACA,eAAiBC,qBAAjB;CAIA,YAAc,UAAUn0E,eAAV,CAA2B,IAAMo0E,WAAa,KAAb,CAAqB3pE,WAArB,CAAmCC,WAAzC,EAAwD0pE,UAAxD,CAA3B,CAAiG,CAAjG,CAAd,CACA,aAAe,UAAUp0E,eAAV,CAA2B,gBAAA,CAAkBq0E,YAAc,CAAhC,CAA3B,CAAgE,CAAhE,CAAf,CACA,YAAc,UAAUr0E,eAAV,CAA2B,gBAAA,CAAkBq0E,YAAc,CAAhC,CAA3B,CAAgE,CAAhE,CAAd,CACA,QAAU,UAAUr0E,eAAV,CAA2B,gBAAA,CAAkBq0E,YAAc,CAAhC,CAA3B,CAAgE,CAAhE,CAAV;CAIA,UAAY,CAAZ,CACI3U,YAAc,CADlB,CAEImW,WAAa,EAFjB,CAGIC,WAAalsD,OAAS,CAH1B;CAMA,eAAiB,CAAjB;CAIAmsD,gBAEA,GAAKp+C,YAAc,KAAnB,CAA2B,CAE1B,GAAKH,UAAY,CAAjB,CAAqBw+C,YAAa,IAAb,EACrB,GAAKv+C,aAAe,CAApB,CAAwBu+C,YAAa,KAAb,EAExB;CAID,KAAKpsE,QAAL,CAAe/I,OAAf,EACA,KAAKgJ,YAAL,CAAmB,UAAnB,CAA+B/rB,QAA/B,EACA,KAAK+rB,YAAL,CAAmB,QAAnB,CAA6B/F,OAA7B,EACA,KAAK+F,YAAL,CAAmB,IAAnB,CAAyB7F,GAAzB;CAIA,6BAAA,EAAgC,CAE/B,UAAY,CAAE0zB,eAAiB,CAAnB,GAA2BR,eAAiB,CAA5C,CAAZ,CAEA,GAAKS,YAAc,KAAnB,CAA2B,CAE1Bv3B,OAAW,CAAEs3B,eAAiB,CAAnB,EAAyBk+C,KAA3B,CAAuCl+C,eAAiBk+C,KAAjE,CAEA,CAED,YAAA,CAEA,CAED,4BAAA,EAA+B,CAE9B,UAAYl+C,eAAiBR,cAAjB,CAAkC,CAAlC,CAAsC,CAAlD,CAEA,GAAKS,YAAc,KAAnB,CAA2B,CAE1Bv3B,OAASs3B,eAAiBk+C,KAAjB,CAAyB,CAAlC,CAEA,CAED,YAAA,CAEA,CAED,sBAAA,EAAyB,CAExB,KAAA,CAAOvoG,CAAP,CACA,WAAa,UAAU2C,OAAV,EAAb,CACA,WAAa,UAAUA,OAAV,EAAb,CAEA,eAAiB,CAAjB;CAGA,aAAe,CAAEynD,aAAeD,SAAjB,EAA+B5N,MAA9C;CAIA,IAAMv8C,EAAI,CAAV,CAAaA,GAAK6pD,cAAlB,CAAkC7pD,GAAlC,CAAyC,CAExC,aAAe,EAAf,CAEA,MAAQA,EAAI6pD,cAAZ;CAGA,WAAa1mD,GAAMinD,aAAeD,SAArB,EAAmCA,SAAhD,CAEA,IAAMh4D,EAAI,CAAV,CAAaA,GAAKk4D,cAAlB,CAAkCl4D,GAAlC,CAAyC,CAExC,MAAQA,EAAIk4D,cAAZ;CAGAr0B,OAAO7jC,CAAP,CAAWgZ,OAASnZ,KAAK8O,GAAL,CAAUwlB,EAAI4jC,WAAJ,CAAkBD,UAA5B,CAApB,CACAj0B,OAAOh2B,CAAP,CAAW,CAAEmD,CAAF,CAAMo5C,MAAN,CAAeksD,UAA1B,CACAzyE,OAAO/1B,CAAP,CAAWkL,OAASnZ,KAAK6O,GAAL,CAAUylB,EAAI4jC,WAAJ,CAAkBD,UAA5B,CAApB,CACAx5C,SAASiC,MAAT,CAAiB5f,KAAjB,CAAwBkjC,OAAO7jC,CAA/B,CAAkC6jC,OAAOh2B,CAAzC,CAA4Cg2B,OAAO/1B,CAAnD;CAGA2K,OAAOjP,IAAP,CAAaq6B,MAAb;CAIA,GAAOm0B,YAAc,CAAd,EAAmBnqD,IAAM,CAA3B,EAAoCoqD,eAAiB,CAAjB,EAAsBpqD,IAAM6pD,cAArE,CAAwF,CAEvFj/C,OAAOzY,CAAP,CAAWH,KAAK8O,GAAL,CAAUwlB,EAAI4jC,WAAJ,CAAkBD,UAA5B,CAAX,CACAr/C,OAAO3K,CAAP,CAAWjO,KAAK6O,GAAL,CAAUylB,EAAI4jC,WAAJ,CAAkBD,UAA5B,CAAX,CAEA,CAEDr/C,OAAO1E,IAAP,CAAalU,KAAKkM,IAAL,CAAW0M,OAAOzY,CAAP,CAAWyY,OAAOzY,CAAlB,CAAsByY,OAAO3K,CAAP,CAAW2K,OAAO3K,CAAnD,EAAyD2oG,QAAtE,EAAiF5lG,SAAjF,GACAyzB,QAAQ/jB,MAAR,CAAgB5f,KAAhB,CAAuB8X,OAAOzY,CAA9B,CAAiCyY,OAAO5K,CAAxC,CAA2C4K,OAAO3K,CAAlD;CAGA02B,IAAI7C,KAAJ,CAAWhhC,KAAX,CAAkBwzB,CAAlB,CAAqB,EAAInjB,CAAzB;CAGA0lG,SAASpjF,IAAT,CAAe3yB,KAAf;CAGAA,QAEA;CAGD01G,WAAW/iF,IAAX,CAAiBojF,QAAjB,EAEA;CAID,IAAM12G,EAAI,CAAV,CAAaA,EAAIk4D,cAAjB,CAAiCl4D,GAAjC,CAAwC,CAEvC,IAAM6N,EAAI,CAAV,CAAaA,EAAI6pD,cAAjB,CAAiC7pD,GAAjC,CAAwC;CAGvC,OAASwoG,WAAYxoG,CAAZ,EAAiB7N,CAAjB,CAAT,CACA,OAASq2G,WAAYxoG,EAAI,CAAhB,EAAqB7N,CAArB,CAAT,CACA,OAASq2G,WAAYxoG,EAAI,CAAhB,EAAqB7N,EAAI,CAAzB,CAAT,CACA,OAASq2G,WAAYxoG,CAAZ,EAAiB7N,EAAI,CAArB,CAAT;CAGAqhC,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B5rE,EAA3B,EAAiC4rE,cACjC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B3rE,EAA3B,EAAiC2rE,cACjC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B1a,EAA3B,EAAiC0a;CAGjC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B3rE,EAA3B,EAAiC2rE,cACjC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2ByW,EAA3B,EAAiCzW,cACjC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B1a,EAA3B,EAAiC0a;CAGjCrtB,YAAc,CAAd,CAEA,CAED;CAGDt0D,MAAMisB,QAAN,CAAgBmoC,UAAhB,CAA4BE,UAA5B,CAAwC,CAAxC;CAGAF,YAAcE,UAAd,CAEA,CAED,oBAAA,CAAsBprD,GAAtB,CAA4B,CAE3B,KAAA,CAAOmvF,gBAAP,CAAyBC,cAAzB,CAEA,OAAS,UAAUhjG,OAAV,EAAT,CACA,WAAa,UAAUrD,OAAV,EAAb,CAEA,eAAiB,CAAjB,CAEA,WAAeiX,MAAQ,IAAV,CAAmBuwC,SAAnB,CAA+BC,YAA5C,CACA,SAAaxwC,MAAQ,IAAV,CAAmB,CAAnB,CAAuB,CAAE,CAApC;CAGAmvF,iBAAmBj2G,KAAnB;;;CAMA,IAAMX,EAAI,CAAV,CAAaA,GAAKk4D,cAAlB,CAAkCl4D,GAAlC,CAAyC;CAGxCse,SAASiC,MAAT,CAAiB5f,KAAjB,CAAwB,CAAxB,CAA2B21G,WAAav2G,IAAxC,CAA8C,CAA9C;CAGAukC,QAAQ/jB,MAAR,CAAgB5f,KAAhB,CAAuB,CAAvB,CAA0BZ,IAA1B,CAAgC,CAAhC;CAGAokC,GAAGnkC,CAAH,CAAO,GAAP,CACAmkC,GAAGt2B,CAAH,CAAO,GAAP,CAEA22B,IAAI7C,KAAJ,CAAWhhC,KAAX,CAAkBwjC,GAAGnkC,CAArB,CAAwBmkC,GAAGt2B,CAA3B;CAGAlN,QAEA;CAGDk2G,eAAiBl2G,KAAjB;CAIA,IAAMX,EAAI,CAAV,CAAaA,GAAKk4D,cAAlB,CAAkCl4D,GAAlC,CAAyC,CAExC,MAAQA,EAAIk4D,cAAZ,CACA,UAAY/jC,EAAI4jC,WAAJ,CAAkBD,UAA9B,CAEA,aAAej4D,KAAK6O,GAAL,CAAUkK,KAAV,CAAf,CACA,aAAe/Y,KAAK8O,GAAL,CAAUiK,KAAV,CAAf;CAGAirB,OAAO7jC,CAAP,CAAWgZ,OAAS89F,QAApB,CACAjzE,OAAOh2B,CAAP,CAAWyoG,WAAav2G,IAAxB,CACA8jC,OAAO/1B,CAAP,CAAWkL,OAAS+9F,QAApB,CACAz4F,SAASiC,MAAT,CAAiB5f,KAAjB,CAAwBkjC,OAAO7jC,CAA/B,CAAkC6jC,OAAOh2B,CAAzC,CAA4Cg2B,OAAO/1B,CAAnD;CAGAw2B,QAAQ/jB,MAAR,CAAgB5f,KAAhB,CAAuB,CAAvB,CAA0BZ,IAA1B,CAAgC,CAAhC;CAGAokC,GAAGnkC,CAAH,CAAS+2G,SAAW,GAAb,CAAqB,GAA5B,CACA5yE,GAAGt2B,CAAH,CAASipG,SAAW,GAAX,CAAiB/2G,IAAnB,CAA4B,GAAnC,CACAykC,IAAI7C,KAAJ,CAAWhhC,KAAX,CAAkBwjC,GAAGnkC,CAArB,CAAwBmkC,GAAGt2B,CAA3B;CAGAlN,QAEA;CAID,IAAMX,EAAI,CAAV,CAAaA,EAAIk4D,cAAjB,CAAiCl4D,GAAjC,CAAwC,CAEvC,MAAQ42G,iBAAmB52G,CAA3B,CACA,MAAQ62G,eAAiB72G,CAAzB,CAEA,GAAKynB,MAAQ,IAAb,CAAoB;CAGnB4Z,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B5jF,CAA3B,EAAgC4jF,cAChC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B5jF,EAAI,CAA/B,EAAoC4jF,cACpC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B3yF,CAA3B,EAAgC2yF,cAEhC,CAPD,IAOO;CAGN7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B5jF,EAAI,CAA/B,EAAoC4jF,cACpC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B5jF,CAA3B,EAAgC4jF,cAChC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B3yF,CAA3B,EAAgC2yF,cAEhC;CAGDrtB,YAAc,CAAd,CAEA;CAGDt0D,MAAMisB,QAAN,CAAgBmoC,UAAhB,CAA4BE,UAA5B,CAAwCprD,MAAQ,IAAR,CAAe,CAAf,CAAmB,CAA3D;CAGAkrD,YAAcE,UAAd,CAEA,CAED,CA3TD,CA6TApzE,MAAM02G,sBAAN,CAA6Bj2G,SAA7B,CAAyCE,OAAOy2B,MAAP,CAAep3B,MAAM+e,cAAN,CAAqBte,SAApC,CAAzC,CACAT,MAAM02G,sBAAN,CAA6Bj2G,SAA7B,CAAuCoJ,WAAvC,CAAqD7J,MAAM02G,sBAA3D;;;IAQA12G,MAAMu3G,gBAAN,CAAyB,SAAWh/C,SAAX,CAAsBC,YAAtB,CAAoC7N,MAApC,CAA4C8N,cAA5C,CAA4DR,cAA5D,CAA4ES,SAA5E,CAAuFL,UAAvF,CAAmGC,WAAnG,CAAiH,CAEzIt4D,MAAM4e,QAAN,CAAerd,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,kBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjBiwB,UAAWA,SADM,CAEjBC,aAAcA,YAFG,CAGjB7N,OAAQA,MAHS,CAIjB8N,eAAgBA,cAJC,CAKjBR,eAAgBA,cALC,CAMjBS,UAAWA,SANM,CAOjBL,WAAYA,UAPK,CAQjBC,YAAaA,WARI,CAAlB,CAWA,KAAK7zB,kBAAL,CAAyB,UAAUiyE,sBAAV,CAAkCn+C,SAAlC,CAA6CC,YAA7C,CAA2D7N,MAA3D,CAAmE8N,cAAnE,CAAmFR,cAAnF,CAAmGS,SAAnG,CAA8GL,UAA9G,CAA0HC,WAA1H,CAAzB,EACA,KAAK9wB,aAAL,GAEA,CApBD,CAsBAxnC,MAAMu3G,gBAAN,CAAuB92G,SAAvB,CAAmCE,OAAOy2B,MAAP,CAAep3B,MAAM4e,QAAN,CAAene,SAA9B,CAAnC,CACAT,MAAMu3G,gBAAN,CAAuB92G,SAAvB,CAAiCoJ,WAAjC,CAA+C7J,MAAMu3G,gBAArD;;;IAQAv3G,MAAMw3G,kBAAN,CAA2B,SAC1Bj+F,MAD0B,CAClBoxC,MADkB,CAE1B8N,cAF0B,CAEVR,cAFU,CAG1BS,SAH0B,CAGfL,UAHe,CAGHC,WAHG,CAGW,CAErCt4D,MAAM02G,sBAAN,CAA6Bn1G,IAA7B,CAAmC,IAAnC,CACC,CADD,CACIgY,MADJ,CACYoxC,MADZ,CAEC8N,cAFD,CAEiBR,cAFjB,CAGCS,SAHD,CAGYL,UAHZ,CAGwBC,WAHxB,EAKA,KAAK3+B,IAAL,CAAY,oBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB/uB,OAAQA,MADS,CAEjBoxC,OAAQA,MAFS,CAGjB8N,eAAgBA,cAHC,CAIjBR,eAAgBA,cAJC,CAKjBI,WAAYA,UALK,CAMjBC,YAAaA,WANI,CAAlB,CASA,CArBD,CAuBAt4D,MAAMw3G,kBAAN,CAAyB/2G,SAAzB,CAAqCE,OAAOy2B,MAAP,CAAep3B,MAAM+e,cAAN,CAAqBte,SAApC,CAArC,CACAT,MAAMw3G,kBAAN,CAAyB/2G,SAAzB,CAAmCoJ,WAAnC,CAAiD7J,MAAMw3G,kBAAvD;;;IAQAx3G,MAAMy3G,YAAN,CAAqB,SACpBl+F,MADoB,CACZoxC,MADY,CAEpB8N,cAFoB,CAEJR,cAFI,CAGpBS,SAHoB,CAGTL,UAHS,CAGGC,WAHH,CAGiB,CAErCt4D,MAAMu3G,gBAAN,CAAuBh2G,IAAvB,CAA6B,IAA7B,CACC,CADD,CACIgY,MADJ,CACYoxC,MADZ,CAEC8N,cAFD,CAEiBR,cAFjB,CAGCS,SAHD,CAGYL,UAHZ,CAGwBC,WAHxB,EAKA,KAAK3+B,IAAL,CAAY,cAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB/uB,OAAQA,MADS,CAEjBoxC,OAAQA,MAFS,CAGjB8N,eAAgBA,cAHC,CAIjBR,eAAgBA,cAJC,CAKjBS,UAAWA,SALM,CAMjBL,WAAYA,UANK,CAOjBC,YAAaA,WAPI,CAAlB,CAUA,CAtBD,CAwBAt4D,MAAMy3G,YAAN,CAAmBh3G,SAAnB,CAA+BE,OAAOy2B,MAAP,CAAep3B,MAAMu3G,gBAAN,CAAuB92G,SAAtC,CAA/B,CACAT,MAAMy3G,YAAN,CAAmBh3G,SAAnB,CAA6BoJ,WAA7B,CAA2C7J,MAAMy3G,YAAjD;;;IAQAz3G,MAAM03G,aAAN,CAAsB,SAAW/4F,QAAX,CAAqBg5F,cAArB,CAAsC,CAE3D33G,MAAM+e,cAAN,CAAqBxd,IAArB,CAA2B,IAA3B,EAEAo2G,eAAmBA,iBAAmBx3G,SAArB,CAAmCw3G,cAAnC,CAAoD,CAArE,CAEA,iBAAmBv3G,KAAK6O,GAAL,CAAUjP,MAAMI,IAAN,CAAWmoB,OAAX,CAAqBovF,cAA/B,CAAnB,CAEA,SAAW,CAAE,CAAF,CAAK,CAAL,CAAX,CAAqBtuE,KAAO,EAA5B,CAEA,qBAAA,CAAuB13B,CAAvB,CAA0BjI,CAA1B,CAA8B,CAE7B,SAAWA,CAAX,CAEA,CAED,SAAW,CAAE,GAAF,CAAO,GAAP,CAAY,GAAZ,CAAX,CAEA,aAAA,CAEA,GAAKiV,0BAA0BI,cAA/B,CAAgD,CAE/CutB,UAAY,UAAU1tB,QAAV,EAAZ,CACA0tB,UAAU7H,kBAAV,CAA8B9lB,QAA9B,EAEA,CALD,IAKO,CAEN2tB,UAAY3tB,SAAS5S,KAAT,EAAZ,CAEA,CAEDugC,UAAU9E,aAAV,GACA8E,UAAUjH,kBAAV,GAEA,aAAeiH,UAAUztB,QAAzB,CACA,UAAYytB,UAAUjJ,KAAtB,CAEA,IAAM,MAAQ,CAAR,CAAWz4B,EAAIy4B,MAAMjiC,MAA3B,CAAmCyb,EAAIjS,CAAvC,CAA0CiS,GAA1C,CAAiD,CAEhD,SAAWwmB,MAAOxmB,CAAP,CAAX,CAEA,IAAM,MAAQ,CAAd,CAAiB2D,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9Bo3F,KAAM,CAAN,EAAYvzE,KAAMsR,KAAMn1B,CAAN,CAAN,CAAZ,CACAo3F,KAAM,CAAN,EAAYvzE,KAAMsR,KAAM,CAAEn1B,EAAI,CAAN,EAAY,CAAlB,CAAN,CAAZ,CACAo3F,KAAKz7E,IAAL,CAAW07E,YAAX,EAEA,QAAUD,KAAK92G,QAAL,EAAV,CAEA,GAAKuoC,KAAM7I,GAAN,IAAgBrgC,SAArB,CAAiC,CAEhCkpC,KAAM7I,GAAN,EAAc,CAAEs3E,MAAOF,KAAM,CAAN,CAAT,CAAoBG,MAAOH,KAAM,CAAN,CAA3B,CAAsCI,MAAOn7F,CAA7C,CAAgDo7F,MAAO93G,SAAvD,CAAd,CAEA,CAJD,IAIO,CAENkpC,KAAM7I,GAAN,EAAYy3E,KAAZ,CAAoBp7F,CAApB,CAEA,CAED,CAED,CAED,WAAa,EAAb,CAEA,IAAM,OAAN,QAAA,CAAwB,CAEvB,MAAQwsB,KAAM7I,GAAN,CAAR,CAEA,GAAK91B,EAAEutG,KAAF,GAAY93G,SAAZ,EAAyBkjC,MAAO34B,EAAEstG,KAAT,EAAiBh/F,MAAjB,CAAwBhI,GAAxB,CAA6BqyB,MAAO34B,EAAEutG,KAAT,EAAiBj/F,MAA9C,GAA0Dk/F,YAAxF,CAAuG,CAEtG,WAAar5F,SAAUnU,EAAEotG,KAAZ,CAAb,CACAplF,OAAOmB,IAAP,CAAauQ,OAAO7jC,CAApB,EACAmyB,OAAOmB,IAAP,CAAauQ,OAAOh2B,CAApB,EACAskB,OAAOmB,IAAP,CAAauQ,OAAO/1B,CAApB,EAEA+1B,OAASvlB,SAAUnU,EAAEqtG,KAAZ,CAAT,CACArlF,OAAOmB,IAAP,CAAauQ,OAAO7jC,CAApB,EACAmyB,OAAOmB,IAAP,CAAauQ,OAAOh2B,CAApB,EACAskB,OAAOmB,IAAP,CAAauQ,OAAO/1B,CAApB,EAEA,CAED,CAED,KAAKu8B,YAAL,CAAmB,UAAnB,CAA+B,UAAU7J,eAAV,CAA2B,gBAAA,CAAkBrO,MAAlB,CAA3B,CAAuD,CAAvD,CAA/B,EAEA,CAvFD,CAyFA1yB,MAAM03G,aAAN,CAAoBj3G,SAApB,CAAgCE,OAAOy2B,MAAP,CAAep3B,MAAM+e,cAAN,CAAqBte,SAApC,CAAhC,CACAT,MAAM03G,aAAN,CAAoBj3G,SAApB,CAA8BoJ,WAA9B,CAA4C7J,MAAM03G,aAAlD;;;;;;;;;;;;;;;;;;;;;;;KA4BA13G,MAAMgzG,eAAN,CAAwB,SAAWvE,MAAX,CAAmB3lD,OAAnB,CAA6B,CAEpD,GAAK,aAAA,GAAqB,WAA1B,CAAwC,CAEvC2lD,OAAS,EAAT,CACA,OAEA,CAEDzuG,MAAM4e,QAAN,CAAerd,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,iBAAZ,CAEA80E,OAASlyE,MAAMC,OAAN,CAAeiyE,MAAf,EAA0BA,MAA1B,CAAmC,CAAEA,MAAF,CAA5C,CAEA,KAAK0J,YAAL,CAAmB1J,MAAnB,CAA2B3lD,OAA3B,EAEA,KAAKzjB,kBAAL;;;;;CAUA,CA3BD,CA6BArlC,MAAMgzG,eAAN,CAAsBvyG,SAAtB,CAAkCE,OAAOy2B,MAAP,CAAep3B,MAAM4e,QAAN,CAAene,SAA9B,CAAlC,CACAT,MAAMgzG,eAAN,CAAsBvyG,SAAtB,CAAgCoJ,WAAhC,CAA8C7J,MAAMgzG,eAApD,CAEAhzG,MAAMgzG,eAAN,CAAsBvyG,SAAtB,CAAgC03G,YAAhC,CAA+C,SAAW1J,MAAX,CAAmB3lD,OAAnB,CAA6B,CAE3E,OAAS2lD,OAAOrtG,MAAhB,CAEA,IAAM,MAAQ,CAAd,CAAiBuJ,EAAIipB,EAArB,CAAyBjpB,GAAzB,CAAgC,CAE/B,UAAY8jG,OAAQ9jG,CAAR,CAAZ,CACA,KAAKytG,QAAL,CAAe7Q,KAAf,CAAsBz+C,OAAtB,EAEA,CAED,CAXD,CAaA9oD,MAAMgzG,eAAN,CAAsBvyG,SAAtB,CAAgC23G,QAAhC,CAA2C,SAAW7Q,KAAX,CAAkBz+C,OAAlB,CAA4B,CAEtE,WAAaA,QAAQuvD,MAAR,GAAmBl4G,SAAnB,CAA+B2oD,QAAQuvD,MAAvC,CAAgD,GAA7D,CAEA,mBAAqBvvD,QAAQwvD,cAAR,GAA2Bn4G,SAA3B,CAAuC2oD,QAAQwvD,cAA/C,CAAgE,CAArF;CACA,cAAgBxvD,QAAQyvD,SAAR,GAAsBp4G,SAAtB,CAAkC2oD,QAAQyvD,SAA1C,CAAsDD,eAAiB,CAAvF;CACA,kBAAoBxvD,QAAQ0vD,aAAR,GAA0Br4G,SAA1B,CAAsC2oD,QAAQ0vD,aAA9C,CAA8D,CAAlF,CAEA,iBAAmB1vD,QAAQ2vD,YAAR,GAAyBt4G,SAAzB,CAAqC2oD,QAAQ2vD,YAA7C,CAA4D,IAA/E;CAEA,kBAAoB3vD,QAAQ4vD,aAAR,GAA0Bv4G,SAA1B,CAAsC2oD,QAAQ4vD,aAA9C,CAA8D,EAAlF,CAEA,UAAY5vD,QAAQ6vD,KAAR,GAAkBx4G,SAAlB,CAA8B2oD,QAAQ6vD,KAAtC,CAA8C,CAA1D,CAEA,gBAAkB7vD,QAAQ8vD,WAA1B,CACA,cAAA,CAAgBC,cAAgB,KAAhC;CAGA,UAAY/vD,QAAQgwD,WAAR,GAAwB34G,SAAxB,CAAoC2oD,QAAQgwD,WAA5C,CAA0D94G,MAAMgzG,eAAN,CAAsB+F,gBAA5F,CAEA,cAAA,CAAgBC,QAAhB,CAA0BhgG,MAA1B,CAAkCigG,SAAlC,CACA,GAAKL,WAAL,CAAmB,CAElBM,WAAaN,YAAY9N,eAAZ,CAA6B6N,KAA7B,CAAb,CAEAE,cAAgB,IAAhB,CACAJ,aAAe,KAAf;;;;CAOAU,WAAarwD,QAAQswD,MAAR,GAAmBj5G,SAAnB,CAA+B2oD,QAAQswD,MAAvC,CAAgD,UAAUC,YAAN,CAAmBC,YAAvB,CAAqCV,WAArC,CAAkDD,KAAlD,CAAyD,KAAzD,CAA7D;CAIAK,SAAW,UAAUjoG,OAAV,EAAX,CACAiI,OAAS,UAAUjI,OAAV,EAAT,CACAkoG,UAAY,UAAUloG,OAAV,EAAZ,CAEA;CAID,GAAK,CAAE0nG,YAAP,CAAsB,CAErBD,cAAgB,CAAhB,CACAF,eAAiB,CAAjB,CACAC,UAAY,CAAZ,CAEA;CAID,SAAA,CAAW7tG,CAAX,CAAc0+F,EAAd;CACA,UAAY,IAAZ,CAEA,iBAAmB,KAAKvqF,QAAL,CAAczd,MAAjC,CAEA,gBAAkBmmG,MAAM+L,aAAN,CAAqBoF,aAArB,CAAlB,CAEA,aAAea,YAAYhS,KAA3B,CACA,UAAYgS,YAAY3U,KAAxB,CAEA,YAAc,CAAE5kG,MAAMmjG,UAAN,CAAiB8G,WAAjB,CAA8BprF,QAA9B,CAAhB,CAEA,GAAK26F,OAAL,CAAe,CAEd36F,SAAWA,SAAS26F,OAAT,EAAX;CAIA,IAAM9uG,EAAI,CAAJ,CAAO0+F,GAAKxE,MAAMxjG,MAAxB,CAAgCsJ,EAAI0+F,EAApC,CAAwC1+F,GAAxC,CAA+C,CAE9C+uG,MAAQ7U,MAAOl6F,CAAP,CAAR,CAEA,GAAK1K,MAAMmjG,UAAN,CAAiB8G,WAAjB,CAA8BwP,KAA9B,CAAL,CAA6C,CAE5C7U,MAAOl6F,CAAP,EAAa+uG,MAAMD,OAAN,EAAb,CAEA,CAED,CAEDA,QAAU,KAAV;CAEA,CAGD,UAAYx5G,MAAMmjG,UAAN,CAAiBwB,gBAAjB,CAAmC9lF,QAAnC,CAA6C+lF,KAA7C,CAAZ,eAIA,YAAc/lF,QAAd;CAEA,IAAMnU,EAAI,CAAJ,CAAO0+F,GAAKxE,MAAMxjG,MAAxB,CAAgCsJ,EAAI0+F,EAApC,CAAwC1+F,GAAxC,CAA+C,CAE9C+uG,MAAQ7U,MAAOl6F,CAAP,CAAR,CAEAmU,SAAWA,SAASi2C,MAAT,CAAiB2kD,KAAjB,CAAX,CAEA,CAGD,iBAAA,CAAoBC,EAApB,CAAwB10C,GAAxB,CAA6Bp5D,IAA7B,CAAoC,CAEnC,GAAK,CAAEo5D,GAAP,CAAa75D,QAAQuL,KAAR,CAAe,2CAAf,EAEb,WAAW3K,KAAJ,GAAY2B,cAAZ,CAA4B9B,IAA5B,EAAmCwB,GAAnC,CAAwCssG,EAAxC,CAAP,CAEA,CAED,KAAA,CAAOC,EAAP,CAAWlvG,CAAX,CAAc4D,CAAd,CACCurG,IADD,CACOC,KAAOh7F,SAASzd,MADvB,CAECijC,IAFD,CAEOy1E,KAAOz2E,MAAMjiC,MAFpB;CAQA,oBAAA,CAAsB+vG,IAAtB,CAA4B4I,MAA5B,CAAoCC,MAApC,CAA6C;;;;;;CAS5C,aAAA,CAAeC,SAAf,CAA0BC,UAAY,CAAtC;;;CAKA,aAAe/I,KAAK5wG,CAAL,CAASw5G,OAAOx5G,CAA/B,CAAkC45G,SAAWhJ,KAAK/iG,CAAL,CAAS2rG,OAAO3rG,CAA7D,CACA,aAAe4rG,OAAOz5G,CAAP,CAAW4wG,KAAK5wG,CAA/B,CAAkC65G,SAAWJ,OAAO5rG,CAAP,CAAW+iG,KAAK/iG,CAA7D,CAEA,iBAAqBisG,SAAWA,QAAX,CAAsBF,SAAWA,QAAtD;CAGA,eAAmBE,SAAWD,QAAX,CAAsBD,SAAWG,QAApD,CAEA,GAAKl6G,KAAK8Q,GAAL,CAAUqpG,UAAV,EAAyBt6G,OAAOC,OAArC,CAA+C;;CAM9C,eAAiBE,KAAKkM,IAAL,CAAWkuG,YAAX,CAAjB,CACA,eAAiBp6G,KAAKkM,IAAL,CAAWguG,SAAWA,QAAX,CAAsBF,SAAWA,QAA5C,CAAjB;CAIA,kBAAsBL,OAAOx5G,CAAP,CAAW45G,SAAWM,UAA5C,CACA,kBAAsBV,OAAO3rG,CAAP,CAAWisG,SAAWI,UAA5C,CAEA,kBAAsBT,OAAOz5G,CAAP,CAAW65G,SAAWM,UAA5C,CACA,kBAAsBV,OAAO5rG,CAAP,CAAWksG,SAAWI,UAA5C;CAIA,OAAS,CAAG,CAAEC,cAAgBC,aAAlB,EAAoCR,QAApC,CACT,CAAES,cAAgBC,aAAlB,EAAoCR,QAD9B,GAEHD,SAAWD,QAAX,CAAsBD,SAAWG,QAF9B,CAAT;CAMAS,UAAcH,cAAgBP,SAAWW,EAA3B,CAAgC7J,KAAK5wG,CAAnD,CACA05G,UAAca,cAAgBX,SAAWa,EAA3B,CAAgC7J,KAAK/iG,CAAnD;;CAIA,kBAAsB2sG,UAAYA,SAAZ,CAAwBd,UAAYA,SAA1D,CACA,GAAKgB,eAAiB,CAAtB,CAA0B,CAEzB,iBAAiB7mG,OAAV,CAAmB2mG,SAAnB,CAA8Bd,SAA9B,CAAP,CAEA,CAJD,IAIO,CAENC,UAAY95G,KAAKkM,IAAL,CAAW2uG,cAAgB,CAA3B,CAAZ,CAEA,CAED,CAzCD,IAyCO;CAIN,iBAAmB,KAAnB;CACA,GAAKZ,SAAWp6G,OAAOC,OAAvB,CAAiC,CAEhC,GAAKo6G,SAAWr6G,OAAOC,OAAvB,CAAiC,CAEhCg7G,aAAe,IAAf,CAEA,CAED,CARD,IAQO,CAEN,GAAKb,SAAW,CAAEp6G,OAAOC,OAAzB,CAAmC,CAElC,GAAKo6G,SAAW,CAAEr6G,OAAOC,OAAzB,CAAmC,CAElCg7G,aAAe,IAAf,CAEA,CAED,CARD,IAQO,CAEN,GAAK96G,KAAKE,IAAL,CAAW65G,QAAX,IAA0B/5G,KAAKE,IAAL,CAAW85G,QAAX,CAA/B,CAAuD,CAEtDc,aAAe,IAAf,CAEA,CAED,CAED,CAED,GAAKA,YAAL,CAAoB;CAGnBH,UAAY,CAAEZ,QAAd,CACAF,UAAaI,QAAb,CACAH,UAAY95G,KAAKkM,IAAL,CAAWkuG,YAAX,CAAZ,CAEA,CAPD,IAOO;CAGNO,UAAYV,QAAZ,CACAJ,UAAYE,QAAZ,CACAD,UAAY95G,KAAKkM,IAAL,CAAWkuG,aAAe,CAA1B,CAAZ,CAEA,CAED,CAED,iBAAiBpmG,OAAV,CAAmB2mG,UAAYb,SAA/B,CAA0CD,UAAYC,SAAtD,CAAP,CAEA,CAGD,qBAAuB,EAAvB,CAEA,IAAM,MAAQ,CAAR,CAAWt9F,GAAKwmF,QAAQhiG,MAAxB,CAAgCof,EAAI5D,GAAK,CAAzC,CAA4C2V,EAAI1V,EAAI,CAA1D,CAA6DA,EAAID,EAAjE,CAAqEC,IAAM2D,GAAN,CAAY+R,GAAjF,CAAwF,CAEvF,GAAK/R,IAAM5D,EAAX,CAAgB4D,EAAI,CAAJ,CAChB,GAAK+R,IAAM3V,EAAX,CAAgB2V,EAAI,CAAJ;;CAKhB4oF,iBAAkBt+F,CAAlB,EAAwBu+F,YAAahY,QAASvmF,CAAT,CAAb,CAA2BumF,QAAS5iF,CAAT,CAA3B,CAAyC4iF,QAAS7wE,CAAT,CAAzC,CAAxB,CAEA,CAED,mBAAqB,EAArB,CAAyB8oF,gBAAzB,CAA2CC,kBAAoBH,iBAAiBrmD,MAAjB,EAA/D,CAEA,IAAMpqD,EAAI,CAAJ,CAAO0+F,GAAKxE,MAAMxjG,MAAxB,CAAgCsJ,EAAI0+F,EAApC,CAAwC1+F,GAAxC,CAA+C,CAE9C+uG,MAAQ7U,MAAOl6F,CAAP,CAAR,CAEA2wG,iBAAmB,EAAnB,CAEA,IAAMx+F,EAAI,CAAJ,CAAOD,GAAK68F,MAAMr4G,MAAlB,CAA0Bof,EAAI5D,GAAK,CAAnC,CAAsC2V,EAAI1V,EAAI,CAApD,CAAuDA,EAAID,EAA3D,CAA+DC,IAAM2D,GAAN,CAAY+R,GAA3E,CAAkF,CAEjF,GAAK/R,IAAM5D,EAAX,CAAgB4D,EAAI,CAAJ,CAChB,GAAK+R,IAAM3V,EAAX,CAAgB2V,EAAI,CAAJ;CAGhB8oF,iBAAkBx+F,CAAlB,EAAwBu+F,YAAa3B,MAAO58F,CAAP,CAAb,CAAyB48F,MAAOj5F,CAAP,CAAzB,CAAqCi5F,MAAOlnF,CAAP,CAArC,CAAxB,CAEA,CAEDgpF,eAAe1nF,IAAf,CAAqBwnF,gBAArB,EACAC,kBAAoBA,kBAAkBxmD,MAAlB,CAA0BumD,gBAA1B,CAApB,CAEA;CAKD,IAAM3xG,EAAI,CAAV,CAAaA,EAAI8uG,aAAjB,CAAgC9uG,GAAhC,CAAuC;CAItCe,EAAIf,EAAI8uG,aAAR,CACAnqG,EAAIiqG,gBAAmB,EAAI7tG,CAAvB,CAAJ;CAGAkvG,GAAKpB,UAAcn4G,KAAK8O,GAAL,CAAWzE,EAAIrK,KAAKsV,EAAT,CAAc,CAAzB,CAAnB;;;CAKA,IAAMmH,EAAI,CAAJ,CAAOD,GAAKwmF,QAAQhiG,MAA1B,CAAkCyb,EAAID,EAAtC,CAA0CC,GAA1C,CAAiD,CAEhD+8F,KAAO4B,SAAUpY,QAASvmF,CAAT,CAAV,CAAwBs+F,iBAAkBt+F,CAAlB,CAAxB,CAA+C88F,EAA/C,CAAP,CAEApoG,EAAGqoG,KAAKr5G,CAAR,CAAWq5G,KAAKxrG,CAAhB,CAAoB,CAAEC,CAAtB,EAEA;CAID,IAAM3D,EAAI,CAAJ,CAAO0+F,GAAKxE,MAAMxjG,MAAxB,CAAgCsJ,EAAI0+F,EAApC,CAAwC1+F,GAAxC,CAA+C,CAE9C+uG,MAAQ7U,MAAOl6F,CAAP,CAAR,CACA2wG,iBAAmBE,eAAgB7wG,CAAhB,CAAnB,CAEA,IAAMmS,EAAI,CAAJ,CAAOD,GAAK68F,MAAMr4G,MAAxB,CAAgCyb,EAAID,EAApC,CAAwCC,GAAxC,CAA+C,CAE9C+8F,KAAO4B,SAAU/B,MAAO58F,CAAP,CAAV,CAAsBw+F,iBAAkBx+F,CAAlB,CAAtB,CAA6C88F,EAA7C,CAAP,CAEApoG,EAAGqoG,KAAKr5G,CAAR,CAAWq5G,KAAKxrG,CAAhB,CAAoB,CAAEC,CAAtB,EAEA,CAED,CAED,CAEDsrG,GAAKpB,SAAL;CAIA,IAAM17F,EAAI,CAAV,CAAaA,EAAIg9F,IAAjB,CAAuBh9F,GAAvB,CAA8B,CAE7B+8F,KAAOnB,aAAe+C,SAAU38F,SAAUhC,CAAV,CAAV,CAAyBy+F,kBAAmBz+F,CAAnB,CAAzB,CAAiD88F,EAAjD,CAAf,CAAuE96F,SAAUhC,CAAV,CAA9E,CAEA,GAAK,CAAEg8F,aAAP,CAAuB,CAEtBtnG,EAAGqoG,KAAKr5G,CAAR,CAAWq5G,KAAKxrG,CAAhB,CAAmB,CAAnB,EAEA,CAJD,IAIO;CAIN4K,OAAOjP,IAAP,CAAaovG,WAAWt0E,OAAX,CAAoB,CAApB,CAAb,EAAuCn3B,cAAvC,CAAuDksG,KAAKr5G,CAA5D,EACAy4G,SAASjvG,IAAT,CAAeovG,WAAWsC,SAAX,CAAsB,CAAtB,CAAf,EAA2C/tG,cAA3C,CAA2DksG,KAAKxrG,CAAhE,EAEA6qG,UAAUlvG,IAAV,CAAgBmvG,WAAY,CAAZ,CAAhB,EAAkC9rG,GAAlC,CAAuC4L,MAAvC,EAAgD5L,GAAhD,CAAqD4rG,QAArD,EAEAznG,EAAG0nG,UAAU14G,CAAb,CAAgB04G,UAAU7qG,CAA1B,CAA6B6qG,UAAU5qG,CAAvC,EAEA,CAED;;CAKD,KAAA,CAEA,IAAM1D,EAAI,CAAV,CAAaA,GAAKguG,KAAlB,CAAyBhuG,GAAzB,CAAgC,CAE/B,IAAMkS,EAAI,CAAV,CAAaA,EAAIg9F,IAAjB,CAAuBh9F,GAAvB,CAA8B,CAE7B+8F,KAAOnB,aAAe+C,SAAU38F,SAAUhC,CAAV,CAAV,CAAyBy+F,kBAAmBz+F,CAAnB,CAAzB,CAAiD88F,EAAjD,CAAf,CAAuE96F,SAAUhC,CAAV,CAA9E,CAEA,GAAK,CAAEg8F,aAAP,CAAuB,CAEtBtnG,EAAGqoG,KAAKr5G,CAAR,CAAWq5G,KAAKxrG,CAAhB,CAAmBiqG,OAASM,KAAT,CAAiBhuG,CAApC,EAEA,CAJD,IAIO;CAINqO,OAAOjP,IAAP,CAAaovG,WAAWt0E,OAAX,CAAoBl6B,CAApB,CAAb,EAAuC+C,cAAvC,CAAuDksG,KAAKr5G,CAA5D,EACAy4G,SAASjvG,IAAT,CAAeovG,WAAWsC,SAAX,CAAsB9wG,CAAtB,CAAf,EAA2C+C,cAA3C,CAA2DksG,KAAKxrG,CAAhE,EAEA6qG,UAAUlvG,IAAV,CAAgBmvG,WAAYvuG,CAAZ,CAAhB,EAAkCyC,GAAlC,CAAuC4L,MAAvC,EAAgD5L,GAAhD,CAAqD4rG,QAArD,EAEAznG,EAAG0nG,UAAU14G,CAAb,CAAgB04G,UAAU7qG,CAA1B,CAA6B6qG,UAAU5qG,CAAvC,EAEA,CAED,CAED;;CAMD,IAAM3E,EAAI8uG,cAAgB,CAA1B,CAA6B9uG,GAAK,CAAlC,CAAqCA,GAArC,CAA4C,CAE3Ce,EAAIf,EAAI8uG,aAAR,CACAnqG,EAAIiqG,gBAAmB,EAAI7tG,CAAvB,CAAJ;CAEAkvG,GAAKpB,UAAYn4G,KAAK8O,GAAL,CAAWzE,EAAIrK,KAAKsV,EAAT,CAAc,CAAzB,CAAjB;CAIA,IAAMmH,EAAI,CAAJ,CAAOD,GAAKwmF,QAAQhiG,MAA1B,CAAkCyb,EAAID,EAAtC,CAA0CC,GAA1C,CAAiD,CAEhD+8F,KAAO4B,SAAUpY,QAASvmF,CAAT,CAAV,CAAwBs+F,iBAAkBt+F,CAAlB,CAAxB,CAA+C88F,EAA/C,CAAP,CACApoG,EAAGqoG,KAAKr5G,CAAR,CAAWq5G,KAAKxrG,CAAhB,CAAoBiqG,OAAShqG,CAA7B,EAEA;CAID,IAAM3D,EAAI,CAAJ,CAAO0+F,GAAKxE,MAAMxjG,MAAxB,CAAgCsJ,EAAI0+F,EAApC,CAAwC1+F,GAAxC,CAA+C,CAE9C+uG,MAAQ7U,MAAOl6F,CAAP,CAAR,CACA2wG,iBAAmBE,eAAgB7wG,CAAhB,CAAnB,CAEA,IAAMmS,EAAI,CAAJ,CAAOD,GAAK68F,MAAMr4G,MAAxB,CAAgCyb,EAAID,EAApC,CAAwCC,GAAxC,CAA+C,CAE9C+8F,KAAO4B,SAAU/B,MAAO58F,CAAP,CAAV,CAAsBw+F,iBAAkBx+F,CAAlB,CAAtB,CAA6C88F,EAA7C,CAAP,CAEA,GAAK,CAAEd,aAAP,CAAuB,CAEtBtnG,EAAGqoG,KAAKr5G,CAAR,CAAWq5G,KAAKxrG,CAAhB,CAAoBiqG,OAAShqG,CAA7B,EAEA,CAJD,IAIO,CAENkD,EAAGqoG,KAAKr5G,CAAR,CAAWq5G,KAAKxrG,CAAL,CAAS8qG,WAAYP,MAAQ,CAApB,EAAwBvqG,CAA5C,CAA+C8qG,WAAYP,MAAQ,CAApB,EAAwBp4G,CAAxB,CAA4B8N,CAA3E,EAEA,CAED,CAED,CAED;CAMDqtG;CAIAC;CAKA,sBAAA,EAAyB,CAExB,GAAKlD,YAAL,CAAoB,CAEnB,UAAY,CAAZ;CACA,WAAaoB,KAAO+B,KAApB;CAIA,IAAM/+F,EAAI,CAAV,CAAaA,EAAIi9F,IAAjB,CAAuBj9F,GAAvB,CAA8B,CAE7BwnB,KAAOhB,MAAOxmB,CAAP,CAAP,CACAg/F,GAAIx3E,KAAM,CAAN,EAAYp2B,MAAhB,CAAwBo2B,KAAM,CAAN,EAAYp2B,MAApC,CAA4Co2B,KAAM,CAAN,EAAYp2B,MAAxD,EAEA,CAED2tG,MAAQjD,MAAQH,cAAgB,CAAhC,CACAvqG,OAAS4rG,KAAO+B,KAAhB;CAIA,IAAM/+F,EAAI,CAAV,CAAaA,EAAIi9F,IAAjB,CAAuBj9F,GAAvB,CAA8B,CAE7BwnB,KAAOhB,MAAOxmB,CAAP,CAAP,CACAg/F,GAAIx3E,KAAM,CAAN,EAAYp2B,MAAhB,CAAwBo2B,KAAM,CAAN,EAAYp2B,MAApC,CAA4Co2B,KAAM,CAAN,EAAYp2B,MAAxD,EAEA,CAED,CA1BD,IA0BO;CAIN,IAAM4O,EAAI,CAAV,CAAaA,EAAIi9F,IAAjB,CAAuBj9F,GAAvB,CAA8B,CAE7BwnB,KAAOhB,MAAOxmB,CAAP,CAAP,CACAg/F,GAAIx3E,KAAM,CAAN,CAAJ,CAAeA,KAAM,CAAN,CAAf,CAA0BA,KAAM,CAAN,CAA1B,EAEA;CAID,IAAMxnB,EAAI,CAAV,CAAaA,EAAIi9F,IAAjB,CAAuBj9F,GAAvB,CAA8B,CAE7BwnB,KAAOhB,MAAOxmB,CAAP,CAAP,CACAg/F,GAAIx3E,KAAM,CAAN,EAAYw1E,KAAOlB,KAAvB,CAA8Bt0E,KAAM,CAAN,EAAYw1E,KAAOlB,KAAjD,CAAwDt0E,KAAM,CAAN,EAAYw1E,KAAOlB,KAA3E,EAEA,CAED,CAED;CAID,uBAAA,EAA0B,CAEzB,gBAAkB,CAAlB,CACAmD,UAAW1Y,OAAX,CAAoB2Y,WAApB,EACAA,aAAe3Y,QAAQhiG,MAAvB,CAEA,IAAMsJ,EAAI,CAAJ,CAAO0+F,GAAKxE,MAAMxjG,MAAxB,CAAgCsJ,EAAI0+F,EAApC,CAAwC1+F,GAAxC,CAA+C,CAE9C+uG,MAAQ7U,MAAOl6F,CAAP,CAAR,CACAoxG,UAAWrC,KAAX,CAAkBsC,WAAlB;CAGAA,aAAetC,MAAMr4G,MAArB,CAEA,CAED,CAED,kBAAA,CAAoBgiG,OAApB,CAA6B2Y,WAA7B,CAA2C,CAE1C,KAAA,CAAOxpF,CAAP,CACA1V,EAAIumF,QAAQhiG,MAAZ,CAEA,MAAQ,EAAGyb,CAAH,EAAQ,CAAhB,CAAoB,CAEnB2D,EAAI3D,CAAJ,CACA0V,EAAI1V,EAAI,CAAR,CACA,GAAK0V,EAAI,CAAT,CAAaA,EAAI6wE,QAAQhiG,MAAR,CAAiB,CAArB;CAIb,MAAQ,CAAR,CAAWwyB,GAAK+kF,MAASH,cAAgB,CAAzC,CAEA,IAAM7tG,EAAI,CAAV,CAAaA,EAAIipB,EAAjB,CAAqBjpB,GAArB,CAA4B,CAE3B,UAAYkvG,KAAOlvG,CAAnB,CACA,UAAYkvG,MAASlvG,EAAI,CAAb,CAAZ,CAEA,MAAQoxG,YAAcv7F,CAAd,CAAkBw7F,KAA1B,CACCtyG,EAAIqyG,YAAcxpF,CAAd,CAAkBypF,KADvB,CAECluG,EAAIiuG,YAAcxpF,CAAd,CAAkB0pF,KAFvB,CAGChlG,EAAI8kG,YAAcv7F,CAAd,CAAkBy7F,KAHvB,CAKAC,GAAIvqG,CAAJ,CAAOjI,CAAP,CAAUoE,CAAV,CAAamJ,CAAb,CAAgBmsF,OAAhB,CAAyBz4F,CAAzB,CAA4BipB,EAA5B,CAAgCpT,CAAhC,CAAmC+R,CAAnC,EAEA,CAED,CAED,CAGD,UAAA,CAAYhyB,CAAZ,CAAe6N,CAAf,CAAkBC,CAAlB,CAAsB,CAErByQ,MAAMD,QAAN,CAAegV,IAAf,CAAqB,UAAU9iB,OAAV,CAAmBxQ,CAAnB,CAAsB6N,CAAtB,CAAyBC,CAAzB,CAArB,EAEA,CAED,WAAA,CAAasD,CAAb,CAAgBjI,CAAhB,CAAmBoE,CAAnB,CAAuB,CAEtB6D,GAAKwqG,YAAL,CACAzyG,GAAKyyG,YAAL,CACAruG,GAAKquG,YAAL,CAEAr9F,MAAMukB,KAAN,CAAYxP,IAAZ,CAAkB,UAAU8M,KAAV,CAAiBhvB,CAAjB,CAAoBjI,CAApB,CAAuBoE,CAAvB,CAA0B,IAA1B,CAAgC,IAAhC,CAAsC,CAAtC,CAAlB,EAEA,QAAUsuG,MAAMC,aAAN,CAAqBv9F,KAArB,CAA4BnN,CAA5B,CAA+BjI,CAA/B,CAAkCoE,CAAlC,CAAV,CAEAgR,MAAMwkB,aAAN,CAAqB,CAArB,EAAyBzP,IAAzB,CAA+BkR,GAA/B,EAEA,CAED,WAAA,CAAapzB,CAAb,CAAgBjI,CAAhB,CAAmBoE,CAAnB,CAAsBmJ,CAAtB,CAAyBqlG,WAAzB,CAAsCC,SAAtC,CAAiDC,WAAjD,CAA8DC,aAA9D,CAA6EC,aAA7E,CAA6F,CAE5F/qG,GAAKwqG,YAAL,CACAzyG,GAAKyyG,YAAL,CACAruG,GAAKquG,YAAL,CACAllG,GAAKklG,YAAL,CAEAr9F,MAAMukB,KAAN,CAAYxP,IAAZ,CAAkB,UAAU8M,KAAV,CAAiBhvB,CAAjB,CAAoBjI,CAApB,CAAuBuN,CAAvB,CAA0B,IAA1B,CAAgC,IAAhC,CAAsC,CAAtC,CAAlB,EACA6H,MAAMukB,KAAN,CAAYxP,IAAZ,CAAkB,UAAU8M,KAAV,CAAiBj3B,CAAjB,CAAoBoE,CAApB,CAAuBmJ,CAAvB,CAA0B,IAA1B,CAAgC,IAAhC,CAAsC,CAAtC,CAAlB,EAEA,QAAUmlG,MAAMO,kBAAN,CAA0B79F,KAA1B,CAAiCnN,CAAjC,CAAoCjI,CAApC,CAAuCoE,CAAvC,CAA0CmJ,CAA1C,CAAV,CAEA6H,MAAMwkB,aAAN,CAAqB,CAArB,EAAyBzP,IAAzB,CAA+B,CAAEkR,IAAK,CAAL,CAAF,CAAYA,IAAK,CAAL,CAAZ,CAAsBA,IAAK,CAAL,CAAtB,CAA/B,EACAjmB,MAAMwkB,aAAN,CAAqB,CAArB,EAAyBzP,IAAzB,CAA+B,CAAEkR,IAAK,CAAL,CAAF,CAAYA,IAAK,CAAL,CAAZ,CAAsBA,IAAK,CAAL,CAAtB,CAA/B,EAEA,CAED,CAxkBD,CA0kBA/kC,MAAMgzG,eAAN,CAAsB+F,gBAAtB,CAAyC,CAExCsD,cAAe,uBAAW19F,QAAX,CAAqBi+F,MAArB,CAA6BC,MAA7B,CAAqCC,MAArC,CAA8C,CAE5D,aAAen+F,SAASE,QAAxB,CAEA,MAAQA,SAAU+9F,MAAV,CAAR,CACA,MAAQ/9F,SAAUg+F,MAAV,CAAR,CACA,MAAQh+F,SAAUi+F,MAAV,CAAR,CAEA,OAAO,CACN,UAAU1oG,OAAV,CAAmBzC,EAAEpR,CAArB,CAAwBoR,EAAEvD,CAA1B,CADM,CAEN,UAAUgG,OAAV,CAAmB1K,EAAEnJ,CAArB,CAAwBmJ,EAAE0E,CAA1B,CAFM,CAGN,UAAUgG,OAAV,CAAmBtG,EAAEvN,CAArB,CAAwBuN,EAAEM,CAA1B,CAHM,CAAP,CAMA,CAhBuC,CAkBxCuuG,mBAAoB,4BAAWh+F,QAAX,CAAqBi+F,MAArB,CAA6BC,MAA7B,CAAqCC,MAArC,CAA6CC,MAA7C,CAAsD,CAEzE,aAAep+F,SAASE,QAAxB,CAEA,MAAQA,SAAU+9F,MAAV,CAAR,CACA,MAAQ/9F,SAAUg+F,MAAV,CAAR,CACA,MAAQh+F,SAAUi+F,MAAV,CAAR,CACA,MAAQj+F,SAAUk+F,MAAV,CAAR,CAEA,GAAK38G,KAAK8Q,GAAL,CAAUS,EAAEvD,CAAF,CAAM1E,EAAE0E,CAAlB,EAAwB,IAA7B,CAAoC,CAEnC,OAAO,CACN,UAAUgG,OAAV,CAAmBzC,EAAEpR,CAArB,CAAwB,EAAIoR,EAAEtD,CAA9B,CADM,CAEN,UAAU+F,OAAV,CAAmB1K,EAAEnJ,CAArB,CAAwB,EAAImJ,EAAE2E,CAA9B,CAFM,CAGN,UAAU+F,OAAV,CAAmBtG,EAAEvN,CAArB,CAAwB,EAAIuN,EAAEO,CAA9B,CAHM,CAIN,UAAU+F,OAAV,CAAmB6C,EAAE1W,CAArB,CAAwB,EAAI0W,EAAE5I,CAA9B,CAJM,CAAP,CAOA,CATD,IASO,CAEN,OAAO,CACN,UAAU+F,OAAV,CAAmBzC,EAAEvD,CAArB,CAAwB,EAAIuD,EAAEtD,CAA9B,CADM,CAEN,UAAU+F,OAAV,CAAmB1K,EAAE0E,CAArB,CAAwB,EAAI1E,EAAE2E,CAA9B,CAFM,CAGN,UAAU+F,OAAV,CAAmBtG,EAAEM,CAArB,CAAwB,EAAIN,EAAEO,CAA9B,CAHM,CAIN,UAAU+F,OAAV,CAAmB6C,EAAE7I,CAArB,CAAwB,EAAI6I,EAAE5I,CAA9B,CAJM,CAAP,CAOA,CAED,CA/CuC,CAAzC;;;;;;;;;;;;;;;KAoEArO,MAAMkzG,aAAN,CAAsB,SAAWzE,MAAX,CAAmB3lD,OAAnB,CAA6B,CAElD9oD,MAAM4e,QAAN,CAAerd,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,eAAZ,CAEA,GAAK4C,MAAMC,OAAN,CAAeiyE,MAAf,IAA4B,KAAjC,CAAyCA,OAAS,CAAEA,MAAF,CAAT,CAEzC,KAAK0J,YAAL,CAAmB1J,MAAnB,CAA2B3lD,OAA3B,EAEA,KAAKzjB,kBAAL,GAEA,CAZD,CAcArlC,MAAMkzG,aAAN,CAAoBzyG,SAApB,CAAgCE,OAAOy2B,MAAP,CAAep3B,MAAM4e,QAAN,CAAene,SAA9B,CAAhC,CACAT,MAAMkzG,aAAN,CAAoBzyG,SAApB,CAA8BoJ,WAA9B,CAA4C7J,MAAMkzG,aAAlD;;IAKAlzG,MAAMkzG,aAAN,CAAoBzyG,SAApB,CAA8B03G,YAA9B,CAA6C,SAAW1J,MAAX,CAAmB3lD,OAAnB,CAA6B,CAEzE,IAAM,MAAQ,CAAR,CAAWl+C,EAAI6jG,OAAOrtG,MAA5B,CAAoCyb,EAAIjS,CAAxC,CAA2CiS,GAA3C,CAAkD,CAEjD,KAAKu7F,QAAL,CAAe3J,OAAQ5xF,CAAR,CAAf,CAA4BisC,OAA5B,EAEA,CAED,WAAA,CAEA,CAVD;;IAeA9oD,MAAMkzG,aAAN,CAAoBzyG,SAApB,CAA8B23G,QAA9B,CAAyC,SAAW7Q,KAAX,CAAkBz+C,OAAlB,CAA4B,CAEpE,GAAKA,UAAY3oD,SAAjB,CAA6B2oD,QAAU,EAAV,CAC7B,kBAAoBA,QAAQ4vD,aAAR,GAA0Bv4G,SAA1B,CAAsC2oD,QAAQ4vD,aAA9C,CAA8D,EAAlF,CAEA,aAAe5vD,QAAQzoB,QAAvB,CACA,UAAYyoB,QAAQgwD,WAAR,GAAwB34G,SAAxB,CAAoCH,MAAMgzG,eAAN,CAAsB+F,gBAA1D,CAA6EjwD,QAAQgwD,WAAjG;CAIA,KAAA,CAAOluG,CAAP,CAAUg9F,IAAV,CAEA,iBAAmB,KAAK/oF,QAAL,CAAczd,MAAjC,CACA,gBAAkBmmG,MAAM+L,aAAN,CAAqBoF,aAArB,CAAlB,CAEA,aAAea,YAAYhS,KAA3B,CACA,UAAYgS,YAAY3U,KAAxB,CAEA,YAAc,CAAE5kG,MAAMmjG,UAAN,CAAiB8G,WAAjB,CAA8BprF,QAA9B,CAAhB,CAEA,GAAK26F,OAAL,CAAe,CAEd36F,SAAWA,SAAS26F,OAAT,EAAX;CAIA,IAAM38F,EAAI,CAAJ,CAAOjS,EAAIg6F,MAAMxjG,MAAvB,CAA+Byb,EAAIjS,CAAnC,CAAsCiS,GAAtC,CAA6C,CAE5C+qF,KAAOhD,MAAO/nF,CAAP,CAAP,CAEA,GAAK7c,MAAMmjG,UAAN,CAAiB8G,WAAjB,CAA8BrC,IAA9B,CAAL,CAA4C,CAE3ChD,MAAO/nF,CAAP,EAAa+qF,KAAK4R,OAAL,EAAb,CAEA,CAED,CAEDA,QAAU,KAAV,CAEA,CAED,UAAYx5G,MAAMmjG,UAAN,CAAiBwB,gBAAjB,CAAmC9lF,QAAnC,CAA6C+lF,KAA7C,CAAZ;CAIA,IAAM/nF,EAAI,CAAJ,CAAOjS,EAAIg6F,MAAMxjG,MAAvB,CAA+Byb,EAAIjS,CAAnC,CAAsCiS,GAAtC,CAA6C,CAE5C+qF,KAAOhD,MAAO/nF,CAAP,CAAP,CACAgC,SAAWA,SAASi2C,MAAT,CAAiB8yC,IAAjB,CAAX,CAEA;CAID,QAAA,CAAUiS,KAAOh7F,SAASzd,MAA1B,CACA,QAAA,CAAU04G,KAAOz2E,MAAMjiC,MAAvB,CAEA,IAAMyb,EAAI,CAAV,CAAaA,EAAIg9F,IAAjB,CAAuBh9F,GAAvB,CAA8B,CAE7B+8F,KAAO/6F,SAAUhC,CAAV,CAAP,CAEA,KAAKgC,QAAL,CAAcgV,IAAd,CAAoB,UAAU9iB,OAAV,CAAmB6oG,KAAKr5G,CAAxB,CAA2Bq5G,KAAKxrG,CAAhC,CAAmC,CAAnC,CAApB,EAEA,CAED,IAAMyO,EAAI,CAAV,CAAaA,EAAIi9F,IAAjB,CAAuBj9F,GAAvB,CAA8B,CAE7BwnB,KAAOhB,MAAOxmB,CAAP,CAAP,CAEA,MAAQwnB,KAAM,CAAN,EAAY83E,YAApB,CACA,MAAQ93E,KAAM,CAAN,EAAY83E,YAApB,CACA,MAAQ93E,KAAM,CAAN,EAAY83E,YAApB,CAEA,KAAK94E,KAAL,CAAWxP,IAAX,CAAiB,UAAU8M,KAAV,CAAiBhvB,CAAjB,CAAoBjI,CAApB,CAAuBoE,CAAvB,CAA0B,IAA1B,CAAgC,IAAhC,CAAsCuyB,QAAtC,CAAjB,EACA,KAAKiD,aAAL,CAAoB,CAApB,EAAwBzP,IAAxB,CAA8BuoF,MAAMC,aAAN,CAAqB,IAArB,CAA2B1qG,CAA3B,CAA8BjI,CAA9B,CAAiCoE,CAAjC,CAA9B,EAEA,CAED,CA/ED;;;;;;;;;CA8FA9N,MAAMg9G,mBAAN,CAA4B,SAAWtgG,MAAX,CAAmB07C,QAAnB,CAA6BO,QAA7B,CAAuCC,SAAvC,CAAmD,CAE9E54D,MAAM+e,cAAN,CAAqBxd,IAArB,CAA2B,IAA3B,EAEA,KAAKo4B,IAAL,CAAY,qBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB5rB,OAAQA,MADS,CAEjB07C,SAAUA,QAFO,CAGjBO,SAAUA,QAHO,CAIjBC,UAAWA,SAJM,CAAlB,CAOAR,SAAWh4D,KAAKiK,KAAL,CAAY+tD,QAAZ,GAA0B,EAArC,CACAO,SAAWA,UAAY,CAAvB,CACAC,UAAYA,WAAax4D,KAAKsV,EAAL,CAAU,CAAnC;CAGAkjD,UAAY54D,MAAMI,IAAN,CAAW0K,KAAX,CAAkB8tD,SAAlB,CAA6B,CAA7B,CAAgCx4D,KAAKsV,EAAL,CAAU,CAA1C,CAAZ;CAGA,gBAAkB,CAAE0iD,SAAW,CAAb,EAAmB17C,OAAOtb,MAA5C,CACA,eAAiBg3D,SAAW17C,OAAOtb,MAAlB,CAA2B,CAA3B,CAA+B,CAAhD;CAGA,YAAc,UAAU2/B,eAAV,CAA2B,IAAMo0E,WAAa,KAAb,CAAqB3pE,WAArB,CAAmCC,WAAzC,EAAwD0pE,UAAxD,CAA3B,CAAkG,CAAlG,CAAd,CACA,aAAe,UAAUp0E,eAAV,CAA2B,gBAAA,CAAkBq0E,YAAc,CAAhC,CAA3B,CAAgE,CAAhE,CAAf,CACA,QAAU,UAAUr0E,eAAV,CAA2B,gBAAA,CAAkBq0E,YAAc,CAAhC,CAA3B,CAAgE,CAAhE,CAAV;CAGA,UAAY,CAAZ,CAAe3U,YAAc,CAA7B,CAAgCwc,IAAhC,CACA,uBAAyB,KAAQvgG,OAAOtb,MAAP,CAAgB,CAAxB,CAAzB,CACA,oBAAsB,IAAMg3D,QAA5B,CACA,WAAa,UAAUrnD,OAAV,EAAb,CACA,OAAS,UAAUqD,OAAV,EAAT,CACA,KAAA,CAAOoM,CAAP;CAIA,IAAM3D,EAAI,CAAV,CAAaA,GAAKu7C,QAAlB,CAA4Bv7C,GAA5B,CAAmC,CAElC,QAAU87C,SAAW97C,EAAIqgG,eAAJ,CAAsBtkD,SAA3C,CAEA,QAAUx4D,KAAK8O,GAAL,CAAUoK,GAAV,CAAV,CACA,QAAUlZ,KAAK6O,GAAL,CAAUqK,GAAV,CAAV,CAEA,IAAMkH,EAAI,CAAV,CAAaA,GAAO9D,OAAOtb,MAAP,CAAgB,CAApC,CAAyCof,GAAzC,CAAgD;CAG/C4jB,OAAO7jC,CAAP,CAAWmc,OAAQ8D,CAAR,EAAYjgB,CAAZ,CAAgB2O,GAA3B,CACAk1B,OAAOh2B,CAAP,CAAWsO,OAAQ8D,CAAR,EAAYpS,CAAvB,CACAg2B,OAAO/1B,CAAP,CAAWqO,OAAQ8D,CAAR,EAAYjgB,CAAZ,CAAgB0O,GAA3B,CACA4P,SAASiC,MAAT,CAAiB5f,KAAjB,CAAwBkjC,OAAO7jC,CAA/B,CAAkC6jC,OAAOh2B,CAAzC,CAA4Cg2B,OAAO/1B,CAAnD;CAGAq2B,GAAGnkC,CAAH,CAAOsc,EAAIu7C,QAAX,CACA1zB,GAAGt2B,CAAH,CAAOoS,GAAM9D,OAAOtb,MAAP,CAAgB,CAAtB,CAAP,CACA2jC,IAAI7C,KAAJ,CAAWhhC,KAAX,CAAkBwjC,GAAGnkC,CAArB,CAAwBmkC,GAAGt2B,CAA3B;CAGAlN,QAEA,CAED;CAID,IAAM2b,EAAI,CAAV,CAAaA,EAAIu7C,QAAjB,CAA2Bv7C,GAA3B,CAAkC,CAEjC,IAAM2D,EAAI,CAAV,CAAaA,EAAM9D,OAAOtb,MAAP,CAAgB,CAAnC,CAAwCof,GAAxC,CAA+C,CAE9Cy8F,KAAOz8F,EAAI3D,EAAIH,OAAOtb,MAAtB;CAGA,MAAQ67G,IAAR,CACA,MAAQA,KAAOvgG,OAAOtb,MAAtB,CACA,MAAQ67G,KAAOvgG,OAAOtb,MAAd,CAAuB,CAA/B,CACA,MAAQ67G,KAAO,CAAf;CAGAr7E,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B9uF,CAA3B,EAAgC8uF,cAChC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B/2F,CAA3B,EAAgC+2F,cAChC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2BxpF,CAA3B,EAAgCwpF;CAGhC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B/2F,CAA3B,EAAgC+2F,cAChC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B3yF,CAA3B,EAAgC2yF,cAChC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2BxpF,CAA3B,EAAgCwpF,cAEhC,CAED;CAID,KAAK91D,QAAL,CAAe/I,OAAf,EACA,KAAKgJ,YAAL,CAAmB,UAAnB,CAA+B/rB,QAA/B,EACA,KAAK+rB,YAAL,CAAmB,IAAnB,CAAyB7F,GAAzB;CAIA,KAAKa,oBAAL;;CAKA,GAAIgzB,YAAcx4D,KAAKsV,EAAL,CAAU,CAA5B,CAAgC,CAE/B,YAAc,KAAKsJ,UAAL,CAAgBhG,MAAhB,CAAuBhL,KAArC,CACA,OAAS,UAAU+C,OAAV,EAAT,CACA,OAAS,UAAUA,OAAV,EAAT,CACA,MAAQ,UAAUA,OAAV,EAAR;CAGAksG,KAAO7kD,SAAW17C,OAAOtb,MAAlB,CAA2B,CAAlC,CAEA,IAAKyb,EAAI,CAAJ,CAAO2D,EAAI,CAAhB,CAAmB3D,EAAIH,OAAOtb,MAA9B,CAAsCyb,IAAM2D,GAAK,CAAjD,CAAqD;CAGpD28F,GAAG58G,CAAH,CAAOskC,QAASrkB,EAAI,CAAb,CAAP,CACA28F,GAAG/uG,CAAH,CAAOy2B,QAASrkB,EAAI,CAAb,CAAP,CACA28F,GAAG9uG,CAAH,CAAOw2B,QAASrkB,EAAI,CAAb,CAAP;CAGA48F,GAAG78G,CAAH,CAAOskC,QAASo4E,KAAOz8F,CAAP,CAAW,CAApB,CAAP,CACA48F,GAAGhvG,CAAH,CAAOy2B,QAASo4E,KAAOz8F,CAAP,CAAW,CAApB,CAAP,CACA48F,GAAG/uG,CAAH,CAAOw2B,QAASo4E,KAAOz8F,CAAP,CAAW,CAApB,CAAP;CAGA4D,EAAE3P,UAAF,CAAc0oG,EAAd,CAAkBC,EAAlB,EAAuBhsG,SAAvB;CAGAyzB,QAASrkB,EAAI,CAAb,EAAmBqkB,QAASo4E,KAAOz8F,CAAP,CAAW,CAApB,EAA0B4D,EAAE7jB,CAA/C,CACAskC,QAASrkB,EAAI,CAAb,EAAmBqkB,QAASo4E,KAAOz8F,CAAP,CAAW,CAApB,EAA0B4D,EAAEhW,CAA/C,CACAy2B,QAASrkB,EAAI,CAAb,EAAmBqkB,QAASo4E,KAAOz8F,CAAP,CAAW,CAApB,EAA0B4D,EAAE/V,CAA/C,CAEA;CAED,CAED,CA7ID,CA+IArO,MAAMg9G,mBAAN,CAA0Bv8G,SAA1B,CAAsCE,OAAOy2B,MAAP,CAAep3B,MAAM+e,cAAN,CAAqBte,SAApC,CAAtC,CACAT,MAAMg9G,mBAAN,CAA0Bv8G,SAA1B,CAAoCoJ,WAApC,CAAkD7J,MAAMg9G,mBAAxD;;;;;;;;;;;CAiBAh9G,MAAMq9G,aAAN,CAAsB,SAAW3gG,MAAX,CAAmB07C,QAAnB,CAA6BO,QAA7B,CAAuCC,SAAvC,CAAmD,CAExE54D,MAAM4e,QAAN,CAAerd,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,eAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB5rB,OAAQA,MADS,CAEjB07C,SAAUA,QAFO,CAGjBO,SAAUA,QAHO,CAIjBC,UAAWA,SAJM,CAAlB,CAOA,KAAKn0B,kBAAL,CAAyB,UAAUu4E,mBAAV,CAA+BtgG,MAA/B,CAAuC07C,QAAvC,CAAiDO,QAAjD,CAA2DC,SAA3D,CAAzB,EACA,KAAKpxB,aAAL,GAEA,CAhBD,CAkBAxnC,MAAMq9G,aAAN,CAAoB58G,SAApB,CAAgCE,OAAOy2B,MAAP,CAAep3B,MAAM4e,QAAN,CAAene,SAA9B,CAAhC,CACAT,MAAMq9G,aAAN,CAAoB58G,SAApB,CAA8BoJ,WAA9B,CAA4C7J,MAAMq9G,aAAlD;;;;IASAr9G,MAAMs9G,aAAN,CAAsB,SAAW5yD,KAAX,CAAkBC,MAAlB,CAA0BqN,aAA1B,CAAyCC,cAAzC,CAA0D,CAE/Ej4D,MAAM4e,QAAN,CAAerd,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,eAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjBoiB,MAAOA,KADU,CAEjBC,OAAQA,MAFS,CAGjBqN,cAAeA,aAHE,CAIjBC,eAAgBA,cAJC,CAAlB,CAOA,KAAKxzB,kBAAL,CAAyB,UAAU84E,mBAAV,CAA+B7yD,KAA/B,CAAsCC,MAAtC,CAA8CqN,aAA9C,CAA6DC,cAA7D,CAAzB,EAEA,CAfD,CAiBAj4D,MAAMs9G,aAAN,CAAoB78G,SAApB,CAAgCE,OAAOy2B,MAAP,CAAep3B,MAAM4e,QAAN,CAAene,SAA9B,CAAhC,CACAT,MAAMs9G,aAAN,CAAoB78G,SAApB,CAA8BoJ,WAA9B,CAA4C7J,MAAMs9G,aAAlD;;;;IASAt9G,MAAMu9G,mBAAN,CAA4B,SAAW7yD,KAAX,CAAkBC,MAAlB,CAA0BqN,aAA1B,CAAyCC,cAAzC,CAA0D,CAErFj4D,MAAM+e,cAAN,CAAqBxd,IAArB,CAA2B,IAA3B,EAEA,KAAKo4B,IAAL,CAAY,qBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjBoiB,MAAOA,KADU,CAEjBC,OAAQA,MAFS,CAGjBqN,cAAeA,aAHE,CAIjBC,eAAgBA,cAJC,CAAlB,CAOA,eAAiBvN,MAAQ,CAAzB,CACA,gBAAkBC,OAAS,CAA3B,CAEA,UAAYvqD,KAAKiK,KAAL,CAAY2tD,aAAZ,GAA+B,CAA3C,CACA,UAAY53D,KAAKiK,KAAL,CAAY4tD,cAAZ,GAAgC,CAA5C,CAEA,WAAau9C,MAAQ,CAArB,CACA,WAAaC,MAAQ,CAArB,CAEA,kBAAoB/qD,MAAQ8qD,KAA5B,CACA,mBAAqB7qD,OAAS8qD,KAA9B,CAEA,aAAe,gBAAA,CAAkBI,OAASH,MAAT,CAAkB,CAApC,CAAf,CACA,YAAc,gBAAA,CAAkBG,OAASH,MAAT,CAAkB,CAApC,CAAd,CACA,QAAU,gBAAA,CAAkBG,OAASH,MAAT,CAAkB,CAApC,CAAV,CAEA,WAAa,CAAb,CACA,YAAc,CAAd,CAEA,IAAM,OAAS,CAAf,CAAkBl+F,GAAKk+F,MAAvB,CAA+Bl+F,IAA/B,CAAuC,CAEtC,MAAQA,GAAKgmG,cAAL,CAAsBC,WAA9B,CAEA,IAAM,OAAS,CAAf,CAAkBnmG,GAAKu+F,MAAvB,CAA+Bv+F,IAA/B,CAAuC,CAEtC,MAAQA,GAAKomG,aAAL,CAAqBC,UAA7B,CAEA9+F,SAAU5Q,MAAV,EAAqB1N,CAArB,CACAse,SAAU5Q,OAAS,CAAnB,EAAyB,CAAEG,CAA3B,CAEAy2B,QAAS52B,OAAS,CAAlB,EAAwB,CAAxB,CAEA82B,IAAK64E,OAAL,EAAiBtmG,GAAKk+F,KAAtB,CACAzwE,IAAK64E,QAAU,CAAf,EAAqB,EAAMpmG,GAAKi+F,KAAhC,CAEAxnG,QAAU,CAAV,CACA2vG,SAAW,CAAX,CAEA,CAED,CAED3vG,OAAS,CAAT,CAEA,YAAc,IAAQ4Q,SAASzd,MAAT,CAAkB,CAApB,CAA0B,KAA1B,CAAkCoqC,WAAlC,CAAgDC,WAAtD,EAAqE+pE,MAAQC,KAAR,CAAgB,CAArF,CAAd,CAEA,IAAM,OAAS,CAAf,CAAkBj+F,GAAKi+F,KAAvB,CAA8Bj+F,IAA9B,CAAsC,CAErC,IAAM,OAAS,CAAf,CAAkBF,GAAKk+F,KAAvB,CAA8Bl+F,IAA9B,CAAsC,CAErC,MAAQA,GAAKu+F,OAASr+F,EAAtB,CACA,MAAQF,GAAKu+F,QAAWr+F,GAAK,CAAhB,CAAb,CACA,MAAUF,GAAK,CAAP,CAAau+F,QAAWr+F,GAAK,CAAhB,CAArB,CACA,MAAUF,GAAK,CAAP,CAAau+F,OAASr+F,EAA9B,CAEAoqB,QAAS3zB,MAAT,EAAoB0D,CAApB,CACAiwB,QAAS3zB,OAAS,CAAlB,EAAwBvE,CAAxB,CACAk4B,QAAS3zB,OAAS,CAAlB,EAAwBgJ,CAAxB,CAEA2qB,QAAS3zB,OAAS,CAAlB,EAAwBvE,CAAxB,CACAk4B,QAAS3zB,OAAS,CAAlB,EAAwBH,CAAxB,CACA8zB,QAAS3zB,OAAS,CAAlB,EAAwBgJ,CAAxB,CAEAhJ,QAAU,CAAV,CAEA,CAED,CAED,KAAK08B,QAAL,CAAe,UAAU5J,eAAV,CAA2Ba,OAA3B,CAAoC,CAApC,CAAf,EACA,KAAKgJ,YAAL,CAAmB,UAAnB,CAA+B,UAAU7J,eAAV,CAA2BliB,QAA3B,CAAqC,CAArC,CAA/B,EACA,KAAK+rB,YAAL,CAAmB,QAAnB,CAA6B,UAAU7J,eAAV,CAA2B8D,OAA3B,CAAoC,CAApC,CAA7B,EACA,KAAK+F,YAAL,CAAmB,IAAnB,CAAyB,UAAU7J,eAAV,CAA2BgE,GAA3B,CAAgC,CAAhC,CAAzB,EAEA,CAvFD,CAyFA/kC,MAAMu9G,mBAAN,CAA0B98G,SAA1B,CAAsCE,OAAOy2B,MAAP,CAAep3B,MAAM+e,cAAN,CAAqBte,SAApC,CAAtC,CACAT,MAAMu9G,mBAAN,CAA0B98G,SAA1B,CAAoCoJ,WAApC,CAAkD7J,MAAMu9G,mBAAxD;;;IAQAv9G,MAAM69G,kBAAN,CAA2B,SAAW/kD,WAAX,CAAwBC,WAAxB,CAAqCC,aAArC,CAAoDC,WAApD,CAAiEZ,UAAjE,CAA6EC,WAA7E,CAA2F,CAErHt4D,MAAM+e,cAAN,CAAqBxd,IAArB,CAA2B,IAA3B,EAEA,KAAKo4B,IAAL,CAAY,oBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjBwwB,YAAaA,WADI,CAEjBC,YAAaA,WAFI,CAGjBC,cAAeA,aAHE,CAIjBC,YAAaA,WAJI,CAKjBZ,WAAYA,UALK,CAMjBC,YAAaA,WANI,CAAlB,CASAQ,YAAcA,aAAe,EAA7B,CACAC,YAAcA,aAAe,EAA7B,CAEAV,WAAaA,aAAel4D,SAAf,CAA2Bk4D,UAA3B,CAAwC,CAArD,CACAC,YAAcA,cAAgBn4D,SAAhB,CAA4Bm4D,WAA5B,CAA0Cl4D,KAAKsV,EAAL,CAAU,CAAlE,CAEAsjD,cAAgBA,gBAAkB74D,SAAlB,CAA8BC,KAAKwM,GAAL,CAAU,CAAV,CAAaosD,aAAb,CAA9B,CAA6D,CAA7E,CACAC,YAAcA,cAAgB94D,SAAhB,CAA4BC,KAAKwM,GAAL,CAAU,CAAV,CAAaqsD,WAAb,CAA5B,CAAyD,CAAvE;CAGA,gBAAkB,CAAED,cAAgB,CAAlB,GAA0BC,YAAc,CAAxC,CAAlB,CACA,eAAiBD,cAAgBC,WAAhB,CAA8B,CAA9B,CAAkC,CAAnD;CAGA,YAAc,UAAUl4B,eAAV,CAA2B,IAAMo0E,WAAa,KAAb,CAAqB3pE,WAArB,CAAmCC,WAAzC,EAAwD0pE,UAAxD,CAA3B,CAAkG,CAAlG,CAAd,CACA,aAAe,UAAUp0E,eAAV,CAA2B,gBAAA,CAAkBq0E,YAAc,CAAhC,CAA3B,CAAgE,CAAhE,CAAf,CACA,YAAc,UAAUr0E,eAAV,CAA2B,gBAAA,CAAkBq0E,YAAc,CAAhC,CAA3B,CAAgE,CAAhE,CAAd,CACA,QAAU,UAAUr0E,eAAV,CAA2B,gBAAA,CAAkBq0E,YAAc,CAAhC,CAA3B,CAAgE,CAAhE,CAAV;CAGA,UAAY,CAAZ,CAAe3U,YAAc,CAA7B,CAAgCgW,OAAhC,CACA,WAAa39C,WAAb,CACA,eAAmB,CAAEC,YAAcD,WAAhB,EAAgCG,WAAnD,CACA,WAAa,UAAUloD,OAAV,EAAb,CACA,OAAS,UAAUqD,OAAV,EAAT,CACA,KAAA,CAAOyI,CAAP;;CAMA,IAAM2D,EAAI,CAAV,CAAaA,GAAKy4C,WAAlB,CAA+Bz4C,GAA/B,CAAsC,CAErC,IAAM3D,EAAI,CAAV,CAAaA,GAAKm8C,aAAlB,CAAiCn8C,GAAjC,CAAwC,CAEvC45F,QAAUp+C,WAAax7C,EAAIm8C,aAAJ,CAAoBV,WAA3C;CAGAl0B,OAAO7jC,CAAP,CAAWgZ,OAASnZ,KAAK6O,GAAL,CAAUwnG,OAAV,CAApB,CACAryE,OAAOh2B,CAAP,CAAWmL,OAASnZ,KAAK8O,GAAL,CAAUunG,OAAV,CAApB,CACA53F,SAASiC,MAAT,CAAiB5f,KAAjB,CAAwBkjC,OAAO7jC,CAA/B,CAAkC6jC,OAAOh2B,CAAzC,CAA4Cg2B,OAAO/1B,CAAnD;CAGAw2B,QAAQ/jB,MAAR,CAAgB5f,KAAhB,CAAuB,CAAvB,CAA0B,CAA1B,CAA6B,CAA7B;CAGAwjC,GAAGnkC,CAAH,CAAO,CAAE6jC,OAAO7jC,CAAP,CAAWw4D,WAAX,CAAyB,CAA3B,EAAiC,CAAxC,CACAr0B,GAAGt2B,CAAH,CAAO,CAAEg2B,OAAOh2B,CAAP,CAAW2qD,WAAX,CAAyB,CAA3B,EAAiC,CAAxC,CACAh0B,IAAI7C,KAAJ,CAAWhhC,KAAX,CAAkBwjC,GAAGnkC,CAArB,CAAwBmkC,GAAGt2B,CAA3B;CAGAlN,QAEA;CAGDqY,QAAUukG,UAAV,CAEA;CAID,IAAMt9F,EAAI,CAAV,CAAaA,EAAIy4C,WAAjB,CAA8Bz4C,GAA9B,CAAqC,CAEpC,sBAAwBA,GAAMw4C,cAAgB,CAAtB,CAAxB,CAEA,IAAMn8C,EAAI,CAAV,CAAaA,EAAIm8C,aAAjB,CAAgCn8C,GAAhC,CAAuC,CAEtC45F,QAAU55F,EAAIkhG,iBAAd;CAGA,MAAQtH,OAAR,CACA,MAAQA,QAAUz9C,aAAV,CAA0B,CAAlC,CACA,MAAQy9C,QAAUz9C,aAAV,CAA0B,CAAlC,CACA,MAAQy9C,QAAU,CAAlB;CAGA70E,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B9uF,CAA3B,EAAgC8uF,cAChC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B/2F,CAA3B,EAAgC+2F,cAChC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B3yF,CAA3B,EAAgC2yF;CAGhC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B9uF,CAA3B,EAAgC8uF,cAChC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B3yF,CAA3B,EAAgC2yF,cAChC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2BxpF,CAA3B,EAAgCwpF,cAEhC,CAED;CAID,KAAK91D,QAAL,CAAe/I,OAAf,EACA,KAAKgJ,YAAL,CAAmB,UAAnB,CAA+B/rB,QAA/B,EACA,KAAK+rB,YAAL,CAAmB,QAAnB,CAA6B/F,OAA7B,EACA,KAAK+F,YAAL,CAAmB,IAAnB,CAAyB7F,GAAzB,EAEA,CAhHD,CAkHA/kC,MAAM69G,kBAAN,CAAyBp9G,SAAzB,CAAqCE,OAAOy2B,MAAP,CAAep3B,MAAM+e,cAAN,CAAqBte,SAApC,CAArC,CACAT,MAAM69G,kBAAN,CAAyBp9G,SAAzB,CAAmCoJ,WAAnC,CAAiD7J,MAAM69G,kBAAvD;;;IAQA79G,MAAMg+G,YAAN,CAAqB,SAAWllD,WAAX,CAAwBC,WAAxB,CAAqCC,aAArC,CAAoDC,WAApD,CAAiEZ,UAAjE,CAA6EC,WAA7E,CAA2F,CAE/Gt4D,MAAM4e,QAAN,CAAerd,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,cAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjBwwB,YAAaA,WADI,CAEjBC,YAAaA,WAFI,CAGjBC,cAAeA,aAHE,CAIjBC,YAAaA,WAJI,CAKjBZ,WAAYA,UALK,CAMjBC,YAAaA,WANI,CAAlB,CASA,KAAK7zB,kBAAL,CAAyB,UAAUo5E,kBAAV,CAA8B/kD,WAA9B,CAA2CC,WAA3C,CAAwDC,aAAxD,CAAuEC,WAAvE,CAAoFZ,UAApF,CAAgGC,WAAhG,CAAzB,EAEA,CAjBD,CAmBAt4D,MAAMg+G,YAAN,CAAmBv9G,SAAnB,CAA+BE,OAAOy2B,MAAP,CAAep3B,MAAM4e,QAAN,CAAene,SAA9B,CAA/B,CACAT,MAAMg+G,YAAN,CAAmBv9G,SAAnB,CAA6BoJ,WAA7B,CAA2C7J,MAAMg+G,YAAjD;;;IAQAh+G,MAAMi+G,cAAN,CAAuB,SAAW1kG,MAAX,CAAmBy+C,aAAnB,CAAkCC,cAAlC,CAAkDU,QAAlD,CAA4DC,SAA5D,CAAuEP,UAAvE,CAAmFC,WAAnF,CAAiG,CAEvHt4D,MAAM4e,QAAN,CAAerd,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,gBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB/uB,OAAQA,MADS,CAEjBy+C,cAAeA,aAFE,CAGjBC,eAAgBA,cAHC,CAIjBU,SAAUA,QAJO,CAKjBC,UAAWA,SALM,CAMjBP,WAAYA,UANK,CAOjBC,YAAaA,WAPI,CAAlB,CAUA,KAAK7zB,kBAAL,CAAyB,UAAUy5E,oBAAV,CAAgC3kG,MAAhC,CAAwCy+C,aAAxC,CAAuDC,cAAvD,CAAuEU,QAAvE,CAAiFC,SAAjF,CAA4FP,UAA5F,CAAwGC,WAAxG,CAAzB,EAEA,CAlBD,CAoBAt4D,MAAMi+G,cAAN,CAAqBx9G,SAArB,CAAiCE,OAAOy2B,MAAP,CAAep3B,MAAM4e,QAAN,CAAene,SAA9B,CAAjC,CACAT,MAAMi+G,cAAN,CAAqBx9G,SAArB,CAA+BoJ,WAA/B,CAA6C7J,MAAMi+G,cAAnD;;;;IASAj+G,MAAMk+G,oBAAN,CAA6B,SAAW3kG,MAAX,CAAmBy+C,aAAnB,CAAkCC,cAAlC,CAAkDU,QAAlD,CAA4DC,SAA5D,CAAuEP,UAAvE,CAAmFC,WAAnF,CAAiG,CAE7Ht4D,MAAM+e,cAAN,CAAqBxd,IAArB,CAA2B,IAA3B,EAEA,KAAKo4B,IAAL,CAAY,sBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB/uB,OAAQA,MADS,CAEjBy+C,cAAeA,aAFE,CAGjBC,eAAgBA,cAHC,CAIjBU,SAAUA,QAJO,CAKjBC,UAAWA,SALM,CAMjBP,WAAYA,UANK,CAOjBC,YAAaA,WAPI,CAAlB,CAUA/+C,OAASA,QAAU,EAAnB,CAEAy+C,cAAgB53D,KAAKwM,GAAL,CAAU,CAAV,CAAaxM,KAAKiK,KAAL,CAAY2tD,aAAZ,GAA+B,CAA5C,CAAhB,CACAC,eAAiB73D,KAAKwM,GAAL,CAAU,CAAV,CAAaxM,KAAKiK,KAAL,CAAY4tD,cAAZ,GAAgC,CAA7C,CAAjB,CAEAU,SAAWA,WAAax4D,SAAb,CAAyBw4D,QAAzB,CAAoC,CAA/C,CACAC,UAAYA,YAAcz4D,SAAd,CAA0By4D,SAA1B,CAAsCx4D,KAAKsV,EAAL,CAAU,CAA5D,CAEA2iD,WAAaA,aAAel4D,SAAf,CAA2Bk4D,UAA3B,CAAwC,CAArD,CACAC,YAAcA,cAAgBn4D,SAAhB,CAA4Bm4D,WAA5B,CAA0Cl4D,KAAKsV,EAA7D,CAEA,aAAe2iD,WAAaC,WAA5B,CAEA,gBAAoB,CAAEN,cAAgB,CAAlB,GAA0BC,eAAiB,CAA3C,CAApB,CAEA,cAAgB,UAAUl3B,eAAV,CAA2B,gBAAA,CAAkBq0E,YAAc,CAAhC,CAA3B,CAAgE,CAAhE,CAAhB,CACA,YAAc,UAAUr0E,eAAV,CAA2B,gBAAA,CAAkBq0E,YAAc,CAAhC,CAA3B,CAAgE,CAAhE,CAAd,CACA,QAAU,UAAUr0E,eAAV,CAA2B,gBAAA,CAAkBq0E,YAAc,CAAhC,CAA3B,CAAgE,CAAhE,CAAV,CAEA,UAAY,CAAZ,CAAev2F,SAAW,EAA1B,CAA8B7F,OAAS,UAAUjI,OAAV,EAAvC,CAEA,IAAM,MAAQ,CAAd,CAAiB3C,GAAK6pD,cAAtB,CAAsC7pD,GAAtC,CAA6C,CAE5C,gBAAkB,EAAlB,CAEA,MAAQA,EAAI6pD,cAAZ,CAEA,IAAM,MAAQ,CAAd,CAAiB13D,GAAKy3D,aAAtB,CAAqCz3D,GAArC,CAA4C,CAE3C,MAAQA,EAAIy3D,aAAZ,CAEA,OAAS,CAAEz+C,MAAF,CAAWnZ,KAAK6O,GAAL,CAAU0pD,SAAWjkC,EAAIkkC,SAAzB,CAAX,CAAkDx4D,KAAK8O,GAAL,CAAUmpD,WAAa9mD,EAAI+mD,WAA3B,CAA3D,CACA,OAAS/+C,OAASnZ,KAAK6O,GAAL,CAAUopD,WAAa9mD,EAAI+mD,WAA3B,CAAlB,CACA,OAAS/+C,OAASnZ,KAAK8O,GAAL,CAAUypD,SAAWjkC,EAAIkkC,SAAzB,CAAT,CAAgDx4D,KAAK8O,GAAL,CAAUmpD,WAAa9mD,EAAI+mD,WAA3B,CAAzD,CAEAt/C,OAAOrP,GAAP,CAAY45F,EAAZ,CAAgBC,EAAhB,CAAoByQ,EAApB,EAAyB7iG,SAAzB,GAEA6N,UAAU6B,MAAV,CAAkB5f,KAAlB,CAAyBqiG,EAAzB,CAA6BC,EAA7B,CAAiCyQ,EAAjC,EACApvE,QAAQ/jB,MAAR,CAAgB5f,KAAhB,CAAuB8X,OAAOzY,CAA9B,CAAiCyY,OAAO5K,CAAxC,CAA2C4K,OAAO3K,CAAlD,EACA02B,IAAI7C,KAAJ,CAAWhhC,KAAX,CAAkBwzB,CAAlB,CAAqB,EAAInjB,CAAzB,EAEA4sG,YAAYtqF,IAAZ,CAAkB3yB,KAAlB,EAEAA,QAEA,CAED2d,SAASgV,IAAT,CAAesqF,WAAf,EAEA,CAED,YAAc,EAAd,CAEA,IAAM,MAAQ,CAAd,CAAiB/vG,EAAI6pD,cAArB,CAAqC7pD,GAArC,CAA4C,CAE3C,IAAM,MAAQ,CAAd,CAAiB7N,EAAIy3D,aAArB,CAAoCz3D,GAApC,CAA2C,CAE1C,OAASse,SAAUzQ,CAAV,EAAe7N,EAAI,CAAnB,CAAT,CACA,OAASse,SAAUzQ,CAAV,EAAe7N,CAAf,CAAT,CACA,OAASse,SAAUzQ,EAAI,CAAd,EAAmB7N,CAAnB,CAAT,CACA,OAASse,SAAUzQ,EAAI,CAAd,EAAmB7N,EAAI,CAAvB,CAAT,CAEA,GAAK6N,IAAM,CAAN,EAAWiqD,WAAa,CAA7B,CAAiCz2B,QAAQ/N,IAAR,CAAc/iB,EAAd,CAAkBmF,EAAlB,CAAsBmoG,EAAtB,EACjC,GAAKhwG,IAAM6pD,eAAiB,CAAvB,EAA4BomD,SAAWj+G,KAAKsV,EAAjD,CAAsDksB,QAAQ/N,IAAR,CAAc5d,EAAd,CAAkB2b,EAAlB,CAAsBwsF,EAAtB,EAEtD,CAED,CAED,KAAKzzE,QAAL,CAAe,IAAM1rB,UAAUkiB,KAAV,CAAkB,KAAlB,CAA0BnhC,MAAM0iC,eAAhC,CAAkD1iC,MAAMwiC,eAA9D,EAAiFZ,OAAjF,CAA0F,CAA1F,CAAf,EACA,KAAKgJ,YAAL,CAAmB,UAAnB,CAA+B3rB,SAA/B,EACA,KAAK2rB,YAAL,CAAmB,QAAnB,CAA6B/F,OAA7B,EACA,KAAK+F,YAAL,CAAmB,IAAnB,CAAyB7F,GAAzB,EAEA,KAAK5W,cAAL,CAAsB,UAAU1O,MAAV,CAAkB,UAAU1O,OAAV,EAAlB,CAAuCwI,MAAvC,CAAtB,CAEA,CA5FD,CA8FAvZ,MAAMk+G,oBAAN,CAA2Bz9G,SAA3B,CAAuCE,OAAOy2B,MAAP,CAAep3B,MAAM+e,cAAN,CAAqBte,SAApC,CAAvC,CACAT,MAAMk+G,oBAAN,CAA2Bz9G,SAA3B,CAAqCoJ,WAArC,CAAmD7J,MAAMk+G,oBAAzD;;;;;;;;;;;;;;;;;;IAuBAl+G,MAAMs+G,YAAN,CAAqB,SAAWvrD,IAAX,CAAiBzqB,UAAjB,CAA8B,CAElDA,WAAaA,YAAc,EAA3B,CAEA,SAAWA,WAAW2qB,IAAtB,CAEA,GAAKA,sBAAsBC,IAAtB,GAA+B,KAApC,CAA4C,CAE3C/nD,QAAQuL,KAAR,CAAe,sEAAf,EACA,iBAAiBkI,QAAV,EAAP,CAEA,CAED,WAAaq0C,KAAKi6C,cAAL,CAAqBn6C,IAArB,CAA2BzqB,WAAW18B,IAAtC,CAA4C08B,WAAWowE,aAAvD,CAAb;CAIApwE,WAAW+vE,MAAX,CAAoB/vE,WAAWqiB,MAAX,GAAsBxqD,SAAtB,CAAkCmoC,WAAWqiB,MAA7C,CAAsD,EAA1E;CAIA,GAAKriB,WAAWgwE,cAAX,GAA8Bn4G,SAAnC,CAA+CmoC,WAAWgwE,cAAX,CAA4B,EAA5B,CAC/C,GAAKhwE,WAAWiwE,SAAX,GAAyBp4G,SAA9B,CAA0CmoC,WAAWiwE,SAAX,CAAuB,CAAvB,CAC1C,GAAKjwE,WAAWmwE,YAAX,GAA4Bt4G,SAAjC,CAA6CmoC,WAAWmwE,YAAX,CAA0B,KAA1B,CAE7Cz4G,MAAMgzG,eAAN,CAAsBzxG,IAAtB,CAA4B,IAA5B,CAAkCktG,MAAlC,CAA0CnmE,UAA1C,EAEA,KAAK3O,IAAL,CAAY,cAAZ,CAEA,CA7BD,CA+BA35B,MAAMs+G,YAAN,CAAmB79G,SAAnB,CAA+BE,OAAOy2B,MAAP,CAAep3B,MAAMgzG,eAAN,CAAsBvyG,SAArC,CAA/B,CACAT,MAAMs+G,YAAN,CAAmB79G,SAAnB,CAA6BoJ,WAA7B,CAA2C7J,MAAMs+G,YAAjD;;;IAQAt+G,MAAMu+G,mBAAN,CAA4B,SAAWhlG,MAAX,CAAmB2/C,IAAnB,CAAyBT,cAAzB,CAAyCU,eAAzC,CAA0DC,GAA1D,CAAgE,CAE3Fp5D,MAAM+e,cAAN,CAAqBxd,IAArB,CAA2B,IAA3B,EAEA,KAAKo4B,IAAL,CAAY,qBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB/uB,OAAQA,MADS,CAEjB2/C,KAAMA,IAFW,CAGjBT,eAAgBA,cAHC,CAIjBU,gBAAiBA,eAJA,CAKjBC,IAAKA,GALY,CAAlB,CAQA7/C,OAASA,QAAU,GAAnB,CACA2/C,KAAOA,MAAQ,EAAf,CACAT,eAAiBr4D,KAAKiK,KAAL,CAAYouD,cAAZ,GAAgC,CAAjD,CACAU,gBAAkB/4D,KAAKiK,KAAL,CAAY8uD,eAAZ,GAAiC,CAAnD,CACAC,IAAMA,KAAOh5D,KAAKsV,EAAL,CAAU,CAAvB;CAGA,gBAAoB,CAAE+iD,eAAiB,CAAnB,GAA2BU,gBAAkB,CAA7C,CAApB,CACA,eAAiBV,eAAiBU,eAAjB,CAAmC,CAAnC,CAAuC,CAAxD;CAGA,YAAc,IAAMg8C,WAAa,KAAb,CAAqB3pE,WAArB,CAAmCC,WAAzC,EAAwD0pE,UAAxD,CAAd,CACA,aAAe,gBAAA,CAAkBC,YAAc,CAAhC,CAAf,CACA,YAAc,gBAAA,CAAkBA,YAAc,CAAhC,CAAd,CACA,QAAU,gBAAA,CAAkBA,YAAc,CAAhC,CAAV;CAGA,uBAAyB,CAAzB,CACA,mBAAqB,CAArB,CACA,sBAAwB,CAAxB;CAGA,WAAa,UAAUrkG,OAAV,EAAb,CACA,WAAa,UAAUA,OAAV,EAAb,CACA,WAAa,UAAUA,OAAV,EAAb,CAEA,KAAA,CAAO8L,CAAP;CAIA,IAAM2D,EAAI,CAAV,CAAaA,GAAKi4C,cAAlB,CAAkCj4C,GAAlC,CAAyC,CAExC,IAAM3D,EAAI,CAAV,CAAaA,GAAKs8C,eAAlB,CAAmCt8C,GAAnC,CAA0C,CAEzC,MAAQA,EAAIs8C,eAAJ,CAAsBC,GAA9B,CACA,MAAQ54C,EAAIi4C,cAAJ,CAAqBr4D,KAAKsV,EAA1B,CAA+B,CAAvC;CAGA0uB,OAAO7jC,CAAP,CAAW,CAAEgZ,OAAS2/C,KAAO94D,KAAK6O,GAAL,CAAUsC,CAAV,CAAlB,EAAoCnR,KAAK6O,GAAL,CAAUylB,CAAV,CAA/C,CACA0P,OAAOh2B,CAAP,CAAW,CAAEmL,OAAS2/C,KAAO94D,KAAK6O,GAAL,CAAUsC,CAAV,CAAlB,EAAoCnR,KAAK8O,GAAL,CAAUwlB,CAAV,CAA/C,CACA0P,OAAO/1B,CAAP,CAAW6qD,KAAO94D,KAAK8O,GAAL,CAAUqC,CAAV,CAAlB,CAEAsN,SAAUo3F,kBAAV,EAAiC7xE,OAAO7jC,CAAxC,CACAse,SAAUo3F,mBAAqB,CAA/B,EAAqC7xE,OAAOh2B,CAA5C,CACAyQ,SAAUo3F,mBAAqB,CAA/B,EAAqC7xE,OAAO/1B,CAA5C;CAGAiI,OAAO/V,CAAP,CAAWgZ,OAASnZ,KAAK6O,GAAL,CAAUylB,CAAV,CAApB,CACApe,OAAOlI,CAAP,CAAWmL,OAASnZ,KAAK8O,GAAL,CAAUwlB,CAAV,CAApB;CAGA1b,OAAOpE,UAAP,CAAmBwvB,MAAnB,CAA2B9tB,MAA3B,EAAoClF,SAApC,GAEAyzB,QAASoxE,kBAAT,EAAgCj9F,OAAOzY,CAAvC,CACAskC,QAASoxE,mBAAqB,CAA9B,EAAoCj9F,OAAO5K,CAA3C,CACAy2B,QAASoxE,mBAAqB,CAA9B,EAAoCj9F,OAAO3K,CAA3C;CAGA02B,IAAKmxE,cAAL,EAAwBr5F,EAAIs8C,eAA5B,CACAp0B,IAAKmxE,eAAiB,CAAtB,EAA4B11F,EAAIi4C,cAAhC;CAGAw9C,oBAAsB,CAAtB,CACAC,gBAAkB,CAAlB,CAEA,CAED;CAID,IAAM11F,EAAI,CAAV,CAAaA,GAAKi4C,cAAlB,CAAkCj4C,GAAlC,CAAyC,CAExC,IAAM3D,EAAI,CAAV,CAAaA,GAAKs8C,eAAlB,CAAmCt8C,GAAnC,CAA0C;CAGzC,MAAQ,CAAEs8C,gBAAkB,CAApB,EAA0B34C,CAA1B,CAA8B3D,CAA9B,CAAkC,CAA1C,CACA,MAAQ,CAAEs8C,gBAAkB,CAApB,GAA4B34C,EAAI,CAAhC,EAAsC3D,CAAtC,CAA0C,CAAlD,CACA,MAAQ,CAAEs8C,gBAAkB,CAApB,GAA4B34C,EAAI,CAAhC,EAAsC3D,CAA9C,CACA,MAAQ,CAAEs8C,gBAAkB,CAApB,EAA0B34C,CAA1B,CAA8B3D,CAAtC;CAGA+kB,QAASy0E,iBAAT,EAA+B1kG,CAA/B,CACAiwB,QAASy0E,kBAAoB,CAA7B,EAAmC3sG,CAAnC,CACAk4B,QAASy0E,kBAAoB,CAA7B,EAAmCp/F,CAAnC;CAGA2qB,QAASy0E,kBAAoB,CAA7B,EAAmC3sG,CAAnC,CACAk4B,QAASy0E,kBAAoB,CAA7B,EAAmCvoG,CAAnC,CACA8zB,QAASy0E,kBAAoB,CAA7B,EAAmCp/F,CAAnC;CAGAo/F,mBAAqB,CAArB,CAEA,CAED;CAGD,KAAK1rE,QAAL,CAAe,UAAU5J,eAAV,CAA2Ba,OAA3B,CAAoC,CAApC,CAAf,EACA,KAAKgJ,YAAL,CAAmB,UAAnB,CAA+B,UAAU7J,eAAV,CAA2BliB,QAA3B,CAAqC,CAArC,CAA/B,EACA,KAAK+rB,YAAL,CAAmB,QAAnB,CAA6B,UAAU7J,eAAV,CAA2B8D,OAA3B,CAAoC,CAApC,CAA7B,EACA,KAAK+F,YAAL,CAAmB,IAAnB,CAAyB,UAAU7J,eAAV,CAA2BgE,GAA3B,CAAgC,CAAhC,CAAzB,EAEA,CAtHD,CAwHA/kC,MAAMu+G,mBAAN,CAA0B99G,SAA1B,CAAsCE,OAAOy2B,MAAP,CAAep3B,MAAM+e,cAAN,CAAqBte,SAApC,CAAtC,CACAT,MAAMu+G,mBAAN,CAA0B99G,SAA1B,CAAoCoJ,WAApC,CAAkD7J,MAAMu+G,mBAAxD;;;;;IAUAv+G,MAAMw+G,aAAN,CAAsB,SAAWjlG,MAAX,CAAmB2/C,IAAnB,CAAyBT,cAAzB,CAAyCU,eAAzC,CAA0DC,GAA1D,CAAgE,CAErFp5D,MAAM4e,QAAN,CAAerd,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,eAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB/uB,OAAQA,MADS,CAEjB2/C,KAAMA,IAFW,CAGjBT,eAAgBA,cAHC,CAIjBU,gBAAiBA,eAJA,CAKjBC,IAAKA,GALY,CAAlB,CAQA,KAAK30B,kBAAL,CAAyB,UAAU85E,mBAAV,CAA+BhlG,MAA/B,CAAuC2/C,IAAvC,CAA6CT,cAA7C,CAA6DU,eAA7D,CAA8EC,GAA9E,CAAzB,EAEA,CAhBD,CAkBAp5D,MAAMw+G,aAAN,CAAoB/9G,SAApB,CAAgCE,OAAOy2B,MAAP,CAAep3B,MAAM4e,QAAN,CAAene,SAA9B,CAAhC,CACAT,MAAMw+G,aAAN,CAAoB/9G,SAApB,CAA8BoJ,WAA9B,CAA4C7J,MAAMw+G,aAAlD;;;;;IASAx+G,MAAMy+G,uBAAN,CAAgC,SAAWllG,MAAX,CAAmB2/C,IAAnB,CAAyBC,eAAzB,CAA0CV,cAA1C,CAA0DluD,CAA1D,CAA6DC,CAA7D,CAAiE,CAEhGxK,MAAM+e,cAAN,CAAqBxd,IAArB,CAA2B,IAA3B,EAEA,KAAKo4B,IAAL,CAAY,yBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB/uB,OAAQA,MADS,CAEjB2/C,KAAMA,IAFW,CAGjBC,gBAAiBA,eAHA,CAIjBV,eAAgBA,cAJC,CAKjBluD,EAAGA,CALc,CAMjBC,EAAGA,CANc,CAAlB,CASA+O,OAASA,QAAU,GAAnB,CACA2/C,KAAOA,MAAQ,EAAf,CACAC,gBAAkB/4D,KAAKiK,KAAL,CAAY8uD,eAAZ,GAAiC,EAAnD,CACAV,eAAiBr4D,KAAKiK,KAAL,CAAYouD,cAAZ,GAAgC,CAAjD,CACAluD,EAAIA,GAAK,CAAT,CACAC,EAAIA,GAAK,CAAT;CAGA,gBAAoB,CAAEiuD,eAAiB,CAAnB,GAA2BU,gBAAkB,CAA7C,CAApB,CACA,eAAiBV,eAAiBU,eAAjB,CAAmC,CAAnC,CAAuC,CAAxD;CAGA,YAAc,UAAUp4B,eAAV,CAA2B,IAAMo0E,WAAa,KAAb,CAAqB3pE,WAArB,CAAmCC,WAAzC,EAAwD0pE,UAAxD,CAA3B,CAAkG,CAAlG,CAAd,CACA,aAAe,UAAUp0E,eAAV,CAA2B,gBAAA,CAAkBq0E,YAAc,CAAhC,CAA3B,CAAgE,CAAhE,CAAf,CACA,YAAc,UAAUr0E,eAAV,CAA2B,gBAAA,CAAkBq0E,YAAc,CAAhC,CAA3B,CAAgE,CAAhE,CAAd,CACA,QAAU,UAAUr0E,eAAV,CAA2B,gBAAA,CAAkBq0E,YAAc,CAAhC,CAA3B,CAAgE,CAAhE,CAAV;CAGA,KAAA,CAAO50F,CAAP,CAAUtf,MAAQ,CAAlB,CAAqBu/F,YAAc,CAAnC,CAEA,WAAa,UAAU1vF,OAAV,EAAb,CACA,WAAa,UAAUA,OAAV,EAAb,CACA,OAAS,UAAUqD,OAAV,EAAT,CAEA,OAAS,UAAUrD,OAAV,EAAT,CACA,OAAS,UAAUA,OAAV,EAAT,CAEA,MAAQ,UAAUA,OAAV,EAAR,CACA,MAAQ,UAAUA,OAAV,EAAR,CACA,MAAQ,UAAUA,OAAV,EAAR;CAIA,IAAM8L,EAAI,CAAV,CAAaA,GAAKs8C,eAAlB,CAAmC,EAAGt8C,CAAtC,CAA0C;CAIzC,MAAQA,EAAIs8C,eAAJ,CAAsB5uD,CAAtB,CAA0BnK,KAAKsV,EAA/B,CAAoC,CAA5C;;CAKAgpG,yBAA0BhqF,CAA1B,CAA6BnqB,CAA7B,CAAgCC,CAAhC,CAAmC+O,MAAnC,CAA2ColG,EAA3C,EACAD,yBAA0BhqF,EAAI,IAA9B,CAAoCnqB,CAApC,CAAuCC,CAAvC,CAA0C+O,MAA1C,CAAkDqlG,EAAlD;CAIAC,EAAEjqG,UAAF,CAAcgqG,EAAd,CAAkBD,EAAlB,EACAG,EAAErqG,UAAF,CAAcmqG,EAAd,CAAkBD,EAAlB,EACAI,EAAE5tG,YAAF,CAAgB0tG,CAAhB,CAAmBC,CAAnB,EACAA,EAAE3tG,YAAF,CAAgB4tG,CAAhB,CAAmBF,CAAnB;CAIAE,EAAE3tG,SAAF,GACA0tG,EAAE1tG,SAAF,GAEA,IAAMoP,EAAI,CAAV,CAAaA,GAAKi4C,cAAlB,CAAkC,EAAGj4C,CAArC,CAAyC;;CAKxC,MAAQA,EAAIi4C,cAAJ,CAAqBr4D,KAAKsV,EAA1B,CAA+B,CAAvC,CACA,OAAS,CAAEwjD,IAAF,CAAS94D,KAAK6O,GAAL,CAAUsC,CAAV,CAAlB,CACA,OAAS2nD,KAAO94D,KAAK8O,GAAL,CAAUqC,CAAV,CAAhB;;CAKA6yB,OAAO7jC,CAAP,CAAWo+G,GAAGp+G,CAAH,EAASkpD,GAAKq1D,EAAEv+G,CAAP,CAAWmpD,GAAKq1D,EAAEx+G,CAA3B,CAAX,CACA6jC,OAAOh2B,CAAP,CAAWuwG,GAAGvwG,CAAH,EAASq7C,GAAKq1D,EAAE1wG,CAAP,CAAWs7C,GAAKq1D,EAAE3wG,CAA3B,CAAX,CACAg2B,OAAO/1B,CAAP,CAAWswG,GAAGtwG,CAAH,EAASo7C,GAAKq1D,EAAEzwG,CAAP,CAAWq7C,GAAKq1D,EAAE1wG,CAA3B,CAAX;CAGAwQ,SAASiC,MAAT,CAAiB5f,KAAjB,CAAwBkjC,OAAO7jC,CAA/B,CAAkC6jC,OAAOh2B,CAAzC,CAA4Cg2B,OAAO/1B,CAAnD;CAGA2K,OAAOpE,UAAP,CAAmBwvB,MAAnB,CAA2Bu6E,EAA3B,EAAgCvtG,SAAhC,GACAyzB,QAAQ/jB,MAAR,CAAgB5f,KAAhB,CAAuB8X,OAAOzY,CAA9B,CAAiCyY,OAAO5K,CAAxC,CAA2C4K,OAAO3K,CAAlD;CAGAq2B,GAAGnkC,CAAH,CAAOsc,EAAIs8C,eAAX,CACAz0B,GAAGt2B,CAAH,CAAOoS,EAAIi4C,cAAX,CACA1zB,IAAI7C,KAAJ,CAAWhhC,KAAX,CAAkBwjC,GAAGnkC,CAArB,CAAwBmkC,GAAGt2B,CAA3B;CAGAlN,QAEA,CAED;CAID,IAAMsf,EAAI,CAAV,CAAaA,GAAK24C,eAAlB,CAAmC34C,GAAnC,CAA0C,CAEzC,IAAM3D,EAAI,CAAV,CAAaA,GAAK47C,cAAlB,CAAkC57C,GAAlC,CAAyC;CAGxC,MAAQ,CAAE47C,eAAiB,CAAnB,GAA2Bj4C,EAAI,CAA/B,GAAuC3D,EAAI,CAA3C,CAAR,CACA,MAAQ,CAAE47C,eAAiB,CAAnB,EAAyBj4C,CAAzB,EAA+B3D,EAAI,CAAnC,CAAR,CACA,MAAQ,CAAE47C,eAAiB,CAAnB,EAAyBj4C,CAAzB,CAA6B3D,CAArC,CACA,MAAQ,CAAE47C,eAAiB,CAAnB,GAA2Bj4C,EAAI,CAA/B,EAAqC3D,CAA7C;CAGA+kB,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B9uF,CAA3B,EAAgC8uF,cAChC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B/2F,CAA3B,EAAgC+2F,cAChC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2BxpF,CAA3B,EAAgCwpF;CAGhC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B/2F,CAA3B,EAAgC+2F,cAChC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2B3yF,CAA3B,EAAgC2yF,cAChC7+D,QAAQvtB,IAAR,CAAcosF,WAAd,CAA2BxpF,CAA3B,EAAgCwpF,cAEhC,CAED;CAID,KAAK91D,QAAL,CAAe/I,OAAf,EACA,KAAKgJ,YAAL,CAAmB,UAAnB,CAA+B/rB,QAA/B,EACA,KAAK+rB,YAAL,CAAmB,QAAnB,CAA6B/F,OAA7B,EACA,KAAK+F,YAAL,CAAmB,IAAnB,CAAyB7F,GAAzB;CAIA,iCAAA,CAAmCrQ,CAAnC,CAAsCnqB,CAAtC,CAAyCC,CAAzC,CAA4C+O,MAA5C,CAAoDgO,QAApD,CAA+D,CAE9D,OAASnnB,KAAK6O,GAAL,CAAUylB,CAAV,CAAT,CACA,OAASt0B,KAAK8O,GAAL,CAAUwlB,CAAV,CAAT,CACA,YAAclqB,EAAID,CAAJ,CAAQmqB,CAAtB,CACA,OAASt0B,KAAK6O,GAAL,CAAU+vG,OAAV,CAAT,CAEAz3F,SAAShnB,CAAT,CAAagZ,QAAW,EAAI0lG,EAAf,EAAsB,GAAtB,CAA4BC,EAAzC,CACA33F,SAASnZ,CAAT,CAAamL,QAAW,EAAI0lG,EAAf,EAAsBE,EAAtB,CAA2B,GAAxC,CACA53F,SAASlZ,CAAT,CAAakL,OAASnZ,KAAK8O,GAAL,CAAU8vG,OAAV,CAAT,CAA+B,GAA5C,CAEA,CAED,CA3JD,CA6JAh/G,MAAMy+G,uBAAN,CAA8Bh+G,SAA9B,CAA0CE,OAAOy2B,MAAP,CAAep3B,MAAM+e,cAAN,CAAqBte,SAApC,CAA1C,CACAT,MAAMy+G,uBAAN,CAA8Bh+G,SAA9B,CAAwCoJ,WAAxC,CAAsD7J,MAAMy+G,uBAA5D;;;IAQAz+G,MAAMo/G,iBAAN,CAA0B,SAAW7lG,MAAX,CAAmB2/C,IAAnB,CAAyBC,eAAzB,CAA0CV,cAA1C,CAA0DluD,CAA1D,CAA6DC,CAA7D,CAAgE60G,WAAhE,CAA8E,CAEvGr/G,MAAM4e,QAAN,CAAerd,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,mBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB/uB,OAAQA,MADS,CAEjB2/C,KAAMA,IAFW,CAGjBC,gBAAiBA,eAHA,CAIjBV,eAAgBA,cAJC,CAKjBluD,EAAGA,CALc,CAMjBC,EAAGA,CANc,CAAlB,CASA,GAAI60G,cAAgBl/G,SAApB,CAAgCgL,QAAQC,IAAR,CAAc,0FAAd,EAEhC,KAAKq5B,kBAAL,CAAyB,UAAUg6E,uBAAV,CAAmCllG,MAAnC,CAA2C2/C,IAA3C,CAAiDC,eAAjD,CAAkEV,cAAlE,CAAkFluD,CAAlF,CAAqFC,CAArF,CAAzB,EACA,KAAKg9B,aAAL,GAEA,CApBD,CAsBAxnC,MAAMo/G,iBAAN,CAAwB3+G,SAAxB,CAAoCE,OAAOy2B,MAAP,CAAep3B,MAAM4e,QAAN,CAAene,SAA9B,CAApC,CACAT,MAAMo/G,iBAAN,CAAwB3+G,SAAxB,CAAkCoJ,WAAlC,CAAgD7J,MAAMo/G,iBAAtD;;;;;;;;;;;;;IAkBAp/G,MAAMq5G,YAAN,CAAqB,SAAW7/D,IAAX,CAAiB4e,QAAjB,CAA2B7+C,MAA3B,CAAmCk/C,cAAnC,CAAmDm8C,MAAnD,CAA2D0K,KAA3D,CAAmE,CAEvFt/G,MAAM4e,QAAN,CAAerd,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,cAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjBkR,KAAMA,IADW,CAEjB4e,SAAUA,QAFO,CAGjB7+C,OAAQA,MAHS,CAIjBk/C,eAAgBA,cAJC,CAKjBm8C,OAAQA,MALS,CAMjB0K,MAAOA,KANU,CAAlB,CASAlnD,SAAWA,UAAY,EAAvB,CACA7+C,OAASA,QAAU,CAAnB,CACAk/C,eAAiBA,gBAAkB,CAAnC,CACAm8C,OAASA,QAAU,KAAnB,CACA0K,MAAQA,OAASt/G,MAAMq5G,YAAN,CAAmBkG,OAApC,CAEA,SAAW,EAAX,CAEA,UAAY,IAAZ,CAECC,OAFD,CAGCxmG,MAHD,CAICggG,QAJD,CAMCyG,UAAYrnD,SAAW,CANxB,CAQC1jC,CARD,CAQInjB,CARJ,CAQO/H,CARP,CAUCigD,EAVD,CAUKC,EAVL,CAWCgb,GAXD,CAWMg7C,KAAO,UAAU3uG,OAAV,EAXb,CAYC8L,CAZD,CAYI2D,CAZJ,CAaCm/F,EAbD,CAaKC,EAbL,CAcCjuG,CAdD,CAcIjI,CAdJ,CAcOoE,CAdP,CAcUmJ,CAdV,CAeC4oG,GAfD,CAeMC,GAfN,CAeWC,GAfX,CAegBC,GAfhB,CAiBA,WAAa,UAAU3G,YAAN,CAAmBC,YAAvB,CAAqC9/D,IAArC,CAA2C4e,QAA3C,CAAqDw8C,MAArD,CAAb,CACCqL,SAAW7G,OAAO6G,QADnB,CAECp7E,QAAUu0E,OAAOv0E,OAFlB,CAGC42E,UAAYrC,OAAOqC,SAHpB;CAMA,KAAKwE,QAAL,CAAgBA,QAAhB,CACA,KAAKp7E,OAAL,CAAeA,OAAf,CACA,KAAK42E,SAAL,CAAiBA,SAAjB,CAEA,aAAA,CAAel7G,CAAf,CAAkB6N,CAAlB,CAAqBC,CAArB,CAAyB,CAExB,aAAawQ,QAAN,CAAegV,IAAf,CAAqB,UAAU9iB,OAAV,CAAmBxQ,CAAnB,CAAsB6N,CAAtB,CAAyBC,CAAzB,CAArB,EAAsD,CAA7D,CAEA;CAID,IAAMwO,EAAI,CAAV,CAAaA,EAAI4iG,SAAjB,CAA4B5iG,GAA5B,CAAmC,CAElCqjG,KAAMrjG,CAAN,EAAY,EAAZ,CAEA6X,EAAI7X,GAAM4iG,UAAY,CAAlB,CAAJ,CAEA/6C,IAAMlrB,KAAKkxD,UAAL,CAAiBh2E,CAAjB,CAAN,CAEA8qF,QAAUS,SAAUpjG,CAAV,CAAV,CACA7D,OAAS6rB,QAAShoB,CAAT,CAAT,CACAm8F,SAAWyC,UAAW5+F,CAAX,CAAX,CAEArT,EAAI+P,OAAS+lG,MAAO5qF,CAAP,CAAb,CAEA,IAAMlU,EAAI,CAAV,CAAaA,EAAIi4C,cAAjB,CAAiCj4C,GAAjC,CAAwC,CAEvCjP,EAAIiP,EAAIi4C,cAAJ,CAAqB,CAArB,CAAyBr4D,KAAKsV,EAAlC,CAEA+zC,GAAK,CAAEjgD,CAAF,CAAMpJ,KAAK6O,GAAL,CAAUsC,CAAV,CAAX;CACAm4C,GAAKlgD,EAAIpJ,KAAK8O,GAAL,CAAUqC,CAAV,CAAT,CAEAmuG,KAAK31G,IAAL,CAAW26D,GAAX,EACAg7C,KAAKn/G,CAAL,EAAUkpD,GAAKzwC,OAAOzY,CAAZ,CAAgBmpD,GAAKsvD,SAASz4G,CAAxC,CACAm/G,KAAKtxG,CAAL,EAAUq7C,GAAKzwC,OAAO5K,CAAZ,CAAgBs7C,GAAKsvD,SAAS5qG,CAAxC,CACAsxG,KAAKrxG,CAAL,EAAUo7C,GAAKzwC,OAAO3K,CAAZ,CAAgBq7C,GAAKsvD,SAAS3qG,CAAxC,CAEA6xG,KAAMrjG,CAAN,EAAW2D,CAAX,EAAiBo5F,KAAM8F,KAAKn/G,CAAX,CAAcm/G,KAAKtxG,CAAnB,CAAsBsxG,KAAKrxG,CAA3B,CAAjB,CAEA,CAED;CAKD,IAAMwO,EAAI,CAAV,CAAaA,EAAIu7C,QAAjB,CAA2Bv7C,GAA3B,CAAkC,CAEjC,IAAM2D,EAAI,CAAV,CAAaA,EAAIi4C,cAAjB,CAAiCj4C,GAAjC,CAAwC,CAEvCm/F,GAAO/K,MAAF,CAAa,CAAE/3F,EAAI,CAAN,EAAYu7C,QAAzB,CAAoCv7C,EAAI,CAA7C,CACA+iG,GAAK,CAAEp/F,EAAI,CAAN,EAAYi4C,cAAjB,CAEA9mD,EAAIuuG,KAAMrjG,CAAN,EAAW2D,CAAX,CAAJ;CACA9W,EAAIw2G,KAAMP,EAAN,EAAYn/F,CAAZ,CAAJ,CACA1S,EAAIoyG,KAAMP,EAAN,EAAYC,EAAZ,CAAJ,CACA3oG,EAAIipG,KAAMrjG,CAAN,EAAW+iG,EAAX,CAAJ,CAEAC,IAAM,UAAUzrG,OAAV,CAAmByI,EAAIu7C,QAAvB,CAAiC53C,EAAIi4C,cAArC,CAAN,CACAqnD,IAAM,UAAU1rG,OAAV,CAAmB,CAAEyI,EAAI,CAAN,EAAYu7C,QAA/B,CAAyC53C,EAAIi4C,cAA7C,CAAN,CACAsnD,IAAM,UAAU3rG,OAAV,CAAmB,CAAEyI,EAAI,CAAN,EAAYu7C,QAA/B,CAAyC,CAAE53C,EAAI,CAAN,EAAYi4C,cAArD,CAAN,CACAunD,IAAM,UAAU5rG,OAAV,CAAmByI,EAAIu7C,QAAvB,CAAiC,CAAE53C,EAAI,CAAN,EAAYi4C,cAA7C,CAAN,CAEA,KAAKp1B,KAAL,CAAWxP,IAAX,CAAiB,UAAU8M,KAAV,CAAiBhvB,CAAjB,CAAoBjI,CAApB,CAAuBuN,CAAvB,CAAjB,EACA,KAAKqsB,aAAL,CAAoB,CAApB,EAAwBzP,IAAxB,CAA8B,CAAEgsF,GAAF,CAAOC,GAAP,CAAYE,GAAZ,CAA9B,EAEA,KAAK38E,KAAL,CAAWxP,IAAX,CAAiB,UAAU8M,KAAV,CAAiBj3B,CAAjB,CAAoBoE,CAApB,CAAuBmJ,CAAvB,CAAjB,EACA,KAAKqsB,aAAL,CAAoB,CAApB,EAAwBzP,IAAxB,CAA8B,CAAEisF,IAAI/zG,KAAJ,EAAF,CAAeg0G,GAAf,CAAoBC,IAAIj0G,KAAJ,EAApB,CAA9B,EAEA,CAED,CAED,KAAKs5B,kBAAL,GACA,KAAKO,oBAAL,GAEA,CA3HD,CA6HA5lC,MAAMq5G,YAAN,CAAmB54G,SAAnB,CAA+BE,OAAOy2B,MAAP,CAAep3B,MAAM4e,QAAN,CAAene,SAA9B,CAA/B,CACAT,MAAMq5G,YAAN,CAAmB54G,SAAnB,CAA6BoJ,WAA7B,CAA2C7J,MAAMq5G,YAAjD,CAEAr5G,MAAMq5G,YAAN,CAAmBkG,OAAnB,CAA6B,SAAW7qF,CAAX,CAAe,CAE3C,QAAA,CAEA,CAJD,CAMA10B,MAAMq5G,YAAN,CAAmB8G,eAAnB,CAAqC,SAAWzrF,CAAX,CAAe,CAEnD,YAAYxlB,GAAL,CAAU9O,KAAKsV,EAAL,CAAUgf,CAApB,CAAP,CAEA,CAJD;CAOA10B,MAAMq5G,YAAN,CAAmBC,YAAnB,CAAkC,SAAW9/D,IAAX,CAAiB4e,QAAjB,CAA2Bw8C,MAA3B,CAAoC,CAErE,WAAa,UAAU7jG,OAAV,EAAb,CAECkvG,SAAW,EAFZ,CAGCp7E,QAAU,EAHX,CAIC42E,UAAY,EAJb,CAMCz2C,IAAM,UAAUj0D,OAAV,EANP,CAOCqvG,IAAM,UAAUvoG,OAAV,EAPP,CASC4nG,UAAYrnD,SAAW,CATxB,CAUCj/C,KAVD,CAWCknG,QAXD,CAaCj5F,EAbD,CAaKD,EAbL,CAaSm5F,EAbT,CAcCzjG,CAdD,CAcI6X,CAdJ;CAkBA,KAAKurF,QAAL,CAAgBA,QAAhB,CACA,KAAKp7E,OAAL,CAAeA,OAAf,CACA,KAAK42E,SAAL,CAAiBA,SAAjB;CAIA,IAAM5+F,EAAI,CAAV,CAAaA,EAAI4iG,SAAjB,CAA4B5iG,GAA5B,CAAmC,CAElC6X,EAAI7X,GAAM4iG,UAAY,CAAlB,CAAJ,CAEAQ,SAAUpjG,CAAV,EAAgB28B,KAAKwyD,YAAL,CAAmBt3E,CAAnB,CAAhB,CACAurF,SAAUpjG,CAAV,EAAczL,SAAd,GAEA,CAEDmvG;;;;;;;;;;;;;;;;;;;;;;IA0BA,uBAAA,EAA0B;;CAKzB17E,QAAS,CAAT,EAAe,UAAU9zB,OAAV,EAAf,CACA0qG,UAAW,CAAX,EAAiB,UAAU1qG,OAAV,EAAjB,CACAsvG,SAAWpgH,OAAOugH,SAAlB,CACAp5F,GAAKhnB,KAAK8Q,GAAL,CAAU+uG,SAAU,CAAV,EAAc1/G,CAAxB,CAAL,CACA4mB,GAAK/mB,KAAK8Q,GAAL,CAAU+uG,SAAU,CAAV,EAAc7xG,CAAxB,CAAL,CACAkyG,GAAKlgH,KAAK8Q,GAAL,CAAU+uG,SAAU,CAAV,EAAc5xG,CAAxB,CAAL,CAEA,GAAK+Y,IAAMi5F,QAAX,CAAsB,CAErBA,SAAWj5F,EAAX,CACApO,OAAOrP,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,EAEA,CAED,GAAKwd,IAAMk5F,QAAX,CAAsB,CAErBA,SAAWl5F,EAAX,CACAnO,OAAOrP,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,EAEA,CAED,GAAK22G,IAAMD,QAAX,CAAsB,CAErBrnG,OAAOrP,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,EAEA,CAEDq7D,IAAI7zD,YAAJ,CAAkB8uG,SAAU,CAAV,CAAlB,CAAiCjnG,MAAjC,EAA0C5H,SAA1C,GAEAyzB,QAAS,CAAT,EAAa1zB,YAAb,CAA2B8uG,SAAU,CAAV,CAA3B,CAA0Cj7C,GAA1C,EACAy2C,UAAW,CAAX,EAAetqG,YAAf,CAA6B8uG,SAAU,CAAV,CAA7B,CAA4Cp7E,QAAS,CAAT,CAA5C,EAEA;CAKD,IAAMhoB,EAAI,CAAV,CAAaA,EAAI4iG,SAAjB,CAA4B5iG,GAA5B,CAAmC,CAElCgoB,QAAShoB,CAAT,EAAegoB,QAAShoB,EAAI,CAAb,EAAiB9Q,KAAjB,EAAf,CAEA0vG,UAAW5+F,CAAX,EAAiB4+F,UAAW5+F,EAAI,CAAf,EAAmB9Q,KAAnB,EAAjB,CAEAi5D,IAAI7zD,YAAJ,CAAkB8uG,SAAUpjG,EAAI,CAAd,CAAlB,CAAqCojG,SAAUpjG,CAAV,CAArC,EAEA,GAAKmoD,IAAI5jE,MAAJ,GAAenB,OAAOC,OAA3B,CAAqC,CAEpC8kE,IAAI5zD,SAAJ,GAEA+H,MAAQ/Y,KAAK8Y,IAAL,CAAWlZ,MAAMI,IAAN,CAAW0K,KAAX,CAAkBm1G,SAAUpjG,EAAI,CAAd,EAAkB7L,GAAlB,CAAuBivG,SAAUpjG,CAAV,CAAvB,CAAlB,CAA0D,CAAE,CAA5D,CAA+D,CAA/D,CAAX,CAAR;CAEAgoB,QAAShoB,CAAT,EAAa9F,YAAb,CAA2BqpG,IAAIl5F,gBAAJ,CAAsB89C,GAAtB,CAA2B7rD,KAA3B,CAA3B,EAEA,CAEDsiG,UAAW5+F,CAAX,EAAe1L,YAAf,CAA6B8uG,SAAUpjG,CAAV,CAA7B,CAA4CgoB,QAAShoB,CAAT,CAA5C,EAEA;CAKD,GAAK+3F,MAAL,CAAc,CAEbz7F,MAAQ/Y,KAAK8Y,IAAL,CAAWlZ,MAAMI,IAAN,CAAW0K,KAAX,CAAkB+5B,QAAS,CAAT,EAAa7zB,GAAb,CAAkB6zB,QAAS46E,UAAY,CAArB,CAAlB,CAAlB,CAAgE,CAAE,CAAlE,CAAqE,CAArE,CAAX,CAAR,CACAtmG,OAAWsmG,UAAY,CAAvB,CAEA,GAAKQ,SAAU,CAAV,EAAcjvG,GAAd,CAAmBg0D,IAAI7zD,YAAJ,CAAkB0zB,QAAS,CAAT,CAAlB,CAAgCA,QAAS46E,UAAY,CAArB,CAAhC,CAAnB,EAAkF,CAAvF,CAA2F,CAE1FtmG,MAAQ,CAAEA,KAAV,CAEA,CAED,IAAM0D,EAAI,CAAV,CAAaA,EAAI4iG,SAAjB,CAA4B5iG,GAA5B,CAAmC;CAGlCgoB,QAAShoB,CAAT,EAAa9F,YAAb,CAA2BqpG,IAAIl5F,gBAAJ,CAAsB+4F,SAAUpjG,CAAV,CAAtB,CAAqC1D,MAAQ0D,CAA7C,CAA3B,EACA4+F,UAAW5+F,CAAX,EAAe1L,YAAf,CAA6B8uG,SAAUpjG,CAAV,CAA7B,CAA4CgoB,QAAShoB,CAAT,CAA5C,EAEA,CAED,CAED,CArJD;;;;;GA+JA7c,MAAMygH,kBAAN,CAA2B,SAAW5hG,QAAX,CAAqB+iB,OAArB,CAA8BroB,MAA9B,CAAsCs/C,MAAtC,CAA+C,CAEzE74D,MAAM4e,QAAN,CAAerd,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,oBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjBzpB,SAAUA,QADO,CAEjB+iB,QAASA,OAFQ,CAGjBroB,OAAQA,MAHS,CAIjBs/C,OAAQA,MAJS,CAAlB,CAOAt/C,OAASA,QAAU,CAAnB,CACAs/C,OAASA,QAAU,CAAnB,CAEA,SAAW,IAAX,CAEA,IAAM,MAAQ,CAAR,CAAWjuD,EAAIiU,SAASzd,MAA9B,CAAsCyb,EAAIjS,CAA1C,CAA6CiS,GAAK,CAAlD,CAAsD,CAErD6jG,QAAS,UAAU3vG,OAAV,CAAmB8N,SAAUhC,CAAV,CAAnB,CAAkCgC,SAAUhC,EAAI,CAAd,CAAlC,CAAqDgC,SAAUhC,EAAI,CAAd,CAArD,CAAT,EAEA,CAED,MAAQ,KAAKgC,QAAb,CAEA,UAAY,EAAZ,CAEA,IAAM,MAAQ,CAAR,CAAW2B,EAAI,CAAf,CAAkB5V,EAAIg3B,QAAQxgC,MAApC,CAA4Cyb,EAAIjS,CAAhD,CAAmDiS,GAAK,CAAL,CAAQ2D,GAA3D,CAAkE,CAEjE,OAASjW,EAAGq3B,QAAS/kB,CAAT,CAAH,CAAT,CACA,OAAStS,EAAGq3B,QAAS/kB,EAAI,CAAb,CAAH,CAAT,CACA,OAAStS,EAAGq3B,QAAS/kB,EAAI,CAAb,CAAH,CAAT,CAEAwmB,MAAO7iB,CAAP,EAAa,UAAUmgB,KAAV,CAAiB7vB,GAAG5P,KAApB,CAA2B+U,GAAG/U,KAA9B,CAAqC0wB,GAAG1wB,KAAxC,CAA+C,CAAE4P,GAAG/E,KAAH,EAAF,CAAckK,GAAGlK,KAAH,EAAd,CAA0B6lB,GAAG7lB,KAAH,EAA1B,CAA/C,CAAuF5L,SAAvF,CAAkGqgB,CAAlG,CAAb,CAEA,CAED,aAAe,UAAUzP,OAAV,EAAf,CAEA,IAAM,MAAQ,CAAR,CAAWnG,EAAIy4B,MAAMjiC,MAA3B,CAAmCyb,EAAIjS,CAAvC,CAA0CiS,GAA1C,CAAiD,CAEhD8jG,UAAWt9E,MAAOxmB,CAAP,CAAX,CAAuBg8C,MAAvB,EAEA;CAKD,IAAM,MAAQ,CAAR,CAAWjuD,EAAI,KAAK04B,aAAL,CAAoB,CAApB,EAAwBliC,MAA7C,CAAqDyb,EAAIjS,CAAzD,CAA4DiS,GAA5D,CAAmE,CAElE,QAAU,KAAKymB,aAAL,CAAoB,CAApB,EAAyBzmB,CAAzB,CAAV,CAEA,OAASkoB,IAAK,CAAL,EAASxkC,CAAlB,CACA,OAASwkC,IAAK,CAAL,EAASxkC,CAAlB,CACA,OAASwkC,IAAK,CAAL,EAASxkC,CAAlB,CAEA,QAAUH,KAAKwM,GAAL,CAAUkH,EAAV,CAAcJ,EAAd,CAAkBmQ,EAAlB,CAAV,CACA,QAAUzjB,KAAKqL,GAAL,CAAUqI,EAAV,CAAcJ,EAAd,CAAkBmQ,EAAlB,CAAV,CAEA,GAAKjX,IAAM,GAAN,EAAanB,IAAM,GAAxB,CAA8B;CAI7B,GAAKqI,GAAK,GAAV,CAAgBixB,IAAK,CAAL,EAASxkC,CAAT,EAAc,CAAd,CAChB,GAAKmT,GAAK,GAAV,CAAgBqxB,IAAK,CAAL,EAASxkC,CAAT,EAAc,CAAd,CAChB,GAAKsjB,GAAK,GAAV,CAAgBkhB,IAAK,CAAL,EAASxkC,CAAT,EAAc,CAAd,CAEhB,CAED;CAKD,IAAM,MAAQ,CAAR,CAAWqK,EAAI,KAAKiU,QAAL,CAAczd,MAAnC,CAA2Cyb,EAAIjS,CAA/C,CAAkDiS,GAAlD,CAAyD,CAExD,KAAKgC,QAAL,CAAehC,CAAf,EAAmBnP,cAAnB,CAAmC6L,MAAnC,EAEA;CAKD,KAAKiuB,aAAL,GAEA,KAAKnC,kBAAL,GAEA,KAAKlX,cAAL,CAAsB,UAAU1O,MAAV,CAAkB,UAAU1O,OAAV,EAAlB,CAAuCwI,MAAvC,CAAtB;CAKA,gBAAA,CAAkBX,MAAlB,CAA2B,CAE1B,WAAaA,OAAOxH,SAAP,GAAmBrF,KAAnB,EAAb,CACAq4B,OAAOljC,KAAP,CAAe0/G,KAAK/hG,QAAL,CAAcgV,IAAd,CAAoBuQ,MAApB,EAA+B,CAA9C;CAIA,MAAQy8E,QAASjoG,MAAT,EAAoB,CAApB,CAAwBxY,KAAKsV,EAA7B,CAAkC,GAA1C,CACA,MAAQorG,YAAaloG,MAAb,EAAwBxY,KAAKsV,EAA7B,CAAkC,GAA1C,CACA0uB,OAAOM,EAAP,CAAY,UAAUtwB,OAAV,CAAmBsgB,CAAnB,CAAsB,EAAInjB,CAA1B,CAAZ,CAEA,aAAA,CAEA;CAKD,aAAA,CAAeT,EAAf,CAAmBmF,EAAnB,CAAuB2b,EAAvB,CAA2BgP,aAA3B,CAA2C,CAE1C,SAAW,UAAUD,KAAV,CAAiB7vB,GAAG5P,KAApB,CAA2B+U,GAAG/U,KAA9B,CAAqC0wB,GAAG1wB,KAAxC,CAA+C,CAAE4P,GAAG/E,KAAH,EAAF,CAAckK,GAAGlK,KAAH,EAAd,CAA0B6lB,GAAG7lB,KAAH,EAA1B,CAA/C,CAAuF5L,SAAvF,CAAkGygC,aAAlG,CAAX,CACAggF,KAAKv9E,KAAL,CAAWxP,IAAX,CAAiBwQ,IAAjB,EAEA08E,SAASh3G,IAAT,CAAe+G,EAAf,EAAoB1D,GAApB,CAAyB6I,EAAzB,EAA8B7I,GAA9B,CAAmCwkB,EAAnC,EAAwC5c,YAAxC,CAAsD,CAAtD,EAEA,QAAU6rG,QAASE,QAAT,CAAV,CAEAH,KAAKt9E,aAAL,CAAoB,CAApB,EAAwBzP,IAAxB,CAA8B,CAC7BmtF,UAAWlwG,GAAG4zB,EAAd,CAAkB5zB,EAAlB,CAAsBmwG,GAAtB,CAD6B,CAE7BD,UAAW/qG,GAAGyuB,EAAd,CAAkBzuB,EAAlB,CAAsBgrG,GAAtB,CAF6B,CAG7BD,UAAWpvF,GAAG8S,EAAd,CAAkB9S,EAAlB,CAAsBqvF,GAAtB,CAH6B,CAA9B,EAMA;CAKD,kBAAA,CAAoB58E,IAApB,CAA0Bw0B,MAA1B,CAAmC,CAElC,SAAWz4D,KAAKC,GAAL,CAAU,CAAV,CAAaw4D,MAAb,CAAX,CACA,MAAQ6nD,QAASE,KAAK/hG,QAAL,CAAewlB,KAAK1yB,CAApB,CAAT,CAAR,CACA,MAAQ+uG,QAASE,KAAK/hG,QAAL,CAAewlB,KAAK36B,CAApB,CAAT,CAAR,CACA,MAAQg3G,QAASE,KAAK/hG,QAAL,CAAewlB,KAAKv2B,CAApB,CAAT,CAAR,CACA,MAAQ,EAAR,CAEA,kBAAoBu2B,KAAKzD,aAAzB;CAIA,IAAM,MAAQ,CAAd,CAAkB/jB,GAAKqkG,IAAvB,CAA6BrkG,GAA7B,CAAoC,CAEnCtL,EAAGsL,CAAH,EAAS,EAAT,CAEA,OAAS6jG,QAAS/uG,EAAE5F,KAAF,GAAU4B,IAAV,CAAgBG,CAAhB,CAAmB+O,EAAIqkG,IAAvB,CAAT,CAAT,CACA,OAASR,QAASh3G,EAAEqC,KAAF,GAAU4B,IAAV,CAAgBG,CAAhB,CAAmB+O,EAAIqkG,IAAvB,CAAT,CAAT,CACA,SAAWA,KAAOrkG,CAAlB,CAEA,IAAM,MAAQ,CAAd,CAAiB2D,GAAK2gG,IAAtB,CAA4B3gG,GAA5B,CAAmC,CAElC,GAAKA,IAAM,CAAN,EAAW3D,IAAMqkG,IAAtB,CAA6B,CAE5B3vG,EAAGsL,CAAH,EAAQ2D,CAAR,EAAc4gG,EAAd,CAEA,CAJD,IAIO,CAEN7vG,EAAGsL,CAAH,EAAQ2D,CAAR,EAAckgG,QAASU,GAAGr1G,KAAH,GAAW4B,IAAX,CAAiB0zG,EAAjB,CAAqB7gG,EAAI2gG,IAAzB,CAAT,CAAd,CAEA,CAED,CAED;CAID,IAAM,MAAQ,CAAd,CAAiBtkG,EAAIqkG,IAArB,CAA4BrkG,GAA5B,CAAmC,CAElC,IAAM,MAAQ,CAAd,CAAiB2D,EAAI,GAAM0gG,KAAOrkG,CAAb,EAAmB,CAAxC,CAA2C2D,GAA3C,CAAkD,CAEjD,MAAQpgB,KAAKiK,KAAL,CAAYmW,EAAI,CAAhB,CAAR,CAEA,GAAKA,EAAI,CAAJ,GAAU,CAAf,CAAmB,CAElB8gG,KACC/vG,EAAGsL,CAAH,EAAQ0V,EAAI,CAAZ,CADD,CAEChhB,EAAGsL,EAAI,CAAP,EAAY0V,CAAZ,CAFD,CAGChhB,EAAGsL,CAAH,EAAQ0V,CAAR,CAHD,CAICqO,aAJD,EAOA,CATD,IASO,CAEN0gF,KACC/vG,EAAGsL,CAAH,EAAQ0V,EAAI,CAAZ,CADD,CAEChhB,EAAGsL,EAAI,CAAP,EAAY0V,EAAI,CAAhB,CAFD,CAGChhB,EAAGsL,EAAI,CAAP,EAAY0V,CAAZ,CAHD,CAICqO,aAJD,EAOA,CAED,CAED,CAED;CAKD,gBAAA,CAAkBhoB,MAAlB,CAA2B,CAE1B,YAAYpG,KAAL,CAAYoG,OAAOvK,CAAnB,CAAsB,CAAEuK,OAAOrY,CAA/B,CAAP,CAEA;CAKD,oBAAA,CAAsBqY,MAAtB,CAA+B,CAE9B,YAAYpG,KAAL,CAAY,CAAEoG,OAAOxK,CAArB,CAAwBhO,KAAKkM,IAAL,CAAasM,OAAOrY,CAAP,CAAWqY,OAAOrY,CAApB,CAA4BqY,OAAOvK,CAAP,CAAWuK,OAAOvK,CAAzD,CAAxB,CAAP,CAEA;CAKD,kBAAA,CAAoBq2B,EAApB,CAAwB9rB,MAAxB,CAAgCioG,OAAhC,CAA0C,CAEzC,GAAOA,QAAU,CAAZ,EAAqBn8E,GAAGnkC,CAAH,GAAS,CAAnC,CAAyCmkC,GAAK,UAAUtwB,OAAV,CAAmBswB,GAAGnkC,CAAH,CAAO,CAA1B,CAA6BmkC,GAAGt2B,CAAhC,CAAL,CACzC,GAAOwK,OAAOrY,CAAP,GAAa,CAAf,EAAwBqY,OAAOvK,CAAP,GAAa,CAA1C,CAAgDq2B,GAAK,UAAUtwB,OAAV,CAAmBysG,QAAU,CAAV,CAAczgH,KAAKsV,EAAnB,CAAwB,GAA3C,CAAgDgvB,GAAGt2B,CAAnD,CAAL,CAChD,UAAUrC,KAAH,EAAP,CAEA,CAGD,CAvOD,CAyOA/L,MAAMygH,kBAAN,CAAyBhgH,SAAzB,CAAqCE,OAAOy2B,MAAP,CAAep3B,MAAM4e,QAAN,CAAene,SAA9B,CAArC,CACAT,MAAMygH,kBAAN,CAAyBhgH,SAAzB,CAAmCoJ,WAAnC,CAAiD7J,MAAMygH,kBAAvD;;;IAQAzgH,MAAMuhH,oBAAN,CAA6B,SAAWhoG,MAAX,CAAmBs/C,MAAnB,CAA4B,CAExD,MAAQ,CAAE,EAAIz4D,KAAKkM,IAAL,CAAW,CAAX,CAAN,EAAyB,CAAjC,CACA,MAAQ,EAAI7B,CAAZ,CAEA,aAAe;CAGd,CAAE,CAHY,CAGT,CAAE,CAHO,CAGJ,CAAE,CAHE,CAGI,CAAE,CAHN,CAGS,CAAE,CAHX,CAGe,CAHf,CAId,CAAE,CAJY,CAIR,CAJQ,CAIL,CAAE,CAJG,CAIG,CAAE,CAJL,CAIS,CAJT,CAIa,CAJb,CAKb,CALa,CAKV,CAAE,CALQ,CAKL,CAAE,CALG,CAKI,CALJ,CAKO,CAAE,CALT,CAKa,CALb,CAMb,CANa,CAMT,CANS,CAMN,CAAE,CANI,CAMG,CANH,CAMO,CANP,CAMW,CANX;CASb,CATa,CASV,CAAEjB,CATQ,CASL,CAAEiB,CATG,CASI,CATJ,CASO,CAAEjB,CATT,CASaiB,CATb,CAUb,CAVa,CAUTjB,CAVS,CAUN,CAAEiB,CAVI,CAUG,CAVH,CAUOjB,CAVP,CAUWiB,CAVX;CAad,CAAEjB,CAbY,CAaT,CAAEiB,CAbO,CAaH,CAbG,CAaG,CAAEjB,CAbL,CAaSiB,CAbT,CAaa,CAbb,CAcbjB,CAda,CAcV,CAAEiB,CAdQ,CAcJ,CAdI,CAcGjB,CAdH,CAcOiB,CAdP,CAcW,CAdX;CAiBd,CAAEA,CAjBY,CAiBR,CAjBQ,CAiBL,CAAEjB,CAjBG,CAiBIiB,CAjBJ,CAiBQ,CAjBR,CAiBW,CAAEjB,CAjBb,CAkBd,CAAEiB,CAlBY,CAkBR,CAlBQ,CAkBJjB,CAlBI,CAkBGiB,CAlBH,CAkBO,CAlBP,CAkBWjB,CAlBX,CAAf,CAqBA,YAAc,CACZ,CADY,CACT,EADS,CACJ,CADI,CACI,CADJ,CACQ,CADR,CACW,EADX,CACoB,CADpB,CACuB,EADvB,CAC2B,EAD3B,CAEZ,CAFY,CAET,EAFS,CAEL,EAFK,CAEI,CAFJ,CAEO,EAFP,CAEY,CAFZ,CAEoB,CAFpB,CAEwB,CAFxB,CAE2B,EAF3B,CAGb,EAHa,CAGR,CAHQ,CAGJ,CAHI,CAGG,EAHH,CAGQ,CAHR,CAGW,EAHX,CAGmB,EAHnB,CAGuB,EAHvB,CAG4B,CAH5B,CAIZ,CAJY,CAIR,CAJQ,CAIL,EAJK,CAII,CAJJ,CAIO,EAJP,CAIY,CAJZ,CAIoB,CAJpB,CAIwB,CAJxB,CAI2B,EAJ3B,CAKZ,CALY,CAKT,EALS,CAKJ,CALI,CAKI,CALJ,CAKQ,CALR,CAKW,EALX,CAKoB,CALpB,CAKuB,EALvB,CAK2B,EAL3B,CAMZ,CANY,CAMT,EANS,CAMJ,CANI,CAMI,CANJ,CAMQ,CANR,CAMW,EANX,CAMoB,CANpB,CAMuB,EANvB,CAM2B,EAN3B,CAOZ,CAPY,CAOT,EAPS,CAOL,EAPK,CAOI,CAPJ,CAOO,EAPP,CAOY,CAPZ,CAOoB,CAPpB,CAOwB,CAPxB,CAO2B,EAP3B,CAQb,EARa,CAQR,CARQ,CAQJ,CARI,CAQG,EARH,CAQQ,CARR,CAQW,EARX,CAQmB,EARnB,CAQuB,EARvB,CAQ4B,CAR5B,CASZ,CATY,CAST,EATS,CASL,EATK,CASI,CATJ,CASO,EATP,CASY,CATZ,CASoB,CATpB,CASwB,CATxB,CAS4B,CAT5B,CAUb,EAVa,CAUR,CAVQ,CAUJ,CAVI,CAUG,EAVH,CAUQ,CAVR,CAUW,EAVX,CAUmB,EAVnB,CAUuB,EAVvB,CAU4B,CAV5B,CAWb,EAXa,CAWR,CAXQ,CAWL,EAXK,CAWG,EAXH,CAWO,EAXP,CAWY,CAXZ,CAWmB,EAXnB,CAWwB,CAXxB,CAW2B,EAX3B,CAYZ,CAZY,CAYT,EAZS,CAYL,EAZK,CAYI,CAZJ,CAYO,EAZP,CAYY,CAZZ,CAYoB,CAZpB,CAYwB,CAZxB,CAY4B,CAZ5B,CAAd,CAeAxJ,MAAMygH,kBAAN,CAAyBl/G,IAAzB,CAA+B,IAA/B,CAAqCsd,QAArC,CAA+C+iB,OAA/C,CAAwDroB,MAAxD,CAAgEs/C,MAAhE,EAEA,KAAKl/B,IAAL,CAAY,sBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB/uB,OAAQA,MADS,CAEjBs/C,OAAQA,MAFS,CAAlB,CAKA,CAlDD,CAoDA74D,MAAMuhH,oBAAN,CAA2B9gH,SAA3B,CAAuCE,OAAOy2B,MAAP,CAAep3B,MAAMygH,kBAAN,CAAyBhgH,SAAxC,CAAvC,CACAT,MAAMuhH,oBAAN,CAA2B9gH,SAA3B,CAAqCoJ,WAArC,CAAmD7J,MAAMuhH,oBAAzD;;;IAQAvhH,MAAMwhH,mBAAN,CAA4B,SAAWjoG,MAAX,CAAmBs/C,MAAnB,CAA4B,CAEvD,MAAQ,CAAE,EAAIz4D,KAAKkM,IAAL,CAAW,CAAX,CAAN,EAAyB,CAAjC,CAEA,aAAe,CACd,CAAE,CADY,CACR7B,CADQ,CACJ,CADI,CACE,CADF,CACMA,CADN,CACU,CADV,CACe,CAAE,CADjB,CACoB,CAAEA,CADtB,CAC0B,CAD1B,CACgC,CADhC,CACmC,CAAEA,CADrC,CACyC,CADzC,CAEb,CAFa,CAEV,CAAE,CAFQ,CAEJA,CAFI,CAEE,CAFF,CAEM,CAFN,CAEUA,CAFV,CAEgB,CAFhB,CAEmB,CAAE,CAFrB,CAEwB,CAAEA,CAF1B,CAEgC,CAFhC,CAEoC,CAFpC,CAEuC,CAAEA,CAFzC,CAGbA,CAHa,CAGT,CAHS,CAGN,CAAE,CAHI,CAGEA,CAHF,CAGM,CAHN,CAGU,CAHV,CAGe,CAAEA,CAHjB,CAGqB,CAHrB,CAGwB,CAAE,CAH1B,CAG+B,CAAEA,CAHjC,CAGqC,CAHrC,CAGyC,CAHzC,CAAf,CAMA,YAAc,CACZ,CADY,CACT,EADS,CACJ,CADI,CACE,CADF,CACM,CADN,CACU,CADV,CACgB,CADhB,CACoB,CADpB,CACwB,CADxB,CAC8B,CAD9B,CACkC,CADlC,CACqC,EADrC,CAC4C,CAD5C,CAC+C,EAD/C,CACmD,EADnD,CAEZ,CAFY,CAER,CAFQ,CAEJ,CAFI,CAEE,CAFF,CAEK,EAFL,CAEU,CAFV,CAEe,EAFf,CAEmB,EAFnB,CAEwB,CAFxB,CAE6B,EAF7B,CAEkC,CAFlC,CAEsC,CAFtC,CAE4C,CAF5C,CAEgD,CAFhD,CAEoD,CAFpD,CAGZ,CAHY,CAGR,CAHQ,CAGJ,CAHI,CAGE,CAHF,CAGM,CAHN,CAGU,CAHV,CAGgB,CAHhB,CAGoB,CAHpB,CAGwB,CAHxB,CAG8B,CAH9B,CAGkC,CAHlC,CAGsC,CAHtC,CAG4C,CAH5C,CAGgD,CAHhD,CAGoD,CAHpD,CAIZ,CAJY,CAIR,CAJQ,CAIJ,CAJI,CAIE,CAJF,CAIM,CAJN,CAIS,EAJT,CAIgB,CAJhB,CAIoB,CAJpB,CAIuB,EAJvB,CAI8B,CAJ9B,CAIkC,CAJlC,CAIsC,CAJtC,CAI4C,CAJ5C,CAIgD,CAJhD,CAIoD,CAJpD,CAAd,CAOAzK,MAAMygH,kBAAN,CAAyBl/G,IAAzB,CAA+B,IAA/B,CAAqCsd,QAArC,CAA+C+iB,OAA/C,CAAwDroB,MAAxD,CAAgEs/C,MAAhE,EAEA,KAAKl/B,IAAL,CAAY,qBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB/uB,OAAQA,MADS,CAEjBs/C,OAAQA,MAFS,CAAlB,CAKA,CA1BD,CA4BA74D,MAAMwhH,mBAAN,CAA0B/gH,SAA1B,CAAsCE,OAAOy2B,MAAP,CAAep3B,MAAMygH,kBAAN,CAAyBhgH,SAAxC,CAAtC,CACAT,MAAMwhH,mBAAN,CAA0B/gH,SAA1B,CAAoCoJ,WAApC,CAAkD7J,MAAMwhH,mBAAxD;;;IAQAxhH,MAAMyhH,kBAAN,CAA2B,SAAWloG,MAAX,CAAmBs/C,MAAnB,CAA4B,CAEtD,aAAe,CACd,CADc,CACX,CADW,CACR,CADQ,CACH,CAAE,CADC,CACE,CADF,CACK,CADL,CACW,CADX,CACc,CADd,CACiB,CADjB,CACuB,CADvB,CAC0B,CAAE,CAD5B,CAC+B,CAD/B,CACqC,CADrC,CACwC,CADxC,CAC2C,CAD3C,CACiD,CADjD,CACoD,CADpD,CACuD,CAAE,CADzD,CAAf,CAIA,YAAc,CACb,CADa,CACV,CADU,CACP,CADO,CACD,CADC,CACE,CADF,CACK,CADL,CACW,CADX,CACc,CADd,CACiB,CADjB,CACuB,CADvB,CAC0B,CAD1B,CAC6B,CAD7B,CACmC,CADnC,CACsC,CADtC,CACyC,CADzC,CAC+C,CAD/C,CACkD,CADlD,CACqD,CADrD,CAC2D,CAD3D,CAC8D,CAD9D,CACiE,CADjE,CACuE,CADvE,CAC0E,CAD1E,CAC6E,CAD7E,CAAd,CAIA74D,MAAMygH,kBAAN,CAAyBl/G,IAAzB,CAA+B,IAA/B,CAAqCsd,QAArC,CAA+C+iB,OAA/C,CAAwDroB,MAAxD,CAAgEs/C,MAAhE,EAEA,KAAKl/B,IAAL,CAAY,oBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB/uB,OAAQA,MADS,CAEjBs/C,OAAQA,MAFS,CAAlB,CAKA,CAnBD,CAqBA74D,MAAMyhH,kBAAN,CAAyBhhH,SAAzB,CAAqCE,OAAOy2B,MAAP,CAAep3B,MAAMygH,kBAAN,CAAyBhgH,SAAxC,CAArC,CACAT,MAAMyhH,kBAAN,CAAyBhhH,SAAzB,CAAmCoJ,WAAnC,CAAiD7J,MAAMyhH,kBAAvD;;;IAQAzhH,MAAM0hH,mBAAN,CAA4B,SAAWnoG,MAAX,CAAmBs/C,MAAnB,CAA4B,CAEvD,aAAe,CACb,CADa,CACT,CADS,CACL,CADK,CACA,CAAE,CADF,CACK,CAAE,CADP,CACW,CADX,CACgB,CAAE,CADlB,CACsB,CADtB,CACyB,CAAE,CAD3B,CACiC,CADjC,CACoC,CAAE,CADtC,CACyC,CAAE,CAD3C,CAAf,CAIA,YAAc,CACZ,CADY,CACR,CADQ,CACJ,CADI,CACE,CADF,CACM,CADN,CACU,CADV,CACgB,CADhB,CACoB,CADpB,CACwB,CADxB,CAC8B,CAD9B,CACkC,CADlC,CACsC,CADtC,CAAd,CAIA74D,MAAMygH,kBAAN,CAAyBl/G,IAAzB,CAA+B,IAA/B,CAAqCsd,QAArC,CAA+C+iB,OAA/C,CAAwDroB,MAAxD,CAAgEs/C,MAAhE,EAEA,KAAKl/B,IAAL,CAAY,qBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjB/uB,OAAQA,MADS,CAEjBs/C,OAAQA,MAFS,CAAlB,CAKA,CAnBD,CAqBA74D,MAAM0hH,mBAAN,CAA0BjhH,SAA1B,CAAsCE,OAAOy2B,MAAP,CAAep3B,MAAMygH,kBAAN,CAAyBhgH,SAAxC,CAAtC,CACAT,MAAM0hH,mBAAN,CAA0BjhH,SAA1B,CAAoCoJ,WAApC,CAAkD7J,MAAM0hH,mBAAxD;;;;;;;;IAaA1hH,MAAM2hH,kBAAN,CAA2B,SAAWC,IAAX,CAAiBC,MAAjB,CAAyBC,MAAzB,CAAkC,CAE5D9hH,MAAM4e,QAAN,CAAerd,IAAf,CAAqB,IAArB,EAEA,KAAKo4B,IAAL,CAAY,oBAAZ,CAEA,KAAK2O,UAAL,CAAkB,CACjBs5E,KAAMA,IADW,CAEjBC,OAAQA,MAFS,CAGjBC,OAAQA,MAHS,CAAlB,CAMA,UAAY,KAAKjjG,QAAjB,CACA,UAAY,KAAKwkB,KAAjB,CACA,QAAU,KAAKC,aAAL,CAAoB,CAApB,CAAV,CAEA,KAAA,CAAO9iB,CAAP,CAAUjW,CAAV,CACA,KAAA,CAAOgH,CAAP,CAEA,eAAiBswG,OAAS,CAA1B,CAEA,IAAMhlG,EAAI,CAAV,CAAaA,GAAKilG,MAAlB,CAA0BjlG,GAA1B,CAAiC,CAEhCtL,EAAIsL,EAAIilG,MAAR,CAEA,IAAMthG,EAAI,CAAV,CAAaA,GAAKqhG,MAAlB,CAA0BrhG,GAA1B,CAAiC,CAEhCkU,EAAIlU,EAAIqhG,MAAR,CAEAt3G,EAAIq3G,KAAMltF,CAAN,CAASnjB,CAAT,CAAJ,CACA+xF,MAAMzvE,IAAN,CAAYtpB,CAAZ,EAEA,CAED,CAED,KAAA,CAAOb,CAAP,CAAUoE,CAAV,CAAamJ,CAAb,CACA,OAAA,CAAS6oG,GAAT,CAAcC,GAAd,CAAmBC,GAAnB,CAEA,IAAMnjG,EAAI,CAAV,CAAaA,EAAIilG,MAAjB,CAAyBjlG,GAAzB,CAAgC,CAE/B,IAAM2D,EAAI,CAAV,CAAaA,EAAIqhG,MAAjB,CAAyBrhG,GAAzB,CAAgC,CAE/B7O,EAAIkL,EAAIklG,UAAJ,CAAiBvhG,CAArB,CACA9W,EAAImT,EAAIklG,UAAJ,CAAiBvhG,CAAjB,CAAqB,CAAzB,CACA1S,EAAI,CAAE+O,EAAI,CAAN,EAAYklG,UAAZ,CAAyBvhG,CAAzB,CAA6B,CAAjC,CACAvJ,EAAI,CAAE4F,EAAI,CAAN,EAAYklG,UAAZ,CAAyBvhG,CAA7B,CAEAq/F,IAAM,UAAUzrG,OAAV,CAAmBoM,EAAIqhG,MAAvB,CAA+BhlG,EAAIilG,MAAnC,CAAN,CACAhC,IAAM,UAAU1rG,OAAV,CAAmB,CAAEoM,EAAI,CAAN,EAAYqhG,MAA/B,CAAuChlG,EAAIilG,MAA3C,CAAN,CACA/B,IAAM,UAAU3rG,OAAV,CAAmB,CAAEoM,EAAI,CAAN,EAAYqhG,MAA/B,CAAuC,CAAEhlG,EAAI,CAAN,EAAYilG,MAAnD,CAAN,CACA9B,IAAM,UAAU5rG,OAAV,CAAmBoM,EAAIqhG,MAAvB,CAA+B,CAAEhlG,EAAI,CAAN,EAAYilG,MAA3C,CAAN,CAEAz+E,MAAMxP,IAAN,CAAY,UAAU8M,KAAV,CAAiBhvB,CAAjB,CAAoBjI,CAApB,CAAuBuN,CAAvB,CAAZ,EACA8tB,IAAIlR,IAAJ,CAAU,CAAEgsF,GAAF,CAAOC,GAAP,CAAYE,GAAZ,CAAV,EAEA38E,MAAMxP,IAAN,CAAY,UAAU8M,KAAV,CAAiBj3B,CAAjB,CAAoBoE,CAApB,CAAuBmJ,CAAvB,CAAZ,EACA8tB,IAAIlR,IAAJ,CAAU,CAAEisF,IAAI/zG,KAAJ,EAAF,CAAeg0G,GAAf,CAAoBC,IAAIj0G,KAAJ,EAApB,CAAV,EAEA,CAED;;;;CAQD,KAAKs5B,kBAAL,GACA,KAAKO,oBAAL,GAEA,CAxED,CA0EA5lC,MAAM2hH,kBAAN,CAAyBlhH,SAAzB,CAAqCE,OAAOy2B,MAAP,CAAep3B,MAAM4e,QAAN,CAAene,SAA9B,CAArC,CACAT,MAAM2hH,kBAAN,CAAyBlhH,SAAzB,CAAmCoJ,WAAnC,CAAiD7J,MAAM2hH,kBAAvD;;;IAQA3hH,MAAMgiH,iBAAN,CAA0B,SAAWrjG,QAAX,CAAsB,CAE/C3e,MAAM+e,cAAN,CAAqBxd,IAArB,CAA2B,IAA3B,EAEA,SAAW,CAAE,CAAF,CAAK,CAAL,CAAX,CAAqB8nC,KAAO,EAA5B,CAEA,qBAAA,CAAuB13B,CAAvB,CAA0BjI,CAA1B,CAA8B,CAE7B,SAAWA,CAAX,CAEA,CAED,SAAW,CAAE,GAAF,CAAO,GAAP,CAAY,GAAZ,CAAX,CAEA,GAAKiV,0BAA0BC,QAA/B,CAA0C,CAEzC,aAAeD,SAASE,QAAxB,CACA,UAAYF,SAAS0kB,KAArB,CACA,aAAe,CAAf;CAGA,UAAY,eAAA,CAAiB,EAAIA,MAAMjiC,MAA3B,CAAZ,CAEA,IAAM,MAAQ,CAAR,CAAWwJ,EAAIy4B,MAAMjiC,MAA3B,CAAmCyb,EAAIjS,CAAvC,CAA0CiS,GAA1C,CAAiD,CAEhD,SAAWwmB,MAAOxmB,CAAP,CAAX,CAEA,IAAM,MAAQ,CAAd,CAAiB2D,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9Bo3F,KAAM,CAAN,EAAYvzE,KAAMsR,KAAMn1B,CAAN,CAAN,CAAZ,CACAo3F,KAAM,CAAN,EAAYvzE,KAAMsR,KAAM,CAAEn1B,EAAI,CAAN,EAAY,CAAlB,CAAN,CAAZ,CACAo3F,KAAKz7E,IAAL,CAAW07E,YAAX,EAEA,QAAUD,KAAK92G,QAAL,EAAV,CAEA,GAAKuoC,KAAM7I,GAAN,IAAgBrgC,SAArB,CAAiC,CAEhCwoF,MAAO,EAAIs5B,QAAX,EAAwBrK,KAAM,CAAN,CAAxB,CACAjvB,MAAO,EAAIs5B,QAAJ,CAAe,CAAtB,EAA4BrK,KAAM,CAAN,CAA5B,CACAvuE,KAAM7I,GAAN,EAAc,IAAd,CACAyhF,WAEA,CAED,CAED,CAED,WAAa,gBAAA,CAAkBA,SAAW,CAAX,CAAe,CAAjC,CAAb,CAEA,IAAM,MAAQ,CAAR,CAAWr3G,EAAIq3G,QAArB,CAA+BplG,EAAIjS,CAAnC,CAAsCiS,GAAtC,CAA6C,CAE5C,IAAM,MAAQ,CAAd,CAAiB2D,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9B,WAAa3B,SAAU8pE,MAAQ,EAAI9rE,CAAJ,CAAQ2D,CAAhB,CAAV,CAAb,CAEA,UAAY,EAAI3D,CAAJ,CAAQ,EAAI2D,CAAxB,CACAkS,OAAQxxB,MAAQ,CAAhB,EAAsBkjC,OAAO7jC,CAA7B,CACAmyB,OAAQxxB,MAAQ,CAAhB,EAAsBkjC,OAAOh2B,CAA7B,CACAskB,OAAQxxB,MAAQ,CAAhB,EAAsBkjC,OAAO/1B,CAA7B,CAEA,CAED,CAED,KAAKu8B,YAAL,CAAmB,UAAnB,CAA+B,UAAU7J,eAAV,CAA2BrO,MAA3B,CAAmC,CAAnC,CAA/B,EAEA,CArDD,QAqDY/T,0BAA0BI,cAA/B,CAAgD,CAEtD,GAAKJ,SAASzd,KAAT,GAAmB,IAAxB,CAA+B;CAI9B,YAAcyd,SAASzd,KAAT,CAAe8M,KAA7B,CACA,aAAe2Q,SAASK,UAAT,CAAoBuI,QAAnC,CACA,WAAa5I,SAASumB,MAAtB,CACA,aAAe,CAAf,CAEA,GAAKA,OAAO9jC,MAAP,GAAkB,CAAvB,CAA2B,CAE1Bud,SAASosB,QAAT,CAAmB,CAAnB,CAAsBnJ,QAAQxgC,MAA9B,EAEA;CAGD,UAAY,eAAA,CAAiB,EAAIwgC,QAAQxgC,MAA7B,CAAZ,CAEA,IAAM,MAAQ,CAAR,CAAW8gH,GAAKh9E,OAAO9jC,MAA7B,CAAqCmzC,EAAI2tE,EAAzC,CAA6C,EAAG3tE,CAAhD,CAAoD,CAEnD,UAAYrP,OAAQqP,CAAR,CAAZ,CAEA,UAAYpP,MAAM3pB,KAAlB,CACA,UAAY2pB,MAAMhE,KAAlB,CAEA,IAAM,MAAQ3lB,KAAR,CAAeoB,GAAKpB,MAAQ2lB,KAAlC,CAAyCtkB,EAAID,EAA7C,CAAiDC,GAAK,CAAtD,CAA0D,CAEzD,IAAM,MAAQ,CAAd,CAAiB2D,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9Bo3F,KAAM,CAAN,EAAYh2E,QAAS/kB,EAAI2D,CAAb,CAAZ,CACAo3F,KAAM,CAAN,EAAYh2E,QAAS/kB,EAAI,CAAE2D,EAAI,CAAN,EAAY,CAAzB,CAAZ,CACAo3F,KAAKz7E,IAAL,CAAW07E,YAAX,EAEA,QAAUD,KAAK92G,QAAL,EAAV,CAEA,GAAKuoC,KAAM7I,GAAN,IAAgBrgC,SAArB,CAAiC,CAEhCwoF,MAAO,EAAIs5B,QAAX,EAAwBrK,KAAM,CAAN,CAAxB,CACAjvB,MAAO,EAAIs5B,QAAJ,CAAe,CAAtB,EAA4BrK,KAAM,CAAN,CAA5B,CACAvuE,KAAM7I,GAAN,EAAc,IAAd,CACAyhF,WAEA,CAED,CAED,CAED,CAED,WAAa,gBAAA,CAAkBA,SAAW,CAAX,CAAe,CAAjC,CAAb,CAEA,IAAM,MAAQ,CAAR,CAAWr3G,EAAIq3G,QAArB,CAA+BplG,EAAIjS,CAAnC,CAAsCiS,GAAtC,CAA6C,CAE5C,IAAM,MAAQ,CAAd,CAAiB2D,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9B,UAAY,EAAI3D,CAAJ,CAAQ,EAAI2D,CAAxB,CACA,WAAamoE,MAAO,EAAI9rE,CAAJ,CAAQ2D,CAAf,CAAb,CAEAkS,OAAQxxB,MAAQ,CAAhB,EAAsB2d,SAAS8B,IAAT,CAAe4gB,MAAf,CAAtB,CACA7O,OAAQxxB,MAAQ,CAAhB,EAAsB2d,SAAS+B,IAAT,CAAe2gB,MAAf,CAAtB,CACA7O,OAAQxxB,MAAQ,CAAhB,EAAsB2d,SAASgC,IAAT,CAAe0gB,MAAf,CAAtB,CAEA,CAED,CAED,KAAKqJ,YAAL,CAAmB,UAAnB,CAA+B,UAAU7J,eAAV,CAA2BrO,MAA3B,CAAmC,CAAnC,CAA/B,EAEA,CArED,IAqEO;CAIN,aAAe/T,SAASK,UAAT,CAAoBuI,QAApB,CAA6BvZ,KAA5C,CACA,aAAe6Q,SAASzd,MAAT,CAAkB,CAAjC,CACA,YAAc6gH,SAAW,CAAzB,CAEA,WAAa,gBAAA,CAAkBA,SAAW,CAAX,CAAe,CAAjC,CAAb,CAEA,IAAM,MAAQ,CAAR,CAAWr3G,EAAIu3G,OAArB,CAA8BtlG,EAAIjS,CAAlC,CAAqCiS,GAArC,CAA4C,CAE3C,IAAM,MAAQ,CAAd,CAAiB2D,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE9B,UAAY,GAAK3D,CAAL,CAAS,EAAI2D,CAAzB,CAEA,WAAa,EAAI3D,CAAJ,CAAQ,EAAI2D,CAAzB,CACAkS,OAAQxxB,MAAQ,CAAhB,EAAsB2d,SAAUyiB,MAAV,CAAtB,CACA5O,OAAQxxB,MAAQ,CAAhB,EAAsB2d,SAAUyiB,OAAS,CAAnB,CAAtB,CACA5O,OAAQxxB,MAAQ,CAAhB,EAAsB2d,SAAUyiB,OAAS,CAAnB,CAAtB,CAEA,WAAa,EAAIzkB,CAAJ,CAAQ,GAAM,CAAE2D,EAAI,CAAN,EAAY,CAAlB,CAArB,CACAkS,OAAQxxB,MAAQ,CAAhB,EAAsB2d,SAAU0iB,MAAV,CAAtB,CACA7O,OAAQxxB,MAAQ,CAAhB,EAAsB2d,SAAU0iB,OAAS,CAAnB,CAAtB,CACA7O,OAAQxxB,MAAQ,CAAhB,EAAsB2d,SAAU0iB,OAAS,CAAnB,CAAtB,CAEA,CAED,CAED,KAAKqJ,YAAL,CAAmB,UAAnB,CAA+B,UAAU7J,eAAV,CAA2BrO,MAA3B,CAAmC,CAAnC,CAA/B,EAEA,CAED,CAED,CA9KD,CAgLA1yB,MAAMgiH,iBAAN,CAAwBvhH,SAAxB,CAAoCE,OAAOy2B,MAAP,CAAep3B,MAAM+e,cAAN,CAAqBte,SAApC,CAApC,CACAT,MAAMgiH,iBAAN,CAAwBvhH,SAAxB,CAAkCoJ,WAAlC,CAAgD7J,MAAMgiH,iBAAtD;;;;IASAhiH,MAAMoiH,UAAN,CAAmB,SAAWx2G,IAAX,CAAkB,CAEpCA,KAAOA,MAAQ,CAAf,CAEA,aAAe,gBAAA,CAAkB,CAChC,CADgC,CAC7B,CAD6B,CAC1B,CAD0B,CACtBA,IADsB,CAChB,CADgB,CACb,CADa,CAEhC,CAFgC,CAE7B,CAF6B,CAE1B,CAF0B,CAEtB,CAFsB,CAEnBA,IAFmB,CAEb,CAFa,CAGhC,CAHgC,CAG7B,CAH6B,CAG1B,CAH0B,CAGtB,CAHsB,CAGnB,CAHmB,CAGhBA,IAHgB,CAAlB,CAAf,CAMA,WAAa,gBAAA,CAAkB,CAC9B,CAD8B,CAC3B,CAD2B,CACxB,CADwB,CACpB,CADoB,CACjB,GADiB,CACZ,CADY,CAE9B,CAF8B,CAE3B,CAF2B,CAExB,CAFwB,CAEpB,GAFoB,CAEf,CAFe,CAEZ,CAFY,CAG9B,CAH8B,CAG3B,CAH2B,CAGxB,CAHwB,CAGpB,CAHoB,CAGjB,GAHiB,CAGZ,CAHY,CAAlB,CAAb,CAMA,aAAe,UAAUmT,cAAV,EAAf,CACAJ,SAASisB,YAAT,CAAuB,UAAvB,CAAmC,UAAU7J,eAAV,CAA2BliB,QAA3B,CAAqC,CAArC,CAAnC,EACAF,SAASisB,YAAT,CAAuB,OAAvB,CAAgC,UAAU7J,eAAV,CAA2BW,MAA3B,CAAmC,CAAnC,CAAhC,EAEA,aAAe,UAAUi7B,iBAAV,CAA6B,CAAE77B,aAAc9gC,MAAM8C,YAAtB,CAA7B,CAAf,CAEA9C,MAAM6gE,YAAN,CAAmBt/D,IAAnB,CAAyB,IAAzB,CAA+Bod,QAA/B,CAAyC0hB,QAAzC,EAEA,CAxBD,CA0BArgC,MAAMoiH,UAAN,CAAiB3hH,SAAjB,CAA6BE,OAAOy2B,MAAP,CAAep3B,MAAM6gE,YAAN,CAAmBpgE,SAAlC,CAA7B,CACAT,MAAMoiH,UAAN,CAAiB3hH,SAAjB,CAA2BoJ,WAA3B,CAAyC7J,MAAMoiH,UAA/C;;;;;;;;;;;;;;;IAoBApiH,MAAMqiH,WAAN,CAAsB,UAAY,CAEjC,iBAAmB,UAAUtjG,cAAV,EAAnB,CACAujG,aAAa13E,YAAb,CAA2B,UAA3B,CAAuC,UAAUjI,gBAAV,CAA4B,CAAE,CAAF,CAAK,CAAL,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,CAA5B,CAAkD,CAAlD,CAAvC,EAEA,iBAAmB,UAAU+zE,sBAAV,CAAkC,CAAlC,CAAqC,GAArC,CAA0C,CAA1C,CAA6C,CAA7C,CAAgD,CAAhD,CAAnB,CACA6L,aAAa1kG,SAAb,CAAwB,CAAxB,CAA2B,CAAE,GAA7B,CAAkC,CAAlC,EAEA,2BAAO,CAAsB9J,GAAtB,CAA2B+U,MAA3B,CAAmC1nB,MAAnC,CAA2CmK,KAA3C,CAAkDi3G,UAAlD,CAA8DC,SAA9D,CAA0E;CAIhFziH,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,GAAKgK,QAAUpL,SAAf,CAA2BoL,MAAQ,QAAR,CAC3B,GAAKnK,SAAWjB,SAAhB,CAA4BiB,OAAS,CAAT,CAC5B,GAAKohH,aAAeriH,SAApB,CAAgCqiH,WAAa,IAAMphH,MAAnB,CAChC,GAAKqhH,YAActiH,SAAnB,CAA+BsiH,UAAY,IAAMD,UAAlB,CAE/B,KAAKj7F,QAAL,CAAcxd,IAAd,CAAoB+e,MAApB,EAEA,KAAKpN,IAAL,CAAY,UAAUuf,IAAV,CAAgBqnF,YAAhB,CAA8B,UAAU3lD,iBAAV,CAA6B,CAAEpxD,MAAOA,KAAT,CAA7B,CAA9B,CAAZ,CACA,KAAKmQ,IAAL,CAAUwhB,gBAAV,CAA6B,KAA7B,CACA,KAAK9vB,GAAL,CAAU,KAAKsO,IAAf,EAEA,KAAKgnG,IAAL,CAAY,UAAU1nF,IAAV,CAAgBunF,YAAhB,CAA8B,UAAUrlD,iBAAV,CAA6B,CAAE3xD,MAAOA,KAAT,CAA7B,CAA9B,CAAZ,CACA,KAAKm3G,IAAL,CAAUxlF,gBAAV,CAA6B,KAA7B,CACA,KAAK9vB,GAAL,CAAU,KAAKs1G,IAAf,EAEA,KAAKC,YAAL,CAAmB5uG,GAAnB,EACA,KAAKgC,SAAL,CAAgB3U,MAAhB,CAAwBohH,UAAxB,CAAoCC,SAApC,EAEA,CAxBD,CA0BA,CAlCqB,EAAtB,CAoCAziH,MAAMqiH,WAAN,CAAkB5hH,SAAlB,CAA8BE,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAA9B,CACAT,MAAMqiH,WAAN,CAAkB5hH,SAAlB,CAA4BoJ,WAA5B,CAA0C7J,MAAMqiH,WAAhD,CAEAriH,MAAMqiH,WAAN,CAAkB5hH,SAAlB,CAA4BkiH,YAA5B,CAA6C,UAAY,CAExD,SAAW,UAAU5xG,OAAV,EAAX,CACA,WAAA,CAEA,4BAAO,CAAuBgD,GAAvB,CAA6B;CAInC,GAAKA,IAAI3F,CAAJ,CAAQ,OAAb,CAAuB,CAEtB,KAAKQ,UAAL,CAAgBjF,GAAhB,CAAqB,CAArB,CAAwB,CAAxB,CAA2B,CAA3B,CAA8B,CAA9B,EAEA,CAJD,QAIYoK,IAAI3F,CAAJ,CAAQ,CAAE,OAAf,CAAyB,CAE/B,KAAKQ,UAAL,CAAgBjF,GAAhB,CAAqB,CAArB,CAAwB,CAAxB,CAA2B,CAA3B,CAA8B,CAA9B,EAEA,CAJM,IAIA,CAENgG,KAAKhG,GAAL,CAAUoK,IAAI1F,CAAd,CAAiB,CAAjB,CAAoB,CAAE0F,IAAIxT,CAA1B,EAA8B6Q,SAA9B,GAEAigB,QAAUjxB,KAAK8Y,IAAL,CAAWnF,IAAI3F,CAAf,CAAV,CAEA,KAAKQ,UAAL,CAAgBc,gBAAhB,CAAkCC,IAAlC,CAAwC0hB,OAAxC,EAEA,CAED,CAtBD,CAwBA,CA7B4C,EAA7C,CA+BArxB,MAAMqiH,WAAN,CAAkB5hH,SAAlB,CAA4BsV,SAA5B,CAAwC,SAAW3U,MAAX,CAAmBohH,UAAnB,CAA+BC,SAA/B,CAA2C,CAElF,GAAKD,aAAeriH,SAApB,CAAgCqiH,WAAa,IAAMphH,MAAnB,CAChC,GAAKqhH,YAActiH,SAAnB,CAA+BsiH,UAAY,IAAMD,UAAlB,CAE/B,KAAK9mG,IAAL,CAAU+K,KAAV,CAAgB9c,GAAhB,CAAqB,CAArB,CAAwBvJ,KAAKwM,GAAL,CAAU,CAAV,CAAaxL,OAASohH,UAAtB,CAAxB,CAA4D,CAA5D,EACA,KAAK9mG,IAAL,CAAU6jB,YAAV,GAEA,KAAKmjF,IAAL,CAAUj8F,KAAV,CAAgB9c,GAAhB,CAAqB84G,SAArB,CAAgCD,UAAhC,CAA4CC,SAA5C,EACA,KAAKC,IAAL,CAAUn7F,QAAV,CAAmBnZ,CAAnB,CAAuBhN,MAAvB,CACA,KAAKshH,IAAL,CAAUnjF,YAAV,GAEA,CAZD,CAcAv/B,MAAMqiH,WAAN,CAAkB5hH,SAAlB,CAA4BmiH,QAA5B,CAAuC,SAAWr3G,KAAX,CAAmB,CAEzD,KAAKmQ,IAAL,CAAU2kB,QAAV,CAAmB90B,KAAnB,CAAyBxB,IAAzB,CAA+BwB,KAA/B,EACA,KAAKm3G,IAAL,CAAUriF,QAAV,CAAmB90B,KAAnB,CAAyBxB,IAAzB,CAA+BwB,KAA/B,EAEA,CALD;;;IAaAvL,MAAM6iH,SAAN,CAAkB,SAAWtkG,MAAX,CAAoB,CAErC,YAAc,eAAA,CAAiB,CAAE,CAAF,CAAK,CAAL,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,CAA0B,CAA1B,CAA6B,CAA7B,CAAgC,CAAhC,CAAmC,CAAnC,CAAsC,CAAtC,CAAyC,CAAzC,CAA4C,CAA5C,CAA+C,CAA/C,CAAkD,CAAlD,CAAqD,CAArD,CAAwD,CAAxD,CAA2D,CAA3D,CAA8D,CAA9D,CAAiE,CAAjE,CAAoE,CAApE,CAAuE,CAAvE,CAAjB,CAAd,CACA,cAAgB,gBAAA,CAAkB,EAAI,CAAtB,CAAhB,CAEA,aAAe,UAAUQ,cAAV,EAAf,CACAJ,SAASgsB,QAAT,CAAmB,UAAU5J,eAAV,CAA2Ba,OAA3B,CAAoC,CAApC,CAAnB,EACAjjB,SAASisB,YAAT,CAAuB,UAAvB,CAAmC,UAAU7J,eAAV,CAA2B9hB,SAA3B,CAAsC,CAAtC,CAAnC,EAEAjf,MAAM6gE,YAAN,CAAmBt/D,IAAnB,CAAyB,IAAzB,CAA+Bod,QAA/B,CAAyC,UAAUg+C,iBAAV,CAA6B,CAAEpxD,MAAO,QAAT,CAA7B,CAAzC,EAEA,GAAKgT,SAAWpe,SAAhB,CAA4B,CAE3B,KAAK4O,MAAL,CAAawP,MAAb,EAEA,CAED,CAjBD,CAmBAve,MAAM6iH,SAAN,CAAgBpiH,SAAhB,CAA4BE,OAAOy2B,MAAP,CAAep3B,MAAM6gE,YAAN,CAAmBpgE,SAAlC,CAA5B,CACAT,MAAM6iH,SAAN,CAAgBpiH,SAAhB,CAA0BoJ,WAA1B,CAAwC7J,MAAM6iH,SAA9C,CAEA7iH,MAAM6iH,SAAN,CAAgBpiH,SAAhB,CAA0BsO,MAA1B,CAAqC,UAAY,CAEhD,QAAU,UAAU+O,IAAV,EAAV,CAEA,gBAAkBS,MAAX,CAAoB,CAE1B,GAAKA,wBAAwBT,IAA7B,CAAoC,CAEnCb,IAAIlT,IAAJ,CAAUwU,MAAV,EAEA,CAJD,IAIO,CAENtB,IAAIqB,aAAJ,CAAmBC,MAAnB,EAEA,CAED,GAAKtB,IAAIC,OAAJ,EAAL,CAAqB,OAErB,QAAUD,IAAIxR,GAAd,CACA,QAAUwR,IAAIrQ,GAAd;;;;;;;;;;;;;;KAkBA,aAAe,KAAK+R,QAAL,CAAcK,UAAd,CAAyBuI,QAAxC,CACA,UAAYA,SAASvZ,KAArB,CAEAA,MAAQ,CAAR,EAAcpB,IAAIrM,CAAlB,CAAqByN,MAAQ,CAAR,EAAcpB,IAAIwB,CAAlB,CAAqBJ,MAAQ,CAAR,EAAcpB,IAAIyB,CAAlB,CAC1CL,MAAQ,CAAR,EAAcvC,IAAIlL,CAAlB,CAAqByN,MAAQ,CAAR,EAAcpB,IAAIwB,CAAlB,CAAqBJ,MAAQ,CAAR,EAAcpB,IAAIyB,CAAlB,CAC1CL,MAAQ,CAAR,EAAcvC,IAAIlL,CAAlB,CAAqByN,MAAQ,CAAR,EAAcvC,IAAI2C,CAAlB,CAAqBJ,MAAQ,CAAR,EAAcpB,IAAIyB,CAAlB,CAC1CL,MAAQ,CAAR,EAAcpB,IAAIrM,CAAlB,CAAqByN,MAAO,EAAP,EAAcvC,IAAI2C,CAAlB,CAAqBJ,MAAO,EAAP,EAAcpB,IAAIyB,CAAlB,CAC1CL,MAAO,EAAP,EAAcpB,IAAIrM,CAAlB,CAAqByN,MAAO,EAAP,EAAcpB,IAAIwB,CAAlB,CAAqBJ,MAAO,EAAP,EAAcvC,IAAI4C,CAAlB,CAC1CL,MAAO,EAAP,EAAcvC,IAAIlL,CAAlB,CAAqByN,MAAO,EAAP,EAAcpB,IAAIwB,CAAlB,CAAqBJ,MAAO,EAAP,EAAcvC,IAAI4C,CAAlB,CAC1CL,MAAO,EAAP,EAAcvC,IAAIlL,CAAlB,CAAqByN,MAAO,EAAP,EAAcvC,IAAI2C,CAAlB,CAAqBJ,MAAO,EAAP,EAAcvC,IAAI4C,CAAlB,CAC1CL,MAAO,EAAP,EAAcpB,IAAIrM,CAAlB,CAAqByN,MAAO,EAAP,EAAcvC,IAAI2C,CAAlB,CAAqBJ,MAAO,EAAP,EAAcvC,IAAI4C,CAAlB,CAE1CkZ,SAAS2jB,WAAT,CAAuB,IAAvB,CAEA,KAAKvsB,QAAL,CAAcyP,qBAAd,GAEA,CAjDD,CAmDA,CAvDkC,EAAnC;;;;CAiEApuB,MAAM8iH,iBAAN,CAA0B,SAAWvkG,MAAX,CAAmBnU,GAAnB,CAAyB,CAElD,UAAcA,MAAQjK,SAAV,CAAwBiK,GAAxB,CAA8B,QAA1C,CAEA,KAAKmU,MAAL,CAAcA,MAAd,CAEA,KAAKtB,GAAL,CAAW,UAAUa,IAAV,EAAX,CAEA9d,MAAMg7B,IAAN,CAAWz5B,IAAX,CAAiB,IAAjB,CAAuB,UAAUuzG,WAAV,CAAuB,CAAvB,CAA0B,CAA1B,CAA6B,CAA7B,CAAvB,CAAyD,UAAU53C,iBAAV,CAA6B,CAAE3xD,MAAOA,KAAT,CAAgBmrD,UAAW,IAA3B,CAA7B,CAAzD,EAEA,CAVD,CAYA12D,MAAM8iH,iBAAN,CAAwBriH,SAAxB,CAAoCE,OAAOy2B,MAAP,CAAep3B,MAAMg7B,IAAN,CAAWv6B,SAA1B,CAApC,CACAT,MAAM8iH,iBAAN,CAAwBriH,SAAxB,CAAkCoJ,WAAlC,CAAgD7J,MAAM8iH,iBAAtD,CAEA9iH,MAAM8iH,iBAAN,CAAwBriH,SAAxB,CAAkCsO,MAAlC,CAA2C,UAAY,CAEtD,KAAKkO,GAAL,CAASqB,aAAT,CAAwB,KAAKC,MAA7B,EAEA,KAAKtB,GAAL,CAASrR,IAAT,CAAe,KAAK6a,KAApB,EAEA,KAAKxJ,GAAL,CAAS3G,MAAT,CAAiB,KAAKiR,QAAtB,EAEA,CARD;;;;;;;;IAqBAvnB,MAAM+iH,YAAN,CAAqB,SAAWprG,MAAX,CAAoB,CAExC,aAAe,UAAUiH,QAAV,EAAf,CACA,aAAe,UAAU+9C,iBAAV,CAA6B,CAAEpxD,MAAO,QAAT,CAAmBu1B,aAAc9gC,MAAM6C,UAAvC,CAA7B,CAAf,CAEA,aAAe,EAAf;CAIA,eAAiB,QAAjB,CACA,YAAc,QAAd,CACA,UAAY,QAAZ,CACA,cAAgB,QAAhB,CACA,aAAe,QAAf;CAIAmgH,QAAS,IAAT,CAAe,IAAf,CAAqBC,UAArB,EACAD,QAAS,IAAT,CAAe,IAAf,CAAqBC,UAArB,EACAD,QAAS,IAAT,CAAe,IAAf,CAAqBC,UAArB,EACAD,QAAS,IAAT,CAAe,IAAf,CAAqBC,UAArB;CAIAD,QAAS,IAAT,CAAe,IAAf,CAAqBC,UAArB,EACAD,QAAS,IAAT,CAAe,IAAf,CAAqBC,UAArB,EACAD,QAAS,IAAT,CAAe,IAAf,CAAqBC,UAArB,EACAD,QAAS,IAAT,CAAe,IAAf,CAAqBC,UAArB;CAIAD,QAAS,IAAT,CAAe,IAAf,CAAqBC,UAArB,EACAD,QAAS,IAAT,CAAe,IAAf,CAAqBC,UAArB,EACAD,QAAS,IAAT,CAAe,IAAf,CAAqBC,UAArB,EACAD,QAAS,IAAT,CAAe,IAAf,CAAqBC,UAArB;CAIAD,QAAS,GAAT,CAAc,IAAd,CAAoBE,OAApB,EACAF,QAAS,GAAT,CAAc,IAAd,CAAoBE,OAApB,EACAF,QAAS,GAAT,CAAc,IAAd,CAAoBE,OAApB,EACAF,QAAS,GAAT,CAAc,IAAd,CAAoBE,OAApB;CAIAF,QAAS,IAAT,CAAe,IAAf,CAAqBG,KAArB,EACAH,QAAS,IAAT,CAAe,IAAf,CAAqBG,KAArB,EACAH,QAAS,IAAT,CAAe,IAAf,CAAqBG,KAArB;CAIAH,QAAS,GAAT,CAAc,GAAd,CAAmBI,SAAnB,EACAJ,QAAS,GAAT,CAAc,GAAd,CAAmBK,QAAnB;CAIAL,QAAS,KAAT,CAAgB,KAAhB,CAAuBK,QAAvB,EACAL,QAAS,KAAT,CAAgB,KAAhB,CAAuBK,QAAvB,EAEAL,QAAS,KAAT,CAAgB,KAAhB,CAAuBK,QAAvB,EACAL,QAAS,KAAT,CAAgB,KAAhB,CAAuBK,QAAvB,EAEA,gBAAA,CAAkB1xG,CAAlB,CAAqBjI,CAArB,CAAwBU,GAAxB,CAA8B,CAE7Bk5G,SAAU3xG,CAAV,CAAavH,GAAb,EACAk5G,SAAU55G,CAAV,CAAaU,GAAb,EAEA,CAED,iBAAA,CAAmBw0B,EAAnB,CAAuBx0B,GAAvB,CAA6B,CAE5BuU,SAASE,QAAT,CAAkBgV,IAAlB,CAAwB,UAAU9iB,OAAV,EAAxB,EACA4N,SAAS+iB,MAAT,CAAgB7N,IAAhB,CAAsB,UAAUtqB,KAAV,CAAiBa,GAAjB,CAAtB,EAEA,GAAKm5G,SAAU3kF,EAAV,IAAmBz+B,SAAxB,CAAoC,CAEnCojH,SAAU3kF,EAAV,EAAiB,EAAjB,CAEA,CAED2kF,SAAU3kF,EAAV,EAAe/K,IAAf,CAAqBlV,SAASE,QAAT,CAAkBzd,MAAlB,CAA2B,CAAhD,EAEA,CAEDpB,MAAM6gE,YAAN,CAAmBt/D,IAAnB,CAAyB,IAAzB,CAA+Bod,QAA/B,CAAyC0hB,QAAzC,EAEA,KAAK1oB,MAAL,CAAcA,MAAd,CACA,KAAKA,MAAL,CAAY6xC,sBAAZ,GAEA,KAAK5xC,MAAL,CAAcD,OAAOM,WAArB,CACA,KAAKilB,gBAAL,CAAwB,KAAxB,CAEA,KAAKqmF,QAAL,CAAgBA,QAAhB,CAEA,KAAKx0G,MAAL,GAEA,CAhGD,CAkGA/O,MAAM+iH,YAAN,CAAmBtiH,SAAnB,CAA+BE,OAAOy2B,MAAP,CAAep3B,MAAM6gE,YAAN,CAAmBpgE,SAAlC,CAA/B,CACAT,MAAM+iH,YAAN,CAAmBtiH,SAAnB,CAA6BoJ,WAA7B,CAA2C7J,MAAM+iH,YAAjD,CAEA/iH,MAAM+iH,YAAN,CAAmBtiH,SAAnB,CAA6BsO,MAA7B,CAAsC,UAAY,CAEjD,YAAA,CAAcw0G,QAAd,CAEA,WAAa,UAAUxyG,OAAV,EAAb,CACA,WAAa,UAAUg3C,MAAV,EAAb,CAEA,iBAAA,CAAmB/rC,KAAnB,CAA0Bzb,CAA1B,CAA6B6N,CAA7B,CAAgCC,CAAhC,CAAoC,CAEnCuK,OAAOjP,GAAP,CAAYpJ,CAAZ,CAAe6N,CAAf,CAAkBC,CAAlB,EAAsB6J,SAAtB,CAAiCP,MAAjC,EAEA,WAAa4rG,SAAUvnG,KAAV,CAAb,CAEA,GAAKU,SAAWvc,SAAhB,CAA4B,CAE3B,IAAM,MAAQ,CAAR,CAAWyc,GAAKF,OAAOtb,MAA7B,CAAqCyb,EAAID,EAAzC,CAA6CC,GAA7C,CAAoD,CAEnD8B,SAASE,QAAT,CAAmBnC,OAAQG,CAAR,CAAnB,EAAiC9S,IAAjC,CAAuC6O,MAAvC,EAEA,CAED,CAED,CAED,iBAAmB,CAElB+F,SAAW,KAAKA,QAAhB,CACA4kG,SAAW,KAAKA,QAAhB,CAEA,MAAQ,CAAR,CAAW74G,EAAI,CAAf;;CAKAiN,OAAOI,gBAAP,CAAwBhO,IAAxB,CAA8B,KAAK4N,MAAL,CAAYI,gBAA1C;CAIAyrG,SAAU,GAAV,CAAe,CAAf,CAAkB,CAAlB,CAAqB,CAAE,CAAvB,EACAA,SAAU,GAAV,CAAe,CAAf,CAAkB,CAAlB,CAAsB,CAAtB;CAIAA,SAAU,IAAV,CAAgB,CAAEl1G,CAAlB,CAAqB,CAAE5D,CAAvB,CAA0B,CAAE,CAA5B,EACA84G,SAAU,IAAV,CAAkBl1G,CAAlB,CAAqB,CAAE5D,CAAvB,CAA0B,CAAE,CAA5B,EACA84G,SAAU,IAAV,CAAgB,CAAEl1G,CAAlB,CAAuB5D,CAAvB,CAA0B,CAAE,CAA5B,EACA84G,SAAU,IAAV,CAAkBl1G,CAAlB,CAAuB5D,CAAvB,CAA0B,CAAE,CAA5B;CAIA84G,SAAU,IAAV,CAAgB,CAAEl1G,CAAlB,CAAqB,CAAE5D,CAAvB,CAA0B,CAA1B,EACA84G,SAAU,IAAV,CAAkBl1G,CAAlB,CAAqB,CAAE5D,CAAvB,CAA0B,CAA1B,EACA84G,SAAU,IAAV,CAAgB,CAAEl1G,CAAlB,CAAuB5D,CAAvB,CAA0B,CAA1B,EACA84G,SAAU,IAAV,CAAkBl1G,CAAlB,CAAuB5D,CAAvB,CAA0B,CAA1B;CAIA84G,SAAU,IAAV,CAAkBl1G,EAAI,GAAtB,CAA2B5D,EAAI,GAA/B,CAAoC,CAAE,CAAtC,EACA84G,SAAU,IAAV,CAAgB,CAAEl1G,CAAF,CAAM,GAAtB,CAA2B5D,EAAI,GAA/B,CAAoC,CAAE,CAAtC,EACA84G,SAAU,IAAV,CAAwB,CAAxB,CAA2B94G,EAAI,CAA/B,CAAoC,CAAE,CAAtC;CAIA84G,SAAU,KAAV,CAAiB,CAAEl1G,CAAnB,CAAwB,CAAxB,CAA2B,CAA3B,EACAk1G,SAAU,KAAV,CAAmBl1G,CAAnB,CAAwB,CAAxB,CAA2B,CAA3B,EACAk1G,SAAU,KAAV,CAAmB,CAAnB,CAAsB,CAAE94G,CAAxB,CAA2B,CAA3B,EACA84G,SAAU,KAAV,CAAmB,CAAnB,CAAwB94G,CAAxB,CAA2B,CAA3B,EAEA84G,SAAU,KAAV,CAAiB,CAAEl1G,CAAnB,CAAwB,CAAxB,CAA2B,CAAE,CAA7B,EACAk1G,SAAU,KAAV,CAAmBl1G,CAAnB,CAAwB,CAAxB,CAA2B,CAAE,CAA7B,EACAk1G,SAAU,KAAV,CAAmB,CAAnB,CAAsB,CAAE94G,CAAxB,CAA2B,CAAE,CAA7B,EACA84G,SAAU,KAAV,CAAmB,CAAnB,CAAwB94G,CAAxB,CAA2B,CAAE,CAA7B,EAEAiU,SAASklB,kBAAT,CAA8B,IAA9B,CAEA,CAnDD,CAqDA,CA9EqC,EAAtC;;;;;IAwFA7jC,MAAMyjH,sBAAN,CAA+B,SAAWr3D,KAAX,CAAkBxgD,IAAlB,CAAyB,CAEvD5L,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAK6qD,KAAL,CAAaA,KAAb,CACA,KAAKA,KAAL,CAAW5tC,iBAAX,GAEA,KAAK5G,MAAL,CAAcw0C,MAAMn0C,WAApB,CACA,KAAKilB,gBAAL,CAAwB,KAAxB,CAEA,GAAKtxB,OAASzL,SAAd,CAA0ByL,KAAO,CAAP,CAE1B,aAAe,UAAUmT,cAAV,EAAf,CACAJ,SAASisB,YAAT,CAAuB,UAAvB,CAAmC,UAAUjI,gBAAV,CAA4B,CAC9D,CAAE/2B,IAD4D,CACpDA,IADoD,CAC9C,CAD8C,CAE5DA,IAF4D,CAEpDA,IAFoD,CAE9C,CAF8C,CAG5DA,IAH4D,CAGtD,CAAEA,IAHoD,CAG9C,CAH8C,CAI9D,CAAEA,IAJ4D,CAItD,CAAEA,IAJoD,CAI9C,CAJ8C,CAK9D,CAAEA,IAL4D,CAKpDA,IALoD,CAK9C,CAL8C,CAA5B,CAMhC,CANgC,CAAnC,EAQA,aAAe,UAAU+wD,iBAAV,CAA6B,CAAEvB,IAAK,KAAP,CAA7B,CAAf,CAEA,KAAKhuD,GAAL,CAAU,UAAU6tB,IAAV,CAAgBtc,QAAhB,CAA0B0hB,QAA1B,CAAV,EAEA1hB,SAAW,UAAUI,cAAV,EAAX,CACAJ,SAASisB,YAAT,CAAuB,UAAvB,CAAmC,UAAUjI,gBAAV,CAA4B,CAAE,CAAF,CAAK,CAAL,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,CAA5B,CAAkD,CAAlD,CAAnC,EAEA,KAAKv1B,GAAL,CAAU,UAAU6tB,IAAV,CAAgBtc,QAAhB,CAA0B0hB,QAA1B,CAAV,EAEA,KAAKtxB,MAAL,GAEA,CAhCD,CAkCA/O,MAAMyjH,sBAAN,CAA6BhjH,SAA7B,CAAyCE,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAzC,CACAT,MAAMyjH,sBAAN,CAA6BhjH,SAA7B,CAAuCoJ,WAAvC,CAAqD7J,MAAMyjH,sBAA3D,CAEAzjH,MAAMyjH,sBAAN,CAA6BhjH,SAA7B,CAAuCipC,OAAvC,CAAiD,UAAY,CAE5D,eAAiB,KAAK7N,QAAL,CAAe,CAAf,CAAjB,CACA,eAAiB,KAAKA,QAAL,CAAe,CAAf,CAAjB,CAEA6nF,WAAW/kG,QAAX,CAAoB+qB,OAApB,GACAg6E,WAAWrjF,QAAX,CAAoBqJ,OAApB,GACAi6E,WAAWhlG,QAAX,CAAoB+qB,OAApB,GACAi6E,WAAWtjF,QAAX,CAAoBqJ,OAApB,GAEA,CAVD,CAYA1pC,MAAMyjH,sBAAN,CAA6BhjH,SAA7B,CAAuCsO,MAAvC,CAAgD,UAAY,CAE3D,OAAS,UAAUgC,OAAV,EAAT,CACA,OAAS,UAAUA,OAAV,EAAT,CACA,OAAS,UAAUA,OAAV,EAAT,CAEA,iBAAmB,CAElBD,GAAG2I,qBAAH,CAA0B,KAAK2yC,KAAL,CAAWn0C,WAArC,EACAhC,GAAGwD,qBAAH,CAA0B,KAAK2yC,KAAL,CAAWnrD,MAAX,CAAkBgX,WAA5C,EACA2Z,GAAGhd,UAAH,CAAeqB,EAAf,CAAmBnF,EAAnB,EAEA,eAAiB,KAAK+qB,QAAL,CAAe,CAAf,CAAjB,CACA,eAAiB,KAAKA,QAAL,CAAe,CAAf,CAAjB,CAEA6nF,WAAWz/F,MAAX,CAAmB2N,EAAnB,EACA8xF,WAAWrjF,QAAX,CAAoB90B,KAApB,CAA0BxB,IAA1B,CAAgC,KAAKqiD,KAAL,CAAW7gD,KAA3C,EAAmDmC,cAAnD,CAAmE,KAAK0+C,KAAL,CAAWZ,SAA9E,EAEAm4D,WAAW1/F,MAAX,CAAmB2N,EAAnB,EACA+xF,WAAWl9F,KAAX,CAAiBpY,CAAjB,CAAqBujB,GAAGxwB,MAAH,EAArB,CAEA,CAfD,CAiBA,CAvB+C,EAAhD;;;;;;;;;IAqCApB,MAAM4jH,WAAN,CAAoB,SAAWrlG,MAAX,CAAmBnU,GAAnB,CAAwButG,cAAxB,CAAyC,CAE5D,UAAcvtG,MAAQjK,SAAV,CAAwBiK,GAAxB,CAA8B,QAA1C,CAEApK,MAAM6gE,YAAN,CAAmBt/D,IAAnB,CAAyB,IAAzB,CAA+B,UAAUm2G,aAAV,CAAyBn5F,OAAOI,QAAhC,CAA0Cg5F,cAA1C,CAA/B,CAA2F,UAAUh7C,iBAAV,CAA6B,CAAEpxD,MAAOA,KAAT,CAA7B,CAA3F,EAEA,KAAKqM,MAAL,CAAc2G,OAAOtG,WAArB,CACA,KAAKilB,gBAAL,CAAwB,KAAxB,CAEA,CATD,CAWAl9B,MAAM4jH,WAAN,CAAkBnjH,SAAlB,CAA8BE,OAAOy2B,MAAP,CAAep3B,MAAM6gE,YAAN,CAAmBpgE,SAAlC,CAA9B,CACAT,MAAM4jH,WAAN,CAAkBnjH,SAAlB,CAA4BoJ,WAA5B,CAA0C7J,MAAM4jH,WAAhD;;;;GASA5jH,MAAM6jH,iBAAN,CAA0B,SAAWtlG,MAAX,CAAmB3S,IAAnB,CAAyBxB,GAAzB,CAA8BwyD,SAA9B,CAA0C;CAInE,KAAKr+C,MAAL,CAAcA,MAAd,CAEA,KAAK3S,IAAL,CAAcA,OAASzL,SAAX,CAAyByL,IAAzB,CAAgC,CAA5C,CAEA,UAAcxB,MAAQjK,SAAV,CAAwBiK,GAAxB,CAA8B,QAA1C,CAEA,UAAcwyD,YAAcz8D,SAAhB,CAA8By8D,SAA9B,CAA0C,CAAtD;CAIA,aAAe,CAAf,CAEA,gBAAkB,KAAKr+C,MAAL,CAAYI,QAA9B,CAEA,GAAKmlG,6BAA6BllG,QAAlC,CAA6C,CAE5CmlG,SAAWD,YAAYzgF,KAAZ,CAAkBjiC,MAA7B,CAEA,CAJD,IAIO,CAEN+J,QAAQC,IAAR,CAAc,oGAAd,EAEA;CAID,aAAe,UAAU2T,cAAV,EAAf,CAEA,cAAgB,UAAU4jB,gBAAV,CAA4BohF,SAAW,CAAX,CAAe,CAA3C,CAA8C,CAA9C,CAAhB,CAEAplG,SAASisB,YAAT,CAAuB,UAAvB,CAAmC3rB,SAAnC,EAEAjf,MAAM6gE,YAAN,CAAmBt/D,IAAnB,CAAyB,IAAzB,CAA+Bod,QAA/B,CAAyC,UAAUg+C,iBAAV,CAA6B,CAAEpxD,MAAOA,KAAT,CAAgBqxD,UAAWlS,KAA3B,CAA7B,CAAzC;CAIA,KAAKxtB,gBAAL,CAAwB,KAAxB,CACA,KAAKnuB,MAAL,GAEA,CA3CD,CA6CA/O,MAAM6jH,iBAAN,CAAwBpjH,SAAxB,CAAoCE,OAAOy2B,MAAP,CAAep3B,MAAM6gE,YAAN,CAAmBpgE,SAAlC,CAApC,CACAT,MAAM6jH,iBAAN,CAAwBpjH,SAAxB,CAAkCoJ,WAAlC,CAAgD7J,MAAM6jH,iBAAtD,CAEA7jH,MAAM6jH,iBAAN,CAAwBpjH,SAAxB,CAAkCsO,MAAlC,CAA6C,UAAY,CAExD,OAAS,UAAUgC,OAAV,EAAT,CACA,OAAS,UAAUA,OAAV,EAAT,CACA,iBAAmB,UAAU2O,OAAV,EAAnB,CAEA,sBAAO,EAAkB,CAExB,KAAKnB,MAAL,CAAYC,iBAAZ,CAA+B,IAA/B,EAEA+Q,aAAa7N,eAAb,CAA8B,KAAKnD,MAAL,CAAYtG,WAA1C,EAEA,gBAAkB,KAAKsG,MAAL,CAAYtG,WAA9B,CAEA,aAAe,KAAK0G,QAAL,CAAcK,UAAd,CAAyBuI,QAAxC;CAIA,gBAAkB,KAAKhJ,MAAL,CAAYI,QAA9B,CAEA,aAAemlG,YAAYjlG,QAA3B,CAEA,UAAYilG,YAAYzgF,KAAxB,CAEA,QAAU,CAAV,CAEA,IAAM,MAAQ,CAAR,CAAWz4B,EAAIy4B,MAAMjiC,MAA3B,CAAmCyb,EAAIjS,CAAvC,CAA0CiS,GAA1C,CAAiD,CAEhD,SAAWwmB,MAAOxmB,CAAP,CAAX,CAEA,WAAawnB,KAAKrrB,MAAlB,CAEAlI,GAAG/G,IAAH,CAAS8U,SAAUwlB,KAAK1yB,CAAf,CAAT,EACEvE,GADF,CACOyR,SAAUwlB,KAAK36B,CAAf,CADP,EAEE0D,GAFF,CAEOyR,SAAUwlB,KAAKv2B,CAAf,CAFP,EAGEkH,YAHF,CAGgB,CAHhB,EAIE+B,YAJF,CAIgBkB,WAJhB,EAMAhC,GAAGlM,IAAH,CAASiP,MAAT,EAAkBnC,YAAlB,CAAgC0Y,YAAhC,EAA+Cne,SAA/C,GAA2D1D,cAA3D,CAA2E,KAAK9B,IAAhF,EAAuFwB,GAAvF,CAA4F0D,EAA5F,EAEAyW,SAASzG,MAAT,CAAiBknB,GAAjB,CAAsBl3B,GAAGvQ,CAAzB,CAA4BuQ,GAAG1C,CAA/B,CAAkC0C,GAAGzC,CAArC,EAEA25B,IAAMA,IAAM,CAAZ,CAEAzgB,SAASzG,MAAT,CAAiBknB,GAAjB,CAAsB/xB,GAAG1V,CAAzB,CAA4B0V,GAAG7H,CAA/B,CAAkC6H,GAAG5H,CAArC,EAEA25B,IAAMA,IAAM,CAAZ,CAEA,CAEDzgB,SAAS2jB,WAAT,CAAuB,IAAvB,CAEA,WAAA,CAEA,CAhDD,CAkDA,CAxD4C,EAA7C;;;IAgEAlrC,MAAMgkH,UAAN,CAAmB,SAAWp4G,IAAX,CAAiBk1D,IAAjB,CAAuBxzD,MAAvB,CAA+BC,MAA/B,CAAwC,CAE1DD,OAAS,UAAU/D,KAAV,CAAiB+D,SAAWnN,SAAX,CAAuBmN,MAAvB,CAAgC,QAAjD,CAAT,CACAC,OAAS,UAAUhE,KAAV,CAAiBgE,SAAWpN,SAAX,CAAuBoN,MAAvB,CAAgC,QAAjD,CAAT,CAEA,aAAe,EAAf,CACA,WAAa,EAAb,CAEA,IAAM,MAAQ,CAAE3B,IAAV,CAAgB4U,EAAI,CAA1B,CAA6B3D,GAAKjR,IAAlC,CAAwCiR,GAAKikD,IAA7C,CAAoD,CAEnDjiD,SAASgV,IAAT,CAAe,CAAEjoB,IAAjB,CAAuB,CAAvB,CAA0BiR,CAA1B,CAA6BjR,IAA7B,CAAmC,CAAnC,CAAsCiR,CAAtC,EACAgC,SAASgV,IAAT,CAAehX,CAAf,CAAkB,CAAlB,CAAqB,CAAEjR,IAAvB,CAA6BiR,CAA7B,CAAgC,CAAhC,CAAmCjR,IAAnC,EAEA,UAAYiR,IAAM,CAAN,CAAUvP,MAAV,CAAmBC,MAA/B,CAEAhC,MAAM2C,OAAN,CAAewzB,MAAf,CAAuBlhB,CAAvB,EAA4BA,GAAK,CAAL,CAC5BjV,MAAM2C,OAAN,CAAewzB,MAAf,CAAuBlhB,CAAvB,EAA4BA,GAAK,CAAL,CAC5BjV,MAAM2C,OAAN,CAAewzB,MAAf,CAAuBlhB,CAAvB,EAA4BA,GAAK,CAAL,CAC5BjV,MAAM2C,OAAN,CAAewzB,MAAf,CAAuBlhB,CAAvB,EAA4BA,GAAK,CAAL,CAE5B,CAED,aAAe,UAAUzB,cAAV,EAAf,CACAJ,SAASisB,YAAT,CAAuB,UAAvB,CAAmC,UAAUjI,gBAAV,CAA4B9jB,QAA5B,CAAsC,CAAtC,CAAnC,EACAF,SAASisB,YAAT,CAAuB,OAAvB,CAAgC,UAAUjI,gBAAV,CAA4BjB,MAA5B,CAAoC,CAApC,CAAhC,EAEA,aAAe,UAAUi7B,iBAAV,CAA6B,CAAE77B,aAAc9gC,MAAM8C,YAAtB,CAA7B,CAAf,CAEA9C,MAAM6gE,YAAN,CAAmBt/D,IAAnB,CAAyB,IAAzB,CAA+Bod,QAA/B,CAAyC0hB,QAAzC,EAEA,CA9BD,CAgCArgC,MAAMgkH,UAAN,CAAiBvjH,SAAjB,CAA6BE,OAAOy2B,MAAP,CAAep3B,MAAM6gE,YAAN,CAAmBpgE,SAAlC,CAA7B,CACAT,MAAMgkH,UAAN,CAAiBvjH,SAAjB,CAA2BoJ,WAA3B,CAAyC7J,MAAMgkH,UAA/C,CAEAhkH,MAAMgkH,UAAN,CAAiBvjH,SAAjB,CAA2BwjH,SAA3B,CAAuC,UAAY,CAElD94G,QAAQuL,KAAR,CAAe,0FAAf,EAEA,CAJD;;;;IAaA1W,MAAMkkH,qBAAN,CAA8B,SAAW93D,KAAX,CAAkB+3D,UAAlB,CAA+B,CAE5DnkH,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAK6qD,KAAL,CAAaA,KAAb,CACA,KAAKA,KAAL,CAAW5tC,iBAAX,GAEA,KAAK5G,MAAL,CAAcw0C,MAAMn0C,WAApB,CACA,KAAKilB,gBAAL,CAAwB,KAAxB,CAEA,KAAKwE,MAAL,CAAc,CAAE,UAAUn4B,KAAV,EAAF,CAAqB,UAAUA,KAAV,EAArB,CAAd,CAEA,aAAe,UAAU00G,cAAV,CAA0BkG,UAA1B,CAAsC,CAAtC,CAAyC,CAAzC,CAAf,CACAxlG,SAASsf,OAAT,CAAkB,CAAE79B,KAAKsV,EAAP,CAAY,CAA9B,EAEA,IAAM,MAAQ,CAAR,CAAWkH,GAAK,CAAtB,CAAyBC,EAAID,EAA7B,CAAiCC,GAAjC,CAAwC,CAEvC8B,SAAS0kB,KAAT,CAAgBxmB,CAAhB,EAAoBtR,KAApB,CAA4B,KAAKm2B,MAAL,CAAa7kB,EAAI,CAAJ,CAAQ,CAAR,CAAY,CAAzB,CAA5B,CAEA,CAED,aAAe,UAAUqgD,iBAAV,CAA6B,CAAEp8B,aAAc9gC,MAAM6C,UAAtB,CAAkC6zD,UAAW,IAA7C,CAA7B,CAAf,CAEA,KAAK0tD,WAAL,CAAmB,UAAUppF,IAAV,CAAgBrc,QAAhB,CAA0B0hB,QAA1B,CAAnB,CACA,KAAKjzB,GAAL,CAAU,KAAKg3G,WAAf,EAEA,KAAKr1G,MAAL,GAEA,CA5BD,CA8BA/O,MAAMkkH,qBAAN,CAA4BzjH,SAA5B,CAAwCE,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAxC,CACAT,MAAMkkH,qBAAN,CAA4BzjH,SAA5B,CAAsCoJ,WAAtC,CAAoD7J,MAAMkkH,qBAA1D,CAEAlkH,MAAMkkH,qBAAN,CAA4BzjH,SAA5B,CAAsCipC,OAAtC,CAAgD,UAAY,CAE3D,KAAK06E,WAAL,CAAiBzlG,QAAjB,CAA0B+qB,OAA1B,GACA,KAAK06E,WAAL,CAAiB/jF,QAAjB,CAA0BqJ,OAA1B,GAEA,CALD,CAOA1pC,MAAMkkH,qBAAN,CAA4BzjH,SAA5B,CAAsCsO,MAAtC,CAA+C,UAAY,CAE1D,WAAa,UAAUgC,OAAV,EAAb,CAEA,iBAAmB,CAElB,KAAK2wB,MAAL,CAAa,CAAb,EAAiB33B,IAAjB,CAAuB,KAAKqiD,KAAL,CAAW7gD,KAAlC,EAA0CmC,cAA1C,CAA0D,KAAK0+C,KAAL,CAAWZ,SAArE,EACA,KAAK9pB,MAAL,CAAa,CAAb,EAAiB33B,IAAjB,CAAuB,KAAKqiD,KAAL,CAAWX,WAAlC,EAAgD/9C,cAAhD,CAAgE,KAAK0+C,KAAL,CAAWZ,SAA3E,EAEA,KAAK44D,WAAL,CAAiBngG,MAAjB,CAAyBrL,OAAOa,qBAAP,CAA8B,KAAK2yC,KAAL,CAAWn0C,WAAzC,EAAuDzC,MAAvD,EAAzB,EACA,KAAK4uG,WAAL,CAAiBzlG,QAAjB,CAA0BslB,gBAA1B,CAA6C,IAA7C,CAEA,CARD,CAUA,CAd8C,EAA/C;;;;IAuBAjkC,MAAMqkH,gBAAN,CAAyB,SAAWj4D,KAAX,CAAkB+3D,UAAlB,CAA+B,CAEvD,KAAK/3D,KAAL,CAAaA,KAAb,CACA,KAAKA,KAAL,CAAW5tC,iBAAX,GAEA,aAAe,UAAU0/F,oBAAV,CAAgCiG,UAAhC,CAA4C,CAA5C,CAA+C,CAA/C,CAAf,CACA,aAAe,UAAUjnD,iBAAV,CAA6B,CAAExG,UAAW,IAAb,CAAmB0E,IAAK,KAAxB,CAA7B,CAAf,CACA/6B,SAAS90B,KAAT,CAAexB,IAAf,CAAqB,KAAKqiD,KAAL,CAAW7gD,KAAhC,EAAwCmC,cAAxC,CAAwD,KAAK0+C,KAAL,CAAWZ,SAAnE,EAEAxrD,MAAMg7B,IAAN,CAAWz5B,IAAX,CAAiB,IAAjB,CAAuBod,QAAvB,CAAiC0hB,QAAjC,EAEA,KAAKzoB,MAAL,CAAc,KAAKw0C,KAAL,CAAWn0C,WAAzB,CACA,KAAKilB,gBAAL,CAAwB,KAAxB;;;;;;;;;;;;;;;;;;;;KAZD,CAsCAl9B,MAAMqkH,gBAAN,CAAuB5jH,SAAvB,CAAmCE,OAAOy2B,MAAP,CAAep3B,MAAMg7B,IAAN,CAAWv6B,SAA1B,CAAnC,CACAT,MAAMqkH,gBAAN,CAAuB5jH,SAAvB,CAAiCoJ,WAAjC,CAA+C7J,MAAMqkH,gBAArD,CAEArkH,MAAMqkH,gBAAN,CAAuB5jH,SAAvB,CAAiCipC,OAAjC,CAA2C,UAAY,CAEtD,KAAK/qB,QAAL,CAAc+qB,OAAd,GACA,KAAKrJ,QAAL,CAAcqJ,OAAd,GAEA,CALD,CAOA1pC,MAAMqkH,gBAAN,CAAuB5jH,SAAvB,CAAiCsO,MAAjC,CAA0C,UAAY,CAErD,KAAKsxB,QAAL,CAAc90B,KAAd,CAAoBxB,IAApB,CAA0B,KAAKqiD,KAAL,CAAW7gD,KAArC,EAA6CmC,cAA7C,CAA6D,KAAK0+C,KAAL,CAAWZ,SAAxE;;;;;;;;;;;;;KAFD;;;;;;IA8BAxrD,MAAMskH,cAAN,CAAuB,SAAW/lG,MAAX,CAAoB,CAE1C,KAAK02B,KAAL,CAAa,KAAKsvE,WAAL,CAAkBhmG,MAAlB,CAAb,CAEA,aAAe,UAAUK,QAAV,EAAf,CAEA,IAAM,MAAQ,CAAd,CAAiB/B,EAAI,KAAKo4B,KAAL,CAAW7zC,MAAhC,CAAwCyb,GAAxC,CAA+C,CAE9C,SAAW,KAAKo4B,KAAL,CAAYp4B,CAAZ,CAAX,CAEA,GAAK+lC,KAAKjmB,MAAL,kBAA6B6mC,IAAlC,CAAyC,CAExC7kD,SAASE,QAAT,CAAkBgV,IAAlB,CAAwB,UAAU9iB,OAAV,EAAxB,EACA4N,SAASE,QAAT,CAAkBgV,IAAlB,CAAwB,UAAU9iB,OAAV,EAAxB,EACA4N,SAAS+iB,MAAT,CAAgB7N,IAAhB,CAAsB,UAAUtqB,KAAV,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,CAAtB,EACAoV,SAAS+iB,MAAT,CAAgB7N,IAAhB,CAAsB,UAAUtqB,KAAV,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,CAAtB,EAEA,CAED,CAEDoV,SAASsiB,OAAT,CAAmB,IAAnB,CAEA,aAAe,UAAU07B,iBAAV,CAA6B,CAAE77B,aAAc9gC,MAAM8C,YAAtB,CAAoCyzD,UAAW,KAA/C,CAAsDC,WAAY,KAAlE,CAAyE7E,YAAa,IAAtF,CAA7B,CAAf,CAEA3xD,MAAM6gE,YAAN,CAAmBt/D,IAAnB,CAAyB,IAAzB,CAA+Bod,QAA/B,CAAyC0hB,QAAzC,EAEA,KAAKgW,IAAL,CAAY93B,MAAZ,CAEA,KAAK3G,MAAL,CAAc2G,OAAOtG,WAArB,CACA,KAAKilB,gBAAL,CAAwB,KAAxB,CAEA,KAAKnuB,MAAL,GAEA,CAlCD,CAqCA/O,MAAMskH,cAAN,CAAqB7jH,SAArB,CAAiCE,OAAOy2B,MAAP,CAAep3B,MAAM6gE,YAAN,CAAmBpgE,SAAlC,CAAjC,CACAT,MAAMskH,cAAN,CAAqB7jH,SAArB,CAA+BoJ,WAA/B,CAA6C7J,MAAMskH,cAAnD,CAEAtkH,MAAMskH,cAAN,CAAqB7jH,SAArB,CAA+B8jH,WAA/B,CAA6C,SAAUhmG,MAAV,CAAmB,CAE/D,aAAe,EAAf,CAEA,GAAKA,wBAAwBilD,IAA7B,CAAoC,CAEnCghD,SAAS3wF,IAAT,CAAetV,MAAf,EAEA,CAED,IAAM,MAAQ,CAAd,CAAiB1B,EAAI0B,OAAOsd,QAAP,CAAgBz6B,MAArC,CAA6Cyb,GAA7C,CAAoD,CAEnD2nG,SAAS3wF,IAAT,CAAcokB,KAAd,CAAqBusE,QAArB,CAA+B,KAAKD,WAAL,CAAkBhmG,OAAOsd,QAAP,CAAiBhf,CAAjB,CAAlB,CAA/B,EAEA,CAED,eAAA,CAEA,CAlBD,CAoBA7c,MAAMskH,cAAN,CAAqB7jH,SAArB,CAA+BsO,MAA/B,CAAwC,UAAY,CAEnD,aAAe,KAAK4P,QAApB,CAEA,mBAAqB,UAAU9G,OAAV,GAAoBG,UAApB,CAAgC,KAAKq+B,IAAL,CAAUp+B,WAA1C,CAArB,CAEA,eAAiB,UAAUJ,OAAV,EAAjB,CAEA,MAAQ,CAAR,CAEA,IAAM,MAAQ,CAAd,CAAiBgF,EAAI,KAAKo4B,KAAL,CAAW7zC,MAAhC,CAAwCyb,GAAxC,CAA+C,CAE9C,SAAW,KAAKo4B,KAAL,CAAYp4B,CAAZ,CAAX,CAEA,GAAK+lC,KAAKjmB,MAAL,kBAA6B6mC,IAAlC,CAAyC,CAExCihD,WAAW3sG,gBAAX,CAA6B4sG,cAA7B,CAA6C9hE,KAAK3qC,WAAlD,EACA0G,SAASE,QAAT,CAAmB2B,CAAnB,EAAuB/G,qBAAvB,CAA8CgrG,UAA9C,EAEAA,WAAW3sG,gBAAX,CAA6B4sG,cAA7B,CAA6C9hE,KAAKjmB,MAAL,CAAY1kB,WAAzD,EACA0G,SAASE,QAAT,CAAmB2B,EAAI,CAAvB,EAA2B/G,qBAA3B,CAAkDgrG,UAAlD,EAEAjkG,GAAK,CAAL,CAEA,CAED,CAED7B,SAASklB,kBAAT,CAA8B,IAA9B,CAEAllB,SAASyP,qBAAT,GAEA,CAhCD;;;;;GA0CApuB,MAAM2kH,eAAN,CAAwB,SAAWv4D,KAAX,CAAmB,CAE1CpsD,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAK6qD,KAAL,CAAaA,KAAb,CACA,KAAKA,KAAL,CAAW5tC,iBAAX,GAEA,KAAK5G,MAAL,CAAcw0C,MAAMn0C,WAApB,CACA,KAAKilB,gBAAL,CAAwB,KAAxB,CAEA,aAAe,UAAUne,cAAV,EAAf,CAEA,cAAgB,CACf,CADe,CACZ,CADY,CACT,CADS,CACJ,CADI,CACC,CADD,CACM,CADN,CAEf,CAFe,CAEZ,CAFY,CAET,CAFS,CAEJ,CAFI,CAEC,CAFD,CAEM,CAFN,CAGf,CAHe,CAGZ,CAHY,CAGT,CAHS,CAGN,CAAE,CAHI,CAGC,CAHD,CAGM,CAHN,CAIf,CAJe,CAIZ,CAJY,CAIT,CAJS,CAIJ,CAJI,CAIC,CAJD,CAIM,CAJN,CAKf,CALe,CAKZ,CALY,CAKT,CALS,CAKJ,CALI,CAKD,CAAE,CALD,CAKM,CALN,CAAhB,CAQA,IAAM,MAAQ,CAAR,CAAWyB,EAAI,CAAf,CAAkB5V,EAAI,EAA5B,CAAgCiS,EAAIjS,CAApC,CAAuCiS,IAAM2D,GAA7C,CAAoD,CAEnD,OAAW3D,EAAIjS,CAAN,CAAYxK,KAAKsV,EAAjB,CAAsB,CAA/B,CACA,OAAW8K,EAAI5V,CAAN,CAAYxK,KAAKsV,EAAjB,CAAsB,CAA/B,CAEAuJ,UAAU4U,IAAV,CACCzzB,KAAK6O,GAAL,CAAUud,EAAV,CADD,CACiBpsB,KAAK8O,GAAL,CAAUsd,EAAV,CADjB,CACiC,CADjC,CAECpsB,KAAK6O,GAAL,CAAUwd,EAAV,CAFD,CAEiBrsB,KAAK8O,GAAL,CAAUud,EAAV,CAFjB,CAEiC,CAFjC,EAKA,CAED9N,SAASisB,YAAT,CAAuB,UAAvB,CAAmC,UAAUjI,gBAAV,CAA4B1jB,SAA5B,CAAuC,CAAvC,CAAnC,EAEA,aAAe,UAAU09C,iBAAV,CAA6B,CAAEvB,IAAK,KAAP,CAA7B,CAAf,CAEA,KAAKsnD,IAAL,CAAY,UAAU7hD,YAAV,CAAwBliD,QAAxB,CAAkC0hB,QAAlC,CAAZ,CACA,KAAKjzB,GAAL,CAAU,KAAKs1G,IAAf,EAEA,KAAK3zG,MAAL,GAEA,CAzCD,CA2CA/O,MAAM2kH,eAAN,CAAsBlkH,SAAtB,CAAkCE,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAlC,CACAT,MAAM2kH,eAAN,CAAsBlkH,SAAtB,CAAgCoJ,WAAhC,CAA8C7J,MAAM2kH,eAApD,CAEA3kH,MAAM2kH,eAAN,CAAsBlkH,SAAtB,CAAgCipC,OAAhC,CAA0C,UAAY,CAErD,KAAKg5E,IAAL,CAAU/jG,QAAV,CAAmB+qB,OAAnB,GACA,KAAKg5E,IAAL,CAAUriF,QAAV,CAAmBqJ,OAAnB,GAEA,CALD,CAOA1pC,MAAM2kH,eAAN,CAAsBlkH,SAAtB,CAAgCsO,MAAhC,CAAyC,UAAY,CAEpD,WAAa,UAAUgC,OAAV,EAAb,CACA,YAAc,UAAUA,OAAV,EAAd,CAEA,iBAAmB,CAElB,eAAiB,KAAKq7C,KAAL,CAAWxwC,QAAX,CAAsB,KAAKwwC,KAAL,CAAWxwC,QAAjC,CAA4C,IAA7D,CACA,cAAgBgpG,WAAaxkH,KAAKkoB,GAAL,CAAU,KAAK8jC,KAAL,CAAWx8C,KAArB,CAA7B,CAEA,KAAK8yG,IAAL,CAAUj8F,KAAV,CAAgB9c,GAAhB,CAAqBk7G,SAArB,CAAgCA,SAAhC,CAA2CD,UAA3C,EAEAhsG,OAAOa,qBAAP,CAA8B,KAAK2yC,KAAL,CAAWn0C,WAAzC,EACA6sG,QAAQrrG,qBAAR,CAA+B,KAAK2yC,KAAL,CAAWnrD,MAAX,CAAkBgX,WAAjD,EAEA,KAAKyqG,IAAL,CAAUz+F,MAAV,CAAkB6gG,QAAQnwG,GAAR,CAAaiE,MAAb,CAAlB,EAEA,KAAK8pG,IAAL,CAAUriF,QAAV,CAAmB90B,KAAnB,CAAyBxB,IAAzB,CAA+B,KAAKqiD,KAAL,CAAW7gD,KAA1C,EAAkDmC,cAAlD,CAAkE,KAAK0+C,KAAL,CAAWZ,SAA7E,EAEA,CAdD,CAgBA,CArBwC,EAAzC;;;;GA8BAxrD,MAAM+kH,mBAAN,CAA4B,SAAWxmG,MAAX,CAAmB3S,IAAnB,CAAyBxB,GAAzB,CAA8BwyD,SAA9B,CAA0C,CAErE,KAAKr+C,MAAL,CAAcA,MAAd,CAEA,KAAK3S,IAAL,CAAcA,OAASzL,SAAX,CAAyByL,IAAzB,CAAgC,CAA5C,CAEA,UAAcxB,MAAQjK,SAAV,CAAwBiK,GAAxB,CAA8B,QAA1C,CAEA,UAAcwyD,YAAcz8D,SAAhB,CAA8By8D,SAA9B,CAA0C,CAAtD;CAIA,aAAe,CAAf,CAEA,gBAAkB,KAAKr+C,MAAL,CAAYI,QAA9B,CAEA,GAAKmlG,6BAA6BllG,QAAlC,CAA6C,CAE5CmlG,SAAWD,YAAYzgF,KAAZ,CAAkBjiC,MAAlB,CAA2B,CAAtC,CAEA,CAJD,QAIY0iH,6BAA6B/kG,cAAlC,CAAmD,CAEzDglG,SAAWD,YAAY9kG,UAAZ,CAAuBhG,MAAvB,CAA8BmoB,KAAzC,CAEA;CAID,aAAe,UAAUpiB,cAAV,EAAf,CAEA,cAAgB,UAAU4jB,gBAAV,CAA4BohF,SAAW,CAAX,CAAe,CAA3C,CAA8C,CAA9C,CAAhB,CAEAplG,SAASisB,YAAT,CAAuB,UAAvB,CAAmC3rB,SAAnC,EAEAjf,MAAM6gE,YAAN,CAAmBt/D,IAAnB,CAAyB,IAAzB,CAA+Bod,QAA/B,CAAyC,UAAUg+C,iBAAV,CAA6B,CAAEpxD,MAAOA,KAAT,CAAgBqxD,UAAWlS,KAA3B,CAA7B,CAAzC;CAIA,KAAKxtB,gBAAL,CAAwB,KAAxB,CAEA,KAAKnuB,MAAL,GAEA,CA1CD,CA4CA/O,MAAM+kH,mBAAN,CAA0BtkH,SAA1B,CAAsCE,OAAOy2B,MAAP,CAAep3B,MAAM6gE,YAAN,CAAmBpgE,SAAlC,CAAtC,CACAT,MAAM+kH,mBAAN,CAA0BtkH,SAA1B,CAAoCoJ,WAApC,CAAkD7J,MAAM+kH,mBAAxD,CAEA/kH,MAAM+kH,mBAAN,CAA0BtkH,SAA1B,CAAoCsO,MAApC,CAA+C,UAAY,CAE1D,OAAS,UAAUgC,OAAV,EAAT,CACA,OAAS,UAAUA,OAAV,EAAT,CACA,iBAAmB,UAAU2O,OAAV,EAAnB,CAEA,sBAAO,EAAkB,CAExB,SAAW,CAAE,GAAF,CAAO,GAAP,CAAY,GAAZ,CAAX,CAEA,KAAKnB,MAAL,CAAYC,iBAAZ,CAA+B,IAA/B,EAEA+Q,aAAa7N,eAAb,CAA8B,KAAKnD,MAAL,CAAYtG,WAA1C,EAEA,gBAAkB,KAAKsG,MAAL,CAAYtG,WAA9B,CAEA,aAAe,KAAK0G,QAAL,CAAcK,UAAd,CAAyBuI,QAAxC;CAIA,gBAAkB,KAAKhJ,MAAL,CAAYI,QAA9B,CAEA,GAAKmlG,6BAA6BllG,QAAlC,CAA6C,CAE5C,aAAeklG,YAAYjlG,QAA3B,CAEA,UAAYilG,YAAYzgF,KAAxB,CAEA,QAAU,CAAV,CAEA,IAAM,MAAQ,CAAR,CAAWz4B,EAAIy4B,MAAMjiC,MAA3B,CAAmCyb,EAAIjS,CAAvC,CAA0CiS,GAA1C,CAAiD,CAEhD,SAAWwmB,MAAOxmB,CAAP,CAAX,CAEA,IAAM,MAAQ,CAAR,CAAWynB,GAAKD,KAAKxD,aAAL,CAAmBz/B,MAAzC,CAAiDof,EAAI8jB,EAArD,CAAyD9jB,GAAzD,CAAgE,CAE/D,WAAa3B,SAAUwlB,KAAMsR,KAAMn1B,CAAN,CAAN,CAAV,CAAb,CAEA,WAAa6jB,KAAKxD,aAAL,CAAoBrgB,CAApB,CAAb,CAEA1P,GAAG/G,IAAH,CAASq6B,MAAT,EAAkBrtB,YAAlB,CAAgCkB,WAAhC,EAEAhC,GAAGlM,IAAH,CAASiP,MAAT,EAAkBnC,YAAlB,CAAgC0Y,YAAhC,EAA+Cne,SAA/C,GAA2D1D,cAA3D,CAA2E,KAAK9B,IAAhF,EAAuFwB,GAAvF,CAA4F0D,EAA5F,EAEAyW,SAASzG,MAAT,CAAiBknB,GAAjB,CAAsBl3B,GAAGvQ,CAAzB,CAA4BuQ,GAAG1C,CAA/B,CAAkC0C,GAAGzC,CAArC,EAEA25B,IAAMA,IAAM,CAAZ,CAEAzgB,SAASzG,MAAT,CAAiBknB,GAAjB,CAAsB/xB,GAAG1V,CAAzB,CAA4B0V,GAAG7H,CAA/B,CAAkC6H,GAAG5H,CAArC,EAEA25B,IAAMA,IAAM,CAAZ,CAEA,CAED,CAED,CAlCD,QAkCY87E,6BAA6B/kG,cAAlC,CAAmD,CAEzD,WAAa+kG,YAAY9kG,UAAZ,CAAuBuI,QAApC,CAEA,YAAcu8F,YAAY9kG,UAAZ,CAAuBhG,MAArC,CAEA,QAAU,CAAV;CAIA,IAAM,MAAQ,CAAR,CAAWsrB,GAAK0gF,OAAO7jF,KAA7B,CAAoC3gB,EAAI8jB,EAAxC,CAA4C9jB,GAA5C,CAAmD,CAElD1P,GAAGnH,GAAH,CAAQq7G,OAAOrkG,IAAP,CAAaH,CAAb,CAAR,CAA0BwkG,OAAOpkG,IAAP,CAAaJ,CAAb,CAA1B,CAA4CwkG,OAAOnkG,IAAP,CAAaL,CAAb,CAA5C,EAA+DzJ,YAA/D,CAA6EkB,WAA7E,EAEAhC,GAAGtM,GAAH,CAAQs7G,QAAQtkG,IAAR,CAAcH,CAAd,CAAR,CAA2BykG,QAAQrkG,IAAR,CAAcJ,CAAd,CAA3B,CAA8CykG,QAAQpkG,IAAR,CAAcL,CAAd,CAA9C,EAEAvK,GAAGY,YAAH,CAAiB0Y,YAAjB,EAAgCne,SAAhC,GAA4C1D,cAA5C,CAA4D,KAAK9B,IAAjE,EAAwEwB,GAAxE,CAA6E0D,EAA7E,EAEAyW,SAASzG,MAAT,CAAiBknB,GAAjB,CAAsBl3B,GAAGvQ,CAAzB,CAA4BuQ,GAAG1C,CAA/B,CAAkC0C,GAAGzC,CAArC,EAEA25B,IAAMA,IAAM,CAAZ,CAEAzgB,SAASzG,MAAT,CAAiBknB,GAAjB,CAAsB/xB,GAAG1V,CAAzB,CAA4B0V,GAAG7H,CAA/B,CAAkC6H,GAAG5H,CAArC,EAEA25B,IAAMA,IAAM,CAAZ,CAEA,CAED,CAEDzgB,SAAS2jB,WAAT,CAAuB,IAAvB,CAEA,WAAA,CAEA,CApFD,CAsFA,CA5F8C,EAA/C;;;IAoGAlrC,MAAMklH,eAAN,CAAwB,SAAW3mG,MAAX,CAAmBnU,GAAnB,CAAyB,CAEhD,UAAcA,MAAQjK,SAAV,CAAwBiK,GAAxB,CAA8B,QAA1C,CAEApK,MAAM6gE,YAAN,CAAmBt/D,IAAnB,CAAyB,IAAzB,CAA+B,UAAUygH,iBAAV,CAA6BzjG,OAAOI,QAApC,CAA/B,CAA+E,UAAUg+C,iBAAV,CAA6B,CAAEpxD,MAAOA,KAAT,CAA7B,CAA/E,EAEA,KAAKqM,MAAL,CAAc2G,OAAOtG,WAArB,CACA,KAAKilB,gBAAL,CAAwB,KAAxB,CAEA,CATD,CAWAl9B,MAAMklH,eAAN,CAAsBzkH,SAAtB,CAAkCE,OAAOy2B,MAAP,CAAep3B,MAAM6gE,YAAN,CAAmBpgE,SAAlC,CAAlC,CACAT,MAAMklH,eAAN,CAAsBzkH,SAAtB,CAAgCoJ,WAAhC,CAA8C7J,MAAMklH,eAApD;;;IAQAllH,MAAM42E,qBAAN,CAA8B,SAAWv2C,QAAX,CAAsB,CAEnDrgC,MAAMy8B,QAAN,CAAel7B,IAAf,CAAqB,IAArB,EAEA,KAAK8+B,QAAL,CAAgBA,QAAhB,CACA,KAAKgpB,MAAL,CAAc,SAAW87D,cAAX,CAA4B,EAA1C,CAEA,CAPD,CASAnlH,MAAM42E,qBAAN,CAA4Bn2E,SAA5B,CAAwCE,OAAOy2B,MAAP,CAAep3B,MAAMy8B,QAAN,CAAeh8B,SAA9B,CAAxC,CACAT,MAAM42E,qBAAN,CAA4Bn2E,SAA5B,CAAsCoJ,WAAtC,CAAoD7J,MAAM42E,qBAA1D;;;IAQA52E,MAAMolH,cAAN,CAAuB,SAAUzmG,QAAV,CAAoB0hB,QAApB,CAA+B,CAErDrgC,MAAMg7B,IAAN,CAAWz5B,IAAX,CAAiB,IAAjB,CAAuBod,QAAvB,CAAiC0hB,QAAjC,EAEA,KAAKglF,aAAL,CAAqB,EAArB,CACA,KAAKC,cAAL,CAAsB,EAAtB;;CAKA,cAAgB,KAAK3mG,QAAL,CAAc4kB,YAAd,CAA2BniC,MAA3C,CAEA,SAAW,WAAX,CAEA,eAAiB,CAAjB,CACA,aAAemkH,UAAY,CAA3B,CAEA,QAAUA,UAAY,CAAtB,CAEA,KAAKC,eAAL,CAAsB9kH,IAAtB,CAA4B+kH,UAA5B,CAAwCC,QAAxC,CAAkDjyE,GAAlD,EACA,KAAKkyE,kBAAL,CAAyBjlH,IAAzB,CAA+B,CAA/B,EAEA,CAtBD,CAwBAV,MAAMolH,cAAN,CAAqB3kH,SAArB,CAAiCE,OAAOy2B,MAAP,CAAep3B,MAAMg7B,IAAN,CAAWv6B,SAA1B,CAAjC,CACAT,MAAMolH,cAAN,CAAqB3kH,SAArB,CAA+BoJ,WAA/B,CAA6C7J,MAAMolH,cAAnD,CAEAplH,MAAMolH,cAAN,CAAqB3kH,SAArB,CAA+B+kH,eAA/B,CAAiD,SAAW9kH,IAAX,CAAiB8a,KAAjB,CAAwBC,GAAxB,CAA6Bg4B,GAA7B,CAAmC,CAEnF,cAAgB,CAEfj4B,MAAOA,KAFQ,CAGfC,IAAKA,GAHU,CAKfra,OAAQqa,IAAMD,KAAN,CAAc,CALP,CAOfi4B,IAAKA,GAPU,CAQf3D,SAAU,CAAEr0B,IAAMD,KAAR,EAAkBi4B,GARb,CAUfmyE,UAAW,CAVI,CAWfC,aAAc,CAXC,CAafC,OAAQ,KAbO,CAefx3E,KAAM,CAfS,CAgBfvlB,UAAW,CAhBI,CAiBf+I,OAAQ,CAjBO,CAmBfi0F,mBAAoB,KAnBL,CAoBfC,aAAc,KApBC,CAAhB,CAwBA,KAAKX,aAAL,CAAoB3kH,IAApB,EAA6Bs0C,SAA7B,CACA,KAAKswE,cAAL,CAAoBzxF,IAApB,CAA0BmhB,SAA1B,EAEA,CA7BD,CA+BAh1C,MAAMolH,cAAN,CAAqB3kH,SAArB,CAA+BwlH,oBAA/B,CAAsD,SAAWxyE,GAAX,CAAiB,CAEtE,YAAc,kBAAd,CAEA,kBAAA,CAAoByyE,YAAc,EAAlC,CAEA,aAAe,KAAKvnG,QAApB,CAEA,IAAM,MAAQ,CAAR,CAAW/B,GAAK+B,SAAS4kB,YAAT,CAAsBniC,MAA5C,CAAoDyb,EAAID,EAAxD,CAA4DC,GAA5D,CAAmE,CAElE,UAAY8B,SAAS4kB,YAAT,CAAuB1mB,CAAvB,CAAZ,CACA,WAAaspG,MAAMzlH,IAAN,CAAWK,KAAX,CAAkB2zC,OAAlB,CAAb,CAEA,GAAKvhB,QAAUA,OAAO/xB,MAAP,CAAgB,CAA/B,CAAmC,CAElC,SAAW+xB,OAAQ,CAAR,CAAX,CAEA,GAAK,CAAE+yF,YAAaxlH,IAAb,CAAP,CAA6BwlH,YAAaxlH,IAAb,EAAsB,CAAE8a,MAAOgB,QAAT,CAAmBf,IAAK,CAAEe,QAA1B,CAAtB,CAE7B,UAAY0pG,YAAaxlH,IAAb,CAAZ,CAEA,GAAKmc,EAAIoU,MAAMzV,KAAf,CAAuByV,MAAMzV,KAAN,CAAcqB,CAAd,CACvB,GAAKA,EAAIoU,MAAMxV,GAAf,CAAqBwV,MAAMxV,GAAN,CAAYoB,CAAZ,CAErB,GAAK,CAAEupG,cAAP,CAAwBA,eAAiB1lH,IAAjB,CAExB,CAED,CAED,IAAM,QAAN,eAAA,CAAgC,CAE/B,UAAYwlH,YAAaxlH,IAAb,CAAZ,CACA,KAAK8kH,eAAL,CAAsB9kH,IAAtB,CAA4BuwB,MAAMzV,KAAlC,CAAyCyV,MAAMxV,GAA/C,CAAoDg4B,GAApD,EAEA,CAED,KAAK2yE,cAAL,CAAsBA,cAAtB,CAEA,CAvCD,CAyCApmH,MAAMolH,cAAN,CAAqB3kH,SAArB,CAA+B4lH,4BAA/B,CAA8D,SAAW3lH,IAAX,CAAkB,CAE/E,cAAgB,KAAK2kH,aAAL,CAAoB3kH,IAApB,CAAhB,CAEA,GAAKs0C,SAAL,CAAiB,CAEhBA,UAAUjsB,SAAV,CAAsB,CAAtB,CACAisB,UAAU+wE,kBAAV,CAA+B,KAA/B,CAEA,CAED,CAXD,CAaA/lH,MAAMolH,cAAN,CAAqB3kH,SAArB,CAA+B6lH,6BAA/B,CAA+D,SAAW5lH,IAAX,CAAkB,CAEhF,cAAgB,KAAK2kH,aAAL,CAAoB3kH,IAApB,CAAhB,CAEA,GAAKs0C,SAAL,CAAiB,CAEhBA,UAAUjsB,SAAV,CAAsB,CAAE,CAAxB,CACAisB,UAAU+wE,kBAAV,CAA+B,IAA/B,CAEA,CAED,CAXD,CAaA/lH,MAAMolH,cAAN,CAAqB3kH,SAArB,CAA+B8lH,eAA/B,CAAiD,SAAW7lH,IAAX,CAAiB+yC,GAAjB,CAAuB,CAEvE,cAAgB,KAAK4xE,aAAL,CAAoB3kH,IAApB,CAAhB,CAEA,GAAKs0C,SAAL,CAAiB,CAEhBA,UAAUvB,GAAV,CAAgBA,GAAhB,CACAuB,UAAUlF,QAAV,CAAqB,CAAEkF,UAAUv5B,GAAV,CAAgBu5B,UAAUx5B,KAA5B,EAAsCw5B,UAAUvB,GAArE,CAEA,CAED,CAXD,CAaAzzC,MAAMolH,cAAN,CAAqB3kH,SAArB,CAA+B+lH,oBAA/B,CAAsD,SAAW9lH,IAAX,CAAiBovC,QAAjB,CAA4B,CAEjF,cAAgB,KAAKu1E,aAAL,CAAoB3kH,IAApB,CAAhB,CAEA,GAAKs0C,SAAL,CAAiB,CAEhBA,UAAUlF,QAAV,CAAqBA,QAArB,CACAkF,UAAUvB,GAAV,CAAgB,CAAEuB,UAAUv5B,GAAV,CAAgBu5B,UAAUx5B,KAA5B,EAAsCw5B,UAAUlF,QAAhE,CAEA,CAED,CAXD,CAaA9vC,MAAMolH,cAAN,CAAqB3kH,SAArB,CAA+BklH,kBAA/B,CAAoD,SAAWjlH,IAAX,CAAiBoxB,MAAjB,CAA0B,CAE7E,cAAgB,KAAKuzF,aAAL,CAAoB3kH,IAApB,CAAhB,CAEA,GAAKs0C,SAAL,CAAiB,CAEhBA,UAAUljB,MAAV,CAAmBA,MAAnB,CAEA,CAED,CAVD,CAYA9xB,MAAMolH,cAAN,CAAqB3kH,SAArB,CAA+BgmH,gBAA/B,CAAkD,SAAW/lH,IAAX,CAAiB4tC,IAAjB,CAAwB,CAEzE,cAAgB,KAAK+2E,aAAL,CAAoB3kH,IAApB,CAAhB,CAEA,GAAKs0C,SAAL,CAAiB,CAEhBA,UAAU1G,IAAV,CAAiBA,IAAjB,CAEA,CAED,CAVD,CAYAtuC,MAAMolH,cAAN,CAAqB3kH,SAArB,CAA+BimH,gBAA/B,CAAkD,SAAWhmH,IAAX,CAAkB,CAEnE,SAAW,CAAX,CAEA,cAAgB,KAAK2kH,aAAL,CAAoB3kH,IAApB,CAAhB,CAEA,GAAKs0C,SAAL,CAAiB,CAEhB1G,KAAO0G,UAAU1G,IAAjB,CAEA,CAED,WAAA,CAEA,CAdD,CAgBAtuC,MAAMolH,cAAN,CAAqB3kH,SAArB,CAA+BkmH,oBAA/B,CAAsD,SAAWjmH,IAAX,CAAkB,CAEvE,aAAe,CAAE,CAAjB,CAEA,cAAgB,KAAK2kH,aAAL,CAAoB3kH,IAApB,CAAhB,CAEA,GAAKs0C,SAAL,CAAiB,CAEhBlF,SAAWkF,UAAUlF,QAArB,CAEA,CAED,eAAA,CAEA,CAdD,CAgBA9vC,MAAMolH,cAAN,CAAqB3kH,SAArB,CAA+BmmH,aAA/B,CAA+C,SAAWlmH,IAAX,CAAkB,CAEhE,cAAgB,KAAK2kH,aAAL,CAAoB3kH,IAApB,CAAhB,CAEA,GAAKs0C,SAAL,CAAiB,CAEhBA,UAAU1G,IAAV,CAAiB,CAAjB,CACA0G,UAAU8wE,MAAV,CAAmB,IAAnB,CAEA,CALD,IAKO,CAEN36G,QAAQC,IAAR,CAAc,mCAAqC1K,IAArC,CAA4C,iCAA1D,EAEA,CAED,CAfD,CAiBAV,MAAMolH,cAAN,CAAqB3kH,SAArB,CAA+BomH,aAA/B,CAA+C,SAAWnmH,IAAX,CAAkB,CAEhE,cAAgB,KAAK2kH,aAAL,CAAoB3kH,IAApB,CAAhB,CAEA,GAAKs0C,SAAL,CAAiB,CAEhBA,UAAU8wE,MAAV,CAAmB,KAAnB,CAEA,CAED,CAVD,CAYA9lH,MAAMolH,cAAN,CAAqB3kH,SAArB,CAA+BsO,MAA/B,CAAwC,SAAW/B,KAAX,CAAmB,CAE1D,IAAM,MAAQ,CAAR,CAAW4P,GAAK,KAAK0oG,cAAL,CAAoBlkH,MAA1C,CAAkDyb,EAAID,EAAtD,CAA0DC,GAA1D,CAAiE,CAEhE,cAAgB,KAAKyoG,cAAL,CAAqBzoG,CAArB,CAAhB,CAEA,GAAK,CAAEm4B,UAAU8wE,MAAjB,CAA0B,SAE1B,cAAgB9wE,UAAUlF,QAAV,CAAqBkF,UAAU5zC,MAA/C,CAEA4zC,UAAU1G,IAAV,EAAkB0G,UAAUjsB,SAAV,CAAsB/b,KAAxC,CAEA,GAAKgoC,UAAUgxE,YAAf,CAA8B,CAE7B,GAAKhxE,UAAU1G,IAAV,CAAiB0G,UAAUlF,QAA3B,EAAuCkF,UAAU1G,IAAV,CAAiB,CAA7D,CAAiE,CAEhE0G,UAAUjsB,SAAV,EAAuB,CAAE,CAAzB,CAEA,GAAKisB,UAAU1G,IAAV,CAAiB0G,UAAUlF,QAAhC,CAA2C,CAE1CkF,UAAU1G,IAAV,CAAiB0G,UAAUlF,QAA3B,CACAkF,UAAU+wE,kBAAV,CAA+B,IAA/B,CAEA,CAED,GAAK/wE,UAAU1G,IAAV,CAAiB,CAAtB,CAA0B,CAEzB0G,UAAU1G,IAAV,CAAiB,CAAjB,CACA0G,UAAU+wE,kBAAV,CAA+B,KAA/B,CAEA,CAED,CAED,CAtBD,IAsBO,CAEN/wE,UAAU1G,IAAV,CAAiB0G,UAAU1G,IAAV,CAAiB0G,UAAUlF,QAA5C,CAEA,GAAKkF,UAAU1G,IAAV,CAAiB,CAAtB,CAA0B0G,UAAU1G,IAAV,EAAkB0G,UAAUlF,QAA5B,CAE1B,CAED,aAAekF,UAAUx5B,KAAV,CAAkBxb,MAAMI,IAAN,CAAW0K,KAAX,CAAkB1K,KAAKiK,KAAL,CAAY2qC,UAAU1G,IAAV,CAAiBkF,SAA7B,CAAlB,CAA4D,CAA5D,CAA+DwB,UAAU5zC,MAAV,CAAmB,CAAlF,CAAjC,CACA,WAAa4zC,UAAUljB,MAAvB,CAEA,GAAKg1F,WAAa9xE,UAAU6wE,YAA5B,CAA2C,CAE1C,KAAKlkD,qBAAL,CAA4B3sB,UAAU4wE,SAAtC,EAAoD,CAApD,CACA,KAAKjkD,qBAAL,CAA4B3sB,UAAU6wE,YAAtC,EAAuD,EAAI/zF,MAA3D,CAEA,KAAK6vC,qBAAL,CAA4BmlD,QAA5B,EAAyC,CAAzC,CAEA9xE,UAAU4wE,SAAV,CAAsB5wE,UAAU6wE,YAAhC,CACA7wE,UAAU6wE,YAAV,CAAyBiB,QAAzB,CAEA,CAED,QAAY9xE,UAAU1G,IAAV,CAAiBkF,SAAnB,CAAiCA,SAA3C,CAEA,GAAKwB,UAAU+wE,kBAAf,CAAoCriE,IAAM,EAAIA,GAAV,CAEpC,GAAK1O,UAAU6wE,YAAV,GAA2B7wE,UAAU4wE,SAA1C,CAAsD,CAErD,KAAKjkD,qBAAL,CAA4B3sB,UAAU6wE,YAAtC,EAAuDniE,IAAM5xB,MAA7D,CACA,KAAK6vC,qBAAL,CAA4B3sB,UAAU4wE,SAAtC,EAAoD,CAAE,EAAIliE,GAAN,EAAc5xB,MAAlE,CAEA,CALD,IAKO,CAEN,KAAK6vC,qBAAL,CAA4B3sB,UAAU6wE,YAAtC,EAAuD/zF,MAAvD,CAEA,CAED,CAED,CA1ED;;;;AAiFA,CAAoC,CAClC,GAAI,AAAiC/xB,OAAOgnH,OAA5C,CAAqD,CACnDA,QAAUhnH,cAAA,CAAiBC,KAA3B,CACD,CACD+mH,aAAA,CAAgB/mH,KAAhB,CACD,CALD;;;CCrxxCA;CACA,GAAC,UAASmU,CAAT,EAAW2C,CAAX,EAAa;CAAC,IAAuD/W,cAAA,GAAe+W,GAAtE,AAAA;CAAuI,GAAtJ,EAAwJkwG,cAAxJ,EAA6J,YAAU;CAAC,QAAI7yG,IAAE,SAAFA,CAAE,GAAU;CAAC,eAAS2C,CAAT,CAAWnF,CAAX,EAAa;CAAC7D,UAAEm5G,WAAF,CAAct1G,EAAEu1G,GAAhB,EAAqB,OAAOv1G,CAAP;CAAS,gBAAS+iB,CAAT,CAAW/iB,CAAX,EAAa;CAAC,aAAI,IAAIsF,IAAE,CAAV,EAAYA,IAAEnJ,EAAE+tB,QAAF,CAAWz6B,MAAzB,EAAgC6V,GAAhC;CAAoCnJ,YAAE+tB,QAAF,CAAW5kB,CAAX,EAAcjM,KAAd,CAAoBm8G,OAApB,GAA4BlwG,MAAItF,CAAJ,GAAM,OAAN,GAAc,MAA1C;CAApC,SAAqF/G,IAAE+G,CAAF;CAAI,WAAI/G,IAAE,CAAN;CAAA,UAAQkD,IAAEslD,SAASC,aAAT,CAAuB,KAAvB,CAAV,CAAwCvlD,EAAE9C,KAAF,CAAQo8G,OAAR,GAAgB,sEAAhB,CAAuFt5G,EAAE4rB,gBAAF,CAAmB,OAAnB,EAA2B,UAAS/nB,CAAT,EAAW;CAACA,UAAEq9D,cAAF;CAClft6C,UAAE,EAAE9pB,CAAF,GAAIkD,EAAE+tB,QAAF,CAAWz6B,MAAjB;CAAyB,OADkb,EACjb,CAAC,CADgb,EAC7a,IAAImxB,IAAE,CAAC2G,eAAaC,IAAd,EAAoBC,GAApB,EAAN;CAAA,UAAgC3vB,IAAE8oB,CAAlC;CAAA,UAAoC5gB,IAAE,CAAtC;CAAA,UAAwCnI,IAAEsN,EAAE,IAAI3C,EAAEkzG,KAAN,CAAY,KAAZ,EAAkB,MAAlB,EAAyB,MAAzB,CAAF,CAA1C;CAAA,UAA8E38G,IAAEoM,EAAE,IAAI3C,EAAEkzG,KAAN,CAAY,IAAZ,EAAiB,MAAjB,EAAwB,MAAxB,CAAF,CAAhF,CAAmH,IAAGC,KAAKpuF,WAAL,IAAkBouF,KAAKpuF,WAAL,CAAiBqyC,MAAtC,EAA6C,IAAI9gE,IAAEqM,EAAE,IAAI3C,EAAEkzG,KAAN,CAAY,IAAZ,EAAiB,MAAjB,EAAwB,MAAxB,CAAF,CAAN,CAAyC3yF,EAAE,CAAF,EAAK,OAAM,EAAC50B,UAAS,EAAV,EAAaonH,KAAIp5G,CAAjB,EAAmBy5G,UAASzwG,CAA5B,EAA8B0wG,WAAU9yF,CAAxC,EAA0C+yF,OAAM,iBAAU;CAACl1F,cAAE,CAAC2G,eAAaC,IAAd,EAAoBC,GAApB,EAAF;CAA4B,SAAvF,EAAwF3d,KAAI,eAAU;CAAC9J,cAAI,IAAI7D,IAAE,CAACorB,eAAaC,IAAd,EAAoBC,GAApB,EAAN,CAAgC1uB,EAAEqE,MAAF,CAASjB,IAAEykB,CAAX,EAAa,GAAb,EAAkB,IAAGzkB,IAAErE,IAAE,GAAJ,KAAUD,EAAEuF,MAAF,CAAS,MAAI4C,CAAJ,IAAO7D,IAAErE,CAAT,CAAT,EAAqB,GAArB,GAA0BA,IAAEqE,CAA5B,EAA8B6D,IAAE,CAAhC,EAAkClH,CAA5C,CAAH,EAAkD;CAAC,gBAAIwM,IAAEiiB,YAAYqyC,MAAlB,CAAyB9gE,EAAEsE,MAAF,CAASkI,EAAEywG,cAAF,GACpe,OAD2d,EACndzwG,EAAE0wG,eAAF,GAAkB,OADic;CACxb,kBAAO75G,CAAP;CAAS,SADsM,EACrMiB,QAAO,kBAAU;CAACwjB,cAAE,KAAK9W,GAAL,EAAF;CAAa,SADsK,EACrKmsD,YAAW95D,CAD0J,EACxJ2lE,SAAQ/+C,CADgJ,EAAN;CACvI,KAFmE,CAElEvgB,EAAEkzG,KAAF,GAAQ,UAASvwG,CAAT,EAAW3C,CAAX,EAAavJ,CAAb,EAAe;CAAC,UAAIkD,IAAE0O,QAAN;CAAA,UAAe+V,IAAE,CAAjB;CAAA,UAAmB9oB,IAAErJ,KAAKkV,KAA1B;CAAA,UAAgC3D,IAAElI,EAAE68C,OAAOshE,gBAAP,IAAyB,CAA3B,CAAlC;CAAA,UAAgEp+G,IAAE,KAAGmI,CAArE;CAAA,UAAuEjH,IAAE,KAAGiH,CAA5E;CAAA,UAA8ElH,IAAE,IAAEkH,CAAlF;CAAA,UAAoFJ,IAAE,IAAEI,CAAxF;CAAA,UAA0FsF,IAAE,IAAEtF,CAA9F;CAAA,UAAgGtG,IAAE,KAAGsG,CAArG;CAAA,UAAuGyS,IAAE,KAAGzS,CAA5G;CAAA,UAA8GpH,IAAE,KAAGoH,CAAnH;CAAA,UAAqHnH,IAAE4oD,SAASC,aAAT,CAAuB,QAAvB,CAAvH,CAAwJ7oD,EAAEkgD,KAAF,GAAQlhD,CAAR,CAAUgB,EAAEmgD,MAAF,GAASjgD,CAAT,CAAWF,EAAEQ,KAAF,CAAQo8G,OAAR,GAAgB,wBAAhB,CAAyC,IAAI19G,IAAEc,EAAEm1D,UAAF,CAAa,IAAb,CAAN,CAAyBj2D,EAAEupD,IAAF,GAAO,UAAQ,IAAEthD,CAAV,GAAY,+BAAnB,CAAmDjI,EAAEm+G,YAAF,GAAe,KAAf,CAAqBn+G,EAAE2zF,SAAF,GAAYzyF,CAAZ,CAAclB,EAAE4zF,QAAF,CAAW,CAAX,EAAa,CAAb,EAAe9zF,CAAf,EAAiBkB,CAAjB,EAAoBhB,EAAE2zF,SAAF,GAAYlpF,CAAZ,CAAczK,EAAEo+G,QAAF,CAAWhxG,CAAX,EAAarM,CAAb,EAAe8G,CAAf;CACre7H,QAAE4zF,QAAF,CAAWrmF,CAAX,EAAa5L,CAAb,EAAe+Y,CAAf,EAAiB7Z,CAAjB,EAAoBb,EAAE2zF,SAAF,GAAYzyF,CAAZ,CAAclB,EAAEq+G,WAAF,GAAc,EAAd,CAAiBr+G,EAAE4zF,QAAF,CAAWrmF,CAAX,EAAa5L,CAAb,EAAe+Y,CAAf,EAAiB7Z,CAAjB,EAAoB,OAAM,EAAC28G,KAAI18G,CAAL,EAAOuE,QAAO,gBAASrE,CAAT,EAAW4D,CAAX,EAAa;CAACR,cAAE1N,KAAKqL,GAAL,CAASqC,CAAT,EAAWpD,CAAX,CAAF,CAAgB6nB,IAAEnyB,KAAKwM,GAAL,CAAS2lB,CAAT,EAAW7nB,CAAX,CAAF,CAAgBhB,EAAE2zF,SAAF,GAAYzyF,CAAZ,CAAclB,EAAEq+G,WAAF,GAAc,CAAd,CAAgBr+G,EAAE4zF,QAAF,CAAW,CAAX,EAAa,CAAb,EAAe9zF,CAAf,EAAiB6B,CAAjB,EAAoB3B,EAAE2zF,SAAF,GAAYlpF,CAAZ,CAAczK,EAAEo+G,QAAF,CAAWr+G,EAAEiB,CAAF,IAAK,GAAL,GAASoM,CAAT,GAAW,IAAX,GAAgBrN,EAAEqE,CAAF,CAAhB,GAAqB,GAArB,GAAyBrE,EAAE8oB,CAAF,CAAzB,GAA8B,GAAzC,EAA6C9nB,CAA7C,EAA+C8G,CAA/C,EAAkD7H,EAAEk2D,SAAF,CAAYp1D,CAAZ,EAAcyM,IAAEtF,CAAhB,EAAkBtG,CAAlB,EAAoB+Y,IAAEzS,CAAtB,EAAwBpH,CAAxB,EAA0B0M,CAA1B,EAA4B5L,CAA5B,EAA8B+Y,IAAEzS,CAAhC,EAAkCpH,CAAlC,EAAqCb,EAAE4zF,QAAF,CAAWrmF,IAAEmN,CAAF,GAAIzS,CAAf,EAAiBtG,CAAjB,EAAmBsG,CAAnB,EAAqBpH,CAArB,EAAwBb,EAAE2zF,SAAF,GAAYzyF,CAAZ,CAAclB,EAAEq+G,WAAF,GAAc,EAAd,CAAiBr+G,EAAE4zF,QAAF,CAAWrmF,IAAEmN,CAAF,GAAIzS,CAAf,EAAiBtG,CAAjB,EAAmBsG,CAAnB,EAAqBlI,EAAE,CAAC,IAAEiB,IAAE4D,CAAL,IAAQ/D,CAAV,CAArB;CAAmC,SAA7S,EAAN;CAAqT,KADtR,CACuR,OAAO4J,CAAP;CAAS,GAHtY;;;CCCA,IAAI6zG,MAAJ;;CAEA;CACA;CACA;CACA,SAASC,aAAT,GAAyB;CACzBA,cAAcxnH,SAAd,GAA0BE,OAAOy2B,MAAP,CAAc,IAAd,CAA1B;;CAEA,SAAS8wF,YAAT,GAAwB;CACtBA,eAAax7C,IAAb,CAAkBnrE,IAAlB,CAAuB,IAAvB;CACD;AACD;CAGA;CACA;CACA2mH,aAAaA,YAAb,GAA4BA,YAA5B;;CAEAA,aAAaC,YAAb,GAA4B,KAA5B;;CAEAD,aAAaznH,SAAb,CAAuBunH,MAAvB,GAAgC7nH,SAAhC;CACA+nH,aAAaznH,SAAb,CAAuB2nH,OAAvB,GAAiCjoH,SAAjC;CACA+nH,aAAaznH,SAAb,CAAuB4nH,aAAvB,GAAuCloH,SAAvC;;CAEA;CACA;CACA+nH,aAAaI,mBAAb,GAAmC,EAAnC;;CAEAJ,aAAax7C,IAAb,GAAoB,YAAW;CAC7B,OAAKs7C,MAAL,GAAc,IAAd;CACA,MAAIE,aAAaC,YAAjB,EAA+B;CAC7B;CACA,QAAIH,OAAOlC,MAAP,IAAiB,EAAE,gBAAgBkC,OAAOO,MAAzB,CAArB,EAAuD;CAGxD;;CAED,MAAI,CAAC,KAAKH,OAAN,IAAiB,KAAKA,OAAL,KAAiBznH,OAAO6nH,cAAP,CAAsB,IAAtB,EAA4BJ,OAAlE,EAA2E;CACzE,SAAKA,OAAL,GAAe,IAAIH,aAAJ,EAAf;CACA,SAAKQ,YAAL,GAAoB,CAApB;CACD;;CAED,OAAKJ,aAAL,GAAqB,KAAKA,aAAL,IAAsBloH,SAA3C;CACD,CAfD;;CAiBA;CACA;CACA+nH,aAAaznH,SAAb,CAAuBioH,eAAvB,GAAyC,SAASA,eAAT,CAAyBtkG,CAAzB,EAA4B;CACnE,MAAI,OAAOA,CAAP,KAAa,QAAb,IAAyBA,IAAI,CAA7B,IAAkCsnB,MAAMtnB,CAAN,CAAtC,EACE,MAAM,IAAIukG,SAAJ,CAAc,wCAAd,CAAN;CACF,OAAKN,aAAL,GAAqBjkG,CAArB;CACA,SAAO,IAAP;CACD,CALD;;CAOA,SAASwkG,gBAAT,CAA0BhI,IAA1B,EAAgC;CAC9B,MAAIA,KAAKyH,aAAL,KAAuBloH,SAA3B,EACE,OAAO+nH,aAAaI,mBAApB;CACF,SAAO1H,KAAKyH,aAAZ;CACD;;CAEDH,aAAaznH,SAAb,CAAuBooH,eAAvB,GAAyC,SAASA,eAAT,GAA2B;CAClE,SAAOD,iBAAiB,IAAjB,CAAP;CACD,CAFD;;CAIA;CACA;CACA;CACA;CACA;CACA,SAASE,QAAT,CAAkBC,OAAlB,EAA2BC,IAA3B,EAAiC1B,IAAjC,EAAuC;CACrC,MAAI0B,IAAJ,EACED,QAAQxnH,IAAR,CAAa+lH,IAAb,EADF,KAEK;CACH,QAAIrzG,MAAM80G,QAAQ3nH,MAAlB;CACA,QAAI04B,YAAYmvF,WAAWF,OAAX,EAAoB90G,GAApB,CAAhB;CACA,SAAK,IAAI4I,IAAI,CAAb,EAAgBA,IAAI5I,GAApB,EAAyB,EAAE4I,CAA3B;CACEid,gBAAUjd,CAAV,EAAatb,IAAb,CAAkB+lH,IAAlB;CADF;CAED;CACF;CACD,SAAS4B,OAAT,CAAiBH,OAAjB,EAA0BC,IAA1B,EAAgC1B,IAAhC,EAAsC6B,IAAtC,EAA4C;CAC1C,MAAIH,IAAJ,EACED,QAAQxnH,IAAR,CAAa+lH,IAAb,EAAmB6B,IAAnB,EADF,KAEK;CACH,QAAIl1G,MAAM80G,QAAQ3nH,MAAlB;CACA,QAAI04B,YAAYmvF,WAAWF,OAAX,EAAoB90G,GAApB,CAAhB;CACA,SAAK,IAAI4I,IAAI,CAAb,EAAgBA,IAAI5I,GAApB,EAAyB,EAAE4I,CAA3B;CACEid,gBAAUjd,CAAV,EAAatb,IAAb,CAAkB+lH,IAAlB,EAAwB6B,IAAxB;CADF;CAED;CACF;CACD,SAASC,OAAT,CAAiBL,OAAjB,EAA0BC,IAA1B,EAAgC1B,IAAhC,EAAsC6B,IAAtC,EAA4CE,IAA5C,EAAkD;CAChD,MAAIL,IAAJ,EACED,QAAQxnH,IAAR,CAAa+lH,IAAb,EAAmB6B,IAAnB,EAAyBE,IAAzB,EADF,KAEK;CACH,QAAIp1G,MAAM80G,QAAQ3nH,MAAlB;CACA,QAAI04B,YAAYmvF,WAAWF,OAAX,EAAoB90G,GAApB,CAAhB;CACA,SAAK,IAAI4I,IAAI,CAAb,EAAgBA,IAAI5I,GAApB,EAAyB,EAAE4I,CAA3B;CACEid,gBAAUjd,CAAV,EAAatb,IAAb,CAAkB+lH,IAAlB,EAAwB6B,IAAxB,EAA8BE,IAA9B;CADF;CAED;CACF;CACD,SAASC,SAAT,CAAmBP,OAAnB,EAA4BC,IAA5B,EAAkC1B,IAAlC,EAAwC6B,IAAxC,EAA8CE,IAA9C,EAAoDE,IAApD,EAA0D;CACxD,MAAIP,IAAJ,EACED,QAAQxnH,IAAR,CAAa+lH,IAAb,EAAmB6B,IAAnB,EAAyBE,IAAzB,EAA+BE,IAA/B,EADF,KAEK;CACH,QAAIt1G,MAAM80G,QAAQ3nH,MAAlB;CACA,QAAI04B,YAAYmvF,WAAWF,OAAX,EAAoB90G,GAApB,CAAhB;CACA,SAAK,IAAI4I,IAAI,CAAb,EAAgBA,IAAI5I,GAApB,EAAyB,EAAE4I,CAA3B;CACEid,gBAAUjd,CAAV,EAAatb,IAAb,CAAkB+lH,IAAlB,EAAwB6B,IAAxB,EAA8BE,IAA9B,EAAoCE,IAApC;CADF;CAED;CACF;;CAED,SAASC,QAAT,CAAkBT,OAAlB,EAA2BC,IAA3B,EAAiC1B,IAAjC,EAAuC1Y,IAAvC,EAA6C;CAC3C,MAAIoa,IAAJ,EACED,QAAQ9wE,KAAR,CAAcqvE,IAAd,EAAoB1Y,IAApB,EADF,KAEK;CACH,QAAI36F,MAAM80G,QAAQ3nH,MAAlB;CACA,QAAI04B,YAAYmvF,WAAWF,OAAX,EAAoB90G,GAApB,CAAhB;CACA,SAAK,IAAI4I,IAAI,CAAb,EAAgBA,IAAI5I,GAApB,EAAyB,EAAE4I,CAA3B;CACEid,gBAAUjd,CAAV,EAAao7B,KAAb,CAAmBqvE,IAAnB,EAAyB1Y,IAAzB;CADF;CAED;CACF;;CAEDsZ,aAAaznH,SAAb,CAAuBgpH,IAAvB,GAA8B,SAASA,IAAT,CAAc9vF,IAAd,EAAoB;CAChD,MAAI+vF,EAAJ,EAAQX,OAAR,EAAiB90G,GAAjB,EAAsB26F,IAAtB,EAA4B/xF,CAA5B,EAA+B8sG,MAA/B,EAAuC3B,MAAvC;AACA,CACA,MAAI4B,UAAWjwF,SAAS,OAAxB;;CAEAgwF,WAAS,KAAKvB,OAAd;CACA,MAAIuB,MAAJ,EACEC,UAAWA,WAAWD,OAAOjzG,KAAP,IAAgB,IAAtC,CADF,KAEK,IAAI,CAACkzG,OAAL,EACH,OAAO,KAAP;;CAEF5B,WAAS,KAAKA,MAAd;;CAEA;CACA,MAAI4B,OAAJ,EAAa;CACXF,SAAKvoH,UAAU,CAAV,CAAL;CACA,QAAI6mH,MAAJ,EAAY;CACV,UAAI,CAAC0B,EAAL,EACEA,KAAK,IAAIG,KAAJ,CAAU,qCAAV,CAAL;CACFH,SAAGI,aAAH,GAAmB,IAAnB;CACAJ,SAAG1B,MAAH,GAAYA,MAAZ;CACA0B,SAAGK,YAAH,GAAkB,KAAlB;CACA/B,aAAOyB,IAAP,CAAY,OAAZ,EAAqBC,EAArB;CACD,KAPD,MAOO,IAAIA,cAAcG,KAAlB,EAAyB;CAC9B,YAAMH,EAAN,CAD8B;CAE/B,KAFM,MAEA;CACL;CACA,UAAIM,MAAM,IAAIH,KAAJ,CAAU,2CAA2CH,EAA3C,GAAgD,GAA1D,CAAV;CACAM,UAAInmE,OAAJ,GAAc6lE,EAAd;CACA,YAAMM,GAAN;CACD;CACD,WAAO,KAAP;CACD;;CAEDjB,YAAUY,OAAOhwF,IAAP,CAAV;;CAEA,MAAI,CAACovF,OAAL,EACE,OAAO,KAAP;;CAEF,MAAIC,OAAO,OAAOD,OAAP,KAAmB,UAA9B;CACA90G,QAAM9S,UAAUC,MAAhB;CACA,UAAQ6S,GAAR;CACE;CACA,SAAK,CAAL;CACE60G,eAASC,OAAT,EAAkBC,IAAlB,EAAwB,IAAxB;CACA;CACF,SAAK,CAAL;CACEE,cAAQH,OAAR,EAAiBC,IAAjB,EAAuB,IAAvB,EAA6B7nH,UAAU,CAAV,CAA7B;CACA;CACF,SAAK,CAAL;CACEioH,cAAQL,OAAR,EAAiBC,IAAjB,EAAuB,IAAvB,EAA6B7nH,UAAU,CAAV,CAA7B,EAA2CA,UAAU,CAAV,CAA3C;CACA;CACF,SAAK,CAAL;CACEmoH,gBAAUP,OAAV,EAAmBC,IAAnB,EAAyB,IAAzB,EAA+B7nH,UAAU,CAAV,CAA/B,EAA6CA,UAAU,CAAV,CAA7C,EAA2DA,UAAU,CAAV,CAA3D;CACA;CACF;CACA;CACEytG,aAAO,IAAIryE,KAAJ,CAAUtoB,MAAM,CAAhB,CAAP;CACA,WAAK4I,IAAI,CAAT,EAAYA,IAAI5I,GAAhB,EAAqB4I,GAArB;CACE+xF,aAAK/xF,IAAI,CAAT,IAAc1b,UAAU0b,CAAV,CAAd;CADF,OAEA2sG,SAAST,OAAT,EAAkBC,IAAlB,EAAwB,IAAxB,EAA8Bpa,IAA9B;CAnBJ;;CAyBA,SAAO,IAAP;CACD,CAnED;;CAqEA,SAASqb,YAAT,CAAsBhpH,MAAtB,EAA8B04B,IAA9B,EAAoCC,QAApC,EAA8CswF,OAA9C,EAAuD;CACrD,MAAI7+G,CAAJ;CACA,MAAIs+G,MAAJ;CACA,MAAIQ,QAAJ;;CAEA,MAAI,OAAOvwF,QAAP,KAAoB,UAAxB,EACE,MAAM,IAAI+uF,SAAJ,CAAc,wCAAd,CAAN;;CAEFgB,WAAS1oH,OAAOmnH,OAAhB;CACA,MAAI,CAACuB,MAAL,EAAa;CACXA,aAAS1oH,OAAOmnH,OAAP,GAAiB,IAAIH,aAAJ,EAA1B;CACAhnH,WAAOwnH,YAAP,GAAsB,CAAtB;CACD,GAHD,MAGO;CACL;CACA;CACA,QAAIkB,OAAOS,WAAX,EAAwB;CACtBnpH,aAAOwoH,IAAP,CAAY,aAAZ,EAA2B9vF,IAA3B,EACYC,SAASA,QAAT,GAAoBA,SAASA,QAA7B,GAAwCA,QADpD;;CAGA;CACA;CACA+vF,eAAS1oH,OAAOmnH,OAAhB;CACD;CACD+B,eAAWR,OAAOhwF,IAAP,CAAX;CACD;;CAED,MAAI,CAACwwF,QAAL,EAAe;CACb;CACAA,eAAWR,OAAOhwF,IAAP,IAAeC,QAA1B;CACA,MAAE34B,OAAOwnH,YAAT;CACD,GAJD,MAIO;CACL,QAAI,OAAO0B,QAAP,KAAoB,UAAxB,EAAoC;CAClC;CACAA,iBAAWR,OAAOhwF,IAAP,IAAeuwF,UAAU,CAACtwF,QAAD,EAAWuwF,QAAX,CAAV,GACU,CAACA,QAAD,EAAWvwF,QAAX,CADpC;CAED,KAJD,MAIO;CACL;CACA,UAAIswF,OAAJ,EAAa;CACXC,iBAASE,OAAT,CAAiBzwF,QAAjB;CACD,OAFD,MAEO;CACLuwF,iBAASt2F,IAAT,CAAc+F,QAAd;CACD;CACF;;CAED;CACA,QAAI,CAACuwF,SAASxqC,MAAd,EAAsB;CACpBt0E,UAAIu9G,iBAAiB3nH,MAAjB,CAAJ;CACA,UAAIoK,KAAKA,IAAI,CAAT,IAAc8+G,SAAS/oH,MAAT,GAAkBiK,CAApC,EAAuC;CACrC8+G,iBAASxqC,MAAT,GAAkB,IAAlB;CACA,YAAIrxE,IAAI,IAAIu7G,KAAJ,CAAU,iDACEM,SAAS/oH,MADX,GACoB,GADpB,GAC0Bu4B,IAD1B,GACiC,oBADjC,GAEE,iDAFZ,CAAR;CAGArrB,UAAE5N,IAAF,GAAS,6BAAT;CACA4N,UAAEg8G,OAAF,GAAYrpH,MAAZ;CACAqN,UAAEqrB,IAAF,GAASA,IAAT;CACArrB,UAAE6yB,KAAF,GAAUgpF,SAAS/oH,MAAnB;CACAmpH,oBAAYj8G,CAAZ;CACD;CACF;CACF;;CAED,SAAOrN,MAAP;CACD;CACD,SAASspH,WAAT,CAAqBzzG,CAArB,EAAwB;CACtB,SAAO3L,QAAQC,IAAf,KAAwB,UAAxB,GAAqCD,QAAQC,IAAR,CAAa0L,CAAb,CAArC,GAAuD3L,QAAQqmB,GAAR,CAAY1a,CAAZ,CAAvD;CACD;CACDoxG,aAAaznH,SAAb,CAAuB+pH,WAAvB,GAAqC,SAASA,WAAT,CAAqB7wF,IAArB,EAA2BC,QAA3B,EAAqC;CACxE,SAAOqwF,aAAa,IAAb,EAAmBtwF,IAAnB,EAAyBC,QAAzB,EAAmC,KAAnC,CAAP;CACD,CAFD;;CAIAsuF,aAAaznH,SAAb,CAAuBgqH,EAAvB,GAA4BvC,aAAaznH,SAAb,CAAuB+pH,WAAnD;;CAEAtC,aAAaznH,SAAb,CAAuBiqH,eAAvB,GACI,SAASA,eAAT,CAAyB/wF,IAAzB,EAA+BC,QAA/B,EAAyC;CACvC,SAAOqwF,aAAa,IAAb,EAAmBtwF,IAAnB,EAAyBC,QAAzB,EAAmC,IAAnC,CAAP;CACD,CAHL;;CAKA,SAAS+wF,SAAT,CAAmB1pH,MAAnB,EAA2B04B,IAA3B,EAAiCC,QAAjC,EAA2C;CACzC,MAAIgxF,QAAQ,KAAZ;CACA,WAASnhH,CAAT,GAAa;CACXxI,WAAO4pH,cAAP,CAAsBlxF,IAAtB,EAA4BlwB,CAA5B;CACA,QAAI,CAACmhH,KAAL,EAAY;CACVA,cAAQ,IAAR;CACAhxF,eAASqe,KAAT,CAAeh3C,MAAf,EAAuBE,SAAvB;CACD;CACF;CACDsI,IAAEmwB,QAAF,GAAaA,QAAb;CACA,SAAOnwB,CAAP;CACD;;CAEDy+G,aAAaznH,SAAb,CAAuBqqH,IAAvB,GAA8B,SAASA,IAAT,CAAcnxF,IAAd,EAAoBC,QAApB,EAA8B;CAC1D,MAAI,OAAOA,QAAP,KAAoB,UAAxB,EACE,MAAM,IAAI+uF,SAAJ,CAAc,wCAAd,CAAN;CACF,OAAK8B,EAAL,CAAQ9wF,IAAR,EAAcgxF,UAAU,IAAV,EAAgBhxF,IAAhB,EAAsBC,QAAtB,CAAd;CACA,SAAO,IAAP;CACD,CALD;;CAOAsuF,aAAaznH,SAAb,CAAuBsqH,mBAAvB,GACI,SAASA,mBAAT,CAA6BpxF,IAA7B,EAAmCC,QAAnC,EAA6C;CAC3C,MAAI,OAAOA,QAAP,KAAoB,UAAxB,EACE,MAAM,IAAI+uF,SAAJ,CAAc,wCAAd,CAAN;CACF,OAAK+B,eAAL,CAAqB/wF,IAArB,EAA2BgxF,UAAU,IAAV,EAAgBhxF,IAAhB,EAAsBC,QAAtB,CAA3B;CACA,SAAO,IAAP;CACD,CANL;;CAQA;CACAsuF,aAAaznH,SAAb,CAAuBoqH,cAAvB,GACI,SAASA,cAAT,CAAwBlxF,IAAxB,EAA8BC,QAA9B,EAAwC;CACtC,MAAIgvD,IAAJ,EAAU+gC,MAAV,EAAkBpiG,QAAlB,EAA4B1K,CAA5B,EAA+BmuG,gBAA/B;;CAEA,MAAI,OAAOpxF,QAAP,KAAoB,UAAxB,EACE,MAAM,IAAI+uF,SAAJ,CAAc,wCAAd,CAAN;;CAEFgB,WAAS,KAAKvB,OAAd;CACA,MAAI,CAACuB,MAAL,EACE,OAAO,IAAP;;CAEF/gC,SAAO+gC,OAAOhwF,IAAP,CAAP;CACA,MAAI,CAACivD,IAAL,EACE,OAAO,IAAP;;CAEF,MAAIA,SAAShvD,QAAT,IAAsBgvD,KAAKhvD,QAAL,IAAiBgvD,KAAKhvD,QAAL,KAAkBA,QAA7D,EAAwE;CACtE,QAAI,EAAE,KAAK6uF,YAAP,KAAwB,CAA5B,EACE,KAAKL,OAAL,GAAe,IAAIH,aAAJ,EAAf,CADF,KAEK;CACH,aAAO0B,OAAOhwF,IAAP,CAAP;CACA,UAAIgwF,OAAOkB,cAAX,EACE,KAAKpB,IAAL,CAAU,gBAAV,EAA4B9vF,IAA5B,EAAkCivD,KAAKhvD,QAAL,IAAiBA,QAAnD;CACH;CACF,GARD,MAQO,IAAI,OAAOgvD,IAAP,KAAgB,UAApB,EAAgC;CACrCrhE,eAAW,CAAC,CAAZ;;CAEA,SAAK1K,IAAI+rE,KAAKxnF,MAAd,EAAsByb,MAAM,CAA5B,GAAgC;CAC9B,UAAI+rE,KAAK/rE,CAAL,MAAY+c,QAAZ,IACCgvD,KAAK/rE,CAAL,EAAQ+c,QAAR,IAAoBgvD,KAAK/rE,CAAL,EAAQ+c,QAAR,KAAqBA,QAD9C,EACyD;CACvDoxF,2BAAmBpiC,KAAK/rE,CAAL,EAAQ+c,QAA3B;CACArS,mBAAW1K,CAAX;CACA;CACD;CACF;;CAED,QAAI0K,WAAW,CAAf,EACE,OAAO,IAAP;;CAEF,QAAIqhE,KAAKxnF,MAAL,KAAgB,CAApB,EAAuB;CACrBwnF,WAAK,CAAL,IAAUzoF,SAAV;CACA,UAAI,EAAE,KAAKsoH,YAAP,KAAwB,CAA5B,EAA+B;CAC7B,aAAKL,OAAL,GAAe,IAAIH,aAAJ,EAAf;CACA,eAAO,IAAP;CACD,OAHD,MAGO;CACL,eAAO0B,OAAOhwF,IAAP,CAAP;CACD;CACF,KARD,MAQO;CACLsxF,gBAAUriC,IAAV,EAAgBrhE,QAAhB;CACD;;CAED,QAAIoiG,OAAOkB,cAAX,EACE,KAAKpB,IAAL,CAAU,gBAAV,EAA4B9vF,IAA5B,EAAkCqxF,oBAAoBpxF,QAAtD;CACH;;CAED,SAAO,IAAP;CACD,CAvDL;;CAyDAsuF,aAAaznH,SAAb,CAAuByqH,kBAAvB,GACI,SAASA,kBAAT,CAA4BvxF,IAA5B,EAAkC;CAChC,MAAIG,SAAJ,EAAe6vF,MAAf;;CAEAA,WAAS,KAAKvB,OAAd;CACA,MAAI,CAACuB,MAAL,EACE,OAAO,IAAP;;CAEF;CACA,MAAI,CAACA,OAAOkB,cAAZ,EAA4B;CAC1B,QAAI1pH,UAAUC,MAAV,KAAqB,CAAzB,EAA4B;CAC1B,WAAKgnH,OAAL,GAAe,IAAIH,aAAJ,EAAf;CACA,WAAKQ,YAAL,GAAoB,CAApB;CACD,KAHD,MAGO,IAAIkB,OAAOhwF,IAAP,CAAJ,EAAkB;CACvB,UAAI,EAAE,KAAK8uF,YAAP,KAAwB,CAA5B,EACE,KAAKL,OAAL,GAAe,IAAIH,aAAJ,EAAf,CADF,KAGE,OAAO0B,OAAOhwF,IAAP,CAAP;CACH;CACD,WAAO,IAAP;CACD;;CAED;CACA,MAAIx4B,UAAUC,MAAV,KAAqB,CAAzB,EAA4B;CAC1B,QAAIu0C,OAAOh1C,OAAOg1C,IAAP,CAAYg0E,MAAZ,CAAX;CACA,SAAK,IAAI9sG,IAAI,CAAR,EAAW2jB,GAAhB,EAAqB3jB,IAAI84B,KAAKv0C,MAA9B,EAAsC,EAAEyb,CAAxC,EAA2C;CACzC2jB,YAAMmV,KAAK94B,CAAL,CAAN;CACA,UAAI2jB,QAAQ,gBAAZ,EAA8B;CAC9B,WAAK0qF,kBAAL,CAAwB1qF,GAAxB;CACD;CACD,SAAK0qF,kBAAL,CAAwB,gBAAxB;CACA,SAAK9C,OAAL,GAAe,IAAIH,aAAJ,EAAf;CACA,SAAKQ,YAAL,GAAoB,CAApB;CACA,WAAO,IAAP;CACD;;CAED3uF,cAAY6vF,OAAOhwF,IAAP,CAAZ;;CAEA,MAAI,OAAOG,SAAP,KAAqB,UAAzB,EAAqC;CACnC,SAAK+wF,cAAL,CAAoBlxF,IAApB,EAA0BG,SAA1B;CACD,GAFD,MAEO,IAAIA,SAAJ,EAAe;CACpB;CACA,OAAG;CACD,WAAK+wF,cAAL,CAAoBlxF,IAApB,EAA0BG,UAAUA,UAAU14B,MAAV,GAAmB,CAA7B,CAA1B;CACD,KAFD,QAES04B,UAAU,CAAV,CAFT;CAGD;;CAED,SAAO,IAAP;CACD,CAhDL;;CAkDAouF,aAAaznH,SAAb,CAAuBq5B,SAAvB,GAAmC,SAASA,SAAT,CAAmBH,IAAnB,EAAyB;CAC1D,MAAIwxF,UAAJ;CACA,MAAI7d,GAAJ;CACA,MAAIqc,SAAS,KAAKvB,OAAlB;;CAEA,MAAI,CAACuB,MAAL,EACErc,MAAM,EAAN,CADF,KAEK;CACH6d,iBAAaxB,OAAOhwF,IAAP,CAAb;CACA,QAAI,CAACwxF,UAAL,EACE7d,MAAM,EAAN,CADF,KAEK,IAAI,OAAO6d,UAAP,KAAsB,UAA1B,EACH7d,MAAM,CAAC6d,WAAWvxF,QAAX,IAAuBuxF,UAAxB,CAAN,CADG,KAGH7d,MAAM8d,gBAAgBD,UAAhB,CAAN;CACH;;CAED,SAAO7d,GAAP;CACD,CAlBD;;CAoBA4a,aAAamD,aAAb,GAA6B,UAASf,OAAT,EAAkB3wF,IAAlB,EAAwB;CACnD,MAAI,OAAO2wF,QAAQe,aAAf,KAAiC,UAArC,EAAiD;CAC/C,WAAOf,QAAQe,aAAR,CAAsB1xF,IAAtB,CAAP;CACD,GAFD,MAEO;CACL,WAAO0xF,cAAc9pH,IAAd,CAAmB+oH,OAAnB,EAA4B3wF,IAA5B,CAAP;CACD;CACF,CAND;;CAQAuuF,aAAaznH,SAAb,CAAuB4qH,aAAvB,GAAuCA,aAAvC;CACA,SAASA,aAAT,CAAuB1xF,IAAvB,EAA6B;CAC3B,MAAIgwF,SAAS,KAAKvB,OAAlB;;CAEA,MAAIuB,MAAJ,EAAY;CACV,QAAIwB,aAAaxB,OAAOhwF,IAAP,CAAjB;;CAEA,QAAI,OAAOwxF,UAAP,KAAsB,UAA1B,EAAsC;CACpC,aAAO,CAAP;CACD,KAFD,MAEO,IAAIA,UAAJ,EAAgB;CACrB,aAAOA,WAAW/pH,MAAlB;CACD;CACF;;CAED,SAAO,CAAP;CACD;;CAED8mH,aAAaznH,SAAb,CAAuB6qH,UAAvB,GAAoC,SAASA,UAAT,GAAsB;CACxD,SAAO,KAAK7C,YAAL,GAAoB,CAApB,GAAwB8C,QAAQC,OAAR,CAAgB,KAAKpD,OAArB,CAAxB,GAAwD,EAA/D;CACD,CAFD;;CAIA;CACA,SAAS6C,SAAT,CAAmBriC,IAAnB,EAAyB1nF,KAAzB,EAAgC;CAC9B,OAAK,IAAI2b,IAAI3b,KAAR,EAAeqxB,IAAI1V,IAAI,CAAvB,EAA0BuH,IAAIwkE,KAAKxnF,MAAxC,EAAgDmxB,IAAInO,CAApD,EAAuDvH,KAAK,CAAL,EAAQ0V,KAAK,CAApE;CACEq2D,SAAK/rE,CAAL,IAAU+rE,KAAKr2D,CAAL,CAAV;CADF,GAEAq2D,KAAKrwC,GAAL;CACD;;CAED,SAAS0wE,UAAT,CAAoBwC,GAApB,EAAyB5uG,CAAzB,EAA4B;CAC1B,MAAI9S,OAAO,IAAIwyB,KAAJ,CAAU1f,CAAV,CAAX;CACA,SAAOA,GAAP;CACE9S,SAAK8S,CAAL,IAAU4uG,IAAI5uG,CAAJ,CAAV;CADF,GAEA,OAAO9S,IAAP;CACD;;CAED,SAASqhH,eAAT,CAAyBK,GAAzB,EAA8B;CAC5B,MAAIne,MAAM,IAAI/wE,KAAJ,CAAUkvF,IAAIrqH,MAAd,CAAV;CACA,OAAK,IAAIyb,IAAI,CAAb,EAAgBA,IAAIywF,IAAIlsG,MAAxB,EAAgC,EAAEyb,CAAlC,EAAqC;CACnCywF,QAAIzwF,CAAJ,IAAS4uG,IAAI5uG,CAAJ,EAAO+c,QAAP,IAAmB6xF,IAAI5uG,CAAJ,CAA5B;CACD;CACD,SAAOywF,GAAP;CACD;;;;;;;;;;CC1dD;;;;CAMA,IAAMoe,UAAU,SAAhB;CACA,IAAMC,WAAW,UAAjB;;;KAGMC;;;;;;;CAKJ,uBAAYlrH,IAAZ,EAAkBi1C,IAAlB,EAAwBk2E,YAAxB,EAAsC;CAAA;;CAAA;;CAEpC,UAAKnrH,IAAL,GAAYA,IAAZ,CAFoC;CAGpC,UAAKorH,aAAL,GAAqBn2E,QAAQ,EAA7B,CAHoC;CAIpC,UAAKo2E,aAAL,GAAqBF,gBAAgB,EAArC;;;CAGA,UAAKG,YAAL,GAAoB,KAApB;CACA,UAAKC,aAAL,GAAqB,KAArB;;CARoC;CAUrC;;;;;;;;;;;;;;;oCA2Bc;CACb,WAAKD,YAAL,GAAoB,KAApB;CACA,WAAKC,aAAL,GAAqB,KAArB;CACD;;;gCAEU;CACT,WAAKA,aAAL,GAAqB,KAAKD,YAA1B;CACD;;;;;;;;;;;oCAQcE,SAAS;CACtB,UAAI,KAAKJ,aAAL,CAAmB/xF,OAAnB,CAA2BmyF,OAA3B,KAAuC,CAAC,CAA5C,EAA+C;CAC7C,aAAKJ,aAAL,CAAmBj4F,IAAnB,CAAwBq4F,OAAxB;CACD;CACF;;;;;;;;;uCAMiBA,SAAS;CACzB,WAAKJ,aAAL,CAAmBptF,MAAnB,CAA0BwtF,OAA1B;CACD;;;;;;;;;4BAMMC,UAAU;;CAEf,WAAKF,aAAL,GAAqB,KAAKD,YAA1B;CACA,WAAKA,YAAL,GAAoB,KAApB;;;CAGA,WAAK,IAAInvG,IAAI,CAAb,EAAgBA,IAAI,KAAKivG,aAAL,CAAmB1qH,MAAvC,EAA+Cyb,GAA/C,EAAoD;CAClD,YAAIsvG,SAASL,aAAT,CAAuB,KAAKA,aAAL,CAAmBjvG,CAAnB,CAAvB,CAAJ,EAAmD;CACjD,eAAKmvG,YAAL,GAAoB,IAApB;;CAEA;CACD;CACF;;;CAGD,WAAK,IAAInvG,KAAI,CAAb,EAAgBA,KAAI,KAAKkvG,aAAL,CAAmB3qH,MAAvC,EAA+Cyb,IAA/C,EAAoD;CAClD,YAAIsvG,SAASJ,aAAT,CAAuB,KAAKA,aAAL,CAAmBlvG,EAAnB,CAAvB,CAAJ,EAAmD;CACjD,eAAKmvG,YAAL,GAAoB,IAApB;;CAEA;CACD;CACF;CACD,UAAI,KAAKI,UAAT,EAAqB;CACnB,aAAK3C,IAAL,CAAUiC,OAAV,EAAmB;CACjBrqH,kBAAQ;CADS,SAAnB;CAGD,OAJD,MAIO,IAAI,KAAKgrH,WAAT,EAAsB;CAC3B,aAAK5C,IAAL,CAAUkC,QAAV,EAAoB;CAClBtqH,kBAAQ;CADU,SAApB;CAGD;CACF;;;yBArFY;CACX,aAAO,KAAK2qH,YAAZ;CACD;;;;;;;;yBAKgB;CACf,aAAQ,KAAKA,YAAN,IAAwB,CAAC,KAAKC,aAArC;CACD;;;;;;;;yBAKiB;CAChB,aAAQ,CAAC,KAAKD,YAAP,IAAyB,KAAKC,aAArC;CACD;;;;GArCuBK;;CA6G1B,kBAAiBV,WAAjB;;;;;;;;;;CCvHA;;;;CAOA,IAAMW,YAAY,WAAlB;CACA,IAAMC,gBAAgB,cAAtB;CACA,IAAMC,aAAa,YAAnB;;KAEMC;;;CACJ,wBAAYC,YAAZ,EAA0B;CAAA;;;CAAA;;CAIxB,UAAKR,QAAL,GAAgB;CACdL,qBAAe,EADD;CAEdC,qBAAe;CAFD,KAAhB;;;CAMA,UAAKa,KAAL,GAAa;CACXC,aAAO,CADI;CAEXC,aAAO,CAFI;CAGXvsH,SAAG,CAHQ;CAIX6N,SAAG,CAJQ;CAKX0H,UAAI,CALO;CAMXD,UAAI;CANO,KAAb;;CASA,UAAK4jD,OAAL,GAAe,IAAf;;CAEA,UAAKszD,KAAL,CAAWJ,YAAX;CArBwB;CAsBzB;;;;2BAGKA,cAAc;;;CAGlBv5D,eAAS15B,gBAAT,CAA0B,SAA1B,EAAqC,KAAKszF,QAAL,CAAczsE,IAAd,CAAmB,IAAnB,CAArC,EAA+D,KAA/D;CACA6S,eAAS15B,gBAAT,CAA0B,OAA1B,EAAmC,KAAKuzF,MAAL,CAAY1sE,IAAZ,CAAiB,IAAjB,CAAnC,EAA2D,KAA3D;;CAEA6S,eAAS15B,gBAAT,CAA0B,YAA1B,EAAwC,KAAKwzF,eAAL,CAAqB3sE,IAArB,CAA0B,IAA1B,CAAxC,EAAyE,KAAzE;CACA6S,eAAS15B,gBAAT,CAA0B,WAA1B,EAAuC,KAAKyzF,UAAL,CAAgB5sE,IAAhB,CAAqB,IAArB,CAAvC,EAAmE,IAAnE;CACA6S,eAAS15B,gBAAT,CAA0B,SAA1B,EAAqC,KAAK0zF,QAAL,CAAc7sE,IAAd,CAAmB,IAAnB,CAArC,EAA+D,IAA/D;CACA6S,eAAS15B,gBAAT,CAA0B,YAA1B,EAAwC,KAAKyzF,UAAL,CAAgB5sE,IAAhB,CAAqB,IAArB,CAAxC,EAAoE,KAApE;CACA6S,eAAS15B,gBAAT,CAA0B,UAA1B,EAAsC,KAAK0zF,QAAL,CAAc7sE,IAAd,CAAmB,IAAnB,CAAtC,EAAgE,KAAhE;;;CAGAosE,mBAAajzF,gBAAb,CAA8B,WAA9B,EAA2C,KAAK2zF,YAAL,CAAkB9sE,IAAlB,CAAuB,IAAvB,CAA3C,EAAyE,KAAzE;CACAosE,mBAAajzF,gBAAb,CAA8B,WAA9B,EAA2C,KAAK2zF,YAAL,CAAkB9sE,IAAlB,CAAuB,IAAvB,CAA3C,EAAyE,KAAzE;CACD;;;;;;;;;;;;;iCAUW+sE,aAAa;;CAEvB,WAAKC,YAAL;;CAEA,UAAMC,aAAa,EAAnB;CACA,WAAK,IAAIhtF,GAAT,IAAgB8sF,WAAhB,EAA6B;CAC3B,YAAMG,MAAMH,YAAY9sF,GAAZ,CAAZ;CACAgtF,mBAAWhtF,GAAX,IAAkB,IAAIorF,WAAJ,CAAgBprF,GAAhB,EAAqBitF,IAAIC,QAAzB,EAAmCD,IAAIb,KAAvC,CAAlB;CACD;CACD,WAAKe,UAAL,CAAgBH,UAAhB;CACD;;;qCAEeI,KAAK;CACnB,WAAKnE,IAAL,CAAUgD,UAAV,EAAsB;CACpBz/G,eAAO4gH,IAAIC;CADS,OAAtB;CAGD;;;oCAEc;CACb,WAAK1B,QAAL,GAAgB;CACdL,uBAAe,EADD;CAEdC,uBAAe;CAFD,OAAhB;;;CAMA,WAAKa,KAAL,GAAa;CACXC,eAAO,CADI;CAEXC,eAAO,CAFI;CAGXvsH,WAAG,CAHQ;CAIX6N,WAAG,CAJQ;CAKX0H,YAAI,CALO;CAMXD,YAAI;CANO,OAAb;CAQA,WAAK4jD,OAAL,GAAe,IAAf;CACD;;;gCAEUA,SAAS;CAClB,WAAKA,OAAL,GAAeA,OAAf;CACD;;;8BAEQp/B,OAAO;CACd,WAAK8xF,QAAL,CAAcL,aAAd,CAA4BzxF,MAAM6xF,OAAlC,IAA6C,IAA7C;;CAEA,WAAK4B,sBAAL;CACD;;;4BAEMzzF,OAAO;CACZ,UAAI,KAAK8xF,QAAL,CAAcL,aAAd,CAA4BxqH,cAA5B,CAA2C+4B,MAAM6xF,OAAjD,CAAJ,EAA+D;CAC7D,eAAO,KAAKC,QAAL,CAAcL,aAAd,CAA4BzxF,MAAM6xF,OAAlC,CAAP;CACD;;CAED,WAAK4B,sBAAL;CACD;;;gCAEUzzF,OAAO;;CAEhB,UAAI0zF,MAAM,KAAKC,sBAAL,CAA4B3zF,KAA5B,CAAV;CACA,UAAI0zF,MAAM,CAAV,EAAa,OAHG;;CAKhB,WAAK5B,QAAL,CAAcJ,aAAd,CAA4BgC,GAA5B,IAAmC,IAAnC;;CAEA,WAAKD,sBAAL;CACD;;;8BAEQzzF,OAAO;CACd,UAAI0zF,MAAM,KAAKC,sBAAL,CAA4B3zF,KAA5B,CAAV;CACA,UAAI0zF,MAAM,CAAV,EAAa,OAFC;;CAId,UAAI,KAAK5B,QAAL,CAAcJ,aAAd,CAA4BzqH,cAA5B,CAA2CysH,GAA3C,CAAJ,EAAqD;CACnD,eAAO,KAAK5B,QAAL,CAAcJ,aAAd,CAA4BgC,GAA5B,CAAP;CACD;CACD,WAAKD,sBAAL;;CAED;;;;;;;;;;;4CAQsBzzF,OAAO;CAC5B,UAAIA,MAAM4zF,MAAN,IAAgB5zF,MAAM4zF,MAAN,IAAgB,CAApC,EAAuC;CACrC,eAAO5zF,MAAM4zF,MAAb;CACD,OAFD,MAEO,IAAI5zF,MAAM6zF,cAAN,IAAwB7zF,MAAM6zF,cAAN,CAAqB9sH,MAArB,GAA8B,CAA1D,EAA6D;CAClE,eAAO,CAAP;CACD,OAFM,MAEA,IAAIi5B,MAAMoG,IAAN,KAAepG,MAAMoG,IAAN,CAAWwtF,MAAX,IAAqB5zF,MAAMoG,IAAN,CAAWwtF,MAAX,IAAqB,CAAzD,CAAJ,EAAiE;CACtE,eAAO5zF,MAAMoG,IAAN,CAAWwtF,MAAlB;CACD;CACD,aAAO,CAAC,CAAR;CACD;;;8CAEwB;;CAEvB,UAAI,CAAC,KAAKx0D,OAAV,EAAmB;;;CAGnB,WAAK,IAAIj5B,GAAT,IAAgB,KAAKi5B,OAArB,EAA8B;CAC5B,YAAI,CAAC,KAAKA,OAAL,CAAan4D,cAAb,CAA4Bk/B,GAA5B,CAAL,EAAuC;CACvC,aAAKi5B,OAAL,CAAaj5B,GAAb,EAAkBzxB,MAAlB,CAAyB,KAAKo9G,QAA9B;CACD;CACF;;;gCAGU;CACT,WAAK,IAAI3rF,GAAT,IAAgB,KAAKi5B,OAArB,EAA8B;CAC5B,YAAI,CAAC,KAAKA,OAAL,CAAan4D,cAAb,CAA4Bk/B,GAA5B,CAAL,EAAuC;CACvC,aAAKi5B,OAAL,CAAaj5B,GAAb,EAAkB2tF,QAAlB;CACD;CACF;;;kCAEY9zF,OAAO;CAClB,WAAKuyF,KAAL,CAAWC,KAAX,GAAmB,KAAKD,KAAL,CAAWrsH,CAA9B;CACA,WAAKqsH,KAAL,CAAWE,KAAX,GAAmB,KAAKF,KAAL,CAAWx+G,CAA9B;;CAEA,WAAKw+G,KAAL,CAAWrsH,CAAX,GAAgB85B,MAAM+zF,OAAN,GAAgB9nE,OAAO+nE,UAAxB,GAAsC,CAAtC,GAA0C,CAAzD;CACA,WAAKzB,KAAL,CAAWx+G,CAAX,GAAe,EAAEisB,MAAMi0F,OAAN,GAAgBhoE,OAAOioE,WAAzB,IAAwC,CAAxC,GAA4C,CAA3D;;;CAGA,WAAK3B,KAAL,CAAW92G,EAAX,GAAgB,KAAK82G,KAAL,CAAWrsH,CAAX,GAAe,KAAKqsH,KAAL,CAAWC,KAA1C;CACA,WAAKD,KAAL,CAAW/2G,EAAX,GAAgB,KAAK+2G,KAAL,CAAWx+G,CAAX,GAAe,KAAKw+G,KAAL,CAAWE,KAA1C;;CAEA,UAAI,KAAKF,KAAL,CAAW92G,EAAX,IAAiB,CAAjB,IAAsB,KAAK82G,KAAL,CAAW/2G,EAAX,IAAiB,CAA3C,EAA8C;CAC5C,aAAK4zG,IAAL,CAAU8C,SAAV,EAAqB,KAAKK,KAA1B;CACA,aAAKnD,IAAL,CAAU+C,aAAV,EAAyBnyF,KAAzB;CACD;CACF;;;;GAjLwBiyF;;CAoL3B,mBAAiBI,YAAjB;;;;;;CC1LA,IAAM8B,SAAS,CAAf;;KAEMC;CACJ,wBAAc;CAAA;;CACZ,SAAKC,IAAL,GAAY,KAAZ;CACA,SAAKj7E,GAAL,GAAW,EAAX;CACA,SAAKk7E,IAAL,GAAYx1F,KAAKC,GAAL,EAAZ;;CAEA,SAAK4vB,QAAL,GAAgB,IAAhB;;;CAIA,QAAMs+D,OAAO,IAAb;;;;CAIA,SAAKzjE,OAAL,GAAe;CACb72C,aAAO,CADM;CAEb,UAAI2K,MAAJ,GAAa;CACX,YAAI,CAAC2vG,KAAKsH,YAAV,EAAwB,OAAO,IAAP;CACxB,eAAOtH,KAAKsH,YAAL,CAAkBj3G,MAAzB;CACD,OALY;CAMb,UAAIk3G,cAAJ,GAAqB;CACnB,eAAO,OAAOvH,KAAK7zE,GAAnB;CACD,OARY;CASb,UAAIq7E,aAAJ,GAAoB;CAClB,eAAO,IAAIxH,KAAK7zE,GAAhB;CACD,OAXY;CAYbs7E,oBAAc,IAZD;CAabC,cAAQ;CAbK,KAAf;;;;;CAmBA,SAAKC,eAAL,GAAuB,IAAvB;CACD;;;;6BAGO;CAAA;;CACN,WAAKjmE,QAAL,GAAgB,IAAIhpD,MAAMinE,aAAV,CAAwB;CACtCO,mBAAW;CAD2B,OAAxB,CAAhB;CAGA,WAAKxe,QAAL,CAAcqlB,aAAd,CAA4B,QAA5B,EAAsC,CAAtC;CACA,WAAKrlB,QAAL,CAAc4e,UAAd,CAAyBsnD,SAAzB,GAAqC,OAArC;CACA,WAAKrrE,OAAL,CAAakrE,YAAb,GAA4B,IAAIrC,YAAJ,CAAiB,KAAK1jE,QAAL,CAAc4e,UAA/B,CAA5B;;CAEA,WAAK5e,QAAL,CAAc4e,UAAd,CAAyBunD,aAAzB,GAAyC,UAAUr4G,CAAV,EAAa;CACpDA,UAAEk4D,cAAF;CACD,OAFD;;CAIA5b,eAASg8D,IAAT,CAAcnI,WAAd,CAA0B,KAAKj+D,QAAL,CAAc4e,UAAxC;;;;CAIA,WAAKynD,MAAL;CACA/oE,aAAO5sB,gBAAP,CAAwB,QAAxB,EAAkC,KAAK21F,MAAL,CAAY9uE,IAAZ,CAAiB,IAAjB,CAAlC,EAA0D,KAA1D;;;CAGA,UAAIrG,QAAQ,IAAZ;CACA,UAAIoM,OAAOgpE,KAAX,EAAkB;CAChBp1E,gBAAQ,IAAIq1E,SAAJ,EAAR,CADgB;CAEhBn8D,iBAASg8D,IAAT,CAAcnI,WAAd,CAA0B/sE,MAAMgtE,GAAhC,EAFgB;CAGjB;;;;;;;CAOD,UAAMsI,MAAM,SAANA,GAAM,GAAM;CAChB,YAAI,MAAKd,IAAT,EAAe;CACfvuD,8BAAsBqvD,GAAtB;;;CAGA,YAAI,MAAKP,eAAT,EAA0B;CACxB,gBAAKA,eAAL,CAAqB,MAAKprE,OAA1B;CACA,gBAAKorE,eAAL,GAAuB,IAAvB;CACD;;CAED,YAAM71F,MAAMD,KAAKC,GAAL,EAAZ;CACA,YAAMpsB,QAAQosB,MAAM,MAAKu1F,IAAzB;CACA,YAAMc,WAAW,MAAK5rE,OAAL,CAAagrE,cAA9B;;CAEA,YAAI7hH,QAAQyiH,QAAZ,EAAsB;CACpB,gBAAK5rE,OAAL,CAAa72C,KAAb,GAAqBA,QAAQ,IAA7B,CADoB;CAEpB,gBAAK+B,MAAL,CAAY,MAAK80C,OAAjB;CACA,gBAAK8qE,IAAL,GAAYv1F,MAAOpsB,QAAQyiH,QAA3B;CACA,gBAAKpmE,MAAL,CAAY,MAAKxF,OAAjB;CACD;CACD,YAAI3J,KAAJ,EAAW;CACTA,gBAAMnrC,MAAN;CACD;CACF,OAvBD;;CAyBAygH;CACD;;;;;;;;;;;4BASM3rE,SAAS;CACd,UAAI,CAAC,KAAK+qE,YAAN,IAAsB,CAAC,KAAKA,YAAL,CAAkBc,aAA7C,EAA4D;CAC5D,WAAKd,YAAL,CAAkB7/G,MAAlB,CAAyB80C,OAAzB;CACA,WAAKA,OAAL,CAAakrE,YAAb,CAA0BZ,QAA1B;CACD;;;;;;;;;;;4BAQMtqE,SAAS;CACd,UAAI,CAAC,KAAK+qE,YAAN,IAAsB,CAAC,KAAKA,YAAL,CAAkBc,aAA7C,EAA4D;CAC5D,WAAKd,YAAL,CAAkBvlE,MAAlB,CAAyBxF,OAAzB;CACA,UAAMlsC,SAAS,KAAKksC,OAAL,CAAalsC,MAA5B;CACA,UAAI,CAACA,MAAL,EAAa,OAAOxM,QAAQuL,KAAR,CAAc,QAAd,CAAP;CACb,WAAKsyC,QAAL,CAAcK,MAAd,CAAqB,KAAKulE,YAAL,CAAkBe,KAAvC,EAA8Ch4G,MAA9C;CACD;;;;;;;;;;;;;4BAUMi2G,KAAKljE,OAAOC,QAAQ;;CAEzB,UAAMr8C,IAAKo8C,SAASpE,OAAO+nE,UAAP,GAAoBG,MAAxC;CACA,UAAM9jH,IAAKigD,UAAUrE,OAAOioE,WAAP,GAAqBC,MAA1C;CACA,WAAK3qE,OAAL,CAAa6G,KAAb,GAAqBp8C,CAArB;CACA,WAAKu1C,OAAL,CAAa8G,MAAb,GAAsBjgD,CAAtB;;CAEA,UAAMiN,SAAS,KAAKksC,OAAL,CAAalsC,MAA5B;CACA,UAAIA,MAAJ,EAAY;CACVA,eAAO0Q,MAAP,GAAgB/Z,IAAI5D,CAApB;CACAiN,eAAO6xC,sBAAP;CACD;CACD,WAAKR,QAAL,CAAc6kB,OAAd,CAAsBv/D,CAAtB,EAAyB5D,CAAzB;CACD;;;;;;;;;;;;8BASQu+C,OAAO;CAAA;;CACd,WAAKgmE,eAAL,GAAuB,UAACprE,OAAD,EAAa;;CAElC,YAAI,OAAK+qE,YAAT,EAAuB;CACrB,iBAAKA,YAAL,CAAkB5pE,KAAlB,CAAwBnB,OAAxB;CACA,iBAAK+qE,YAAL,CAAkBgB,QAAlB,CAA2B/rE,OAA3B;CACD;;CAED,YAAI,CAACoF,MAAMymE,aAAX,EAA0B;CACxBzmE,gBAAMyjB,IAAN,CAAW7oB,OAAX;CACD;;CAED,eAAK+qE,YAAL,GAAoB3lE,KAApB;CACAA,cAAM4mE,MAAN,CAAahsE,OAAb;CACD,OAbD;CAcD;;;;;;CAIH,iBAAiB4qE,UAAjB;;;;;;KChLMqB;CACJ,uBAAc;CAAA;;CACZ,SAAKJ,aAAL,GAAqB,KAArB;CACA,SAAKK,OAAL,GAAe,IAAf;;CAEA,SAAKJ,KAAL,GAAa,IAAI3vH,MAAM25D,KAAV,EAAb;;;CAIA,QAAMq2D,aAAa,IAAIhwH,MAAMoiH,UAAV,CAAqB,CAArB,CAAnB;;CAED;;;;0BAMIv+D,SAAS;CACZ,WAAK6rE,aAAL,GAAqB,IAArB;CACD;;;4BAEM7rE,SAAS;;;4BAITA,SAAS;CACd,YAAM,IAAIgmE,KAAJ,CAAU,UAAV,CAAN;CACD;;;4BAEMhmE,SAAS;CACd,YAAM,IAAIgmE,KAAJ,CAAU,UAAV,CAAN;CACD;;;2BAEKhmE,SAAS;;;6BAIPA,SAAS;;;yBAxBJ;CACX,aAAO,KAAKksE,OAAZ;CACD;;;;;;CAyBH,gBAAiBD,SAAjB;;CC3CA,UAAiB;CACfG,OAAK;CACHC,UAAM,MADH;CAEHC,YAAQ,QAFL;CAGHC,sBAAkB,kBAHf;CAIHC,yBAAqB,qBAJlB;CAKHC,qBAAiB,iBALd;CAMHC,gBAAY;CANT;CADU,CAAjB;;;;;;KCAMC;CACJ,yBAAYb,KAAZ,EAAmB7mE,OAAnB,EAA4B;CAAA;;CAC1B,SAAK6mE,KAAL,GAAaA,KAAb;;CAEA,SAAKc,QAAL,GAAgB,IAAIC,GAAJ,EAAhB;CACA,SAAK5nE,OAAL,GAAeA,OAAf;;;;;CAKA,SAAKzoB,QAAL,GAAgB,EAAhB;CACD;;;;0BAIIwjB,SAAS;;;4BAIPA,SAAS;;;4BAITA,SAAS;;;+BAINA,SAAS8sE,QAAQ;CACzBA,aAAOjkD,IAAP,CAAY7oB,OAAZ;CACA,WAAK4sE,QAAL,CAAc9mH,GAAd,CAAkBgnH,OAAO/xF,EAAzB,EAA6B+xF,MAA7B;;CAEA,WAAKhB,KAAL,CAAWviH,GAAX,CAAeujH,OAAOppF,IAAtB;CACD;;;kCAEYsc,SAAS8sE,QAAQ;CAC5B,WAAKhB,KAAL,CAAWjxF,MAAX,CAAkBiyF,OAAOppF,IAAzB;CACA,WAAKkpF,QAAL,CAAc7gD,MAAd,CAAqB+gD,OAAO/xF,EAA5B;CACD;;;;;;;;;;;;yBASGA,IAAI;CACN,aAAO,KAAK6xF,QAAL,CAAc5vH,GAAd,CAAkB+9B,EAAlB,CAAP;CACD;;;;;;CAGH,oBAAiB4xF,aAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CCnDA,cAAiB;CACfI,YAAU,CADK;CAEfC,iBAAe,IAAI,GAFJ;CAGfC,SAAO,IAAI;CAHI,CAAjB;;;;;;KCGMJ;CACJ,iBAAc;CAAA;;;;;CAMZ,SAAKK,MAAL,GAAc,IAAd;;;;;CAKA,SAAKxpF,IAAL,GAAY,IAAZ;CACD;;;;0BAEIsc,SAASpjB,MAAM;CAClB,WAAKA,IAAL,GAAYA,IAAZ;CACA,WAAKuwF,KAAL,CAAWvwF,IAAX;CACD;;;2BAEKA,MAAM;CACV,UAAI9hB,WAAW,IAAI3e,MAAMs9G,aAAV,CAAwB2T,QAAQL,QAAhC,EAA0CK,QAAQL,QAAlD,CAAf;CACA,UAAIvwF,WAAW,IAAIrgC,MAAMk9D,iBAAV,CAA4B;CACzC3xD,eAAO,QADkC;CAEzCkmD,cAAMzxD,MAAMyC;CAF6B,OAA5B,CAAf;;CAKA,WAAKsuH,MAAL,GAAc,EAAd;CACA,WAAKxpF,IAAL,GAAY,IAAIvnC,MAAM+5D,KAAV,EAAZ;;CAGA,WAAK,IAAI3rD,IAAI,CAAb,EAAgBA,IAAIqyB,KAAKkqB,MAAzB,EAAiCv8C,GAAjC,EAAsC;CACpC,aAAK,IAAI7N,IAAI,CAAb,EAAgBA,IAAIkgC,KAAKiqB,KAAzB,EAAgCnqD,GAAhC,EAAqC;CACnC,cAAM+e,QAAQ,IAAItf,MAAMg7B,IAAV,CAAerc,QAAf,EAAyB0hB,QAAzB,CAAd;;CAEA,cAAM6wF,OAAOzwF,KAAKsrB,GAAL,CAAS39C,IAAI7N,CAAJ,GAAQA,CAAjB,CAAb;;;CAGA,eAAKwwH,MAAL,CAAYxwH,IAAI,GAAJ,GAAU6N,CAAtB,IAA2BkR,KAA3B;CACAA,gBAAMiI,QAAN,CAAe5d,GAAf,CACEpJ,IAAI0wH,QAAQL,QADd,EAEExiH,IAAI6iH,QAAQL,QAFd,EAGE,CAHF;CAKA,eAAKrpF,IAAL,CAAUn6B,GAAV,CAAckS,KAAd;CACD;CACF;CACF;;;;;;CAGH,UAAiBoxG,KAAjB;;;;;;KCrDMS;CACJ,kBAAYvyF,EAAZ,EAAgB6B,IAAhB,EAAsB;CAAA;;;;;;CAKpB,SAAK7B,EAAL,GAAUA,EAAV;CACA,SAAK6B,IAAL,GAAYA,QAAQ,EAApB;CACA,SAAK2wF,WAAL,GAAmB,KAAnB;CACD;;;;;;;;;;;;;0BASIvtE,SAAS;CACZ,WAAKutE,WAAL,GAAmB,IAAnB;CACA,WAAK7pF,IAAL,CAAU7mC,IAAV,GAAiB,KAAKk+B,EAAtB;CACA,WAAK2I,IAAL,CAAUopF,MAAV,GAAmB,IAAnB;CACD;;;4BAUM9sE,SAAS;;;4BAITA,SAAS;CACd,UAAI,KAAKpjB,IAAL,CAAUlZ,QAAd,EAAwB;CACtB,aAAKggB,IAAL,CAAUhgB,QAAV,CAAmBxd,IAAnB,CAAwB,KAAK02B,IAAL,CAAUlZ,QAAlC;CACD;;CAED,UAAI,KAAKkZ,IAAL,CAAU7xB,UAAd,EAA0B;CACxB,aAAK24B,IAAL,CAAU34B,UAAV,CAAqB7E,IAArB,CAA0B,KAAK02B,IAAL,CAAU7xB,UAApC;CACD;CACF;;;yBApBU;CACT,YAAM,IAAIi7G,KAAJ,CAAU,UAAV,CAAN;CACD;;;yBAEc;CACb,aAAO,KAAKuF,IAAL,CAAU7nF,IAAV,CAAehgB,QAAtB;CACD;;;;;;CAiBH,aAAiB4pG,MAAjB;;;;;;;;;;;;KC3CME;;;CACJ,kBAAY5wF,IAAZ,EAAkB;CAAA;;CAAA,kHACVA,KAAK7B,EADK;;CAEhB,UAAK6B,IAAL,GAAYA,IAAZ;CAFgB;CAGjB;;;;0BAEIojB,SAAS;CACZ,UAAMytE,kBAAkB,IAAItxH,MAAMi+G,cAAV,CAAyBgT,QAAQJ,aAAjC,EAAgD,CAAhD,EAAmD,CAAnD,CAAxB;CACA,WAAKU,KAAL,GAAa,IAAIvxH,MAAMg7B,IAAV,CACXs2F,eADW,EAEX,IAAItxH,MAAMy9D,mBAAV,CAA8B;CAC5BlyD,eAAO;CADqB,OAA9B,CAFW,CAAb;;CAOA,WAAKgmH,KAAL,CAAWC,MAAX,GAAoB,IAApB;;CAEA,WAAKD,KAAL,CAAWhqG,QAAX,CAAoB5d,GAApB,CAAwB,CAAxB,EAA2B,CAA3B,EAA8B,GAA9B;;CAEA,2GAAWk6C,OAAX;CACD;;;4BASMA,SAAS;;;gCAIL;;;4BAIJA,SAAS;CACd,6GAAaA,OAAb;CACD;;;yBAjBU;CACT,aAAO,KAAK0tE,KAAZ;CACD;;;;GAxBkBJ;;CA0CrB,mBAAiBE,MAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CC9CA,yBAAiB,2BAAA,CAAUrxH,KAAV,EAAkB;;;;;;;;;;;;;;;;CAgBlC,UAASyxH,aAAT,CAAwBlzG,MAAxB,EAAgCqpD,UAAhC,EAA6C;;CAE5C,OAAKrpD,MAAL,GAAcA,MAAd;;CAEA,OAAKqpD,UAAL,GAAoBA,eAAeznE,SAAjB,GAA+BynE,UAA/B,GAA4CxU,QAA9D;;;CAGA,OAAKjqB,OAAL,GAAe,IAAf;;;CAGA,OAAKloC,MAAL,GAAc,IAAIjB,MAAM+Q,OAAV,EAAd;;;CAGA,OAAKqkB,WAAL,GAAmB,CAAnB;CACA,OAAKkyB,WAAL,GAAmB9qC,QAAnB;;;CAGA,OAAKk1G,OAAL,GAAe,CAAf;CACA,OAAKC,OAAL,GAAen1G,QAAf;;;;CAIA,OAAKo1G,aAAL,GAAqB,CAArB,CAtB4C;CAuB5C,OAAKC,aAAL,GAAqBzxH,KAAKsV,EAA1B,CAvB4C;;;;CA2B5C,OAAKo8G,eAAL,GAAuB,CAAEt1G,QAAzB,CA3B4C;CA4B5C,OAAKu1G,eAAL,GAAuBv1G,QAAvB,CA5B4C;;;;CAgC5C,OAAKw1G,aAAL,GAAqB,KAArB;CACA,OAAKC,aAAL,GAAqB,IAArB;;;;CAIA,OAAKC,UAAL,GAAkB,IAAlB;CACA,OAAKC,SAAL,GAAiB,GAAjB;;;CAGA,OAAKC,YAAL,GAAoB,IAApB;CACA,OAAKC,WAAL,GAAmB,GAAnB;;;CAGA,OAAKC,SAAL,GAAiB,IAAjB;CACA,OAAKC,WAAL,GAAmB,GAAnB,CA9C4C;;;;CAkD5C,OAAKC,UAAL,GAAkB,KAAlB;CACA,OAAKC,eAAL,GAAuB,GAAvB,CAnD4C;;;CAsD5C,OAAKC,UAAL,GAAkB,IAAlB;;;CAGA,OAAK/8E,IAAL,GAAY,EAAEh0C,MAAM,EAAR,EAAYgxH,IAAI,EAAhB,EAAoB9wH,OAAO,EAA3B,EAA+B+wH,QAAQ,EAAvC,EAAZ;;;CAGA,OAAK/G,YAAL,GAAoB,EAAEgH,OAAO7yH,MAAM0B,KAAN,CAAYC,IAArB,EAA2BmxH,MAAM9yH,MAAM0B,KAAN,CAAYE,MAA7C,EAAqDmxH,KAAK/yH,MAAM0B,KAAN,CAAYG,KAAtE,EAApB;;;CAGA,OAAKmxH,OAAL,GAAe,KAAK/xH,MAAL,CAAY8K,KAAZ,EAAf;CACA,OAAKknH,SAAL,GAAiB,KAAK10G,MAAL,CAAYgJ,QAAZ,CAAqBxb,KAArB,EAAjB;CACA,OAAKmnH,KAAL,GAAa,KAAK30G,MAAL,CAAYgrC,IAAzB;;;;;;CAMA,OAAK4pE,aAAL,GAAqB,YAAY;;CAEhC,UAAOC,UAAU95G,GAAjB;CAEA,GAJD;;CAMA,OAAK+5G,iBAAL,GAAyB,YAAY;;CAEpC,UAAOD,UAAUj6G,KAAjB;CAEA,GAJD;;CAMA,OAAK+1B,KAAL,GAAa,YAAY;;CAExBpwB,SAAM7d,MAAN,CAAa8I,IAAb,CAAmB+U,MAAMk0G,OAAzB;CACAl0G,SAAMP,MAAN,CAAagJ,QAAb,CAAsBxd,IAAtB,CAA4B+U,MAAMm0G,SAAlC;CACAn0G,SAAMP,MAAN,CAAagrC,IAAb,GAAoBzqC,MAAMo0G,KAA1B;;CAEAp0G,SAAMP,MAAN,CAAairC,sBAAb;CACA1qC,SAAMsb,aAAN,CAAqBk5F,WAArB;;CAEAx0G,SAAM/P,MAAN;;CAEAy9D,WAAQ+mD,MAAMC,IAAd;CAEA,GAbD;;;CAgBA,OAAKzkH,MAAL,GAAc,YAAW;;CAExB,OAAId,SAAS,IAAIjO,MAAM+Q,OAAV,EAAb;;;CAGA,OAAI0iH,OAAO,IAAIzzH,MAAMmO,UAAV,GAAuBwC,kBAAvB,CAA2C4N,OAAO4F,EAAlD,EAAsD,IAAInkB,MAAM+Q,OAAV,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,CAAtD,CAAX;CACA,OAAI2iH,cAAcD,KAAK1nH,KAAL,GAAasF,OAAb,EAAlB;;CAEA,OAAIsiH,eAAe,IAAI3zH,MAAM+Q,OAAV,EAAnB;CACA,OAAI6iH,iBAAiB,IAAI5zH,MAAMmO,UAAV,EAArB;;CAEA,UAAO,SAASY,MAAT,GAAmB;;CAEzB,QAAIwY,WAAWzI,MAAMP,MAAN,CAAagJ,QAA5B;;CAEAtZ,WAAOlE,IAAP,CAAawd,QAAb,EAAwB5S,GAAxB,CAA6BmK,MAAM7d,MAAnC;;;CAGAgN,WAAO0I,eAAP,CAAwB88G,IAAxB;;;CAGAL,cAAUl4G,cAAV,CAA0BjN,MAA1B;;CAEA,QAAK6Q,MAAM0zG,UAAN,IAAoBhmD,UAAU+mD,MAAMC,IAAzC,EAAgD;;CAE/CK,gBAAYC,sBAAZ;CAEA;;CAEDV,cAAUj6G,KAAV,IAAmB46G,eAAe56G,KAAlC;CACAi6G,cAAU95G,GAAV,IAAiBy6G,eAAez6G,GAAhC;;;CAGA85G,cAAUj6G,KAAV,GAAkB/Y,KAAKwM,GAAL,CAAUkS,MAAMgzG,eAAhB,EAAiC1xH,KAAKqL,GAAL,CAAUqT,MAAMizG,eAAhB,EAAiCqB,UAAUj6G,KAA3C,CAAjC,CAAlB;;;CAGAi6G,cAAU95G,GAAV,GAAgBlZ,KAAKwM,GAAL,CAAUkS,MAAM8yG,aAAhB,EAA+BxxH,KAAKqL,GAAL,CAAUqT,MAAM+yG,aAAhB,EAA+BuB,UAAU95G,GAAzC,CAA/B,CAAhB;;CAEA85G,cAAUzjG,QAAV;;CAGAyjG,cAAU75G,MAAV,IAAoBkN,KAApB;;;CAGA2sG,cAAU75G,MAAV,GAAmBnZ,KAAKwM,GAAL,CAAUkS,MAAMsW,WAAhB,EAA6Bh1B,KAAKqL,GAAL,CAAUqT,MAAMwoC,WAAhB,EAA6B8rE,UAAU75G,MAAvC,CAA7B,CAAnB;;;CAGAuF,UAAM7d,MAAN,CAAamM,GAAb,CAAkB4mH,SAAlB;;CAEA/lH,WAAOoL,gBAAP,CAAyB+5G,SAAzB;;;CAGAnlH,WAAO0I,eAAP,CAAwB+8G,WAAxB;;CAEAnsG,aAASxd,IAAT,CAAe+U,MAAM7d,MAArB,EAA8BmM,GAA9B,CAAmCa,MAAnC;;CAEA6Q,UAAMP,MAAN,CAAa0F,MAAb,CAAqBnF,MAAM7d,MAA3B;;CAEA,QAAK6d,MAAMkzG,aAAN,KAAwB,IAA7B,EAAoC;;CAEnC+B,oBAAe56G,KAAf,IAA0B,IAAI2F,MAAMmzG,aAApC;CACA8B,oBAAez6G,GAAf,IAAwB,IAAIwF,MAAMmzG,aAAlC;CAEA,KALD,MAKO;;CAEN8B,oBAAepqH,GAAf,CAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B;CAEA;;CAED8c,YAAQ,CAAR;CACAutG,cAAUrqH,GAAV,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB;;;;;;CAMA,QAAKsqH,eACJN,aAAa/9G,iBAAb,CAAgCkJ,MAAMP,MAAN,CAAagJ,QAA7C,IAA0DtW,GADtD,IAEJ,KAAM,IAAI2iH,eAAe5iH,GAAf,CAAoB8N,MAAMP,MAAN,CAAa3P,UAAjC,CAAV,IAA4DqC,GAF7D,EAEmE;;CAElE6N,WAAMsb,aAAN,CAAqBk5F,WAArB;;CAEAK,kBAAa5pH,IAAb,CAAmB+U,MAAMP,MAAN,CAAagJ,QAAhC;CACAqsG,oBAAe7pH,IAAf,CAAqB+U,MAAMP,MAAN,CAAa3P,UAAlC;CACAqlH,mBAAc,KAAd;;CAEA,YAAO,IAAP;CAEA;;CAED,WAAO,KAAP;CAEA,IAjFD;CAmFA,GA9Fa,EAAd;;CAgGA,OAAKvqF,OAAL,GAAe,YAAW;;CAEzB5qB,SAAM8oD,UAAN,CAAiB3tC,mBAAjB,CAAsC,aAAtC,EAAqDi6F,aAArD,EAAoE,KAApE;CACAp1G,SAAM8oD,UAAN,CAAiB3tC,mBAAjB,CAAsC,WAAtC,EAAmDk6F,WAAnD,EAAgE,KAAhE;CACAr1G,SAAM8oD,UAAN,CAAiB3tC,mBAAjB,CAAsC,OAAtC,EAA+Cm6F,YAA/C,EAA6D,KAA7D;;CAEAt1G,SAAM8oD,UAAN,CAAiB3tC,mBAAjB,CAAsC,YAAtC,EAAoDo6F,YAApD,EAAkE,KAAlE;CACAv1G,SAAM8oD,UAAN,CAAiB3tC,mBAAjB,CAAsC,UAAtC,EAAkDq6F,UAAlD,EAA8D,KAA9D;CACAx1G,SAAM8oD,UAAN,CAAiB3tC,mBAAjB,CAAsC,WAAtC,EAAmDs6F,WAAnD,EAAgE,KAAhE;;CAEAnhE,YAASn5B,mBAAT,CAA8B,WAA9B,EAA2Cu6F,WAA3C,EAAwD,KAAxD;CACAphE,YAASn5B,mBAAT,CAA8B,SAA9B,EAAyCw6F,SAAzC,EAAoD,KAApD;;CAEAnuE,UAAOrsB,mBAAP,CAA4B,SAA5B,EAAuCy6F,SAAvC,EAAkD,KAAlD;;;CAIA,GAjBD;;;;;;CAuBA,MAAI51G,QAAQ,IAAZ;;CAEA,MAAIw0G,cAAc,EAAE35F,MAAM,QAAR,EAAlB;CACA,MAAIg7F,aAAa,EAAEh7F,MAAM,OAAR,EAAjB;CACA,MAAIi7F,WAAW,EAAEj7F,MAAM,KAAR,EAAf;;CAEA,MAAI45F,QAAQ,EAAEC,MAAO,CAAE,CAAX,EAAcqB,QAAS,CAAvB,EAA0BC,OAAQ,CAAlC,EAAqC/B,KAAM,CAA3C,EAA8CgC,cAAe,CAA7D,EAAgEC,aAAc,CAA9E,EAAiFC,WAAY,CAA7F,EAAZ;;CAEA,MAAIzoD,QAAQ+mD,MAAMC,IAAlB;;CAEA,MAAIviH,MAAM,QAAV;;;CAGA,MAAImiH,YAAY,IAAIpzH,MAAMyvB,SAAV,EAAhB;CACA,MAAIskG,iBAAiB,IAAI/zH,MAAMyvB,SAAV,EAArB;;CAEA,MAAIhJ,QAAQ,CAAZ;CACA,MAAIutG,YAAY,IAAIh0H,MAAM+Q,OAAV,EAAhB;CACA,MAAIkjH,cAAc,KAAlB;;CAEA,MAAIiB,cAAc,IAAIl1H,MAAMoU,OAAV,EAAlB;CACA,MAAI+gH,YAAY,IAAIn1H,MAAMoU,OAAV,EAAhB;CACA,MAAIghH,cAAc,IAAIp1H,MAAMoU,OAAV,EAAlB;;CAEA,MAAIihH,WAAW,IAAIr1H,MAAMoU,OAAV,EAAf;CACA,MAAIkhH,SAAS,IAAIt1H,MAAMoU,OAAV,EAAb;CACA,MAAImhH,WAAW,IAAIv1H,MAAMoU,OAAV,EAAf;;CAEA,MAAIohH,aAAa,IAAIx1H,MAAMoU,OAAV,EAAjB;CACA,MAAIqhH,WAAW,IAAIz1H,MAAMoU,OAAV,EAAf;CACA,MAAIshH,aAAa,IAAI11H,MAAMoU,OAAV,EAAjB;;CAEA,WAAS0/G,oBAAT,GAAgC;;CAE/B,UAAO,IAAI1zH,KAAKsV,EAAT,GAAc,EAAd,GAAmB,EAAnB,GAAwBoJ,MAAM2zG,eAArC;CAEA;;CAED,WAASkD,YAAT,GAAwB;;CAEvB,UAAOv1H,KAAKC,GAAL,CAAU,IAAV,EAAgBye,MAAMqzG,SAAtB,CAAP;CAEA;;CAED,WAAS0B,UAAT,CAAqBjkH,KAArB,EAA6B;;CAE5BmkH,kBAAe56G,KAAf,IAAwBvJ,KAAxB;CAEA;;CAED,WAASgmH,QAAT,CAAmBhmH,KAAnB,EAA2B;;CAE1BmkH,kBAAez6G,GAAf,IAAsB1J,KAAtB;CAEA;;CAED,MAAIimH,UAAU,YAAW;;CAExB,OAAItkH,IAAI,IAAIvR,MAAM+Q,OAAV,EAAR;;CAEA,UAAO,SAAS8kH,OAAT,CAAkBj6G,QAAlB,EAA4Bk6G,YAA5B,EAA2C;;CAEjDvkH,MAAEmI,mBAAF,CAAuBo8G,YAAvB,EAAqC,CAArC,EAFiD;CAGjDvkH,MAAE7D,cAAF,CAAkB,CAAEkO,QAApB;;CAEAo4G,cAAU5mH,GAAV,CAAemE,CAAf;CAEA,IAPD;CASA,GAba,EAAd;;CAeA,MAAIwkH,QAAQ,YAAW;;CAEtB,OAAIxkH,IAAI,IAAIvR,MAAM+Q,OAAV,EAAR;;CAEA,UAAO,SAASglH,KAAT,CAAgBn6G,QAAhB,EAA0Bk6G,YAA1B,EAAyC;;CAE/CvkH,MAAEmI,mBAAF,CAAuBo8G,YAAvB,EAAqC,CAArC,EAF+C;CAG/CvkH,MAAE7D,cAAF,CAAkBkO,QAAlB;;CAEAo4G,cAAU5mH,GAAV,CAAemE,CAAf;CAEA,IAPD;CASA,GAbW,EAAZ;;;CAgBA,MAAIykH,MAAM,YAAW;;CAEpB,OAAI/nH,SAAS,IAAIjO,MAAM+Q,OAAV,EAAb;;CAEA,UAAO,SAASilH,GAAT,CAAeC,MAAf,EAAuBpI,MAAvB,EAAgC;;CAEtC,QAAIqI,UAAUp3G,MAAM8oD,UAAN,KAAqBxU,QAArB,GAAgCt0C,MAAM8oD,UAAN,CAAiBwnD,IAAjD,GAAwDtwG,MAAM8oD,UAA5E;;CAEA,QAAK9oD,MAAMP,MAAN,YAAwBve,MAAMi8B,iBAAnC,EAAuD;;;CAGtD,SAAI1U,WAAWzI,MAAMP,MAAN,CAAagJ,QAA5B;CACAtZ,YAAOlE,IAAP,CAAawd,QAAb,EAAwB5S,GAAxB,CAA6BmK,MAAM7d,MAAnC;CACA,SAAIk1H,iBAAiBloH,OAAO7M,MAAP,EAArB;;;CAGA+0H,uBAAkB/1H,KAAKkoB,GAAL,CAAYxJ,MAAMP,MAAN,CAAa6J,GAAb,GAAmB,CAArB,GAA2BhoB,KAAKsV,EAAhC,GAAqC,KAA/C,CAAlB;;;CAGAmgH,aAAS,IAAII,MAAJ,GAAaE,cAAb,GAA8BD,QAAQl7C,YAA/C,EAA6Dl8D,MAAMP,MAAN,CAAa3G,MAA1E;CACAm+G,WAAO,IAAIlI,MAAJ,GAAasI,cAAb,GAA8BD,QAAQl7C,YAA7C,EAA2Dl8D,MAAMP,MAAN,CAAa3G,MAAxE;CAEA,KAdD,MAcO,IAAKkH,MAAMP,MAAN,YAAwBve,MAAMk8B,kBAAnC,EAAwD;;;CAG9D25F,aAASI,UAAWn3G,MAAMP,MAAN,CAAauJ,KAAb,GAAqBhJ,MAAMP,MAAN,CAAasJ,IAA7C,IAAsD/I,MAAMP,MAAN,CAAagrC,IAAnE,GAA0E2sE,QAAQE,WAA3F,EAAwGt3G,MAAMP,MAAN,CAAa3G,MAArH;CACAm+G,WAAOlI,UAAW/uG,MAAMP,MAAN,CAAayJ,GAAb,GAAmBlJ,MAAMP,MAAN,CAAawJ,MAA3C,IAAsDjJ,MAAMP,MAAN,CAAagrC,IAAnE,GAA0E2sE,QAAQl7C,YAAzF,EAAuGl8D,MAAMP,MAAN,CAAa3G,MAApH;CAEA,KANM,MAMA;;;CAGNzM,aAAQC,IAAR,CAAc,8EAAd;CACA0T,WAAMwzG,SAAN,GAAkB,KAAlB;CAEA;CAED,IAhCD;CAkCA,GAtCS,EAAV;;CAwCA,WAAS+D,OAAT,CAAkBC,UAAlB,EAA+B;;CAE9B,OAAKx3G,MAAMP,MAAN,YAAwBve,MAAMi8B,iBAAnC,EAAuD;;CAEtDxV,aAAS6vG,UAAT;CAEA,IAJD,MAIO,IAAKx3G,MAAMP,MAAN,YAAwBve,MAAMk8B,kBAAnC,EAAwD;;CAE9Dpd,UAAMP,MAAN,CAAagrC,IAAb,GAAoBnpD,KAAKwM,GAAL,CAAUkS,MAAM4yG,OAAhB,EAAyBtxH,KAAKqL,GAAL,CAAUqT,MAAM6yG,OAAhB,EAAyB7yG,MAAMP,MAAN,CAAagrC,IAAb,GAAoB+sE,UAA7C,CAAzB,CAApB;CACAx3G,UAAMP,MAAN,CAAairC,sBAAb;CACAyqE,kBAAc,IAAd;CAEA,IANM,MAMA;;CAEN9oH,YAAQC,IAAR,CAAc,qFAAd;CACA0T,UAAMozG,UAAN,GAAmB,KAAnB;CAEA;CAED;;CAED,WAASqE,QAAT,CAAmBD,UAAnB,EAAgC;;CAE/B,OAAKx3G,MAAMP,MAAN,YAAwBve,MAAMi8B,iBAAnC,EAAuD;;CAEtDxV,aAAS6vG,UAAT;CAEA,IAJD,MAIO,IAAKx3G,MAAMP,MAAN,YAAwBve,MAAMk8B,kBAAnC,EAAwD;;CAE9Dpd,UAAMP,MAAN,CAAagrC,IAAb,GAAoBnpD,KAAKwM,GAAL,CAAUkS,MAAM4yG,OAAhB,EAAyBtxH,KAAKqL,GAAL,CAAUqT,MAAM6yG,OAAhB,EAAyB7yG,MAAMP,MAAN,CAAagrC,IAAb,GAAoB+sE,UAA7C,CAAzB,CAApB;CACAx3G,UAAMP,MAAN,CAAairC,sBAAb;CACAyqE,kBAAc,IAAd;CAEA,IANM,MAMA;;CAEN9oH,YAAQC,IAAR,CAAc,qFAAd;CACA0T,UAAMozG,UAAN,GAAmB,KAAnB;CAEA;CAED;;;;;;CAMD,WAASsE,qBAAT,CAAgCn8F,KAAhC,EAAwC;;;;CAIvC66F,eAAYvrH,GAAZ,CAAiB0wB,MAAM+zF,OAAvB,EAAgC/zF,MAAMi0F,OAAtC;CAEA;;CAED,WAASmI,oBAAT,CAA+Bp8F,KAA/B,EAAuC;;;;CAItCm7F,cAAW7rH,GAAX,CAAgB0wB,MAAM+zF,OAAtB,EAA+B/zF,MAAMi0F,OAArC;CAEA;;CAED,WAASoI,kBAAT,CAA6Br8F,KAA7B,EAAqC;;;;CAIpCg7F,YAAS1rH,GAAT,CAAc0wB,MAAM+zF,OAApB,EAA6B/zF,MAAMi0F,OAAnC;CAEA;;CAED,WAASqI,qBAAT,CAAgCt8F,KAAhC,EAAwC;;;;CAIvC86F,aAAUxrH,GAAV,CAAe0wB,MAAM+zF,OAArB,EAA8B/zF,MAAMi0F,OAApC;CACA8G,eAAYxgH,UAAZ,CAAwBugH,SAAxB,EAAmCD,WAAnC;;CAEA,OAAIgB,UAAUp3G,MAAM8oD,UAAN,KAAqBxU,QAArB,GAAgCt0C,MAAM8oD,UAAN,CAAiBwnD,IAAjD,GAAwDtwG,MAAM8oD,UAA5E;;;CAGAisD,cAAY,IAAIzzH,KAAKsV,EAAT,GAAc0/G,YAAY70H,CAA1B,GAA8B21H,QAAQE,WAAtC,GAAoDt3G,MAAMuzG,WAAtE;;;CAGAuD,YAAU,IAAIx1H,KAAKsV,EAAT,GAAc0/G,YAAYhnH,CAA1B,GAA8B8nH,QAAQl7C,YAAtC,GAAqDl8D,MAAMuzG,WAArE;;CAEA6C,eAAYnrH,IAAZ,CAAkBorH,SAAlB;;CAEAr2G,SAAM/P,MAAN;CAEA;;CAED,WAAS6nH,oBAAT,CAA+Bv8F,KAA/B,EAAuC;;;;CAItCo7F,YAAS9rH,GAAT,CAAc0wB,MAAM+zF,OAApB,EAA6B/zF,MAAMi0F,OAAnC;;CAEAoH,cAAW9gH,UAAX,CAAuB6gH,QAAvB,EAAiCD,UAAjC;;CAEA,OAAKE,WAAWtnH,CAAX,GAAe,CAApB,EAAwB;;CAEvBioH,YAASV,cAAT;CAEA,IAJD,MAIO,IAAKD,WAAWtnH,CAAX,GAAe,CAApB,EAAwB;;CAE9BmoH,aAAUZ,cAAV;CAEA;;CAEDH,cAAWzrH,IAAX,CAAiB0rH,QAAjB;;CAEA32G,SAAM/P,MAAN;CAEA;;CAED,WAAS8nH,kBAAT,CAA6Bx8F,KAA7B,EAAqC;;;;CAIpCi7F,UAAO3rH,GAAP,CAAY0wB,MAAM+zF,OAAlB,EAA2B/zF,MAAMi0F,OAAjC;;CAEAiH,YAAS3gH,UAAT,CAAqB0gH,MAArB,EAA6BD,QAA7B;;CAEAW,OAAKT,SAASh1H,CAAd,EAAiBg1H,SAASnnH,CAA1B;;CAEAinH,YAAStrH,IAAT,CAAeurH,MAAf;;CAEAx2G,SAAM/P,MAAN;CAEA;;CAQD,WAAS+nH,gBAAT,CAA2Bz8F,KAA3B,EAAmC;;;;CAIlC,OAAKA,MAAMwzF,MAAN,GAAe,CAApB,EAAwB;;CAEvB0I,aAAUZ,cAAV;CAEA,IAJD,MAIO,IAAKt7F,MAAMwzF,MAAN,GAAe,CAApB,EAAwB;;CAE9BwI,YAASV,cAAT;CAEA;;CAED72G,SAAM/P,MAAN;CAEA;;CAED,WAASgoH,aAAT,CAAwB18F,KAAxB,EAAgC;;;;CAI/B,WAASA,MAAM6xF,OAAf;;CAEC,SAAKptG,MAAM62B,IAAN,CAAWg9E,EAAhB;CACCqD,SAAK,CAAL,EAAQl3G,MAAMyzG,WAAd;CACAzzG,WAAM/P,MAAN;CACA;;CAED,SAAK+P,MAAM62B,IAAN,CAAWi9E,MAAhB;CACCoD,SAAK,CAAL,EAAQ,CAAEl3G,MAAMyzG,WAAhB;CACAzzG,WAAM/P,MAAN;CACA;;CAED,SAAK+P,MAAM62B,IAAN,CAAWh0C,IAAhB;CACCq0H,SAAKl3G,MAAMyzG,WAAX,EAAwB,CAAxB;CACAzzG,WAAM/P,MAAN;CACA;;CAED,SAAK+P,MAAM62B,IAAN,CAAW9zC,KAAhB;CACCm0H,SAAK,CAAEl3G,MAAMyzG,WAAb,EAA0B,CAA1B;CACAzzG,WAAM/P,MAAN;CACA;;CApBF;CAwBA;;CAED,WAASioH,sBAAT,CAAiC38F,KAAjC,EAAyC;;;;CAIxC66F,eAAYvrH,GAAZ,CAAiB0wB,MAAM48F,OAAN,CAAe,CAAf,EAAmBC,KAApC,EAA2C78F,MAAM48F,OAAN,CAAe,CAAf,EAAmBE,KAA9D;CAEA;;CAED,WAASC,qBAAT,CAAgC/8F,KAAhC,EAAwC;;;;CAIvC,OAAIvkB,KAAKukB,MAAM48F,OAAN,CAAe,CAAf,EAAmBC,KAAnB,GAA2B78F,MAAM48F,OAAN,CAAe,CAAf,EAAmBC,KAAvD;CACA,OAAIrhH,KAAKwkB,MAAM48F,OAAN,CAAe,CAAf,EAAmBE,KAAnB,GAA2B98F,MAAM48F,OAAN,CAAe,CAAf,EAAmBE,KAAvD;;CAEA,OAAIv7G,WAAWxb,KAAKkM,IAAL,CAAWwJ,KAAKA,EAAL,GAAUD,KAAKA,EAA1B,CAAf;;CAEA2/G,cAAW7rH,GAAX,CAAgB,CAAhB,EAAmBiS,QAAnB;CAEA;;CAED,WAASy7G,mBAAT,CAA8Bh9F,KAA9B,EAAsC;;;;CAIrCg7F,YAAS1rH,GAAT,CAAc0wB,MAAM48F,OAAN,CAAe,CAAf,EAAmBC,KAAjC,EAAwC78F,MAAM48F,OAAN,CAAe,CAAf,EAAmBE,KAA3D;CAEA;;CAED,WAASG,qBAAT,CAAgCj9F,KAAhC,EAAwC;;;;CAIvC86F,aAAUxrH,GAAV,CAAe0wB,MAAM48F,OAAN,CAAe,CAAf,EAAmBC,KAAlC,EAAyC78F,MAAM48F,OAAN,CAAe,CAAf,EAAmBE,KAA5D;CACA/B,eAAYxgH,UAAZ,CAAwBugH,SAAxB,EAAmCD,WAAnC;;CAEA,OAAIgB,UAAUp3G,MAAM8oD,UAAN,KAAqBxU,QAArB,GAAgCt0C,MAAM8oD,UAAN,CAAiBwnD,IAAjD,GAAwDtwG,MAAM8oD,UAA5E;;;CAGAisD,cAAY,IAAIzzH,KAAKsV,EAAT,GAAc0/G,YAAY70H,CAA1B,GAA8B21H,QAAQE,WAAtC,GAAoDt3G,MAAMuzG,WAAtE;;;CAGAuD,YAAU,IAAIx1H,KAAKsV,EAAT,GAAc0/G,YAAYhnH,CAA1B,GAA8B8nH,QAAQl7C,YAAtC,GAAqDl8D,MAAMuzG,WAArE;;CAEA6C,eAAYnrH,IAAZ,CAAkBorH,SAAlB;;CAEAr2G,SAAM/P,MAAN;CAEA;;CAED,WAASwoH,oBAAT,CAA+Bl9F,KAA/B,EAAuC;;;;CAItC,OAAIvkB,KAAKukB,MAAM48F,OAAN,CAAe,CAAf,EAAmBC,KAAnB,GAA2B78F,MAAM48F,OAAN,CAAe,CAAf,EAAmBC,KAAvD;CACA,OAAIrhH,KAAKwkB,MAAM48F,OAAN,CAAe,CAAf,EAAmBE,KAAnB,GAA2B98F,MAAM48F,OAAN,CAAe,CAAf,EAAmBE,KAAvD;;CAEA,OAAIv7G,WAAWxb,KAAKkM,IAAL,CAAWwJ,KAAKA,EAAL,GAAUD,KAAKA,EAA1B,CAAf;;CAEA4/G,YAAS9rH,GAAT,CAAc,CAAd,EAAiBiS,QAAjB;;CAEA85G,cAAW9gH,UAAX,CAAuB6gH,QAAvB,EAAiCD,UAAjC;;CAEA,OAAKE,WAAWtnH,CAAX,GAAe,CAApB,EAAwB;;CAEvBmoH,aAAUZ,cAAV;CAEA,IAJD,MAIO,IAAKD,WAAWtnH,CAAX,GAAe,CAApB,EAAwB;;CAE9BioH,YAASV,cAAT;CAEA;;CAEDH,cAAWzrH,IAAX,CAAiB0rH,QAAjB;;CAEA32G,SAAM/P,MAAN;CAEA;;CAED,WAASyoH,kBAAT,CAA6Bn9F,KAA7B,EAAqC;;;;CAIpCi7F,UAAO3rH,GAAP,CAAY0wB,MAAM48F,OAAN,CAAe,CAAf,EAAmBC,KAA/B,EAAsC78F,MAAM48F,OAAN,CAAe,CAAf,EAAmBE,KAAzD;;CAEA5B,YAAS3gH,UAAT,CAAqB0gH,MAArB,EAA6BD,QAA7B;;CAEAW,OAAKT,SAASh1H,CAAd,EAAiBg1H,SAASnnH,CAA1B;;CAEAinH,YAAStrH,IAAT,CAAeurH,MAAf;;CAEAx2G,SAAM/P,MAAN;CAEA;;;;;;;;CAYD,WAASolH,WAAT,CAAsB95F,KAAtB,EAA8B;;CAE7B,OAAKvb,MAAMqqB,OAAN,KAAkB,KAAvB,EAA+B;;CAE/B9O,SAAM20C,cAAN;;CAEA,OAAK30C,MAAM4zF,MAAN,KAAiBnvG,MAAM+sG,YAAN,CAAmBgH,KAAzC,EAAiD;;CAEhD,QAAK/zG,MAAMszG,YAAN,KAAuB,KAA5B,EAAoC;;CAEpCoE,0BAAuBn8F,KAAvB;;CAEAmyC,YAAQ+mD,MAAMsB,MAAd;CAEA,IARD,MAQO,IAAKx6F,MAAM4zF,MAAN,KAAiBnvG,MAAM+sG,YAAN,CAAmBiH,IAAzC,EAAgD;;CAEtD,QAAKh0G,MAAMozG,UAAN,KAAqB,KAA1B,EAAkC;;CAElCuE,yBAAsBp8F,KAAtB;;CAEAmyC,YAAQ+mD,MAAMuB,KAAd;CAEA,IARM,MAQA,IAAKz6F,MAAM4zF,MAAN,KAAiBnvG,MAAM+sG,YAAN,CAAmBkH,GAAzC,EAA+C;;CAErD,QAAKj0G,MAAMwzG,SAAN,KAAoB,KAAzB,EAAiC;;CAEjCoE,uBAAoBr8F,KAApB;;CAEAmyC,YAAQ+mD,MAAMR,GAAd;CAEA;;CAED,OAAKvmD,UAAU+mD,MAAMC,IAArB,EAA4B;;CAE3BpgE,aAAS15B,gBAAT,CAA2B,WAA3B,EAAwC86F,WAAxC,EAAqD,KAArD;CACAphE,aAAS15B,gBAAT,CAA2B,SAA3B,EAAsC+6F,SAAtC,EAAiD,KAAjD;;CAEA31G,UAAMsb,aAAN,CAAqBu6F,UAArB;CAEA;CAED;;CAED,WAASH,WAAT,CAAsBn6F,KAAtB,EAA8B;;CAE7B,OAAKvb,MAAMqqB,OAAN,KAAkB,KAAvB,EAA+B;;CAE/B9O,SAAM20C,cAAN;;CAEA,OAAKxC,UAAU+mD,MAAMsB,MAArB,EAA8B;;CAE7B,QAAK/1G,MAAMszG,YAAN,KAAuB,KAA5B,EAAoC;;CAEpCuE,0BAAuBt8F,KAAvB;CAEA,IAND,MAMO,IAAKmyC,UAAU+mD,MAAMuB,KAArB,EAA6B;;CAEnC,QAAKh2G,MAAMozG,UAAN,KAAqB,KAA1B,EAAkC;;CAElC0E,yBAAsBv8F,KAAtB;CAEA,IANM,MAMA,IAAKmyC,UAAU+mD,MAAMR,GAArB,EAA2B;;CAEjC,QAAKj0G,MAAMwzG,SAAN,KAAoB,KAAzB,EAAiC;;CAEjCuE,uBAAoBx8F,KAApB;CAEA;CAED;;CAED,WAASo6F,SAAT,CAAoBp6F,KAApB,EAA4B;;CAE3B,OAAKvb,MAAMqqB,OAAN,KAAkB,KAAvB,EAA+B;;CAI/BiqB,YAASn5B,mBAAT,CAA8B,WAA9B,EAA2Cu6F,WAA3C,EAAwD,KAAxD;CACAphE,YAASn5B,mBAAT,CAA8B,SAA9B,EAAyCw6F,SAAzC,EAAoD,KAApD;;CAEA31G,SAAMsb,aAAN,CAAqBw6F,QAArB;;CAEApoD,WAAQ+mD,MAAMC,IAAd;CAEA;;CAED,WAASY,YAAT,CAAuB/5F,KAAvB,EAA+B;;CAE9B,OAAKvb,MAAMqqB,OAAN,KAAkB,KAAlB,IAA2BrqB,MAAMozG,UAAN,KAAqB,KAAhD,IAA2D1lD,UAAU+mD,MAAMC,IAAhB,IAAwBhnD,UAAU+mD,MAAMsB,MAAxG,EAAmH;;CAEnHx6F,SAAM20C,cAAN;CACA30C,SAAMo9F,eAAN;;CAEAX,oBAAkBz8F,KAAlB;;CAEAvb,SAAMsb,aAAN,CAAqBu6F,UAArB,EAT8B;CAU9B71G,SAAMsb,aAAN,CAAqBw6F,QAArB;CAEA;;CAED,WAASF,SAAT,CAAoBr6F,KAApB,EAA4B;;CAE3B,OAAKvb,MAAMqqB,OAAN,KAAkB,KAAlB,IAA2BrqB,MAAM4zG,UAAN,KAAqB,KAAhD,IAAyD5zG,MAAMwzG,SAAN,KAAoB,KAAlF,EAA0F;;CAE1FyE,iBAAe18F,KAAf;CAEA;;CAED,WAASg6F,YAAT,CAAuBh6F,KAAvB,EAA+B;;CAE9B,OAAKvb,MAAMqqB,OAAN,KAAkB,KAAvB,EAA+B;;CAE/B,WAAS9O,MAAM48F,OAAN,CAAc71H,MAAvB;;CAEC,SAAK,CAAL;;;CAEC,SAAK0d,MAAMszG,YAAN,KAAuB,KAA5B,EAAoC;;CAEpC4E,4BAAwB38F,KAAxB;;CAEAmyC,aAAQ+mD,MAAMwB,YAAd;;CAEA;;CAED,SAAK,CAAL;;;CAEC,SAAKj2G,MAAMozG,UAAN,KAAqB,KAA1B,EAAkC;;CAElCkF,2BAAuB/8F,KAAvB;;CAEAmyC,aAAQ+mD,MAAMyB,WAAd;;CAEA;;CAED,SAAK,CAAL;;;CAEC,SAAKl2G,MAAMwzG,SAAN,KAAoB,KAAzB,EAAiC;;CAEjC+E,yBAAqBh9F,KAArB;;CAEAmyC,aAAQ+mD,MAAM0B,SAAd;;CAEA;;CAED;;CAECzoD,aAAQ+mD,MAAMC,IAAd;;CAlCF;;CAsCA,OAAKhnD,UAAU+mD,MAAMC,IAArB,EAA4B;;CAE3B10G,UAAMsb,aAAN,CAAqBu6F,UAArB;CAEA;CAED;;CAED,WAASJ,WAAT,CAAsBl6F,KAAtB,EAA8B;;CAE7B,OAAKvb,MAAMqqB,OAAN,KAAkB,KAAvB,EAA+B;;CAE/B9O,SAAM20C,cAAN;CACA30C,SAAMo9F,eAAN;;CAEA,WAASp9F,MAAM48F,OAAN,CAAc71H,MAAvB;;CAEC,SAAK,CAAL;;;CAEC,SAAK0d,MAAMszG,YAAN,KAAuB,KAA5B,EAAoC;CACpC,SAAK5lD,UAAU+mD,MAAMwB,YAArB,EAAoC,OAHrC;;CAKCuC,2BAAuBj9F,KAAvB;;CAEA;;CAED,SAAK,CAAL;;;CAEC,SAAKvb,MAAMozG,UAAN,KAAqB,KAA1B,EAAkC;CAClC,SAAK1lD,UAAU+mD,MAAMyB,WAArB,EAAmC,OAHpC;;CAKCuC,0BAAsBl9F,KAAtB;;CAEA;;CAED,SAAK,CAAL;;;CAEC,SAAKvb,MAAMwzG,SAAN,KAAoB,KAAzB,EAAiC;CACjC,SAAK9lD,UAAU+mD,MAAM0B,SAArB,EAAiC,OAHlC;;CAKCuC,wBAAoBn9F,KAApB;;CAEA;;CAED;;CAECmyC,aAAQ+mD,MAAMC,IAAd;;CA/BF;CAmCA;;CAED,WAASc,UAAT,CAAqBj6F,KAArB,EAA6B;;CAE5B,OAAKvb,MAAMqqB,OAAN,KAAkB,KAAvB,EAA+B;;CAI/BrqB,SAAMsb,aAAN,CAAqBw6F,QAArB;;CAEApoD,WAAQ+mD,MAAMC,IAAd;CAEA;;CAED,WAASU,aAAT,CAAwB75F,KAAxB,EAAgC;;CAE/BA,SAAM20C,cAAN;CAEA;;;;CAIDlwD,QAAM8oD,UAAN,CAAiBluC,gBAAjB,CAAmC,aAAnC,EAAkDw6F,aAAlD,EAAiE,KAAjE;;CAEAp1G,QAAM8oD,UAAN,CAAiBluC,gBAAjB,CAAmC,WAAnC,EAAgDy6F,WAAhD,EAA6D,KAA7D;CACAr1G,QAAM8oD,UAAN,CAAiBluC,gBAAjB,CAAmC,OAAnC,EAA4C06F,YAA5C,EAA0D,KAA1D;;CAEAt1G,QAAM8oD,UAAN,CAAiBluC,gBAAjB,CAAmC,YAAnC,EAAiD26F,YAAjD,EAA+D,KAA/D;CACAv1G,QAAM8oD,UAAN,CAAiBluC,gBAAjB,CAAmC,UAAnC,EAA+C46F,UAA/C,EAA2D,KAA3D;CACAx1G,QAAM8oD,UAAN,CAAiBluC,gBAAjB,CAAmC,WAAnC,EAAgD66F,WAAhD,EAA6D,KAA7D;;CAEAjuE,SAAO5sB,gBAAP,CAAyB,SAAzB,EAAoCg7F,SAApC,EAA+C,KAA/C;;;;CAIA,OAAK3lH,MAAL;CAEA;CAED0iH,eAAchxH,SAAd,GAA0BE,OAAOy2B,MAAP,CAAep3B,MAAMy5B,eAAN,CAAsBh5B,SAArC,CAA1B;CACAgxH,eAAchxH,SAAd,CAAwBoJ,WAAxB,GAAsC4nH,aAAtC;;CAEA9wH,QAAO26B,gBAAP,CAAyBm2F,cAAchxH,SAAvC,EAAkD;;CAEjD6V,UAAQ;;CAEPzV,QAAK,eAAY;;CAEhBsK,YAAQC,IAAR,CAAc,0DAAd;CACA,WAAO,KAAKnK,MAAZ;CAEA;;CAPM,GAFyC;;;;CAejDy2H,UAAQ;;CAEP72H,QAAK,eAAY;;CAEhBsK,YAAQC,IAAR,CAAc,4EAAd;CACA,WAAO,CAAE,KAAK8mH,UAAd;CAEA,IAPM;;CASPvoH,QAAK,aAAWG,KAAX,EAAmB;;CAEvBqB,YAAQC,IAAR,CAAc,4EAAd;CACA,SAAK8mH,UAAL,GAAkB,CAAEpoH,KAApB;CAEA;;CAdM,GAfyC;;CAiCjD6tH,YAAU;;CAET92H,QAAK,eAAY;;CAEhBsK,YAAQC,IAAR,CAAc,gFAAd;CACA,WAAO,CAAE,KAAKgnH,YAAd;CAEA,IAPQ;;CASTzoH,QAAK,aAAWG,KAAX,EAAmB;;CAEvBqB,YAAQC,IAAR,CAAc,gFAAd;CACA,SAAKgnH,YAAL,GAAoB,CAAEtoH,KAAtB;CAEA;;CAdQ,GAjCuC;;CAmDjD8tH,SAAO;;CAEN/2H,QAAK,eAAY;;CAEhBsK,YAAQC,IAAR,CAAc,0EAAd;CACA,WAAO,CAAE,KAAKknH,SAAd;CAEA,IAPK;;CASN3oH,QAAK,aAAWG,KAAX,EAAmB;;CAEvBqB,YAAQC,IAAR,CAAc,0EAAd;CACA,SAAKknH,SAAL,GAAiB,CAAExoH,KAAnB;CAEA;;CAdK,GAnD0C;;CAqEjD+tH,UAAQ;;CAEPh3H,QAAK,eAAY;;CAEhBsK,YAAQC,IAAR,CAAc,4EAAd;CACA,WAAO,CAAE,KAAKsnH,UAAd;CAEA,IAPM;;CASP/oH,QAAK,aAAWG,KAAX,EAAmB;;CAEvBqB,YAAQC,IAAR,CAAc,4EAAd;CACA,SAAKsnH,UAAL,GAAkB,CAAE5oH,KAApB;CAEA;;CAdM,GArEyC;;CAuFjDguH,gBAAe;;CAEdj3H,QAAK,eAAY;;CAEhBsK,YAAQC,IAAR,CAAc,qFAAd;CACA,WAAO,CAAE,KAAK4mH,aAAd;CAEA,IAPa;;CASdroH,QAAK,aAAWG,KAAX,EAAmB;;CAEvBqB,YAAQC,IAAR,CAAc,qFAAd;CACA,SAAK4mH,aAAL,GAAqB,CAAEloH,KAAvB;CAEA;;CAda,GAvFkC;;CAyGjDiuH,wBAAuB;;CAEtBl3H,QAAK,eAAY;;CAEhBsK,YAAQC,IAAR,CAAc,0FAAd;CACA,WAAO,KAAK6mH,aAAZ;CAEA,IAPqB;;CAStBtoH,QAAK,aAAWG,KAAX,EAAmB;;CAEvBqB,YAAQC,IAAR,CAAc,0FAAd;CACA,SAAK6mH,aAAL,GAAqBnoH,KAArB;CAEA;;CAdqB;;CAzG0B,EAAlD;;CA6HA,QAAO2nH,aAAP;CACA,CA3/BD;;;;;;;;;;KCEMuG;;;CACJ,oBAAc;CAAA;;CAAA;;CAEZ,UAAKtI,aAAL,GAAqB,KAArB;CAFY;CAGb;;;;0BAGI7rE,SAAS;CACZ,WAAK6rE,aAAL,GAAqB,IAArB;CACD;;;4BAEM7rE,SAAS;;;;GAXGyoE;;CAgBrB,aAAiB0L,MAAjB;;;;;;;;;;;;CCdA,IAAMC,cAAc,IAAIj4H,MAAMoU,OAAV,EAApB;;KACM8jH;;;CACJ,wBAAYvI,KAAZ,EAAmB6B,MAAnB,EAA2B;CAAA;;CAAA;;CAEzB,UAAK7B,KAAL,GAAaA,KAAb;CACA,UAAKwI,eAAL,GAAuB,IAAvB;;;;;CAMA,UAAK38F,SAAL,GAAiB,IAAjB;;;;;CAMA,UAAK48F,MAAL,GAAc,KAAd;;CAEA,UAAK18G,IAAL,GAAY,IAAZ;;CAEA,UAAKF,KAAL,GAAa,IAAIxb,MAAM+Q,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAAb;CACA,UAAK0K,GAAL,GAAW,IAAIzb,MAAM+Q,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAAX;CApByB;CAqB1B;;;;0BAEI8yC,SAAS;;CAGZ,UAAMxjB,WAAW,IAAIrgC,MAAM28D,iBAAV,CAA4B;CAC3CpxD,eAAO;CADoC,OAA5B,CAAjB;;CAKA,UAAMoT,WAAW,IAAI3e,MAAM4e,QAAV,EAAjB;CACAD,eAASE,QAAT,CAAkBgV,IAAlB,CAAuB,KAAKrY,KAA5B;CACAmD,eAASE,QAAT,CAAkBgV,IAAlB,CAAuB,KAAKpY,GAA5B;;CAEA,WAAKC,IAAL,GAAY,IAAI1b,MAAMi7B,IAAV,CAAetc,QAAf,EAAyB0hB,QAAzB,CAAZ;CACA,WAAK3kB,IAAL,CAAU8hB,WAAV,GAAwB,KAAxB,CAbY;;CAeZ,WAAKhC,SAAL,GAAiB,IAAIx7B,MAAM86B,SAAV,EAAjB;CACA,yHAAW+oB,OAAX;CACD;;;4BAEMA,SAAS;CACdo0E,kBAAY13H,CAAZ,GAAgBsjD,QAAQkrE,YAAR,CAAqBnC,KAArB,CAA2BrsH,CAA3C;CACA03H,kBAAY7pH,CAAZ,GAAgBy1C,QAAQkrE,YAAR,CAAqBnC,KAArB,CAA2Bx+G,CAA3C;;CAEA,WAAKotB,SAAL,CAAeQ,aAAf,CAA6Bi8F,WAA7B,EAA0Cp0E,QAAQlsC,MAAlD;CACA,UAAI8jB,aAAa,KAAKD,SAAL,CAAea,gBAAf,CAAgC,KAAKszF,KAAL,CAAW9zF,QAA3C,CAAjB;;;;;CAKA,UAAIJ,WAAWr6B,MAAX,GAAoB,CAAxB,EAA2B;CACzB,YAAI,KAAK+2H,eAAL,IAAwB18F,WAAW,CAAX,EAAcld,MAAtC,IAAgDkd,WAAW,CAAX,EAAcld,MAAd,CAAqBizG,MAAzE,EAAiF;CAC/E,cAAI,KAAK2G,eAAT,EAA0B;CACxB,iBAAKA,eAAL,CAAqB93F,QAArB,CAA8B6uB,QAA9B,CAAuCllD,MAAvC,CAA8C,KAAKmuH,eAAL,CAAqBE,UAAnE;CACD;CACD,eAAKF,eAAL,GAAuB18F,WAAW,CAAX,EAAcld,MAArC;CACA,eAAK45G,eAAL,CAAqBE,UAArB,GAAkC,KAAKF,eAAL,CAAqB93F,QAArB,CAA8B6uB,QAA9B,CAAuC3iD,MAAvC,EAAlC;CACA,eAAK4rH,eAAL,CAAqB93F,QAArB,CAA8B6uB,QAA9B,CAAuCllD,MAAvC,CAA8C,QAA9C;CACD;CACF,OATD,MASO;CACL,YAAI,KAAKmuH,eAAT,EAA0B;CACxB,eAAKA,eAAL,CAAqB93F,QAArB,CAA8B6uB,QAA9B,CAAuCllD,MAAvC,CAA8C,KAAKmuH,eAAL,CAAqBE,UAAnE;CACD;CACD,aAAKF,eAAL,GAAuB,IAAvB;CACD;;CAED,UAAI,KAAKA,eAAT,EAA0B;CACxB,aAAK38G,KAAL,CAAWjb,CAAX,GAAe,KAAK43H,eAAL,CAAqB5wG,QAArB,CAA8BhnB,CAA7C;CACA,aAAKib,KAAL,CAAWpN,CAAX,GAAe,KAAK+pH,eAAL,CAAqB5wG,QAArB,CAA8BnZ,CAA7C;CACA,aAAKsN,IAAL,CAAU6L,QAAV,CAAmBlZ,CAAnB,GAAuB,KAAK8pH,eAAL,CAAqB5wG,QAArB,CAA8BlZ,CAA9B,GAAkC4iH,QAAQJ,aAAjE;CACD;;CAED,WAAKp1G,GAAL,CAASlb,CAAT,GAAasjD,QAAQkrE,YAAR,CAAqBnC,KAArB,CAA2BrsH,CAA3B,GAA+B,EAA5C;CACA,WAAKkb,GAAL,CAASrN,CAAT,GAAay1C,QAAQkrE,YAAR,CAAqBnC,KAArB,CAA2Bx+G,CAA3B,GAA+B,EAA5C;;CAEA,WAAKsN,IAAL,CAAUiD,QAAV,CAAmBklB,kBAAnB,GAAwC,IAAxC;;CAIA,UAAImhC,MAAM,IAAIhlE,MAAM+Q,OAAV,EAAV,CAvCc;CAwCd,UAAI2zD,MAAM,IAAI1kE,MAAM+Q,OAAV,EAAV,CAxCc;CAyCdi0D,UAAIr7D,GAAJ,CACGk6C,QAAQkrE,YAAR,CAAqBnC,KAArB,CAA2BrsH,CAA3B,GAA+B+lD,OAAO+nE,UAAvC,GAAqD,CAArD,GAAyD,CAD3D,EAEE,EAAExqE,QAAQkrE,YAAR,CAAqBnC,KAArB,CAA2Bx+G,CAA3B,GAA+Bk4C,OAAOioE,WAAxC,IAAuD,CAAvD,GAA2D,CAF7D,EAGE,GAHF;;CAKAvpD,UAAI9sD,SAAJ,CAAc2rC,QAAQlsC,MAAtB;CACAqtD,UAAIrwD,GAAJ,CAAQkvC,QAAQlsC,MAAR,CAAe4P,QAAvB,EAAiCnW,SAAjC;CACA,UAAIwK,WAAW,CAACioC,QAAQlsC,MAAR,CAAe4P,QAAf,CAAwBlZ,CAAzB,GAA6B22D,IAAI32D,CAAhD;CACA,WAAKoN,GAAL,CAAS1R,IAAT,CAAc85C,QAAQlsC,MAAR,CAAe4P,QAA7B,EAAuCna,GAAvC,CAA2C43D,IAAIt3D,cAAJ,CAAmBkO,QAAnB,CAA3C;;;;;CAOA,UAAMvQ,IAAIw4C,QAAQkrE,YAAR,CAAqBt1D,OAA/B;CACA,UAAI,KAAK0+D,eAAL,IAAwB9sH,EAAEitH,GAAF,CAAMlM,UAAlC,EAA8C;CAC5C,aAAKuD,KAAL,CAAWviH,GAAX,CAAe,KAAKsO,IAApB;CACA,aAAK08G,MAAL,GAAc,IAAd;CACD;;CAED,UAAI,KAAKD,eAAL,IAAwB9sH,EAAEitH,GAAF,CAAMjM,WAAlC,EAA+C;CAC7C,aAAK+L,MAAL,GAAc,KAAd;CACA,aAAKzI,KAAL,CAAWjxF,MAAX,CAAkB,KAAKhjB,IAAvB;CACA,aAAK+tG,IAAL,CAAUyO,aAAa/H,MAAvB,EAA+B;CAC7Bv3G,kBAAQ;CACNrY,eAAG,CADG;CAEN6N,eAAG;CAFG;CADqB,SAA/B;CAMD;CACF;;;;GAnHwB4pH;;CAsH3BE,aAAa/H,MAAb,GAAsB,QAAtB;;CAEA,mBAAiB+H,YAAjB;;;;;;;;;;;;;;;;CC1HA;;;;CASA,IAAMzG,gBAAgB8G,mBAAgCv4H,KAAhC,CAAtB;;KAIMw4H;;;CACJ,yBAAYC,MAAZ,EAAoB;CAAA;;CAAA;;CAElB,UAAKA,MAAL,GAAcA,MAAd;;CAEA,UAAK1I,OAAL,GAAe,IAAf;;CAEA,UAAK2I,aAAL,GAAqB,IAAIlI,aAAJ,CAAkB,MAAKb,KAAvB,EAA8B;CACjDtvF,gBAAUs4F;CADuC,KAA9B,CAArB;;;;;CAOA,UAAKnH,MAAL,GAAc,IAAd;;;;;;CAMA,UAAKoH,OAAL,GAAe,EAAf;;;;;CAKA,UAAK7sE,GAAL,GAAW,IAAX;;;;;CAMA,UAAK8sE,cAAL,GAAsB,IAAtB;;CAGA,UAAKC,YAAL,GAAoB,IAApB;CAjCkB;CAkCnB;;;;0BAEIj1E,SAAS;CAAA;;CACZ,WAAK60E,aAAL,CAAmBhsD,IAAnB,CAAwB7oB,OAAxB;CACAA,cAAQkrE,YAAR,CAAqBgK,WAArB,CAAiCzL,WAAjC;CACA,WAAKyC,OAAL,GAAe,IAAI/vH,MAAMi8B,iBAAV,CAA4B,EAA5B,EAAgC4nB,QAAQ6G,KAAR,GAAgB7G,QAAQ8G,MAAxD,EAAgE,GAAhE,EAAqE,IAArE,CAAf;CACA,WAAKolE,OAAL,CAAaxoG,QAAb,CAAsBlZ,CAAtB,GAA0B,EAA1B;;CAEA,WAAKwqH,cAAL,GAAsB,IAAIpH,aAAJ,CAAkB,KAAK1B,OAAvB,CAAtB;;;;;;;CAOA,UAAMiJ,aAAa,IAAIh5H,MAAMusD,UAAV,CAAqB,QAArB,EAA+B,CAA/B,EAAkC,EAAlC,CAAnB;CACAysE,iBAAWzxG,QAAX,CAAoBhnB,CAApB,GAAwB,CAAxB;CACAy4H,iBAAWzxG,QAAX,CAAoBnZ,CAApB,GAAwB,CAAxB;CACA4qH,iBAAWzxG,QAAX,CAAoBlZ,CAApB,GAAwB,EAAxB;;CAEA,WAAKshH,KAAL,CAAWviH,GAAX,CAAe4rH,UAAf;CACA,2HAAWn1E,OAAX;;CAEA,WAAK40E,MAAL,CAAYhO,EAAZ,CAAewO,IAAIhJ,GAAJ,CAAQC,IAAvB,EAA6B,UAACtC,GAAD,EAAS;CACpC,aAAK,IAAIhvF,EAAT,IAAegvF,IAAIgL,OAAnB,EAA4B;CAC1B,cAAMn4F,OAAOmtF,IAAIgL,OAAJ,CAAYh6F,EAAZ,CAAb;;CAEA,cAAM4yF,SAAS,OAAK0H,SAAL,CAAer1E,OAAf,EAAwBpjB,IAAxB,CAAf;;CAEA,cAAI7B,MAAMgvF,IAAIuL,GAAd,EAAmB;CACjB,mBAAK3H,MAAL,GAAcA,MAAd;CACD;CACF;CACF,OAVD;;CAYA,WAAKiH,MAAL,CAAYhO,EAAZ,CAAewO,IAAIhJ,GAAJ,CAAQG,gBAAvB,EAAyC,UAACxC,GAAD,EAAS;CAChD,eAAKsL,SAAL,CAAer1E,OAAf,EAAwB+pE,IAAI4D,MAA5B;CAED,OAHD;;CAKA,WAAKiH,MAAL,CAAYhO,EAAZ,CAAewO,IAAIhJ,GAAJ,CAAQI,mBAAvB,EAA4C,UAACzC,GAAD,EAAS;CACnD,eAAKwL,YAAL,CAAkBv1E,OAAlB,EAA2B+pE,IAAIhvF,EAA/B;CACD,OAFD;;CAIA,WAAK65F,MAAL,CAAYhO,EAAZ,CAAewO,IAAIhJ,GAAJ,CAAQK,eAAvB,EAAwC,UAAC1C,GAAD,EAAS;CAC/C,aAAK,IAAIhvF,EAAT,IAAegvF,GAAf,EAAoB;CAClB,cAAM7+G,SAAS6+G,IAAIhvF,EAAJ,CAAf;CACA,iBAAKy6F,YAAL,CAAkBx1E,OAAlB,EAA2BjlB,EAA3B,EAA+B7vB,MAA/B;CACD;CACF,OALD;;CAOA,WAAK0pH,MAAL,CAAYhO,EAAZ,CAAewO,IAAIhJ,GAAJ,CAAQM,UAAvB,EAAmC,UAAC3C,GAAD,EAAS;CAC1C,YAAM7hE,QAAM,IAAI2kE,GAAJ,EAAZ;CACA3kE,cAAI2gB,IAAJ,CAAS7oB,OAAT,EAAkB+pE,GAAlB;CACA,eAAK+B,KAAL,CAAWviH,GAAX,CAAe2+C,MAAIxkB,IAAnB;CACD,OAJD;;CAMA,WAAKuxF,YAAL,GAAoB,IAAIZ,YAAJ,CAAiB,KAAKvI,KAAtB,CAApB;;CAEA,WAAKmJ,YAAL,CAAkBrO,EAAlB,CAAqByN,aAAa/H,MAAlC,EACE;CAAA,eAAK,OAAKsI,MAAL,CAAYhP,IAAZ,CAAiBwP,IAAIhJ,GAAJ,CAAQE,MAAzB,EAAiCr5G,CAAjC,CAAL;CAAA,OADF;CAID;;;4BAEM+sC,SAAS;CACd,WAAKi1E,YAAL,CAAkBpsD,IAAlB,CAAuB7oB,OAAvB;CACD;;;kCAEYA,SAASjlB,IAAI7vB,QAAQ;CAChC,UAAMyiH,SAAS,KAAKoH,OAAL,CAAah6F,EAAb,CAAf;CACA,UAAI7vB,OAAOwY,QAAX,EAAqB;CACnBiqG,eAAOjqF,IAAP,CAAYhgB,QAAZ,CAAqBxd,IAArB,CAA0BgF,OAAOwY,QAAjC;CACD;;CAED,UAAIxY,OAAOH,UAAX,EAAuB;CACrB4iH,eAAOjqF,IAAP,CAAY34B,UAAZ,CAAuB7E,IAAvB,CAA4BgF,OAAOH,UAAnC;CACD;CACF;;;;;;;;;;;;;+BAUSi1C,SAASpjB,MAAM;CACvB,UAAM7B,KAAK6B,KAAK7B,EAAhB;CACA,UAAM4yF,SAAS,IAAIH,YAAJ,CAAW5wF,IAAX,CAAf;CACA,WAAKm4F,OAAL,CAAah6F,EAAb,IAAmB4yF,MAAnB;CACA,WAAKkH,aAAL,CAAmBY,SAAnB,CAA6Bz1E,OAA7B,EAAsC2tE,MAAtC;CACA,UAAMjqF,OAAOiqF,OAAOjqF,IAApB;CACAA,WAAKhgB,QAAL,CAAc5d,GAAd,CAAkB82B,KAAKlZ,QAAvB;CACAggB,WAAK34B,UAAL,CAAgBjF,GAAhB,CAAoB82B,KAAK7xB,UAAzB;CACA,aAAO4iH,MAAP;CACD;;;kCAEY3tE,SAASjlB,IAAI;CACxB,UAAM4yF,SAAS,KAAKoH,OAAL,CAAah6F,EAAb,CAAf;CACA,WAAK85F,aAAL,CAAmBa,YAAnB,CAAgC11E,OAAhC,EAAyC2tE,MAAzC;CACA,aAAO,KAAKoH,OAAL,CAAah6F,EAAb,CAAP;CACD;;;4BAEMilB,SAAS;CACd,WAAK60E,aAAL,CAAmB3pH,MAAnB,CAA0B80C,OAA1B;;CAEA,WAAKg1E,cAAL,CAAoB1vF,OAApB,GAA8B,CAAC,KAAK2vF,YAAL,CAAkBV,MAAjD;;CAGA,UAAI,KAAKU,YAAL,CAAkBpJ,aAAtB,EAAqC;CACnC,aAAKoJ,YAAL,CAAkB/pH,MAAlB,CAAyB80C,OAAzB;CACD;CAEF;;;4BAEMA,SAAS;CACd,WAAK60E,aAAL,CAAmBrvE,MAAnB,CAA0BxF,OAA1B;CACD;;;8BAEQA,SAAS;;;;GA5JQisE;;CAiK5B,oBAAiB0I,aAAjB;;CCjLA;;;;;;;CAOA,IAAI/1E,KAAK,yOAAT;;CAEA,IAAI9N,QAAQ,CACR,QADQ,EACE,UADF,EACc,WADd,EAC2B,UAD3B,EACuC,MADvC,EAC+C,UAD/C,EAC2D,MAD3D,EACmE,MADnE,EAC2E,UAD3E,EACuF,MADvF,EAC+F,WAD/F,EAC4G,MAD5G,EACoH,OADpH,EAC6H,QAD7H,CAAZ;;CAIA,eAAiB,SAAS6kF,QAAT,CAAkBC,GAAlB,EAAuB;CACpC,QAAIlmE,MAAMkmE,GAAV;CAAA,QACI/vH,IAAI+vH,IAAI1/F,OAAJ,CAAY,GAAZ,CADR;CAAA,QAEIjjB,IAAI2iH,IAAI1/F,OAAJ,CAAY,GAAZ,CAFR;;CAIA,QAAIrwB,KAAK,CAAC,CAAN,IAAWoN,KAAK,CAAC,CAArB,EAAwB;CACpB2iH,cAAMA,IAAIzmE,SAAJ,CAAc,CAAd,EAAiBtpD,CAAjB,IAAsB+vH,IAAIzmE,SAAJ,CAActpD,CAAd,EAAiBoN,CAAjB,EAAoB4yE,OAApB,CAA4B,IAA5B,EAAkC,GAAlC,CAAtB,GAA+D+vC,IAAIzmE,SAAJ,CAAcl8C,CAAd,EAAiB2iH,IAAIr4H,MAArB,CAArE;CACH;;CAED,QAAIiK,IAAIo3C,GAAGn3C,IAAH,CAAQmuH,OAAO,EAAf,CAAR;CAAA,QACIC,MAAM,EADV;CAAA,QAEI78G,IAAI,EAFR;;CAIA,WAAOA,GAAP,EAAY;CACR68G,YAAI/kF,MAAM93B,CAAN,CAAJ,IAAgBxR,EAAEwR,CAAF,KAAQ,EAAxB;CACH;;CAED,QAAInT,KAAK,CAAC,CAAN,IAAWoN,KAAK,CAAC,CAArB,EAAwB;CACpB4iH,YAAIr4H,MAAJ,GAAakyD,GAAb;CACAmmE,YAAIC,IAAJ,GAAWD,IAAIC,IAAJ,CAAS3mE,SAAT,CAAmB,CAAnB,EAAsB0mE,IAAIC,IAAJ,CAASv4H,MAAT,GAAkB,CAAxC,EAA2CsoF,OAA3C,CAAmD,IAAnD,EAAyD,GAAzD,CAAX;CACAgwC,YAAIE,SAAJ,GAAgBF,IAAIE,SAAJ,CAAclwC,OAAd,CAAsB,GAAtB,EAA2B,EAA3B,EAA+BA,OAA/B,CAAuC,GAAvC,EAA4C,EAA5C,EAAgDA,OAAhD,CAAwD,IAAxD,EAA8D,GAA9D,CAAhB;CACAgwC,YAAIG,OAAJ,GAAc,IAAd;CACH;;CAED,WAAOH,GAAP;CACH,CAzBD;;ACbA,gBAAgB,OAAOI,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GACJ,OAAOxS,IAAP,KAAgB,WAAhB,GAA8BA,IAA9B,GACA,OAAOhhE,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC,EAFrD;;CCAA;;;CAGA,SAASyzE,gBAAT,GAA4B;CACxB,UAAM,IAAIlQ,KAAJ,CAAU,iCAAV,CAAN;CACH;CACD,SAASmQ,mBAAT,GAAgC;CAC5B,UAAM,IAAInQ,KAAJ,CAAU,mCAAV,CAAN;CACH;CACD,IAAIoQ,mBAAmBF,gBAAvB;CACA,IAAIG,qBAAqBF,mBAAzB;CACA,IAAI,OAAOF,SAAO9nE,UAAd,KAA6B,UAAjC,EAA6C;CACzCioE,uBAAmBjoE,UAAnB;CACH;CACD,IAAI,OAAO8nE,SAAOK,YAAd,KAA+B,UAAnC,EAA+C;CAC3CD,yBAAqBC,YAArB;CACH;;CAED,SAASC,UAAT,CAAoBC,GAApB,EAAyB;CACrB,QAAIJ,qBAAqBjoE,UAAzB,EAAqC;;CAEjC,eAAOA,WAAWqoE,GAAX,EAAgB,CAAhB,CAAP;CACH;;CAED,QAAI,CAACJ,qBAAqBF,gBAArB,IAAyC,CAACE,gBAA3C,KAAgEjoE,UAApE,EAAgF;CAC5EioE,2BAAmBjoE,UAAnB;CACA,eAAOA,WAAWqoE,GAAX,EAAgB,CAAhB,CAAP;CACH;CACD,QAAI;;CAEA,eAAOJ,iBAAiBI,GAAjB,EAAsB,CAAtB,CAAP;CACH,KAHD,CAGE,OAAMvjH,CAAN,EAAQ;CACN,YAAI;;CAEA,mBAAOmjH,iBAAiB14H,IAAjB,CAAsB,IAAtB,EAA4B84H,GAA5B,EAAiC,CAAjC,CAAP;CACH,SAHD,CAGE,OAAMvjH,CAAN,EAAQ;;CAEN,mBAAOmjH,iBAAiB14H,IAAjB,CAAsB,IAAtB,EAA4B84H,GAA5B,EAAiC,CAAjC,CAAP;CACH;CACJ;CAGJ;CACD,SAASC,eAAT,CAAyBC,MAAzB,EAAiC;CAC7B,QAAIL,uBAAuBC,YAA3B,EAAyC;;CAErC,eAAOA,aAAaI,MAAb,CAAP;CACH;;CAED,QAAI,CAACL,uBAAuBF,mBAAvB,IAA8C,CAACE,kBAAhD,KAAuEC,YAA3E,EAAyF;CACrFD,6BAAqBC,YAArB;CACA,eAAOA,aAAaI,MAAb,CAAP;CACH;CACD,QAAI;;CAEA,eAAOL,mBAAmBK,MAAnB,CAAP;CACH,KAHD,CAGE,OAAOzjH,CAAP,EAAS;CACP,YAAI;;CAEA,mBAAOojH,mBAAmB34H,IAAnB,CAAwB,IAAxB,EAA8Bg5H,MAA9B,CAAP;CACH,SAHD,CAGE,OAAOzjH,CAAP,EAAS;;;CAGP,mBAAOojH,mBAAmB34H,IAAnB,CAAwB,IAAxB,EAA8Bg5H,MAA9B,CAAP;CACH;CACJ;CAIJ;CACD,IAAIC,QAAQ,EAAZ;CACA,IAAIC,WAAW,KAAf;CACA,IAAIC,YAAJ;CACA,IAAIC,aAAa,CAAC,CAAlB;;CAEA,SAASC,eAAT,GAA2B;CACvB,QAAI,CAACH,QAAD,IAAa,CAACC,YAAlB,EAAgC;CAC5B;CACH;CACDD,eAAW,KAAX;CACA,QAAIC,aAAat5H,MAAjB,EAAyB;CACrBo5H,gBAAQE,aAAa5lE,MAAb,CAAoB0lE,KAApB,CAAR;CACH,KAFD,MAEO;CACHG,qBAAa,CAAC,CAAd;CACH;CACD,QAAIH,MAAMp5H,MAAV,EAAkB;CACdy5H;CACH;CACJ;;CAED,SAASA,UAAT,GAAsB;CAClB,QAAIJ,QAAJ,EAAc;CACV;CACH;CACD,QAAIK,UAAUV,WAAWQ,eAAX,CAAd;CACAH,eAAW,IAAX;;CAEA,QAAIxmH,MAAMumH,MAAMp5H,MAAhB;CACA,WAAM6S,GAAN,EAAW;CACPymH,uBAAeF,KAAf;CACAA,gBAAQ,EAAR;CACA,eAAO,EAAEG,UAAF,GAAe1mH,GAAtB,EAA2B;CACvB,gBAAIymH,YAAJ,EAAkB;CACdA,6BAAaC,UAAb,EAAyBnL,GAAzB;CACH;CACJ;CACDmL,qBAAa,CAAC,CAAd;CACA1mH,cAAMumH,MAAMp5H,MAAZ;CACH;CACDs5H,mBAAe,IAAf;CACAD,eAAW,KAAX;CACAH,oBAAgBQ,OAAhB;CACH;AACD,CAAO,SAASC,QAAT,CAAkBV,GAAlB,EAAuB;CAC1B,QAAIzrB,OAAO,IAAIryE,KAAJ,CAAUp7B,UAAUC,MAAV,GAAmB,CAA7B,CAAX;CACA,QAAID,UAAUC,MAAV,GAAmB,CAAvB,EAA0B;CACtB,aAAK,IAAIyb,IAAI,CAAb,EAAgBA,IAAI1b,UAAUC,MAA9B,EAAsCyb,GAAtC,EAA2C;CACvC+xF,iBAAK/xF,IAAI,CAAT,IAAc1b,UAAU0b,CAAV,CAAd;CACH;CACJ;CACD29G,UAAM3mG,IAAN,CAAW,IAAImnG,IAAJ,CAASX,GAAT,EAAczrB,IAAd,CAAX;CACA,QAAI4rB,MAAMp5H,MAAN,KAAiB,CAAjB,IAAsB,CAACq5H,QAA3B,EAAqC;CACjCL,mBAAWS,UAAX;CACH;CACJ;;CAED,SAASG,IAAT,CAAcX,GAAd,EAAmBrsH,KAAnB,EAA0B;CACtB,SAAKqsH,GAAL,GAAWA,GAAX;CACA,SAAKrsH,KAAL,GAAaA,KAAb;CACH;CACDgtH,KAAKv6H,SAAL,CAAe+uH,GAAf,GAAqB,YAAY;CAC7B,SAAK6K,GAAL,CAASpiF,KAAT,CAAe,IAAf,EAAqB,KAAKjqC,KAA1B;CACH,CAFD;AAGA,CAAO,IAAIitH,QAAQ,SAAZ;AACP,CAAO,IAAIC,WAAW,SAAf;AACP,CAAO,IAAIC,UAAU,IAAd;AACP,CAAO,IAAIC,MAAM,EAAV;AACP,CAAO,IAAIC,OAAO,EAAX;AACP,CAAO,IAAIp7F,UAAU,EAAd;AACP,CAAO,IAAIq7F,WAAW,EAAf;AACP,CAAO,IAAIC,UAAU,EAAd;AACP,CAAO,IAAIC,SAAS,EAAb;;CAEP,SAASC,IAAT,GAAgB;;AAEhB,CAAO,IAAIhR,KAAKgR,IAAT;AACP,CAAO,IAAIjR,cAAciR,IAAlB;AACP,CAAO,IAAI3Q,OAAO2Q,IAAX;AACP,CAAO,IAAIC,MAAMD,IAAV;AACP,CAAO,IAAI5Q,iBAAiB4Q,IAArB;AACP,CAAO,IAAIvQ,qBAAqBuQ,IAAzB;AACP,CAAO,IAAIhS,OAAOgS,IAAX;;AAEP,CAAO,SAAS3iF,OAAT,CAAiBp4C,IAAjB,EAAuB;CAC1B,UAAM,IAAImpH,KAAJ,CAAU,kCAAV,CAAN;CACH;;AAED,CAAO,SAAS8R,GAAT,GAAgB;CAAE,WAAO,GAAP;CAAY;AACrC,CAAO,SAASC,KAAT,CAAgB7nH,GAAhB,EAAqB;CACxB,UAAM,IAAI81G,KAAJ,CAAU,gCAAV,CAAN;CACH,CACM,SAASgS,KAAT,GAAiB;CAAE,WAAO,CAAP;CAAW;;;CAGrC,IAAI3iG,gBAAc4gG,SAAO5gG,WAAP,IAAsB,EAAxC;CACA,IAAI4iG,iBACF5iG,cAAYE,GAAZ,IACAF,cAAY6iG,MADZ,IAEA7iG,cAAY8iG,KAFZ,IAGA9iG,cAAY+iG,IAHZ,IAIA/iG,cAAYgjG,SAJZ,IAKA,YAAU;CAAE,WAAQ,IAAI/iG,IAAJ,EAAD,CAAagjG,OAAb,EAAP;CAA+B,CAN7C;;;;AAUA,CAAO,SAASC,MAAT,CAAgBC,iBAAhB,EAAkC;CACvC,QAAIC,YAAYR,eAAev6H,IAAf,CAAoB23B,aAApB,IAAiC,IAAjD;CACA,QAAIqjG,UAAUn8H,KAAKiK,KAAL,CAAWiyH,SAAX,CAAd;CACA,QAAIE,cAAcp8H,KAAKiK,KAAL,CAAYiyH,YAAU,CAAX,GAAc,GAAzB,CAAlB;CACA,QAAID,iBAAJ,EAAuB;CACrBE,kBAAUA,UAAUF,kBAAkB,CAAlB,CAApB;CACAG,sBAAcA,cAAcH,kBAAkB,CAAlB,CAA5B;CACA,YAAIG,cAAY,CAAhB,EAAmB;CACjBD;CACAC,2BAAe,GAAf;CACD;CACF;CACD,WAAO,CAACD,OAAD,EAASC,WAAT,CAAP;CACD;;CAED,IAAI1jG,YAAY,IAAIK,IAAJ,EAAhB;AACA,CAAO,SAASsjG,MAAT,GAAkB;CACvB,QAAIx3E,cAAc,IAAI9rB,IAAJ,EAAlB;CACA,QAAIujG,MAAMz3E,cAAcnsB,SAAxB;CACA,WAAO4jG,MAAM,IAAb;CACD;;AAED,eAAe;CACb3B,cAAUA,QADG;CAEbE,WAAOA,KAFM;CAGbE,aAASA,OAHI;CAIbC,SAAKA,GAJQ;CAKbC,UAAMA,IALO;CAMbp7F,aAASA,OANI;CAObq7F,cAAUA,QAPG;CAQb7Q,QAAIA,EARS;CASbD,iBAAaA,WATA;CAUbM,UAAMA,IAVO;CAWb4Q,SAAKA,GAXQ;CAYb7Q,oBAAgBA,cAZH;CAabK,wBAAoBA,kBAbP;CAcbzB,UAAMA,IAdO;CAeb3wE,aAASA,OAfI;CAgBb6iF,SAAKA,GAhBQ;CAiBbC,WAAOA,KAjBM;CAkBbC,WAAOA,KAlBM;CAmBbO,YAAQA,MAnBK;CAoBblB,cAAUA,QApBG;CAqBbK,aAASA,OArBI;CAsBbC,YAAQA,MAtBK;CAuBbiB,YAAQA;CAvBK,CAAf;;;;CCrMA;;;;CAIA,IAAI9xH,IAAI,IAAR;CACA,IAAIU,IAAIV,IAAI,EAAZ;CACA,IAAID,IAAIW,IAAI,EAAZ;CACA,IAAI4L,IAAIvM,IAAI,EAAZ;CACA,IAAI0D,IAAI6I,IAAI,MAAZ;;;;;;;;;;;;;;;;CAgBA,SAAiB,WAAA,CAAS0lH,GAAT,EAAc7zE,OAAd,EAAuB;CACtCA,YAAUA,WAAW,EAArB;CACA,MAAInvB,cAAcgjG,GAAd,yCAAcA,GAAd,CAAJ;CACA,MAAIhjG,SAAS,QAAT,IAAqBgjG,IAAIv7H,MAAJ,GAAa,CAAtC,EAAyC;CACvC,WAAOs/B,MAAMi8F,GAAN,CAAP;CACD,GAFD,MAEO,IAAIhjG,SAAS,QAAT,IAAqB+R,MAAMixF,GAAN,MAAe,KAAxC,EAA+C;CACpD,WAAO7zE,QAAQ8zE,IAAR,GAAeC,QAAQF,GAAR,CAAf,GAA8BG,SAASH,GAAT,CAArC;CACD;CACD,QAAM,IAAI9S,KAAJ,CACJ,0DACE1pF,KAAKC,SAAL,CAAeu8F,GAAf,CAFE,CAAN;CAID,CAZD;;;;;;;;;;CAsBA,SAASj8F,KAAT,CAAe+4F,GAAf,EAAoB;CAClBA,QAAMtsB,OAAOssB,GAAP,CAAN;CACA,MAAIA,IAAIr4H,MAAJ,GAAa,GAAjB,EAAsB;CACpB;CACD;CACD,MAAIL,QAAQ,wHAAwHuK,IAAxH,CACVmuH,GADU,CAAZ;CAGA,MAAI,CAAC14H,KAAL,EAAY;CACV;CACD;CACD,MAAIqjB,IAAIlZ,WAAWnK,MAAM,CAAN,CAAX,CAAR;CACA,MAAI44B,OAAO,CAAC54B,MAAM,CAAN,KAAY,IAAb,EAAmBg/C,WAAnB,EAAX;CACA,UAAQpmB,IAAR;CACE,SAAK,OAAL;CACA,SAAK,MAAL;CACA,SAAK,KAAL;CACA,SAAK,IAAL;CACA,SAAK,GAAL;CACE,aAAOvV,IAAIhW,CAAX;CACF,SAAK,MAAL;CACA,SAAK,KAAL;CACA,SAAK,GAAL;CACE,aAAOgW,IAAInN,CAAX;CACF,SAAK,OAAL;CACA,SAAK,MAAL;CACA,SAAK,KAAL;CACA,SAAK,IAAL;CACA,SAAK,GAAL;CACE,aAAOmN,IAAI1Z,CAAX;CACF,SAAK,SAAL;CACA,SAAK,QAAL;CACA,SAAK,MAAL;CACA,SAAK,KAAL;CACA,SAAK,GAAL;CACE,aAAO0Z,IAAI/Y,CAAX;CACF,SAAK,SAAL;CACA,SAAK,QAAL;CACA,SAAK,MAAL;CACA,SAAK,KAAL;CACA,SAAK,GAAL;CACE,aAAO+Y,IAAIzZ,CAAX;CACF,SAAK,cAAL;CACA,SAAK,aAAL;CACA,SAAK,OAAL;CACA,SAAK,MAAL;CACA,SAAK,IAAL;CACE,aAAOyZ,CAAP;CACF;CACE,aAAOjkB,SAAP;CApCJ;CAsCD;;;;;;;;;;CAUD,SAAS28H,QAAT,CAAkBC,EAAlB,EAAsB;CACpB,MAAIA,MAAM9lH,CAAV,EAAa;CACX,WAAO7W,KAAKkV,KAAL,CAAWynH,KAAK9lH,CAAhB,IAAqB,GAA5B;CACD;CACD,MAAI8lH,MAAMryH,CAAV,EAAa;CACX,WAAOtK,KAAKkV,KAAL,CAAWynH,KAAKryH,CAAhB,IAAqB,GAA5B;CACD;CACD,MAAIqyH,MAAM1xH,CAAV,EAAa;CACX,WAAOjL,KAAKkV,KAAL,CAAWynH,KAAK1xH,CAAhB,IAAqB,GAA5B;CACD;CACD,MAAI0xH,MAAMpyH,CAAV,EAAa;CACX,WAAOvK,KAAKkV,KAAL,CAAWynH,KAAKpyH,CAAhB,IAAqB,GAA5B;CACD;CACD,SAAOoyH,KAAK,IAAZ;CACD;;;;;;;;;;CAUD,SAASF,OAAT,CAAiBE,EAAjB,EAAqB;CACnB,SAAOC,OAAOD,EAAP,EAAW9lH,CAAX,EAAc,KAAd,KACL+lH,OAAOD,EAAP,EAAWryH,CAAX,EAAc,MAAd,CADK,IAELsyH,OAAOD,EAAP,EAAW1xH,CAAX,EAAc,QAAd,CAFK,IAGL2xH,OAAOD,EAAP,EAAWpyH,CAAX,EAAc,QAAd,CAHK,IAILoyH,KAAK,KAJP;CAKD;;;;;;CAMD,SAASC,MAAT,CAAgBD,EAAhB,EAAoB34G,CAApB,EAAuB1jB,IAAvB,EAA6B;CAC3B,MAAIq8H,KAAK34G,CAAT,EAAY;CACV;CACD;CACD,MAAI24G,KAAK34G,IAAI,GAAb,EAAkB;CAChB,WAAOhkB,KAAKiK,KAAL,CAAW0yH,KAAK34G,CAAhB,IAAqB,GAArB,GAA2B1jB,IAAlC;CACD;CACD,SAAON,KAAKiV,IAAL,CAAU0nH,KAAK34G,CAAf,IAAoB,GAApB,GAA0B1jB,IAA1B,GAAiC,GAAxC;CACD;;;CCtJD;;;;;;;CAOAqmH,YAAUhnH,cAAA,GAAiBk9H,YAAYC,KAAZ,GAAoBD,YAAY,SAAZ,IAAyBA,WAAxE;CACAlW,gBAAA,GAAiBoW,MAAjB;CACApW,iBAAA,GAAkBpsF,OAAlB;CACAosF,gBAAA,GAAiBtsF,MAAjB;CACAssF,iBAAA,GAAkB59E,OAAlB;CACA49E,kBAAA,GAAmBwR,EAAnB;;;;;CAKAxR,mBAAA,GAAoB,EAApB;;;;;;CAMAA,eAAA,GAAgB,EAAhB;CACAA,eAAA,GAAgB,EAAhB;;;;;;;;CAQAA,oBAAA,GAAqB,EAArB;;;;;;;;;CASA,WAASqW,WAAT,CAAqBC,SAArB,EAAgC;CAC9B,QAAIh0F,OAAO,CAAX;CAAA,QAAcxsB,CAAd;;CAEA,SAAKA,CAAL,IAAUwgH,SAAV,EAAqB;CACnBh0F,aAAS,CAACA,QAAQ,CAAT,IAAcA,IAAf,GAAuBg0F,UAAUC,UAAV,CAAqBzgH,CAArB,CAA/B;CACAwsB,cAAQ,CAAR,CAFmB;CAGpB;;CAED,WAAO09E,QAAQrlF,MAAR,CAAethC,KAAK8Q,GAAL,CAASm4B,IAAT,IAAiB09E,QAAQrlF,MAAR,CAAetgC,MAA/C,CAAP;CACD;;;;;;;;;;CAUD,WAAS67H,WAAT,CAAqBI,SAArB,EAAgC;;CAE9B,QAAIh+E,QAAJ;;CAEA,aAAS69E,KAAT,GAAiB;;CAEf,UAAI,CAACA,MAAM/zF,OAAX,EAAoB;;CAEpB,UAAIm+E,OAAO4V,KAAX;;;CAGA,UAAIK,OAAO,CAAC,IAAIpkG,IAAJ,EAAZ;CACA,UAAI4jG,KAAKQ,QAAQl+E,YAAYk+E,IAApB,CAAT;CACAjW,WAAK59F,IAAL,GAAYqzG,EAAZ;CACAzV,WAAKkW,IAAL,GAAYn+E,QAAZ;CACAioE,WAAKiW,IAAL,GAAYA,IAAZ;CACAl+E,iBAAWk+E,IAAX;;;CAGA,UAAI3uB,OAAO,IAAIryE,KAAJ,CAAUp7B,UAAUC,MAApB,CAAX;CACA,WAAK,IAAIyb,IAAI,CAAb,EAAgBA,IAAI+xF,KAAKxtG,MAAzB,EAAiCyb,GAAjC,EAAsC;CACpC+xF,aAAK/xF,CAAL,IAAU1b,UAAU0b,CAAV,CAAV;CACD;;CAED+xF,WAAK,CAAL,IAAUmY,QAAQoW,MAAR,CAAevuB,KAAK,CAAL,CAAf,CAAV;;CAEA,UAAI,aAAa,OAAOA,KAAK,CAAL,CAAxB,EAAiC;;CAE/BA,aAAKyb,OAAL,CAAa,IAAb;CACD;;;CAGD,UAAInpH,QAAQ,CAAZ;CACA0tG,WAAK,CAAL,IAAUA,KAAK,CAAL,EAAQllB,OAAR,CAAgB,eAAhB,EAAiC,UAAS3oF,KAAT,EAAgB0nD,MAAhB,EAAwB;;CAEjE,YAAI1nD,UAAU,IAAd,EAAoB,OAAOA,KAAP;CACpBG;CACA,YAAIu8H,YAAY1W,QAAQ2W,UAAR,CAAmBj1E,MAAnB,CAAhB;CACA,YAAI,eAAe,OAAOg1E,SAA1B,EAAqC;CACnC,cAAId,MAAM/tB,KAAK1tG,KAAL,CAAV;CACAH,kBAAQ08H,UAAUl8H,IAAV,CAAe+lH,IAAf,EAAqBqV,GAArB,CAAR;;;CAGA/tB,eAAKz0E,MAAL,CAAYj5B,KAAZ,EAAmB,CAAnB;CACAA;CACD;CACD,eAAOH,KAAP;CACD,OAdS,CAAV;;;CAiBAgmH,cAAQ4W,UAAR,CAAmBp8H,IAAnB,CAAwB+lH,IAAxB,EAA8B1Y,IAA9B;;CAEA,UAAIgvB,QAAQV,MAAM1rG,GAAN,IAAau1F,QAAQv1F,GAArB,IAA4BrmB,QAAQqmB,GAAR,CAAY+uB,IAAZ,CAAiBp1C,OAAjB,CAAxC;CACAyyH,YAAM3lF,KAAN,CAAYqvE,IAAZ,EAAkB1Y,IAAlB;CACD;;CAEDsuB,UAAMG,SAAN,GAAkBA,SAAlB;CACAH,UAAM/zF,OAAN,GAAgB49E,QAAQ59E,OAAR,CAAgBk0F,SAAhB,CAAhB;CACAH,UAAMW,SAAN,GAAkB9W,QAAQ8W,SAAR,EAAlB;CACAX,UAAM3xH,KAAN,GAAc6xH,YAAYC,SAAZ,CAAd;CACAH,UAAM1vC,OAAN,GAAgBA,OAAhB;;;CAGA,QAAI,eAAe,OAAOu5B,QAAQr6C,IAAlC,EAAwC;CACtCq6C,cAAQr6C,IAAR,CAAawwD,KAAb;CACD;;CAEDnW,YAAQr6E,SAAR,CAAkB7Y,IAAlB,CAAuBqpG,KAAvB;;CAEA,WAAOA,KAAP;CACD;;CAED,WAAS1vC,OAAT,GAAoB;CAClB,QAAItsF,QAAQ6lH,QAAQr6E,SAAR,CAAkB3S,OAAlB,CAA0B,IAA1B,CAAZ;CACA,QAAI74B,UAAU,CAAC,CAAf,EAAkB;CAChB6lH,cAAQr6E,SAAR,CAAkBvS,MAAlB,CAAyBj5B,KAAzB,EAAgC,CAAhC;CACA,aAAO,IAAP;CACD,KAHD,MAGO;CACL,aAAO,KAAP;CACD;CACF;;;;;;;;;;CAUD,WAASu5B,MAAT,CAAgBqjG,UAAhB,EAA4B;CAC1B/W,YAAQgX,IAAR,CAAaD,UAAb;;CAEA/W,iBAAA,GAAgB,EAAhB;CACAA,iBAAA,GAAgB,EAAhB;;CAEA,QAAIlqG,CAAJ;CACA,QAAIkT,QAAQ,CAAC,OAAO+tG,UAAP,KAAsB,QAAtB,GAAiCA,UAAjC,GAA8C,EAA/C,EAAmD/tG,KAAnD,CAAyD,QAAzD,CAAZ;CACA,QAAI9b,MAAM8b,MAAM3uB,MAAhB;;CAEA,SAAKyb,IAAI,CAAT,EAAYA,IAAI5I,GAAhB,EAAqB4I,GAArB,EAA0B;CACxB,UAAI,CAACkT,MAAMlT,CAAN,CAAL,EAAe,SADS;CAExBihH,mBAAa/tG,MAAMlT,CAAN,EAAS6sE,OAAT,CAAiB,KAAjB,EAAwB,KAAxB,CAAb;CACA,UAAIo0C,WAAW,CAAX,MAAkB,GAAtB,EAA2B;CACzB/W,gBAAQiX,KAAR,CAAcnqG,IAAd,CAAmB,IAAIoqG,MAAJ,CAAW,MAAMH,WAAWI,MAAX,CAAkB,CAAlB,CAAN,GAA6B,GAAxC,CAAnB;CACD,OAFD,MAEO;CACLnX,gBAAQoX,KAAR,CAActqG,IAAd,CAAmB,IAAIoqG,MAAJ,CAAW,MAAMH,UAAN,GAAmB,GAA9B,CAAnB;CACD;CACF;;CAED,SAAKjhH,IAAI,CAAT,EAAYA,IAAIkqG,QAAQr6E,SAAR,CAAkBtrC,MAAlC,EAA0Cyb,GAA1C,EAA+C;CAC7C,UAAIuhH,WAAWrX,QAAQr6E,SAAR,CAAkB7vB,CAAlB,CAAf;CACAuhH,eAASj1F,OAAT,GAAmB49E,QAAQ59E,OAAR,CAAgBi1F,SAASf,SAAzB,CAAnB;CACD;CACF;;;;;;;;CAQD,WAAS1iG,OAAT,GAAmB;CACjBosF,YAAQtsF,MAAR,CAAe,EAAf;CACD;;;;;;;;;;CAUD,WAAS0O,OAAT,CAAiBzoC,IAAjB,EAAuB;CACrB,QAAIA,KAAKA,KAAKU,MAAL,GAAc,CAAnB,MAA0B,GAA9B,EAAmC;CACjC,aAAO,IAAP;CACD;CACD,QAAIyb,CAAJ,EAAO5I,GAAP;CACA,SAAK4I,IAAI,CAAJ,EAAO5I,MAAM8yG,QAAQiX,KAAR,CAAc58H,MAAhC,EAAwCyb,IAAI5I,GAA5C,EAAiD4I,GAAjD,EAAsD;CACpD,UAAIkqG,QAAQiX,KAAR,CAAcnhH,CAAd,EAAiB+d,IAAjB,CAAsBl6B,IAAtB,CAAJ,EAAiC;CAC/B,eAAO,KAAP;CACD;CACF;CACD,SAAKmc,IAAI,CAAJ,EAAO5I,MAAM8yG,QAAQoX,KAAR,CAAc/8H,MAAhC,EAAwCyb,IAAI5I,GAA5C,EAAiD4I,GAAjD,EAAsD;CACpD,UAAIkqG,QAAQoX,KAAR,CAActhH,CAAd,EAAiB+d,IAAjB,CAAsBl6B,IAAtB,CAAJ,EAAiC;CAC/B,eAAO,IAAP;CACD;CACF;CACD,WAAO,KAAP;CACD;;;;;;;;;;CAUD,WAASy8H,MAAT,CAAgBR,GAAhB,EAAqB;CACnB,QAAIA,eAAe9S,KAAnB,EAA0B,OAAO8S,IAAI0B,KAAJ,IAAa1B,IAAI99E,OAAxB;CAC1B,WAAO89E,GAAP;CACD;;;;;;;;;;;;;;;;;;;;;CC1ND5V,YAAUhnH,cAAA,GAAiBw4H,KAA3B;CACAxR,aAAA,GAAcv1F,GAAd;CACAu1F,oBAAA,GAAqB4W,UAArB;CACA5W,cAAA,GAAegX,IAAf;CACAhX,cAAA,GAAej6D,IAAf;CACAi6D,mBAAA,GAAoB8W,SAApB;CACA9W,iBAAA,GAAkB,eAAe,OAAOuX,MAAtB,IACA,eAAe,OAAOA,OAAOC,OAD7B,GAEED,OAAOC,OAAP,CAAeC,KAFjB,GAGEC,cAHpB;;;;;;CASA1X,gBAAA,GAAiB,CACf,SADe,EACJ,SADI,EACO,SADP,EACkB,SADlB,EAC6B,SAD7B,EACwC,SADxC,EACmD,SADnD,EAEf,SAFe,EAEJ,SAFI,EAEO,SAFP,EAEkB,SAFlB,EAE6B,SAF7B,EAEwC,SAFxC,EAEmD,SAFnD,EAGf,SAHe,EAGJ,SAHI,EAGO,SAHP,EAGkB,SAHlB,EAG6B,SAH7B,EAGwC,SAHxC,EAGmD,SAHnD,EAIf,SAJe,EAIJ,SAJI,EAIO,SAJP,EAIkB,SAJlB,EAI6B,SAJ7B,EAIwC,SAJxC,EAImD,SAJnD,EAKf,SALe,EAKJ,SALI,EAKO,SALP,EAKkB,SALlB,EAK6B,SAL7B,EAKwC,SALxC,EAKmD,SALnD,EAMf,SANe,EAMJ,SANI,EAMO,SANP,EAMkB,SANlB,EAM6B,SAN7B,EAMwC,SANxC,EAMmD,SANnD,EAOf,SAPe,EAOJ,SAPI,EAOO,SAPP,EAOkB,SAPlB,EAO6B,SAP7B,EAOwC,SAPxC,EAOmD,SAPnD,EAQf,SARe,EAQJ,SARI,EAQO,SARP,EAQkB,SARlB,EAQ6B,SAR7B,EAQwC,SARxC,EAQmD,SARnD,EASf,SATe,EASJ,SATI,EASO,SATP,EASkB,SATlB,EAS6B,SAT7B,EASwC,SATxC,EASmD,SATnD,EAUf,SAVe,EAUJ,SAVI,EAUO,SAVP,EAUkB,SAVlB,EAU6B,SAV7B,EAUwC,SAVxC,EAUmD,SAVnD,EAWf,SAXe,EAWJ,SAXI,EAWO,SAXP,EAWkB,SAXlB,EAW6B,SAX7B,EAWwC,SAXxC,CAAjB;;;;;;;;;;CAsBA,WAAS8W,SAAT,GAAqB;;;;CAInB,QAAI,OAAOv3E,MAAP,KAAkB,WAAlB,IAAiCA,OAAOo4E,OAAxC,IAAmDp4E,OAAOo4E,OAAP,CAAe/kG,IAAf,KAAwB,UAA/E,EAA2F;CACzF,aAAO,IAAP;CACD;;;CAGD,QAAI,OAAOglG,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoB7+E,WAApB,GAAkCh/C,KAAlC,CAAwC,uBAAxC,CAA/D,EAAiI;CAC/H,aAAO,KAAP;CACD;;;;CAID,WAAQ,OAAOqyD,QAAP,KAAoB,WAApB,IAAmCA,SAASyrE,eAA5C,IAA+DzrE,SAASyrE,eAAT,CAAyB7zH,KAAxF,IAAiGooD,SAASyrE,eAAT,CAAyB7zH,KAAzB,CAA+B8zH,gBAAjI;;CAEJ,WAAOx4E,MAAP,KAAkB,WAAlB,IAAiCA,OAAOn7C,OAAxC,KAAoDm7C,OAAOn7C,OAAP,CAAe4zH,OAAf,IAA2Bz4E,OAAOn7C,OAAP,CAAe6zH,SAAf,IAA4B14E,OAAOn7C,OAAP,CAAe8zH,KAA1H,CAFI;;;CAKJ,WAAON,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoB7+E,WAApB,GAAkCh/C,KAAlC,CAAwC,gBAAxC,CAA3D,IAAwH2K,SAASuyH,OAAOiB,EAAhB,EAAoB,EAApB,KAA2B,EAL/I;;CAOJ,WAAOP,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoB7+E,WAApB,GAAkCh/C,KAAlC,CAAwC,oBAAxC,CAP9D;CAQD;;;;;;CAMDgmH,UAAQ2W,UAAR,CAAmBl9G,CAAnB,GAAuB,UAASjP,CAAT,EAAY;CACjC,QAAI;CACF,aAAO4uB,KAAKC,SAAL,CAAe7uB,CAAf,CAAP;CACD,KAFD,CAEE,OAAOy4G,GAAP,EAAY;CACZ,aAAO,iCAAiCA,IAAInrE,OAA5C;CACD;CACF,GAND;;;;;;;;CAeA,WAAS8+E,UAAT,CAAoB/uB,IAApB,EAA0B;CACxB,QAAIivB,YAAY,KAAKA,SAArB;;CAEAjvB,SAAK,CAAL,IAAU,CAACivB,YAAY,IAAZ,GAAmB,EAApB,IACN,KAAKR,SADC,IAELQ,YAAY,KAAZ,GAAoB,GAFf,IAGNjvB,KAAK,CAAL,CAHM,IAILivB,YAAY,KAAZ,GAAoB,GAJf,IAKN,GALM,GAKA9W,QAAQoY,QAAR,CAAiB,KAAKz1G,IAAtB,CALV;;CAOA,QAAI,CAACm0G,SAAL,EAAgB;;CAEhB,QAAI/vH,IAAI,YAAY,KAAKvC,KAAzB;CACAqjG,SAAKz0E,MAAL,CAAY,CAAZ,EAAe,CAAf,EAAkBrsB,CAAlB,EAAqB,gBAArB;;;;;CAKA,QAAI5M,QAAQ,CAAZ;CACA,QAAIk+H,QAAQ,CAAZ;CACAxwB,SAAK,CAAL,EAAQllB,OAAR,CAAgB,aAAhB,EAA+B,UAAS3oF,KAAT,EAAgB;CAC7C,UAAI,SAASA,KAAb,EAAoB;CACpBG;CACA,UAAI,SAASH,KAAb,EAAoB;;;CAGlBq+H,gBAAQl+H,KAAR;CACD;CACF,KARD;;CAUA0tG,SAAKz0E,MAAL,CAAYilG,KAAZ,EAAmB,CAAnB,EAAsBtxH,CAAtB;CACD;;;;;;;;;CASD,WAAS0jB,GAAT,GAAe;;;CAGb,WAAO,qBAAoBrmB,OAApB,2CAAoBA,OAApB,MACFA,QAAQqmB,GADN,IAEFhxB,SAASC,SAAT,CAAmBw3C,KAAnB,CAAyB12C,IAAzB,CAA8B4J,QAAQqmB,GAAtC,EAA2CrmB,OAA3C,EAAoDhK,SAApD,CAFL;CAGD;;;;;;;;;CASD,WAAS48H,IAAT,CAAcD,UAAd,EAA0B;CACxB,QAAI;CACF,UAAI,QAAQA,UAAZ,EAAwB;CACtB/W,gBAAQwX,OAAR,CAAgBc,UAAhB,CAA2B,OAA3B;CACD,OAFD,MAEO;CACLtY,gBAAQwX,OAAR,CAAgBrB,KAAhB,GAAwBY,UAAxB;CACD;CACF,KAND,CAME,OAAMhnH,CAAN,EAAS;CACZ;;;;;;;;;CASD,WAASg2C,IAAT,GAAgB;CACd,QAAItjD,CAAJ;CACA,QAAI;CACFA,UAAIu9G,QAAQwX,OAAR,CAAgBrB,KAApB;CACD,KAFD,CAEE,OAAMpmH,CAAN,EAAS;;;CAGX,QAAI,CAACtN,CAAD,IAAM,OAAOk1H,OAAP,KAAmB,WAAzB,IAAwC,SAASA,OAArD,EAA8D;CAC5Dl1H,UAAIk1H,QAAQtD,GAAR,CAAY9L,KAAhB;CACD;;CAED,WAAO9lH,CAAP;CACD;;;;;;CAMDu9G,UAAQtsF,MAAR,CAAeqyB,MAAf;;;;;;;;;;;;;CAaA,WAAS2xE,YAAT,GAAwB;CACtB,QAAI;CACF,aAAOn4E,OAAOg5E,YAAd;CACD,KAFD,CAEE,OAAOxoH,CAAP,EAAU;CACb;;;;;;;;;;CCjMD;;;;CAKA,IAAIomH,UAAQ3E,UAAiB,sBAAjB,CAAZ;;;;;;CAMA,YAAiBxrE,GAAjB;;;;;;;;;;;CAWA,SAASA,GAAT,CAAc2sE,GAAd,EAAmB6F,GAAnB,EAAwB;CACtB,MAAI/6F,MAAMk1F,GAAV;;;CAGA6F,QAAMA,OAAQ,OAAOC,QAAP,KAAoB,WAApB,IAAmCA,QAAjD;CACA,MAAI,QAAQ9F,GAAZ,EAAiBA,MAAM6F,IAAIE,QAAJ,GAAe,IAAf,GAAsBF,IAAI5F,IAAhC;;;CAGjB,MAAI,aAAa,OAAOD,GAAxB,EAA6B;CAC3B,QAAI,QAAQA,IAAI7tH,MAAJ,CAAW,CAAX,CAAZ,EAA2B;CACzB,UAAI,QAAQ6tH,IAAI7tH,MAAJ,CAAW,CAAX,CAAZ,EAA2B;CACzB6tH,cAAM6F,IAAIE,QAAJ,GAAe/F,GAArB;CACD,OAFD,MAEO;CACLA,cAAM6F,IAAI5F,IAAJ,GAAWD,GAAjB;CACD;CACF;;CAED,QAAI,CAAC,sBAAsB9+F,IAAtB,CAA2B8+F,GAA3B,CAAL,EAAsC;CACpCwD,cAAM,sBAAN,EAA8BxD,GAA9B;CACA,UAAI,gBAAgB,OAAO6F,GAA3B,EAAgC;CAC9B7F,cAAM6F,IAAIE,QAAJ,GAAe,IAAf,GAAsB/F,GAA5B;CACD,OAFD,MAEO;CACLA,cAAM,aAAaA,GAAnB;CACD;CACF;;;CAGDwD,YAAM,UAAN,EAAkBxD,GAAlB;CACAl1F,UAAMg1F,SAASE,GAAT,CAAN;CACD;;;CAGD,MAAI,CAACl1F,IAAIk7F,IAAT,EAAe;CACb,QAAI,cAAc9kG,IAAd,CAAmB4J,IAAIi7F,QAAvB,CAAJ,EAAsC;CACpCj7F,UAAIk7F,IAAJ,GAAW,IAAX;CACD,KAFD,MAEO,IAAI,eAAe9kG,IAAf,CAAoB4J,IAAIi7F,QAAxB,CAAJ,EAAuC;CAC5Cj7F,UAAIk7F,IAAJ,GAAW,KAAX;CACD;CACF;;CAEDl7F,MAAIgV,IAAJ,GAAWhV,IAAIgV,IAAJ,IAAY,GAAvB;;CAEA,MAAImmF,OAAOn7F,IAAIm1F,IAAJ,CAAS5/F,OAAT,CAAiB,GAAjB,MAA0B,CAAC,CAAtC;CACA,MAAI4/F,OAAOgG,OAAO,MAAMn7F,IAAIm1F,IAAV,GAAiB,GAAxB,GAA8Bn1F,IAAIm1F,IAA7C;;;CAGAn1F,MAAI5F,EAAJ,GAAS4F,IAAIi7F,QAAJ,GAAe,KAAf,GAAuB9F,IAAvB,GAA8B,GAA9B,GAAoCn1F,IAAIk7F,IAAjD;;CAEAl7F,MAAIo7F,IAAJ,GAAWp7F,IAAIi7F,QAAJ,GAAe,KAAf,GAAuB9F,IAAvB,IAA+B4F,OAAOA,IAAIG,IAAJ,KAAal7F,IAAIk7F,IAAxB,GAA+B,EAA/B,GAAqC,MAAMl7F,IAAIk7F,IAA9E,CAAX;;CAEA,SAAOl7F,GAAP;CACD;;;CCzED;;;;;;;CAOAuiF,YAAUhnH,cAAA,GAAiBk9H,YAAYC,KAAZ,GAAoBD,YAAY,SAAZ,IAAyBA,WAAxE;CACAlW,gBAAA,GAAiBoW,MAAjB;CACApW,iBAAA,GAAkBpsF,OAAlB;CACAosF,gBAAA,GAAiBtsF,MAAjB;CACAssF,iBAAA,GAAkB59E,OAAlB;CACA49E,kBAAA,GAAmBwR,EAAnB;;;;;CAKAxR,mBAAA,GAAoB,EAApB;;;;;;CAMAA,eAAA,GAAgB,EAAhB;CACAA,eAAA,GAAgB,EAAhB;;;;;;;;CAQAA,oBAAA,GAAqB,EAArB;;;;;;;;;CASA,WAASqW,WAAT,CAAqBC,SAArB,EAAgC;CAC9B,QAAIh0F,OAAO,CAAX;CAAA,QAAcxsB,CAAd;;CAEA,SAAKA,CAAL,IAAUwgH,SAAV,EAAqB;CACnBh0F,aAAS,CAACA,QAAQ,CAAT,IAAcA,IAAf,GAAuBg0F,UAAUC,UAAV,CAAqBzgH,CAArB,CAA/B;CACAwsB,cAAQ,CAAR,CAFmB;CAGpB;;CAED,WAAO09E,QAAQrlF,MAAR,CAAethC,KAAK8Q,GAAL,CAASm4B,IAAT,IAAiB09E,QAAQrlF,MAAR,CAAetgC,MAA/C,CAAP;CACD;;;;;;;;;;CAUD,WAAS67H,WAAT,CAAqBI,SAArB,EAAgC;;CAE9B,QAAIh+E,QAAJ;;CAEA,aAAS69E,KAAT,GAAiB;;CAEf,UAAI,CAACA,MAAM/zF,OAAX,EAAoB;;CAEpB,UAAIm+E,OAAO4V,KAAX;;;CAGA,UAAIK,OAAO,CAAC,IAAIpkG,IAAJ,EAAZ;CACA,UAAI4jG,KAAKQ,QAAQl+E,YAAYk+E,IAApB,CAAT;CACAjW,WAAK59F,IAAL,GAAYqzG,EAAZ;CACAzV,WAAKkW,IAAL,GAAYn+E,QAAZ;CACAioE,WAAKiW,IAAL,GAAYA,IAAZ;CACAl+E,iBAAWk+E,IAAX;;;CAGA,UAAI3uB,OAAO,IAAIryE,KAAJ,CAAUp7B,UAAUC,MAApB,CAAX;CACA,WAAK,IAAIyb,IAAI,CAAb,EAAgBA,IAAI+xF,KAAKxtG,MAAzB,EAAiCyb,GAAjC,EAAsC;CACpC+xF,aAAK/xF,CAAL,IAAU1b,UAAU0b,CAAV,CAAV;CACD;;CAED+xF,WAAK,CAAL,IAAUmY,QAAQoW,MAAR,CAAevuB,KAAK,CAAL,CAAf,CAAV;;CAEA,UAAI,aAAa,OAAOA,KAAK,CAAL,CAAxB,EAAiC;;CAE/BA,aAAKyb,OAAL,CAAa,IAAb;CACD;;;CAGD,UAAInpH,QAAQ,CAAZ;CACA0tG,WAAK,CAAL,IAAUA,KAAK,CAAL,EAAQllB,OAAR,CAAgB,eAAhB,EAAiC,UAAS3oF,KAAT,EAAgB0nD,MAAhB,EAAwB;;CAEjE,YAAI1nD,UAAU,IAAd,EAAoB,OAAOA,KAAP;CACpBG;CACA,YAAIu8H,YAAY1W,QAAQ2W,UAAR,CAAmBj1E,MAAnB,CAAhB;CACA,YAAI,eAAe,OAAOg1E,SAA1B,EAAqC;CACnC,cAAId,MAAM/tB,KAAK1tG,KAAL,CAAV;CACAH,kBAAQ08H,UAAUl8H,IAAV,CAAe+lH,IAAf,EAAqBqV,GAArB,CAAR;;;CAGA/tB,eAAKz0E,MAAL,CAAYj5B,KAAZ,EAAmB,CAAnB;CACAA;CACD;CACD,eAAOH,KAAP;CACD,OAdS,CAAV;;;CAiBAgmH,cAAQ4W,UAAR,CAAmBp8H,IAAnB,CAAwB+lH,IAAxB,EAA8B1Y,IAA9B;;CAEA,UAAIgvB,QAAQV,MAAM1rG,GAAN,IAAau1F,QAAQv1F,GAArB,IAA4BrmB,QAAQqmB,GAAR,CAAY+uB,IAAZ,CAAiBp1C,OAAjB,CAAxC;CACAyyH,YAAM3lF,KAAN,CAAYqvE,IAAZ,EAAkB1Y,IAAlB;CACD;;CAEDsuB,UAAMG,SAAN,GAAkBA,SAAlB;CACAH,UAAM/zF,OAAN,GAAgB49E,QAAQ59E,OAAR,CAAgBk0F,SAAhB,CAAhB;CACAH,UAAMW,SAAN,GAAkB9W,QAAQ8W,SAAR,EAAlB;CACAX,UAAM3xH,KAAN,GAAc6xH,YAAYC,SAAZ,CAAd;CACAH,UAAM1vC,OAAN,GAAgBA,OAAhB;;;CAGA,QAAI,eAAe,OAAOu5B,QAAQr6C,IAAlC,EAAwC;CACtCq6C,cAAQr6C,IAAR,CAAawwD,KAAb;CACD;;CAEDnW,YAAQr6E,SAAR,CAAkB7Y,IAAlB,CAAuBqpG,KAAvB;;CAEA,WAAOA,KAAP;CACD;;CAED,WAAS1vC,OAAT,GAAoB;CAClB,QAAItsF,QAAQ6lH,QAAQr6E,SAAR,CAAkB3S,OAAlB,CAA0B,IAA1B,CAAZ;CACA,QAAI74B,UAAU,CAAC,CAAf,EAAkB;CAChB6lH,cAAQr6E,SAAR,CAAkBvS,MAAlB,CAAyBj5B,KAAzB,EAAgC,CAAhC;CACA,aAAO,IAAP;CACD,KAHD,MAGO;CACL,aAAO,KAAP;CACD;CACF;;;;;;;;;;CAUD,WAASu5B,MAAT,CAAgBqjG,UAAhB,EAA4B;CAC1B/W,YAAQgX,IAAR,CAAaD,UAAb;;CAEA/W,iBAAA,GAAgB,EAAhB;CACAA,iBAAA,GAAgB,EAAhB;;CAEA,QAAIlqG,CAAJ;CACA,QAAIkT,QAAQ,CAAC,OAAO+tG,UAAP,KAAsB,QAAtB,GAAiCA,UAAjC,GAA8C,EAA/C,EAAmD/tG,KAAnD,CAAyD,QAAzD,CAAZ;CACA,QAAI9b,MAAM8b,MAAM3uB,MAAhB;;CAEA,SAAKyb,IAAI,CAAT,EAAYA,IAAI5I,GAAhB,EAAqB4I,GAArB,EAA0B;CACxB,UAAI,CAACkT,MAAMlT,CAAN,CAAL,EAAe,SADS;CAExBihH,mBAAa/tG,MAAMlT,CAAN,EAAS6sE,OAAT,CAAiB,KAAjB,EAAwB,KAAxB,CAAb;CACA,UAAIo0C,WAAW,CAAX,MAAkB,GAAtB,EAA2B;CACzB/W,gBAAQiX,KAAR,CAAcnqG,IAAd,CAAmB,IAAIoqG,MAAJ,CAAW,MAAMH,WAAWI,MAAX,CAAkB,CAAlB,CAAN,GAA6B,GAAxC,CAAnB;CACD,OAFD,MAEO;CACLnX,gBAAQoX,KAAR,CAActqG,IAAd,CAAmB,IAAIoqG,MAAJ,CAAW,MAAMH,UAAN,GAAmB,GAA9B,CAAnB;CACD;CACF;;CAED,SAAKjhH,IAAI,CAAT,EAAYA,IAAIkqG,QAAQr6E,SAAR,CAAkBtrC,MAAlC,EAA0Cyb,GAA1C,EAA+C;CAC7C,UAAIuhH,WAAWrX,QAAQr6E,SAAR,CAAkB7vB,CAAlB,CAAf;CACAuhH,eAASj1F,OAAT,GAAmB49E,QAAQ59E,OAAR,CAAgBi1F,SAASf,SAAzB,CAAnB;CACD;CACF;;;;;;;;CAQD,WAAS1iG,OAAT,GAAmB;CACjBosF,YAAQtsF,MAAR,CAAe,EAAf;CACD;;;;;;;;;;CAUD,WAAS0O,OAAT,CAAiBzoC,IAAjB,EAAuB;CACrB,QAAIA,KAAKA,KAAKU,MAAL,GAAc,CAAnB,MAA0B,GAA9B,EAAmC;CACjC,aAAO,IAAP;CACD;CACD,QAAIyb,CAAJ,EAAO5I,GAAP;CACA,SAAK4I,IAAI,CAAJ,EAAO5I,MAAM8yG,QAAQiX,KAAR,CAAc58H,MAAhC,EAAwCyb,IAAI5I,GAA5C,EAAiD4I,GAAjD,EAAsD;CACpD,UAAIkqG,QAAQiX,KAAR,CAAcnhH,CAAd,EAAiB+d,IAAjB,CAAsBl6B,IAAtB,CAAJ,EAAiC;CAC/B,eAAO,KAAP;CACD;CACF;CACD,SAAKmc,IAAI,CAAJ,EAAO5I,MAAM8yG,QAAQoX,KAAR,CAAc/8H,MAAhC,EAAwCyb,IAAI5I,GAA5C,EAAiD4I,GAAjD,EAAsD;CACpD,UAAIkqG,QAAQoX,KAAR,CAActhH,CAAd,EAAiB+d,IAAjB,CAAsBl6B,IAAtB,CAAJ,EAAiC;CAC/B,eAAO,IAAP;CACD;CACF;CACD,WAAO,KAAP;CACD;;;;;;;;;;CAUD,WAASy8H,MAAT,CAAgBR,GAAhB,EAAqB;CACnB,QAAIA,eAAe9S,KAAnB,EAA0B,OAAO8S,IAAI0B,KAAJ,IAAa1B,IAAI99E,OAAxB;CAC1B,WAAO89E,GAAP;CACD;;;;;;;;;;;;;;;;;;;;;CC1ND5V,YAAUhnH,cAAA,GAAiBw4H,OAA3B;CACAxR,aAAA,GAAcv1F,GAAd;CACAu1F,oBAAA,GAAqB4W,UAArB;CACA5W,cAAA,GAAegX,IAAf;CACAhX,cAAA,GAAej6D,IAAf;CACAi6D,mBAAA,GAAoB8W,SAApB;CACA9W,iBAAA,GAAkB,eAAe,OAAOuX,MAAtB,IACA,eAAe,OAAOA,OAAOC,OAD7B,GAEED,OAAOC,OAAP,CAAeC,KAFjB,GAGEC,cAHpB;;;;;;CASA1X,gBAAA,GAAiB,CACf,SADe,EACJ,SADI,EACO,SADP,EACkB,SADlB,EAC6B,SAD7B,EACwC,SADxC,EACmD,SADnD,EAEf,SAFe,EAEJ,SAFI,EAEO,SAFP,EAEkB,SAFlB,EAE6B,SAF7B,EAEwC,SAFxC,EAEmD,SAFnD,EAGf,SAHe,EAGJ,SAHI,EAGO,SAHP,EAGkB,SAHlB,EAG6B,SAH7B,EAGwC,SAHxC,EAGmD,SAHnD,EAIf,SAJe,EAIJ,SAJI,EAIO,SAJP,EAIkB,SAJlB,EAI6B,SAJ7B,EAIwC,SAJxC,EAImD,SAJnD,EAKf,SALe,EAKJ,SALI,EAKO,SALP,EAKkB,SALlB,EAK6B,SAL7B,EAKwC,SALxC,EAKmD,SALnD,EAMf,SANe,EAMJ,SANI,EAMO,SANP,EAMkB,SANlB,EAM6B,SAN7B,EAMwC,SANxC,EAMmD,SANnD,EAOf,SAPe,EAOJ,SAPI,EAOO,SAPP,EAOkB,SAPlB,EAO6B,SAP7B,EAOwC,SAPxC,EAOmD,SAPnD,EAQf,SARe,EAQJ,SARI,EAQO,SARP,EAQkB,SARlB,EAQ6B,SAR7B,EAQwC,SARxC,EAQmD,SARnD,EASf,SATe,EASJ,SATI,EASO,SATP,EASkB,SATlB,EAS6B,SAT7B,EASwC,SATxC,EASmD,SATnD,EAUf,SAVe,EAUJ,SAVI,EAUO,SAVP,EAUkB,SAVlB,EAU6B,SAV7B,EAUwC,SAVxC,EAUmD,SAVnD,EAWf,SAXe,EAWJ,SAXI,EAWO,SAXP,EAWkB,SAXlB,EAW6B,SAX7B,EAWwC,SAXxC,CAAjB;;;;;;;;;;CAsBA,WAAS8W,SAAT,GAAqB;;;;CAInB,QAAI,OAAOv3E,MAAP,KAAkB,WAAlB,IAAiCA,OAAOo4E,OAAxC,IAAmDp4E,OAAOo4E,OAAP,CAAe/kG,IAAf,KAAwB,UAA/E,EAA2F;CACzF,aAAO,IAAP;CACD;;;CAGD,QAAI,OAAOglG,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoB7+E,WAApB,GAAkCh/C,KAAlC,CAAwC,uBAAxC,CAA/D,EAAiI;CAC/H,aAAO,KAAP;CACD;;;;CAID,WAAQ,OAAOqyD,QAAP,KAAoB,WAApB,IAAmCA,SAASyrE,eAA5C,IAA+DzrE,SAASyrE,eAAT,CAAyB7zH,KAAxF,IAAiGooD,SAASyrE,eAAT,CAAyB7zH,KAAzB,CAA+B8zH,gBAAjI;;CAEJ,WAAOx4E,MAAP,KAAkB,WAAlB,IAAiCA,OAAOn7C,OAAxC,KAAoDm7C,OAAOn7C,OAAP,CAAe4zH,OAAf,IAA2Bz4E,OAAOn7C,OAAP,CAAe6zH,SAAf,IAA4B14E,OAAOn7C,OAAP,CAAe8zH,KAA1H,CAFI;;;CAKJ,WAAON,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoB7+E,WAApB,GAAkCh/C,KAAlC,CAAwC,gBAAxC,CAA3D,IAAwH2K,SAASuyH,OAAOiB,EAAhB,EAAoB,EAApB,KAA2B,EAL/I;;CAOJ,WAAOP,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoB7+E,WAApB,GAAkCh/C,KAAlC,CAAwC,oBAAxC,CAP9D;CAQD;;;;;;CAMDgmH,UAAQ2W,UAAR,CAAmBl9G,CAAnB,GAAuB,UAASjP,CAAT,EAAY;CACjC,QAAI;CACF,aAAO4uB,KAAKC,SAAL,CAAe7uB,CAAf,CAAP;CACD,KAFD,CAEE,OAAOy4G,GAAP,EAAY;CACZ,aAAO,iCAAiCA,IAAInrE,OAA5C;CACD;CACF,GAND;;;;;;;;CAeA,WAAS8+E,UAAT,CAAoB/uB,IAApB,EAA0B;CACxB,QAAIivB,YAAY,KAAKA,SAArB;;CAEAjvB,SAAK,CAAL,IAAU,CAACivB,YAAY,IAAZ,GAAmB,EAApB,IACN,KAAKR,SADC,IAELQ,YAAY,KAAZ,GAAoB,GAFf,IAGNjvB,KAAK,CAAL,CAHM,IAILivB,YAAY,KAAZ,GAAoB,GAJf,IAKN,GALM,GAKA9W,QAAQoY,QAAR,CAAiB,KAAKz1G,IAAtB,CALV;;CAOA,QAAI,CAACm0G,SAAL,EAAgB;;CAEhB,QAAI/vH,IAAI,YAAY,KAAKvC,KAAzB;CACAqjG,SAAKz0E,MAAL,CAAY,CAAZ,EAAe,CAAf,EAAkBrsB,CAAlB,EAAqB,gBAArB;;;;;CAKA,QAAI5M,QAAQ,CAAZ;CACA,QAAIk+H,QAAQ,CAAZ;CACAxwB,SAAK,CAAL,EAAQllB,OAAR,CAAgB,aAAhB,EAA+B,UAAS3oF,KAAT,EAAgB;CAC7C,UAAI,SAASA,KAAb,EAAoB;CACpBG;CACA,UAAI,SAASH,KAAb,EAAoB;;;CAGlBq+H,gBAAQl+H,KAAR;CACD;CACF,KARD;;CAUA0tG,SAAKz0E,MAAL,CAAYilG,KAAZ,EAAmB,CAAnB,EAAsBtxH,CAAtB;CACD;;;;;;;;;CASD,WAAS0jB,GAAT,GAAe;;;CAGb,WAAO,qBAAoBrmB,OAApB,2CAAoBA,OAApB,MACFA,QAAQqmB,GADN,IAEFhxB,SAASC,SAAT,CAAmBw3C,KAAnB,CAAyB12C,IAAzB,CAA8B4J,QAAQqmB,GAAtC,EAA2CrmB,OAA3C,EAAoDhK,SAApD,CAFL;CAGD;;;;;;;;;CASD,WAAS48H,IAAT,CAAcD,UAAd,EAA0B;CACxB,QAAI;CACF,UAAI,QAAQA,UAAZ,EAAwB;CACtB/W,gBAAQwX,OAAR,CAAgBc,UAAhB,CAA2B,OAA3B;CACD,OAFD,MAEO;CACLtY,gBAAQwX,OAAR,CAAgBrB,KAAhB,GAAwBY,UAAxB;CACD;CACF,KAND,CAME,OAAMhnH,CAAN,EAAS;CACZ;;;;;;;;;CASD,WAASg2C,IAAT,GAAgB;CACd,QAAItjD,CAAJ;CACA,QAAI;CACFA,UAAIu9G,QAAQwX,OAAR,CAAgBrB,KAApB;CACD,KAFD,CAEE,OAAMpmH,CAAN,EAAS;;;CAGX,QAAI,CAACtN,CAAD,IAAM,OAAOk1H,OAAP,KAAmB,WAAzB,IAAwC,SAASA,OAArD,EAA8D;CAC5Dl1H,UAAIk1H,QAAQtD,GAAR,CAAY9L,KAAhB;CACD;;CAED,WAAO9lH,CAAP;CACD;;;;;;CAMDu9G,UAAQtsF,MAAR,CAAeqyB,MAAf;;;;;;;;;;;;;CAaA,WAAS2xE,YAAT,GAAwB;CACtB,QAAI;CACF,aAAOn4E,OAAOg5E,YAAd;CACD,KAFD,CAEE,OAAOxoH,CAAP,EAAU;CACb;;;;;;;;;;;CCjMD;;;;CAIA,EAAmC;CACjC/W,kBAAA,GAAiB8/H,OAAjB;CACD;;;;;;;;CAQD,WAASA,OAAT,CAAiBr7F,GAAjB,EAAsB;CACpB,QAAIA,GAAJ,EAAS,OAAOs7F,MAAMt7F,GAAN,CAAP;CACV;;;;;;;;;CAUD,WAASs7F,KAAT,CAAet7F,GAAf,EAAoB;CAClB,SAAK,IAAIhE,GAAT,IAAgBq/F,QAAQp/H,SAAxB,EAAmC;CACjC+jC,UAAIhE,GAAJ,IAAWq/F,QAAQp/H,SAAR,CAAkB+/B,GAAlB,CAAX;CACD;CACD,WAAOgE,GAAP;CACD;;;;;;;;;;;CAWDq7F,UAAQp/H,SAAR,CAAkBgqH,EAAlB,GACAoV,QAAQp/H,SAAR,CAAkBi5B,gBAAlB,GAAqC,UAASW,KAAT,EAAgB0lG,EAAhB,EAAmB;CACtD,SAAKC,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;CACA,KAAC,KAAKA,UAAL,CAAgB,MAAM3lG,KAAtB,IAA+B,KAAK2lG,UAAL,CAAgB,MAAM3lG,KAAtB,KAAgC,EAAhE,EACGxG,IADH,CACQksG,EADR;CAEA,WAAO,IAAP;CACD,GAND;;;;;;;;;;;;CAkBAF,UAAQp/H,SAAR,CAAkBqqH,IAAlB,GAAyB,UAASzwF,KAAT,EAAgB0lG,EAAhB,EAAmB;CAC1C,aAAStV,EAAT,GAAc;CACZ,WAAKiR,GAAL,CAASrhG,KAAT,EAAgBowF,EAAhB;CACAsV,SAAG9nF,KAAH,CAAS,IAAT,EAAe92C,SAAf;CACD;;CAEDspH,OAAGsV,EAAH,GAAQA,EAAR;CACA,SAAKtV,EAAL,CAAQpwF,KAAR,EAAeowF,EAAf;CACA,WAAO,IAAP;CACD,GATD;;;;;;;;;;;;CAqBAoV,UAAQp/H,SAAR,CAAkBi7H,GAAlB,GACAmE,QAAQp/H,SAAR,CAAkBoqH,cAAlB,GACAgV,QAAQp/H,SAAR,CAAkByqH,kBAAlB,GACA2U,QAAQp/H,SAAR,CAAkBw5B,mBAAlB,GAAwC,UAASI,KAAT,EAAgB0lG,EAAhB,EAAmB;CACzD,SAAKC,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;;;CAGA,QAAI,KAAK7+H,UAAUC,MAAnB,EAA2B;CACzB,WAAK4+H,UAAL,GAAkB,EAAlB;CACA,aAAO,IAAP;CACD;;;CAGD,QAAIC,YAAY,KAAKD,UAAL,CAAgB,MAAM3lG,KAAtB,CAAhB;CACA,QAAI,CAAC4lG,SAAL,EAAgB,OAAO,IAAP;;;CAGhB,QAAI,KAAK9+H,UAAUC,MAAnB,EAA2B;CACzB,aAAO,KAAK4+H,UAAL,CAAgB,MAAM3lG,KAAtB,CAAP;CACA,aAAO,IAAP;CACD;;;CAGD,QAAImL,EAAJ;CACA,SAAK,IAAI3oB,IAAI,CAAb,EAAgBA,IAAIojH,UAAU7+H,MAA9B,EAAsCyb,GAAtC,EAA2C;CACzC2oB,WAAKy6F,UAAUpjH,CAAV,CAAL;CACA,UAAI2oB,OAAOu6F,EAAP,IAAav6F,GAAGu6F,EAAH,KAAUA,EAA3B,EAA+B;CAC7BE,kBAAU9lG,MAAV,CAAiBtd,CAAjB,EAAoB,CAApB;CACA;CACD;CACF;CACD,WAAO,IAAP;CACD,GAhCD;;;;;;;;;;CA0CAgjH,UAAQp/H,SAAR,CAAkBgpH,IAAlB,GAAyB,UAASpvF,KAAT,EAAe;CACtC,SAAK2lG,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;CACA,QAAIpxB,OAAO,GAAGniG,KAAH,CAASlL,IAAT,CAAcJ,SAAd,EAAyB,CAAzB,CAAX;CAAA,QACI8+H,YAAY,KAAKD,UAAL,CAAgB,MAAM3lG,KAAtB,CADhB;;CAGA,QAAI4lG,SAAJ,EAAe;CACbA,kBAAYA,UAAUxzH,KAAV,CAAgB,CAAhB,CAAZ;CACA,WAAK,IAAIoQ,IAAI,CAAR,EAAW5I,MAAMgsH,UAAU7+H,MAAhC,EAAwCyb,IAAI5I,GAA5C,EAAiD,EAAE4I,CAAnD,EAAsD;CACpDojH,kBAAUpjH,CAAV,EAAao7B,KAAb,CAAmB,IAAnB,EAAyB22D,IAAzB;CACD;CACF;;CAED,WAAO,IAAP;CACD,GAbD;;;;;;;;;;CAuBAixB,UAAQp/H,SAAR,CAAkBq5B,SAAlB,GAA8B,UAASO,KAAT,EAAe;CAC3C,SAAK2lG,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;CACA,WAAO,KAAKA,UAAL,CAAgB,MAAM3lG,KAAtB,KAAgC,EAAvC;CACD,GAHD;;;;;;;;;;CAaAwlG,UAAQp/H,SAAR,CAAkBy/H,YAAlB,GAAiC,UAAS7lG,KAAT,EAAe;CAC9C,WAAO,CAAC,CAAE,KAAKP,SAAL,CAAeO,KAAf,EAAsBj5B,MAAhC;CACD,GAFD;;;CChKA,IAAIN,WAAW,GAAGA,QAAlB;;CAEA,cAAiBy7B,MAAMC,OAAN,IAAiB,UAAUivF,GAAV,EAAe;CAC/C,SAAO3qH,SAASS,IAAT,CAAckqH,GAAd,KAAsB,gBAA7B;CACD,CAFD;;CCDA,IAAI0U,SAAS,EAAb;CACA,IAAIC,YAAY,EAAhB;CACA,IAAIC,MAAM,OAAO7qE,UAAP,KAAsB,WAAtB,GAAoCA,UAApC,GAAiDj5B,KAA3D;CACA,IAAI+jG,SAAS,KAAb;CACA,SAAS5zD,IAAT,GAAiB;CACf4zD,WAAS,IAAT;CACA,MAAIlpD,OAAO,kEAAX;CACA,OAAK,IAAIv6D,IAAI,CAAR,EAAW5I,MAAMmjE,KAAKh2E,MAA3B,EAAmCyb,IAAI5I,GAAvC,EAA4C,EAAE4I,CAA9C,EAAiD;CAC/CsjH,WAAOtjH,CAAP,IAAYu6D,KAAKv6D,CAAL,CAAZ;CACAujH,cAAUhpD,KAAKkmD,UAAL,CAAgBzgH,CAAhB,CAAV,IAAgCA,CAAhC;CACD;;CAEDujH,YAAU,IAAI9C,UAAJ,CAAe,CAAf,CAAV,IAA+B,EAA/B;CACA8C,YAAU,IAAI9C,UAAJ,CAAe,CAAf,CAAV,IAA+B,EAA/B;CACD;;AAED,CAAO,SAASiD,WAAT,CAAsBC,GAAtB,EAA2B;CAChC,MAAI,CAACF,MAAL,EAAa;CACX5zD;CACD;CACD,MAAI7vD,CAAJ,EAAO2D,CAAP,EAAU5V,CAAV,EAAa4W,GAAb,EAAkBi/G,YAAlB,EAAgChV,GAAhC;CACA,MAAIx3G,MAAMusH,IAAIp/H,MAAd;;CAEA,MAAI6S,MAAM,CAAN,GAAU,CAAd,EAAiB;CACf,UAAM,IAAI41G,KAAJ,CAAU,gDAAV,CAAN;CACD;;CAED;CACA;CACA;CACA;CACA;CACA4W,iBAAeD,IAAIvsH,MAAM,CAAV,MAAiB,GAAjB,GAAuB,CAAvB,GAA2BusH,IAAIvsH,MAAM,CAAV,MAAiB,GAAjB,GAAuB,CAAvB,GAA2B,CAArE;;CAEA;CACAw3G,QAAM,IAAI4U,GAAJ,CAAQpsH,MAAM,CAAN,GAAU,CAAV,GAAcwsH,YAAtB,CAAN;;CAEA;CACA71H,MAAI61H,eAAe,CAAf,GAAmBxsH,MAAM,CAAzB,GAA6BA,GAAjC;;CAEA,MAAIysH,IAAI,CAAR;;CAEA,OAAK7jH,IAAI,CAAJ,EAAO2D,IAAI,CAAhB,EAAmB3D,IAAIjS,CAAvB,EAA0BiS,KAAK,CAAL,EAAQ2D,KAAK,CAAvC,EAA0C;CACxCgB,UAAO4+G,UAAUI,IAAIlD,UAAJ,CAAezgH,CAAf,CAAV,KAAgC,EAAjC,GAAwCujH,UAAUI,IAAIlD,UAAJ,CAAezgH,IAAI,CAAnB,CAAV,KAAoC,EAA5E,GAAmFujH,UAAUI,IAAIlD,UAAJ,CAAezgH,IAAI,CAAnB,CAAV,KAAoC,CAAvH,GAA4HujH,UAAUI,IAAIlD,UAAJ,CAAezgH,IAAI,CAAnB,CAAV,CAAlI;CACA4uG,QAAIiV,GAAJ,IAAYl/G,OAAO,EAAR,GAAc,IAAzB;CACAiqG,QAAIiV,GAAJ,IAAYl/G,OAAO,CAAR,GAAa,IAAxB;CACAiqG,QAAIiV,GAAJ,IAAWl/G,MAAM,IAAjB;CACD;;CAED,MAAIi/G,iBAAiB,CAArB,EAAwB;CACtBj/G,UAAO4+G,UAAUI,IAAIlD,UAAJ,CAAezgH,CAAf,CAAV,KAAgC,CAAjC,GAAuCujH,UAAUI,IAAIlD,UAAJ,CAAezgH,IAAI,CAAnB,CAAV,KAAoC,CAAjF;CACA4uG,QAAIiV,GAAJ,IAAWl/G,MAAM,IAAjB;CACD,GAHD,MAGO,IAAIi/G,iBAAiB,CAArB,EAAwB;CAC7Bj/G,UAAO4+G,UAAUI,IAAIlD,UAAJ,CAAezgH,CAAf,CAAV,KAAgC,EAAjC,GAAwCujH,UAAUI,IAAIlD,UAAJ,CAAezgH,IAAI,CAAnB,CAAV,KAAoC,CAA5E,GAAkFujH,UAAUI,IAAIlD,UAAJ,CAAezgH,IAAI,CAAnB,CAAV,KAAoC,CAA5H;CACA4uG,QAAIiV,GAAJ,IAAYl/G,OAAO,CAAR,GAAa,IAAxB;CACAiqG,QAAIiV,GAAJ,IAAWl/G,MAAM,IAAjB;CACD;;CAED,SAAOiqG,GAAP;CACD;;CAED,SAASkV,eAAT,CAA0BC,GAA1B,EAA+B;CAC7B,SAAOT,OAAOS,OAAO,EAAP,GAAY,IAAnB,IAA2BT,OAAOS,OAAO,EAAP,GAAY,IAAnB,CAA3B,GAAsDT,OAAOS,OAAO,CAAP,GAAW,IAAlB,CAAtD,GAAgFT,OAAOS,MAAM,IAAb,CAAvF;CACD;;CAED,SAASC,WAAT,CAAsBC,KAAtB,EAA6BtlH,KAA7B,EAAoCC,GAApC,EAAyC;CACvC,MAAI+F,GAAJ;CACA,MAAI/f,SAAS,EAAb;CACA,OAAK,IAAIob,IAAIrB,KAAb,EAAoBqB,IAAIpB,GAAxB,EAA6BoB,KAAK,CAAlC,EAAqC;CACnC2E,UAAM,CAACs/G,MAAMjkH,CAAN,KAAY,EAAb,KAAoBikH,MAAMjkH,IAAI,CAAV,KAAgB,CAApC,IAA0CikH,MAAMjkH,IAAI,CAAV,CAAhD;CACApb,WAAOoyB,IAAP,CAAY8sG,gBAAgBn/G,GAAhB,CAAZ;CACD;CACD,SAAO/f,OAAO2uB,IAAP,CAAY,EAAZ,CAAP;CACD;;AAED,CAAO,SAAS2wG,aAAT,CAAwBD,KAAxB,EAA+B;CACpC,MAAI,CAACR,MAAL,EAAa;CACX5zD;CACD;CACD,MAAIlrD,GAAJ;CACA,MAAIvN,MAAM6sH,MAAM1/H,MAAhB;CACA,MAAI4/H,aAAa/sH,MAAM,CAAvB,CANoC;CAOpC,MAAIxS,SAAS,EAAb;CACA,MAAIkzC,QAAQ,EAAZ;CACA,MAAIssF,iBAAiB,KAArB,CAToC;;CAWpC;CACA,OAAK,IAAIpkH,IAAI,CAAR,EAAWqkH,OAAOjtH,MAAM+sH,UAA7B,EAAyCnkH,IAAIqkH,IAA7C,EAAmDrkH,KAAKokH,cAAxD,EAAwE;CACtEtsF,UAAM9gB,IAAN,CAAWgtG,YAAYC,KAAZ,EAAmBjkH,CAAnB,EAAuBA,IAAIokH,cAAL,GAAuBC,IAAvB,GAA8BA,IAA9B,GAAsCrkH,IAAIokH,cAAhE,CAAX;CACD;;CAED;CACA,MAAID,eAAe,CAAnB,EAAsB;CACpBx/G,UAAMs/G,MAAM7sH,MAAM,CAAZ,CAAN;CACAxS,cAAU0+H,OAAO3+G,OAAO,CAAd,CAAV;CACA/f,cAAU0+H,OAAQ3+G,OAAO,CAAR,GAAa,IAApB,CAAV;CACA/f,cAAU,IAAV;CACD,GALD,MAKO,IAAIu/H,eAAe,CAAnB,EAAsB;CAC3Bx/G,UAAM,CAACs/G,MAAM7sH,MAAM,CAAZ,KAAkB,CAAnB,IAAyB6sH,MAAM7sH,MAAM,CAAZ,CAA/B;CACAxS,cAAU0+H,OAAO3+G,OAAO,EAAd,CAAV;CACA/f,cAAU0+H,OAAQ3+G,OAAO,CAAR,GAAa,IAApB,CAAV;CACA/f,cAAU0+H,OAAQ3+G,OAAO,CAAR,GAAa,IAApB,CAAV;CACA/f,cAAU,GAAV;CACD;;CAEDkzC,QAAM9gB,IAAN,CAAWpyB,MAAX;;CAEA,SAAOkzC,MAAMvkB,IAAN,CAAW,EAAX,CAAP;CACD;;;;;;;CC5GM,SAAS+wG,IAAT,CAAezgH,MAAf,EAAuBzS,MAAvB,EAA+BmzH,IAA/B,EAAqCC,IAArC,EAA2CC,MAA3C,EAAmD;CACxD,MAAIxqH,CAAJ,EAAOzL,CAAP;CACA,MAAIk2H,OAAOD,SAAS,CAAT,GAAaD,IAAb,GAAoB,CAA/B;CACA,MAAIG,OAAO,CAAC,KAAKD,IAAN,IAAc,CAAzB;CACA,MAAIE,QAAQD,QAAQ,CAApB;CACA,MAAIE,QAAQ,CAAC,CAAb;CACA,MAAI7kH,IAAIukH,OAAQE,SAAS,CAAjB,GAAsB,CAA9B;CACA,MAAIrqH,IAAImqH,OAAO,CAAC,CAAR,GAAY,CAApB;CACA,MAAIz2H,IAAI+V,OAAOzS,SAAS4O,CAAhB,CAAR;;CAEAA,OAAK5F,CAAL;;CAEAH,MAAInM,IAAK,CAAC,KAAM,CAAC+2H,KAAR,IAAkB,CAA3B;CACA/2H,QAAO,CAAC+2H,KAAR;CACAA,WAASH,IAAT;CACA,SAAOG,QAAQ,CAAf,EAAkB5qH,IAAIA,IAAI,GAAJ,GAAU4J,OAAOzS,SAAS4O,CAAhB,CAAd,EAAkCA,KAAK5F,CAAvC,EAA0CyqH,SAAS,CAArE,EAAwE;;CAExEr2H,MAAIyL,IAAK,CAAC,KAAM,CAAC4qH,KAAR,IAAkB,CAA3B;CACA5qH,QAAO,CAAC4qH,KAAR;CACAA,WAASL,IAAT;CACA,SAAOK,QAAQ,CAAf,EAAkBr2H,IAAIA,IAAI,GAAJ,GAAUqV,OAAOzS,SAAS4O,CAAhB,CAAd,EAAkCA,KAAK5F,CAAvC,EAA0CyqH,SAAS,CAArE,EAAwE;;CAExE,MAAI5qH,MAAM,CAAV,EAAa;CACXA,QAAI,IAAI2qH,KAAR;CACD,GAFD,MAEO,IAAI3qH,MAAM0qH,IAAV,EAAgB;CACrB,WAAOn2H,IAAIs2H,GAAJ,GAAW,CAACh3H,IAAI,CAAC,CAAL,GAAS,CAAV,IAAe6R,QAAjC;CACD,GAFM,MAEA;CACLnR,QAAIA,IAAIjL,KAAKC,GAAL,CAAS,CAAT,EAAYghI,IAAZ,CAAR;CACAvqH,QAAIA,IAAI2qH,KAAR;CACD;CACD,SAAO,CAAC92H,IAAI,CAAC,CAAL,GAAS,CAAV,IAAeU,CAAf,GAAmBjL,KAAKC,GAAL,CAAS,CAAT,EAAYyW,IAAIuqH,IAAhB,CAA1B;CACD;;AAED,CAAO,SAASO,KAAT,CAAgBlhH,MAAhB,EAAwB5W,KAAxB,EAA+BmE,MAA/B,EAAuCmzH,IAAvC,EAA6CC,IAA7C,EAAmDC,MAAnD,EAA2D;CAChE,MAAIxqH,CAAJ,EAAOzL,CAAP,EAAUyC,CAAV;CACA,MAAIyzH,OAAOD,SAAS,CAAT,GAAaD,IAAb,GAAoB,CAA/B;CACA,MAAIG,OAAO,CAAC,KAAKD,IAAN,IAAc,CAAzB;CACA,MAAIE,QAAQD,QAAQ,CAApB;CACA,MAAIK,KAAMR,SAAS,EAAT,GAAcjhI,KAAKC,GAAL,CAAS,CAAT,EAAY,CAAC,EAAb,IAAmBD,KAAKC,GAAL,CAAS,CAAT,EAAY,CAAC,EAAb,CAAjC,GAAoD,CAA9D;CACA,MAAIwc,IAAIukH,OAAO,CAAP,GAAYE,SAAS,CAA7B;CACA,MAAIrqH,IAAImqH,OAAO,CAAP,GAAW,CAAC,CAApB;CACA,MAAIz2H,IAAIb,QAAQ,CAAR,IAAcA,UAAU,CAAV,IAAe,IAAIA,KAAJ,GAAY,CAAzC,GAA8C,CAA9C,GAAkD,CAA1D;;CAEAA,UAAQ1J,KAAK8Q,GAAL,CAASpH,KAAT,CAAR;;CAEA,MAAI4hC,MAAM5hC,KAAN,KAAgBA,UAAU0S,QAA9B,EAAwC;CACtCnR,QAAIqgC,MAAM5hC,KAAN,IAAe,CAAf,GAAmB,CAAvB;CACAgN,QAAI0qH,IAAJ;CACD,GAHD,MAGO;CACL1qH,QAAI1W,KAAKiK,KAAL,CAAWjK,KAAKoxB,GAAL,CAAS1nB,KAAT,IAAkB1J,KAAKqxB,GAAlC,CAAJ;CACA,QAAI3nB,SAASgE,IAAI1N,KAAKC,GAAL,CAAS,CAAT,EAAY,CAACyW,CAAb,CAAb,IAAgC,CAApC,EAAuC;CACrCA;CACAhJ,WAAK,CAAL;CACD;CACD,QAAIgJ,IAAI2qH,KAAJ,IAAa,CAAjB,EAAoB;CAClB33H,eAAS+3H,KAAK/zH,CAAd;CACD,KAFD,MAEO;CACLhE,eAAS+3H,KAAKzhI,KAAKC,GAAL,CAAS,CAAT,EAAY,IAAIohI,KAAhB,CAAd;CACD;CACD,QAAI33H,QAAQgE,CAAR,IAAa,CAAjB,EAAoB;CAClBgJ;CACAhJ,WAAK,CAAL;CACD;;CAED,QAAIgJ,IAAI2qH,KAAJ,IAAaD,IAAjB,EAAuB;CACrBn2H,UAAI,CAAJ;CACAyL,UAAI0qH,IAAJ;CACD,KAHD,MAGO,IAAI1qH,IAAI2qH,KAAJ,IAAa,CAAjB,EAAoB;CACzBp2H,UAAI,CAACvB,QAAQgE,CAAR,GAAY,CAAb,IAAkB1N,KAAKC,GAAL,CAAS,CAAT,EAAYghI,IAAZ,CAAtB;CACAvqH,UAAIA,IAAI2qH,KAAR;CACD,KAHM,MAGA;CACLp2H,UAAIvB,QAAQ1J,KAAKC,GAAL,CAAS,CAAT,EAAYohI,QAAQ,CAApB,CAAR,GAAiCrhI,KAAKC,GAAL,CAAS,CAAT,EAAYghI,IAAZ,CAArC;CACAvqH,UAAI,CAAJ;CACD;CACF;;CAED,SAAOuqH,QAAQ,CAAf,EAAkB3gH,OAAOzS,SAAS4O,CAAhB,IAAqBxR,IAAI,IAAzB,EAA+BwR,KAAK5F,CAApC,EAAuC5L,KAAK,GAA5C,EAAiDg2H,QAAQ,CAA3E,EAA8E;;CAE9EvqH,MAAKA,KAAKuqH,IAAN,GAAch2H,CAAlB;CACAk2H,UAAQF,IAAR;CACA,SAAOE,OAAO,CAAd,EAAiB7gH,OAAOzS,SAAS4O,CAAhB,IAAqB/F,IAAI,IAAzB,EAA+B+F,KAAK5F,CAApC,EAAuCH,KAAK,GAA5C,EAAiDyqH,QAAQ,CAA1E,EAA6E;;CAE7E7gH,SAAOzS,SAAS4O,CAAT,GAAa5F,CAApB,KAA0BtM,IAAI,GAA9B;CACD;;CCpFD,IAAI7J,aAAW,GAAGA,QAAlB;;AAEA,eAAey7B,MAAMC,OAAN,IAAiB,UAAUivF,GAAV,EAAe;CAC7C,SAAO3qH,WAASS,IAAT,CAAckqH,GAAd,KAAsB,gBAA7B;CACD,CAFD;;CCWO,IAAIqW,oBAAoB,EAAxB;;;;;;;;;;;;;;;;;;;;;;;;;;CA0BPC,OAAOC,mBAAP,GAA6BlI,SAAOkI,mBAAP,KAA+B7hI,SAA/B,GACzB25H,SAAOkI,mBADkB,GAEzB,IAFJ;;CA0BA,SAASC,UAAT,GAAuB;CACrB,SAAOF,OAAOC,mBAAP,GACH,UADG,GAEH,UAFJ;CAGD;;CAED,SAASrxD,YAAT,CAAuBiwC,IAAvB,EAA6Bx/G,MAA7B,EAAqC;CACnC,MAAI6gI,eAAe7gI,MAAnB,EAA2B;CACzB,UAAM,IAAI8gI,UAAJ,CAAe,4BAAf,CAAN;CACD;CACD,MAAIH,OAAOC,mBAAX,EAAgC;;CAE9BphB,WAAO,IAAIprD,UAAJ,CAAep0D,MAAf,CAAP;CACAw/G,SAAKuhB,SAAL,GAAiBJ,OAAOthI,SAAxB;CACD,GAJD,MAIO;;CAEL,QAAImgH,SAAS,IAAb,EAAmB;CACjBA,aAAO,IAAImhB,MAAJ,CAAW3gI,MAAX,CAAP;CACD;CACDw/G,SAAKx/G,MAAL,GAAcA,MAAd;CACD;;CAED,SAAOw/G,IAAP;CACD;;;;;;;;;;;;AAYD,CAAO,SAASmhB,MAAT,CAAiBK,GAAjB,EAAsBC,gBAAtB,EAAwCjhI,MAAxC,EAAgD;CACrD,MAAI,CAAC2gI,OAAOC,mBAAR,IAA+B,EAAE,gBAAgBD,MAAlB,CAAnC,EAA8D;CAC5D,WAAO,IAAIA,MAAJ,CAAWK,GAAX,EAAgBC,gBAAhB,EAAkCjhI,MAAlC,CAAP;CACD;;;CAGD,MAAI,OAAOghI,GAAP,KAAe,QAAnB,EAA6B;CAC3B,QAAI,OAAOC,gBAAP,KAA4B,QAAhC,EAA0C;CACxC,YAAM,IAAIxY,KAAJ,CACJ,mEADI,CAAN;CAGD;CACD,WAAOyY,YAAY,IAAZ,EAAkBF,GAAlB,CAAP;CACD;CACD,SAAO/kF,KAAK,IAAL,EAAW+kF,GAAX,EAAgBC,gBAAhB,EAAkCjhI,MAAlC,CAAP;CACD;;CAED2gI,OAAOQ,QAAP,GAAkB,IAAlB;;;CAGAR,OAAOS,QAAP,GAAkB,UAAU/W,GAAV,EAAe;CAC/BA,MAAI0W,SAAJ,GAAgBJ,OAAOthI,SAAvB;CACA,SAAOgrH,GAAP;CACD,CAHD;;CAKA,SAASpuE,IAAT,CAAeujE,IAAf,EAAqB92G,KAArB,EAA4Bu4H,gBAA5B,EAA8CjhI,MAA9C,EAAsD;CACpD,MAAI,OAAO0I,KAAP,KAAiB,QAArB,EAA+B;CAC7B,UAAM,IAAI6+G,SAAJ,CAAc,uCAAd,CAAN;CACD;;CAED,MAAI,OAAO8Z,WAAP,KAAuB,WAAvB,IAAsC34H,iBAAiB24H,WAA3D,EAAwE;CACtE,WAAOC,gBAAgB9hB,IAAhB,EAAsB92G,KAAtB,EAA6Bu4H,gBAA7B,EAA+CjhI,MAA/C,CAAP;CACD;;CAED,MAAI,OAAO0I,KAAP,KAAiB,QAArB,EAA+B;CAC7B,WAAO64H,WAAW/hB,IAAX,EAAiB92G,KAAjB,EAAwBu4H,gBAAxB,CAAP;CACD;;CAED,SAAOO,WAAWhiB,IAAX,EAAiB92G,KAAjB,CAAP;CACD;;;;;;;;;;CAUDi4H,OAAO1kF,IAAP,GAAc,UAAUvzC,KAAV,EAAiBu4H,gBAAjB,EAAmCjhI,MAAnC,EAA2C;CACvD,SAAOi8C,KAAK,IAAL,EAAWvzC,KAAX,EAAkBu4H,gBAAlB,EAAoCjhI,MAApC,CAAP;CACD,CAFD;;CAIA,IAAI2gI,OAAOC,mBAAX,EAAgC;CAC9BD,SAAOthI,SAAP,CAAiB0hI,SAAjB,GAA6B3sE,WAAW/0D,SAAxC;CACAshI,SAAOI,SAAP,GAAmB3sE,UAAnB;AACA,CAQD;;CAED,SAASqtE,UAAT,CAAqBj3H,IAArB,EAA2B;CACzB,MAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;CAC5B,UAAM,IAAI+8G,SAAJ,CAAc,kCAAd,CAAN;CACD,GAFD,MAEO,IAAI/8G,OAAO,CAAX,EAAc;CACnB,UAAM,IAAIs2H,UAAJ,CAAe,sCAAf,CAAN;CACD;CACF;;CAED,SAASY,KAAT,CAAgBliB,IAAhB,EAAsBh1G,IAAtB,EAA4Bm3H,IAA5B,EAAkC9jE,QAAlC,EAA4C;CAC1C4jE,aAAWj3H,IAAX;CACA,MAAIA,QAAQ,CAAZ,EAAe;CACb,WAAO+kE,aAAaiwC,IAAb,EAAmBh1G,IAAnB,CAAP;CACD;CACD,MAAIm3H,SAAS5iI,SAAb,EAAwB;;;;CAItB,WAAO,OAAO8+D,QAAP,KAAoB,QAApB,GACH0R,aAAaiwC,IAAb,EAAmBh1G,IAAnB,EAAyBm3H,IAAzB,CAA8BA,IAA9B,EAAoC9jE,QAApC,CADG,GAEH0R,aAAaiwC,IAAb,EAAmBh1G,IAAnB,EAAyBm3H,IAAzB,CAA8BA,IAA9B,CAFJ;CAGD;CACD,SAAOpyD,aAAaiwC,IAAb,EAAmBh1G,IAAnB,CAAP;CACD;;;;;;CAMDm2H,OAAOe,KAAP,GAAe,UAAUl3H,IAAV,EAAgBm3H,IAAhB,EAAsB9jE,QAAtB,EAAgC;CAC7C,SAAO6jE,MAAM,IAAN,EAAYl3H,IAAZ,EAAkBm3H,IAAlB,EAAwB9jE,QAAxB,CAAP;CACD,CAFD;;CAIA,SAASqjE,WAAT,CAAsB1hB,IAAtB,EAA4Bh1G,IAA5B,EAAkC;CAChCi3H,aAAWj3H,IAAX;CACAg1G,SAAOjwC,aAAaiwC,IAAb,EAAmBh1G,OAAO,CAAP,GAAW,CAAX,GAAeo3H,QAAQp3H,IAAR,IAAgB,CAAlD,CAAP;CACA,MAAI,CAACm2H,OAAOC,mBAAZ,EAAiC;CAC/B,SAAK,IAAInlH,IAAI,CAAb,EAAgBA,IAAIjR,IAApB,EAA0B,EAAEiR,CAA5B,EAA+B;CAC7B+jG,WAAK/jG,CAAL,IAAU,CAAV;CACD;CACF;CACD,SAAO+jG,IAAP;CACD;;;;;CAKDmhB,OAAOO,WAAP,GAAqB,UAAU12H,IAAV,EAAgB;CACnC,SAAO02H,YAAY,IAAZ,EAAkB12H,IAAlB,CAAP;CACD,CAFD;;;;CAMAm2H,OAAOkB,eAAP,GAAyB,UAAUr3H,IAAV,EAAgB;CACvC,SAAO02H,YAAY,IAAZ,EAAkB12H,IAAlB,CAAP;CACD,CAFD;;CAIA,SAAS+2H,UAAT,CAAqB/hB,IAArB,EAA2B31G,MAA3B,EAAmCg0D,QAAnC,EAA6C;CAC3C,MAAI,OAAOA,QAAP,KAAoB,QAApB,IAAgCA,aAAa,EAAjD,EAAqD;CACnDA,eAAW,MAAX;CACD;;CAED,MAAI,CAAC8iE,OAAOmB,UAAP,CAAkBjkE,QAAlB,CAAL,EAAkC;CAChC,UAAM,IAAI0pD,SAAJ,CAAc,4CAAd,CAAN;CACD;;CAED,MAAIvnH,SAAS+hI,WAAWl4H,MAAX,EAAmBg0D,QAAnB,IAA+B,CAA5C;CACA2hD,SAAOjwC,aAAaiwC,IAAb,EAAmBx/G,MAAnB,CAAP;;CAEA,MAAIgiI,SAASxiB,KAAKghB,KAAL,CAAW32H,MAAX,EAAmBg0D,QAAnB,CAAb;;CAEA,MAAImkE,WAAWhiI,MAAf,EAAuB;;;;CAIrBw/G,WAAOA,KAAKn0G,KAAL,CAAW,CAAX,EAAc22H,MAAd,CAAP;CACD;;CAED,SAAOxiB,IAAP;CACD;;CAED,SAASyiB,aAAT,CAAwBziB,IAAxB,EAA8B5yG,KAA9B,EAAqC;CACnC,MAAI5M,SAAS4M,MAAM5M,MAAN,GAAe,CAAf,GAAmB,CAAnB,GAAuB4hI,QAAQh1H,MAAM5M,MAAd,IAAwB,CAA5D;CACAw/G,SAAOjwC,aAAaiwC,IAAb,EAAmBx/G,MAAnB,CAAP;CACA,OAAK,IAAIyb,IAAI,CAAb,EAAgBA,IAAIzb,MAApB,EAA4Byb,KAAK,CAAjC,EAAoC;CAClC+jG,SAAK/jG,CAAL,IAAU7O,MAAM6O,CAAN,IAAW,GAArB;CACD;CACD,SAAO+jG,IAAP;CACD;;CAED,SAAS8hB,eAAT,CAA0B9hB,IAA1B,EAAgC5yG,KAAhC,EAAuCs1H,UAAvC,EAAmDliI,MAAnD,EAA2D;CACzD4M,QAAMm1H,UAAN,CADyD;;CAGzD,MAAIG,aAAa,CAAb,IAAkBt1H,MAAMm1H,UAAN,GAAmBG,UAAzC,EAAqD;CACnD,UAAM,IAAIpB,UAAJ,CAAe,6BAAf,CAAN;CACD;;CAED,MAAIl0H,MAAMm1H,UAAN,GAAmBG,cAAcliI,UAAU,CAAxB,CAAvB,EAAmD;CACjD,UAAM,IAAI8gI,UAAJ,CAAe,6BAAf,CAAN;CACD;;CAED,MAAIoB,eAAenjI,SAAf,IAA4BiB,WAAWjB,SAA3C,EAAsD;CACpD6N,YAAQ,IAAIwnD,UAAJ,CAAexnD,KAAf,CAAR;CACD,GAFD,MAEO,IAAI5M,WAAWjB,SAAf,EAA0B;CAC/B6N,YAAQ,IAAIwnD,UAAJ,CAAexnD,KAAf,EAAsBs1H,UAAtB,CAAR;CACD,GAFM,MAEA;CACLt1H,YAAQ,IAAIwnD,UAAJ,CAAexnD,KAAf,EAAsBs1H,UAAtB,EAAkCliI,MAAlC,CAAR;CACD;;CAED,MAAI2gI,OAAOC,mBAAX,EAAgC;;CAE9BphB,WAAO5yG,KAAP;CACA4yG,SAAKuhB,SAAL,GAAiBJ,OAAOthI,SAAxB;CACD,GAJD,MAIO;;CAELmgH,WAAOyiB,cAAcziB,IAAd,EAAoB5yG,KAApB,CAAP;CACD;CACD,SAAO4yG,IAAP;CACD;;CAED,SAASgiB,UAAT,CAAqBhiB,IAArB,EAA2Bp8E,GAA3B,EAAgC;CAC9B,MAAI++F,iBAAiB/+F,GAAjB,CAAJ,EAA2B;CACzB,QAAIvwB,MAAM+uH,QAAQx+F,IAAIpjC,MAAZ,IAAsB,CAAhC;CACAw/G,WAAOjwC,aAAaiwC,IAAb,EAAmB3sG,GAAnB,CAAP;;CAEA,QAAI2sG,KAAKx/G,MAAL,KAAgB,CAApB,EAAuB;CACrB,aAAOw/G,IAAP;CACD;;CAEDp8E,QAAIz6B,IAAJ,CAAS62G,IAAT,EAAe,CAAf,EAAkB,CAAlB,EAAqB3sG,GAArB;CACA,WAAO2sG,IAAP;CACD;;CAED,MAAIp8E,GAAJ,EAAS;CACP,QAAK,OAAOi+F,WAAP,KAAuB,WAAvB,IACDj+F,IAAI9jB,MAAJ,YAAsB+hH,WADtB,IACsC,YAAYj+F,GADtD,EAC2D;CACzD,UAAI,OAAOA,IAAIpjC,MAAX,KAAsB,QAAtB,IAAkCoiI,MAAMh/F,IAAIpjC,MAAV,CAAtC,EAAyD;CACvD,eAAOuvE,aAAaiwC,IAAb,EAAmB,CAAnB,CAAP;CACD;CACD,aAAOyiB,cAAcziB,IAAd,EAAoBp8E,GAApB,CAAP;CACD;;CAED,QAAIA,IAAI7K,IAAJ,KAAa,QAAb,IAAyB6C,QAAQgI,IAAI/D,IAAZ,CAA7B,EAAgD;CAC9C,aAAO4iG,cAAcziB,IAAd,EAAoBp8E,IAAI/D,IAAxB,CAAP;CACD;CACF;;CAED,QAAM,IAAIkoF,SAAJ,CAAc,oFAAd,CAAN;CACD;;CAED,SAASqa,OAAT,CAAkB5hI,MAAlB,EAA0B;;;CAGxB,MAAIA,UAAU6gI,YAAd,EAA4B;CAC1B,UAAM,IAAIC,UAAJ,CAAe,oDACA,UADA,GACaD,aAAanhI,QAAb,CAAsB,EAAtB,CADb,GACyC,QADxD,CAAN;CAED;CACD,SAAOM,SAAS,CAAhB;CACD;CAQD2gI,OAAO0B,QAAP,GAAkBA,QAAlB;CACA,SAASF,gBAAT,CAA2B75H,CAA3B,EAA8B;CAC5B,SAAO,CAAC,EAAEA,KAAK,IAAL,IAAaA,EAAEg6H,SAAjB,CAAR;CACD;;CAED3B,OAAO4B,OAAP,GAAiB,SAASA,OAAT,CAAkBhyH,CAAlB,EAAqBjI,CAArB,EAAwB;CACvC,MAAI,CAAC65H,iBAAiB5xH,CAAjB,CAAD,IAAwB,CAAC4xH,iBAAiB75H,CAAjB,CAA7B,EAAkD;CAChD,UAAM,IAAIi/G,SAAJ,CAAc,2BAAd,CAAN;CACD;;CAED,MAAIh3G,MAAMjI,CAAV,EAAa,OAAO,CAAP;;CAEb,MAAInJ,IAAIoR,EAAEvQ,MAAV;CACA,MAAIgN,IAAI1E,EAAEtI,MAAV;;CAEA,OAAK,IAAIyb,IAAI,CAAR,EAAW5I,MAAM7T,KAAKqL,GAAL,CAASlL,CAAT,EAAY6N,CAAZ,CAAtB,EAAsCyO,IAAI5I,GAA1C,EAA+C,EAAE4I,CAAjD,EAAoD;CAClD,QAAIlL,EAAEkL,CAAF,MAASnT,EAAEmT,CAAF,CAAb,EAAmB;CACjBtc,UAAIoR,EAAEkL,CAAF,CAAJ;CACAzO,UAAI1E,EAAEmT,CAAF,CAAJ;CACA;CACD;CACF;;CAED,MAAItc,IAAI6N,CAAR,EAAW,OAAO,CAAC,CAAR;CACX,MAAIA,IAAI7N,CAAR,EAAW,OAAO,CAAP;CACX,SAAO,CAAP;CACD,CArBD;;CAuBAwhI,OAAOmB,UAAP,GAAoB,SAASA,UAAT,CAAqBjkE,QAArB,EAA+B;CACjD,UAAQkuC,OAAOluC,QAAP,EAAiBlf,WAAjB,EAAR;CACE,SAAK,KAAL;CACA,SAAK,MAAL;CACA,SAAK,OAAL;CACA,SAAK,OAAL;CACA,SAAK,QAAL;CACA,SAAK,QAAL;CACA,SAAK,QAAL;CACA,SAAK,MAAL;CACA,SAAK,OAAL;CACA,SAAK,SAAL;CACA,SAAK,UAAL;CACE,aAAO,IAAP;CACF;CACE,aAAO,KAAP;CAdJ;CAgBD,CAjBD;;CAmBAgiF,OAAOjtE,MAAP,GAAgB,SAASA,MAAT,CAAiB8zB,IAAjB,EAAuBxnF,MAAvB,EAA+B;CAC7C,MAAI,CAACo7B,QAAQosD,IAAR,CAAL,EAAoB;CAClB,UAAM,IAAI+/B,SAAJ,CAAc,6CAAd,CAAN;CACD;;CAED,MAAI//B,KAAKxnF,MAAL,KAAgB,CAApB,EAAuB;CACrB,WAAO2gI,OAAOe,KAAP,CAAa,CAAb,CAAP;CACD;;CAED,MAAIjmH,CAAJ;CACA,MAAIzb,WAAWjB,SAAf,EAA0B;CACxBiB,aAAS,CAAT;CACA,SAAKyb,IAAI,CAAT,EAAYA,IAAI+rE,KAAKxnF,MAArB,EAA6B,EAAEyb,CAA/B,EAAkC;CAChCzb,gBAAUwnF,KAAK/rE,CAAL,EAAQzb,MAAlB;CACD;CACF;;CAED,MAAIsf,SAASqhH,OAAOO,WAAP,CAAmBlhI,MAAnB,CAAb;CACA,MAAIsjE,MAAM,CAAV;CACA,OAAK7nD,IAAI,CAAT,EAAYA,IAAI+rE,KAAKxnF,MAArB,EAA6B,EAAEyb,CAA/B,EAAkC;CAChC,QAAI+mH,MAAMh7C,KAAK/rE,CAAL,CAAV;CACA,QAAI,CAAC0mH,iBAAiBK,GAAjB,CAAL,EAA4B;CAC1B,YAAM,IAAIjb,SAAJ,CAAc,6CAAd,CAAN;CACD;CACDib,QAAI75H,IAAJ,CAAS2W,MAAT,EAAiBgkD,GAAjB;CACAA,WAAOk/D,IAAIxiI,MAAX;CACD;CACD,SAAOsf,MAAP;CACD,CA5BD;;CA8BA,SAASyiH,UAAT,CAAqBl4H,MAArB,EAA6Bg0D,QAA7B,EAAuC;CACrC,MAAIskE,iBAAiBt4H,MAAjB,CAAJ,EAA8B;CAC5B,WAAOA,OAAO7J,MAAd;CACD;CACD,MAAI,OAAOqhI,WAAP,KAAuB,WAAvB,IAAsC,OAAOA,YAAY7kF,MAAnB,KAA8B,UAApE,KACC6kF,YAAY7kF,MAAZ,CAAmB3yC,MAAnB,KAA8BA,kBAAkBw3H,WADjD,CAAJ,EACmE;CACjE,WAAOx3H,OAAOk4H,UAAd;CACD;CACD,MAAI,OAAOl4H,MAAP,KAAkB,QAAtB,EAAgC;CAC9BA,aAAS,KAAKA,MAAd;CACD;;CAED,MAAIgJ,MAAMhJ,OAAO7J,MAAjB;CACA,MAAI6S,QAAQ,CAAZ,EAAe,OAAO,CAAP;;;CAGf,MAAI4vH,cAAc,KAAlB;CACA,WAAS;CACP,YAAQ5kE,QAAR;CACE,WAAK,OAAL;CACA,WAAK,QAAL;CACA,WAAK,QAAL;CACE,eAAOhrD,GAAP;CACF,WAAK,MAAL;CACA,WAAK,OAAL;CACA,WAAK9T,SAAL;CACE,eAAO2jI,YAAY74H,MAAZ,EAAoB7J,MAA3B;CACF,WAAK,MAAL;CACA,WAAK,OAAL;CACA,WAAK,SAAL;CACA,WAAK,UAAL;CACE,eAAO6S,MAAM,CAAb;CACF,WAAK,KAAL;CACE,eAAOA,QAAQ,CAAf;CACF,WAAK,QAAL;CACE,eAAO8vH,cAAc94H,MAAd,EAAsB7J,MAA7B;CACF;CACE,YAAIyiI,WAAJ,EAAiB,OAAOC,YAAY74H,MAAZ,EAAoB7J,MAA3B,CADnB;CAEE69D,mBAAW,CAAC,KAAKA,QAAN,EAAgBlf,WAAhB,EAAX;CACA8jF,sBAAc,IAAd;CArBJ;CAuBD;CACF;CACD9B,OAAOoB,UAAP,GAAoBA,UAApB;;CAEA,SAASa,YAAT,CAAuB/kE,QAAvB,EAAiCzjD,KAAjC,EAAwCC,GAAxC,EAA6C;CAC3C,MAAIooH,cAAc,KAAlB;;;;;;;;;CASA,MAAIroH,UAAUrb,SAAV,IAAuBqb,QAAQ,CAAnC,EAAsC;CACpCA,YAAQ,CAAR;CACD;;;CAGD,MAAIA,QAAQ,KAAKpa,MAAjB,EAAyB;CACvB,WAAO,EAAP;CACD;;CAED,MAAIqa,QAAQtb,SAAR,IAAqBsb,MAAM,KAAKra,MAApC,EAA4C;CAC1Cqa,UAAM,KAAKra,MAAX;CACD;;CAED,MAAIqa,OAAO,CAAX,EAAc;CACZ,WAAO,EAAP;CACD;;;CAGDA,WAAS,CAAT;CACAD,aAAW,CAAX;;CAEA,MAAIC,OAAOD,KAAX,EAAkB;CAChB,WAAO,EAAP;CACD;;CAED,MAAI,CAACyjD,QAAL,EAAeA,WAAW,MAAX;;CAEf,SAAO,IAAP,EAAa;CACX,YAAQA,QAAR;CACE,WAAK,KAAL;CACE,eAAOglE,SAAS,IAAT,EAAezoH,KAAf,EAAsBC,GAAtB,CAAP;;CAEF,WAAK,MAAL;CACA,WAAK,OAAL;CACE,eAAOyoH,UAAU,IAAV,EAAgB1oH,KAAhB,EAAuBC,GAAvB,CAAP;;CAEF,WAAK,OAAL;CACE,eAAO0oH,WAAW,IAAX,EAAiB3oH,KAAjB,EAAwBC,GAAxB,CAAP;;CAEF,WAAK,QAAL;CACA,WAAK,QAAL;CACE,eAAO2oH,YAAY,IAAZ,EAAkB5oH,KAAlB,EAAyBC,GAAzB,CAAP;;CAEF,WAAK,QAAL;CACE,eAAO4oH,YAAY,IAAZ,EAAkB7oH,KAAlB,EAAyBC,GAAzB,CAAP;;CAEF,WAAK,MAAL;CACA,WAAK,OAAL;CACA,WAAK,SAAL;CACA,WAAK,UAAL;CACE,eAAO6oH,aAAa,IAAb,EAAmB9oH,KAAnB,EAA0BC,GAA1B,CAAP;;CAEF;CACE,YAAIooH,WAAJ,EAAiB,MAAM,IAAIlb,SAAJ,CAAc,uBAAuB1pD,QAArC,CAAN;CACjBA,mBAAW,CAACA,WAAW,EAAZ,EAAgBlf,WAAhB,EAAX;CACA8jF,sBAAc,IAAd;CA3BJ;CA6BD;CACF;;;;CAID9B,OAAOthI,SAAP,CAAiBijI,SAAjB,GAA6B,IAA7B;;CAEA,SAASa,IAAT,CAAe76H,CAAf,EAAkB0a,CAAlB,EAAqB/Y,CAArB,EAAwB;CACtB,MAAIwR,IAAInT,EAAE0a,CAAF,CAAR;CACA1a,IAAE0a,CAAF,IAAO1a,EAAE2B,CAAF,CAAP;CACA3B,IAAE2B,CAAF,IAAOwR,CAAP;CACD;;CAEDklH,OAAOthI,SAAP,CAAiB+jI,MAAjB,GAA0B,SAASA,MAAT,GAAmB;CAC3C,MAAIvwH,MAAM,KAAK7S,MAAf;CACA,MAAI6S,MAAM,CAAN,KAAY,CAAhB,EAAmB;CACjB,UAAM,IAAIiuH,UAAJ,CAAe,2CAAf,CAAN;CACD;CACD,OAAK,IAAIrlH,IAAI,CAAb,EAAgBA,IAAI5I,GAApB,EAAyB4I,KAAK,CAA9B,EAAiC;CAC/B0nH,SAAK,IAAL,EAAW1nH,CAAX,EAAcA,IAAI,CAAlB;CACD;CACD,SAAO,IAAP;CACD,CATD;;CAWAklH,OAAOthI,SAAP,CAAiBgkI,MAAjB,GAA0B,SAASA,MAAT,GAAmB;CAC3C,MAAIxwH,MAAM,KAAK7S,MAAf;CACA,MAAI6S,MAAM,CAAN,KAAY,CAAhB,EAAmB;CACjB,UAAM,IAAIiuH,UAAJ,CAAe,2CAAf,CAAN;CACD;CACD,OAAK,IAAIrlH,IAAI,CAAb,EAAgBA,IAAI5I,GAApB,EAAyB4I,KAAK,CAA9B,EAAiC;CAC/B0nH,SAAK,IAAL,EAAW1nH,CAAX,EAAcA,IAAI,CAAlB;CACA0nH,SAAK,IAAL,EAAW1nH,IAAI,CAAf,EAAkBA,IAAI,CAAtB;CACD;CACD,SAAO,IAAP;CACD,CAVD;;CAYAklH,OAAOthI,SAAP,CAAiBikI,MAAjB,GAA0B,SAASA,MAAT,GAAmB;CAC3C,MAAIzwH,MAAM,KAAK7S,MAAf;CACA,MAAI6S,MAAM,CAAN,KAAY,CAAhB,EAAmB;CACjB,UAAM,IAAIiuH,UAAJ,CAAe,2CAAf,CAAN;CACD;CACD,OAAK,IAAIrlH,IAAI,CAAb,EAAgBA,IAAI5I,GAApB,EAAyB4I,KAAK,CAA9B,EAAiC;CAC/B0nH,SAAK,IAAL,EAAW1nH,CAAX,EAAcA,IAAI,CAAlB;CACA0nH,SAAK,IAAL,EAAW1nH,IAAI,CAAf,EAAkBA,IAAI,CAAtB;CACA0nH,SAAK,IAAL,EAAW1nH,IAAI,CAAf,EAAkBA,IAAI,CAAtB;CACA0nH,SAAK,IAAL,EAAW1nH,IAAI,CAAf,EAAkBA,IAAI,CAAtB;CACD;CACD,SAAO,IAAP;CACD,CAZD;;CAcAklH,OAAOthI,SAAP,CAAiBK,QAAjB,GAA4B,SAASA,QAAT,GAAqB;CAC/C,MAAIM,SAAS,KAAKA,MAAL,GAAc,CAA3B;CACA,MAAIA,WAAW,CAAf,EAAkB,OAAO,EAAP;CAClB,MAAID,UAAUC,MAAV,KAAqB,CAAzB,EAA4B,OAAO8iI,UAAU,IAAV,EAAgB,CAAhB,EAAmB9iI,MAAnB,CAAP;CAC5B,SAAO4iI,aAAa/rF,KAAb,CAAmB,IAAnB,EAAyB92C,SAAzB,CAAP;CACD,CALD;;CAOA4gI,OAAOthI,SAAP,CAAiBoN,MAAjB,GAA0B,SAASA,MAAT,CAAiBnE,CAAjB,EAAoB;CAC5C,MAAI,CAAC65H,iBAAiB75H,CAAjB,CAAL,EAA0B,MAAM,IAAIi/G,SAAJ,CAAc,2BAAd,CAAN;CAC1B,MAAI,SAASj/G,CAAb,EAAgB,OAAO,IAAP;CAChB,SAAOq4H,OAAO4B,OAAP,CAAe,IAAf,EAAqBj6H,CAArB,MAA4B,CAAnC;CACD,CAJD;;CAMAq4H,OAAOthI,SAAP,CAAiBkkI,OAAjB,GAA2B,SAASA,OAAT,GAAoB;CAC7C,MAAIlL,MAAM,EAAV;CACA,MAAI7sH,MAAMk1H,iBAAV;CACA,MAAI,KAAK1gI,MAAL,GAAc,CAAlB,EAAqB;CACnBq4H,UAAM,KAAK34H,QAAL,CAAc,KAAd,EAAqB,CAArB,EAAwB8L,GAAxB,EAA6B7L,KAA7B,CAAmC,OAAnC,EAA4CqvB,IAA5C,CAAiD,GAAjD,CAAN;CACA,QAAI,KAAKhvB,MAAL,GAAcwL,GAAlB,EAAuB6sH,OAAO,OAAP;CACxB;CACD,SAAO,aAAaA,GAAb,GAAmB,GAA1B;CACD,CARD;;CAUAsI,OAAOthI,SAAP,CAAiBkjI,OAAjB,GAA2B,SAASA,OAAT,CAAkB1iI,MAAlB,EAA0Bua,KAA1B,EAAiCC,GAAjC,EAAsCmpH,SAAtC,EAAiDC,OAAjD,EAA0D;CACnF,MAAI,CAACtB,iBAAiBtiI,MAAjB,CAAL,EAA+B;CAC7B,UAAM,IAAI0nH,SAAJ,CAAc,2BAAd,CAAN;CACD;;CAED,MAAIntG,UAAUrb,SAAd,EAAyB;CACvBqb,YAAQ,CAAR;CACD;CACD,MAAIC,QAAQtb,SAAZ,EAAuB;CACrBsb,UAAMxa,SAASA,OAAOG,MAAhB,GAAyB,CAA/B;CACD;CACD,MAAIwjI,cAAczkI,SAAlB,EAA6B;CAC3BykI,gBAAY,CAAZ;CACD;CACD,MAAIC,YAAY1kI,SAAhB,EAA2B;CACzB0kI,cAAU,KAAKzjI,MAAf;CACD;;CAED,MAAIoa,QAAQ,CAAR,IAAaC,MAAMxa,OAAOG,MAA1B,IAAoCwjI,YAAY,CAAhD,IAAqDC,UAAU,KAAKzjI,MAAxE,EAAgF;CAC9E,UAAM,IAAI8gI,UAAJ,CAAe,oBAAf,CAAN;CACD;;CAED,MAAI0C,aAAaC,OAAb,IAAwBrpH,SAASC,GAArC,EAA0C;CACxC,WAAO,CAAP;CACD;CACD,MAAImpH,aAAaC,OAAjB,EAA0B;CACxB,WAAO,CAAC,CAAR;CACD;CACD,MAAIrpH,SAASC,GAAb,EAAkB;CAChB,WAAO,CAAP;CACD;;CAEDD,aAAW,CAAX;CACAC,WAAS,CAAT;CACAmpH,iBAAe,CAAf;CACAC,eAAa,CAAb;;CAEA,MAAI,SAAS5jI,MAAb,EAAqB,OAAO,CAAP;;CAErB,MAAIV,IAAIskI,UAAUD,SAAlB;CACA,MAAIx2H,IAAIqN,MAAMD,KAAd;CACA,MAAIvH,MAAM7T,KAAKqL,GAAL,CAASlL,CAAT,EAAY6N,CAAZ,CAAV;;CAEA,MAAI02H,WAAW,KAAKr4H,KAAL,CAAWm4H,SAAX,EAAsBC,OAAtB,CAAf;CACA,MAAIE,aAAa9jI,OAAOwL,KAAP,CAAa+O,KAAb,EAAoBC,GAApB,CAAjB;;CAEA,OAAK,IAAIoB,IAAI,CAAb,EAAgBA,IAAI5I,GAApB,EAAyB,EAAE4I,CAA3B,EAA8B;CAC5B,QAAIioH,SAASjoH,CAAT,MAAgBkoH,WAAWloH,CAAX,CAApB,EAAmC;CACjCtc,UAAIukI,SAASjoH,CAAT,CAAJ;CACAzO,UAAI22H,WAAWloH,CAAX,CAAJ;CACA;CACD;CACF;;CAED,MAAItc,IAAI6N,CAAR,EAAW,OAAO,CAAC,CAAR;CACX,MAAIA,IAAI7N,CAAR,EAAW,OAAO,CAAP;CACX,SAAO,CAAP;CACD,CAzDD;;;;;;;;;;;CAoEA,SAASykI,oBAAT,CAA+BtkH,MAA/B,EAAuCi8G,GAAvC,EAA4C2G,UAA5C,EAAwDrkE,QAAxD,EAAkElrD,GAAlE,EAAuE;;CAErE,MAAI2M,OAAOtf,MAAP,KAAkB,CAAtB,EAAyB,OAAO,CAAC,CAAR;;;CAGzB,MAAI,OAAOkiI,UAAP,KAAsB,QAA1B,EAAoC;CAClCrkE,eAAWqkE,UAAX;CACAA,iBAAa,CAAb;CACD,GAHD,MAGO,IAAIA,aAAa,UAAjB,EAA6B;CAClCA,iBAAa,UAAb;CACD,GAFM,MAEA,IAAIA,aAAa,CAAC,UAAlB,EAA8B;CACnCA,iBAAa,CAAC,UAAd;CACD;CACDA,eAAa,CAACA,UAAd,CAbqE;CAcrE,MAAI53F,MAAM43F,UAAN,CAAJ,EAAuB;;CAErBA,iBAAavvH,MAAM,CAAN,GAAW2M,OAAOtf,MAAP,GAAgB,CAAxC;CACD;;;CAGD,MAAIkiI,aAAa,CAAjB,EAAoBA,aAAa5iH,OAAOtf,MAAP,GAAgBkiI,UAA7B;CACpB,MAAIA,cAAc5iH,OAAOtf,MAAzB,EAAiC;CAC/B,QAAI2S,GAAJ,EAAS,OAAO,CAAC,CAAR,CAAT,KACKuvH,aAAa5iH,OAAOtf,MAAP,GAAgB,CAA7B;CACN,GAHD,MAGO,IAAIkiI,aAAa,CAAjB,EAAoB;CACzB,QAAIvvH,GAAJ,EAASuvH,aAAa,CAAb,CAAT,KACK,OAAO,CAAC,CAAR;CACN;;;CAGD,MAAI,OAAO3G,GAAP,KAAe,QAAnB,EAA6B;CAC3BA,UAAMoF,OAAO1kF,IAAP,CAAYs/E,GAAZ,EAAiB19D,QAAjB,CAAN;CACD;;;CAGD,MAAIskE,iBAAiB5G,GAAjB,CAAJ,EAA2B;;CAEzB,QAAIA,IAAIv7H,MAAJ,KAAe,CAAnB,EAAsB;CACpB,aAAO,CAAC,CAAR;CACD;CACD,WAAO6jI,aAAavkH,MAAb,EAAqBi8G,GAArB,EAA0B2G,UAA1B,EAAsCrkE,QAAtC,EAAgDlrD,GAAhD,CAAP;CACD,GAND,MAMO,IAAI,OAAO4oH,GAAP,KAAe,QAAnB,EAA6B;CAClCA,UAAMA,MAAM,IAAZ,CADkC;CAElC,QAAIoF,OAAOC,mBAAP,IACA,OAAOxsE,WAAW/0D,SAAX,CAAqBs5B,OAA5B,KAAwC,UAD5C,EACwD;CACtD,UAAIhmB,GAAJ,EAAS;CACP,eAAOyhD,WAAW/0D,SAAX,CAAqBs5B,OAArB,CAA6Bx4B,IAA7B,CAAkCmf,MAAlC,EAA0Ci8G,GAA1C,EAA+C2G,UAA/C,CAAP;CACD,OAFD,MAEO;CACL,eAAO9tE,WAAW/0D,SAAX,CAAqBi3D,WAArB,CAAiCn2D,IAAjC,CAAsCmf,MAAtC,EAA8Ci8G,GAA9C,EAAmD2G,UAAnD,CAAP;CACD;CACF;CACD,WAAO2B,aAAavkH,MAAb,EAAqB,CAAEi8G,GAAF,CAArB,EAA8B2G,UAA9B,EAA0CrkE,QAA1C,EAAoDlrD,GAApD,CAAP;CACD;;CAED,QAAM,IAAI40G,SAAJ,CAAc,sCAAd,CAAN;CACD;;CAED,SAASsc,YAAT,CAAuBxZ,GAAvB,EAA4BkR,GAA5B,EAAiC2G,UAAjC,EAA6CrkE,QAA7C,EAAuDlrD,GAAvD,EAA4D;CAC1D,MAAImxH,YAAY,CAAhB;CACA,MAAIC,YAAY1Z,IAAIrqH,MAApB;CACA,MAAIgkI,YAAYzI,IAAIv7H,MAApB;;CAEA,MAAI69D,aAAa9+D,SAAjB,EAA4B;CAC1B8+D,eAAWkuC,OAAOluC,QAAP,EAAiBlf,WAAjB,EAAX;CACA,QAAIkf,aAAa,MAAb,IAAuBA,aAAa,OAApC,IACAA,aAAa,SADb,IAC0BA,aAAa,UAD3C,EACuD;CACrD,UAAIwsD,IAAIrqH,MAAJ,GAAa,CAAb,IAAkBu7H,IAAIv7H,MAAJ,GAAa,CAAnC,EAAsC;CACpC,eAAO,CAAC,CAAR;CACD;CACD8jI,kBAAY,CAAZ;CACAC,mBAAa,CAAb;CACAC,mBAAa,CAAb;CACA9B,oBAAc,CAAd;CACD;CACF;;CAED,WAASnC,IAAT,CAAeyC,GAAf,EAAoB/mH,CAApB,EAAuB;CACrB,QAAIqoH,cAAc,CAAlB,EAAqB;CACnB,aAAOtB,IAAI/mH,CAAJ,CAAP;CACD,KAFD,MAEO;CACL,aAAO+mH,IAAIyB,YAAJ,CAAiBxoH,IAAIqoH,SAArB,CAAP;CACD;CACF;;CAED,MAAIroH,CAAJ;CACA,MAAI9I,GAAJ,EAAS;CACP,QAAIuxH,aAAa,CAAC,CAAlB;CACA,SAAKzoH,IAAIymH,UAAT,EAAqBzmH,IAAIsoH,SAAzB,EAAoCtoH,GAApC,EAAyC;CACvC,UAAIskH,KAAK1V,GAAL,EAAU5uG,CAAV,MAAiBskH,KAAKxE,GAAL,EAAU2I,eAAe,CAAC,CAAhB,GAAoB,CAApB,GAAwBzoH,IAAIyoH,UAAtC,CAArB,EAAwE;CACtE,YAAIA,eAAe,CAAC,CAApB,EAAuBA,aAAazoH,CAAb;CACvB,YAAIA,IAAIyoH,UAAJ,GAAiB,CAAjB,KAAuBF,SAA3B,EAAsC,OAAOE,aAAaJ,SAApB;CACvC,OAHD,MAGO;CACL,YAAII,eAAe,CAAC,CAApB,EAAuBzoH,KAAKA,IAAIyoH,UAAT;CACvBA,qBAAa,CAAC,CAAd;CACD;CACF;CACF,GAXD,MAWO;CACL,QAAIhC,aAAa8B,SAAb,GAAyBD,SAA7B,EAAwC7B,aAAa6B,YAAYC,SAAzB;CACxC,SAAKvoH,IAAIymH,UAAT,EAAqBzmH,KAAK,CAA1B,EAA6BA,GAA7B,EAAkC;CAChC,UAAI0oH,QAAQ,IAAZ;CACA,WAAK,IAAI/kH,IAAI,CAAb,EAAgBA,IAAI4kH,SAApB,EAA+B5kH,GAA/B,EAAoC;CAClC,YAAI2gH,KAAK1V,GAAL,EAAU5uG,IAAI2D,CAAd,MAAqB2gH,KAAKxE,GAAL,EAAUn8G,CAAV,CAAzB,EAAuC;CACrC+kH,kBAAQ,KAAR;CACA;CACD;CACF;CACD,UAAIA,KAAJ,EAAW,OAAO1oH,CAAP;CACZ;CACF;;CAED,SAAO,CAAC,CAAR;CACD;;CAEDklH,OAAOthI,SAAP,CAAiB+kI,QAAjB,GAA4B,SAASA,QAAT,CAAmB7I,GAAnB,EAAwB2G,UAAxB,EAAoCrkE,QAApC,EAA8C;CACxE,SAAO,KAAKllC,OAAL,CAAa4iG,GAAb,EAAkB2G,UAAlB,EAA8BrkE,QAA9B,MAA4C,CAAC,CAApD;CACD,CAFD;;CAIA8iE,OAAOthI,SAAP,CAAiBs5B,OAAjB,GAA2B,SAASA,OAAT,CAAkB4iG,GAAlB,EAAuB2G,UAAvB,EAAmCrkE,QAAnC,EAA6C;CACtE,SAAO+lE,qBAAqB,IAArB,EAA2BrI,GAA3B,EAAgC2G,UAAhC,EAA4CrkE,QAA5C,EAAsD,IAAtD,CAAP;CACD,CAFD;;CAIA8iE,OAAOthI,SAAP,CAAiBi3D,WAAjB,GAA+B,SAASA,WAAT,CAAsBilE,GAAtB,EAA2B2G,UAA3B,EAAuCrkE,QAAvC,EAAiD;CAC9E,SAAO+lE,qBAAqB,IAArB,EAA2BrI,GAA3B,EAAgC2G,UAAhC,EAA4CrkE,QAA5C,EAAsD,KAAtD,CAAP;CACD,CAFD;;CAIA,SAASwmE,QAAT,CAAmB7B,GAAnB,EAAwB34H,MAAxB,EAAgCgD,MAAhC,EAAwC7M,MAAxC,EAAgD;CAC9C6M,WAAShO,OAAOgO,MAAP,KAAkB,CAA3B;CACA,MAAIy3H,YAAY9B,IAAIxiI,MAAJ,GAAa6M,MAA7B;CACA,MAAI,CAAC7M,MAAL,EAAa;CACXA,aAASskI,SAAT;CACD,GAFD,MAEO;CACLtkI,aAASnB,OAAOmB,MAAP,CAAT;CACA,QAAIA,SAASskI,SAAb,EAAwB;CACtBtkI,eAASskI,SAAT;CACD;CACF;;;CAGD,MAAIC,SAAS16H,OAAO7J,MAApB;CACA,MAAIukI,SAAS,CAAT,KAAe,CAAnB,EAAsB,MAAM,IAAIhd,SAAJ,CAAc,oBAAd,CAAN;;CAEtB,MAAIvnH,SAASukI,SAAS,CAAtB,EAAyB;CACvBvkI,aAASukI,SAAS,CAAlB;CACD;CACD,OAAK,IAAI9oH,IAAI,CAAb,EAAgBA,IAAIzb,MAApB,EAA4B,EAAEyb,CAA9B,EAAiC;CAC/B,QAAI+oH,SAASl6H,SAAST,OAAOizH,MAAP,CAAcrhH,IAAI,CAAlB,EAAqB,CAArB,CAAT,EAAkC,EAAlC,CAAb;CACA,QAAI6uB,MAAMk6F,MAAN,CAAJ,EAAmB,OAAO/oH,CAAP;CACnB+mH,QAAI31H,SAAS4O,CAAb,IAAkB+oH,MAAlB;CACD;CACD,SAAO/oH,CAAP;CACD;;CAED,SAASgpH,SAAT,CAAoBjC,GAApB,EAAyB34H,MAAzB,EAAiCgD,MAAjC,EAAyC7M,MAAzC,EAAiD;CAC/C,SAAO0kI,WAAWhC,YAAY74H,MAAZ,EAAoB24H,IAAIxiI,MAAJ,GAAa6M,MAAjC,CAAX,EAAqD21H,GAArD,EAA0D31H,MAA1D,EAAkE7M,MAAlE,CAAP;CACD;;CAED,SAAS2kI,UAAT,CAAqBnC,GAArB,EAA0B34H,MAA1B,EAAkCgD,MAAlC,EAA0C7M,MAA1C,EAAkD;CAChD,SAAO0kI,WAAWE,aAAa/6H,MAAb,CAAX,EAAiC24H,GAAjC,EAAsC31H,MAAtC,EAA8C7M,MAA9C,CAAP;CACD;;CAED,SAAS6kI,WAAT,CAAsBrC,GAAtB,EAA2B34H,MAA3B,EAAmCgD,MAAnC,EAA2C7M,MAA3C,EAAmD;CACjD,SAAO2kI,WAAWnC,GAAX,EAAgB34H,MAAhB,EAAwBgD,MAAxB,EAAgC7M,MAAhC,CAAP;CACD;;CAED,SAAS8kI,WAAT,CAAsBtC,GAAtB,EAA2B34H,MAA3B,EAAmCgD,MAAnC,EAA2C7M,MAA3C,EAAmD;CACjD,SAAO0kI,WAAW/B,cAAc94H,MAAd,CAAX,EAAkC24H,GAAlC,EAAuC31H,MAAvC,EAA+C7M,MAA/C,CAAP;CACD;;CAED,SAAS+kI,SAAT,CAAoBvC,GAApB,EAAyB34H,MAAzB,EAAiCgD,MAAjC,EAAyC7M,MAAzC,EAAiD;CAC/C,SAAO0kI,WAAWM,eAAen7H,MAAf,EAAuB24H,IAAIxiI,MAAJ,GAAa6M,MAApC,CAAX,EAAwD21H,GAAxD,EAA6D31H,MAA7D,EAAqE7M,MAArE,CAAP;CACD;;CAED2gI,OAAOthI,SAAP,CAAiBmhI,KAAjB,GAAyB,SAASA,KAAT,CAAgB32H,MAAhB,EAAwBgD,MAAxB,EAAgC7M,MAAhC,EAAwC69D,QAAxC,EAAkD;;CAEzE,MAAIhxD,WAAW9N,SAAf,EAA0B;CACxB8+D,eAAW,MAAX;CACA79D,aAAS,KAAKA,MAAd;CACA6M,aAAS,CAAT;;CAED,GALD,MAKO,IAAI7M,WAAWjB,SAAX,IAAwB,OAAO8N,MAAP,KAAkB,QAA9C,EAAwD;CAC7DgxD,eAAWhxD,MAAX;CACA7M,aAAS,KAAKA,MAAd;CACA6M,aAAS,CAAT;;CAED,GALM,MAKA,IAAI6G,SAAS7G,MAAT,CAAJ,EAAsB;CAC3BA,aAASA,SAAS,CAAlB;CACA,QAAI6G,SAAS1T,MAAT,CAAJ,EAAsB;CACpBA,eAASA,SAAS,CAAlB;CACA,UAAI69D,aAAa9+D,SAAjB,EAA4B8+D,WAAW,MAAX;CAC7B,KAHD,MAGO;CACLA,iBAAW79D,MAAX;CACAA,eAASjB,SAAT;CACD;;CAEF,GAVM,MAUA;CACL,UAAM,IAAI0pH,KAAJ,CACJ,yEADI,CAAN;CAGD;;CAED,MAAI6b,YAAY,KAAKtkI,MAAL,GAAc6M,MAA9B;CACA,MAAI7M,WAAWjB,SAAX,IAAwBiB,SAASskI,SAArC,EAAgDtkI,SAASskI,SAAT;;CAEhD,MAAKz6H,OAAO7J,MAAP,GAAgB,CAAhB,KAAsBA,SAAS,CAAT,IAAc6M,SAAS,CAA7C,CAAD,IAAqDA,SAAS,KAAK7M,MAAvE,EAA+E;CAC7E,UAAM,IAAI8gI,UAAJ,CAAe,wCAAf,CAAN;CACD;;CAED,MAAI,CAACjjE,QAAL,EAAeA,WAAW,MAAX;;CAEf,MAAI4kE,cAAc,KAAlB;CACA,WAAS;CACP,YAAQ5kE,QAAR;CACE,WAAK,KAAL;CACE,eAAOwmE,SAAS,IAAT,EAAex6H,MAAf,EAAuBgD,MAAvB,EAA+B7M,MAA/B,CAAP;;CAEF,WAAK,MAAL;CACA,WAAK,OAAL;CACE,eAAOykI,UAAU,IAAV,EAAgB56H,MAAhB,EAAwBgD,MAAxB,EAAgC7M,MAAhC,CAAP;;CAEF,WAAK,OAAL;CACE,eAAO2kI,WAAW,IAAX,EAAiB96H,MAAjB,EAAyBgD,MAAzB,EAAiC7M,MAAjC,CAAP;;CAEF,WAAK,QAAL;CACA,WAAK,QAAL;CACE,eAAO6kI,YAAY,IAAZ,EAAkBh7H,MAAlB,EAA0BgD,MAA1B,EAAkC7M,MAAlC,CAAP;;CAEF,WAAK,QAAL;;CAEE,eAAO8kI,YAAY,IAAZ,EAAkBj7H,MAAlB,EAA0BgD,MAA1B,EAAkC7M,MAAlC,CAAP;;CAEF,WAAK,MAAL;CACA,WAAK,OAAL;CACA,WAAK,SAAL;CACA,WAAK,UAAL;CACE,eAAO+kI,UAAU,IAAV,EAAgBl7H,MAAhB,EAAwBgD,MAAxB,EAAgC7M,MAAhC,CAAP;;CAEF;CACE,YAAIyiI,WAAJ,EAAiB,MAAM,IAAIlb,SAAJ,CAAc,uBAAuB1pD,QAArC,CAAN;CACjBA,mBAAW,CAAC,KAAKA,QAAN,EAAgBlf,WAAhB,EAAX;CACA8jF,sBAAc,IAAd;CA5BJ;CA8BD;CACF,CAtED;;CAwEA9B,OAAOthI,SAAP,CAAiBg/B,MAAjB,GAA0B,SAASA,MAAT,GAAmB;CAC3C,SAAO;CACL9F,UAAM,QADD;CAEL8G,UAAMlE,MAAM97B,SAAN,CAAgBgM,KAAhB,CAAsBlL,IAAtB,CAA2B,KAAK8kI,IAAL,IAAa,IAAxC,EAA8C,CAA9C;CAFD,GAAP;CAID,CALD;;CAOA,SAAShC,WAAT,CAAsBT,GAAtB,EAA2BpoH,KAA3B,EAAkCC,GAAlC,EAAuC;CACrC,MAAID,UAAU,CAAV,IAAeC,QAAQmoH,IAAIxiI,MAA/B,EAAuC;CACrC,WAAOklI,aAAA,CAAqB1C,GAArB,CAAP;CACD,GAFD,MAEO;CACL,WAAO0C,aAAA,CAAqB1C,IAAIn3H,KAAJ,CAAU+O,KAAV,EAAiBC,GAAjB,CAArB,CAAP;CACD;CACF;;CAED,SAASyoH,SAAT,CAAoBN,GAApB,EAAyBpoH,KAAzB,EAAgCC,GAAhC,EAAqC;CACnCA,QAAMrb,KAAKqL,GAAL,CAASm4H,IAAIxiI,MAAb,EAAqBqa,GAArB,CAAN;CACA,MAAI8qH,MAAM,EAAV;;CAEA,MAAI1pH,IAAIrB,KAAR;CACA,SAAOqB,IAAIpB,GAAX,EAAgB;CACd,QAAI+qH,YAAY5C,IAAI/mH,CAAJ,CAAhB;CACA,QAAI4pH,YAAY,IAAhB;CACA,QAAIC,mBAAoBF,YAAY,IAAb,GAAqB,CAArB,GAClBA,YAAY,IAAb,GAAqB,CAArB,GACCA,YAAY,IAAb,GAAqB,CAArB,GACA,CAHJ;;CAKA,QAAI3pH,IAAI6pH,gBAAJ,IAAwBjrH,GAA5B,EAAiC;CAC/B,UAAIkrH,UAAJ,EAAgBC,SAAhB,EAA2BC,UAA3B,EAAuCC,aAAvC;;CAEA,cAAQJ,gBAAR;CACE,aAAK,CAAL;CACE,cAAIF,YAAY,IAAhB,EAAsB;CACpBC,wBAAYD,SAAZ;CACD;CACD;CACF,aAAK,CAAL;CACEG,uBAAa/C,IAAI/mH,IAAI,CAAR,CAAb;CACA,cAAI,CAAC8pH,aAAa,IAAd,MAAwB,IAA5B,EAAkC;CAChCG,4BAAgB,CAACN,YAAY,IAAb,KAAsB,GAAtB,GAA6BG,aAAa,IAA1D;CACA,gBAAIG,gBAAgB,IAApB,EAA0B;CACxBL,0BAAYK,aAAZ;CACD;CACF;CACD;CACF,aAAK,CAAL;CACEH,uBAAa/C,IAAI/mH,IAAI,CAAR,CAAb;CACA+pH,sBAAYhD,IAAI/mH,IAAI,CAAR,CAAZ;CACA,cAAI,CAAC8pH,aAAa,IAAd,MAAwB,IAAxB,IAAgC,CAACC,YAAY,IAAb,MAAuB,IAA3D,EAAiE;CAC/DE,4BAAgB,CAACN,YAAY,GAAb,KAAqB,GAArB,GAA2B,CAACG,aAAa,IAAd,KAAuB,GAAlD,GAAyDC,YAAY,IAArF;CACA,gBAAIE,gBAAgB,KAAhB,KAA0BA,gBAAgB,MAAhB,IAA0BA,gBAAgB,MAApE,CAAJ,EAAiF;CAC/EL,0BAAYK,aAAZ;CACD;CACF;CACD;CACF,aAAK,CAAL;CACEH,uBAAa/C,IAAI/mH,IAAI,CAAR,CAAb;CACA+pH,sBAAYhD,IAAI/mH,IAAI,CAAR,CAAZ;CACAgqH,uBAAajD,IAAI/mH,IAAI,CAAR,CAAb;CACA,cAAI,CAAC8pH,aAAa,IAAd,MAAwB,IAAxB,IAAgC,CAACC,YAAY,IAAb,MAAuB,IAAvD,IAA+D,CAACC,aAAa,IAAd,MAAwB,IAA3F,EAAiG;CAC/FC,4BAAgB,CAACN,YAAY,GAAb,KAAqB,IAArB,GAA4B,CAACG,aAAa,IAAd,KAAuB,GAAnD,GAAyD,CAACC,YAAY,IAAb,KAAsB,GAA/E,GAAsFC,aAAa,IAAnH;CACA,gBAAIC,gBAAgB,MAAhB,IAA0BA,gBAAgB,QAA9C,EAAwD;CACtDL,0BAAYK,aAAZ;CACD;CACF;CAlCL;CAoCD;;CAED,QAAIL,cAAc,IAAlB,EAAwB;;;CAGtBA,kBAAY,MAAZ;CACAC,yBAAmB,CAAnB;CACD,KALD,MAKO,IAAID,YAAY,MAAhB,EAAwB;;CAE7BA,mBAAa,OAAb;CACAF,UAAI1yG,IAAJ,CAAS4yG,cAAc,EAAd,GAAmB,KAAnB,GAA2B,MAApC;CACAA,kBAAY,SAASA,YAAY,KAAjC;CACD;;CAEDF,QAAI1yG,IAAJ,CAAS4yG,SAAT;CACA5pH,SAAK6pH,gBAAL;CACD;;CAED,SAAOK,sBAAsBR,GAAtB,CAAP;CACD;;;;;CAKD,IAAIS,uBAAuB,MAA3B;;CAEA,SAASD,qBAAT,CAAgCE,UAAhC,EAA4C;CAC1C,MAAIhzH,MAAMgzH,WAAW7lI,MAArB;CACA,MAAI6S,OAAO+yH,oBAAX,EAAiC;CAC/B,WAAO75B,OAAO+5B,YAAP,CAAoBjvF,KAApB,CAA0Bk1D,MAA1B,EAAkC85B,UAAlC,CAAP,CAD+B;CAEhC;;;CAGD,MAAIV,MAAM,EAAV;CACA,MAAI1pH,IAAI,CAAR;CACA,SAAOA,IAAI5I,GAAX,EAAgB;CACdsyH,WAAOp5B,OAAO+5B,YAAP,CAAoBjvF,KAApB,CACLk1D,MADK,EAEL85B,WAAWx6H,KAAX,CAAiBoQ,CAAjB,EAAoBA,KAAKmqH,oBAAzB,CAFK,CAAP;CAID;CACD,SAAOT,GAAP;CACD;;CAED,SAASpC,UAAT,CAAqBP,GAArB,EAA0BpoH,KAA1B,EAAiCC,GAAjC,EAAsC;CACpC,MAAI6xF,MAAM,EAAV;CACA7xF,QAAMrb,KAAKqL,GAAL,CAASm4H,IAAIxiI,MAAb,EAAqBqa,GAArB,CAAN;;CAEA,OAAK,IAAIoB,IAAIrB,KAAb,EAAoBqB,IAAIpB,GAAxB,EAA6B,EAAEoB,CAA/B,EAAkC;CAChCywF,WAAOH,OAAO+5B,YAAP,CAAoBtD,IAAI/mH,CAAJ,IAAS,IAA7B,CAAP;CACD;CACD,SAAOywF,GAAP;CACD;;CAED,SAAS82B,WAAT,CAAsBR,GAAtB,EAA2BpoH,KAA3B,EAAkCC,GAAlC,EAAuC;CACrC,MAAI6xF,MAAM,EAAV;CACA7xF,QAAMrb,KAAKqL,GAAL,CAASm4H,IAAIxiI,MAAb,EAAqBqa,GAArB,CAAN;;CAEA,OAAK,IAAIoB,IAAIrB,KAAb,EAAoBqB,IAAIpB,GAAxB,EAA6B,EAAEoB,CAA/B,EAAkC;CAChCywF,WAAOH,OAAO+5B,YAAP,CAAoBtD,IAAI/mH,CAAJ,CAApB,CAAP;CACD;CACD,SAAOywF,GAAP;CACD;;CAED,SAAS22B,QAAT,CAAmBL,GAAnB,EAAwBpoH,KAAxB,EAA+BC,GAA/B,EAAoC;CAClC,MAAIxH,MAAM2vH,IAAIxiI,MAAd;;CAEA,MAAI,CAACoa,KAAD,IAAUA,QAAQ,CAAtB,EAAyBA,QAAQ,CAAR;CACzB,MAAI,CAACC,GAAD,IAAQA,MAAM,CAAd,IAAmBA,MAAMxH,GAA7B,EAAkCwH,MAAMxH,GAAN;;CAElC,MAAIkzH,MAAM,EAAV;CACA,OAAK,IAAItqH,IAAIrB,KAAb,EAAoBqB,IAAIpB,GAAxB,EAA6B,EAAEoB,CAA/B,EAAkC;CAChCsqH,WAAOC,MAAMxD,IAAI/mH,CAAJ,CAAN,CAAP;CACD;CACD,SAAOsqH,GAAP;CACD;;CAED,SAAS7C,YAAT,CAAuBV,GAAvB,EAA4BpoH,KAA5B,EAAmCC,GAAnC,EAAwC;CACtC,MAAI4rH,QAAQzD,IAAIn3H,KAAJ,CAAU+O,KAAV,EAAiBC,GAAjB,CAAZ;CACA,MAAI8qH,MAAM,EAAV;CACA,OAAK,IAAI1pH,IAAI,CAAb,EAAgBA,IAAIwqH,MAAMjmI,MAA1B,EAAkCyb,KAAK,CAAvC,EAA0C;CACxC0pH,WAAOp5B,OAAO+5B,YAAP,CAAoBG,MAAMxqH,CAAN,IAAWwqH,MAAMxqH,IAAI,CAAV,IAAe,GAA9C,CAAP;CACD;CACD,SAAO0pH,GAAP;CACD;;CAEDxE,OAAOthI,SAAP,CAAiBgM,KAAjB,GAAyB,SAASA,KAAT,CAAgB+O,KAAhB,EAAuBC,GAAvB,EAA4B;CACnD,MAAIxH,MAAM,KAAK7S,MAAf;CACAoa,UAAQ,CAAC,CAACA,KAAV;CACAC,QAAMA,QAAQtb,SAAR,GAAoB8T,GAApB,GAA0B,CAAC,CAACwH,GAAlC;;CAEA,MAAID,QAAQ,CAAZ,EAAe;CACbA,aAASvH,GAAT;CACA,QAAIuH,QAAQ,CAAZ,EAAeA,QAAQ,CAAR;CAChB,GAHD,MAGO,IAAIA,QAAQvH,GAAZ,EAAiB;CACtBuH,YAAQvH,GAAR;CACD;;CAED,MAAIwH,MAAM,CAAV,EAAa;CACXA,WAAOxH,GAAP;CACA,QAAIwH,MAAM,CAAV,EAAaA,MAAM,CAAN;CACd,GAHD,MAGO,IAAIA,MAAMxH,GAAV,EAAe;CACpBwH,UAAMxH,GAAN;CACD;;CAED,MAAIwH,MAAMD,KAAV,EAAiBC,MAAMD,KAAN;;CAEjB,MAAI8rH,MAAJ;CACA,MAAIvF,OAAOC,mBAAX,EAAgC;CAC9BsF,aAAS,KAAK9pF,QAAL,CAAchiC,KAAd,EAAqBC,GAArB,CAAT;CACA6rH,WAAOnF,SAAP,GAAmBJ,OAAOthI,SAA1B;CACD,GAHD,MAGO;CACL,QAAI8mI,WAAW9rH,MAAMD,KAArB;CACA8rH,aAAS,IAAIvF,MAAJ,CAAWwF,QAAX,EAAqBpnI,SAArB,CAAT;CACA,SAAK,IAAI0c,IAAI,CAAb,EAAgBA,IAAI0qH,QAApB,EAA8B,EAAE1qH,CAAhC,EAAmC;CACjCyqH,aAAOzqH,CAAP,IAAY,KAAKA,IAAIrB,KAAT,CAAZ;CACD;CACF;;CAED,SAAO8rH,MAAP;CACD,CAlCD;;;;;CAuCA,SAASE,WAAT,CAAsBv5H,MAAtB,EAA8Bw5H,GAA9B,EAAmCrmI,MAAnC,EAA2C;CACzC,MAAK6M,SAAS,CAAV,KAAiB,CAAjB,IAAsBA,SAAS,CAAnC,EAAsC,MAAM,IAAIi0H,UAAJ,CAAe,oBAAf,CAAN;CACtC,MAAIj0H,SAASw5H,GAAT,GAAermI,MAAnB,EAA2B,MAAM,IAAI8gI,UAAJ,CAAe,uCAAf,CAAN;CAC5B;;CAEDH,OAAOthI,SAAP,CAAiBinI,UAAjB,GAA8B,SAASA,UAAT,CAAqBz5H,MAArB,EAA6Bk1H,UAA7B,EAAyCwE,QAAzC,EAAmD;CAC/E15H,WAASA,SAAS,CAAlB;CACAk1H,eAAaA,aAAa,CAA1B;CACA,MAAI,CAACwE,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoBk1H,UAApB,EAAgC,KAAK/hI,MAArC;;CAEf,MAAIu7H,MAAM,KAAK1uH,MAAL,CAAV;CACA,MAAI25H,MAAM,CAAV;CACA,MAAI/qH,IAAI,CAAR;CACA,SAAO,EAAEA,CAAF,GAAMsmH,UAAN,KAAqByE,OAAO,KAA5B,CAAP,EAA2C;CACzCjL,WAAO,KAAK1uH,SAAS4O,CAAd,IAAmB+qH,GAA1B;CACD;;CAED,SAAOjL,GAAP;CACD,CAbD;;CAeAoF,OAAOthI,SAAP,CAAiBonI,UAAjB,GAA8B,SAASA,UAAT,CAAqB55H,MAArB,EAA6Bk1H,UAA7B,EAAyCwE,QAAzC,EAAmD;CAC/E15H,WAASA,SAAS,CAAlB;CACAk1H,eAAaA,aAAa,CAA1B;CACA,MAAI,CAACwE,QAAL,EAAe;CACbH,gBAAYv5H,MAAZ,EAAoBk1H,UAApB,EAAgC,KAAK/hI,MAArC;CACD;;CAED,MAAIu7H,MAAM,KAAK1uH,SAAS,EAAEk1H,UAAhB,CAAV;CACA,MAAIyE,MAAM,CAAV;CACA,SAAOzE,aAAa,CAAb,KAAmByE,OAAO,KAA1B,CAAP,EAAyC;CACvCjL,WAAO,KAAK1uH,SAAS,EAAEk1H,UAAhB,IAA8ByE,GAArC;CACD;;CAED,SAAOjL,GAAP;CACD,CAdD;;CAgBAoF,OAAOthI,SAAP,CAAiBqnI,SAAjB,GAA6B,SAASA,SAAT,CAAoB75H,MAApB,EAA4B05H,QAA5B,EAAsC;CACjE,MAAI,CAACA,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoB,CAApB,EAAuB,KAAK7M,MAA5B;CACf,SAAO,KAAK6M,MAAL,CAAP;CACD,CAHD;;CAKA8zH,OAAOthI,SAAP,CAAiBsnI,YAAjB,GAAgC,SAASA,YAAT,CAAuB95H,MAAvB,EAA+B05H,QAA/B,EAAyC;CACvE,MAAI,CAACA,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoB,CAApB,EAAuB,KAAK7M,MAA5B;CACf,SAAO,KAAK6M,MAAL,IAAgB,KAAKA,SAAS,CAAd,KAAoB,CAA3C;CACD,CAHD;;CAKA8zH,OAAOthI,SAAP,CAAiB4kI,YAAjB,GAAgC,SAASA,YAAT,CAAuBp3H,MAAvB,EAA+B05H,QAA/B,EAAyC;CACvE,MAAI,CAACA,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoB,CAApB,EAAuB,KAAK7M,MAA5B;CACf,SAAQ,KAAK6M,MAAL,KAAgB,CAAjB,GAAsB,KAAKA,SAAS,CAAd,CAA7B;CACD,CAHD;;CAKA8zH,OAAOthI,SAAP,CAAiBunI,YAAjB,GAAgC,SAASA,YAAT,CAAuB/5H,MAAvB,EAA+B05H,QAA/B,EAAyC;CACvE,MAAI,CAACA,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoB,CAApB,EAAuB,KAAK7M,MAA5B;;CAEf,SAAO,CAAE,KAAK6M,MAAL,CAAD,GACH,KAAKA,SAAS,CAAd,KAAoB,CADjB,GAEH,KAAKA,SAAS,CAAd,KAAoB,EAFlB,IAGF,KAAKA,SAAS,CAAd,IAAmB,SAHxB;CAID,CAPD;;CASA8zH,OAAOthI,SAAP,CAAiBwnI,YAAjB,GAAgC,SAASA,YAAT,CAAuBh6H,MAAvB,EAA+B05H,QAA/B,EAAyC;CACvE,MAAI,CAACA,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoB,CAApB,EAAuB,KAAK7M,MAA5B;;CAEf,SAAQ,KAAK6M,MAAL,IAAe,SAAhB,IACH,KAAKA,SAAS,CAAd,KAAoB,EAArB,GACA,KAAKA,SAAS,CAAd,KAAoB,CADpB,GAED,KAAKA,SAAS,CAAd,CAHK,CAAP;CAID,CAPD;;CASA8zH,OAAOthI,SAAP,CAAiBynI,SAAjB,GAA6B,SAASA,SAAT,CAAoBj6H,MAApB,EAA4Bk1H,UAA5B,EAAwCwE,QAAxC,EAAkD;CAC7E15H,WAASA,SAAS,CAAlB;CACAk1H,eAAaA,aAAa,CAA1B;CACA,MAAI,CAACwE,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoBk1H,UAApB,EAAgC,KAAK/hI,MAArC;;CAEf,MAAIu7H,MAAM,KAAK1uH,MAAL,CAAV;CACA,MAAI25H,MAAM,CAAV;CACA,MAAI/qH,IAAI,CAAR;CACA,SAAO,EAAEA,CAAF,GAAMsmH,UAAN,KAAqByE,OAAO,KAA5B,CAAP,EAA2C;CACzCjL,WAAO,KAAK1uH,SAAS4O,CAAd,IAAmB+qH,GAA1B;CACD;CACDA,SAAO,IAAP;;CAEA,MAAIjL,OAAOiL,GAAX,EAAgBjL,OAAOv8H,KAAKC,GAAL,CAAS,CAAT,EAAY,IAAI8iI,UAAhB,CAAP;;CAEhB,SAAOxG,GAAP;CACD,CAhBD;;CAkBAoF,OAAOthI,SAAP,CAAiB0nI,SAAjB,GAA6B,SAASA,SAAT,CAAoBl6H,MAApB,EAA4Bk1H,UAA5B,EAAwCwE,QAAxC,EAAkD;CAC7E15H,WAASA,SAAS,CAAlB;CACAk1H,eAAaA,aAAa,CAA1B;CACA,MAAI,CAACwE,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoBk1H,UAApB,EAAgC,KAAK/hI,MAArC;;CAEf,MAAIyb,IAAIsmH,UAAR;CACA,MAAIyE,MAAM,CAAV;CACA,MAAIjL,MAAM,KAAK1uH,SAAS,EAAE4O,CAAhB,CAAV;CACA,SAAOA,IAAI,CAAJ,KAAU+qH,OAAO,KAAjB,CAAP,EAAgC;CAC9BjL,WAAO,KAAK1uH,SAAS,EAAE4O,CAAhB,IAAqB+qH,GAA5B;CACD;CACDA,SAAO,IAAP;;CAEA,MAAIjL,OAAOiL,GAAX,EAAgBjL,OAAOv8H,KAAKC,GAAL,CAAS,CAAT,EAAY,IAAI8iI,UAAhB,CAAP;;CAEhB,SAAOxG,GAAP;CACD,CAhBD;;CAkBAoF,OAAOthI,SAAP,CAAiB2nI,QAAjB,GAA4B,SAASA,QAAT,CAAmBn6H,MAAnB,EAA2B05H,QAA3B,EAAqC;CAC/D,MAAI,CAACA,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoB,CAApB,EAAuB,KAAK7M,MAA5B;CACf,MAAI,EAAE,KAAK6M,MAAL,IAAe,IAAjB,CAAJ,EAA4B,OAAQ,KAAKA,MAAL,CAAR;CAC5B,SAAQ,CAAC,OAAO,KAAKA,MAAL,CAAP,GAAsB,CAAvB,IAA4B,CAAC,CAArC;CACD,CAJD;;CAMA8zH,OAAOthI,SAAP,CAAiB4nI,WAAjB,GAA+B,SAASA,WAAT,CAAsBp6H,MAAtB,EAA8B05H,QAA9B,EAAwC;CACrE,MAAI,CAACA,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoB,CAApB,EAAuB,KAAK7M,MAA5B;CACf,MAAIu7H,MAAM,KAAK1uH,MAAL,IAAgB,KAAKA,SAAS,CAAd,KAAoB,CAA9C;CACA,SAAQ0uH,MAAM,MAAP,GAAiBA,MAAM,UAAvB,GAAoCA,GAA3C;CACD,CAJD;;CAMAoF,OAAOthI,SAAP,CAAiB6nI,WAAjB,GAA+B,SAASA,WAAT,CAAsBr6H,MAAtB,EAA8B05H,QAA9B,EAAwC;CACrE,MAAI,CAACA,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoB,CAApB,EAAuB,KAAK7M,MAA5B;CACf,MAAIu7H,MAAM,KAAK1uH,SAAS,CAAd,IAAoB,KAAKA,MAAL,KAAgB,CAA9C;CACA,SAAQ0uH,MAAM,MAAP,GAAiBA,MAAM,UAAvB,GAAoCA,GAA3C;CACD,CAJD;;CAMAoF,OAAOthI,SAAP,CAAiB8nI,WAAjB,GAA+B,SAASA,WAAT,CAAsBt6H,MAAtB,EAA8B05H,QAA9B,EAAwC;CACrE,MAAI,CAACA,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoB,CAApB,EAAuB,KAAK7M,MAA5B;;CAEf,SAAQ,KAAK6M,MAAL,CAAD,GACJ,KAAKA,SAAS,CAAd,KAAoB,CADhB,GAEJ,KAAKA,SAAS,CAAd,KAAoB,EAFhB,GAGJ,KAAKA,SAAS,CAAd,KAAoB,EAHvB;CAID,CAPD;;CASA8zH,OAAOthI,SAAP,CAAiB+nI,WAAjB,GAA+B,SAASA,WAAT,CAAsBv6H,MAAtB,EAA8B05H,QAA9B,EAAwC;CACrE,MAAI,CAACA,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoB,CAApB,EAAuB,KAAK7M,MAA5B;;CAEf,SAAQ,KAAK6M,MAAL,KAAgB,EAAjB,GACJ,KAAKA,SAAS,CAAd,KAAoB,EADhB,GAEJ,KAAKA,SAAS,CAAd,KAAoB,CAFhB,GAGJ,KAAKA,SAAS,CAAd,CAHH;CAID,CAPD;;CASA8zH,OAAOthI,SAAP,CAAiBgoI,WAAjB,GAA+B,SAASA,WAAT,CAAsBx6H,MAAtB,EAA8B05H,QAA9B,EAAwC;CACrE,MAAI,CAACA,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoB,CAApB,EAAuB,KAAK7M,MAA5B;CACf,SAAOsnI,IAAA,CAAa,IAAb,EAAmBz6H,MAAnB,EAA2B,IAA3B,EAAiC,EAAjC,EAAqC,CAArC,CAAP;CACD,CAHD;;CAKA8zH,OAAOthI,SAAP,CAAiBkoI,WAAjB,GAA+B,SAASA,WAAT,CAAsB16H,MAAtB,EAA8B05H,QAA9B,EAAwC;CACrE,MAAI,CAACA,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoB,CAApB,EAAuB,KAAK7M,MAA5B;CACf,SAAOsnI,IAAA,CAAa,IAAb,EAAmBz6H,MAAnB,EAA2B,KAA3B,EAAkC,EAAlC,EAAsC,CAAtC,CAAP;CACD,CAHD;;CAKA8zH,OAAOthI,SAAP,CAAiBmoI,YAAjB,GAAgC,SAASA,YAAT,CAAuB36H,MAAvB,EAA+B05H,QAA/B,EAAyC;CACvE,MAAI,CAACA,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoB,CAApB,EAAuB,KAAK7M,MAA5B;CACf,SAAOsnI,IAAA,CAAa,IAAb,EAAmBz6H,MAAnB,EAA2B,IAA3B,EAAiC,EAAjC,EAAqC,CAArC,CAAP;CACD,CAHD;;CAKA8zH,OAAOthI,SAAP,CAAiBooI,YAAjB,GAAgC,SAASA,YAAT,CAAuB56H,MAAvB,EAA+B05H,QAA/B,EAAyC;CACvE,MAAI,CAACA,QAAL,EAAeH,YAAYv5H,MAAZ,EAAoB,CAApB,EAAuB,KAAK7M,MAA5B;CACf,SAAOsnI,IAAA,CAAa,IAAb,EAAmBz6H,MAAnB,EAA2B,KAA3B,EAAkC,EAAlC,EAAsC,CAAtC,CAAP;CACD,CAHD;;CAKA,SAAS66H,QAAT,CAAmBlF,GAAnB,EAAwB95H,KAAxB,EAA+BmE,MAA/B,EAAuCw5H,GAAvC,EAA4C76H,GAA5C,EAAiDnB,GAAjD,EAAsD;CACpD,MAAI,CAAC83H,iBAAiBK,GAAjB,CAAL,EAA4B,MAAM,IAAIjb,SAAJ,CAAc,6CAAd,CAAN;CAC5B,MAAI7+G,QAAQ8C,GAAR,IAAe9C,QAAQ2B,GAA3B,EAAgC,MAAM,IAAIy2H,UAAJ,CAAe,mCAAf,CAAN;CAChC,MAAIj0H,SAASw5H,GAAT,GAAe7D,IAAIxiI,MAAvB,EAA+B,MAAM,IAAI8gI,UAAJ,CAAe,oBAAf,CAAN;CAChC;;CAEDH,OAAOthI,SAAP,CAAiBsoI,WAAjB,GAA+B,SAASA,WAAT,CAAsBj/H,KAAtB,EAA6BmE,MAA7B,EAAqCk1H,UAArC,EAAiDwE,QAAjD,EAA2D;CACxF79H,UAAQ,CAACA,KAAT;CACAmE,WAASA,SAAS,CAAlB;CACAk1H,eAAaA,aAAa,CAA1B;CACA,MAAI,CAACwE,QAAL,EAAe;CACb,QAAIqB,WAAW5oI,KAAKC,GAAL,CAAS,CAAT,EAAY,IAAI8iI,UAAhB,IAA8B,CAA7C;CACA2F,aAAS,IAAT,EAAeh/H,KAAf,EAAsBmE,MAAtB,EAA8Bk1H,UAA9B,EAA0C6F,QAA1C,EAAoD,CAApD;CACD;;CAED,MAAIpB,MAAM,CAAV;CACA,MAAI/qH,IAAI,CAAR;CACA,OAAK5O,MAAL,IAAenE,QAAQ,IAAvB;CACA,SAAO,EAAE+S,CAAF,GAAMsmH,UAAN,KAAqByE,OAAO,KAA5B,CAAP,EAA2C;CACzC,SAAK35H,SAAS4O,CAAd,IAAoB/S,QAAQ89H,GAAT,GAAgB,IAAnC;CACD;;CAED,SAAO35H,SAASk1H,UAAhB;CACD,CAjBD;;CAmBApB,OAAOthI,SAAP,CAAiBwoI,WAAjB,GAA+B,SAASA,WAAT,CAAsBn/H,KAAtB,EAA6BmE,MAA7B,EAAqCk1H,UAArC,EAAiDwE,QAAjD,EAA2D;CACxF79H,UAAQ,CAACA,KAAT;CACAmE,WAASA,SAAS,CAAlB;CACAk1H,eAAaA,aAAa,CAA1B;CACA,MAAI,CAACwE,QAAL,EAAe;CACb,QAAIqB,WAAW5oI,KAAKC,GAAL,CAAS,CAAT,EAAY,IAAI8iI,UAAhB,IAA8B,CAA7C;CACA2F,aAAS,IAAT,EAAeh/H,KAAf,EAAsBmE,MAAtB,EAA8Bk1H,UAA9B,EAA0C6F,QAA1C,EAAoD,CAApD;CACD;;CAED,MAAInsH,IAAIsmH,aAAa,CAArB;CACA,MAAIyE,MAAM,CAAV;CACA,OAAK35H,SAAS4O,CAAd,IAAmB/S,QAAQ,IAA3B;CACA,SAAO,EAAE+S,CAAF,IAAO,CAAP,KAAa+qH,OAAO,KAApB,CAAP,EAAmC;CACjC,SAAK35H,SAAS4O,CAAd,IAAoB/S,QAAQ89H,GAAT,GAAgB,IAAnC;CACD;;CAED,SAAO35H,SAASk1H,UAAhB;CACD,CAjBD;;CAmBApB,OAAOthI,SAAP,CAAiByoI,UAAjB,GAA8B,SAASA,UAAT,CAAqBp/H,KAArB,EAA4BmE,MAA5B,EAAoC05H,QAApC,EAA8C;CAC1E79H,UAAQ,CAACA,KAAT;CACAmE,WAASA,SAAS,CAAlB;CACA,MAAI,CAAC05H,QAAL,EAAemB,SAAS,IAAT,EAAeh/H,KAAf,EAAsBmE,MAAtB,EAA8B,CAA9B,EAAiC,IAAjC,EAAuC,CAAvC;CACf,MAAI,CAAC8zH,OAAOC,mBAAZ,EAAiCl4H,QAAQ1J,KAAKiK,KAAL,CAAWP,KAAX,CAAR;CACjC,OAAKmE,MAAL,IAAgBnE,QAAQ,IAAxB;CACA,SAAOmE,SAAS,CAAhB;CACD,CAPD;;CASA,SAASk7H,iBAAT,CAA4BvF,GAA5B,EAAiC95H,KAAjC,EAAwCmE,MAAxC,EAAgDm7H,YAAhD,EAA8D;CAC5D,MAAIt/H,QAAQ,CAAZ,EAAeA,QAAQ,SAASA,KAAT,GAAiB,CAAzB;CACf,OAAK,IAAI+S,IAAI,CAAR,EAAW2D,IAAIpgB,KAAKqL,GAAL,CAASm4H,IAAIxiI,MAAJ,GAAa6M,MAAtB,EAA8B,CAA9B,CAApB,EAAsD4O,IAAI2D,CAA1D,EAA6D,EAAE3D,CAA/D,EAAkE;CAChE+mH,QAAI31H,SAAS4O,CAAb,IAAkB,CAAC/S,QAAS,QAAS,KAAKs/H,eAAevsH,CAAf,GAAmB,IAAIA,CAA5B,CAAnB,MAChB,CAACusH,eAAevsH,CAAf,GAAmB,IAAIA,CAAxB,IAA6B,CAD/B;CAED;CACF;;CAEDklH,OAAOthI,SAAP,CAAiB4oI,aAAjB,GAAiC,SAASA,aAAT,CAAwBv/H,KAAxB,EAA+BmE,MAA/B,EAAuC05H,QAAvC,EAAiD;CAChF79H,UAAQ,CAACA,KAAT;CACAmE,WAASA,SAAS,CAAlB;CACA,MAAI,CAAC05H,QAAL,EAAemB,SAAS,IAAT,EAAeh/H,KAAf,EAAsBmE,MAAtB,EAA8B,CAA9B,EAAiC,MAAjC,EAAyC,CAAzC;CACf,MAAI8zH,OAAOC,mBAAX,EAAgC;CAC9B,SAAK/zH,MAAL,IAAgBnE,QAAQ,IAAxB;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,UAAU,CAA9B;CACD,GAHD,MAGO;CACLq/H,sBAAkB,IAAlB,EAAwBr/H,KAAxB,EAA+BmE,MAA/B,EAAuC,IAAvC;CACD;CACD,SAAOA,SAAS,CAAhB;CACD,CAXD;;CAaA8zH,OAAOthI,SAAP,CAAiB6oI,aAAjB,GAAiC,SAASA,aAAT,CAAwBx/H,KAAxB,EAA+BmE,MAA/B,EAAuC05H,QAAvC,EAAiD;CAChF79H,UAAQ,CAACA,KAAT;CACAmE,WAASA,SAAS,CAAlB;CACA,MAAI,CAAC05H,QAAL,EAAemB,SAAS,IAAT,EAAeh/H,KAAf,EAAsBmE,MAAtB,EAA8B,CAA9B,EAAiC,MAAjC,EAAyC,CAAzC;CACf,MAAI8zH,OAAOC,mBAAX,EAAgC;CAC9B,SAAK/zH,MAAL,IAAgBnE,UAAU,CAA1B;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,QAAQ,IAA5B;CACD,GAHD,MAGO;CACLq/H,sBAAkB,IAAlB,EAAwBr/H,KAAxB,EAA+BmE,MAA/B,EAAuC,KAAvC;CACD;CACD,SAAOA,SAAS,CAAhB;CACD,CAXD;;CAaA,SAASs7H,iBAAT,CAA4B3F,GAA5B,EAAiC95H,KAAjC,EAAwCmE,MAAxC,EAAgDm7H,YAAhD,EAA8D;CAC5D,MAAIt/H,QAAQ,CAAZ,EAAeA,QAAQ,aAAaA,KAAb,GAAqB,CAA7B;CACf,OAAK,IAAI+S,IAAI,CAAR,EAAW2D,IAAIpgB,KAAKqL,GAAL,CAASm4H,IAAIxiI,MAAJ,GAAa6M,MAAtB,EAA8B,CAA9B,CAApB,EAAsD4O,IAAI2D,CAA1D,EAA6D,EAAE3D,CAA/D,EAAkE;CAChE+mH,QAAI31H,SAAS4O,CAAb,IAAmB/S,UAAU,CAACs/H,eAAevsH,CAAf,GAAmB,IAAIA,CAAxB,IAA6B,CAAxC,GAA6C,IAA/D;CACD;CACF;;CAEDklH,OAAOthI,SAAP,CAAiB+oI,aAAjB,GAAiC,SAASA,aAAT,CAAwB1/H,KAAxB,EAA+BmE,MAA/B,EAAuC05H,QAAvC,EAAiD;CAChF79H,UAAQ,CAACA,KAAT;CACAmE,WAASA,SAAS,CAAlB;CACA,MAAI,CAAC05H,QAAL,EAAemB,SAAS,IAAT,EAAeh/H,KAAf,EAAsBmE,MAAtB,EAA8B,CAA9B,EAAiC,UAAjC,EAA6C,CAA7C;CACf,MAAI8zH,OAAOC,mBAAX,EAAgC;CAC9B,SAAK/zH,SAAS,CAAd,IAAoBnE,UAAU,EAA9B;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,UAAU,EAA9B;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,UAAU,CAA9B;CACA,SAAKmE,MAAL,IAAgBnE,QAAQ,IAAxB;CACD,GALD,MAKO;CACLy/H,sBAAkB,IAAlB,EAAwBz/H,KAAxB,EAA+BmE,MAA/B,EAAuC,IAAvC;CACD;CACD,SAAOA,SAAS,CAAhB;CACD,CAbD;;CAeA8zH,OAAOthI,SAAP,CAAiBgpI,aAAjB,GAAiC,SAASA,aAAT,CAAwB3/H,KAAxB,EAA+BmE,MAA/B,EAAuC05H,QAAvC,EAAiD;CAChF79H,UAAQ,CAACA,KAAT;CACAmE,WAASA,SAAS,CAAlB;CACA,MAAI,CAAC05H,QAAL,EAAemB,SAAS,IAAT,EAAeh/H,KAAf,EAAsBmE,MAAtB,EAA8B,CAA9B,EAAiC,UAAjC,EAA6C,CAA7C;CACf,MAAI8zH,OAAOC,mBAAX,EAAgC;CAC9B,SAAK/zH,MAAL,IAAgBnE,UAAU,EAA1B;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,UAAU,EAA9B;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,UAAU,CAA9B;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,QAAQ,IAA5B;CACD,GALD,MAKO;CACLy/H,sBAAkB,IAAlB,EAAwBz/H,KAAxB,EAA+BmE,MAA/B,EAAuC,KAAvC;CACD;CACD,SAAOA,SAAS,CAAhB;CACD,CAbD;;CAeA8zH,OAAOthI,SAAP,CAAiBipI,UAAjB,GAA8B,SAASA,UAAT,CAAqB5/H,KAArB,EAA4BmE,MAA5B,EAAoCk1H,UAApC,EAAgDwE,QAAhD,EAA0D;CACtF79H,UAAQ,CAACA,KAAT;CACAmE,WAASA,SAAS,CAAlB;CACA,MAAI,CAAC05H,QAAL,EAAe;CACb,QAAIhiC,QAAQvlG,KAAKC,GAAL,CAAS,CAAT,EAAY,IAAI8iI,UAAJ,GAAiB,CAA7B,CAAZ;;CAEA2F,aAAS,IAAT,EAAeh/H,KAAf,EAAsBmE,MAAtB,EAA8Bk1H,UAA9B,EAA0Cx9B,QAAQ,CAAlD,EAAqD,CAACA,KAAtD;CACD;;CAED,MAAI9oF,IAAI,CAAR;CACA,MAAI+qH,MAAM,CAAV;CACA,MAAIjzH,MAAM,CAAV;CACA,OAAK1G,MAAL,IAAenE,QAAQ,IAAvB;CACA,SAAO,EAAE+S,CAAF,GAAMsmH,UAAN,KAAqByE,OAAO,KAA5B,CAAP,EAA2C;CACzC,QAAI99H,QAAQ,CAAR,IAAa6K,QAAQ,CAArB,IAA0B,KAAK1G,SAAS4O,CAAT,GAAa,CAAlB,MAAyB,CAAvD,EAA0D;CACxDlI,YAAM,CAAN;CACD;CACD,SAAK1G,SAAS4O,CAAd,IAAmB,CAAE/S,QAAQ89H,GAAT,IAAiB,CAAlB,IAAuBjzH,GAAvB,GAA6B,IAAhD;CACD;;CAED,SAAO1G,SAASk1H,UAAhB;CACD,CArBD;;CAuBApB,OAAOthI,SAAP,CAAiBkpI,UAAjB,GAA8B,SAASA,UAAT,CAAqB7/H,KAArB,EAA4BmE,MAA5B,EAAoCk1H,UAApC,EAAgDwE,QAAhD,EAA0D;CACtF79H,UAAQ,CAACA,KAAT;CACAmE,WAASA,SAAS,CAAlB;CACA,MAAI,CAAC05H,QAAL,EAAe;CACb,QAAIhiC,QAAQvlG,KAAKC,GAAL,CAAS,CAAT,EAAY,IAAI8iI,UAAJ,GAAiB,CAA7B,CAAZ;;CAEA2F,aAAS,IAAT,EAAeh/H,KAAf,EAAsBmE,MAAtB,EAA8Bk1H,UAA9B,EAA0Cx9B,QAAQ,CAAlD,EAAqD,CAACA,KAAtD;CACD;;CAED,MAAI9oF,IAAIsmH,aAAa,CAArB;CACA,MAAIyE,MAAM,CAAV;CACA,MAAIjzH,MAAM,CAAV;CACA,OAAK1G,SAAS4O,CAAd,IAAmB/S,QAAQ,IAA3B;CACA,SAAO,EAAE+S,CAAF,IAAO,CAAP,KAAa+qH,OAAO,KAApB,CAAP,EAAmC;CACjC,QAAI99H,QAAQ,CAAR,IAAa6K,QAAQ,CAArB,IAA0B,KAAK1G,SAAS4O,CAAT,GAAa,CAAlB,MAAyB,CAAvD,EAA0D;CACxDlI,YAAM,CAAN;CACD;CACD,SAAK1G,SAAS4O,CAAd,IAAmB,CAAE/S,QAAQ89H,GAAT,IAAiB,CAAlB,IAAuBjzH,GAAvB,GAA6B,IAAhD;CACD;;CAED,SAAO1G,SAASk1H,UAAhB;CACD,CArBD;;CAuBApB,OAAOthI,SAAP,CAAiBmpI,SAAjB,GAA6B,SAASA,SAAT,CAAoB9/H,KAApB,EAA2BmE,MAA3B,EAAmC05H,QAAnC,EAA6C;CACxE79H,UAAQ,CAACA,KAAT;CACAmE,WAASA,SAAS,CAAlB;CACA,MAAI,CAAC05H,QAAL,EAAemB,SAAS,IAAT,EAAeh/H,KAAf,EAAsBmE,MAAtB,EAA8B,CAA9B,EAAiC,IAAjC,EAAuC,CAAC,IAAxC;CACf,MAAI,CAAC8zH,OAAOC,mBAAZ,EAAiCl4H,QAAQ1J,KAAKiK,KAAL,CAAWP,KAAX,CAAR;CACjC,MAAIA,QAAQ,CAAZ,EAAeA,QAAQ,OAAOA,KAAP,GAAe,CAAvB;CACf,OAAKmE,MAAL,IAAgBnE,QAAQ,IAAxB;CACA,SAAOmE,SAAS,CAAhB;CACD,CARD;;CAUA8zH,OAAOthI,SAAP,CAAiBopI,YAAjB,GAAgC,SAASA,YAAT,CAAuB//H,KAAvB,EAA8BmE,MAA9B,EAAsC05H,QAAtC,EAAgD;CAC9E79H,UAAQ,CAACA,KAAT;CACAmE,WAASA,SAAS,CAAlB;CACA,MAAI,CAAC05H,QAAL,EAAemB,SAAS,IAAT,EAAeh/H,KAAf,EAAsBmE,MAAtB,EAA8B,CAA9B,EAAiC,MAAjC,EAAyC,CAAC,MAA1C;CACf,MAAI8zH,OAAOC,mBAAX,EAAgC;CAC9B,SAAK/zH,MAAL,IAAgBnE,QAAQ,IAAxB;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,UAAU,CAA9B;CACD,GAHD,MAGO;CACLq/H,sBAAkB,IAAlB,EAAwBr/H,KAAxB,EAA+BmE,MAA/B,EAAuC,IAAvC;CACD;CACD,SAAOA,SAAS,CAAhB;CACD,CAXD;;CAaA8zH,OAAOthI,SAAP,CAAiBqpI,YAAjB,GAAgC,SAASA,YAAT,CAAuBhgI,KAAvB,EAA8BmE,MAA9B,EAAsC05H,QAAtC,EAAgD;CAC9E79H,UAAQ,CAACA,KAAT;CACAmE,WAASA,SAAS,CAAlB;CACA,MAAI,CAAC05H,QAAL,EAAemB,SAAS,IAAT,EAAeh/H,KAAf,EAAsBmE,MAAtB,EAA8B,CAA9B,EAAiC,MAAjC,EAAyC,CAAC,MAA1C;CACf,MAAI8zH,OAAOC,mBAAX,EAAgC;CAC9B,SAAK/zH,MAAL,IAAgBnE,UAAU,CAA1B;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,QAAQ,IAA5B;CACD,GAHD,MAGO;CACLq/H,sBAAkB,IAAlB,EAAwBr/H,KAAxB,EAA+BmE,MAA/B,EAAuC,KAAvC;CACD;CACD,SAAOA,SAAS,CAAhB;CACD,CAXD;;CAaA8zH,OAAOthI,SAAP,CAAiBspI,YAAjB,GAAgC,SAASA,YAAT,CAAuBjgI,KAAvB,EAA8BmE,MAA9B,EAAsC05H,QAAtC,EAAgD;CAC9E79H,UAAQ,CAACA,KAAT;CACAmE,WAASA,SAAS,CAAlB;CACA,MAAI,CAAC05H,QAAL,EAAemB,SAAS,IAAT,EAAeh/H,KAAf,EAAsBmE,MAAtB,EAA8B,CAA9B,EAAiC,UAAjC,EAA6C,CAAC,UAA9C;CACf,MAAI8zH,OAAOC,mBAAX,EAAgC;CAC9B,SAAK/zH,MAAL,IAAgBnE,QAAQ,IAAxB;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,UAAU,CAA9B;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,UAAU,EAA9B;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,UAAU,EAA9B;CACD,GALD,MAKO;CACLy/H,sBAAkB,IAAlB,EAAwBz/H,KAAxB,EAA+BmE,MAA/B,EAAuC,IAAvC;CACD;CACD,SAAOA,SAAS,CAAhB;CACD,CAbD;;CAeA8zH,OAAOthI,SAAP,CAAiBupI,YAAjB,GAAgC,SAASA,YAAT,CAAuBlgI,KAAvB,EAA8BmE,MAA9B,EAAsC05H,QAAtC,EAAgD;CAC9E79H,UAAQ,CAACA,KAAT;CACAmE,WAASA,SAAS,CAAlB;CACA,MAAI,CAAC05H,QAAL,EAAemB,SAAS,IAAT,EAAeh/H,KAAf,EAAsBmE,MAAtB,EAA8B,CAA9B,EAAiC,UAAjC,EAA6C,CAAC,UAA9C;CACf,MAAInE,QAAQ,CAAZ,EAAeA,QAAQ,aAAaA,KAAb,GAAqB,CAA7B;CACf,MAAIi4H,OAAOC,mBAAX,EAAgC;CAC9B,SAAK/zH,MAAL,IAAgBnE,UAAU,EAA1B;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,UAAU,EAA9B;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,UAAU,CAA9B;CACA,SAAKmE,SAAS,CAAd,IAAoBnE,QAAQ,IAA5B;CACD,GALD,MAKO;CACLy/H,sBAAkB,IAAlB,EAAwBz/H,KAAxB,EAA+BmE,MAA/B,EAAuC,KAAvC;CACD;CACD,SAAOA,SAAS,CAAhB;CACD,CAdD;;CAgBA,SAASg8H,YAAT,CAAuBrG,GAAvB,EAA4B95H,KAA5B,EAAmCmE,MAAnC,EAA2Cw5H,GAA3C,EAAgD76H,GAAhD,EAAqDnB,GAArD,EAA0D;CACxD,MAAIwC,SAASw5H,GAAT,GAAe7D,IAAIxiI,MAAvB,EAA+B,MAAM,IAAI8gI,UAAJ,CAAe,oBAAf,CAAN;CAC/B,MAAIj0H,SAAS,CAAb,EAAgB,MAAM,IAAIi0H,UAAJ,CAAe,oBAAf,CAAN;CACjB;;CAED,SAASgI,UAAT,CAAqBtG,GAArB,EAA0B95H,KAA1B,EAAiCmE,MAAjC,EAAyCm7H,YAAzC,EAAuDzB,QAAvD,EAAiE;CAC/D,MAAI,CAACA,QAAL,EAAe;CACbsC,iBAAarG,GAAb,EAAkB95H,KAAlB,EAAyBmE,MAAzB,EAAiC,CAAjC,EAAoC,sBAApC,EAA4D,CAAC,sBAA7D;CACD;CACDy6H,OAAA,CAAc9E,GAAd,EAAmB95H,KAAnB,EAA0BmE,MAA1B,EAAkCm7H,YAAlC,EAAgD,EAAhD,EAAoD,CAApD;CACA,SAAOn7H,SAAS,CAAhB;CACD;;CAED8zH,OAAOthI,SAAP,CAAiB0pI,YAAjB,GAAgC,SAASA,YAAT,CAAuBrgI,KAAvB,EAA8BmE,MAA9B,EAAsC05H,QAAtC,EAAgD;CAC9E,SAAOuC,WAAW,IAAX,EAAiBpgI,KAAjB,EAAwBmE,MAAxB,EAAgC,IAAhC,EAAsC05H,QAAtC,CAAP;CACD,CAFD;;CAIA5F,OAAOthI,SAAP,CAAiB2pI,YAAjB,GAAgC,SAASA,YAAT,CAAuBtgI,KAAvB,EAA8BmE,MAA9B,EAAsC05H,QAAtC,EAAgD;CAC9E,SAAOuC,WAAW,IAAX,EAAiBpgI,KAAjB,EAAwBmE,MAAxB,EAAgC,KAAhC,EAAuC05H,QAAvC,CAAP;CACD,CAFD;;CAIA,SAAS0C,WAAT,CAAsBzG,GAAtB,EAA2B95H,KAA3B,EAAkCmE,MAAlC,EAA0Cm7H,YAA1C,EAAwDzB,QAAxD,EAAkE;CAChE,MAAI,CAACA,QAAL,EAAe;CACbsC,iBAAarG,GAAb,EAAkB95H,KAAlB,EAAyBmE,MAAzB,EAAiC,CAAjC,EAAoC,uBAApC,EAA6D,CAAC,uBAA9D;CACD;CACDy6H,OAAA,CAAc9E,GAAd,EAAmB95H,KAAnB,EAA0BmE,MAA1B,EAAkCm7H,YAAlC,EAAgD,EAAhD,EAAoD,CAApD;CACA,SAAOn7H,SAAS,CAAhB;CACD;;CAED8zH,OAAOthI,SAAP,CAAiB6pI,aAAjB,GAAiC,SAASA,aAAT,CAAwBxgI,KAAxB,EAA+BmE,MAA/B,EAAuC05H,QAAvC,EAAiD;CAChF,SAAO0C,YAAY,IAAZ,EAAkBvgI,KAAlB,EAAyBmE,MAAzB,EAAiC,IAAjC,EAAuC05H,QAAvC,CAAP;CACD,CAFD;;CAIA5F,OAAOthI,SAAP,CAAiB8pI,aAAjB,GAAiC,SAASA,aAAT,CAAwBzgI,KAAxB,EAA+BmE,MAA/B,EAAuC05H,QAAvC,EAAiD;CAChF,SAAO0C,YAAY,IAAZ,EAAkBvgI,KAAlB,EAAyBmE,MAAzB,EAAiC,KAAjC,EAAwC05H,QAAxC,CAAP;CACD,CAFD;;;CAKA5F,OAAOthI,SAAP,CAAiBsJ,IAAjB,GAAwB,SAASA,IAAT,CAAe9I,MAAf,EAAuBupI,WAAvB,EAAoChvH,KAApC,EAA2CC,GAA3C,EAAgD;CACtE,MAAI,CAACD,KAAL,EAAYA,QAAQ,CAAR;CACZ,MAAI,CAACC,GAAD,IAAQA,QAAQ,CAApB,EAAuBA,MAAM,KAAKra,MAAX;CACvB,MAAIopI,eAAevpI,OAAOG,MAA1B,EAAkCopI,cAAcvpI,OAAOG,MAArB;CAClC,MAAI,CAACopI,WAAL,EAAkBA,cAAc,CAAd;CAClB,MAAI/uH,MAAM,CAAN,IAAWA,MAAMD,KAArB,EAA4BC,MAAMD,KAAN;;;CAG5B,MAAIC,QAAQD,KAAZ,EAAmB,OAAO,CAAP;CACnB,MAAIva,OAAOG,MAAP,KAAkB,CAAlB,IAAuB,KAAKA,MAAL,KAAgB,CAA3C,EAA8C,OAAO,CAAP;;;CAG9C,MAAIopI,cAAc,CAAlB,EAAqB;CACnB,UAAM,IAAItI,UAAJ,CAAe,2BAAf,CAAN;CACD;CACD,MAAI1mH,QAAQ,CAAR,IAAaA,SAAS,KAAKpa,MAA/B,EAAuC,MAAM,IAAI8gI,UAAJ,CAAe,2BAAf,CAAN;CACvC,MAAIzmH,MAAM,CAAV,EAAa,MAAM,IAAIymH,UAAJ,CAAe,yBAAf,CAAN;;;CAGb,MAAIzmH,MAAM,KAAKra,MAAf,EAAuBqa,MAAM,KAAKra,MAAX;CACvB,MAAIH,OAAOG,MAAP,GAAgBopI,WAAhB,GAA8B/uH,MAAMD,KAAxC,EAA+C;CAC7CC,UAAMxa,OAAOG,MAAP,GAAgBopI,WAAhB,GAA8BhvH,KAApC;CACD;;CAED,MAAIvH,MAAMwH,MAAMD,KAAhB;CACA,MAAIqB,CAAJ;;CAEA,MAAI,SAAS5b,MAAT,IAAmBua,QAAQgvH,WAA3B,IAA0CA,cAAc/uH,GAA5D,EAAiE;;CAE/D,SAAKoB,IAAI5I,MAAM,CAAf,EAAkB4I,KAAK,CAAvB,EAA0B,EAAEA,CAA5B,EAA+B;CAC7B5b,aAAO4b,IAAI2tH,WAAX,IAA0B,KAAK3tH,IAAIrB,KAAT,CAA1B;CACD;CACF,GALD,MAKO,IAAIvH,MAAM,IAAN,IAAc,CAAC8tH,OAAOC,mBAA1B,EAA+C;;CAEpD,SAAKnlH,IAAI,CAAT,EAAYA,IAAI5I,GAAhB,EAAqB,EAAE4I,CAAvB,EAA0B;CACxB5b,aAAO4b,IAAI2tH,WAAX,IAA0B,KAAK3tH,IAAIrB,KAAT,CAA1B;CACD;CACF,GALM,MAKA;CACLg6C,eAAW/0D,SAAX,CAAqBkJ,GAArB,CAAyBpI,IAAzB,CACEN,MADF,EAEE,KAAKu8C,QAAL,CAAchiC,KAAd,EAAqBA,QAAQvH,GAA7B,CAFF,EAGEu2H,WAHF;CAKD;;CAED,SAAOv2H,GAAP;CACD,CA9CD;;;;;;CAoDA8tH,OAAOthI,SAAP,CAAiBsiI,IAAjB,GAAwB,SAASA,IAAT,CAAepG,GAAf,EAAoBnhH,KAApB,EAA2BC,GAA3B,EAAgCwjD,QAAhC,EAA0C;;CAEhE,MAAI,OAAO09D,GAAP,KAAe,QAAnB,EAA6B;CAC3B,QAAI,OAAOnhH,KAAP,KAAiB,QAArB,EAA+B;CAC7ByjD,iBAAWzjD,KAAX;CACAA,cAAQ,CAAR;CACAC,YAAM,KAAKra,MAAX;CACD,KAJD,MAIO,IAAI,OAAOqa,GAAP,KAAe,QAAnB,EAA6B;CAClCwjD,iBAAWxjD,GAAX;CACAA,YAAM,KAAKra,MAAX;CACD;CACD,QAAIu7H,IAAIv7H,MAAJ,KAAe,CAAnB,EAAsB;CACpB,UAAIg2E,OAAOulD,IAAIW,UAAJ,CAAe,CAAf,CAAX;CACA,UAAIlmD,OAAO,GAAX,EAAgB;CACdulD,cAAMvlD,IAAN;CACD;CACF;CACD,QAAInY,aAAa9+D,SAAb,IAA0B,OAAO8+D,QAAP,KAAoB,QAAlD,EAA4D;CAC1D,YAAM,IAAI0pD,SAAJ,CAAc,2BAAd,CAAN;CACD;CACD,QAAI,OAAO1pD,QAAP,KAAoB,QAApB,IAAgC,CAAC8iE,OAAOmB,UAAP,CAAkBjkE,QAAlB,CAArC,EAAkE;CAChE,YAAM,IAAI0pD,SAAJ,CAAc,uBAAuB1pD,QAArC,CAAN;CACD;CACF,GArBD,MAqBO,IAAI,OAAO09D,GAAP,KAAe,QAAnB,EAA6B;CAClCA,UAAMA,MAAM,GAAZ;CACD;;;CAGD,MAAInhH,QAAQ,CAAR,IAAa,KAAKpa,MAAL,GAAcoa,KAA3B,IAAoC,KAAKpa,MAAL,GAAcqa,GAAtD,EAA2D;CACzD,UAAM,IAAIymH,UAAJ,CAAe,oBAAf,CAAN;CACD;;CAED,MAAIzmH,OAAOD,KAAX,EAAkB;CAChB,WAAO,IAAP;CACD;;CAEDA,UAAQA,UAAU,CAAlB;CACAC,QAAMA,QAAQtb,SAAR,GAAoB,KAAKiB,MAAzB,GAAkCqa,QAAQ,CAAhD;;CAEA,MAAI,CAACkhH,GAAL,EAAUA,MAAM,CAAN;;CAEV,MAAI9/G,CAAJ;CACA,MAAI,OAAO8/G,GAAP,KAAe,QAAnB,EAA6B;CAC3B,SAAK9/G,IAAIrB,KAAT,EAAgBqB,IAAIpB,GAApB,EAAyB,EAAEoB,CAA3B,EAA8B;CAC5B,WAAKA,CAAL,IAAU8/G,GAAV;CACD;CACF,GAJD,MAIO;CACL,QAAI0K,QAAQ9D,iBAAiB5G,GAAjB,IACRA,GADQ,GAERmH,YAAY,IAAI/B,MAAJ,CAAWpF,GAAX,EAAgB19D,QAAhB,EAA0Bn+D,QAA1B,EAAZ,CAFJ;CAGA,QAAImT,MAAMozH,MAAMjmI,MAAhB;CACA,SAAKyb,IAAI,CAAT,EAAYA,IAAIpB,MAAMD,KAAtB,EAA6B,EAAEqB,CAA/B,EAAkC;CAChC,WAAKA,IAAIrB,KAAT,IAAkB6rH,MAAMxqH,IAAI5I,GAAV,CAAlB;CACD;CACF;;CAED,SAAO,IAAP;CACD,CAzDD;;;;;CA8DA,IAAIw2H,oBAAoB,oBAAxB;;CAEA,SAASC,WAAT,CAAsBjR,GAAtB,EAA2B;;CAEzBA,QAAMkR,WAAWlR,GAAX,EAAgB/vC,OAAhB,CAAwB+gD,iBAAxB,EAA2C,EAA3C,CAAN;;CAEA,MAAIhR,IAAIr4H,MAAJ,GAAa,CAAjB,EAAoB,OAAO,EAAP;;CAEpB,SAAOq4H,IAAIr4H,MAAJ,GAAa,CAAb,KAAmB,CAA1B,EAA6B;CAC3Bq4H,UAAMA,MAAM,GAAZ;CACD;CACD,SAAOA,GAAP;CACD;;CAED,SAASkR,UAAT,CAAqBlR,GAArB,EAA0B;CACxB,MAAIA,IAAItmF,IAAR,EAAc,OAAOsmF,IAAItmF,IAAJ,EAAP;CACd,SAAOsmF,IAAI/vC,OAAJ,CAAY,YAAZ,EAA0B,EAA1B,CAAP;CACD;;CAED,SAAS09C,KAAT,CAAgBhjH,CAAhB,EAAmB;CACjB,MAAIA,IAAI,EAAR,EAAY,OAAO,MAAMA,EAAEtjB,QAAF,CAAW,EAAX,CAAb;CACZ,SAAOsjB,EAAEtjB,QAAF,CAAW,EAAX,CAAP;CACD;;CAED,SAASgjI,WAAT,CAAsB74H,MAAtB,EAA8BgqF,KAA9B,EAAqC;CACnCA,UAAQA,SAASz4E,QAAjB;CACA,MAAIiqH,SAAJ;CACA,MAAIrlI,SAAS6J,OAAO7J,MAApB;CACA,MAAIwpI,gBAAgB,IAApB;CACA,MAAIvD,QAAQ,EAAZ;;CAEA,OAAK,IAAIxqH,IAAI,CAAb,EAAgBA,IAAIzb,MAApB,EAA4B,EAAEyb,CAA9B,EAAiC;CAC/B4pH,gBAAYx7H,OAAOqyH,UAAP,CAAkBzgH,CAAlB,CAAZ;;;CAGA,QAAI4pH,YAAY,MAAZ,IAAsBA,YAAY,MAAtC,EAA8C;;CAE5C,UAAI,CAACmE,aAAL,EAAoB;;CAElB,YAAInE,YAAY,MAAhB,EAAwB;;CAEtB,cAAI,CAACxxC,SAAS,CAAV,IAAe,CAAC,CAApB,EAAuBoyC,MAAMxzG,IAAN,CAAW,IAAX,EAAiB,IAAjB,EAAuB,IAAvB;CACvB;CACD,SAJD,MAIO,IAAIhX,IAAI,CAAJ,KAAUzb,MAAd,EAAsB;;CAE3B,cAAI,CAAC6zF,SAAS,CAAV,IAAe,CAAC,CAApB,EAAuBoyC,MAAMxzG,IAAN,CAAW,IAAX,EAAiB,IAAjB,EAAuB,IAAvB;CACvB;CACD;;;CAGD+2G,wBAAgBnE,SAAhB;;CAEA;CACD;;;CAGD,UAAIA,YAAY,MAAhB,EAAwB;CACtB,YAAI,CAACxxC,SAAS,CAAV,IAAe,CAAC,CAApB,EAAuBoyC,MAAMxzG,IAAN,CAAW,IAAX,EAAiB,IAAjB,EAAuB,IAAvB;CACvB+2G,wBAAgBnE,SAAhB;CACA;CACD;;;CAGDA,kBAAY,CAACmE,gBAAgB,MAAhB,IAA0B,EAA1B,GAA+BnE,YAAY,MAA5C,IAAsD,OAAlE;CACD,KA7BD,MA6BO,IAAImE,aAAJ,EAAmB;;CAExB,UAAI,CAAC31C,SAAS,CAAV,IAAe,CAAC,CAApB,EAAuBoyC,MAAMxzG,IAAN,CAAW,IAAX,EAAiB,IAAjB,EAAuB,IAAvB;CACxB;;CAED+2G,oBAAgB,IAAhB;;;CAGA,QAAInE,YAAY,IAAhB,EAAsB;CACpB,UAAI,CAACxxC,SAAS,CAAV,IAAe,CAAnB,EAAsB;CACtBoyC,YAAMxzG,IAAN,CAAW4yG,SAAX;CACD,KAHD,MAGO,IAAIA,YAAY,KAAhB,EAAuB;CAC5B,UAAI,CAACxxC,SAAS,CAAV,IAAe,CAAnB,EAAsB;CACtBoyC,YAAMxzG,IAAN,CACE4yG,aAAa,GAAb,GAAmB,IADrB,EAEEA,YAAY,IAAZ,GAAmB,IAFrB;CAID,KANM,MAMA,IAAIA,YAAY,OAAhB,EAAyB;CAC9B,UAAI,CAACxxC,SAAS,CAAV,IAAe,CAAnB,EAAsB;CACtBoyC,YAAMxzG,IAAN,CACE4yG,aAAa,GAAb,GAAmB,IADrB,EAEEA,aAAa,GAAb,GAAmB,IAAnB,GAA0B,IAF5B,EAGEA,YAAY,IAAZ,GAAmB,IAHrB;CAKD,KAPM,MAOA,IAAIA,YAAY,QAAhB,EAA0B;CAC/B,UAAI,CAACxxC,SAAS,CAAV,IAAe,CAAnB,EAAsB;CACtBoyC,YAAMxzG,IAAN,CACE4yG,aAAa,IAAb,GAAoB,IADtB,EAEEA,aAAa,GAAb,GAAmB,IAAnB,GAA0B,IAF5B,EAGEA,aAAa,GAAb,GAAmB,IAAnB,GAA0B,IAH5B,EAIEA,YAAY,IAAZ,GAAmB,IAJrB;CAMD,KARM,MAQA;CACL,YAAM,IAAI5c,KAAJ,CAAU,oBAAV,CAAN;CACD;CACF;;CAED,SAAOwd,KAAP;CACD;;CAED,SAASrB,YAAT,CAAuBvM,GAAvB,EAA4B;CAC1B,MAAIoR,YAAY,EAAhB;CACA,OAAK,IAAIhuH,IAAI,CAAb,EAAgBA,IAAI48G,IAAIr4H,MAAxB,EAAgC,EAAEyb,CAAlC,EAAqC;;CAEnCguH,cAAUh3G,IAAV,CAAe4lG,IAAI6D,UAAJ,CAAezgH,CAAf,IAAoB,IAAnC;CACD;CACD,SAAOguH,SAAP;CACD;;CAED,SAASzE,cAAT,CAAyB3M,GAAzB,EAA8BxkC,KAA9B,EAAqC;CACnC,MAAInnF,CAAJ,EAAOg9H,EAAP,EAAWC,EAAX;CACA,MAAIF,YAAY,EAAhB;CACA,OAAK,IAAIhuH,IAAI,CAAb,EAAgBA,IAAI48G,IAAIr4H,MAAxB,EAAgC,EAAEyb,CAAlC,EAAqC;CACnC,QAAI,CAACo4E,SAAS,CAAV,IAAe,CAAnB,EAAsB;;CAEtBnnF,QAAI2rH,IAAI6D,UAAJ,CAAezgH,CAAf,CAAJ;CACAiuH,SAAKh9H,KAAK,CAAV;CACAi9H,SAAKj9H,IAAI,GAAT;CACA+8H,cAAUh3G,IAAV,CAAek3G,EAAf;CACAF,cAAUh3G,IAAV,CAAei3G,EAAf;CACD;;CAED,SAAOD,SAAP;CACD;;CAGD,SAAS9G,aAAT,CAAwBtK,GAAxB,EAA6B;CAC3B,SAAO6M,WAAA,CAAmBoE,YAAYjR,GAAZ,CAAnB,CAAP;CACD;;CAED,SAASqM,UAAT,CAAqBvyE,GAArB,EAA0BtgD,GAA1B,EAA+BhF,MAA/B,EAAuC7M,MAAvC,EAA+C;CAC7C,OAAK,IAAIyb,IAAI,CAAb,EAAgBA,IAAIzb,MAApB,EAA4B,EAAEyb,CAA9B,EAAiC;CAC/B,QAAKA,IAAI5O,MAAJ,IAAcgF,IAAI7R,MAAnB,IAA+Byb,KAAK02C,IAAInyD,MAA5C,EAAqD;CACrD6R,QAAI4J,IAAI5O,MAAR,IAAkBslD,IAAI12C,CAAJ,CAAlB;CACD;CACD,SAAOA,CAAP;CACD;;CAED,SAAS2mH,KAAT,CAAgB7G,GAAhB,EAAqB;CACnB,SAAOA,QAAQA,GAAf,CADmB;CAEpB;;;;;AAMD,CAAO,SAAS8G,QAAT,CAAkBj/F,GAAlB,EAAuB;CAC5B,SAAOA,OAAO,IAAP,KAAgB,CAAC,CAACA,IAAIk/F,SAAN,IAAmBsH,aAAaxmG,GAAb,CAAnB,IAAwCymG,aAAazmG,GAAb,CAAxD,CAAP;CACD;;CAED,SAASwmG,YAAT,CAAuBxmG,GAAvB,EAA4B;CAC1B,SAAO,CAAC,CAACA,IAAI36B,WAAN,IAAqB,OAAO26B,IAAI36B,WAAJ,CAAgB45H,QAAvB,KAAoC,UAAzD,IAAuEj/F,IAAI36B,WAAJ,CAAgB45H,QAAhB,CAAyBj/F,GAAzB,CAA9E;CACD;;;CAGD,SAASymG,YAAT,CAAuBzmG,GAAvB,EAA4B;CAC1B,SAAO,OAAOA,IAAIikG,WAAX,KAA2B,UAA3B,IAAyC,OAAOjkG,IAAI/3B,KAAX,KAAqB,UAA9D,IAA4Eu+H,aAAaxmG,IAAI/3B,KAAJ,CAAU,CAAV,EAAa,CAAb,CAAb,CAAnF;CACD;;CC/wDD,iBAAiBy+H,KAAjB;;CAEA,IAAIC,mBAAmB,OAAOpJ,MAAP,KAAkB,UAAlB,IAAgC,OAAOqJ,QAAP,KAA2B,UAAlF;CACA,IAAIC,wBAAwB,OAAO5I,WAAP,KAAuB,UAAnD;;CAEA,IAAI7kF,SAAS,SAATA,MAAS,CAAUpZ,GAAV,EAAe;CAC1B,SAAO,OAAOi+F,YAAY7kF,MAAnB,KAA8B,UAA9B,GAA2C6kF,YAAY7kF,MAAZ,CAAmBpZ,GAAnB,CAA3C,GAAsEA,IAAI9jB,MAAJ,YAAsB+hH,WAAnG;CACD,CAFD;;;;;;;;CAUA,SAASyI,KAAT,CAAe1mG,GAAf,EAAoB;CAClB,SAAQ2mG,oBAAoBC,SAAgB5mG,GAAhB4mG,CAArB,IACEC,0BAA0B7mG,eAAei+F,WAAf,IAA8B7kF,OAAOpZ,GAAP,CAAxD,CADT;CAED;;;;CCnBD;;;;;;CAQA,IAAI1jC,aAAWH,OAAOF,SAAP,CAAiBK,QAAhC;CACA,IAAIwqI,iBAAiB,OAAOC,IAAP,KAAgB,UAAhB,IAA+B,OAAOA,IAAP,KAAgB,WAAhB,IAA+BzqI,WAASS,IAAT,CAAcgqI,IAAd,MAAwB,0BAA3G;CACA,IAAIC,iBAAiB,OAAOC,IAAP,KAAgB,UAAhB,IAA+B,OAAOA,IAAP,KAAgB,WAAhB,IAA+B3qI,WAASS,IAAT,CAAckqI,IAAd,MAAwB,0BAA3G;;;;;;;;;;;;CAYA,wBAA4B,0BAAA,CAASC,MAAT,EAAiB;CAC3C,MAAIh7D,UAAU,EAAd;CACA,MAAIi7D,aAAaD,OAAOjrG,IAAxB;CACA,MAAImrG,OAAOF,MAAX;CACAE,OAAKnrG,IAAL,GAAYorG,mBAAmBF,UAAnB,EAA+Bj7D,OAA/B,CAAZ;CACAk7D,OAAKE,WAAL,GAAmBp7D,QAAQtvE,MAA3B,CAL2C;CAM3C,SAAO,EAACsqI,QAAQE,IAAT,EAAel7D,SAASA,OAAxB,EAAP;CACD,CAPD;;CASA,SAASm7D,kBAAT,CAA4BprG,IAA5B,EAAkCiwC,OAAlC,EAA2C;CACzC,MAAI,CAACjwC,IAAL,EAAW,OAAOA,IAAP;;CAEX,MAAIyqG,WAAMzqG,IAAN,CAAJ,EAAiB;CACf,QAAIsrG,cAAc,EAAEC,cAAc,IAAhB,EAAsBpL,KAAKlwD,QAAQtvE,MAAnC,EAAlB;CACAsvE,YAAQ78C,IAAR,CAAa4M,IAAb;CACA,WAAOsrG,WAAP;CACD,GAJD,MAIO,IAAIvvG,QAAQiE,IAAR,CAAJ,EAAmB;CACxB,QAAIwrG,UAAU,IAAI1vG,KAAJ,CAAUkE,KAAKr/B,MAAf,CAAd;CACA,SAAK,IAAIyb,IAAI,CAAb,EAAgBA,IAAI4jB,KAAKr/B,MAAzB,EAAiCyb,GAAjC,EAAsC;CACpCovH,cAAQpvH,CAAR,IAAagvH,mBAAmBprG,KAAK5jB,CAAL,CAAnB,EAA4B6zD,OAA5B,CAAb;CACD;CACD,WAAOu7D,OAAP;CACD,GANM,MAMA,IAAI,QAAOxrG,IAAP,2CAAOA,IAAP,OAAgB,QAAhB,IAA4B,EAAEA,gBAAgBtH,IAAlB,CAAhC,EAAyD;CAC9D,QAAI8yG,UAAU,EAAd;CACA,SAAK,IAAIzrG,GAAT,IAAgBC,IAAhB,EAAsB;CACpBwrG,cAAQzrG,GAAR,IAAeqrG,mBAAmBprG,KAAKD,GAAL,CAAnB,EAA8BkwC,OAA9B,CAAf;CACD;CACD,WAAOu7D,OAAP;CACD;CACD,SAAOxrG,IAAP;CACD;;;;;;;;;;;CAWD,wBAA4B,0BAAA,CAASirG,MAAT,EAAiBh7D,OAAjB,EAA0B;CACpDg7D,SAAOjrG,IAAP,GAAcyrG,mBAAmBR,OAAOjrG,IAA1B,EAAgCiwC,OAAhC,CAAd;CACAg7D,SAAOI,WAAP,GAAqB3rI,SAArB,CAFoD;CAGpD,SAAOurI,MAAP;CACD,CAJD;;CAMA,SAASQ,kBAAT,CAA4BzrG,IAA5B,EAAkCiwC,OAAlC,EAA2C;CACzC,MAAI,CAACjwC,IAAL,EAAW,OAAOA,IAAP;;CAEX,MAAIA,QAAQA,KAAKurG,YAAjB,EAA+B;CAC7B,WAAOt7D,QAAQjwC,KAAKmgG,GAAb,CAAP,CAD6B;CAE9B,GAFD,MAEO,IAAIpkG,QAAQiE,IAAR,CAAJ,EAAmB;CACxB,SAAK,IAAI5jB,IAAI,CAAb,EAAgBA,IAAI4jB,KAAKr/B,MAAzB,EAAiCyb,GAAjC,EAAsC;CACpC4jB,WAAK5jB,CAAL,IAAUqvH,mBAAmBzrG,KAAK5jB,CAAL,CAAnB,EAA4B6zD,OAA5B,CAAV;CACD;CACF,GAJM,MAIA,IAAI,QAAOjwC,IAAP,2CAAOA,IAAP,OAAgB,QAApB,EAA8B;CACnC,SAAK,IAAID,GAAT,IAAgBC,IAAhB,EAAsB;CACpBA,WAAKD,GAAL,IAAY0rG,mBAAmBzrG,KAAKD,GAAL,CAAnB,EAA8BkwC,OAA9B,CAAZ;CACD;CACF;;CAED,SAAOjwC,IAAP;CACD;;;;;;;;;;;;CAYD,kBAAsB,oBAAA,CAASA,IAAT,EAAe5tB,QAAf,EAAyB;CAC7C,WAASs5H,YAAT,CAAsB3nG,GAAtB,EAA2B4nG,MAA3B,EAAmCC,gBAAnC,EAAqD;CACnD,QAAI,CAAC7nG,GAAL,EAAU,OAAOA,GAAP;;;CAGV,QAAK8mG,kBAAkB9mG,eAAe+mG,IAAlC,IACCC,kBAAkBhnG,eAAeinG,IADtC,EAC6C;CAC3Ca;;;CAGA,UAAIC,aAAa,IAAIC,UAAJ,EAAjB;CACAD,iBAAWE,MAAX,GAAoB,YAAW;;CAC7B,YAAIJ,gBAAJ,EAAsB;CACpBA,2BAAiBD,MAAjB,IAA2B,KAAKtwH,MAAhC;CACD,SAFD,MAGK;CACH4wH,yBAAe,KAAK5wH,MAApB;CACD;;;CAGD,YAAG,IAAIwwH,YAAP,EAAqB;CACnBz5H,mBAAS65H,YAAT;CACD;CACF,OAZD;;CAcAH,iBAAWI,iBAAX,CAA6BnoG,GAA7B,EAnB2C;CAoB5C,KArBD,MAqBO,IAAIhI,QAAQgI,GAAR,CAAJ,EAAkB;;CACvB,WAAK,IAAI3nB,IAAI,CAAb,EAAgBA,IAAI2nB,IAAIpjC,MAAxB,EAAgCyb,GAAhC,EAAqC;CACnCsvH,qBAAa3nG,IAAI3nB,CAAJ,CAAb,EAAqBA,CAArB,EAAwB2nB,GAAxB;CACD;CACF,KAJM,MAIA,IAAI,QAAOA,GAAP,2CAAOA,GAAP,OAAe,QAAf,IAA2B,CAAC0mG,WAAM1mG,GAAN,CAAhC,EAA4C;;CACjD,WAAK,IAAIhE,GAAT,IAAgBgE,GAAhB,EAAqB;CACnB2nG,qBAAa3nG,IAAIhE,GAAJ,CAAb,EAAuBA,GAAvB,EAA4BgE,GAA5B;CACD;CACF;CACF;;CAED,MAAI8nG,eAAe,CAAnB;CACA,MAAII,eAAejsG,IAAnB;CACA0rG,eAAaO,YAAb;CACA,MAAI,CAACJ,YAAL,EAAmB;CACjBz5H,aAAS65H,YAAT;CACD;CACF,CA3CD;;;;;;;;;CChGA;;;;CAIA,MAAIxP,QAAQ3E,UAAiB,kBAAjB,CAAZ;;;;;;;;CAYAxR,kBAAA,GAAmB,CAAnB;;;;;;;;CAQAA,eAAA,GAAgB,CACd,SADc,EAEd,YAFc,EAGd,OAHc,EAId,KAJc,EAKd,OALc,EAMd,cANc,EAOd,YAPc,CAAhB;;;;;;;;CAgBAA,iBAAA,GAAkB,CAAlB;;;;;;;;CAQAA,oBAAA,GAAqB,CAArB;;;;;;;;CAQAA,eAAA,GAAgB,CAAhB;;;;;;;;CAQAA,aAAA,GAAc,CAAd;;;;;;;;CAQAA,eAAA,GAAgB,CAAhB;;;;;;;;CAQAA,sBAAA,GAAuB,CAAvB;;;;;;;;CAQAA,oBAAA,GAAqB,CAArB;;;;;;;;CAQAA,iBAAA,GAAkB6lB,OAAlB;;;;;;;;CAQA7lB,iBAAA,GAAkB8lB,OAAlB;;;;;;;;CAQA,WAASD,OAAT,GAAmB;;CAEnB,MAAIE,eAAe/lB,QAAQgmB,KAAR,GAAgB,gBAAnC;;;;;;;;;;;;CAYAH,UAAQnsI,SAAR,CAAkBusI,MAAlB,GAA2B,UAASxoG,GAAT,EAAc3xB,QAAd,EAAuB;CAChDqqH,UAAM,oBAAN,EAA4B14F,GAA5B;;CAEA,QAAIuiF,QAAQkmB,YAAR,KAAyBzoG,IAAI7K,IAA7B,IAAqCotF,QAAQmmB,UAAR,KAAuB1oG,IAAI7K,IAApE,EAA0E;CACxEwzG,qBAAe3oG,GAAf,EAAoB3xB,QAApB;CACD,KAFD,MAEO;CACL,UAAIosD,WAAWmuE,eAAe5oG,GAAf,CAAf;CACA3xB,eAAS,CAACosD,QAAD,CAAT;CACD;CACF,GATD;;;;;;;;;;CAmBA,WAASmuE,cAAT,CAAwB5oG,GAAxB,EAA6B;;;CAG3B,QAAIi1F,MAAM,KAAKj1F,IAAI7K,IAAnB;;;CAGA,QAAIotF,QAAQkmB,YAAR,KAAyBzoG,IAAI7K,IAA7B,IAAqCotF,QAAQmmB,UAAR,KAAuB1oG,IAAI7K,IAApE,EAA0E;CACxE8/F,aAAOj1F,IAAIsnG,WAAJ,GAAkB,GAAzB;CACD;;;;CAID,QAAItnG,IAAI6oG,GAAJ,IAAW,QAAQ7oG,IAAI6oG,GAA3B,EAAgC;CAC9B5T,aAAOj1F,IAAI6oG,GAAJ,GAAU,GAAjB;CACD;;;CAGD,QAAI,QAAQ7oG,IAAI5F,EAAhB,EAAoB;CAClB66F,aAAOj1F,IAAI5F,EAAX;CACD;;;CAGD,QAAI,QAAQ4F,IAAI/D,IAAhB,EAAsB;CACpB,UAAI6sG,UAAUC,aAAa/oG,IAAI/D,IAAjB,CAAd;CACA,UAAI6sG,YAAY,KAAhB,EAAuB;CACrB7T,eAAO6T,OAAP;CACD,OAFD,MAEO;CACL,eAAOR,YAAP;CACD;CACF;;CAED5P,UAAM,kBAAN,EAA0B14F,GAA1B,EAA+Bi1F,GAA/B;CACA,WAAOA,GAAP;CACD;;CAED,WAAS8T,YAAT,CAAsB9T,GAAtB,EAA2B;CACzB,QAAI;CACF,aAAOt5F,KAAKC,SAAL,CAAeq5F,GAAf,CAAP;CACD,KAFD,CAEE,OAAM3iH,CAAN,EAAQ;CACR,aAAO,KAAP;CACD;CACF;;;;;;;;;;;;CAYD,WAASq2H,cAAT,CAAwB3oG,GAAxB,EAA6B3xB,QAA7B,EAAuC;;CAErC,aAAS26H,aAAT,CAAuBd,YAAvB,EAAqC;CACnC,UAAIe,iBAAiBC,OAAOC,iBAAP,CAAyBjB,YAAzB,CAArB;CACA,UAAId,OAAOwB,eAAeK,eAAe/B,MAA9B,CAAX;CACA,UAAIh7D,UAAU+8D,eAAe/8D,OAA7B;;CAEAA,cAAQ25C,OAAR,CAAgBuhB,IAAhB,EALmC;CAMnC/4H,eAAS69D,OAAT,EANmC;CAOpC;;CAEDg9D,WAAOE,WAAP,CAAmBppG,GAAnB,EAAwBgpG,aAAxB;CACD;;;;;;;;;CASD,WAASX,OAAT,GAAmB;CACjB,SAAKgB,aAAL,GAAqB,IAArB;CACD;;;;;;CAMDhO,mBAAQgN,QAAQpsI,SAAhB;;;;;;;;;;CAUAosI,UAAQpsI,SAAR,CAAkB2M,GAAlB,GAAwB,UAASo3B,GAAT,EAAc;CACpC,QAAIknG,MAAJ;CACA,QAAI,OAAOlnG,GAAP,KAAe,QAAnB,EAA6B;CAC3BknG,eAASoC,aAAatpG,GAAb,CAAT;CACA,UAAIuiF,QAAQkmB,YAAR,KAAyBvB,OAAO/xG,IAAhC,IAAwCotF,QAAQmmB,UAAR,KAAuBxB,OAAO/xG,IAA1E,EAAgF;;CAC9E,aAAKk0G,aAAL,GAAqB,IAAIE,mBAAJ,CAAwBrC,MAAxB,CAArB;;;CAGA,YAAI,KAAKmC,aAAL,CAAmBG,SAAnB,CAA6BlC,WAA7B,KAA6C,CAAjD,EAAoD;CAClD,eAAKriB,IAAL,CAAU,SAAV,EAAqBiiB,MAArB;CACD;CACF,OAPD,MAOO;;CACL,aAAKjiB,IAAL,CAAU,SAAV,EAAqBiiB,MAArB;CACD;CACF,KAZD,MAYO,IAAIR,WAAM1mG,GAAN,KAAcA,IAAI8hG,MAAtB,EAA8B;;CACnC,UAAI,CAAC,KAAKuH,aAAV,EAAyB;CACvB,cAAM,IAAIhkB,KAAJ,CAAU,kDAAV,CAAN;CACD,OAFD,MAEO;CACL6hB,iBAAS,KAAKmC,aAAL,CAAmBI,cAAnB,CAAkCzpG,GAAlC,CAAT;CACA,YAAIknG,MAAJ,EAAY;;CACV,eAAKmC,aAAL,GAAqB,IAArB;CACA,eAAKpkB,IAAL,CAAU,SAAV,EAAqBiiB,MAArB;CACD;CACF;CACF,KAVM,MAUA;CACL,YAAM,IAAI7hB,KAAJ,CAAU,mBAAmBrlF,GAA7B,CAAN;CACD;CACF,GA3BD;;;;;;;;;;CAqCA,WAASspG,YAAT,CAAsBrU,GAAtB,EAA2B;CACzB,QAAI58G,IAAI,CAAR;;CAEA,QAAItS,IAAI;CACNovB,YAAM15B,OAAOw5H,IAAI5tH,MAAJ,CAAW,CAAX,CAAP;CADA,KAAR;;CAIA,QAAI,QAAQk7G,QAAQmnB,KAAR,CAAc3jI,EAAEovB,IAAhB,CAAZ,EAAmC;CACjC,aAAOjjB,MAAM,yBAAyBnM,EAAEovB,IAAjC,CAAP;CACD;;;CAGD,QAAIotF,QAAQkmB,YAAR,KAAyB1iI,EAAEovB,IAA3B,IAAmCotF,QAAQmmB,UAAR,KAAuB3iI,EAAEovB,IAAhE,EAAsE;CACpE,UAAIiqG,MAAM,EAAV;CACA,aAAOnK,IAAI5tH,MAAJ,CAAW,EAAEgR,CAAb,MAAoB,GAA3B,EAAgC;CAC9B+mH,eAAOnK,IAAI5tH,MAAJ,CAAWgR,CAAX,CAAP;CACA,YAAIA,KAAK48G,IAAIr4H,MAAb,EAAqB;CACtB;CACD,UAAIwiI,OAAO3jI,OAAO2jI,GAAP,CAAP,IAAsBnK,IAAI5tH,MAAJ,CAAWgR,CAAX,MAAkB,GAA5C,EAAiD;CAC/C,cAAM,IAAIgtG,KAAJ,CAAU,qBAAV,CAAN;CACD;CACDt/G,QAAEuhI,WAAF,GAAgB7rI,OAAO2jI,GAAP,CAAhB;CACD;;;CAGD,QAAI,QAAQnK,IAAI5tH,MAAJ,CAAWgR,IAAI,CAAf,CAAZ,EAA+B;CAC7BtS,QAAE8iI,GAAF,GAAQ,EAAR;CACA,aAAO,EAAExwH,CAAT,EAAY;CACV,YAAI/O,IAAI2rH,IAAI5tH,MAAJ,CAAWgR,CAAX,CAAR;CACA,YAAI,QAAQ/O,CAAZ,EAAe;CACfvD,UAAE8iI,GAAF,IAASv/H,CAAT;CACA,YAAI+O,MAAM48G,IAAIr4H,MAAd,EAAsB;CACvB;CACF,KARD,MAQO;CACLmJ,QAAE8iI,GAAF,GAAQ,GAAR;CACD;;;CAGD,QAAIvxC,OAAO29B,IAAI5tH,MAAJ,CAAWgR,IAAI,CAAf,CAAX;CACA,QAAI,OAAOi/E,IAAP,IAAe77F,OAAO67F,IAAP,KAAgBA,IAAnC,EAAyC;CACvCvxF,QAAEq0B,EAAF,GAAO,EAAP;CACA,aAAO,EAAE/hB,CAAT,EAAY;CACV,YAAI/O,IAAI2rH,IAAI5tH,MAAJ,CAAWgR,CAAX,CAAR;CACA,YAAI,QAAQ/O,CAAR,IAAa7N,OAAO6N,CAAP,KAAaA,CAA9B,EAAiC;CAC/B,YAAE+O,CAAF;CACA;CACD;CACDtS,UAAEq0B,EAAF,IAAQ66F,IAAI5tH,MAAJ,CAAWgR,CAAX,CAAR;CACA,YAAIA,MAAM48G,IAAIr4H,MAAd,EAAsB;CACvB;CACDmJ,QAAEq0B,EAAF,GAAO3+B,OAAOsK,EAAEq0B,EAAT,CAAP;CACD;;;CAGD,QAAI66F,IAAI5tH,MAAJ,CAAW,EAAEgR,CAAb,CAAJ,EAAqB;CACnB,UAAIywH,UAAUa,SAAS1U,IAAIyE,MAAJ,CAAWrhH,CAAX,CAAT,CAAd;CACA,UAAIuxH,iBAAiBd,YAAY,KAAZ,KAAsB/iI,EAAEovB,IAAF,KAAWotF,QAAQgmB,KAAnB,IAA4BvwG,QAAQ8wG,OAAR,CAAlD,CAArB;CACA,UAAIc,cAAJ,EAAoB;CAClB7jI,UAAEk2B,IAAF,GAAS6sG,OAAT;CACD,OAFD,MAEO;CACL,eAAO52H,MAAM,iBAAN,CAAP;CACD;CACF;;CAEDwmH,UAAM,kBAAN,EAA0BzD,GAA1B,EAA+BlvH,CAA/B;CACA,WAAOA,CAAP;CACD;;CAED,WAAS4jI,QAAT,CAAkB1U,GAAlB,EAAuB;CACrB,QAAI;CACF,aAAOt5F,KAAKO,KAAL,CAAW+4F,GAAX,CAAP;CACD,KAFD,CAEE,OAAM3iH,CAAN,EAAQ;CACR,aAAO,KAAP;CACD;CACF;;;;;;;;CAQD+1H,UAAQpsI,SAAR,CAAkB+sF,OAAlB,GAA4B,YAAW;CACrC,QAAI,KAAKqgD,aAAT,EAAwB;CACtB,WAAKA,aAAL,CAAmBQ,sBAAnB;CACD;CACF,GAJD;;;;;;;;;;;;CAgBA,WAASN,mBAAT,CAA6BrC,MAA7B,EAAqC;CACnC,SAAKsC,SAAL,GAAiBtC,MAAjB;CACA,SAAKh7D,OAAL,GAAe,EAAf;CACD;;;;;;;;;;;;CAYDq9D,sBAAoBttI,SAApB,CAA8BwtI,cAA9B,GAA+C,UAASK,OAAT,EAAkB;CAC/D,SAAK59D,OAAL,CAAa78C,IAAb,CAAkBy6G,OAAlB;CACA,QAAI,KAAK59D,OAAL,CAAatvE,MAAb,KAAwB,KAAK4sI,SAAL,CAAelC,WAA3C,EAAwD;;CACtD,UAAIJ,SAASgC,OAAOa,iBAAP,CAAyB,KAAKP,SAA9B,EAAyC,KAAKt9D,OAA9C,CAAb;CACA,WAAK29D,sBAAL;CACA,aAAO3C,MAAP;CACD;CACD,WAAO,IAAP;CACD,GARD;;;;;;;;CAgBAqC,sBAAoBttI,SAApB,CAA8B4tI,sBAA9B,GAAuD,YAAW;CAChE,SAAKL,SAAL,GAAiB,IAAjB;CACA,SAAKt9D,OAAL,GAAe,EAAf;CACD,GAHD;;CAKA,WAASh6D,KAAT,CAAe2K,GAAf,EAAoB;CAClB,WAAO;CACLsY,YAAMotF,QAAQgmB,KADT;CAELtsG,YAAM,mBAAmBpf;CAFpB,KAAP;CAID;;;;;;;;;;;;;;;CC7ZD;;;;;;;;CAQA,MAAI;CACFthB,kBAAA,GAAiB,OAAOyuI,cAAP,KAA0B,WAA1B,IACf,qBAAqB,IAAIA,cAAJ,EADvB;CAED,GAHD,CAGE,OAAOxkB,GAAP,EAAY;;;CAGZjqH,kBAAA,GAAiB,KAAjB;CACD;;;CChBD;;;CAIA,qBAAiB,uBAAA,CAAU0uI,IAAV,EAAgB;CAC/B,MAAIC,UAAUD,KAAKC,OAAnB;;;;CAIA,MAAIC,UAAUF,KAAKE,OAAnB;;;;CAIA,MAAIC,aAAaH,KAAKG,UAAtB;;;CAGA,MAAI;CACF,QAAI,gBAAgB,OAAOJ,cAAvB,KAA0C,CAACE,OAAD,IAAYG,OAAtD,CAAJ,EAAoE;CAClE,aAAO,IAAIL,cAAJ,EAAP;CACD;CACF,GAJD,CAIE,OAAO13H,CAAP,EAAU;;;;;CAKZ,MAAI;CACF,QAAI,gBAAgB,OAAOg4H,cAAvB,IAAyC,CAACH,OAA1C,IAAqDC,UAAzD,EAAqE;CACnE,aAAO,IAAIE,cAAJ,EAAP;CACD;CACF,GAJD,CAIE,OAAOh4H,CAAP,EAAU;;CAEZ,MAAI,CAAC43H,OAAL,EAAc;CACZ,QAAI;CACF,aAAO,IAAIpnB,KAAK,CAAC,QAAD,EAAWxyD,MAAX,CAAkB,QAAlB,EAA4B1kC,IAA5B,CAAiC,GAAjC,CAAL,CAAJ,CAAgD,mBAAhD,CAAP;CACD,KAFD,CAEE,OAAOtZ,CAAP,EAAU;CACb;CACF,CAhCD;;CCHA;;;;;;;CAOA,WAAiBnW,OAAOg1C,IAAP,IAAe,SAASA,IAAT,CAAenR,GAAf,EAAmB;CACjD,MAAIinF,MAAM,EAAV;CACA,MAAIsjB,MAAMpuI,OAAOF,SAAP,CAAiBa,cAA3B;;CAEA,OAAK,IAAIub,CAAT,IAAc2nB,GAAd,EAAmB;CACjB,QAAIuqG,IAAIxtI,IAAJ,CAASijC,GAAT,EAAc3nB,CAAd,CAAJ,EAAsB;CACpB4uG,UAAI53F,IAAJ,CAAShX,CAAT;CACD;CACF;CACD,SAAO4uG,GAAP;CACD,CAVD;;;;;;;;;;CCAA,IAAI3qH,aAAWH,OAAOF,SAAP,CAAiBK,QAAhC;CACA,IAAIwqI,mBAAiB,OAAOC,IAAP,KAAgB,UAAhB,IACG,OAAOA,IAAP,KAAgB,WAAhB,IAA+BzqI,WAASS,IAAT,CAAcgqI,IAAd,MAAwB,0BAD/E;CAEA,IAAIC,mBAAiB,OAAOC,IAAP,KAAgB,UAAhB,IACG,OAAOA,IAAP,KAAgB,WAAhB,IAA+B3qI,WAASS,IAAT,CAAckqI,IAAd,MAAwB,0BAD/E;;;;;;CAOA,iBAAiBuD,SAAjB;;;;;;;;;;;CAWA,SAASA,SAAT,CAAoBxqG,GAApB,EAAyB;CACvB,MAAI,CAACA,GAAD,IAAQ,QAAOA,GAAP,2CAAOA,GAAP,OAAe,QAA3B,EAAqC;CACnC,WAAO,KAAP;CACD;;CAED,MAAIhI,QAAQgI,GAAR,CAAJ,EAAkB;CAChB,SAAK,IAAI3nB,IAAI,CAAR,EAAWjS,IAAI45B,IAAIpjC,MAAxB,EAAgCyb,IAAIjS,CAApC,EAAuCiS,GAAvC,EAA4C;CAC1C,UAAImyH,UAAUxqG,IAAI3nB,CAAJ,CAAV,CAAJ,EAAuB;CACrB,eAAO,IAAP;CACD;CACF;CACD,WAAO,KAAP;CACD;;CAED,MAAK,OAAOklH,MAAP,KAAkB,UAAlB,IAAgCqJ,QAAhC,IAAmDA,SAAgB5mG,GAAhB4mG,CAApD,IACD,OAAO3I,WAAP,KAAuB,UAAvB,IAAqCj+F,eAAei+F,WADnD,IAED6I,oBAAkB9mG,eAAe+mG,IAFhC,IAGDC,oBAAkBhnG,eAAeinG,IAHpC,EAIE;CACA,WAAO,IAAP;CACD;;;CAGD,MAAIjnG,IAAI/E,MAAJ,IAAc,OAAO+E,IAAI/E,MAAX,KAAsB,UAApC,IAAkDt+B,UAAUC,MAAV,KAAqB,CAA3E,EAA8E;CAC5E,WAAO4tI,UAAUxqG,IAAI/E,MAAJ,EAAV,EAAwB,IAAxB,CAAP;CACD;;CAED,OAAK,IAAIe,GAAT,IAAgBgE,GAAhB,EAAqB;CACnB,QAAI7jC,OAAOF,SAAP,CAAiBa,cAAjB,CAAgCC,IAAhC,CAAqCijC,GAArC,EAA0ChE,GAA1C,KAAkDwuG,UAAUxqG,IAAIhE,GAAJ,CAAV,CAAtD,EAA2E;CACzE,aAAO,IAAP;CACD;CACF;;CAED,SAAO,KAAP;CACD;;CC/DD;;;;;;;CAOA,wBAAiB,0BAAA,CAASyuG,WAAT,EAAsBzzH,KAAtB,EAA6BC,GAA7B,EAAkC;CACjD,MAAI4rH,QAAQ4H,YAAY9L,UAAxB;CACA3nH,UAAQA,SAAS,CAAjB;CACAC,QAAMA,OAAO4rH,KAAb;;CAEA,MAAI4H,YAAYxiI,KAAhB,EAAuB;CAAE,WAAOwiI,YAAYxiI,KAAZ,CAAkB+O,KAAlB,EAAyBC,GAAzB,CAAP;CAAuC;;CAEhE,MAAID,QAAQ,CAAZ,EAAe;CAAEA,aAAS6rH,KAAT;CAAiB;CAClC,MAAI5rH,MAAM,CAAV,EAAa;CAAEA,WAAO4rH,KAAP;CAAe;CAC9B,MAAI5rH,MAAM4rH,KAAV,EAAiB;CAAE5rH,UAAM4rH,KAAN;CAAc;;CAEjC,MAAI7rH,SAAS6rH,KAAT,IAAkB7rH,SAASC,GAA3B,IAAkC4rH,UAAU,CAAhD,EAAmD;CACjD,WAAO,IAAI5E,WAAJ,CAAgB,CAAhB,CAAP;CACD;;CAED,MAAIyM,MAAM,IAAI15E,UAAJ,CAAey5E,WAAf,CAAV;CACA,MAAInzH,SAAS,IAAI05C,UAAJ,CAAe/5C,MAAMD,KAArB,CAAb;CACA,OAAK,IAAIqB,IAAIrB,KAAR,EAAeg7F,KAAK,CAAzB,EAA4B35F,IAAIpB,GAAhC,EAAqCoB,KAAK25F,IAA1C,EAAgD;CAC9C16F,WAAO06F,EAAP,IAAa04B,IAAIryH,CAAJ,CAAb;CACD;CACD,SAAOf,OAAO4E,MAAd;CACD,CArBD;;CCPA,cAAiByuH,KAAjB;;CAEA,SAASA,KAAT,CAAehuG,KAAf,EAAsBtuB,QAAtB,EAAgCu8H,MAAhC,EAAwC;CACpC,QAAIC,OAAO,KAAX;CACAD,aAASA,UAAU3T,MAAnB;CACA6T,UAAMnuG,KAAN,GAAcA,KAAd;;CAEA,WAAQA,UAAU,CAAX,GAAgBtuB,UAAhB,GAA6By8H,KAApC;;CAEA,aAASA,KAAT,CAAetlB,GAAf,EAAoBluG,MAApB,EAA4B;CACxB,YAAIwzH,MAAMnuG,KAAN,IAAe,CAAnB,EAAsB;CAClB,kBAAM,IAAI0oF,KAAJ,CAAU,6BAAV,CAAN;CACH;CACD,UAAEylB,MAAMnuG,KAAR;;;CAGA,YAAI6oF,GAAJ,EAAS;CACLqlB,mBAAO,IAAP;CACAx8H,qBAASm3G,GAAT;;CAEAn3G,uBAAWu8H,MAAX;CACH,SALD,MAKO,IAAIE,MAAMnuG,KAAN,KAAgB,CAAhB,IAAqB,CAACkuG,IAA1B,EAAgC;CACnCx8H,qBAAS,IAAT,EAAeiJ,MAAf;CACH;CACJ;CACJ;;CAED,SAAS2/G,MAAT,GAAgB;;CC3BhB;;CAEA,IAAI8T,qBAAqBpiC,OAAO+5B,YAAhC;;;CAGA,SAASsI,UAAT,CAAoBvkI,MAApB,EAA4B;CAC3B,KAAIxJ,SAAS,EAAb;CACA,KAAI4nG,UAAU,CAAd;CACA,KAAIjoG,SAAS6J,OAAO7J,MAApB;CACA,KAAI0I,KAAJ;CACA,KAAI2lI,KAAJ;CACA,QAAOpmC,UAAUjoG,MAAjB,EAAyB;CACxB0I,UAAQmB,OAAOqyH,UAAP,CAAkBj0B,SAAlB,CAAR;CACA,MAAIv/F,SAAS,MAAT,IAAmBA,SAAS,MAA5B,IAAsCu/F,UAAUjoG,MAApD,EAA4D;;CAE3DquI,WAAQxkI,OAAOqyH,UAAP,CAAkBj0B,SAAlB,CAAR;CACA,OAAI,CAAComC,QAAQ,MAAT,KAAoB,MAAxB,EAAgC;;CAC/BhuI,WAAOoyB,IAAP,CAAY,CAAC,CAAC/pB,QAAQ,KAAT,KAAmB,EAApB,KAA2B2lI,QAAQ,KAAnC,IAA4C,OAAxD;CACA,IAFD,MAEO;;;CAGNhuI,WAAOoyB,IAAP,CAAY/pB,KAAZ;CACAu/F;CACA;CACD,GAXD,MAWO;CACN5nG,UAAOoyB,IAAP,CAAY/pB,KAAZ;CACA;CACD;CACD,QAAOrI,MAAP;CACA;;;CAGD,SAASiuI,UAAT,CAAoB1hI,KAApB,EAA2B;CAC1B,KAAI5M,SAAS4M,MAAM5M,MAAnB;CACA,KAAIF,QAAQ,CAAC,CAAb;CACA,KAAI4I,KAAJ;CACA,KAAIrI,SAAS,EAAb;CACA,QAAO,EAAEP,KAAF,GAAUE,MAAjB,EAAyB;CACxB0I,UAAQkE,MAAM9M,KAAN,CAAR;CACA,MAAI4I,QAAQ,MAAZ,EAAoB;CACnBA,YAAS,OAAT;CACArI,aAAU8tI,mBAAmBzlI,UAAU,EAAV,GAAe,KAAf,GAAuB,MAA1C,CAAV;CACAA,WAAQ,SAASA,QAAQ,KAAzB;CACA;CACDrI,YAAU8tI,mBAAmBzlI,KAAnB,CAAV;CACA;CACD,QAAOrI,MAAP;CACA;;CAED,SAASkuI,gBAAT,CAA0BlJ,SAA1B,EAAqCmJ,MAArC,EAA6C;CAC5C,KAAInJ,aAAa,MAAb,IAAuBA,aAAa,MAAxC,EAAgD;CAC/C,MAAImJ,MAAJ,EAAY;CACX,SAAM/lB,MACL,sBAAsB4c,UAAU3lI,QAAV,CAAmB,EAAnB,EAAuB+uI,WAAvB,EAAtB,GACA,wBAFK,CAAN;CAIA;CACD,SAAO,KAAP;CACA;CACD,QAAO,IAAP;CACA;;;CAGD,SAASC,UAAT,CAAoBrJ,SAApB,EAA+B1nF,KAA/B,EAAsC;CACrC,QAAOwwF,mBAAqB9I,aAAa1nF,KAAd,GAAuB,IAAxB,GAAgC,IAAnD,CAAP;CACA;;CAED,SAASgxF,eAAT,CAAyBtJ,SAAzB,EAAoCmJ,MAApC,EAA4C;CAC3C,KAAI,CAACnJ,YAAY,UAAb,KAA4B,CAAhC,EAAmC;;CAClC,SAAO8I,mBAAmB9I,SAAnB,CAAP;CACA;CACD,KAAIuJ,SAAS,EAAb;CACA,KAAI,CAACvJ,YAAY,UAAb,KAA4B,CAAhC,EAAmC;;CAClCuJ,WAAST,mBAAqB9I,aAAa,CAAd,GAAmB,IAApB,GAA4B,IAA/C,CAAT;CACA,EAFD,MAGK,IAAI,CAACA,YAAY,UAAb,KAA4B,CAAhC,EAAmC;;CACvC,MAAI,CAACkJ,iBAAiBlJ,SAAjB,EAA4BmJ,MAA5B,CAAL,EAA0C;CACzCnJ,eAAY,MAAZ;CACA;CACDuJ,WAAST,mBAAqB9I,aAAa,EAAd,GAAoB,IAArB,GAA6B,IAAhD,CAAT;CACAuJ,YAAUF,WAAWrJ,SAAX,EAAsB,CAAtB,CAAV;CACA,EANI,MAOA,IAAI,CAACA,YAAY,UAAb,KAA4B,CAAhC,EAAmC;;CACvCuJ,WAAST,mBAAqB9I,aAAa,EAAd,GAAoB,IAArB,GAA6B,IAAhD,CAAT;CACAuJ,YAAUF,WAAWrJ,SAAX,EAAsB,EAAtB,CAAV;CACAuJ,YAAUF,WAAWrJ,SAAX,EAAsB,CAAtB,CAAV;CACA;CACDuJ,WAAUT,mBAAoB9I,YAAY,IAAb,GAAqB,IAAxC,CAAV;CACA,QAAOuJ,MAAP;CACA;;CAED,SAASC,UAAT,CAAoBhlI,MAApB,EAA4BwjI,IAA5B,EAAkC;CACjCA,QAAOA,QAAQ,EAAf;CACA,KAAImB,SAAS,UAAUnB,KAAKmB,MAA5B;;CAEA,KAAI3I,aAAauI,WAAWvkI,MAAX,CAAjB;CACA,KAAI7J,SAAS6lI,WAAW7lI,MAAxB;CACA,KAAIF,QAAQ,CAAC,CAAb;CACA,KAAIulI,SAAJ;CACA,KAAIyJ,aAAa,EAAjB;CACA,QAAO,EAAEhvI,KAAF,GAAUE,MAAjB,EAAyB;CACxBqlI,cAAYQ,WAAW/lI,KAAX,CAAZ;CACAgvI,gBAAcH,gBAAgBtJ,SAAhB,EAA2BmJ,MAA3B,CAAd;CACA;CACD,QAAOM,UAAP;CACA;;;;CAID,SAASC,oBAAT,GAAgC;CAC/B,KAAIC,aAAaC,SAAjB,EAA4B;CAC3B,QAAMxmB,MAAM,oBAAN,CAAN;CACA;;CAED,KAAIymB,mBAAmBzF,UAAUuF,SAAV,IAAuB,IAA9C;CACAA;;CAEA,KAAI,CAACE,mBAAmB,IAApB,KAA6B,IAAjC,EAAuC;CACtC,SAAOA,mBAAmB,IAA1B;CACA;;;CAGD,OAAMzmB,MAAM,2BAAN,CAAN;CACA;;CAED,SAAS0mB,YAAT,CAAsBX,MAAtB,EAA8B;CAC7B,KAAIY,KAAJ;CACA,KAAIC,KAAJ;CACA,KAAIC,KAAJ;CACA,KAAIC,KAAJ;CACA,KAAIlK,SAAJ;;CAEA,KAAI2J,YAAYC,SAAhB,EAA2B;CAC1B,QAAMxmB,MAAM,oBAAN,CAAN;CACA;;CAED,KAAIumB,aAAaC,SAAjB,EAA4B;CAC3B,SAAO,KAAP;CACA;;;CAGDG,SAAQ3F,UAAUuF,SAAV,IAAuB,IAA/B;CACAA;;;CAGA,KAAI,CAACI,QAAQ,IAAT,KAAkB,CAAtB,EAAyB;CACxB,SAAOA,KAAP;CACA;;;CAGD,KAAI,CAACA,QAAQ,IAAT,KAAkB,IAAtB,EAA4B;CAC3BC,UAAQN,sBAAR;CACA1J,cAAa,CAAC+J,QAAQ,IAAT,KAAkB,CAAnB,GAAwBC,KAApC;CACA,MAAIhK,aAAa,IAAjB,EAAuB;CACtB,UAAOA,SAAP;CACA,GAFD,MAEO;CACN,SAAM5c,MAAM,2BAAN,CAAN;CACA;CACD;;;CAGD,KAAI,CAAC2mB,QAAQ,IAAT,KAAkB,IAAtB,EAA4B;CAC3BC,UAAQN,sBAAR;CACAO,UAAQP,sBAAR;CACA1J,cAAa,CAAC+J,QAAQ,IAAT,KAAkB,EAAnB,GAA0BC,SAAS,CAAnC,GAAwCC,KAApD;CACA,MAAIjK,aAAa,MAAjB,EAAyB;CACxB,UAAOkJ,iBAAiBlJ,SAAjB,EAA4BmJ,MAA5B,IAAsCnJ,SAAtC,GAAkD,MAAzD;CACA,GAFD,MAEO;CACN,SAAM5c,MAAM,2BAAN,CAAN;CACA;CACD;;;CAGD,KAAI,CAAC2mB,QAAQ,IAAT,KAAkB,IAAtB,EAA4B;CAC3BC,UAAQN,sBAAR;CACAO,UAAQP,sBAAR;CACAQ,UAAQR,sBAAR;CACA1J,cAAa,CAAC+J,QAAQ,IAAT,KAAkB,IAAnB,GAA4BC,SAAS,IAArC,GACVC,SAAS,IADC,GACOC,KADnB;CAEA,MAAIlK,aAAa,QAAb,IAAyBA,aAAa,QAA1C,EAAoD;CACnD,UAAOA,SAAP;CACA;CACD;;CAED,OAAM5c,MAAM,wBAAN,CAAN;CACA;;CAED,IAAIghB,SAAJ;CACA,IAAIwF,SAAJ;CACA,IAAID,SAAJ;CACA,SAASQ,UAAT,CAAoBV,UAApB,EAAgCzB,IAAhC,EAAsC;CACrCA,QAAOA,QAAQ,EAAf;CACA,KAAImB,SAAS,UAAUnB,KAAKmB,MAA5B;;CAEA/E,aAAY2E,WAAWU,UAAX,CAAZ;CACAG,aAAYxF,UAAUzpI,MAAtB;CACAgvI,aAAY,CAAZ;CACA,KAAInJ,aAAa,EAAjB;CACA,KAAIzlH,GAAJ;CACA,QAAO,CAACA,MAAM+uH,aAAaX,MAAb,CAAP,MAAiC,KAAxC,EAA+C;CAC9C3I,aAAWpzG,IAAX,CAAgBrS,GAAhB;CACA;CACD,QAAOkuH,WAAWzI,UAAX,CAAP;CACA;;CAED,WAAiB;CAChBhnG,UAAS,OADO;CAEhB+sG,SAAQiD,UAFQ;CAGhBY,SAAQD;CAHQ,CAAjB;;;CC7MA;;;;;;;CAOA,GAAC,YAAU;AACT;CAEA,QAAIzgH,QAAQ,kEAAZ;;;CAGA,QAAIgwG,SAAS,IAAI3qE,UAAJ,CAAe,GAAf,CAAb;CACA,SAAK,IAAI34C,IAAI,CAAb,EAAgBA,IAAIsT,MAAM/uB,MAA1B,EAAkCyb,GAAlC,EAAuC;CACrCsjH,aAAOhwG,MAAMmtG,UAAN,CAAiBzgH,CAAjB,CAAP,IAA8BA,CAA9B;CACD;;CAEDkqG,kBAAA,GAAiB,UAASkoB,WAAT,EAAsB;CACrC,UAAI5H,QAAQ,IAAI7xE,UAAJ,CAAey5E,WAAf,CAAZ;CAAA,UACApyH,CADA;CAAA,UACG5I,MAAMozH,MAAMjmI,MADf;CAAA,UACuBklI,SAAS,EADhC;;CAGA,WAAKzpH,IAAI,CAAT,EAAYA,IAAI5I,GAAhB,EAAqB4I,KAAG,CAAxB,EAA2B;CACzBypH,kBAAUn2G,MAAMk3G,MAAMxqH,CAAN,KAAY,CAAlB,CAAV;CACAypH,kBAAUn2G,MAAO,CAACk3G,MAAMxqH,CAAN,IAAW,CAAZ,KAAkB,CAAnB,GAAyBwqH,MAAMxqH,IAAI,CAAV,KAAgB,CAA/C,CAAV;CACAypH,kBAAUn2G,MAAO,CAACk3G,MAAMxqH,IAAI,CAAV,IAAe,EAAhB,KAAuB,CAAxB,GAA8BwqH,MAAMxqH,IAAI,CAAV,KAAgB,CAApD,CAAV;CACAypH,kBAAUn2G,MAAMk3G,MAAMxqH,IAAI,CAAV,IAAe,EAArB,CAAV;CACD;;CAED,UAAK5I,MAAM,CAAP,KAAc,CAAlB,EAAqB;CACnBqyH,iBAASA,OAAOtzE,SAAP,CAAiB,CAAjB,EAAoBszE,OAAOllI,MAAP,GAAgB,CAApC,IAAyC,GAAlD;CACD,OAFD,MAEO,IAAI6S,MAAM,CAAN,KAAY,CAAhB,EAAmB;CACxBqyH,iBAASA,OAAOtzE,SAAP,CAAiB,CAAjB,EAAoBszE,OAAOllI,MAAP,GAAgB,CAApC,IAAyC,IAAlD;CACD;;CAED,aAAOklI,MAAP;CACD,KAlBD;;CAoBAvf,kBAAA,GAAkB,UAASuf,MAAT,EAAiB;CACjC,UAAIwK,eAAexK,OAAOllI,MAAP,GAAgB,IAAnC;CAAA,UACA6S,MAAMqyH,OAAOllI,MADb;CAAA,UACqByb,CADrB;CAAA,UACwBtS,IAAI,CAD5B;CAAA,UAEAwmI,QAFA;CAAA,UAEUC,QAFV;CAAA,UAEoBC,QAFpB;CAAA,UAE8BC,QAF9B;;CAIA,UAAI5K,OAAOA,OAAOllI,MAAP,GAAgB,CAAvB,MAA8B,GAAlC,EAAuC;CACrC0vI;CACA,YAAIxK,OAAOA,OAAOllI,MAAP,GAAgB,CAAvB,MAA8B,GAAlC,EAAuC;CACrC0vI;CACD;CACF;;CAED,UAAI7B,cAAc,IAAIxM,WAAJ,CAAgBqO,YAAhB,CAAlB;CAAA,UACAzJ,QAAQ,IAAI7xE,UAAJ,CAAey5E,WAAf,CADR;;CAGA,WAAKpyH,IAAI,CAAT,EAAYA,IAAI5I,GAAhB,EAAqB4I,KAAG,CAAxB,EAA2B;CACzBk0H,mBAAW5Q,OAAOmG,OAAOhJ,UAAP,CAAkBzgH,CAAlB,CAAP,CAAX;CACAm0H,mBAAW7Q,OAAOmG,OAAOhJ,UAAP,CAAkBzgH,IAAE,CAApB,CAAP,CAAX;CACAo0H,mBAAW9Q,OAAOmG,OAAOhJ,UAAP,CAAkBzgH,IAAE,CAApB,CAAP,CAAX;CACAq0H,mBAAW/Q,OAAOmG,OAAOhJ,UAAP,CAAkBzgH,IAAE,CAApB,CAAP,CAAX;;CAEAwqH,cAAM98H,GAAN,IAAcwmI,YAAY,CAAb,GAAmBC,YAAY,CAA5C;CACA3J,cAAM98H,GAAN,IAAc,CAACymI,WAAW,EAAZ,KAAmB,CAApB,GAA0BC,YAAY,CAAnD;CACA5J,cAAM98H,GAAN,IAAc,CAAC0mI,WAAW,CAAZ,KAAkB,CAAnB,GAAyBC,WAAW,EAAjD;CACD;;CAED,aAAOjC,WAAP;CACD,KA3BD;CA4BD,GA3DD;;;;;CCPA;;;;CAIA,IAAIkC,cAAc,OAAOA,WAAP,KAAuB,WAAvB,GAAqCA,WAArC,GAChB,OAAOC,iBAAP,KAA6B,WAA7B,GAA2CA,iBAA3C,GACA,OAAOC,aAAP,KAAyB,WAAzB,GAAuCA,aAAvC,GACA,OAAOC,cAAP,KAA0B,WAA1B,GAAwCA,cAAxC,GACA,KAJF;;;;;;CAUA,IAAIC,gBAAiB,YAAW;CAC9B,MAAI;CACF,QAAI5/H,IAAI,IAAI45H,IAAJ,CAAS,CAAC,IAAD,CAAT,CAAR;CACA,WAAO55H,EAAE/F,IAAF,KAAW,CAAlB;CACD,GAHD,CAGE,OAAMkL,CAAN,EAAS;CACT,WAAO,KAAP;CACD;CACF,CAPmB,EAApB;;;;;;;CAcA,IAAI06H,8BAA8BD,iBAAkB,YAAW;CAC7D,MAAI;CACF,QAAI7nI,IAAI,IAAI6hI,IAAJ,CAAS,CAAC,IAAI/1E,UAAJ,CAAe,CAAC,CAAD,EAAG,CAAH,CAAf,CAAD,CAAT,CAAR;CACA,WAAO9rD,EAAEkC,IAAF,KAAW,CAAlB;CACD,GAHD,CAGE,OAAMkL,CAAN,EAAS;CACT,WAAO,KAAP;CACD;CACF,CAPkD,EAAnD;;;;;;CAaA,IAAI26H,uBAAuBN,eACtBA,YAAY1wI,SAAZ,CAAsBixI,MADA,IAEtBP,YAAY1wI,SAAZ,CAAsBkxI,OAF3B;;;;;;;;CAUA,SAASC,mBAAT,CAA6BC,GAA7B,EAAkC;CAChC,SAAOA,IAAI9lF,GAAJ,CAAQ,UAAS+lF,KAAT,EAAgB;CAC7B,QAAIA,MAAMpxH,MAAN,YAAwB+hH,WAA5B,EAAyC;CACvC,UAAImB,MAAMkO,MAAMpxH,MAAhB;;;;CAIA,UAAIoxH,MAAM3O,UAAN,KAAqBS,IAAIT,UAA7B,EAAyC;CACvC,YAAIp5H,OAAO,IAAIyrD,UAAJ,CAAes8E,MAAM3O,UAArB,CAAX;CACAp5H,aAAKJ,GAAL,CAAS,IAAI6rD,UAAJ,CAAeouE,GAAf,EAAoBkO,MAAMxO,UAA1B,EAAsCwO,MAAM3O,UAA5C,CAAT;CACAS,cAAM75H,KAAK2W,MAAX;CACD;;CAED,aAAOkjH,GAAP;CACD;;CAED,WAAOkO,KAAP;CACD,GAhBM,CAAP;CAiBD;;CAED,SAASC,sBAAT,CAAgCF,GAAhC,EAAqC/oF,OAArC,EAA8C;CAC5CA,YAAUA,WAAW,EAArB;;CAEA,MAAIkpF,KAAK,IAAIb,WAAJ,EAAT;CACAS,sBAAoBC,GAApB,EAAyBI,OAAzB,CAAiC,UAASC,IAAT,EAAe;CAC9CF,OAAGN,MAAH,CAAUQ,IAAV;CACD,GAFD;;CAIA,SAAQppF,QAAQnvB,IAAT,GAAiBq4G,GAAGL,OAAH,CAAW7oF,QAAQnvB,IAAnB,CAAjB,GAA4Cq4G,GAAGL,OAAH,EAAnD;CACD;CAED,SAASQ,eAAT,CAAyBN,GAAzB,EAA8B/oF,OAA9B,EAAuC;CACrC,SAAO,IAAIyiF,IAAJ,CAASqG,oBAAoBC,GAApB,CAAT,EAAmC/oF,WAAW,EAA9C,CAAP;CACD;CAED,IAAI,OAAOyiF,IAAP,KAAgB,WAApB,EAAiC;CAC/BwG,yBAAuBtxI,SAAvB,GAAmC8qI,KAAK9qI,SAAxC;CACA0xI,kBAAgB1xI,SAAhB,GAA4B8qI,KAAK9qI,SAAjC;CACD;;CAED,WAAkB,YAAW;CAC3B,MAAI8wI,aAAJ,EAAmB;CACjB,WAAOC,8BAA8BjG,IAA9B,GAAqC4G,eAA5C;CACD,GAFD,MAEO,IAAIV,oBAAJ,EAA0B;CAC/B,WAAOM,sBAAP;CACD,GAFM,MAEA;CACL,WAAO5xI,SAAP;CACD;CACF,CARgB,EAAjB;;;CC3FA;;;;CAUA,MAAIiyI,aAAJ;CACA,MAAI,OAAO3P,WAAP,KAAuB,WAA3B,EAAwC;CACtC2P,oBAAgB7Z,iBAAhB;CACD;;;;;;;;;CASD,MAAI8Z,YAAY,OAAO1T,SAAP,KAAqB,WAArB,IAAoC,WAAW/jG,IAAX,CAAgB+jG,UAAUC,SAA1B,CAApD;;;;;;;;CAQA,MAAI0T,cAAc,OAAO3T,SAAP,KAAqB,WAArB,IAAoC,aAAa/jG,IAAb,CAAkB+jG,UAAUC,SAA5B,CAAtD;;;;;;CAMA,MAAI2T,gBAAgBF,aAAaC,WAAjC;;;;;;CAMAvrB,kBAAA,GAAmB,CAAnB;;;;;;CAMA,MAAIyrB,UAAUzrB,eAAA,GAAkB;CAC5B50D,UAAU,CADkB;CAAA,MAE5BsgF,OAAU,CAFkB;CAAA,MAG5BC,MAAU,CAHkB;CAI5BC,UAAU,CAJkB;CAK5B9zF,aAAU,CALkB;CAM5B+zF,aAAU,CANkB;CAO5BnX,UAAU;CAPkB,GAAhC;;CAUA,MAAIoX,cAAcl9F,KAAK68F,OAAL,CAAlB;;;;;;CAMA,MAAIxoB,MAAM,EAAErwF,MAAM,OAAR,EAAiB8G,MAAM,cAAvB,EAAV;;;;;;;;;;;;;;;;;;;;;;CAwBAsmF,sBAAA,GAAuB,UAAU2kB,MAAV,EAAkBoH,cAAlB,EAAkC7C,UAAlC,EAA8Cp9H,QAA9C,EAAwD;CAC7E,QAAI,OAAOigI,cAAP,KAA0B,UAA9B,EAA0C;CACxCjgI,iBAAWigI,cAAX;CACAA,uBAAiB,KAAjB;CACD;;CAED,QAAI,OAAO7C,UAAP,KAAsB,UAA1B,EAAsC;CACpCp9H,iBAAWo9H,UAAX;CACAA,mBAAa,IAAb;CACD;;CAED,QAAIxvG,OAAQirG,OAAOjrG,IAAP,KAAgBtgC,SAAjB,GACPA,SADO,GAEPurI,OAAOjrG,IAAP,CAAY/f,MAAZ,IAAsBgrH,OAAOjrG,IAFjC;;CAIA,QAAI,OAAOgiG,WAAP,KAAuB,WAAvB,IAAsChiG,gBAAgBgiG,WAA1D,EAAuE;CACrE,aAAOsQ,kBAAkBrH,MAAlB,EAA0BoH,cAA1B,EAA0CjgI,QAA1C,CAAP;CACD,KAFD,MAEO,IAAI,OAAO04H,IAAP,KAAgB,WAAhB,IAA+B9qG,gBAAgB8qG,IAAnD,EAAyD;CAC9D,aAAOyH,WAAWtH,MAAX,EAAmBoH,cAAnB,EAAmCjgI,QAAnC,CAAP;CACD;;;CAGD,QAAI4tB,QAAQA,KAAK6lG,MAAjB,EAAyB;CACvB,aAAO2M,mBAAmBvH,MAAnB,EAA2B74H,QAA3B,CAAP;CACD;;;CAGD,QAAIqgI,UAAUV,QAAQ9G,OAAO/xG,IAAf,CAAd;;;CAGA,QAAIx5B,cAAcurI,OAAOjrG,IAAzB,EAA+B;CAC7ByyG,iBAAWjD,aAAakD,KAAKnG,MAAL,CAAY7/B,OAAOu+B,OAAOjrG,IAAd,CAAZ,EAAiC,EAAEmvG,QAAQ,KAAV,EAAjC,CAAb,GAAmEziC,OAAOu+B,OAAOjrG,IAAd,CAA9E;CACD;;CAED,WAAO5tB,SAAS,KAAKqgI,OAAd,CAAP;CAED,GApCD;;CAsCA,WAASD,kBAAT,CAA4BvH,MAA5B,EAAoC74H,QAApC,EAA8C;;CAE5C,QAAIgsC,UAAU,MAAMkoE,QAAQyrB,OAAR,CAAgB9G,OAAO/xG,IAAvB,CAAN,GAAqC+xG,OAAOjrG,IAAP,CAAYA,IAA/D;CACA,WAAO5tB,SAASgsC,OAAT,CAAP;CACD;;;;;;CAMD,WAASk0F,iBAAT,CAA2BrH,MAA3B,EAAmCoH,cAAnC,EAAmDjgI,QAAnD,EAA6D;CAC3D,QAAI,CAACigI,cAAL,EAAqB;CACnB,aAAO/rB,QAAQqsB,kBAAR,CAA2B1H,MAA3B,EAAmC74H,QAAnC,CAAP;CACD;;CAED,QAAI4tB,OAAOirG,OAAOjrG,IAAlB;CACA,QAAI4yG,eAAe,IAAI79E,UAAJ,CAAe/0B,IAAf,CAAnB;CACA,QAAIhL,eAAe,IAAI+/B,UAAJ,CAAe,IAAI/0B,KAAK0iG,UAAxB,CAAnB;;CAEA1tG,iBAAa,CAAb,IAAkB+8G,QAAQ9G,OAAO/xG,IAAf,CAAlB;CACA,SAAK,IAAI9c,IAAI,CAAb,EAAgBA,IAAIw2H,aAAajyI,MAAjC,EAAyCyb,GAAzC,EAA8C;CAC5C4Y,mBAAa5Y,IAAE,CAAf,IAAoBw2H,aAAax2H,CAAb,CAApB;CACD;;CAED,WAAOhK,SAAS4iB,aAAa/U,MAAtB,CAAP;CACD;;CAED,WAAS4yH,uBAAT,CAAiC5H,MAAjC,EAAyCoH,cAAzC,EAAyDjgI,QAAzD,EAAmE;CACjE,QAAI,CAACigI,cAAL,EAAqB;CACnB,aAAO/rB,QAAQqsB,kBAAR,CAA2B1H,MAA3B,EAAmC74H,QAAnC,CAAP;CACD;;CAED,QAAI0gI,KAAK,IAAI/G,UAAJ,EAAT;CACA+G,OAAG9G,MAAH,GAAY,YAAW;CACrB1lB,cAAQysB,YAAR,CAAqB,EAAE75G,MAAM+xG,OAAO/xG,IAAf,EAAqB8G,MAAM8yG,GAAGz3H,MAA9B,EAArB,EAA6Dg3H,cAA7D,EAA6E,IAA7E,EAAmFjgI,QAAnF;CACD,KAFD;CAGA,WAAO0gI,GAAG5G,iBAAH,CAAqBjB,OAAOjrG,IAA5B,CAAP;CACD;;CAED,WAASuyG,UAAT,CAAoBtH,MAApB,EAA4BoH,cAA5B,EAA4CjgI,QAA5C,EAAsD;CACpD,QAAI,CAACigI,cAAL,EAAqB;CACnB,aAAO/rB,QAAQqsB,kBAAR,CAA2B1H,MAA3B,EAAmC74H,QAAnC,CAAP;CACD;;CAED,QAAI0/H,aAAJ,EAAmB;CACjB,aAAOe,wBAAwB5H,MAAxB,EAAgCoH,cAAhC,EAAgDjgI,QAAhD,CAAP;CACD;;CAED,QAAIzR,SAAS,IAAIo0D,UAAJ,CAAe,CAAf,CAAb;CACAp0D,WAAO,CAAP,IAAYoxI,QAAQ9G,OAAO/xG,IAAf,CAAZ;CACA,QAAI85G,SAAO,IAAIlI,IAAJ,CAAS,CAACnqI,OAAOsf,MAAR,EAAgBgrH,OAAOjrG,IAAvB,CAAT,CAAX;;CAEA,WAAO5tB,SAAS4gI,MAAT,CAAP;CACD;;;;;;;;;CASD1sB,4BAAA,GAA6B,UAAS2kB,MAAT,EAAiB74H,QAAjB,EAA2B;CACtD,QAAIgsC,UAAU,MAAMkoE,QAAQyrB,OAAR,CAAgB9G,OAAO/xG,IAAvB,CAApB;CACA,QAAI,OAAO4xG,IAAP,KAAgB,WAAhB,IAA+BG,OAAOjrG,IAAP,YAAuB8qG,IAA1D,EAAgE;CAC9D,UAAIgI,KAAK,IAAI/G,UAAJ,EAAT;CACA+G,SAAG9G,MAAH,GAAY,YAAW;CACrB,YAAIjM,MAAM+S,GAAGz3H,MAAH,CAAUiU,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAV;CACAld,iBAASgsC,UAAU2hF,GAAnB;CACD,OAHD;CAIA,aAAO+S,GAAGG,aAAH,CAAiBhI,OAAOjrG,IAAxB,CAAP;CACD;;CAED,QAAIkzG,OAAJ;CACA,QAAI;CACFA,gBAAUxmC,OAAO+5B,YAAP,CAAoBjvF,KAApB,CAA0B,IAA1B,EAAgC,IAAIud,UAAJ,CAAek2E,OAAOjrG,IAAtB,CAAhC,CAAV;CACD,KAFD,CAEE,OAAO3pB,CAAP,EAAU;;CAEV,UAAI88H,QAAQ,IAAIp+E,UAAJ,CAAek2E,OAAOjrG,IAAtB,CAAZ;CACA,UAAIozG,QAAQ,IAAIt3G,KAAJ,CAAUq3G,MAAMxyI,MAAhB,CAAZ;CACA,WAAK,IAAIyb,IAAI,CAAb,EAAgBA,IAAI+2H,MAAMxyI,MAA1B,EAAkCyb,GAAlC,EAAuC;CACrCg3H,cAAMh3H,CAAN,IAAW+2H,MAAM/2H,CAAN,CAAX;CACD;CACD82H,gBAAUxmC,OAAO+5B,YAAP,CAAoBjvF,KAApB,CAA0B,IAA1B,EAAgC47F,KAAhC,CAAV;CACD;CACDh1F,eAAWi1F,KAAKH,OAAL,CAAX;CACA,WAAO9gI,SAASgsC,OAAT,CAAP;CACD,GAzBD;;;;;;;;;CAkCAkoE,sBAAA,GAAuB,UAAUtmF,IAAV,EAAgBszG,UAAhB,EAA4BnD,UAA5B,EAAwC;CAC7D,QAAInwG,SAAStgC,SAAb,EAAwB;CACtB,aAAO6pH,GAAP;CACD;;CAED,QAAI,OAAOvpF,IAAP,KAAgB,QAApB,EAA8B;CAC5B,UAAIA,KAAK50B,MAAL,CAAY,CAAZ,MAAmB,GAAvB,EAA4B;CAC1B,eAAOk7G,QAAQitB,kBAAR,CAA2BvzG,KAAKy9F,MAAL,CAAY,CAAZ,CAA3B,EAA2C6V,UAA3C,CAAP;CACD;;CAED,UAAInD,UAAJ,EAAgB;CACdnwG,eAAOwzG,UAAUxzG,IAAV,CAAP;CACA,YAAIA,SAAS,KAAb,EAAoB;CAClB,iBAAOupF,GAAP;CACD;CACF;CACD,UAAIrwF,OAAO8G,KAAK50B,MAAL,CAAY,CAAZ,CAAX;;CAEA,UAAI5L,OAAO05B,IAAP,KAAgBA,IAAhB,IAAwB,CAACk5G,YAAYl5G,IAAZ,CAA7B,EAAgD;CAC9C,eAAOqwF,GAAP;CACD;;CAED,UAAIvpF,KAAKr/B,MAAL,GAAc,CAAlB,EAAqB;CACnB,eAAO,EAAEu4B,MAAMk5G,YAAYl5G,IAAZ,CAAR,EAA2B8G,MAAMA,KAAKuyB,SAAL,CAAe,CAAf,CAAjC,EAAP;CACD,OAFD,MAEO;CACL,eAAO,EAAEr5B,MAAMk5G,YAAYl5G,IAAZ,CAAR,EAAP;CACD;CACF;;CAED,QAAIu6G,UAAU,IAAI1+E,UAAJ,CAAe/0B,IAAf,CAAd;CACA,QAAI9G,OAAOu6G,QAAQ,CAAR,CAAX;CACA,QAAIC,OAAOC,kBAAY3zG,IAAZ,EAAkB,CAAlB,CAAX;CACA,QAAI8qG,QAAQwI,eAAe,MAA3B,EAAmC;CACjCI,aAAO,IAAI5I,IAAJ,CAAS,CAAC4I,IAAD,CAAT,CAAP;CACD;CACD,WAAO,EAAEx6G,MAAMk5G,YAAYl5G,IAAZ,CAAR,EAA2B8G,MAAM0zG,IAAjC,EAAP;CACD,GApCD;;CAsCA,WAASF,SAAT,CAAmBxzG,IAAnB,EAAyB;CACvB,QAAI;CACFA,aAAO0yG,KAAKtC,MAAL,CAAYpwG,IAAZ,EAAkB,EAAEmvG,QAAQ,KAAV,EAAlB,CAAP;CACD,KAFD,CAEE,OAAO94H,CAAP,EAAU;CACV,aAAO,KAAP;CACD;CACD,WAAO2pB,IAAP;CACD;;;;;;;;;CASDsmF,4BAAA,GAA6B,UAAS1lG,GAAT,EAAc0yH,UAAd,EAA0B;CACrD,QAAIp6G,OAAOk5G,YAAYxxH,IAAIxV,MAAJ,CAAW,CAAX,CAAZ,CAAX;CACA,QAAI,CAACumI,aAAL,EAAoB;CAClB,aAAO,EAAEz4G,MAAMA,IAAR,EAAc8G,MAAM,EAAE6lG,QAAQ,IAAV,EAAgB7lG,MAAMpf,IAAI68G,MAAJ,CAAW,CAAX,CAAtB,EAApB,EAAP;CACD;;CAED,QAAIz9F,OAAO2xG,cAAcvB,MAAd,CAAqBxvH,IAAI68G,MAAJ,CAAW,CAAX,CAArB,CAAX;;CAEA,QAAI6V,eAAe,MAAf,IAAyBxI,IAA7B,EAAmC;CACjC9qG,aAAO,IAAI8qG,IAAJ,CAAS,CAAC9qG,IAAD,CAAT,CAAP;CACD;;CAED,WAAO,EAAE9G,MAAMA,IAAR,EAAc8G,MAAMA,IAApB,EAAP;CACD,GAbD;;;;;;;;;;;;;;;;;;CA+BAsmF,uBAAA,GAAwB,UAAUyrB,OAAV,EAAmBM,cAAnB,EAAmCjgI,QAAnC,EAA6C;CACnE,QAAI,OAAOigI,cAAP,KAA0B,UAA9B,EAA0C;CACxCjgI,iBAAWigI,cAAX;CACAA,uBAAiB,IAAjB;CACD;;CAED,QAAIuB,WAAWrF,WAAUwD,OAAV,CAAf;;CAEA,QAAIM,kBAAkBuB,QAAtB,EAAgC;CAC9B,UAAI9I,QAAQ,CAACgH,aAAb,EAA4B;CAC1B,eAAOxrB,QAAQutB,mBAAR,CAA4B9B,OAA5B,EAAqC3/H,QAArC,CAAP;CACD;;CAED,aAAOk0G,QAAQwtB,0BAAR,CAAmC/B,OAAnC,EAA4C3/H,QAA5C,CAAP;CACD;;CAED,QAAI,CAAC2/H,QAAQpxI,MAAb,EAAqB;CACnB,aAAOyR,SAAS,IAAT,CAAP;CACD;;CAED,aAAS2hI,eAAT,CAAyB31F,OAAzB,EAAkC;CAChC,aAAOA,QAAQz9C,MAAR,GAAiB,GAAjB,GAAuBy9C,OAA9B;CACD;;CAED,aAAS41F,SAAT,CAAmB/I,MAAnB,EAA2BgJ,YAA3B,EAAyC;CACvC3tB,cAAQysB,YAAR,CAAqB9H,MAArB,EAA6B,CAAC2I,QAAD,GAAY,KAAZ,GAAoBvB,cAAjD,EAAiE,KAAjE,EAAwE,UAASj0F,OAAT,EAAkB;CACxF61F,qBAAa,IAAb,EAAmBF,gBAAgB31F,OAAhB,CAAnB;CACD,OAFD;CAGD;;CAEDkN,QAAIymF,OAAJ,EAAaiC,SAAb,EAAwB,UAASzqB,GAAT,EAAcrnE,OAAd,EAAuB;CAC7C,aAAO9vC,SAAS8vC,QAAQvyB,IAAR,CAAa,EAAb,CAAT,CAAP;CACD,KAFD;CAGD,GAjCD;;;;;;CAuCA,WAAS27B,GAAT,CAAa8lF,GAAb,EAAkB8C,IAAlB,EAAwBC,IAAxB,EAA8B;CAC5B,QAAI94H,SAAS,IAAIygB,KAAJ,CAAUs1G,IAAIzwI,MAAd,CAAb;CACA,QAAI06F,OAAOqzC,QAAM0C,IAAIzwI,MAAV,EAAkBwzI,IAAlB,CAAX;;CAEA,QAAIC,gBAAgB,SAAhBA,aAAgB,CAASh4H,CAAT,EAAYi4H,EAAZ,EAAgBtvG,EAAhB,EAAoB;CACtCmvG,WAAKG,EAAL,EAAS,UAASp+H,KAAT,EAAgB2K,GAAhB,EAAqB;CAC5BvF,eAAOe,CAAP,IAAYwE,GAAZ;CACAmkB,WAAG9uB,KAAH,EAAUoF,MAAV;CACD,OAHD;CAID,KALD;;CAOA,SAAK,IAAIe,IAAI,CAAb,EAAgBA,IAAIg1H,IAAIzwI,MAAxB,EAAgCyb,GAAhC,EAAqC;CACnCg4H,oBAAch4H,CAAd,EAAiBg1H,IAAIh1H,CAAJ,CAAjB,EAAyBi/E,IAAzB;CACD;CACF;;;;;;;;;;CAUDirB,uBAAA,GAAwB,UAAUtmF,IAAV,EAAgBszG,UAAhB,EAA4BlhI,QAA5B,EAAsC;CAC5D,QAAI,OAAO4tB,IAAP,KAAgB,QAApB,EAA8B;CAC5B,aAAOsmF,QAAQguB,qBAAR,CAA8Bt0G,IAA9B,EAAoCszG,UAApC,EAAgDlhI,QAAhD,CAAP;CACD;;CAED,QAAI,OAAOkhI,UAAP,KAAsB,UAA1B,EAAsC;CACpClhI,iBAAWkhI,UAAX;CACAA,mBAAa,IAAb;CACD;;CAED,QAAIrI,MAAJ;CACA,QAAIjrG,SAAS,EAAb,EAAiB;;CAEf,aAAO5tB,SAASm3G,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAAP;CACD;;CAED,QAAI5oH,SAAS,EAAb;CAAA,QAAiBgjB,CAAjB;CAAA,QAAoB/C,GAApB;;CAEA,SAAK,IAAIxE,IAAI,CAAR,EAAWjS,IAAI61B,KAAKr/B,MAAzB,EAAiCyb,IAAIjS,CAArC,EAAwCiS,GAAxC,EAA6C;CAC3C,UAAIm4H,MAAMv0G,KAAK50B,MAAL,CAAYgR,CAAZ,CAAV;;CAEA,UAAIm4H,QAAQ,GAAZ,EAAiB;CACf5zI,kBAAU4zI,GAAV;CACA;CACD;;CAED,UAAI5zI,WAAW,EAAX,IAAkBA,WAAWgjB,IAAInkB,OAAOmB,MAAP,CAAf,CAAtB,EAAuD;;CAErD,eAAOyR,SAASm3G,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAAP;CACD;;CAED3oG,YAAMof,KAAKy9F,MAAL,CAAYrhH,IAAI,CAAhB,EAAmBuH,CAAnB,CAAN;;CAEA,UAAIhjB,UAAUigB,IAAIjgB,MAAlB,EAA0B;;CAExB,eAAOyR,SAASm3G,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAAP;CACD;;CAED,UAAI3oG,IAAIjgB,MAAR,EAAgB;CACdsqI,iBAAS3kB,QAAQkuB,YAAR,CAAqB5zH,GAArB,EAA0B0yH,UAA1B,EAAsC,KAAtC,CAAT;;CAEA,YAAI/pB,IAAIrwF,IAAJ,KAAa+xG,OAAO/xG,IAApB,IAA4BqwF,IAAIvpF,IAAJ,KAAairG,OAAOjrG,IAApD,EAA0D;;CAExD,iBAAO5tB,SAASm3G,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAAP;CACD;;CAED,YAAI1c,MAAMz6F,SAAS64H,MAAT,EAAiB7uH,IAAIuH,CAArB,EAAwBxZ,CAAxB,CAAV;CACA,YAAI,UAAU0iG,GAAd,EAAmB;CACpB;;;CAGDzwF,WAAKuH,CAAL;CACAhjB,eAAS,EAAT;CACD;;CAED,QAAIA,WAAW,EAAf,EAAmB;;CAEjB,aAAOyR,SAASm3G,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAAP;CACD;CAEF,GA5DD;;;;;;;;;;;;;;;;CA4EAjD,oCAAA,GAAqC,UAASyrB,OAAT,EAAkB3/H,QAAlB,EAA4B;CAC/D,QAAI,CAAC2/H,QAAQpxI,MAAb,EAAqB;CACnB,aAAOyR,SAAS,IAAI4vH,WAAJ,CAAgB,CAAhB,CAAT,CAAP;CACD;;CAED,aAASgS,SAAT,CAAmB/I,MAAnB,EAA2BgJ,YAA3B,EAAyC;CACvC3tB,cAAQysB,YAAR,CAAqB9H,MAArB,EAA6B,IAA7B,EAAmC,IAAnC,EAAyC,UAASjrG,IAAT,EAAe;CACtD,eAAOi0G,aAAa,IAAb,EAAmBj0G,IAAnB,CAAP;CACD,OAFD;CAGD;;CAEDsrB,QAAIymF,OAAJ,EAAaiC,SAAb,EAAwB,UAASzqB,GAAT,EAAckrB,cAAd,EAA8B;CACpD,UAAIhiH,cAAcgiH,eAAeC,MAAf,CAAsB,UAASC,GAAT,EAAc7qI,CAAd,EAAiB;CACvD,YAAI0J,GAAJ;CACA,YAAI,OAAO1J,CAAP,KAAa,QAAjB,EAA0B;CACxB0J,gBAAM1J,EAAEnJ,MAAR;CACD,SAFD,MAEO;CACL6S,gBAAM1J,EAAE44H,UAAR;CACD;CACD,eAAOiS,MAAMnhI,IAAInT,QAAJ,GAAeM,MAArB,GAA8B6S,GAA9B,GAAoC,CAA3C,CAPuD;CAQxD,OARiB,EAQf,CARe,CAAlB;;CAUA,UAAIohI,cAAc,IAAI7/E,UAAJ,CAAetiC,WAAf,CAAlB;;CAEA,UAAIoiH,cAAc,CAAlB;CACAJ,qBAAejD,OAAf,CAAuB,UAAS1nI,CAAT,EAAY;CACjC,YAAIgrI,WAAW,OAAOhrI,CAAP,KAAa,QAA5B;CACA,YAAI+6B,KAAK/6B,CAAT;CACA,YAAIgrI,QAAJ,EAAc;CACZ,cAAI3rF,OAAO,IAAI4L,UAAJ,CAAejrD,EAAEnJ,MAAjB,CAAX;CACA,eAAK,IAAIyb,IAAI,CAAb,EAAgBA,IAAItS,EAAEnJ,MAAtB,EAA8Byb,GAA9B,EAAmC;CACjC+sC,iBAAK/sC,CAAL,IAAUtS,EAAE+yH,UAAF,CAAazgH,CAAb,CAAV;CACD;CACDyoB,eAAKskB,KAAKlpC,MAAV;CACD;;CAED,YAAI60H,QAAJ,EAAc;;CACZF,sBAAYC,aAAZ,IAA6B,CAA7B;CACD,SAFD,MAEO;;CACLD,sBAAYC,aAAZ,IAA6B,CAA7B;CACD;;CAED,YAAIE,SAASlwG,GAAG69F,UAAH,CAAcriI,QAAd,EAAb;CACA,aAAK,IAAI+b,IAAI,CAAb,EAAgBA,IAAI24H,OAAOp0I,MAA3B,EAAmCyb,GAAnC,EAAwC;CACtCw4H,sBAAYC,aAAZ,IAA6B5pI,SAAS8pI,OAAO34H,CAAP,CAAT,CAA7B;CACD;CACDw4H,oBAAYC,aAAZ,IAA6B,GAA7B;;CAEA,YAAI1rF,OAAO,IAAI4L,UAAJ,CAAelwB,EAAf,CAAX;CACA,aAAK,IAAIzoB,IAAI,CAAb,EAAgBA,IAAI+sC,KAAKxoD,MAAzB,EAAiCyb,GAAjC,EAAsC;CACpCw4H,sBAAYC,aAAZ,IAA6B1rF,KAAK/sC,CAAL,CAA7B;CACD;CACF,OA3BD;;CA6BA,aAAOhK,SAASwiI,YAAY30H,MAArB,CAAP;CACD,KA5CD;CA6CD,GAxDD;;;;;;CA8DAqmG,6BAAA,GAA8B,UAASyrB,OAAT,EAAkB3/H,QAAlB,EAA4B;CACxD,aAAS4hI,SAAT,CAAmB/I,MAAnB,EAA2BgJ,YAA3B,EAAyC;CACvC3tB,cAAQysB,YAAR,CAAqB9H,MAArB,EAA6B,IAA7B,EAAmC,IAAnC,EAAyC,UAASwH,OAAT,EAAkB;CACzD,YAAIuC,mBAAmB,IAAIjgF,UAAJ,CAAe,CAAf,CAAvB;CACAigF,yBAAiB,CAAjB,IAAsB,CAAtB;CACA,YAAI,OAAOvC,OAAP,KAAmB,QAAvB,EAAiC;CAC/B,cAAItpF,OAAO,IAAI4L,UAAJ,CAAe09E,QAAQ9xI,MAAvB,CAAX;CACA,eAAK,IAAIyb,IAAI,CAAb,EAAgBA,IAAIq2H,QAAQ9xI,MAA5B,EAAoCyb,GAApC,EAAyC;CACvC+sC,iBAAK/sC,CAAL,IAAUq2H,QAAQ5V,UAAR,CAAmBzgH,CAAnB,CAAV;CACD;CACDq2H,oBAAUtpF,KAAKlpC,MAAf;CACA+0H,2BAAiB,CAAjB,IAAsB,CAAtB;CACD;;CAED,YAAIxhI,MAAOi/H,mBAAmBzQ,WAApB,GACNyQ,QAAQ/P,UADF,GAEN+P,QAAQtnI,IAFZ;;CAIA,YAAI4pI,SAASvhI,IAAInT,QAAJ,EAAb;CACA,YAAI40I,YAAY,IAAIlgF,UAAJ,CAAeggF,OAAOp0I,MAAP,GAAgB,CAA/B,CAAhB;CACA,aAAK,IAAIyb,IAAI,CAAb,EAAgBA,IAAI24H,OAAOp0I,MAA3B,EAAmCyb,GAAnC,EAAwC;CACtC64H,oBAAU74H,CAAV,IAAenR,SAAS8pI,OAAO34H,CAAP,CAAT,CAAf;CACD;CACD64H,kBAAUF,OAAOp0I,MAAjB,IAA2B,GAA3B;;CAEA,YAAImqI,IAAJ,EAAU;CACR,cAAIkI,SAAO,IAAIlI,IAAJ,CAAS,CAACkK,iBAAiB/0H,MAAlB,EAA0Bg1H,UAAUh1H,MAApC,EAA4CwyH,OAA5C,CAAT,CAAX;CACAwB,uBAAa,IAAb,EAAmBjB,MAAnB;CACD;CACF,OA3BD;CA4BD;;CAED1nF,QAAIymF,OAAJ,EAAaiC,SAAb,EAAwB,UAASzqB,GAAT,EAAcrnE,OAAd,EAAuB;CAC7C,aAAO9vC,SAAS,IAAI04H,IAAJ,CAAS5oF,OAAT,CAAT,CAAP;CACD,KAFD;CAGD,GAnCD;;;;;;;;;;;CA8CAokE,+BAAA,GAAgC,UAAUtmF,IAAV,EAAgBszG,UAAhB,EAA4BlhI,QAA5B,EAAsC;CACpE,QAAI,OAAOkhI,UAAP,KAAsB,UAA1B,EAAsC;CACpClhI,iBAAWkhI,UAAX;CACAA,mBAAa,IAAb;CACD;;CAED,QAAI4B,aAAal1G,IAAjB;CACA,QAAIiwC,UAAU,EAAd;;CAEA,WAAOilE,WAAWxS,UAAX,GAAwB,CAA/B,EAAkC;CAChC,UAAIyS,YAAY,IAAIpgF,UAAJ,CAAemgF,UAAf,CAAhB;CACA,UAAIJ,WAAWK,UAAU,CAAV,MAAiB,CAAhC;CACA,UAAIC,YAAY,EAAhB;;CAEA,WAAK,IAAIh5H,IAAI,CAAb,GAAkBA,GAAlB,EAAuB;CACrB,YAAI+4H,UAAU/4H,CAAV,MAAiB,GAArB,EAA0B;;;CAG1B,YAAIg5H,UAAUz0I,MAAV,GAAmB,GAAvB,EAA4B;CAC1B,iBAAOyR,SAASm3G,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAAP;CACD;;CAED6rB,qBAAaD,UAAU/4H,CAAV,CAAb;CACD;;CAED84H,mBAAavB,kBAAYuB,UAAZ,EAAwB,IAAIE,UAAUz0I,MAAtC,CAAb;CACAy0I,kBAAYnqI,SAASmqI,SAAT,CAAZ;;CAEA,UAAIx0H,MAAM+yH,kBAAYuB,UAAZ,EAAwB,CAAxB,EAA2BE,SAA3B,CAAV;CACA,UAAIN,QAAJ,EAAc;CACZ,YAAI;CACFl0H,gBAAM8rF,OAAO+5B,YAAP,CAAoBjvF,KAApB,CAA0B,IAA1B,EAAgC,IAAIud,UAAJ,CAAen0C,GAAf,CAAhC,CAAN;CACD,SAFD,CAEE,OAAOvK,CAAP,EAAU;;CAEV,cAAI88H,QAAQ,IAAIp+E,UAAJ,CAAen0C,GAAf,CAAZ;CACAA,gBAAM,EAAN;CACA,eAAK,IAAIxE,IAAI,CAAb,EAAgBA,IAAI+2H,MAAMxyI,MAA1B,EAAkCyb,GAAlC,EAAuC;CACrCwE,mBAAO8rF,OAAO+5B,YAAP,CAAoB0M,MAAM/2H,CAAN,CAApB,CAAP;CACD;CACF;CACF;;CAED6zD,cAAQ78C,IAAR,CAAaxS,GAAb;CACAs0H,mBAAavB,kBAAYuB,UAAZ,EAAwBE,SAAxB,CAAb;CACD;;CAED,QAAIziH,QAAQs9C,QAAQtvE,MAApB;CACAsvE,YAAQuhE,OAAR,CAAgB,UAASvxH,MAAT,EAAiB7D,CAAjB,EAAoB;CAClChK,eAASk0G,QAAQkuB,YAAR,CAAqBv0H,MAArB,EAA6BqzH,UAA7B,EAAyC,IAAzC,CAAT,EAAyDl3H,CAAzD,EAA4DuW,KAA5D;CACD,KAFD;CAGD,GAlDD;;;;;;;;;;;;;;CC1iBA;;;;;;;;CAWA,gBAAiB0iH,SAAjB;;;;;;;;;CASA,SAASA,SAAT,CAAoBrH,IAApB,EAA0B;CACxB,OAAKj1F,IAAL,GAAYi1F,KAAKj1F,IAAjB;CACA,OAAKu8F,QAAL,GAAgBtH,KAAKsH,QAArB;CACA,OAAKrW,IAAL,GAAY+O,KAAK/O,IAAjB;CACA,OAAKsW,MAAL,GAAcvH,KAAKuH,MAAnB;CACA,OAAKC,KAAL,GAAaxH,KAAKwH,KAAlB;CACA,OAAKC,cAAL,GAAsBzH,KAAKyH,cAA3B;CACA,OAAKC,iBAAL,GAAyB1H,KAAK0H,iBAA9B;CACA,OAAK/1E,UAAL,GAAkB,EAAlB;CACA,OAAKg2E,KAAL,GAAa3H,KAAK2H,KAAL,IAAc,KAA3B;CACA,OAAK3d,MAAL,GAAcgW,KAAKhW,MAAnB;CACA,OAAKmW,UAAL,GAAkBH,KAAKG,UAAvB;;;CAGA,OAAKyH,GAAL,GAAW5H,KAAK4H,GAAhB;CACA,OAAK71G,GAAL,GAAWiuG,KAAKjuG,GAAhB;CACA,OAAK81G,UAAL,GAAkB7H,KAAK6H,UAAvB;CACA,OAAKC,IAAL,GAAY9H,KAAK8H,IAAjB;CACA,OAAKC,EAAL,GAAU/H,KAAK+H,EAAf;CACA,OAAKC,OAAL,GAAehI,KAAKgI,OAApB;CACA,OAAKC,kBAAL,GAA0BjI,KAAKiI,kBAA/B;CACA,OAAKC,SAAL,GAAiBlI,KAAKkI,SAAtB;;;CAGA,OAAKC,aAAL,GAAqBnI,KAAKmI,aAA1B;;;CAGA,OAAKC,YAAL,GAAoBpI,KAAKoI,YAAzB;CACA,OAAKC,YAAL,GAAoBrI,KAAKqI,YAAzB;CACD;;;;;;AAMDjX,kBAAQiW,UAAUr1I,SAAlB;;;;;;;;;;CAUAq1I,UAAUr1I,SAAV,CAAoBysD,OAApB,GAA8B,UAAU7rC,GAAV,EAAe01H,IAAf,EAAqB;CACjD,MAAI/sB,MAAM,IAAIH,KAAJ,CAAUxoG,GAAV,CAAV;CACA2oG,MAAIrwF,IAAJ,GAAW,gBAAX;CACAqwF,MAAIgtB,WAAJ,GAAkBD,IAAlB;CACA,OAAKttB,IAAL,CAAU,OAAV,EAAmBO,GAAnB;CACA,SAAO,IAAP;CACD,CAND;;;;;;;;CAcA8rB,UAAUr1I,SAAV,CAAoB0xD,IAApB,GAA2B,YAAY;CACrC,MAAI,aAAa,KAAKiO,UAAlB,IAAgC,OAAO,KAAKA,UAAhD,EAA4D;CAC1D,SAAKA,UAAL,GAAkB,SAAlB;CACA,SAAK62E,MAAL;CACD;;CAED,SAAO,IAAP;CACD,CAPD;;;;;;;;CAeAnB,UAAUr1I,SAAV,CAAoBgyI,KAApB,GAA4B,YAAY;CACtC,MAAI,cAAc,KAAKryE,UAAnB,IAAiC,WAAW,KAAKA,UAArD,EAAiE;CAC/D,SAAK82E,OAAL;CACA,SAAKC,OAAL;CACD;;CAED,SAAO,IAAP;CACD,CAPD;;;;;;;;;CAgBArB,UAAUr1I,SAAV,CAAoBiyD,IAApB,GAA2B,UAAU8/E,OAAV,EAAmB;CAC5C,MAAI,WAAW,KAAKpyE,UAApB,EAAgC;CAC9B,SAAKwhE,KAAL,CAAW4Q,OAAX;CACD,GAFD,MAEO;CACL,UAAM,IAAI3oB,KAAJ,CAAU,oBAAV,CAAN;CACD;CACF,CAND;;;;;;;;CAcAisB,UAAUr1I,SAAV,CAAoB22I,MAApB,GAA6B,YAAY;CACvC,OAAKh3E,UAAL,GAAkB,MAAlB;CACA,OAAKi3E,QAAL,GAAgB,IAAhB;CACA,OAAK5tB,IAAL,CAAU,MAAV;CACD,CAJD;;;;;;;;;CAaAqsB,UAAUr1I,SAAV,CAAoB62I,MAApB,GAA6B,UAAU72G,IAAV,EAAgB;CAC3C,MAAIirG,SAAS6L,UAAOtC,YAAP,CAAoBx0G,IAApB,EAA0B,KAAKg4F,MAAL,CAAYsb,UAAtC,CAAb;CACA,OAAKyD,QAAL,CAAc9L,MAAd;CACD,CAHD;;;;;;CASAoK,UAAUr1I,SAAV,CAAoB+2I,QAApB,GAA+B,UAAU9L,MAAV,EAAkB;CAC/C,OAAKjiB,IAAL,CAAU,QAAV,EAAoBiiB,MAApB;CACD,CAFD;;;;;;;;CAUAoK,UAAUr1I,SAAV,CAAoB02I,OAApB,GAA8B,YAAY;CACxC,OAAK/2E,UAAL,GAAkB,QAAlB;CACA,OAAKqpD,IAAL,CAAU,OAAV;CACD,CAHD;;CC5JA;;;;;;;;CAQA,aAAiB,eAAA,CAAUjlF,GAAV,EAAe;CAC9B,MAAIi1F,MAAM,EAAV;;CAEA,OAAK,IAAI58G,CAAT,IAAc2nB,GAAd,EAAmB;CACjB,QAAIA,IAAIljC,cAAJ,CAAmBub,CAAnB,CAAJ,EAA2B;CACzB,UAAI48G,IAAIr4H,MAAR,EAAgBq4H,OAAO,GAAP;CAChBA,aAAOge,mBAAmB56H,CAAnB,IAAwB,GAAxB,GAA8B46H,mBAAmBjzG,IAAI3nB,CAAJ,CAAnB,CAArC;CACD;CACF;;CAED,SAAO48G,GAAP;CACD,CAXD;;;;;;;;;CAoBA,aAAiB,eAAA,CAASie,EAAT,EAAY;CAC3B,MAAIC,MAAM,EAAV;CACA,MAAIC,QAAQF,GAAG3nH,KAAH,CAAS,GAAT,CAAZ;CACA,OAAK,IAAIlT,IAAI,CAAR,EAAWjS,IAAIgtI,MAAMx2I,MAA1B,EAAkCyb,IAAIjS,CAAtC,EAAyCiS,GAAzC,EAA8C;CAC5C,QAAIg7H,OAAOD,MAAM/6H,CAAN,EAASkT,KAAT,CAAe,GAAf,CAAX;CACA4nH,QAAIG,mBAAmBD,KAAK,CAAL,CAAnB,CAAJ,IAAmCC,mBAAmBD,KAAK,CAAL,CAAnB,CAAnC;CACD;CACD,SAAOF,GAAP;CACD,CARD;;;;;;;CC3BA,uBAAiB,yBAAA,CAAShmI,CAAT,EAAYjI,CAAZ,EAAc;CAC7B,MAAIq2H,KAAK,SAALA,EAAK,GAAU,EAAnB;CACAA,KAAGt/H,SAAH,GAAeiJ,EAAEjJ,SAAjB;CACAkR,IAAElR,SAAF,GAAc,IAAIs/H,EAAJ,EAAd;CACApuH,IAAElR,SAAF,CAAYoJ,WAAZ,GAA0B8H,CAA1B;CACD,CALD;;CCCA,IAAIomI,WAAW,mEAAmEhoH,KAAnE,CAAyE,EAAzE,CAAf;CAAA,IACI3uB,SAAS,EADb;CAAA,IAEI2qD,QAAM,EAFV;CAAA,IAGIisF,OAAO,CAHX;CAAA,IAIIn7H,IAAI,CAJR;CAAA,IAKI2gH,IALJ;;;;;;;;;CAcA,SAASwP,QAAT,CAAgBpM,GAAhB,EAAqB;CACnB,MAAIsS,UAAU,EAAd;;CAEA,KAAG;CACDA,cAAU6E,SAASnX,MAAMx/H,MAAf,IAAyB8xI,OAAnC;CACAtS,UAAMxgI,KAAKiK,KAAL,CAAWu2H,MAAMx/H,MAAjB,CAAN;CACD,GAHD,QAGSw/H,MAAM,CAHf;;CAKA,SAAOsS,OAAP;CACD;;;;;;;;;CASD,SAASrC,QAAT,CAAgBpX,GAAhB,EAAqB;CACnB,MAAIwe,UAAU,CAAd;;CAEA,OAAKp7H,IAAI,CAAT,EAAYA,IAAI48G,IAAIr4H,MAApB,EAA4Byb,GAA5B,EAAiC;CAC/Bo7H,cAAUA,UAAU72I,MAAV,GAAmB2qD,MAAI0tE,IAAI5tH,MAAJ,CAAWgR,CAAX,CAAJ,CAA7B;CACD;;CAED,SAAOo7H,OAAP;CACD;;;;;;;;CAQD,SAASC,KAAT,GAAiB;CACf,MAAI9+G,MAAM4zG,SAAO,CAAC,IAAI7zG,IAAJ,EAAR,CAAV;;CAEA,MAAIC,QAAQokG,IAAZ,EAAkB,OAAOwa,OAAO,CAAP,EAAUxa,OAAOpkG,GAAxB;CAClB,SAAOA,MAAK,GAAL,GAAU4zG,SAAOgL,MAAP,CAAjB;CACD;;;;;CAKD,OAAOn7H,IAAIzb,MAAX,EAAmByb,GAAnB;CAAwBkvC,QAAIgsF,SAASl7H,CAAT,CAAJ,IAAmBA,CAAnB;CAAxB;;;CAKAq7H,MAAMlL,MAAN,GAAeA,QAAf;CACAkL,MAAMrH,MAAN,GAAeA,QAAf;CACA,cAAiBqH,KAAjB;;;CClEA;;;;;;;CAOAnxB,YAAUhnH,cAAA,GAAiBk9H,YAAYC,KAAZ,GAAoBD,YAAY,SAAZ,IAAyBA,WAAxE;CACAlW,gBAAA,GAAiBoW,MAAjB;CACApW,iBAAA,GAAkBpsF,OAAlB;CACAosF,gBAAA,GAAiBtsF,MAAjB;CACAssF,iBAAA,GAAkB59E,OAAlB;CACA49E,kBAAA,GAAmBwR,EAAnB;;;;;CAKAxR,mBAAA,GAAoB,EAApB;;;;;;CAMAA,eAAA,GAAgB,EAAhB;CACAA,eAAA,GAAgB,EAAhB;;;;;;;;CAQAA,oBAAA,GAAqB,EAArB;;;;;;;;;CASA,WAASqW,WAAT,CAAqBC,SAArB,EAAgC;CAC9B,QAAIh0F,OAAO,CAAX;CAAA,QAAcxsB,CAAd;;CAEA,SAAKA,CAAL,IAAUwgH,SAAV,EAAqB;CACnBh0F,aAAS,CAACA,QAAQ,CAAT,IAAcA,IAAf,GAAuBg0F,UAAUC,UAAV,CAAqBzgH,CAArB,CAA/B;CACAwsB,cAAQ,CAAR,CAFmB;CAGpB;;CAED,WAAO09E,QAAQrlF,MAAR,CAAethC,KAAK8Q,GAAL,CAASm4B,IAAT,IAAiB09E,QAAQrlF,MAAR,CAAetgC,MAA/C,CAAP;CACD;;;;;;;;;;CAUD,WAAS67H,WAAT,CAAqBI,SAArB,EAAgC;;CAE9B,QAAIh+E,QAAJ;;CAEA,aAAS69E,KAAT,GAAiB;;CAEf,UAAI,CAACA,MAAM/zF,OAAX,EAAoB;;CAEpB,UAAIm+E,OAAO4V,KAAX;;;CAGA,UAAIK,OAAO,CAAC,IAAIpkG,IAAJ,EAAZ;CACA,UAAI4jG,KAAKQ,QAAQl+E,YAAYk+E,IAApB,CAAT;CACAjW,WAAK59F,IAAL,GAAYqzG,EAAZ;CACAzV,WAAKkW,IAAL,GAAYn+E,QAAZ;CACAioE,WAAKiW,IAAL,GAAYA,IAAZ;CACAl+E,iBAAWk+E,IAAX;;;CAGA,UAAI3uB,OAAO,IAAIryE,KAAJ,CAAUp7B,UAAUC,MAApB,CAAX;CACA,WAAK,IAAIyb,IAAI,CAAb,EAAgBA,IAAI+xF,KAAKxtG,MAAzB,EAAiCyb,GAAjC,EAAsC;CACpC+xF,aAAK/xF,CAAL,IAAU1b,UAAU0b,CAAV,CAAV;CACD;;CAED+xF,WAAK,CAAL,IAAUmY,QAAQoW,MAAR,CAAevuB,KAAK,CAAL,CAAf,CAAV;;CAEA,UAAI,aAAa,OAAOA,KAAK,CAAL,CAAxB,EAAiC;;CAE/BA,aAAKyb,OAAL,CAAa,IAAb;CACD;;;CAGD,UAAInpH,QAAQ,CAAZ;CACA0tG,WAAK,CAAL,IAAUA,KAAK,CAAL,EAAQllB,OAAR,CAAgB,eAAhB,EAAiC,UAAS3oF,KAAT,EAAgB0nD,MAAhB,EAAwB;;CAEjE,YAAI1nD,UAAU,IAAd,EAAoB,OAAOA,KAAP;CACpBG;CACA,YAAIu8H,YAAY1W,QAAQ2W,UAAR,CAAmBj1E,MAAnB,CAAhB;CACA,YAAI,eAAe,OAAOg1E,SAA1B,EAAqC;CACnC,cAAId,MAAM/tB,KAAK1tG,KAAL,CAAV;CACAH,kBAAQ08H,UAAUl8H,IAAV,CAAe+lH,IAAf,EAAqBqV,GAArB,CAAR;;;CAGA/tB,eAAKz0E,MAAL,CAAYj5B,KAAZ,EAAmB,CAAnB;CACAA;CACD;CACD,eAAOH,KAAP;CACD,OAdS,CAAV;;;CAiBAgmH,cAAQ4W,UAAR,CAAmBp8H,IAAnB,CAAwB+lH,IAAxB,EAA8B1Y,IAA9B;;CAEA,UAAIgvB,QAAQV,MAAM1rG,GAAN,IAAau1F,QAAQv1F,GAArB,IAA4BrmB,QAAQqmB,GAAR,CAAY+uB,IAAZ,CAAiBp1C,OAAjB,CAAxC;CACAyyH,YAAM3lF,KAAN,CAAYqvE,IAAZ,EAAkB1Y,IAAlB;CACD;;CAEDsuB,UAAMG,SAAN,GAAkBA,SAAlB;CACAH,UAAM/zF,OAAN,GAAgB49E,QAAQ59E,OAAR,CAAgBk0F,SAAhB,CAAhB;CACAH,UAAMW,SAAN,GAAkB9W,QAAQ8W,SAAR,EAAlB;CACAX,UAAM3xH,KAAN,GAAc6xH,YAAYC,SAAZ,CAAd;CACAH,UAAM1vC,OAAN,GAAgBA,OAAhB;;;CAGA,QAAI,eAAe,OAAOu5B,QAAQr6C,IAAlC,EAAwC;CACtCq6C,cAAQr6C,IAAR,CAAawwD,KAAb;CACD;;CAEDnW,YAAQr6E,SAAR,CAAkB7Y,IAAlB,CAAuBqpG,KAAvB;;CAEA,WAAOA,KAAP;CACD;;CAED,WAAS1vC,OAAT,GAAoB;CAClB,QAAItsF,QAAQ6lH,QAAQr6E,SAAR,CAAkB3S,OAAlB,CAA0B,IAA1B,CAAZ;CACA,QAAI74B,UAAU,CAAC,CAAf,EAAkB;CAChB6lH,cAAQr6E,SAAR,CAAkBvS,MAAlB,CAAyBj5B,KAAzB,EAAgC,CAAhC;CACA,aAAO,IAAP;CACD,KAHD,MAGO;CACL,aAAO,KAAP;CACD;CACF;;;;;;;;;;CAUD,WAASu5B,MAAT,CAAgBqjG,UAAhB,EAA4B;CAC1B/W,YAAQgX,IAAR,CAAaD,UAAb;;CAEA/W,iBAAA,GAAgB,EAAhB;CACAA,iBAAA,GAAgB,EAAhB;;CAEA,QAAIlqG,CAAJ;CACA,QAAIkT,QAAQ,CAAC,OAAO+tG,UAAP,KAAsB,QAAtB,GAAiCA,UAAjC,GAA8C,EAA/C,EAAmD/tG,KAAnD,CAAyD,QAAzD,CAAZ;CACA,QAAI9b,MAAM8b,MAAM3uB,MAAhB;;CAEA,SAAKyb,IAAI,CAAT,EAAYA,IAAI5I,GAAhB,EAAqB4I,GAArB,EAA0B;CACxB,UAAI,CAACkT,MAAMlT,CAAN,CAAL,EAAe,SADS;CAExBihH,mBAAa/tG,MAAMlT,CAAN,EAAS6sE,OAAT,CAAiB,KAAjB,EAAwB,KAAxB,CAAb;CACA,UAAIo0C,WAAW,CAAX,MAAkB,GAAtB,EAA2B;CACzB/W,gBAAQiX,KAAR,CAAcnqG,IAAd,CAAmB,IAAIoqG,MAAJ,CAAW,MAAMH,WAAWI,MAAX,CAAkB,CAAlB,CAAN,GAA6B,GAAxC,CAAnB;CACD,OAFD,MAEO;CACLnX,gBAAQoX,KAAR,CAActqG,IAAd,CAAmB,IAAIoqG,MAAJ,CAAW,MAAMH,UAAN,GAAmB,GAA9B,CAAnB;CACD;CACF;;CAED,SAAKjhH,IAAI,CAAT,EAAYA,IAAIkqG,QAAQr6E,SAAR,CAAkBtrC,MAAlC,EAA0Cyb,GAA1C,EAA+C;CAC7C,UAAIuhH,WAAWrX,QAAQr6E,SAAR,CAAkB7vB,CAAlB,CAAf;CACAuhH,eAASj1F,OAAT,GAAmB49E,QAAQ59E,OAAR,CAAgBi1F,SAASf,SAAzB,CAAnB;CACD;CACF;;;;;;;;CAQD,WAAS1iG,OAAT,GAAmB;CACjBosF,YAAQtsF,MAAR,CAAe,EAAf;CACD;;;;;;;;;;CAUD,WAAS0O,OAAT,CAAiBzoC,IAAjB,EAAuB;CACrB,QAAIA,KAAKA,KAAKU,MAAL,GAAc,CAAnB,MAA0B,GAA9B,EAAmC;CACjC,aAAO,IAAP;CACD;CACD,QAAIyb,CAAJ,EAAO5I,GAAP;CACA,SAAK4I,IAAI,CAAJ,EAAO5I,MAAM8yG,QAAQiX,KAAR,CAAc58H,MAAhC,EAAwCyb,IAAI5I,GAA5C,EAAiD4I,GAAjD,EAAsD;CACpD,UAAIkqG,QAAQiX,KAAR,CAAcnhH,CAAd,EAAiB+d,IAAjB,CAAsBl6B,IAAtB,CAAJ,EAAiC;CAC/B,eAAO,KAAP;CACD;CACF;CACD,SAAKmc,IAAI,CAAJ,EAAO5I,MAAM8yG,QAAQoX,KAAR,CAAc/8H,MAAhC,EAAwCyb,IAAI5I,GAA5C,EAAiD4I,GAAjD,EAAsD;CACpD,UAAIkqG,QAAQoX,KAAR,CAActhH,CAAd,EAAiB+d,IAAjB,CAAsBl6B,IAAtB,CAAJ,EAAiC;CAC/B,eAAO,IAAP;CACD;CACF;CACD,WAAO,KAAP;CACD;;;;;;;;;;CAUD,WAASy8H,MAAT,CAAgBR,GAAhB,EAAqB;CACnB,QAAIA,eAAe9S,KAAnB,EAA0B,OAAO8S,IAAI0B,KAAJ,IAAa1B,IAAI99E,OAAxB;CAC1B,WAAO89E,GAAP;CACD;;;;;;;;;;;;;;;;;;;;;CC1ND5V,YAAUhnH,cAAA,GAAiBw4H,OAA3B;CACAxR,aAAA,GAAcv1F,GAAd;CACAu1F,oBAAA,GAAqB4W,UAArB;CACA5W,cAAA,GAAegX,IAAf;CACAhX,cAAA,GAAej6D,IAAf;CACAi6D,mBAAA,GAAoB8W,SAApB;CACA9W,iBAAA,GAAkB,eAAe,OAAOuX,MAAtB,IACA,eAAe,OAAOA,OAAOC,OAD7B,GAEED,OAAOC,OAAP,CAAeC,KAFjB,GAGEC,cAHpB;;;;;;CASA1X,gBAAA,GAAiB,CACf,SADe,EACJ,SADI,EACO,SADP,EACkB,SADlB,EAC6B,SAD7B,EACwC,SADxC,EACmD,SADnD,EAEf,SAFe,EAEJ,SAFI,EAEO,SAFP,EAEkB,SAFlB,EAE6B,SAF7B,EAEwC,SAFxC,EAEmD,SAFnD,EAGf,SAHe,EAGJ,SAHI,EAGO,SAHP,EAGkB,SAHlB,EAG6B,SAH7B,EAGwC,SAHxC,EAGmD,SAHnD,EAIf,SAJe,EAIJ,SAJI,EAIO,SAJP,EAIkB,SAJlB,EAI6B,SAJ7B,EAIwC,SAJxC,EAImD,SAJnD,EAKf,SALe,EAKJ,SALI,EAKO,SALP,EAKkB,SALlB,EAK6B,SAL7B,EAKwC,SALxC,EAKmD,SALnD,EAMf,SANe,EAMJ,SANI,EAMO,SANP,EAMkB,SANlB,EAM6B,SAN7B,EAMwC,SANxC,EAMmD,SANnD,EAOf,SAPe,EAOJ,SAPI,EAOO,SAPP,EAOkB,SAPlB,EAO6B,SAP7B,EAOwC,SAPxC,EAOmD,SAPnD,EAQf,SARe,EAQJ,SARI,EAQO,SARP,EAQkB,SARlB,EAQ6B,SAR7B,EAQwC,SARxC,EAQmD,SARnD,EASf,SATe,EASJ,SATI,EASO,SATP,EASkB,SATlB,EAS6B,SAT7B,EASwC,SATxC,EASmD,SATnD,EAUf,SAVe,EAUJ,SAVI,EAUO,SAVP,EAUkB,SAVlB,EAU6B,SAV7B,EAUwC,SAVxC,EAUmD,SAVnD,EAWf,SAXe,EAWJ,SAXI,EAWO,SAXP,EAWkB,SAXlB,EAW6B,SAX7B,EAWwC,SAXxC,CAAjB;;;;;;;;;;CAsBA,WAAS8W,SAAT,GAAqB;;;;CAInB,QAAI,OAAOv3E,MAAP,KAAkB,WAAlB,IAAiCA,OAAOo4E,OAAxC,IAAmDp4E,OAAOo4E,OAAP,CAAe/kG,IAAf,KAAwB,UAA/E,EAA2F;CACzF,aAAO,IAAP;CACD;;;CAGD,QAAI,OAAOglG,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoB7+E,WAApB,GAAkCh/C,KAAlC,CAAwC,uBAAxC,CAA/D,EAAiI;CAC/H,aAAO,KAAP;CACD;;;;CAID,WAAQ,OAAOqyD,QAAP,KAAoB,WAApB,IAAmCA,SAASyrE,eAA5C,IAA+DzrE,SAASyrE,eAAT,CAAyB7zH,KAAxF,IAAiGooD,SAASyrE,eAAT,CAAyB7zH,KAAzB,CAA+B8zH,gBAAjI;;CAEJ,WAAOx4E,MAAP,KAAkB,WAAlB,IAAiCA,OAAOn7C,OAAxC,KAAoDm7C,OAAOn7C,OAAP,CAAe4zH,OAAf,IAA2Bz4E,OAAOn7C,OAAP,CAAe6zH,SAAf,IAA4B14E,OAAOn7C,OAAP,CAAe8zH,KAA1H,CAFI;;;CAKJ,WAAON,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoB7+E,WAApB,GAAkCh/C,KAAlC,CAAwC,gBAAxC,CAA3D,IAAwH2K,SAASuyH,OAAOiB,EAAhB,EAAoB,EAApB,KAA2B,EAL/I;;CAOJ,WAAOP,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoB7+E,WAApB,GAAkCh/C,KAAlC,CAAwC,oBAAxC,CAP9D;CAQD;;;;;;CAMDgmH,UAAQ2W,UAAR,CAAmBl9G,CAAnB,GAAuB,UAASjP,CAAT,EAAY;CACjC,QAAI;CACF,aAAO4uB,KAAKC,SAAL,CAAe7uB,CAAf,CAAP;CACD,KAFD,CAEE,OAAOy4G,GAAP,EAAY;CACZ,aAAO,iCAAiCA,IAAInrE,OAA5C;CACD;CACF,GAND;;;;;;;;CAeA,WAAS8+E,UAAT,CAAoB/uB,IAApB,EAA0B;CACxB,QAAIivB,YAAY,KAAKA,SAArB;;CAEAjvB,SAAK,CAAL,IAAU,CAACivB,YAAY,IAAZ,GAAmB,EAApB,IACN,KAAKR,SADC,IAELQ,YAAY,KAAZ,GAAoB,GAFf,IAGNjvB,KAAK,CAAL,CAHM,IAILivB,YAAY,KAAZ,GAAoB,GAJf,IAKN,GALM,GAKA9W,QAAQoY,QAAR,CAAiB,KAAKz1G,IAAtB,CALV;;CAOA,QAAI,CAACm0G,SAAL,EAAgB;;CAEhB,QAAI/vH,IAAI,YAAY,KAAKvC,KAAzB;CACAqjG,SAAKz0E,MAAL,CAAY,CAAZ,EAAe,CAAf,EAAkBrsB,CAAlB,EAAqB,gBAArB;;;;;CAKA,QAAI5M,QAAQ,CAAZ;CACA,QAAIk+H,QAAQ,CAAZ;CACAxwB,SAAK,CAAL,EAAQllB,OAAR,CAAgB,aAAhB,EAA+B,UAAS3oF,KAAT,EAAgB;CAC7C,UAAI,SAASA,KAAb,EAAoB;CACpBG;CACA,UAAI,SAASH,KAAb,EAAoB;;;CAGlBq+H,gBAAQl+H,KAAR;CACD;CACF,KARD;;CAUA0tG,SAAKz0E,MAAL,CAAYilG,KAAZ,EAAmB,CAAnB,EAAsBtxH,CAAtB;CACD;;;;;;;;;CASD,WAAS0jB,GAAT,GAAe;;;CAGb,WAAO,qBAAoBrmB,OAApB,2CAAoBA,OAApB,MACFA,QAAQqmB,GADN,IAEFhxB,SAASC,SAAT,CAAmBw3C,KAAnB,CAAyB12C,IAAzB,CAA8B4J,QAAQqmB,GAAtC,EAA2CrmB,OAA3C,EAAoDhK,SAApD,CAFL;CAGD;;;;;;;;;CASD,WAAS48H,IAAT,CAAcD,UAAd,EAA0B;CACxB,QAAI;CACF,UAAI,QAAQA,UAAZ,EAAwB;CACtB/W,gBAAQwX,OAAR,CAAgBc,UAAhB,CAA2B,OAA3B;CACD,OAFD,MAEO;CACLtY,gBAAQwX,OAAR,CAAgBrB,KAAhB,GAAwBY,UAAxB;CACD;CACF,KAND,CAME,OAAMhnH,CAAN,EAAS;CACZ;;;;;;;;;CASD,WAASg2C,IAAT,GAAgB;CACd,QAAItjD,CAAJ;CACA,QAAI;CACFA,UAAIu9G,QAAQwX,OAAR,CAAgBrB,KAApB;CACD,KAFD,CAEE,OAAMpmH,CAAN,EAAS;;;CAGX,QAAI,CAACtN,CAAD,IAAM,OAAOk1H,OAAP,KAAmB,WAAzB,IAAwC,SAASA,OAArD,EAA8D;CAC5Dl1H,UAAIk1H,QAAQtD,GAAR,CAAY9L,KAAhB;CACD;;CAED,WAAO9lH,CAAP;CACD;;;;;;CAMDu9G,UAAQtsF,MAAR,CAAeqyB,MAAf;;;;;;;;;;;;;CAaA,WAAS2xE,YAAT,GAAwB;CACtB,QAAI;CACF,aAAOn4E,OAAOg5E,YAAd;CACD,KAFD,CAEE,OAAOxoH,CAAP,EAAU;CACb;;;;;;;;;;CClMD;;;;CASA,IAAIomH,UAAQ3E,UAAiB,0BAAjB,CAAZ;;;;;;CAMA,cAAiB4f,OAAjB;;;;;;CAMA,IAAIC,UAAW,YAAY;CACzB,MAAI5J,iBAAiB6J,cAArB;CACA,MAAIC,MAAM,IAAI9J,cAAJ,CAAmB,EAAEE,SAAS,KAAX,EAAnB,CAAV;CACA,SAAO,QAAQ4J,IAAI9lF,YAAnB;CACD,CAJa,EAAd;;;;;;;;;CAaA,SAAS2lF,OAAT,CAAkB1J,IAAlB,EAAwB;CACtB,MAAI8J,cAAe9J,QAAQA,KAAK8J,WAAhC;CACA,MAAI,CAACH,OAAD,IAAYG,WAAhB,EAA6B;CAC3B,SAAKzF,cAAL,GAAsB,KAAtB;CACD;CACDgD,YAAUv0I,IAAV,CAAe,IAAf,EAAqBktI,IAArB;CACD;;;;;;AAMD+J,kBAAQL,OAAR,EAAiBrC,SAAjB;;;;;;CAMAqC,QAAQ13I,SAAR,CAAkBC,IAAlB,GAAyB,SAAzB;;;;;;;;;CASAy3I,QAAQ13I,SAAR,CAAkBw2I,MAAlB,GAA2B,YAAY;CACrC,OAAKwB,IAAL;CACD,CAFD;;;;;;;;;CAWAN,QAAQ13I,SAAR,CAAkBukD,KAAlB,GAA0B,UAAU0zF,OAAV,EAAmB;CAC3C,MAAIpxB,OAAO,IAAX;;CAEA,OAAKlnD,UAAL,GAAkB,SAAlB;;CAEA,WAASpb,KAAT,GAAkB;CAChBk4E,YAAM,QAAN;CACA5V,SAAKlnD,UAAL,GAAkB,QAAlB;CACAs4E;CACD;;CAED,MAAI,KAAKC,OAAL,IAAgB,CAAC,KAAKtB,QAA1B,EAAoC;CAClC,QAAIjkH,QAAQ,CAAZ;;CAEA,QAAI,KAAKulH,OAAT,EAAkB;CAChBzb,cAAM,6CAAN;CACA9pG;CACA,WAAK03F,IAAL,CAAU,cAAV,EAA0B,YAAY;CACpCoS,gBAAM,4BAAN;CACA,UAAE9pG,KAAF,IAAW4xB,OAAX;CACD,OAHD;CAID;;CAED,QAAI,CAAC,KAAKqyF,QAAV,EAAoB;CAClBna,cAAM,6CAAN;CACA9pG;CACA,WAAK03F,IAAL,CAAU,OAAV,EAAmB,YAAY;CAC7BoS,gBAAM,4BAAN;CACA,UAAE9pG,KAAF,IAAW4xB,OAAX;CACD,OAHD;CAID;CACF,GApBD,MAoBO;CACLA;CACD;CACF,CAlCD;;;;;;;;CA0CAmzF,QAAQ13I,SAAR,CAAkBg4I,IAAlB,GAAyB,YAAY;CACnCvb,UAAM,SAAN;CACA,OAAKyb,OAAL,GAAe,IAAf;CACA,OAAKC,MAAL;CACA,OAAKnvB,IAAL,CAAU,MAAV;CACD,CALD;;;;;;;;CAaA0uB,QAAQ13I,SAAR,CAAkB62I,MAAlB,GAA2B,UAAU72G,IAAV,EAAgB;CACzC,MAAI6mF,OAAO,IAAX;CACA4V,UAAM,qBAAN,EAA6Bz8F,IAA7B;CACA,MAAI5tB,WAAW,SAAXA,QAAW,CAAU64H,MAAV,EAAkBxqI,KAAlB,EAAyBkyB,KAAzB,EAAgC;;CAE7C,QAAI,cAAck0F,KAAKlnD,UAAvB,EAAmC;CACjCknD,WAAK8vB,MAAL;CACD;;;CAGD,QAAI,YAAY1L,OAAO/xG,IAAvB,EAA6B;CAC3B2tF,WAAK6vB,OAAL;CACA,aAAO,KAAP;CACD;;;CAGD7vB,SAAKkwB,QAAL,CAAc9L,MAAd;CACD,GAdD;;;CAiBA6L,YAAOsB,aAAP,CAAqBp4G,IAArB,EAA2B,KAAKg4F,MAAL,CAAYsb,UAAvC,EAAmDlhI,QAAnD;;;CAGA,MAAI,aAAa,KAAKutD,UAAtB,EAAkC;;CAEhC,SAAKu4E,OAAL,GAAe,KAAf;CACA,SAAKlvB,IAAL,CAAU,cAAV;;CAEA,QAAI,WAAW,KAAKrpD,UAApB,EAAgC;CAC9B,WAAKq4E,IAAL;CACD,KAFD,MAEO;CACLvb,cAAM,sCAAN,EAA8C,KAAK98D,UAAnD;CACD;CACF;CACF,CAlCD;;;;;;;;CA0CA+3E,QAAQ13I,SAAR,CAAkBy2I,OAAlB,GAA4B,YAAY;CACtC,MAAI5vB,OAAO,IAAX;;CAEA,WAASmrB,KAAT,GAAkB;CAChBvV,YAAM,sBAAN;CACA5V,SAAKsa,KAAL,CAAW,CAAC,EAAEjoG,MAAM,OAAR,EAAD,CAAX;CACD;;CAED,MAAI,WAAW,KAAKymC,UAApB,EAAgC;CAC9B88D,YAAM,0BAAN;CACAuV;CACD,GAHD,MAGO;;;CAGLvV,YAAM,sCAAN;CACA,SAAKpS,IAAL,CAAU,MAAV,EAAkB2nB,KAAlB;CACD;CACF,CAjBD;;;;;;;;;;CA2BA0F,QAAQ13I,SAAR,CAAkBmhI,KAAlB,GAA0B,UAAU4Q,OAAV,EAAmB;CAC3C,MAAIlrB,OAAO,IAAX;CACA,OAAK+vB,QAAL,GAAgB,KAAhB;CACA,MAAIyB,aAAa,SAAbA,UAAa,GAAY;CAC3BxxB,SAAK+vB,QAAL,GAAgB,IAAhB;CACA/vB,SAAKmC,IAAL,CAAU,OAAV;CACD,GAHD;;CAKA8tB,YAAOwB,aAAP,CAAqBvG,OAArB,EAA8B,KAAKM,cAAnC,EAAmD,UAAUryG,IAAV,EAAgB;CACjE6mF,SAAK0xB,OAAL,CAAav4G,IAAb,EAAmBq4G,UAAnB;CACD,GAFD;CAGD,CAXD;;;;;;;;CAmBAX,QAAQ13I,SAAR,CAAkBi5H,GAAlB,GAAwB,YAAY;CAClC,MAAIuc,QAAQ,KAAKA,KAAL,IAAc,EAA1B;CACA,MAAIgD,SAAS,KAAKjD,MAAL,GAAc,OAAd,GAAwB,MAArC;CACA,MAAItW,OAAO,EAAX;;;CAGA,MAAI,UAAU,KAAKyW,iBAAnB,EAAsC;CACpCF,UAAM,KAAKC,cAAX,IAA6BgC,SAA7B;CACD;;CAED,MAAI,CAAC,KAAKpF,cAAN,IAAwB,CAACmD,MAAMiD,GAAnC,EAAwC;CACtCjD,UAAMzV,GAAN,GAAY,CAAZ;CACD;;CAEDyV,UAAQkD,QAAQnM,MAAR,CAAeiJ,KAAf,CAAR;;;CAGA,MAAI,KAAKvW,IAAL,KAAe,YAAYuZ,MAAZ,IAAsBh5I,OAAO,KAAKy/H,IAAZ,MAAsB,GAA7C,IACd,WAAWuZ,MAAX,IAAqBh5I,OAAO,KAAKy/H,IAAZ,MAAsB,EAD3C,CAAJ,EACqD;CACnDA,WAAO,MAAM,KAAKA,IAAlB;CACD;;;CAGD,MAAIuW,MAAM70I,MAAV,EAAkB;CAChB60I,YAAQ,MAAMA,KAAd;CACD;;CAED,MAAItW,OAAO,KAAKoW,QAAL,CAAch8G,OAAd,CAAsB,GAAtB,MAA+B,CAAC,CAA3C;CACA,SAAOk/G,SAAS,KAAT,IAAkBtZ,OAAO,MAAM,KAAKoW,QAAX,GAAsB,GAA7B,GAAmC,KAAKA,QAA1D,IAAsErW,IAAtE,GAA6E,KAAKlmF,IAAlF,GAAyFy8F,KAAhG;CACD,CA7BD;;CCvNA;;;;;;CAUA,IAAI/Y,UAAQ3E,UAAiB,8BAAjB,CAAZ;;;;;;CAMA,iBAAiB6gB,GAAjB;CACA,gBAAyBC,OAAzB;;;;;;CAMA,SAASntH,KAAT,GAAkB;;;;;;;;;CASlB,SAASktH,GAAT,CAAc3K,IAAd,EAAoB;CAClB0J,UAAQ52I,IAAR,CAAa,IAAb,EAAmBktI,IAAnB;CACA,OAAK6K,cAAL,GAAsB7K,KAAK6K,cAA3B;CACA,OAAKzC,YAAL,GAAoBpI,KAAKoI,YAAzB;;CAEA,MAAI,OAAOrX,QAAP,KAAoB,WAAxB,EAAqC;CACnC,QAAI+Z,QAAQ,aAAa/Z,SAASC,QAAlC;CACA,QAAIC,OAAOF,SAASE,IAApB;;;CAGA,QAAI,CAACA,IAAL,EAAW;CACTA,aAAO6Z,QAAQ,GAAR,GAAc,EAArB;CACD;;CAED,SAAKC,EAAL,GAAW,OAAOha,QAAP,KAAoB,WAApB,IAAmCiP,KAAKsH,QAAL,KAAkBvW,SAASuW,QAA/D,IACRrW,SAAS+O,KAAK/O,IADhB;CAEA,SAAK+Z,EAAL,GAAUhL,KAAKuH,MAAL,KAAgBuD,KAA1B;CACD;CACF;;;;;;AAMDf,kBAAQY,GAAR,EAAajB,OAAb;;;;;;CAMAiB,IAAI34I,SAAJ,CAAcqyI,cAAd,GAA+B,IAA/B;;;;;;;;;CASAsG,IAAI34I,SAAJ,CAAcwxD,OAAd,GAAwB,UAAUw8E,IAAV,EAAgB;CACtCA,SAAOA,QAAQ,EAAf;CACAA,OAAK/U,GAAL,GAAW,KAAKA,GAAL,EAAX;CACA+U,OAAK+K,EAAL,GAAU,KAAKA,EAAf;CACA/K,OAAKgL,EAAL,GAAU,KAAKA,EAAf;CACAhL,OAAK2H,KAAL,GAAa,KAAKA,KAAL,IAAc,KAA3B;CACA3H,OAAKqE,cAAL,GAAsB,KAAKA,cAA3B;CACArE,OAAKG,UAAL,GAAkB,KAAKA,UAAvB;;;CAGAH,OAAK4H,GAAL,GAAW,KAAKA,GAAhB;CACA5H,OAAKjuG,GAAL,GAAW,KAAKA,GAAhB;CACAiuG,OAAK6H,UAAL,GAAkB,KAAKA,UAAvB;CACA7H,OAAK8H,IAAL,GAAY,KAAKA,IAAjB;CACA9H,OAAK+H,EAAL,GAAU,KAAKA,EAAf;CACA/H,OAAKgI,OAAL,GAAe,KAAKA,OAApB;CACAhI,OAAKiI,kBAAL,GAA0B,KAAKA,kBAA/B;CACAjI,OAAK6K,cAAL,GAAsB,KAAKA,cAA3B;;;CAGA7K,OAAKoI,YAAL,GAAoB,KAAKA,YAAzB;;CAEA,SAAO,IAAIwC,OAAJ,CAAY5K,IAAZ,CAAP;CACD,CAvBD;;;;;;;;;;CAiCA2K,IAAI34I,SAAJ,CAAcu4I,OAAd,GAAwB,UAAUv4G,IAAV,EAAgBs/F,EAAhB,EAAoB;CAC1C,MAAIsU,WAAW,OAAO5zG,IAAP,KAAgB,QAAhB,IAA4BA,SAAStgC,SAApD;CACA,MAAIu5I,MAAM,KAAKznF,OAAL,CAAa,EAAE0nF,QAAQ,MAAV,EAAkBl5G,MAAMA,IAAxB,EAA8B4zG,UAAUA,QAAxC,EAAb,CAAV;CACA,MAAI/sB,OAAO,IAAX;CACAoyB,MAAIjvB,EAAJ,CAAO,SAAP,EAAkBsV,EAAlB;CACA2Z,MAAIjvB,EAAJ,CAAO,OAAP,EAAgB,UAAUT,GAAV,EAAe;CAC7B1C,SAAKp6D,OAAL,CAAa,gBAAb,EAA+B88D,GAA/B;CACD,GAFD;CAGA,OAAK4vB,OAAL,GAAeF,GAAf;CACD,CATD;;;;;;;;CAiBAN,IAAI34I,SAAJ,CAAcm4I,MAAd,GAAuB,YAAY;CACjC1b,UAAM,UAAN;CACA,MAAIwc,MAAM,KAAKznF,OAAL,EAAV;CACA,MAAIq1D,OAAO,IAAX;CACAoyB,MAAIjvB,EAAJ,CAAO,MAAP,EAAe,UAAUhqF,IAAV,EAAgB;CAC7B6mF,SAAKgwB,MAAL,CAAY72G,IAAZ;CACD,GAFD;CAGAi5G,MAAIjvB,EAAJ,CAAO,OAAP,EAAgB,UAAUT,GAAV,EAAe;CAC7B1C,SAAKp6D,OAAL,CAAa,gBAAb,EAA+B88D,GAA/B;CACD,GAFD;CAGA,OAAK6vB,OAAL,GAAeH,GAAf;CACD,CAXD;;;;;;;;;CAoBA,SAASL,OAAT,CAAkB5K,IAAlB,EAAwB;CACtB,OAAKkL,MAAL,GAAclL,KAAKkL,MAAL,IAAe,KAA7B;CACA,OAAKjgB,GAAL,GAAW+U,KAAK/U,GAAhB;CACA,OAAK8f,EAAL,GAAU,CAAC,CAAC/K,KAAK+K,EAAjB;CACA,OAAKC,EAAL,GAAU,CAAC,CAAChL,KAAKgL,EAAjB;CACA,OAAKK,KAAL,GAAa,UAAUrL,KAAKqL,KAA5B;CACA,OAAKr5G,IAAL,GAAYtgC,cAAcsuI,KAAKhuG,IAAnB,GAA0BguG,KAAKhuG,IAA/B,GAAsC,IAAlD;CACA,OAAK21G,KAAL,GAAa3H,KAAK2H,KAAlB;CACA,OAAK/B,QAAL,GAAgB5F,KAAK4F,QAArB;CACA,OAAKvB,cAAL,GAAsBrE,KAAKqE,cAA3B;CACA,OAAKlE,UAAL,GAAkBH,KAAKG,UAAvB;CACA,OAAK0K,cAAL,GAAsB7K,KAAK6K,cAA3B;;;CAGA,OAAKjD,GAAL,GAAW5H,KAAK4H,GAAhB;CACA,OAAK71G,GAAL,GAAWiuG,KAAKjuG,GAAhB;CACA,OAAK81G,UAAL,GAAkB7H,KAAK6H,UAAvB;CACA,OAAKC,IAAL,GAAY9H,KAAK8H,IAAjB;CACA,OAAKC,EAAL,GAAU/H,KAAK+H,EAAf;CACA,OAAKC,OAAL,GAAehI,KAAKgI,OAApB;CACA,OAAKC,kBAAL,GAA0BjI,KAAKiI,kBAA/B;;;CAGA,OAAKG,YAAL,GAAoBpI,KAAKoI,YAAzB;;CAEA,OAAKz/G,MAAL;CACD;;;;;;AAMDyoG,kBAAQwZ,QAAQ54I,SAAhB;;;;;;;;CAQA44I,QAAQ54I,SAAR,CAAkB22B,MAAlB,GAA2B,YAAY;CACrC,MAAIq3G,OAAO,EAAE2H,OAAO,KAAKA,KAAd,EAAqB1H,SAAS,KAAK8K,EAAnC,EAAuC7K,SAAS,KAAK8K,EAArD,EAAyD7K,YAAY,KAAKA,UAA1E,EAAX;;;CAGAH,OAAK4H,GAAL,GAAW,KAAKA,GAAhB;CACA5H,OAAKjuG,GAAL,GAAW,KAAKA,GAAhB;CACAiuG,OAAK6H,UAAL,GAAkB,KAAKA,UAAvB;CACA7H,OAAK8H,IAAL,GAAY,KAAKA,IAAjB;CACA9H,OAAK+H,EAAL,GAAU,KAAKA,EAAf;CACA/H,OAAKgI,OAAL,GAAe,KAAKA,OAApB;CACAhI,OAAKiI,kBAAL,GAA0B,KAAKA,kBAA/B;;CAEA,MAAI4B,MAAM,KAAKA,GAAL,GAAW,IAAI9J,cAAJ,CAAmBC,IAAnB,CAArB;CACA,MAAInnB,OAAO,IAAX;;CAEA,MAAI;CACF4V,YAAM,iBAAN,EAAyB,KAAKyc,MAA9B,EAAsC,KAAKjgB,GAA3C;CACA4e,QAAInmF,IAAJ,CAAS,KAAKwnF,MAAd,EAAsB,KAAKjgB,GAA3B,EAAgC,KAAKogB,KAArC;CACA,QAAI;CACF,UAAI,KAAKjD,YAAT,EAAuB;CACrByB,YAAIyB,qBAAJ,IAA6BzB,IAAIyB,qBAAJ,CAA0B,IAA1B,CAA7B;CACA,aAAK,IAAIl9H,CAAT,IAAc,KAAKg6H,YAAnB,EAAiC;CAC/B,cAAI,KAAKA,YAAL,CAAkBv1I,cAAlB,CAAiCub,CAAjC,CAAJ,EAAyC;CACvCy7H,gBAAI0B,gBAAJ,CAAqBn9H,CAArB,EAAwB,KAAKg6H,YAAL,CAAkBh6H,CAAlB,CAAxB;CACD;CACF;CACF;CACF,KATD,CASE,OAAO/F,CAAP,EAAU;;CAEZ,QAAI,WAAW,KAAK6iI,MAApB,EAA4B;CAC1B,UAAI;CACF,YAAI,KAAKtF,QAAT,EAAmB;CACjBiE,cAAI0B,gBAAJ,CAAqB,cAArB,EAAqC,0BAArC;CACD,SAFD,MAEO;CACL1B,cAAI0B,gBAAJ,CAAqB,cAArB,EAAqC,0BAArC;CACD;CACF,OAND,CAME,OAAOljI,CAAP,EAAU;CACb;;CAED,QAAI;CACFwhI,UAAI0B,gBAAJ,CAAqB,QAArB,EAA+B,KAA/B;CACD,KAFD,CAEE,OAAOljI,CAAP,EAAU;;;CAGZ,QAAI,qBAAqBwhI,GAAzB,EAA8B;CAC5BA,UAAI7lF,eAAJ,GAAsB,IAAtB;CACD;;CAED,QAAI,KAAK6mF,cAAT,EAAyB;CACvBhB,UAAIxd,OAAJ,GAAc,KAAKwe,cAAnB;CACD;;CAED,QAAI,KAAKW,MAAL,EAAJ,EAAmB;CACjB3B,UAAI7L,MAAJ,GAAa,YAAY;CACvBnlB,aAAKt6D,MAAL;CACD,OAFD;CAGAsrF,UAAI4B,OAAJ,GAAc,YAAY;CACxB5yB,aAAKp6D,OAAL,CAAaorF,IAAI6B,YAAjB;CACD,OAFD;CAGD,KAPD,MAOO;CACL7B,UAAI8B,kBAAJ,GAAyB,YAAY;CACnC,YAAI9B,IAAIl4E,UAAJ,KAAmB,CAAvB,EAA0B;CACxB,cAAI;CACF,gBAAIi6E,cAAc/B,IAAIgC,iBAAJ,CAAsB,cAAtB,CAAlB;CACA,gBAAIhzB,KAAKwrB,cAAL,IAAuBuH,gBAAgB,0BAA3C,EAAuE;CACrE/B,kBAAI9lF,YAAJ,GAAmB,aAAnB;CACD;CACF,WALD,CAKE,OAAO17C,CAAP,EAAU;CACb;CACD,YAAI,MAAMwhI,IAAIl4E,UAAd,EAA0B;CAC1B,YAAI,QAAQk4E,IAAIjmF,MAAZ,IAAsB,SAASimF,IAAIjmF,MAAvC,EAA+C;CAC7Ci1D,eAAKt6D,MAAL;CACD,SAFD,MAEO;;;CAGLgF,qBAAW,YAAY;CACrBs1D,iBAAKp6D,OAAL,CAAaorF,IAAIjmF,MAAjB;CACD,WAFD,EAEG,CAFH;CAGD;CACF,OAnBD;CAoBD;;CAED6qE,YAAM,aAAN,EAAqB,KAAKz8F,IAA1B;CACA63G,QAAI5lF,IAAJ,CAAS,KAAKjyB,IAAd;CACD,GArED,CAqEE,OAAO3pB,CAAP,EAAU;;;;CAIVk7C,eAAW,YAAY;CACrBs1D,WAAKp6D,OAAL,CAAap2C,CAAb;CACD,KAFD,EAEG,CAFH;CAGA;CACD;;CAED,MAAI,OAAOs8C,QAAP,KAAoB,WAAxB,EAAqC;CACnC,SAAKlyD,KAAL,GAAam4I,QAAQkB,aAAR,EAAb;CACAlB,YAAQmB,QAAR,CAAiB,KAAKt5I,KAAtB,IAA+B,IAA/B;CACD;CACF,CAlGD;;;;;;;;CA0GAm4I,QAAQ54I,SAAR,CAAkBg6I,SAAlB,GAA8B,YAAY;CACxC,OAAKhxB,IAAL,CAAU,SAAV;CACA,OAAKixB,OAAL;CACD,CAHD;;;;;;;;CAWArB,QAAQ54I,SAAR,CAAkB62I,MAAlB,GAA2B,UAAU72G,IAAV,EAAgB;CACzC,OAAKgpF,IAAL,CAAU,MAAV,EAAkBhpF,IAAlB;CACA,OAAKg6G,SAAL;CACD,CAHD;;;;;;;;CAWApB,QAAQ54I,SAAR,CAAkBysD,OAAlB,GAA4B,UAAU88D,GAAV,EAAe;CACzC,OAAKP,IAAL,CAAU,OAAV,EAAmBO,GAAnB;CACA,OAAK0wB,OAAL,CAAa,IAAb;CACD,CAHD;;;;;;;;CAWArB,QAAQ54I,SAAR,CAAkBi6I,OAAlB,GAA4B,UAAUC,SAAV,EAAqB;CAC/C,MAAI,gBAAgB,OAAO,KAAKrC,GAA5B,IAAmC,SAAS,KAAKA,GAArD,EAA0D;CACxD;CACD;;CAED,MAAI,KAAK2B,MAAL,EAAJ,EAAmB;CACjB,SAAK3B,GAAL,CAAS7L,MAAT,GAAkB,KAAK6L,GAAL,CAAS4B,OAAT,GAAmBhuH,KAArC;CACD,GAFD,MAEO;CACL,SAAKosH,GAAL,CAAS8B,kBAAT,GAA8BluH,KAA9B;CACD;;CAED,MAAIyuH,SAAJ,EAAe;CACb,QAAI;CACF,WAAKrC,GAAL,CAASsC,KAAT;CACD,KAFD,CAEE,OAAO9jI,CAAP,EAAU;CACb;;CAED,MAAI,OAAOs8C,QAAP,KAAoB,WAAxB,EAAqC;CACnC,WAAOimF,QAAQmB,QAAR,CAAiB,KAAKt5I,KAAtB,CAAP;CACD;;CAED,OAAKo3I,GAAL,GAAW,IAAX;CACD,CAtBD;;;;;;;;CA8BAe,QAAQ54I,SAAR,CAAkBusD,MAAlB,GAA2B,YAAY;CACrC,MAAIvsB,IAAJ;CACA,MAAI;CACF,QAAI45G,WAAJ;CACA,QAAI;CACFA,oBAAc,KAAK/B,GAAL,CAASgC,iBAAT,CAA2B,cAA3B,CAAd;CACD,KAFD,CAEE,OAAOxjI,CAAP,EAAU;CACZ,QAAIujI,gBAAgB,0BAApB,EAAgD;CAC9C55G,aAAO,KAAK63G,GAAL,CAASlmF,QAAT,IAAqB,KAAKkmF,GAAL,CAAS6B,YAArC;CACD,KAFD,MAEO;CACL15G,aAAO,KAAK63G,GAAL,CAAS6B,YAAhB;CACD;CACF,GAVD,CAUE,OAAOrjI,CAAP,EAAU;CACV,SAAKo2C,OAAL,CAAap2C,CAAb;CACD;CACD,MAAI,QAAQ2pB,IAAZ,EAAkB;CAChB,SAAK62G,MAAL,CAAY72G,IAAZ;CACD;CACF,CAlBD;;;;;;;;CA0BA44G,QAAQ54I,SAAR,CAAkBw5I,MAAlB,GAA2B,YAAY;CACrC,SAAO,OAAOnL,cAAP,KAA0B,WAA1B,IAAyC,CAAC,KAAK2K,EAA/C,IAAqD,KAAK7K,UAAjE;CACD,CAFD;;;;;;;;CAUAyK,QAAQ54I,SAAR,CAAkBm6I,KAAlB,GAA0B,YAAY;CACpC,OAAKF,OAAL;CACD,CAFD;;;;;;;;CAUArB,QAAQkB,aAAR,GAAwB,CAAxB;CACAlB,QAAQmB,QAAR,GAAmB,EAAnB;;CAEA,IAAI,OAAOpnF,QAAP,KAAoB,WAAxB,EAAqC;CACnC,MAAI,OAAOynF,WAAP,KAAuB,UAA3B,EAAuC;CACrCA,gBAAY,UAAZ,EAAwBC,aAAxB;CACD,GAFD,MAEO,IAAI,OAAOphH,gBAAP,KAA4B,UAAhC,EAA4C;CACjD,QAAIqhH,mBAAmB,gBAAgBzzB,IAAhB,GAAuB,UAAvB,GAAoC,QAA3D;CACA5tF,qBAAiBqhH,gBAAjB,EAAmCD,aAAnC,EAAkD,KAAlD;CACD;CACF;;CAED,SAASA,aAAT,GAA0B;CACxB,OAAK,IAAIj+H,CAAT,IAAcw8H,QAAQmB,QAAtB,EAAgC;CAC9B,QAAInB,QAAQmB,QAAR,CAAiBl5I,cAAjB,CAAgCub,CAAhC,CAAJ,EAAwC;CACtCw8H,cAAQmB,QAAR,CAAiB39H,CAAjB,EAAoB+9H,KAApB;CACD;CACF;CACF;;;CC9ZD;;;;;;;;CAWA,mBAAiBI,YAAjB;;;;;;CAMA,IAAIC,WAAW,KAAf;CACA,IAAIC,kBAAkB,MAAtB;;;;;;CAMA,IAAIjb,SAAJ;;;;;;CAMA,SAAS/zG,OAAT,GAAkB;;;;;CAKlB,SAASivH,IAAT,GAAiB;CACf,SAAO,OAAO7zB,IAAP,KAAgB,WAAhB,GAA8BA,IAA9B,GACD,OAAOhhE,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GACA,OAAOwzE,cAAP,KAAkB,WAAlB,GAAgCA,cAAhC,GAAyC,EAF/C;CAGD;;;;;;;;;CASD,SAASkhB,YAAT,CAAuBvM,IAAvB,EAA6B;CAC3B0J,UAAQ52I,IAAR,CAAa,IAAb,EAAmBktI,IAAnB;;CAEA,OAAKwH,KAAL,GAAa,KAAKA,KAAL,IAAc,EAA3B;;;;CAIA,MAAI,CAAChW,SAAL,EAAgB;;CAEd,QAAInG,SAASqhB,MAAb;CACAlb,gBAAYnG,OAAOshB,MAAP,GAAiBthB,OAAOshB,MAAP,IAAiB,EAA9C;CACD;;;CAGD,OAAKl6I,KAAL,GAAa++H,UAAU7+H,MAAvB;;;CAGA,MAAIkmH,OAAO,IAAX;CACA2Y,YAAUpsG,IAAV,CAAe,UAAUxS,GAAV,EAAe;CAC5BimG,SAAKgwB,MAAL,CAAYj2H,GAAZ;CACD,GAFD;;;CAKA,OAAK40H,KAAL,CAAWz1H,CAAX,GAAe,KAAKtf,KAApB;;;CAGA,MAAI,OAAOw4B,gBAAP,KAA4B,UAAhC,EAA4C;CAC1CA,qBAAiB,cAAjB,EAAiC,YAAY;CAC3C,UAAI4tF,KAAK+zB,MAAT,EAAiB/zB,KAAK+zB,MAAL,CAAYnB,OAAZ,GAAsBhuH,OAAtB;CAClB,KAFD,EAEG,KAFH;CAGD;CACF;;;;;;AAMDssH,kBAAQwC,YAAR,EAAsB7C,OAAtB;;;;;;CAMA6C,aAAav6I,SAAb,CAAuBqyI,cAAvB,GAAwC,KAAxC;;;;;;;;CAQAkI,aAAav6I,SAAb,CAAuBy2I,OAAvB,GAAiC,YAAY;CAC3C,MAAI,KAAKmE,MAAT,EAAiB;CACf,SAAKA,MAAL,CAAYC,UAAZ,CAAuBC,WAAvB,CAAmC,KAAKF,MAAxC;CACA,SAAKA,MAAL,GAAc,IAAd;CACD;;CAED,MAAI,KAAKG,IAAT,EAAe;CACb,SAAKA,IAAL,CAAUF,UAAV,CAAqBC,WAArB,CAAiC,KAAKC,IAAtC;CACA,SAAKA,IAAL,GAAY,IAAZ;CACA,SAAKC,MAAL,GAAc,IAAd;CACD;;CAEDtD,UAAQ13I,SAAR,CAAkBy2I,OAAlB,CAA0B31I,IAA1B,CAA+B,IAA/B;CACD,CAbD;;;;;;;;CAqBAy5I,aAAav6I,SAAb,CAAuBm4I,MAAvB,GAAgC,YAAY;CAC1C,MAAItxB,OAAO,IAAX;CACA,MAAI+zB,SAASjoF,SAASC,aAAT,CAAuB,QAAvB,CAAb;;CAEA,MAAI,KAAKgoF,MAAT,EAAiB;CACf,SAAKA,MAAL,CAAYC,UAAZ,CAAuBC,WAAvB,CAAmC,KAAKF,MAAxC;CACA,SAAKA,MAAL,GAAc,IAAd;CACD;;CAEDA,SAAOvB,KAAP,GAAe,IAAf;CACAuB,SAAO9nF,GAAP,GAAa,KAAKmmE,GAAL,EAAb;CACA2hB,SAAOnB,OAAP,GAAiB,UAAUpjI,CAAV,EAAa;CAC5BwwG,SAAKp6D,OAAL,CAAa,kBAAb,EAAiCp2C,CAAjC;CACD,GAFD;;CAIA,MAAI4kI,WAAWtoF,SAASuoF,oBAAT,CAA8B,QAA9B,EAAwC,CAAxC,CAAf;CACA,MAAID,QAAJ,EAAc;CACZA,aAASJ,UAAT,CAAoBM,YAApB,CAAiCP,MAAjC,EAAyCK,QAAzC;CACD,GAFD,MAEO;CACL,KAACtoF,SAASyoF,IAAT,IAAiBzoF,SAASg8D,IAA3B,EAAiCnI,WAAjC,CAA6Co0B,MAA7C;CACD;CACD,OAAKA,MAAL,GAAcA,MAAd;;CAEA,MAAIS,YAAY,gBAAgB,OAAOnd,SAAvB,IAAoC,SAAS/jG,IAAT,CAAc+jG,UAAUC,SAAxB,CAApD;;CAEA,MAAIkd,SAAJ,EAAe;CACb9pF,eAAW,YAAY;CACrB,UAAIypF,SAASroF,SAASC,aAAT,CAAuB,QAAvB,CAAb;CACAD,eAASg8D,IAAT,CAAcnI,WAAd,CAA0Bw0B,MAA1B;CACAroF,eAASg8D,IAAT,CAAcmsB,WAAd,CAA0BE,MAA1B;CACD,KAJD,EAIG,GAJH;CAKD;CACF,CAhCD;;;;;;;;;;CA0CAT,aAAav6I,SAAb,CAAuBu4I,OAAvB,GAAiC,UAAUv4G,IAAV,EAAgBs/F,EAAhB,EAAoB;CACnD,MAAIzY,OAAO,IAAX;;CAEA,MAAI,CAAC,KAAKk0B,IAAV,EAAgB;CACd,QAAIA,OAAOpoF,SAASC,aAAT,CAAuB,MAAvB,CAAX;CACA,QAAIr+B,OAAOo+B,SAASC,aAAT,CAAuB,UAAvB,CAAX;CACA,QAAIz0B,KAAK,KAAKm9G,QAAL,GAAgB,gBAAgB,KAAK76I,KAA9C;CACA,QAAIu6I,MAAJ;;CAEAD,SAAKQ,SAAL,GAAiB,UAAjB;CACAR,SAAKxwI,KAAL,CAAWuc,QAAX,GAAsB,UAAtB;CACAi0H,SAAKxwI,KAAL,CAAWgd,GAAX,GAAiB,SAAjB;CACAwzH,SAAKxwI,KAAL,CAAW6c,IAAX,GAAkB,SAAlB;CACA2zH,SAAKv6I,MAAL,GAAc29B,EAAd;CACA48G,SAAK7B,MAAL,GAAc,MAAd;CACA6B,SAAKS,YAAL,CAAkB,gBAAlB,EAAoC,OAApC;CACAjnH,SAAKt0B,IAAL,GAAY,GAAZ;CACA86I,SAAKv0B,WAAL,CAAiBjyF,IAAjB;CACAo+B,aAASg8D,IAAT,CAAcnI,WAAd,CAA0Bu0B,IAA1B;;CAEA,SAAKA,IAAL,GAAYA,IAAZ;CACA,SAAKxmH,IAAL,GAAYA,IAAZ;CACD;;CAED,OAAKwmH,IAAL,CAAUxqG,MAAV,GAAmB,KAAK0oF,GAAL,EAAnB;;CAEA,WAAS16C,QAAT,GAAqB;CACnBk9D;CACAnc;CACD;;CAED,WAASmc,UAAT,GAAuB;CACrB,QAAI50B,KAAKm0B,MAAT,EAAiB;CACf,UAAI;CACFn0B,aAAKk0B,IAAL,CAAUD,WAAV,CAAsBj0B,KAAKm0B,MAA3B;CACD,OAFD,CAEE,OAAO3kI,CAAP,EAAU;CACVwwG,aAAKp6D,OAAL,CAAa,oCAAb,EAAmDp2C,CAAnD;CACD;CACF;;CAED,QAAI;;CAEF,UAAIqlI,OAAO,sCAAsC70B,KAAKy0B,QAA3C,GAAsD,IAAjE;CACAN,eAASroF,SAASC,aAAT,CAAuB8oF,IAAvB,CAAT;CACD,KAJD,CAIE,OAAOrlI,CAAP,EAAU;CACV2kI,eAASroF,SAASC,aAAT,CAAuB,QAAvB,CAAT;CACAooF,aAAO/6I,IAAP,GAAc4mH,KAAKy0B,QAAnB;CACAN,aAAOloF,GAAP,GAAa,cAAb;CACD;;CAEDkoF,WAAO78G,EAAP,GAAY0oF,KAAKy0B,QAAjB;;CAEAz0B,SAAKk0B,IAAL,CAAUv0B,WAAV,CAAsBw0B,MAAtB;CACAn0B,SAAKm0B,MAAL,GAAcA,MAAd;CACD;;CAEDS;;;;CAIAz7G,SAAOA,KAAKipD,OAAL,CAAawxD,eAAb,EAA8B,MAA9B,CAAP;CACA,OAAKlmH,IAAL,CAAUlrB,KAAV,GAAkB22B,KAAKipD,OAAL,CAAauxD,QAAb,EAAuB,KAAvB,CAAlB;;CAEA,MAAI;CACF,SAAKO,IAAL,CAAUY,MAAV;CACD,GAFD,CAEE,OAAOtlI,CAAP,EAAU;;CAEZ,MAAI,KAAK2kI,MAAL,CAAYZ,WAAhB,EAA6B;CAC3B,SAAKY,MAAL,CAAYrB,kBAAZ,GAAiC,YAAY;CAC3C,UAAI9yB,KAAKm0B,MAAL,CAAYr7E,UAAZ,KAA2B,UAA/B,EAA2C;CACzC4e;CACD;CACF,KAJD;CAKD,GAND,MAMO;CACL,SAAKy8D,MAAL,CAAYhP,MAAZ,GAAqBztD,QAArB;CACD;CACF,CA5ED;;AClKA,kBAAe,EAAf;;;;;;CCSA,IAAIk+C,UAAQ3E,UAAiB,4BAAjB,CAAZ;;CAEA,IAAI8jB,gBAAJ,EAAsBC,aAAtB;;CAEA,IAAI,OAAOC,SAAP,KAAqB,WAAzB,EAAsC;CACpCF,qBAAmBE,SAAnB;CACD,CAFD,MAEO,IAAI,OAAOj1B,IAAP,KAAgB,WAApB,EAAiC;CACtC+0B,qBAAmB/0B,KAAKi1B,SAAL,IAAkBj1B,KAAKk1B,YAA1C;CACD,CAFM,MAEA;CACL,MAAI;CACFF,oBAAgBjE,UAAhB;CACD,GAFD,CAEE,OAAOvhI,CAAP,EAAU;CACb;;;;;;;;CAQD,IAAI2lI,gBAAgBJ,oBAAoBC,aAAxC;;;;;;CAMA,gBAAiBI,EAAjB;;;;;;;;;CASA,SAASA,EAAT,CAAajO,IAAb,EAAmB;CACjB,MAAI8J,cAAe9J,QAAQA,KAAK8J,WAAhC;CACA,MAAIA,WAAJ,EAAiB;CACf,SAAKzF,cAAL,GAAsB,KAAtB;CACD;CACD,OAAK6J,iBAAL,GAAyBlO,KAAKkO,iBAA9B;CACA,OAAKC,qBAAL,GAA6BP,oBAAoB,CAAC5N,KAAKkI,SAAvD;CACA,OAAKkG,SAAL,GAAiBpO,KAAKoO,SAAtB;CACA,MAAI,CAAC,KAAKD,qBAAV,EAAiC;CAC/BH,oBAAgBH,aAAhB;CACD;CACDxG,YAAUv0I,IAAV,CAAe,IAAf,EAAqBktI,IAArB;CACD;;;;;;AAMD+J,kBAAQkE,EAAR,EAAY5G,SAAZ;;;;;;;;CAQA4G,GAAGj8I,SAAH,CAAaC,IAAb,GAAoB,WAApB;;;;;;CAMAg8I,GAAGj8I,SAAH,CAAaqyI,cAAb,GAA8B,IAA9B;;;;;;;;CAQA4J,GAAGj8I,SAAH,CAAaw2I,MAAb,GAAsB,YAAY;CAChC,MAAI,CAAC,KAAK6F,KAAL,EAAL,EAAmB;;CAEjB;CACD;;CAED,MAAIpjB,MAAM,KAAKA,GAAL,EAAV;CACA,MAAImjB,YAAY,KAAKA,SAArB;CACA,MAAIpO,OAAO;CACT2H,WAAO,KAAKA,KADH;CAETuG,uBAAmB,KAAKA;CAFf,GAAX;;;CAMAlO,OAAK4H,GAAL,GAAW,KAAKA,GAAhB;CACA5H,OAAKjuG,GAAL,GAAW,KAAKA,GAAhB;CACAiuG,OAAK6H,UAAL,GAAkB,KAAKA,UAAvB;CACA7H,OAAK8H,IAAL,GAAY,KAAKA,IAAjB;CACA9H,OAAK+H,EAAL,GAAU,KAAKA,EAAf;CACA/H,OAAKgI,OAAL,GAAe,KAAKA,OAApB;CACAhI,OAAKiI,kBAAL,GAA0B,KAAKA,kBAA/B;CACA,MAAI,KAAKG,YAAT,EAAuB;CACrBpI,SAAKsO,OAAL,GAAe,KAAKlG,YAApB;CACD;CACD,MAAI,KAAKC,YAAT,EAAuB;CACrBrI,SAAKqI,YAAL,GAAoB,KAAKA,YAAzB;CACD;;CAED,MAAI;CACF,SAAKkG,EAAL,GACE,KAAKJ,qBAAL,IAA8B,CAAC,KAAKhG,aAApC,GACIiG,YACE,IAAIJ,aAAJ,CAAkB/iB,GAAlB,EAAuBmjB,SAAvB,CADF,GAEE,IAAIJ,aAAJ,CAAkB/iB,GAAlB,CAHN,GAII,IAAI+iB,aAAJ,CAAkB/iB,GAAlB,EAAuBmjB,SAAvB,EAAkCpO,IAAlC,CALN;CAMD,GAPD,CAOE,OAAOzkB,GAAP,EAAY;CACZ,WAAO,KAAKP,IAAL,CAAU,OAAV,EAAmBO,GAAnB,CAAP;CACD;;CAED,MAAI,KAAKgzB,EAAL,CAAQjJ,UAAR,KAAuB5zI,SAA3B,EAAsC;CACpC,SAAK2yI,cAAL,GAAsB,KAAtB;CACD;;CAED,MAAI,KAAKkK,EAAL,CAAQC,QAAR,IAAoB,KAAKD,EAAL,CAAQC,QAAR,CAAiBvP,MAAzC,EAAiD;CAC/C,SAAKoF,cAAL,GAAsB,IAAtB;CACA,SAAKkK,EAAL,CAAQjJ,UAAR,GAAqB,YAArB;CACD,GAHD,MAGO;CACL,SAAKiJ,EAAL,CAAQjJ,UAAR,GAAqB,aAArB;CACD;;CAED,OAAKmJ,iBAAL;CACD,CAnDD;;;;;;;;CA2DAR,GAAGj8I,SAAH,CAAay8I,iBAAb,GAAiC,YAAY;CAC3C,MAAI51B,OAAO,IAAX;;CAEA,OAAK01B,EAAL,CAAQG,MAAR,GAAiB,YAAY;CAC3B71B,SAAK8vB,MAAL;CACD,GAFD;CAGA,OAAK4F,EAAL,CAAQI,OAAR,GAAkB,YAAY;CAC5B91B,SAAK6vB,OAAL;CACD,GAFD;CAGA,OAAK6F,EAAL,CAAQK,SAAR,GAAoB,UAAUC,EAAV,EAAc;CAChCh2B,SAAKgwB,MAAL,CAAYgG,GAAG78G,IAAf;CACD,GAFD;CAGA,OAAKu8G,EAAL,CAAQ9C,OAAR,GAAkB,UAAUpjI,CAAV,EAAa;CAC7BwwG,SAAKp6D,OAAL,CAAa,iBAAb,EAAgCp2C,CAAhC;CACD,GAFD;CAGD,CAfD;;;;;;;;;CAwBA4lI,GAAGj8I,SAAH,CAAamhI,KAAb,GAAqB,UAAU4Q,OAAV,EAAmB;CACtC,MAAIlrB,OAAO,IAAX;CACA,OAAK+vB,QAAL,GAAgB,KAAhB;;;;CAIA,MAAIjkH,QAAQo/G,QAAQpxI,MAApB;CACA,OAAK,IAAIyb,IAAI,CAAR,EAAWjS,IAAIwoB,KAApB,EAA2BvW,IAAIjS,CAA/B,EAAkCiS,GAAlC,EAAuC;CACrC,KAAC,UAAU6uH,MAAV,EAAkB;CACjB6L,gBAAO/D,YAAP,CAAoB9H,MAApB,EAA4BpkB,KAAKwrB,cAAjC,EAAiD,UAAUryG,IAAV,EAAgB;CAC/D,YAAI,CAAC6mF,KAAKs1B,qBAAV,EAAiC;;CAE/B,cAAInO,OAAO,EAAX;CACA,cAAI/C,OAAO5iF,OAAX,EAAoB;CAClB2lF,iBAAK8O,QAAL,GAAgB7R,OAAO5iF,OAAP,CAAey0F,QAA/B;CACD;;CAED,cAAIj2B,KAAKq1B,iBAAT,EAA4B;CAC1B,gBAAI1oI,MAAM,aAAa,OAAOwsB,IAApB,GAA2BshG,OAAOoB,UAAP,CAAkB1iG,IAAlB,CAA3B,GAAqDA,KAAKr/B,MAApE;CACA,gBAAI6S,MAAMqzG,KAAKq1B,iBAAL,CAAuBvhH,SAAjC,EAA4C;CAC1CqzG,mBAAK8O,QAAL,GAAgB,KAAhB;CACD;CACF;CACF;;;;;CAKD,YAAI;CACF,cAAIj2B,KAAKs1B,qBAAT,EAAgC;;CAE9Bt1B,iBAAK01B,EAAL,CAAQtqF,IAAR,CAAajyB,IAAb;CACD,WAHD,MAGO;CACL6mF,iBAAK01B,EAAL,CAAQtqF,IAAR,CAAajyB,IAAb,EAAmBguG,IAAnB;CACD;CACF,SAPD,CAOE,OAAO33H,CAAP,EAAU;CACVomH,kBAAM,uCAAN;CACD;;CAED,UAAE9pG,KAAF,IAAWwhH,MAAX;CACD,OA/BD;CAgCD,KAjCD,EAiCGpC,QAAQ31H,CAAR,CAjCH;CAkCD;;CAED,WAAS+3H,IAAT,GAAiB;CACfttB,SAAKmC,IAAL,CAAU,OAAV;;;;CAIAz3D,eAAW,YAAY;CACrBs1D,WAAK+vB,QAAL,GAAgB,IAAhB;CACA/vB,WAAKmC,IAAL,CAAU,OAAV;CACD,KAHD,EAGG,CAHH;CAID;CACF,CAtDD;;;;;;;;CA8DAizB,GAAGj8I,SAAH,CAAa02I,OAAb,GAAuB,YAAY;CACjCrB,YAAUr1I,SAAV,CAAoB02I,OAApB,CAA4B51I,IAA5B,CAAiC,IAAjC;CACD,CAFD;;;;;;;;CAUAm7I,GAAGj8I,SAAH,CAAay2I,OAAb,GAAuB,YAAY;CACjC,MAAI,OAAO,KAAK8F,EAAZ,KAAmB,WAAvB,EAAoC;CAClC,SAAKA,EAAL,CAAQvK,KAAR;CACD;CACF,CAJD;;;;;;;;CAYAiK,GAAGj8I,SAAH,CAAai5H,GAAb,GAAmB,YAAY;CAC7B,MAAIuc,QAAQ,KAAKA,KAAL,IAAc,EAA1B;CACA,MAAIgD,SAAS,KAAKjD,MAAL,GAAc,KAAd,GAAsB,IAAnC;CACA,MAAItW,OAAO,EAAX;;;CAGA,MAAI,KAAKA,IAAL,KAAe,UAAUuZ,MAAV,IAAoBh5I,OAAO,KAAKy/H,IAAZ,MAAsB,GAA3C,IACf,SAASuZ,MAAT,IAAmBh5I,OAAO,KAAKy/H,IAAZ,MAAsB,EADxC,CAAJ,EACkD;CAChDA,WAAO,MAAM,KAAKA,IAAlB;CACD;;;CAGD,MAAI,KAAKyW,iBAAT,EAA4B;CAC1BF,UAAM,KAAKC,cAAX,IAA6BgC,SAA7B;CACD;;;CAGD,MAAI,CAAC,KAAKpF,cAAV,EAA0B;CACxBmD,UAAMzV,GAAN,GAAY,CAAZ;CACD;;CAEDyV,UAAQkD,QAAQnM,MAAR,CAAeiJ,KAAf,CAAR;;;CAGA,MAAIA,MAAM70I,MAAV,EAAkB;CAChB60I,YAAQ,MAAMA,KAAd;CACD;;CAED,MAAItW,OAAO,KAAKoW,QAAL,CAAch8G,OAAd,CAAsB,GAAtB,MAA+B,CAAC,CAA3C;CACA,SAAOk/G,SAAS,KAAT,IAAkBtZ,OAAO,MAAM,KAAKoW,QAAX,GAAsB,GAA7B,GAAmC,KAAKA,QAA1D,IAAsErW,IAAtE,GAA6E,KAAKlmF,IAAlF,GAAyFy8F,KAAhG;CACD,CA9BD;;;;;;;;;CAuCAyG,GAAGj8I,SAAH,CAAaq8I,KAAb,GAAqB,YAAY;CAC/B,SAAO,CAAC,CAACL,aAAF,IAAmB,EAAE,kBAAkBA,aAAlB,IAAmC,KAAK/7I,IAAL,KAAcg8I,GAAGj8I,SAAH,CAAaC,IAAhE,CAA1B;CACD,CAFD;;CClSA;;;;;;;;CAaA,gBAAkBi4I,SAAlB;CACA,kBAAoB6E,SAApB;;;;;;;;;CASA,SAAS7E,SAAT,CAAkBlK,IAAlB,EAAwB;CACtB,MAAI6J,GAAJ;CACA,MAAIkB,KAAK,KAAT;CACA,MAAIC,KAAK,KAAT;CACA,MAAIgE,QAAQ,UAAUhP,KAAKgP,KAA3B;;CAEA,MAAI,OAAOje,QAAP,KAAoB,WAAxB,EAAqC;CACnC,QAAI+Z,QAAQ,aAAa/Z,SAASC,QAAlC;CACA,QAAIC,OAAOF,SAASE,IAApB;;;CAGA,QAAI,CAACA,IAAL,EAAW;CACTA,aAAO6Z,QAAQ,GAAR,GAAc,EAArB;CACD;;CAEDC,SAAK/K,KAAKsH,QAAL,KAAkBvW,SAASuW,QAA3B,IAAuCrW,SAAS+O,KAAK/O,IAA1D;CACA+Z,SAAKhL,KAAKuH,MAAL,KAAgBuD,KAArB;CACD;;CAED9K,OAAKC,OAAL,GAAe8K,EAAf;CACA/K,OAAKE,OAAL,GAAe8K,EAAf;CACAnB,QAAM,IAAI9J,cAAJ,CAAmBC,IAAnB,CAAN;;CAEA,MAAI,UAAU6J,GAAV,IAAiB,CAAC7J,KAAKiP,UAA3B,EAAuC;CACrC,WAAO,IAAItE,UAAJ,CAAQ3K,IAAR,CAAP;CACD,GAFD,MAEO;CACL,QAAI,CAACgP,KAAL,EAAY,MAAM,IAAI5zB,KAAJ,CAAU,gBAAV,CAAN;CACZ,WAAO,IAAI8zB,YAAJ,CAAUlP,IAAV,CAAP;CACD;CACF;;;;;;;CCnDD,IAAI10G,UAAU,GAAGA,OAAjB;;CAEA,cAAiB,gBAAA,CAAS0xF,GAAT,EAAcjnF,GAAd,EAAkB;CACjC,MAAIzK,OAAJ,EAAa,OAAO0xF,IAAI1xF,OAAJ,CAAYyK,GAAZ,CAAP;CACb,OAAK,IAAI3nB,IAAI,CAAb,EAAgBA,IAAI4uG,IAAIrqH,MAAxB,EAAgC,EAAEyb,CAAlC,EAAqC;CACnC,QAAI4uG,IAAI5uG,CAAJ,MAAW2nB,GAAf,EAAoB,OAAO3nB,CAAP;CACrB;CACD,SAAO,CAAC,CAAR;CACD,CAND;;;;CCHA;;;;CAMA,IAAIqgH,UAAQ3E,UAAiB,yBAAjB,CAAZ;;;;;;CAUA,aAAiBqlB,MAAjB;;;;;;;;;;CAUA,SAASA,MAAT,CAAiBlkB,GAAjB,EAAsB+U,IAAtB,EAA4B;CAC1B,MAAI,EAAE,gBAAgBmP,MAAlB,CAAJ,EAA+B,OAAO,IAAIA,MAAJ,CAAWlkB,GAAX,EAAgB+U,IAAhB,CAAP;;CAE/BA,SAAOA,QAAQ,EAAf;;CAEA,MAAI/U,OAAO,qBAAoBA,GAApB,2CAAoBA,GAApB,EAAX,EAAoC;CAClC+U,WAAO/U,GAAP;CACAA,UAAM,IAAN;CACD;;CAED,MAAIA,GAAJ,EAAS;CACPA,UAAMF,SAASE,GAAT,CAAN;CACA+U,SAAKsH,QAAL,GAAgBrc,IAAIC,IAApB;CACA8U,SAAKuH,MAAL,GAActc,IAAI+F,QAAJ,KAAiB,OAAjB,IAA4B/F,IAAI+F,QAAJ,KAAiB,KAA3D;CACAgP,SAAK/O,IAAL,GAAYhG,IAAIgG,IAAhB;CACA,QAAIhG,IAAIuc,KAAR,EAAexH,KAAKwH,KAAL,GAAavc,IAAIuc,KAAjB;CAChB,GAND,MAMO,IAAIxH,KAAK9U,IAAT,EAAe;CACpB8U,SAAKsH,QAAL,GAAgBvc,SAASiV,KAAK9U,IAAd,EAAoBA,IAApC;CACD;;CAED,OAAKqc,MAAL,GAAc,QAAQvH,KAAKuH,MAAb,GAAsBvH,KAAKuH,MAA3B,GACT,OAAOxW,QAAP,KAAoB,WAApB,IAAmC,aAAaA,SAASC,QAD9D;;CAGA,MAAIgP,KAAKsH,QAAL,IAAiB,CAACtH,KAAK/O,IAA3B,EAAiC;;CAE/B+O,SAAK/O,IAAL,GAAY,KAAKsW,MAAL,GAAc,KAAd,GAAsB,IAAlC;CACD;;CAED,OAAKI,KAAL,GAAa3H,KAAK2H,KAAL,IAAc,KAA3B;CACA,OAAKL,QAAL,GAAgBtH,KAAKsH,QAAL,KACb,OAAOvW,QAAP,KAAoB,WAApB,GAAkCA,SAASuW,QAA3C,GAAsD,WADzC,CAAhB;CAEA,OAAKrW,IAAL,GAAY+O,KAAK/O,IAAL,KAAc,OAAOF,QAAP,KAAoB,WAApB,IAAmCA,SAASE,IAA5C,GACpBF,SAASE,IADW,GAEnB,KAAKsW,MAAL,GAAc,GAAd,GAAoB,EAFf,CAAZ;CAGA,OAAKC,KAAL,GAAaxH,KAAKwH,KAAL,IAAc,EAA3B;CACA,MAAI,aAAa,OAAO,KAAKA,KAA7B,EAAoC,KAAKA,KAAL,GAAakD,QAAQtI,MAAR,CAAe,KAAKoF,KAApB,CAAb;CACpC,OAAKrD,OAAL,GAAe,UAAUnE,KAAKmE,OAA9B;CACA,OAAKp5F,IAAL,GAAY,CAACi1F,KAAKj1F,IAAL,IAAa,YAAd,EAA4BkwC,OAA5B,CAAoC,KAApC,EAA2C,EAA3C,IAAiD,GAA7D;CACA,OAAKg0D,UAAL,GAAkB,CAAC,CAACjP,KAAKiP,UAAzB;CACA,OAAKD,KAAL,GAAa,UAAUhP,KAAKgP,KAA5B;CACA,OAAKlF,WAAL,GAAmB,CAAC,CAAC9J,KAAK8J,WAA1B;CACA,OAAK3J,UAAL,GAAkB,CAAC,CAACH,KAAKG,UAAzB;CACA,OAAKsH,cAAL,GAAsBzH,KAAKyH,cAAL,IAAuB,GAA7C;CACA,OAAKC,iBAAL,GAAyB1H,KAAK0H,iBAA9B;CACA,OAAK0H,UAAL,GAAkBpP,KAAKoP,UAAL,IAAmB,CAAC,SAAD,EAAY,WAAZ,CAArC;CACA,OAAKC,gBAAL,GAAwBrP,KAAKqP,gBAAL,IAAyB,EAAjD;CACA,OAAK19E,UAAL,GAAkB,EAAlB;CACA,OAAK29E,WAAL,GAAmB,EAAnB;CACA,OAAKC,aAAL,GAAqB,CAArB;CACA,OAAKC,UAAL,GAAkBxP,KAAKwP,UAAL,IAAmB,GAArC;CACA,OAAKC,eAAL,GAAuBzP,KAAKyP,eAAL,IAAwB,KAA/C;CACA,OAAKnK,UAAL,GAAkB,IAAlB;CACA,OAAKoK,kBAAL,GAA0B1P,KAAK0P,kBAA/B;CACA,OAAKxB,iBAAL,GAAyB,UAAUlO,KAAKkO,iBAAf,GAAoClO,KAAKkO,iBAAL,IAA0B,EAA9D,GAAoE,KAA7F;;CAEA,MAAI,SAAS,KAAKA,iBAAlB,EAAqC,KAAKA,iBAAL,GAAyB,EAAzB;CACrC,MAAI,KAAKA,iBAAL,IAA0B,QAAQ,KAAKA,iBAAL,CAAuBvhH,SAA7D,EAAwE;CACtE,SAAKuhH,iBAAL,CAAuBvhH,SAAvB,GAAmC,IAAnC;CACD;;;CAGD,OAAKi7G,GAAL,GAAW5H,KAAK4H,GAAL,IAAY,IAAvB;CACA,OAAK71G,GAAL,GAAWiuG,KAAKjuG,GAAL,IAAY,IAAvB;CACA,OAAK81G,UAAL,GAAkB7H,KAAK6H,UAAL,IAAmB,IAArC;CACA,OAAKC,IAAL,GAAY9H,KAAK8H,IAAL,IAAa,IAAzB;CACA,OAAKC,EAAL,GAAU/H,KAAK+H,EAAL,IAAW,IAArB;CACA,OAAKC,OAAL,GAAehI,KAAKgI,OAAL,IAAgB,IAA/B;CACA,OAAKC,kBAAL,GAA0BjI,KAAKiI,kBAAL,KAA4Bv2I,SAA5B,GAAwC,IAAxC,GAA+CsuI,KAAKiI,kBAA9E;CACA,OAAKC,SAAL,GAAiB,CAAC,CAAClI,KAAKkI,SAAxB;;;CAGA,OAAKC,aAAL,GAAsB,OAAOjY,SAAP,KAAqB,WAArB,IAAoC,OAAOA,UAAUyf,OAAjB,KAA6B,QAAjE,IAA6Ezf,UAAUyf,OAAV,CAAkBr+F,WAAlB,OAAoC,aAAvI;;;CAGA,MAAI,OAAOunE,IAAP,KAAgB,WAAhB,IAA+B,KAAKsvB,aAAxC,EAAuD;CACrD,QAAInI,KAAKoI,YAAL,IAAqBl2I,OAAOg1C,IAAP,CAAY84F,KAAKoI,YAAjB,EAA+Bz1I,MAA/B,GAAwC,CAAjE,EAAoE;CAClE,WAAKy1I,YAAL,GAAoBpI,KAAKoI,YAAzB;CACD;;CAED,QAAIpI,KAAKqI,YAAT,EAAuB;CACrB,WAAKA,YAAL,GAAoBrI,KAAKqI,YAAzB;CACD;CACF;;;CAGD,OAAKl4G,EAAL,GAAU,IAAV;CACA,OAAKy/G,QAAL,GAAgB,IAAhB;CACA,OAAKC,YAAL,GAAoB,IAApB;CACA,OAAKC,WAAL,GAAmB,IAAnB;;;CAGA,OAAKC,iBAAL,GAAyB,IAAzB;CACA,OAAKC,gBAAL,GAAwB,IAAxB;;CAEA,OAAKtsF,IAAL;CACD;;CAEDyrF,OAAOc,qBAAP,GAA+B,KAA/B;;;;;;AAMA7e,kBAAQ+d,OAAOn9I,SAAf;;;;;;;;CAQAm9I,OAAOne,QAAP,GAAkB8X,UAAO9X,QAAzB;;;;;;;CAOAme,OAAOA,MAAP,GAAgBA,MAAhB;CACAA,OAAO9H,SAAP,GAAmBuC,SAAnB;CACAuF,OAAOC,UAAP,GAAoBA,UAApB;CACAD,OAAOrG,MAAP,GAAgBA,SAAhB;;;;;;;;;;CAUAqG,OAAOn9I,SAAP,CAAiBk+I,eAAjB,GAAmC,UAAUj+I,IAAV,EAAgB;CACjDw8H,UAAM,yBAAN,EAAiCx8H,IAAjC;CACA,MAAIu1I,QAAQlqI,MAAM,KAAKkqI,KAAX,CAAZ;;;CAGAA,QAAM2I,GAAN,GAAYrH,UAAO9X,QAAnB;;;CAGAwW,QAAM4I,SAAN,GAAkBn+I,IAAlB;;;CAGA,MAAIooD,UAAU,KAAKg1F,gBAAL,CAAsBp9I,IAAtB,KAA+B,EAA7C;;;CAGA,MAAI,KAAKk+B,EAAT,EAAaq3G,MAAMiD,GAAN,GAAY,KAAKt6G,EAAjB;;CAEb,MAAIigH,YAAY,IAAIhB,WAAWn9I,IAAX,CAAJ,CAAqB;CACnCu1I,WAAOA,KAD4B;CAEnCxd,YAAQ,IAF2B;CAGnC2d,WAAOttF,QAAQstF,KAAR,IAAiB,KAAKA,KAHM;CAInCL,cAAUjtF,QAAQitF,QAAR,IAAoB,KAAKA,QAJA;CAKnCrW,UAAM52E,QAAQ42E,IAAR,IAAgB,KAAKA,IALQ;CAMnCsW,YAAQltF,QAAQktF,MAAR,IAAkB,KAAKA,MANI;CAOnCx8F,UAAMsP,QAAQtP,IAAR,IAAgB,KAAKA,IAPQ;CAQnCkkG,gBAAY50F,QAAQ40F,UAAR,IAAsB,KAAKA,UARJ;CASnCD,WAAO30F,QAAQ20F,KAAR,IAAiB,KAAKA,KATM;CAUnClF,iBAAazvF,QAAQyvF,WAAR,IAAuB,KAAKA,WAVN;CAWnC3J,gBAAY9lF,QAAQ8lF,UAAR,IAAsB,KAAKA,UAXJ;CAYnCuH,uBAAmBrtF,QAAQqtF,iBAAR,IAA6B,KAAKA,iBAZlB;CAanCD,oBAAgBptF,QAAQotF,cAAR,IAA0B,KAAKA,cAbZ;CAcnC+H,gBAAYn1F,QAAQm1F,UAAR,IAAsB,KAAKA,UAdJ;CAenC5H,SAAKvtF,QAAQutF,GAAR,IAAe,KAAKA,GAfU;CAgBnC71G,SAAKsoB,QAAQtoB,GAAR,IAAe,KAAKA,GAhBU;CAiBnC81G,gBAAYxtF,QAAQwtF,UAAR,IAAsB,KAAKA,UAjBJ;CAkBnCC,UAAMztF,QAAQytF,IAAR,IAAgB,KAAKA,IAlBQ;CAmBnCC,QAAI1tF,QAAQ0tF,EAAR,IAAc,KAAKA,EAnBY;CAoBnCC,aAAS3tF,QAAQ2tF,OAAR,IAAmB,KAAKA,OApBE;CAqBnCC,wBAAoB5tF,QAAQ4tF,kBAAR,IAA8B,KAAKA,kBArBpB;CAsBnCiG,uBAAmB7zF,QAAQ6zF,iBAAR,IAA6B,KAAKA,iBAtBlB;CAuBnC9F,kBAAc/tF,QAAQ+tF,YAAR,IAAwB,KAAKA,YAvBR;CAwBnCF,eAAW7tF,QAAQ6tF,SAAR,IAAqB,KAAKA,SAxBF;CAyBnCG,kBAAchuF,QAAQguF,YAAR,IAAwB,KAAKA,YAzBR;CA0BnCwC,oBAAgBxwF,QAAQwwF,cAAR,IAA0B,KAAKA,cA1BZ;CA2BnCuD,eAAW/zF,QAAQ+zF,SAAR,IAAqB,KAAM,CA3BH;CA4BnCjG,mBAAe,KAAKA;CA5Be,GAArB,CAAhB;;CA+BA,SAAOiI,SAAP;CACD,CAhDD;;CAkDA,SAAS9yI,KAAT,CAAgBy4B,GAAhB,EAAqB;CACnB,MAAI+P,IAAI,EAAR;CACA,OAAK,IAAI13B,CAAT,IAAc2nB,GAAd,EAAmB;CACjB,QAAIA,IAAIljC,cAAJ,CAAmBub,CAAnB,CAAJ,EAA2B;CACzB03B,QAAE13B,CAAF,IAAO2nB,IAAI3nB,CAAJ,CAAP;CACD;CACF;CACD,SAAO03B,CAAP;CACD;;;;;;;CAODqpG,OAAOn9I,SAAP,CAAiB0xD,IAAjB,GAAwB,YAAY;CAClC,MAAI0sF,SAAJ;CACA,MAAI,KAAKX,eAAL,IAAwBN,OAAOc,qBAA/B,IAAwD,KAAKb,UAAL,CAAgB9jH,OAAhB,CAAwB,WAAxB,MAAyC,CAAC,CAAtG,EAAyG;CACvG8kH,gBAAY,WAAZ;CACD,GAFD,MAEO,IAAI,MAAM,KAAKhB,UAAL,CAAgBz8I,MAA1B,EAAkC;;CAEvC,QAAIkmH,OAAO,IAAX;CACAt1D,eAAW,YAAY;CACrBs1D,WAAKmC,IAAL,CAAU,OAAV,EAAmB,yBAAnB;CACD,KAFD,EAEG,CAFH;CAGA;CACD,GAPM,MAOA;CACLo1B,gBAAY,KAAKhB,UAAL,CAAgB,CAAhB,CAAZ;CACD;CACD,OAAKz9E,UAAL,GAAkB,SAAlB;;;CAGA,MAAI;CACFy+E,gBAAY,KAAKF,eAAL,CAAqBE,SAArB,CAAZ;CACD,GAFD,CAEE,OAAO/nI,CAAP,EAAU;CACV,SAAK+mI,UAAL,CAAgB9+F,KAAhB;CACA,SAAKoT,IAAL;CACA;CACD;;CAED0sF,YAAU1sF,IAAV;CACA,OAAK2sF,YAAL,CAAkBD,SAAlB;CACD,CA3BD;;;;;;;;CAmCAjB,OAAOn9I,SAAP,CAAiBq+I,YAAjB,GAAgC,UAAUD,SAAV,EAAqB;CACnD3hB,UAAM,sBAAN,EAA8B2hB,UAAUn+I,IAAxC;CACA,MAAI4mH,OAAO,IAAX;;CAEA,MAAI,KAAKu3B,SAAT,EAAoB;CAClB3hB,YAAM,gCAAN,EAAwC,KAAK2hB,SAAL,CAAen+I,IAAvD;CACA,SAAKm+I,SAAL,CAAe3zB,kBAAf;CACD;;;CAGD,OAAK2zB,SAAL,GAAiBA,SAAjB;;;CAGAA,YACCp0B,EADD,CACI,OADJ,EACa,YAAY;CACvBnD,SAAKy3B,OAAL;CACD,GAHD,EAICt0B,EAJD,CAII,QAJJ,EAIc,UAAUihB,MAAV,EAAkB;CAC9BpkB,SAAKkwB,QAAL,CAAc9L,MAAd;CACD,GAND,EAOCjhB,EAPD,CAOI,OAPJ,EAOa,UAAU3zG,CAAV,EAAa;CACxBwwG,SAAKp6D,OAAL,CAAap2C,CAAb;CACD,GATD,EAUC2zG,EAVD,CAUI,OAVJ,EAUa,YAAY;CACvBnD,SAAK6vB,OAAL,CAAa,iBAAb;CACD,GAZD;CAaD,CA1BD;;;;;;;;;CAmCAyG,OAAOn9I,SAAP,CAAiBu+I,KAAjB,GAAyB,UAAUt+I,IAAV,EAAgB;CACvCw8H,UAAM,wBAAN,EAAgCx8H,IAAhC;CACA,MAAIm+I,YAAY,KAAKF,eAAL,CAAqBj+I,IAArB,EAA2B,EAAEs+I,OAAO,CAAT,EAA3B,CAAhB;CACA,MAAIC,SAAS,KAAb;CACA,MAAI33B,OAAO,IAAX;;CAEAs2B,SAAOc,qBAAP,GAA+B,KAA/B;;CAEA,WAASQ,eAAT,GAA4B;CAC1B,QAAI53B,KAAK62B,kBAAT,EAA6B;CAC3B,UAAIgB,qBAAqB,CAAC,KAAKrM,cAAN,IAAwBxrB,KAAKu3B,SAAL,CAAe/L,cAAhE;CACAmM,eAASA,UAAUE,kBAAnB;CACD;CACD,QAAIF,MAAJ,EAAY;;CAEZ/hB,YAAM,6BAAN,EAAqCx8H,IAArC;CACAm+I,cAAUnsF,IAAV,CAAe,CAAC,EAAE/4B,MAAM,MAAR,EAAgB8G,MAAM,OAAtB,EAAD,CAAf;CACAo+G,cAAU/zB,IAAV,CAAe,QAAf,EAAyB,UAAUzpG,GAAV,EAAe;CACtC,UAAI49H,MAAJ,EAAY;CACZ,UAAI,WAAW59H,IAAIsY,IAAf,IAAuB,YAAYtY,IAAIof,IAA3C,EAAiD;CAC/Cy8F,gBAAM,2BAAN,EAAmCx8H,IAAnC;CACA4mH,aAAK83B,SAAL,GAAiB,IAAjB;CACA93B,aAAKmC,IAAL,CAAU,WAAV,EAAuBo1B,SAAvB;CACA,YAAI,CAACA,SAAL,EAAgB;CAChBjB,eAAOc,qBAAP,GAA+B,gBAAgBG,UAAUn+I,IAAzD;;CAEAw8H,gBAAM,gCAAN,EAAwC5V,KAAKu3B,SAAL,CAAen+I,IAAvD;CACA4mH,aAAKu3B,SAAL,CAAe75F,KAAf,CAAqB,YAAY;CAC/B,cAAIi6F,MAAJ,EAAY;CACZ,cAAI,aAAa33B,KAAKlnD,UAAtB,EAAkC;CAClC88D,kBAAM,+CAAN;;CAEAwd;;CAEApzB,eAAKw3B,YAAL,CAAkBD,SAAlB;CACAA,oBAAUnsF,IAAV,CAAe,CAAC,EAAE/4B,MAAM,SAAR,EAAD,CAAf;CACA2tF,eAAKmC,IAAL,CAAU,SAAV,EAAqBo1B,SAArB;CACAA,sBAAY,IAAZ;CACAv3B,eAAK83B,SAAL,GAAiB,KAAjB;CACA93B,eAAK+3B,KAAL;CACD,SAbD;CAcD,OAtBD,MAsBO;CACLniB,gBAAM,6BAAN,EAAqCx8H,IAArC;CACA,YAAIspH,MAAM,IAAIH,KAAJ,CAAU,aAAV,CAAV;CACAG,YAAI60B,SAAJ,GAAgBA,UAAUn+I,IAA1B;CACA4mH,aAAKmC,IAAL,CAAU,cAAV,EAA0BO,GAA1B;CACD;CACF,KA9BD;CA+BD;;CAED,WAASs1B,eAAT,GAA4B;CAC1B,QAAIL,MAAJ,EAAY;;;CAGZA,aAAS,IAAT;;CAEAvE;;CAEAmE,cAAUpM,KAAV;CACAoM,gBAAY,IAAZ;CACD;;;CAGD,WAAS3E,OAAT,CAAkBlwB,GAAlB,EAAuB;CACrB,QAAItzG,QAAQ,IAAImzG,KAAJ,CAAU,kBAAkBG,GAA5B,CAAZ;CACAtzG,UAAMmoI,SAAN,GAAkBA,UAAUn+I,IAA5B;;CAEA4+I;;CAEApiB,YAAM,kDAAN,EAA0Dx8H,IAA1D,EAAgEspH,GAAhE;;CAEA1C,SAAKmC,IAAL,CAAU,cAAV,EAA0B/yG,KAA1B;CACD;;CAED,WAAS6oI,gBAAT,GAA6B;CAC3BrF,YAAQ,kBAAR;CACD;;;CAGD,WAASkD,OAAT,GAAoB;CAClBlD,YAAQ,eAAR;CACD;;;CAGD,WAASsF,SAAT,CAAoBliG,EAApB,EAAwB;CACtB,QAAIuhG,aAAavhG,GAAG58C,IAAH,KAAYm+I,UAAUn+I,IAAvC,EAA6C;CAC3Cw8H,cAAM,4BAAN,EAAoC5/E,GAAG58C,IAAvC,EAA6Cm+I,UAAUn+I,IAAvD;CACA4+I;CACD;CACF;;;CAGD,WAAS5E,OAAT,GAAoB;CAClBmE,cAAUh0B,cAAV,CAAyB,MAAzB,EAAiCq0B,eAAjC;CACAL,cAAUh0B,cAAV,CAAyB,OAAzB,EAAkCqvB,OAAlC;CACA2E,cAAUh0B,cAAV,CAAyB,OAAzB,EAAkC00B,gBAAlC;CACAj4B,SAAKuD,cAAL,CAAoB,OAApB,EAA6BuyB,OAA7B;CACA91B,SAAKuD,cAAL,CAAoB,WAApB,EAAiC20B,SAAjC;CACD;;CAEDX,YAAU/zB,IAAV,CAAe,MAAf,EAAuBo0B,eAAvB;CACAL,YAAU/zB,IAAV,CAAe,OAAf,EAAwBovB,OAAxB;CACA2E,YAAU/zB,IAAV,CAAe,OAAf,EAAwBy0B,gBAAxB;;CAEA,OAAKz0B,IAAL,CAAU,OAAV,EAAmBsyB,OAAnB;CACA,OAAKtyB,IAAL,CAAU,WAAV,EAAuB00B,SAAvB;;CAEAX,YAAU1sF,IAAV;CACD,CA5GD;;;;;;;;CAoHAyrF,OAAOn9I,SAAP,CAAiB22I,MAAjB,GAA0B,YAAY;CACpCla,UAAM,aAAN;CACA,OAAK98D,UAAL,GAAkB,MAAlB;CACAw9E,SAAOc,qBAAP,GAA+B,gBAAgB,KAAKG,SAAL,CAAen+I,IAA9D;CACA,OAAK+oH,IAAL,CAAU,MAAV;CACA,OAAK41B,KAAL;;;;CAIA,MAAI,WAAW,KAAKj/E,UAAhB,IAA8B,KAAKwyE,OAAnC,IAA8C,KAAKiM,SAAL,CAAe75F,KAAjE,EAAwE;CACtEk4E,YAAM,yBAAN;CACA,SAAK,IAAIrgH,IAAI,CAAR,EAAWjS,IAAI,KAAKyzI,QAAL,CAAcj9I,MAAlC,EAA0Cyb,IAAIjS,CAA9C,EAAiDiS,GAAjD,EAAsD;CACpD,WAAKmiI,KAAL,CAAW,KAAKX,QAAL,CAAcxhI,CAAd,CAAX;CACD;CACF;CACF,CAfD;;;;;;;;CAuBA+gI,OAAOn9I,SAAP,CAAiB+2I,QAAjB,GAA4B,UAAU9L,MAAV,EAAkB;CAC5C,MAAI,cAAc,KAAKtrE,UAAnB,IAAiC,WAAW,KAAKA,UAAjD,IACA,cAAc,KAAKA,UADvB,EACmC;CACjC88D,YAAM,sCAAN,EAA8CwO,OAAO/xG,IAArD,EAA2D+xG,OAAOjrG,IAAlE;;CAEA,SAAKgpF,IAAL,CAAU,QAAV,EAAoBiiB,MAApB;;;CAGA,SAAKjiB,IAAL,CAAU,WAAV;;CAEA,YAAQiiB,OAAO/xG,IAAf;CACE,WAAK,MAAL;CACE,aAAK8lH,WAAL,CAAiBt/G,KAAKO,KAAL,CAAWgrG,OAAOjrG,IAAlB,CAAjB;CACA;;CAEF,WAAK,MAAL;CACE,aAAKi/G,OAAL;CACA,aAAKj2B,IAAL,CAAU,MAAV;CACA;;CAEF,WAAK,OAAL;CACE,YAAIO,MAAM,IAAIH,KAAJ,CAAU,cAAV,CAAV;CACAG,YAAI5yC,IAAJ,GAAWs0D,OAAOjrG,IAAlB;CACA,aAAKysB,OAAL,CAAa88D,GAAb;CACA;;CAEF,WAAK,SAAL;CACE,aAAKP,IAAL,CAAU,MAAV,EAAkBiiB,OAAOjrG,IAAzB;CACA,aAAKgpF,IAAL,CAAU,SAAV,EAAqBiiB,OAAOjrG,IAA5B;CACA;CAnBJ;CAqBD,GA9BD,MA8BO;CACLy8F,YAAM,6CAAN,EAAqD,KAAK98D,UAA1D;CACD;CACF,CAlCD;;;;;;;;;CA2CAw9E,OAAOn9I,SAAP,CAAiBg/I,WAAjB,GAA+B,UAAUh/G,IAAV,EAAgB;CAC7C,OAAKgpF,IAAL,CAAU,WAAV,EAAuBhpF,IAAvB;CACA,OAAK7B,EAAL,GAAU6B,KAAKy4G,GAAf;CACA,OAAK2F,SAAL,CAAe5I,KAAf,CAAqBiD,GAArB,GAA2Bz4G,KAAKy4G,GAAhC;CACA,OAAKmF,QAAL,GAAgB,KAAKsB,cAAL,CAAoBl/G,KAAK49G,QAAzB,CAAhB;CACA,OAAKC,YAAL,GAAoB79G,KAAK69G,YAAzB;CACA,OAAKC,WAAL,GAAmB99G,KAAK89G,WAAxB;CACA,OAAKnH,MAAL;;CAEA,MAAI,aAAa,KAAKh3E,UAAtB,EAAkC;CAClC,OAAKs/E,OAAL;;;CAGA,OAAK70B,cAAL,CAAoB,WAApB,EAAiC,KAAK+0B,WAAtC;CACA,OAAKn1B,EAAL,CAAQ,WAAR,EAAqB,KAAKm1B,WAA1B;CACD,CAfD;;;;;;;;CAuBAhC,OAAOn9I,SAAP,CAAiBm/I,WAAjB,GAA+B,UAAU9kB,OAAV,EAAmB;CAChDX,eAAa,KAAKskB,gBAAlB;CACA,MAAIn3B,OAAO,IAAX;CACAA,OAAKm3B,gBAAL,GAAwBzsF,WAAW,YAAY;CAC7C,QAAI,aAAas1D,KAAKlnD,UAAtB,EAAkC;CAClCknD,SAAK6vB,OAAL,CAAa,cAAb;CACD,GAHuB,EAGrBrc,WAAYxT,KAAKg3B,YAAL,GAAoBh3B,KAAKi3B,WAHhB,CAAxB;CAID,CAPD;;;;;;;;;CAgBAX,OAAOn9I,SAAP,CAAiBi/I,OAAjB,GAA2B,YAAY;CACrC,MAAIp4B,OAAO,IAAX;CACA6S,eAAa7S,KAAKk3B,iBAAlB;CACAl3B,OAAKk3B,iBAAL,GAAyBxsF,WAAW,YAAY;CAC9CkrE,YAAM,kDAAN,EAA0D5V,KAAKi3B,WAA/D;CACAj3B,SAAKorB,IAAL;CACAprB,SAAKs4B,WAAL,CAAiBt4B,KAAKi3B,WAAtB;CACD,GAJwB,EAItBj3B,KAAKg3B,YAJiB,CAAzB;CAKD,CARD;;;;;;;;CAgBAV,OAAOn9I,SAAP,CAAiBiyI,IAAjB,GAAwB,YAAY;CAClC,MAAIprB,OAAO,IAAX;CACA,OAAKu4B,UAAL,CAAgB,MAAhB,EAAwB,YAAY;CAClCv4B,SAAKmC,IAAL,CAAU,MAAV;CACD,GAFD;CAGD,CALD;;;;;;;;CAaAm0B,OAAOn9I,SAAP,CAAiBs+I,OAAjB,GAA2B,YAAY;CACrC,OAAKhB,WAAL,CAAiB5jH,MAAjB,CAAwB,CAAxB,EAA2B,KAAK6jH,aAAhC;;;;;CAKA,OAAKA,aAAL,GAAqB,CAArB;;CAEA,MAAI,MAAM,KAAKD,WAAL,CAAiB38I,MAA3B,EAAmC;CACjC,SAAKqoH,IAAL,CAAU,OAAV;CACD,GAFD,MAEO;CACL,SAAK41B,KAAL;CACD;CACF,CAbD;;;;;;;;CAqBAzB,OAAOn9I,SAAP,CAAiB4+I,KAAjB,GAAyB,YAAY;CACnC,MAAI,aAAa,KAAKj/E,UAAlB,IAAgC,KAAKy+E,SAAL,CAAexH,QAA/C,IACF,CAAC,KAAK+H,SADJ,IACiB,KAAKrB,WAAL,CAAiB38I,MADtC,EAC8C;CAC5C87H,YAAM,+BAAN,EAAuC,KAAK6gB,WAAL,CAAiB38I,MAAxD;CACA,SAAKy9I,SAAL,CAAensF,IAAf,CAAoB,KAAKqrF,WAAzB;;;CAGA,SAAKC,aAAL,GAAqB,KAAKD,WAAL,CAAiB38I,MAAtC;CACA,SAAKqoH,IAAL,CAAU,OAAV;CACD;CACF,CAVD;;;;;;;;;;;;CAsBAm0B,OAAOn9I,SAAP,CAAiBmhI,KAAjB,GACAgc,OAAOn9I,SAAP,CAAiBiyD,IAAjB,GAAwB,UAAUrxC,GAAV,EAAeynC,OAAf,EAAwBi3E,EAAxB,EAA4B;CAClD,OAAK8f,UAAL,CAAgB,SAAhB,EAA2Bx+H,GAA3B,EAAgCynC,OAAhC,EAAyCi3E,EAAzC;CACA,SAAO,IAAP;CACD,CAJD;;;;;;;;;;;;CAgBA6d,OAAOn9I,SAAP,CAAiBo/I,UAAjB,GAA8B,UAAUlmH,IAAV,EAAgB8G,IAAhB,EAAsBqoB,OAAtB,EAA+Bi3E,EAA/B,EAAmC;CAC/D,MAAI,eAAe,OAAOt/F,IAA1B,EAAgC;CAC9Bs/F,SAAKt/F,IAAL;CACAA,WAAOtgC,SAAP;CACD;;CAED,MAAI,eAAe,OAAO2oD,OAA1B,EAAmC;CACjCi3E,SAAKj3E,OAAL;CACAA,cAAU,IAAV;CACD;;CAED,MAAI,cAAc,KAAKsX,UAAnB,IAAiC,aAAa,KAAKA,UAAvD,EAAmE;CACjE;CACD;;CAEDtX,YAAUA,WAAW,EAArB;CACAA,UAAQy0F,QAAR,GAAmB,UAAUz0F,QAAQy0F,QAArC;;CAEA,MAAI7R,SAAS;CACX/xG,UAAMA,IADK;CAEX8G,UAAMA,IAFK;CAGXqoB,aAASA;CAHE,GAAb;CAKA,OAAK2gE,IAAL,CAAU,cAAV,EAA0BiiB,MAA1B;CACA,OAAKqS,WAAL,CAAiBlqH,IAAjB,CAAsB63G,MAAtB;CACA,MAAI3L,EAAJ,EAAQ,KAAKjV,IAAL,CAAU,OAAV,EAAmBiV,EAAnB;CACR,OAAKsf,KAAL;CACD,CA3BD;;;;;;;;CAmCAzB,OAAOn9I,SAAP,CAAiBgyI,KAAjB,GAAyB,YAAY;CACnC,MAAI,cAAc,KAAKryE,UAAnB,IAAiC,WAAW,KAAKA,UAArD,EAAiE;CAC/D,SAAKA,UAAL,GAAkB,SAAlB;;CAEA,QAAIknD,OAAO,IAAX;;CAEA,QAAI,KAAKy2B,WAAL,CAAiB38I,MAArB,EAA6B;CAC3B,WAAK0pH,IAAL,CAAU,OAAV,EAAmB,YAAY;CAC7B,YAAI,KAAKs0B,SAAT,EAAoB;CAClBU;CACD,SAFD,MAEO;CACLrN;CACD;CACF,OAND;CAOD,KARD,MAQO,IAAI,KAAK2M,SAAT,EAAoB;CACzBU;CACD,KAFM,MAEA;CACLrN;CACD;CACF;;CAED,WAASA,KAAT,GAAkB;CAChBnrB,SAAK6vB,OAAL,CAAa,cAAb;CACAja,YAAM,6CAAN;CACA5V,SAAKu3B,SAAL,CAAepM,KAAf;CACD;;CAED,WAASsN,eAAT,GAA4B;CAC1Bz4B,SAAKuD,cAAL,CAAoB,SAApB,EAA+Bk1B,eAA/B;CACAz4B,SAAKuD,cAAL,CAAoB,cAApB,EAAoCk1B,eAApC;CACAtN;CACD;;CAED,WAASqN,cAAT,GAA2B;;CAEzBx4B,SAAKwD,IAAL,CAAU,SAAV,EAAqBi1B,eAArB;CACAz4B,SAAKwD,IAAL,CAAU,cAAV,EAA0Bi1B,eAA1B;CACD;;CAED,SAAO,IAAP;CACD,CAxCD;;;;;;;;CAgDAnC,OAAOn9I,SAAP,CAAiBysD,OAAjB,GAA2B,UAAU88D,GAAV,EAAe;CACxCkT,UAAM,iBAAN,EAAyBlT,GAAzB;CACA4zB,SAAOc,qBAAP,GAA+B,KAA/B;CACA,OAAKj1B,IAAL,CAAU,OAAV,EAAmBO,GAAnB;CACA,OAAKmtB,OAAL,CAAa,iBAAb,EAAgCntB,GAAhC;CACD,CALD;;;;;;;;CAaA4zB,OAAOn9I,SAAP,CAAiB02I,OAAjB,GAA2B,UAAU6I,MAAV,EAAkBjJ,IAAlB,EAAwB;CACjD,MAAI,cAAc,KAAK32E,UAAnB,IAAiC,WAAW,KAAKA,UAAjD,IAA+D,cAAc,KAAKA,UAAtF,EAAkG;CAChG88D,YAAM,gCAAN,EAAwC8iB,MAAxC;CACA,QAAI14B,OAAO,IAAX;;;CAGA6S,iBAAa,KAAKqkB,iBAAlB;CACArkB,iBAAa,KAAKskB,gBAAlB;;;CAGA,SAAKI,SAAL,CAAe3zB,kBAAf,CAAkC,OAAlC;;;CAGA,SAAK2zB,SAAL,CAAepM,KAAf;;;CAGA,SAAKoM,SAAL,CAAe3zB,kBAAf;;;CAGA,SAAK9qD,UAAL,GAAkB,QAAlB;;;CAGA,SAAKxhC,EAAL,GAAU,IAAV;;;CAGA,SAAK6qF,IAAL,CAAU,OAAV,EAAmBu2B,MAAnB,EAA2BjJ,IAA3B;;;;CAIAzvB,SAAKy2B,WAAL,GAAmB,EAAnB;CACAz2B,SAAK02B,aAAL,GAAqB,CAArB;CACD;CACF,CAhCD;;;;;;;;;;CA0CAJ,OAAOn9I,SAAP,CAAiBk/I,cAAjB,GAAkC,UAAUtB,QAAV,EAAoB;CACpD,MAAI4B,mBAAmB,EAAvB;CACA,OAAK,IAAIpjI,IAAI,CAAR,EAAW2D,IAAI69H,SAASj9I,MAA7B,EAAqCyb,IAAI2D,CAAzC,EAA4C3D,GAA5C,EAAiD;CAC/C,QAAI,CAAC3b,QAAM,KAAK28I,UAAX,EAAuBQ,SAASxhI,CAAT,CAAvB,CAAL,EAA0CojI,iBAAiBpsH,IAAjB,CAAsBwqH,SAASxhI,CAAT,CAAtB;CAC3C;CACD,SAAOojI,gBAAP;CACD,CAND;;CCluBA,UAAiB1nB,MAAjB;;;;;;;;CAQA,aAAwB8f,SAAxB;;;CCTA,gBAAiBnqI,OAAjB;;CAEA,SAASA,OAAT,CAAiB06E,IAAjB,EAAuB1nF,KAAvB,EAA8B;CAC1B,QAAI8M,QAAQ,EAAZ;;CAEA9M,YAAQA,SAAS,CAAjB;;CAEA,SAAK,IAAI2b,IAAI3b,SAAS,CAAtB,EAAyB2b,IAAI+rE,KAAKxnF,MAAlC,EAA0Cyb,GAA1C,EAA+C;CAC3C7O,cAAM6O,IAAI3b,KAAV,IAAmB0nF,KAAK/rE,CAAL,CAAnB;CACH;;CAED,WAAO7O,KAAP;CACH;;CCXD;;;;CAIA,WAAiBy8G,IAAjB;;;;;;;;;;;CAWA,SAASA,IAAT,CAAajmF,GAAb,EAAkB84G,EAAlB,EAAsBvd,EAAtB,EAA0B;CACxBv7F,MAAIimF,EAAJ,CAAO6yB,EAAP,EAAWvd,EAAX;CACA,SAAO;CACLvyC,aAAS,mBAAY;CACnBhpD,UAAIqmF,cAAJ,CAAmByyB,EAAnB,EAAuBvd,EAAvB;CACD;CAHI,GAAP;CAKD;;CCvBD;;;;CAIA,IAAItzH,QAAQ,GAAGA,KAAf;;;;;;;;;;;CAWA,oBAAiB,sBAAA,CAAS+3B,GAAT,EAAcu7F,EAAd,EAAiB;CAChC,MAAI,YAAY,OAAOA,EAAvB,EAA2BA,KAAKv7F,IAAIu7F,EAAJ,CAAL;CAC3B,MAAI,cAAc,OAAOA,EAAzB,EAA6B,MAAM,IAAIlW,KAAJ,CAAU,4BAAV,CAAN;CAC7B,MAAIjb,OAAOniG,MAAMlL,IAAN,CAAWJ,SAAX,EAAsB,CAAtB,CAAX;CACA,SAAO,YAAU;CACf,WAAO4+H,GAAG9nF,KAAH,CAASzT,GAAT,EAAcoqE,KAAK95C,MAAL,CAAYroD,MAAMlL,IAAN,CAAWJ,SAAX,CAAZ,CAAd,CAAP;CACD,GAFD;CAGD,CAPD;;;;;CCdA;;;;CASA,MAAI+7H,QAAQ3E,UAAiB,yBAAjB,CAAZ;;;;;;CAQAx4H,gBAAA,GAAiBgnH,UAAU62B,MAA3B;;;;;;;;;CASA,MAAIj0B,SAAS;CACXxlE,aAAS,CADE;CAEX+7F,mBAAe,CAFJ;CAGXC,qBAAiB,CAHN;CAIXC,gBAAY,CAJD;CAKXl7F,gBAAY,CALD;CAMXxuC,WAAO,CANI;CAOX2pI,eAAW,CAPA;CAQXC,uBAAmB,CARR;CASXC,sBAAkB,CATP;CAUXC,qBAAiB,CAVN;CAWXC,kBAAc,CAXH;CAYX/N,UAAM,CAZK;CAaXC,UAAM;CAbK,GAAb;;;;;;CAoBA,MAAIlpB,OAAOoW,iBAAQp/H,SAAR,CAAkBgpH,IAA7B;;;;;;;;CAQA,WAASm0B,MAAT,CAAiB8C,EAAjB,EAAqBrT,GAArB,EAA0BoB,IAA1B,EAAgC;CAC9B,SAAKiS,EAAL,GAAUA,EAAV;CACA,SAAKrT,GAAL,GAAWA,GAAX;CACA,SAAK/5F,IAAL,GAAY,IAAZ,CAH8B;CAI9B,SAAKqtG,GAAL,GAAW,CAAX;CACA,SAAKC,IAAL,GAAY,EAAZ;CACA,SAAKC,aAAL,GAAqB,EAArB;CACA,SAAKC,UAAL,GAAkB,EAAlB;CACA,SAAKC,SAAL,GAAiB,KAAjB;CACA,SAAKC,YAAL,GAAoB,IAApB;CACA,SAAKC,KAAL,GAAa,EAAb;CACA,QAAIxS,QAAQA,KAAKwH,KAAjB,EAAwB;CACtB,WAAKA,KAAL,GAAaxH,KAAKwH,KAAlB;CACD;CACD,QAAI,KAAKyK,EAAL,CAAQQ,WAAZ,EAAyB,KAAK/uF,IAAL;CAC1B;;;;;;CAMD0tE,mBAAQ+d,OAAOn9I,SAAf;;;;;;;;CAQAm9I,SAAOn9I,SAAP,CAAiB0gJ,SAAjB,GAA6B,YAAY;CACvC,QAAI,KAAKC,IAAT,EAAe;;CAEf,QAAIV,KAAK,KAAKA,EAAd;CACA,SAAKU,IAAL,GAAY,CACV32B,KAAGi2B,EAAH,EAAO,MAAP,EAAengG,cAAK,IAAL,EAAW,QAAX,CAAf,CADU,EAEVkqE,KAAGi2B,EAAH,EAAO,QAAP,EAAiBngG,cAAK,IAAL,EAAW,UAAX,CAAjB,CAFU,EAGVkqE,KAAGi2B,EAAH,EAAO,OAAP,EAAgBngG,cAAK,IAAL,EAAW,SAAX,CAAhB,CAHU,CAAZ;CAKD,GATD;;;;;;;;CAiBAq9F,SAAOn9I,SAAP,CAAiB0xD,IAAjB,GACAyrF,OAAOn9I,SAAP,CAAiB0jD,OAAjB,GAA2B,YAAY;CACrC,QAAI,KAAK48F,SAAT,EAAoB,OAAO,IAAP;;CAEpB,SAAKI,SAAL;CACA,SAAKT,EAAL,CAAQvuF,IAAR,GAJqC;CAKrC,QAAI,WAAW,KAAKuuF,EAAL,CAAQtgF,UAAvB,EAAmC,KAAK+8E,MAAL;CACnC,SAAK1zB,IAAL,CAAU,YAAV;CACA,WAAO,IAAP;CACD,GATD;;;;;;;;;CAkBAm0B,SAAOn9I,SAAP,CAAiBiyD,IAAjB,GAAwB,YAAY;CAClC,QAAIk8C,OAAO1gG,UAAQ/M,SAAR,CAAX;CACAytG,SAAKyb,OAAL,CAAa,SAAb;CACA,SAAKZ,IAAL,CAAUxxE,KAAV,CAAgB,IAAhB,EAAsB22D,IAAtB;CACA,WAAO,IAAP;CACD,GALD;;;;;;;;;;;CAgBAgvC,SAAOn9I,SAAP,CAAiBgpH,IAAjB,GAAwB,UAAU6zB,EAAV,EAAc;CACpC,QAAI3zB,OAAOroH,cAAP,CAAsBg8I,EAAtB,CAAJ,EAA+B;CAC7B7zB,WAAKxxE,KAAL,CAAW,IAAX,EAAiB92C,SAAjB;CACA,aAAO,IAAP;CACD;;CAED,QAAIytG,OAAO1gG,UAAQ/M,SAAR,CAAX;CACA,QAAIuqI,SAAS;CACX/xG,YAAM,CAAC,KAAKsnH,KAAL,CAAWvT,MAAX,KAAsBvtI,SAAtB,GAAkC,KAAK8gJ,KAAL,CAAWvT,MAA7C,GAAsD2T,WAAOzyC,IAAP,CAAvD,IAAuE2oC,gBAAOtK,YAA9E,GAA6FsK,gBAAO+J,KAD/F;CAEX7gH,YAAMmuE;CAFK,KAAb;;CAKA88B,WAAO5iF,OAAP,GAAiB,EAAjB;CACA4iF,WAAO5iF,OAAP,CAAey0F,QAAf,GAA0B,CAAC,KAAK0D,KAAN,IAAe,UAAU,KAAKA,KAAL,CAAW1D,QAA9D;;;CAGA,QAAI,eAAe,OAAO3uC,KAAKA,KAAKxtG,MAAL,GAAc,CAAnB,CAA1B,EAAiD;CAC/C87H,YAAM,gCAAN,EAAwC,KAAKyjB,GAA7C;CACA,WAAKC,IAAL,CAAU,KAAKD,GAAf,IAAsB/xC,KAAKr2D,GAAL,EAAtB;CACAmzF,aAAO9sG,EAAP,GAAY,KAAK+hH,GAAL,EAAZ;CACD;;CAED,QAAI,KAAKI,SAAT,EAAoB;CAClB,WAAKrV,MAAL,CAAYA,MAAZ;CACD,KAFD,MAEO;CACL,WAAKoV,UAAL,CAAgBjtH,IAAhB,CAAqB63G,MAArB;CACD;;CAED,SAAKuV,KAAL,GAAa,EAAb;;CAEA,WAAO,IAAP;CACD,GA/BD;;;;;;;;;CAwCArD,SAAOn9I,SAAP,CAAiBirI,MAAjB,GAA0B,UAAUA,MAAV,EAAkB;CAC1CA,WAAO2B,GAAP,GAAa,KAAKA,GAAlB;CACA,SAAKqT,EAAL,CAAQhV,MAAR,CAAeA,MAAf;CACD,GAHD;;;;;;;;CAWAkS,SAAOn9I,SAAP,CAAiB08I,MAAjB,GAA0B,YAAY;CACpCjgB,UAAM,gCAAN;;;CAGA,QAAI,QAAQ,KAAKmQ,GAAjB,EAAsB;CACpB,UAAI,KAAK4I,KAAT,EAAgB;CACd,YAAIA,QAAQsL,UAAO,KAAKtL,KAAZ,MAAsB,QAAtB,GAAiCkD,QAAQnM,MAAR,CAAe,KAAKiJ,KAApB,CAAjC,GAA8D,KAAKA,KAA/E;CACA/Y,cAAM,sCAAN,EAA8C+Y,KAA9C;CACA,aAAKvK,MAAL,CAAY,EAAC/xG,MAAM49G,gBAAOiK,OAAd,EAAuBvL,OAAOA,KAA9B,EAAZ;CACD,OAJD,MAIO;CACL,aAAKvK,MAAL,CAAY,EAAC/xG,MAAM49G,gBAAOiK,OAAd,EAAZ;CACD;CACF;CACF,GAbD;;;;;;;;;CAsBA5D,SAAOn9I,SAAP,CAAiB28I,OAAjB,GAA2B,UAAU4C,MAAV,EAAkB;CAC3C9iB,UAAM,YAAN,EAAoB8iB,MAApB;CACA,SAAKe,SAAL,GAAiB,KAAjB;CACA,SAAKC,YAAL,GAAoB,IAApB;CACA,WAAO,KAAKpiH,EAAZ;CACA,SAAK6qF,IAAL,CAAU,YAAV,EAAwBu2B,MAAxB;CACD,GAND;;;;;;;;;CAeApC,SAAOn9I,SAAP,CAAiBghJ,QAAjB,GAA4B,UAAU/V,MAAV,EAAkB;CAC5C,QAAIgW,gBAAgBhW,OAAO2B,GAAP,KAAe,KAAKA,GAAxC;CACA,QAAIsU,qBAAqBjW,OAAO/xG,IAAP,KAAgB49G,gBAAOxK,KAAvB,IAAgCrB,OAAO2B,GAAP,KAAe,GAAxE;;CAEA,QAAI,CAACqU,aAAD,IAAkB,CAACC,kBAAvB,EAA2C;;CAE3C,YAAQjW,OAAO/xG,IAAf;CACE,WAAK49G,gBAAOiK,OAAZ;CACE,aAAKI,SAAL;CACA;;CAEF,WAAKrK,gBAAO+J,KAAZ;CACE,aAAKO,OAAL,CAAanW,MAAb;CACA;;CAEF,WAAK6L,gBAAOtK,YAAZ;CACE,aAAK4U,OAAL,CAAanW,MAAb;CACA;;CAEF,WAAK6L,gBAAOuK,GAAZ;CACE,aAAKC,KAAL,CAAWrW,MAAX;CACA;;CAEF,WAAK6L,gBAAOrK,UAAZ;CACE,aAAK6U,KAAL,CAAWrW,MAAX;CACA;;CAEF,WAAK6L,gBAAOyK,UAAZ;CACE,aAAKC,YAAL;CACA;;CAEF,WAAK1K,gBAAOxK,KAAZ;CACE,aAAKtjB,IAAL,CAAU,OAAV,EAAmBiiB,OAAOjrG,IAA1B;CACA;CA3BJ;CA6BD,GAnCD;;;;;;;;;CA4CAm9G,SAAOn9I,SAAP,CAAiBohJ,OAAjB,GAA2B,UAAUnW,MAAV,EAAkB;CAC3C,QAAI98B,OAAO88B,OAAOjrG,IAAP,IAAe,EAA1B;CACAy8F,UAAM,mBAAN,EAA2BtuB,IAA3B;;CAEA,QAAI,QAAQ88B,OAAO9sG,EAAnB,EAAuB;CACrBs+F,YAAM,iCAAN;CACAtuB,WAAK/6E,IAAL,CAAU,KAAKquH,GAAL,CAASxW,OAAO9sG,EAAhB,CAAV;CACD;;CAED,QAAI,KAAKmiH,SAAT,EAAoB;CAClBt3B,WAAKxxE,KAAL,CAAW,IAAX,EAAiB22D,IAAjB;CACD,KAFD,MAEO;CACL,WAAKiyC,aAAL,CAAmBhtH,IAAnB,CAAwB+6E,IAAxB;CACD;CACF,GAdD;;;;;;;;CAsBAgvC,SAAOn9I,SAAP,CAAiByhJ,GAAjB,GAAuB,UAAUtjH,EAAV,EAAc;CACnC,QAAI0oF,OAAO,IAAX;CACA,QAAI66B,OAAO,KAAX;CACA,WAAO,YAAY;;CAEjB,UAAIA,IAAJ,EAAU;CACVA,aAAO,IAAP;CACA,UAAIvzC,OAAO1gG,UAAQ/M,SAAR,CAAX;CACA+7H,YAAM,gBAAN,EAAwBtuB,IAAxB;;CAEA0Y,WAAKokB,MAAL,CAAY;CACV/xG,cAAM0nH,WAAOzyC,IAAP,IAAe2oC,gBAAOrK,UAAtB,GAAmCqK,gBAAOuK,GADtC;CAEVljH,YAAIA,EAFM;CAGV6B,cAAMmuE;CAHI,OAAZ;CAKD,KAZD;CAaD,GAhBD;;;;;;;;;CAyBAgvC,SAAOn9I,SAAP,CAAiBshJ,KAAjB,GAAyB,UAAUrW,MAAV,EAAkB;CACzC,QAAIwW,MAAM,KAAKtB,IAAL,CAAUlV,OAAO9sG,EAAjB,CAAV;CACA,QAAI,eAAe,OAAOsjH,GAA1B,EAA+B;CAC7BhlB,YAAM,wBAAN,EAAgCwO,OAAO9sG,EAAvC,EAA2C8sG,OAAOjrG,IAAlD;CACAyhH,UAAIjqG,KAAJ,CAAU,IAAV,EAAgByzF,OAAOjrG,IAAvB;CACA,aAAO,KAAKmgH,IAAL,CAAUlV,OAAO9sG,EAAjB,CAAP;CACD,KAJD,MAIO;CACLs+F,YAAM,YAAN,EAAoBwO,OAAO9sG,EAA3B;CACD;CACF,GATD;;;;;;;;CAiBAg/G,SAAOn9I,SAAP,CAAiBmhJ,SAAjB,GAA6B,YAAY;CACvC,SAAKb,SAAL,GAAiB,IAAjB;CACA,SAAKC,YAAL,GAAoB,KAApB;CACA,SAAKv3B,IAAL,CAAU,SAAV;CACA,SAAK24B,YAAL;CACD,GALD;;;;;;;;CAaAxE,SAAOn9I,SAAP,CAAiB2hJ,YAAjB,GAAgC,YAAY;CAC1C,QAAIvlI,CAAJ;CACA,SAAKA,IAAI,CAAT,EAAYA,IAAI,KAAKgkI,aAAL,CAAmBz/I,MAAnC,EAA2Cyb,GAA3C,EAAgD;CAC9C4sG,WAAKxxE,KAAL,CAAW,IAAX,EAAiB,KAAK4oG,aAAL,CAAmBhkI,CAAnB,CAAjB;CACD;CACD,SAAKgkI,aAAL,GAAqB,EAArB;;CAEA,SAAKhkI,IAAI,CAAT,EAAYA,IAAI,KAAKikI,UAAL,CAAgB1/I,MAAhC,EAAwCyb,GAAxC,EAA6C;CAC3C,WAAK6uH,MAAL,CAAY,KAAKoV,UAAL,CAAgBjkI,CAAhB,CAAZ;CACD;CACD,SAAKikI,UAAL,GAAkB,EAAlB;CACD,GAXD;;;;;;;;CAmBAlD,SAAOn9I,SAAP,CAAiBwhJ,YAAjB,GAAgC,YAAY;CAC1C/kB,UAAM,wBAAN,EAAgC,KAAKmQ,GAArC;CACA,SAAK7/C,OAAL;CACA,SAAK4vD,OAAL,CAAa,sBAAb;CACD,GAJD;;;;;;;;;;CAcAQ,SAAOn9I,SAAP,CAAiB+sF,OAAjB,GAA2B,YAAY;CACrC,QAAI,KAAK4zD,IAAT,EAAe;;CAEb,WAAK,IAAIvkI,IAAI,CAAb,EAAgBA,IAAI,KAAKukI,IAAL,CAAUhgJ,MAA9B,EAAsCyb,GAAtC,EAA2C;CACzC,aAAKukI,IAAL,CAAUvkI,CAAV,EAAa2wE,OAAb;CACD;CACD,WAAK4zD,IAAL,GAAY,IAAZ;CACD;;CAED,SAAKV,EAAL,CAAQlzD,OAAR,CAAgB,IAAhB;CACD,GAVD;;;;;;;;;CAmBAowD,SAAOn9I,SAAP,CAAiBgyI,KAAjB,GACAmL,OAAOn9I,SAAP,CAAiBykD,UAAjB,GAA8B,YAAY;CACxC,QAAI,KAAK67F,SAAT,EAAoB;CAClB7jB,YAAM,4BAAN,EAAoC,KAAKmQ,GAAzC;CACA,WAAK3B,MAAL,CAAY,EAAE/xG,MAAM49G,gBAAOyK,UAAf,EAAZ;CACD;;;CAGD,SAAKx0D,OAAL;;CAEA,QAAI,KAAKuzD,SAAT,EAAoB;;CAElB,WAAK3D,OAAL,CAAa,sBAAb;CACD;CACD,WAAO,IAAP;CACD,GAfD;;;;;;;;;;CAyBAQ,SAAOn9I,SAAP,CAAiB88I,QAAjB,GAA4B,UAAUA,QAAV,EAAoB;CAC9C,SAAK0D,KAAL,CAAW1D,QAAX,GAAsBA,QAAtB;CACA,WAAO,IAAP;CACD,GAHD;;;;;;;;;;CAaAK,SAAOn9I,SAAP,CAAiBitI,MAAjB,GAA0B,UAAUA,MAAV,EAAkB;CAC1C,SAAKuT,KAAL,CAAWvT,MAAX,GAAoBA,MAApB;CACA,WAAO,IAAP;CACD,GAHD;;;CCjbA;;;;CAIA,aAAiB2U,OAAjB;;;;;;;;;;;;;;CAcA,SAASA,OAAT,CAAiB5T,IAAjB,EAAuB;CACrBA,SAAOA,QAAQ,EAAf;CACA,OAAK1R,EAAL,GAAU0R,KAAKhjI,GAAL,IAAY,GAAtB;CACA,OAAKmB,GAAL,GAAW6hI,KAAK7hI,GAAL,IAAY,KAAvB;CACA,OAAKooF,MAAL,GAAcy5C,KAAKz5C,MAAL,IAAe,CAA7B;CACA,OAAKstD,MAAL,GAAc7T,KAAK6T,MAAL,GAAc,CAAd,IAAmB7T,KAAK6T,MAAL,IAAe,CAAlC,GAAsC7T,KAAK6T,MAA3C,GAAoD,CAAlE;CACA,OAAKC,QAAL,GAAgB,CAAhB;CACD;;;;;;;;;CASDF,QAAQ5hJ,SAAR,CAAkBqvC,QAAlB,GAA6B,YAAU;CACrC,MAAIitF,KAAK,KAAKA,EAAL,GAAU38H,KAAKC,GAAL,CAAS,KAAK20F,MAAd,EAAsB,KAAKutD,QAAL,EAAtB,CAAnB;CACA,MAAI,KAAKD,MAAT,EAAiB;CACf,QAAIE,OAAQpiJ,KAAK8vB,MAAL,EAAZ;CACA,QAAIuyH,YAAYriJ,KAAKiK,KAAL,CAAWm4I,OAAO,KAAKF,MAAZ,GAAqBvlB,EAAhC,CAAhB;CACAA,SAAK,CAAC38H,KAAKiK,KAAL,CAAWm4I,OAAO,EAAlB,IAAwB,CAAzB,KAA+B,CAA/B,GAAoCzlB,KAAK0lB,SAAzC,GAAqD1lB,KAAK0lB,SAA/D;CACD;CACD,SAAOriJ,KAAKqL,GAAL,CAASsxH,EAAT,EAAa,KAAKnwH,GAAlB,IAAyB,CAAhC;CACD,CARD;;;;;;;;CAgBAy1I,QAAQ5hJ,SAAR,CAAkByuC,KAAlB,GAA0B,YAAU;CAClC,OAAKqzG,QAAL,GAAgB,CAAhB;CACD,CAFD;;;;;;;;CAUAF,QAAQ5hJ,SAAR,CAAkBiiJ,MAAlB,GAA2B,UAASj3I,GAAT,EAAa;CACtC,OAAKsxH,EAAL,GAAUtxH,GAAV;CACD,CAFD;;;;;;;;CAUA42I,QAAQ5hJ,SAAR,CAAkBkiJ,MAAlB,GAA2B,UAAS/1I,GAAT,EAAa;CACtC,OAAKA,GAAL,GAAWA,GAAX;CACD,CAFD;;;;;;;;CAUAy1I,QAAQ5hJ,SAAR,CAAkBmiJ,SAAlB,GAA8B,UAASN,MAAT,EAAgB;CAC5C,OAAKA,MAAL,GAAcA,MAAd;CACD,CAFD;;;;CChFA;;;;CAUA,IAAIplB,UAAQ3E,UAAiB,0BAAjB,CAAZ;;;;;;CAQA,IAAIwW,MAAMpuI,OAAOF,SAAP,CAAiBa,cAA3B;;;;;;CAMA,cAAiBuhJ,OAAjB;;;;;;;;;;CAUA,SAASA,OAAT,CAAkBnpB,GAAlB,EAAuB+U,IAAvB,EAA6B;CAC3B,MAAI,EAAE,gBAAgBoU,OAAlB,CAAJ,EAAgC,OAAO,IAAIA,OAAJ,CAAYnpB,GAAZ,EAAiB+U,IAAjB,CAAP;CAChC,MAAI/U,OAAQ,qBAAoBA,GAApB,2CAAoBA,GAApB,EAAZ,EAAsC;CACpC+U,WAAO/U,GAAP;CACAA,UAAMv5H,SAAN;CACD;CACDsuI,SAAOA,QAAQ,EAAf;;CAEAA,OAAKj1F,IAAL,GAAYi1F,KAAKj1F,IAAL,IAAa,YAAzB;CACA,OAAKspG,IAAL,GAAY,EAAZ;CACA,OAAK1B,IAAL,GAAY,EAAZ;CACA,OAAK3S,IAAL,GAAYA,IAAZ;CACA,OAAKsU,YAAL,CAAkBtU,KAAKsU,YAAL,KAAsB,KAAxC;CACA,OAAKC,oBAAL,CAA0BvU,KAAKuU,oBAAL,IAA6BxmI,QAAvD;CACA,OAAKymI,iBAAL,CAAuBxU,KAAKwU,iBAAL,IAA0B,IAAjD;CACA,OAAKC,oBAAL,CAA0BzU,KAAKyU,oBAAL,IAA6B,IAAvD;CACA,OAAKC,mBAAL,CAAyB1U,KAAK0U,mBAAL,IAA4B,GAArD;CACA,OAAKC,OAAL,GAAe,IAAIf,MAAJ,CAAY;CACzB52I,SAAK,KAAKw3I,iBAAL,EADoB;CAEzBr2I,SAAK,KAAKs2I,oBAAL,EAFoB;CAGzBZ,YAAQ,KAAKa,mBAAL;CAHiB,GAAZ,CAAf;CAKA,OAAKroB,OAAL,CAAa,QAAQ2T,KAAK3T,OAAb,GAAuB,KAAvB,GAA+B2T,KAAK3T,OAAjD;CACA,OAAK16D,UAAL,GAAkB,QAAlB;CACA,OAAKs5D,GAAL,GAAWA,GAAX;CACA,OAAK0mB,UAAL,GAAkB,EAAlB;CACA,OAAKiD,QAAL,GAAgB,IAAhB;CACA,OAAKpkF,QAAL,GAAgB,KAAhB;CACA,OAAKqkF,YAAL,GAAoB,EAApB;CACA,MAAI7oF,UAAUg0E,KAAK8I,MAAL,IAAeA,eAA7B;CACA,OAAKgM,OAAL,GAAe,IAAI9oF,QAAQmyE,OAAZ,EAAf;CACA,OAAK4W,OAAL,GAAe,IAAI/oF,QAAQoyE,OAAZ,EAAf;CACA,OAAKqU,WAAL,GAAmBzS,KAAKyS,WAAL,KAAqB,KAAxC;CACA,MAAI,KAAKA,WAAT,EAAsB,KAAK/uF,IAAL;CACvB;;;;;;;;CAQD0wF,QAAQpiJ,SAAR,CAAkBgjJ,OAAlB,GAA4B,YAAY;CACtC,OAAKh6B,IAAL,CAAUxxE,KAAV,CAAgB,IAAhB,EAAsB92C,SAAtB;CACA,OAAK,IAAIksI,GAAT,IAAgB,KAAKyV,IAArB,EAA2B;CACzB,QAAI/T,IAAIxtI,IAAJ,CAAS,KAAKuhJ,IAAd,EAAoBzV,GAApB,CAAJ,EAA8B;CAC5B,WAAKyV,IAAL,CAAUzV,GAAV,EAAe5jB,IAAf,CAAoBxxE,KAApB,CAA0B,KAAK6qG,IAAL,CAAUzV,GAAV,CAA1B,EAA0ClsI,SAA1C;CACD;CACF;CACF,CAPD;;;;;;;;CAeA0hJ,QAAQpiJ,SAAR,CAAkBijJ,eAAlB,GAAoC,YAAY;CAC9C,OAAK,IAAIrW,GAAT,IAAgB,KAAKyV,IAArB,EAA2B;CACzB,QAAI/T,IAAIxtI,IAAJ,CAAS,KAAKuhJ,IAAd,EAAoBzV,GAApB,CAAJ,EAA8B;CAC5B,WAAKyV,IAAL,CAAUzV,GAAV,EAAezuG,EAAf,GAAoB,KAAK+kH,UAAL,CAAgBtW,GAAhB,CAApB;CACD;CACF;CACF,CAND;;;;;;;;;;CAgBAwV,QAAQpiJ,SAAR,CAAkBkjJ,UAAlB,GAA+B,UAAUtW,GAAV,EAAe;CAC5C,SAAO,CAACA,QAAQ,GAAR,GAAc,EAAd,GAAoBA,MAAM,GAA3B,IAAmC,KAAKuW,MAAL,CAAYhlH,EAAtD;CACD,CAFD;;;;;;AAQAihG,kBAAQgjB,QAAQpiJ,SAAhB;;;;;;;;;;CAUAoiJ,QAAQpiJ,SAAR,CAAkBsiJ,YAAlB,GAAiC,UAAUxxI,CAAV,EAAa;CAC5C,MAAI,CAACpQ,UAAUC,MAAf,EAAuB,OAAO,KAAKyiJ,aAAZ;CACvB,OAAKA,aAAL,GAAqB,CAAC,CAACtyI,CAAvB;CACA,SAAO,IAAP;CACD,CAJD;;;;;;;;;;CAcAsxI,QAAQpiJ,SAAR,CAAkBuiJ,oBAAlB,GAAyC,UAAUzxI,CAAV,EAAa;CACpD,MAAI,CAACpQ,UAAUC,MAAf,EAAuB,OAAO,KAAK0iJ,qBAAZ;CACvB,OAAKA,qBAAL,GAA6BvyI,CAA7B;CACA,SAAO,IAAP;CACD,CAJD;;;;;;;;;;CAcAsxI,QAAQpiJ,SAAR,CAAkBwiJ,iBAAlB,GAAsC,UAAU1xI,CAAV,EAAa;CACjD,MAAI,CAACpQ,UAAUC,MAAf,EAAuB,OAAO,KAAK2iJ,kBAAZ;CACvB,OAAKA,kBAAL,GAA0BxyI,CAA1B;CACA,OAAK6xI,OAAL,IAAgB,KAAKA,OAAL,CAAaV,MAAb,CAAoBnxI,CAApB,CAAhB;CACA,SAAO,IAAP;CACD,CALD;;CAOAsxI,QAAQpiJ,SAAR,CAAkB0iJ,mBAAlB,GAAwC,UAAU5xI,CAAV,EAAa;CACnD,MAAI,CAACpQ,UAAUC,MAAf,EAAuB,OAAO,KAAK4iJ,oBAAZ;CACvB,OAAKA,oBAAL,GAA4BzyI,CAA5B;CACA,OAAK6xI,OAAL,IAAgB,KAAKA,OAAL,CAAaR,SAAb,CAAuBrxI,CAAvB,CAAhB;CACA,SAAO,IAAP;CACD,CALD;;;;;;;;;;CAeAsxI,QAAQpiJ,SAAR,CAAkByiJ,oBAAlB,GAAyC,UAAU3xI,CAAV,EAAa;CACpD,MAAI,CAACpQ,UAAUC,MAAf,EAAuB,OAAO,KAAK6iJ,qBAAZ;CACvB,OAAKA,qBAAL,GAA6B1yI,CAA7B;CACA,OAAK6xI,OAAL,IAAgB,KAAKA,OAAL,CAAaT,MAAb,CAAoBpxI,CAApB,CAAhB;CACA,SAAO,IAAP;CACD,CALD;;;;;;;;;CAcAsxI,QAAQpiJ,SAAR,CAAkBq6H,OAAlB,GAA4B,UAAUvpH,CAAV,EAAa;CACvC,MAAI,CAACpQ,UAAUC,MAAf,EAAuB,OAAO,KAAK8iJ,QAAZ;CACvB,OAAKA,QAAL,GAAgB3yI,CAAhB;CACA,SAAO,IAAP;CACD,CAJD;;;;;;;;;CAaAsxI,QAAQpiJ,SAAR,CAAkB0jJ,oBAAlB,GAAyC,YAAY;;CAEnD,MAAI,CAAC,KAAK1D,YAAN,IAAsB,KAAKoD,aAA3B,IAA4C,KAAKT,OAAL,CAAab,QAAb,KAA0B,CAA1E,EAA6E;;CAE3E,SAAKlC,SAAL;CACD;CACF,CAND;;;;;;;;;;CAgBAwC,QAAQpiJ,SAAR,CAAkB0xD,IAAlB,GACA0wF,QAAQpiJ,SAAR,CAAkB0jD,OAAlB,GAA4B,UAAU47E,EAAV,EAAc0O,IAAd,EAAoB;CAC9CvR,UAAM,eAAN,EAAuB,KAAK98D,UAA5B;CACA,MAAI,CAAC,KAAKA,UAAL,CAAgBrmC,OAAhB,CAAwB,MAAxB,CAAL,EAAsC,OAAO,IAAP;;CAEtCmjG,UAAM,YAAN,EAAoB,KAAKxD,GAAzB;CACA,OAAKkqB,MAAL,GAAcQ,IAAI,KAAK1qB,GAAT,EAAc,KAAK+U,IAAnB,CAAd;CACA,MAAIhW,SAAS,KAAKmrB,MAAlB;CACA,MAAIt8B,OAAO,IAAX;CACA,OAAKlnD,UAAL,GAAkB,SAAlB;CACA,OAAKikF,aAAL,GAAqB,KAArB;;;CAGA,MAAIC,UAAU75B,KAAGgO,MAAH,EAAW,MAAX,EAAmB,YAAY;CAC3CnR,SAAK61B,MAAL;CACApd,UAAMA,IAAN;CACD,GAHa,CAAd;;;CAMA,MAAIwkB,WAAW95B,KAAGgO,MAAH,EAAW,OAAX,EAAoB,UAAUh4F,IAAV,EAAgB;CACjDy8F,YAAM,eAAN;CACA5V,SAAKozB,OAAL;CACApzB,SAAKlnD,UAAL,GAAkB,QAAlB;CACAknD,SAAKm8B,OAAL,CAAa,eAAb,EAA8BhjH,IAA9B;CACA,QAAIs/F,EAAJ,EAAQ;CACN,UAAI/V,MAAM,IAAIH,KAAJ,CAAU,kBAAV,CAAV;CACAG,UAAIvpF,IAAJ,GAAWA,IAAX;CACAs/F,SAAG/V,GAAH;CACD,KAJD,MAIO;;CAEL1C,WAAK68B,oBAAL;CACD;CACF,GAbc,CAAf;;;CAgBA,MAAI,UAAU,KAAKD,QAAnB,EAA6B;CAC3B,QAAIppB,UAAU,KAAKopB,QAAnB;CACAhnB,YAAM,uCAAN,EAA+CpC,OAA/C;;;CAGA,QAAI0pB,QAAQxyF,WAAW,YAAY;CACjCkrE,cAAM,oCAAN,EAA4CpC,OAA5C;CACAwpB,cAAQ92D,OAAR;CACAirC,aAAOga,KAAP;CACAha,aAAOhP,IAAP,CAAY,OAAZ,EAAqB,SAArB;CACAnC,WAAKm8B,OAAL,CAAa,iBAAb,EAAgC3oB,OAAhC;CACD,KANW,EAMTA,OANS,CAAZ;;CAQA,SAAKsmB,IAAL,CAAUvtH,IAAV,CAAe;CACb25D,eAAS,mBAAY;CACnB2sC,qBAAaqqB,KAAb;CACD;CAHY,KAAf;CAKD;;CAED,OAAKpD,IAAL,CAAUvtH,IAAV,CAAeywH,OAAf;CACA,OAAKlD,IAAL,CAAUvtH,IAAV,CAAe0wH,QAAf;;CAEA,SAAO,IAAP;CACD,CA3DD;;;;;;;;CAmEA1B,QAAQpiJ,SAAR,CAAkB08I,MAAlB,GAA2B,YAAY;CACrCjgB,UAAM,MAAN;;;CAGA,OAAKwd,OAAL;;;CAGA,OAAKt6E,UAAL,GAAkB,MAAlB;CACA,OAAKqpD,IAAL,CAAU,MAAV;;;CAGA,MAAIgP,SAAS,KAAKmrB,MAAlB;CACA,OAAKxC,IAAL,CAAUvtH,IAAV,CAAe42F,KAAGgO,MAAH,EAAW,MAAX,EAAmBl4E,cAAK,IAAL,EAAW,QAAX,CAAnB,CAAf;CACA,OAAK6gG,IAAL,CAAUvtH,IAAV,CAAe42F,KAAGgO,MAAH,EAAW,MAAX,EAAmBl4E,cAAK,IAAL,EAAW,QAAX,CAAnB,CAAf;CACA,OAAK6gG,IAAL,CAAUvtH,IAAV,CAAe42F,KAAGgO,MAAH,EAAW,MAAX,EAAmBl4E,cAAK,IAAL,EAAW,QAAX,CAAnB,CAAf;CACA,OAAK6gG,IAAL,CAAUvtH,IAAV,CAAe42F,KAAGgO,MAAH,EAAW,OAAX,EAAoBl4E,cAAK,IAAL,EAAW,SAAX,CAApB,CAAf;CACA,OAAK6gG,IAAL,CAAUvtH,IAAV,CAAe42F,KAAGgO,MAAH,EAAW,OAAX,EAAoBl4E,cAAK,IAAL,EAAW,SAAX,CAApB,CAAf;CACA,OAAK6gG,IAAL,CAAUvtH,IAAV,CAAe42F,KAAG,KAAK+4B,OAAR,EAAiB,SAAjB,EAA4BjjG,cAAK,IAAL,EAAW,WAAX,CAA5B,CAAf;CACD,CAlBD;;;;;;;;CA0BAsiG,QAAQpiJ,SAAR,CAAkBgkJ,MAAlB,GAA2B,YAAY;CACrC,OAAKpB,QAAL,GAAgB,IAAIlqH,IAAJ,EAAhB;CACA,OAAKsqH,OAAL,CAAa,MAAb;CACD,CAHD;;;;;;;;CAWAZ,QAAQpiJ,SAAR,CAAkBikJ,MAAlB,GAA2B,YAAY;CACrC,OAAKjB,OAAL,CAAa,MAAb,EAAqB,IAAItqH,IAAJ,KAAa,KAAKkqH,QAAvC;CACD,CAFD;;;;;;;;CAUAR,QAAQpiJ,SAAR,CAAkBkkJ,MAAlB,GAA2B,UAAUlkH,IAAV,EAAgB;CACzC,OAAK+iH,OAAL,CAAap2I,GAAb,CAAiBqzB,IAAjB;CACD,CAFD;;;;;;;;CAUAoiH,QAAQpiJ,SAAR,CAAkBmkJ,SAAlB,GAA8B,UAAUlZ,MAAV,EAAkB;CAC9C,OAAKjiB,IAAL,CAAU,QAAV,EAAoBiiB,MAApB;CACD,CAFD;;;;;;;;CAUAmX,QAAQpiJ,SAAR,CAAkBy5I,OAAlB,GAA4B,UAAUlwB,GAAV,EAAe;CACzCkT,UAAM,OAAN,EAAelT,GAAf;CACA,OAAKy5B,OAAL,CAAa,OAAb,EAAsBz5B,GAAtB;CACD,CAHD;;;;;;;;;CAYA64B,QAAQpiJ,SAAR,CAAkBg4H,MAAlB,GAA2B,UAAU4U,GAAV,EAAeoB,IAAf,EAAqB;CAC9C,MAAIhW,SAAS,KAAKqqB,IAAL,CAAUzV,GAAV,CAAb;CACA,MAAI,CAAC5U,MAAL,EAAa;CACXA,aAAS,IAAImlB,QAAJ,CAAW,IAAX,EAAiBvQ,GAAjB,EAAsBoB,IAAtB,CAAT;CACA,SAAKqU,IAAL,CAAUzV,GAAV,IAAiB5U,MAAjB;CACA,QAAInR,OAAO,IAAX;CACAmR,WAAOhO,EAAP,CAAU,YAAV,EAAwBo6B,YAAxB;CACApsB,WAAOhO,EAAP,CAAU,SAAV,EAAqB,YAAY;CAC/BgO,aAAO75F,EAAP,GAAY0oF,KAAKq8B,UAAL,CAAgBtW,GAAhB,CAAZ;CACD,KAFD;;CAIA,QAAI,KAAK6T,WAAT,EAAsB;;CAEpB2D;CACD;CACF;;CAED,WAASA,YAAT,GAAyB;CACvB,QAAI,CAAC,CAAC9qH,QAAQutF,KAAK84B,UAAb,EAAyB3nB,MAAzB,CAAN,EAAwC;CACtCnR,WAAK84B,UAAL,CAAgBvsH,IAAhB,CAAqB4kG,MAArB;CACD;CACF;;CAED,SAAOA,MAAP;CACD,CAxBD;;;;;;;;CAgCAoqB,QAAQpiJ,SAAR,CAAkB+sF,OAAlB,GAA4B,UAAUirC,MAAV,EAAkB;CAC5C,MAAIv3H,QAAQ64B,QAAQ,KAAKqmH,UAAb,EAAyB3nB,MAAzB,CAAZ;CACA,MAAI,CAACv3H,KAAL,EAAY,KAAKk/I,UAAL,CAAgBjmH,MAAhB,CAAuBj5B,KAAvB,EAA8B,CAA9B;CACZ,MAAI,KAAKk/I,UAAL,CAAgBh/I,MAApB,EAA4B;;CAE5B,OAAKqxI,KAAL;CACD,CAND;;;;;;;;;CAeAoQ,QAAQpiJ,SAAR,CAAkBirI,MAAlB,GAA2B,UAAUA,MAAV,EAAkB;CAC3CxO,UAAM,mBAAN,EAA2BwO,MAA3B;CACA,MAAIpkB,OAAO,IAAX;CACA,MAAIokB,OAAOuK,KAAP,IAAgBvK,OAAO/xG,IAAP,KAAgB,CAApC,EAAuC+xG,OAAO2B,GAAP,IAAc,MAAM3B,OAAOuK,KAA3B;;CAEvC,MAAI,CAAC3uB,KAAKroD,QAAV,EAAoB;;CAElBqoD,SAAKroD,QAAL,GAAgB,IAAhB;CACA,SAAKskF,OAAL,CAAavW,MAAb,CAAoBtB,MAApB,EAA4B,UAAUwJ,cAAV,EAA0B;CACpD,WAAK,IAAIr4H,IAAI,CAAb,EAAgBA,IAAIq4H,eAAe9zI,MAAnC,EAA2Cyb,GAA3C,EAAgD;CAC9CyqG,aAAKs8B,MAAL,CAAYhiB,KAAZ,CAAkBsT,eAAer4H,CAAf,CAAlB,EAAqC6uH,OAAO5iF,OAA5C;CACD;CACDw+D,WAAKroD,QAAL,GAAgB,KAAhB;CACAqoD,WAAKw9B,kBAAL;CACD,KAND;CAOD,GAVD,MAUO;;CACLx9B,SAAKg8B,YAAL,CAAkBzvH,IAAlB,CAAuB63G,MAAvB;CACD;CACF,CAlBD;;;;;;;;;CA2BAmX,QAAQpiJ,SAAR,CAAkBqkJ,kBAAlB,GAAuC,YAAY;CACjD,MAAI,KAAKxB,YAAL,CAAkBliJ,MAAlB,GAA2B,CAA3B,IAAgC,CAAC,KAAK69D,QAA1C,EAAoD;CAClD,QAAI2sE,OAAO,KAAK0X,YAAL,CAAkBvkG,KAAlB,EAAX;CACA,SAAK2sF,MAAL,CAAYE,IAAZ;CACD;CACF,CALD;;;;;;;;CAaAiX,QAAQpiJ,SAAR,CAAkBi6I,OAAlB,GAA4B,YAAY;CACtCxd,UAAM,SAAN;;CAEA,MAAI6nB,aAAa,KAAK3D,IAAL,CAAUhgJ,MAA3B;CACA,OAAK,IAAIyb,IAAI,CAAb,EAAgBA,IAAIkoI,UAApB,EAAgCloI,GAAhC,EAAqC;CACnC,QAAIlI,MAAM,KAAKysI,IAAL,CAAUriG,KAAV,EAAV;CACApqC,QAAI64E,OAAJ;CACD;;CAED,OAAK81D,YAAL,GAAoB,EAApB;CACA,OAAKrkF,QAAL,GAAgB,KAAhB;CACA,OAAKokF,QAAL,GAAgB,IAAhB;;CAEA,OAAKG,OAAL,CAAah2D,OAAb;CACD,CAdD;;;;;;;;CAsBAq1D,QAAQpiJ,SAAR,CAAkBgyI,KAAlB,GACAoQ,QAAQpiJ,SAAR,CAAkBykD,UAAlB,GAA+B,YAAY;CACzCg4E,UAAM,YAAN;CACA,OAAKmnB,aAAL,GAAqB,IAArB;CACA,OAAK5D,YAAL,GAAoB,KAApB;CACA,MAAI,cAAc,KAAKrgF,UAAvB,EAAmC;;;CAGjC,SAAKs6E,OAAL;CACD;CACD,OAAK0I,OAAL,CAAal0G,KAAb;CACA,OAAKkxB,UAAL,GAAkB,QAAlB;CACA,MAAI,KAAKwjF,MAAT,EAAiB,KAAKA,MAAL,CAAYnR,KAAZ;CAClB,CAbD;;;;;;;;CAqBAoQ,QAAQpiJ,SAAR,CAAkB28I,OAAlB,GAA4B,UAAU4C,MAAV,EAAkB;CAC5C9iB,UAAM,SAAN;;CAEA,OAAKwd,OAAL;CACA,OAAK0I,OAAL,CAAal0G,KAAb;CACA,OAAKkxB,UAAL,GAAkB,QAAlB;CACA,OAAKqpD,IAAL,CAAU,OAAV,EAAmBu2B,MAAnB;;CAEA,MAAI,KAAK6D,aAAL,IAAsB,CAAC,KAAKQ,aAAhC,EAA+C;CAC7C,SAAKhE,SAAL;CACD;CACF,CAXD;;;;;;;;CAmBAwC,QAAQpiJ,SAAR,CAAkB4/I,SAAlB,GAA8B,YAAY;CACxC,MAAI,KAAKI,YAAL,IAAqB,KAAK4D,aAA9B,EAA6C,OAAO,IAAP;;CAE7C,MAAI/8B,OAAO,IAAX;;CAEA,MAAI,KAAK87B,OAAL,CAAab,QAAb,IAAyB,KAAKuB,qBAAlC,EAAyD;CACvD5mB,YAAM,kBAAN;CACA,SAAKkmB,OAAL,CAAal0G,KAAb;CACA,SAAKu0G,OAAL,CAAa,kBAAb;CACA,SAAKhD,YAAL,GAAoB,KAApB;CACD,GALD,MAKO;CACL,QAAIuE,QAAQ,KAAK5B,OAAL,CAAatzG,QAAb,EAAZ;CACAotF,YAAM,yCAAN,EAAiD8nB,KAAjD;;CAEA,SAAKvE,YAAL,GAAoB,IAApB;CACA,QAAI+D,QAAQxyF,WAAW,YAAY;CACjC,UAAIs1D,KAAK+8B,aAAT,EAAwB;;CAExBnnB,cAAM,sBAAN;CACA5V,WAAKm8B,OAAL,CAAa,mBAAb,EAAkCn8B,KAAK87B,OAAL,CAAab,QAA/C;CACAj7B,WAAKm8B,OAAL,CAAa,cAAb,EAA6Bn8B,KAAK87B,OAAL,CAAab,QAA1C;;;CAGA,UAAIj7B,KAAK+8B,aAAT,EAAwB;;CAExB/8B,WAAKn1D,IAAL,CAAU,UAAU63D,GAAV,EAAe;CACvB,YAAIA,GAAJ,EAAS;CACPkT,kBAAM,yBAAN;CACA5V,eAAKm5B,YAAL,GAAoB,KAApB;CACAn5B,eAAK+4B,SAAL;CACA/4B,eAAKm8B,OAAL,CAAa,iBAAb,EAAgCz5B,IAAIvpF,IAApC;CACD,SALD,MAKO;CACLy8F,kBAAM,mBAAN;CACA5V,eAAK29B,WAAL;CACD;CACF,OAVD;CAWD,KArBW,EAqBTD,KArBS,CAAZ;;CAuBA,SAAK5D,IAAL,CAAUvtH,IAAV,CAAe;CACb25D,eAAS,mBAAY;CACnB2sC,qBAAaqqB,KAAb;CACD;CAHY,KAAf;CAKD;CACF,CA5CD;;;;;;;;CAoDA3B,QAAQpiJ,SAAR,CAAkBwkJ,WAAlB,GAAgC,YAAY;CAC1C,MAAIC,UAAU,KAAK9B,OAAL,CAAab,QAA3B;CACA,OAAK9B,YAAL,GAAoB,KAApB;CACA,OAAK2C,OAAL,CAAal0G,KAAb;CACA,OAAKw0G,eAAL;CACA,OAAKD,OAAL,CAAa,WAAb,EAA0ByB,OAA1B;CACD,CAND;;;;;CCrjBA;;;;CAOA,MAAIhoB,QAAQ3E,UAAiB,kBAAjB,CAAZ;;;;;;CAMAx4H,gBAAA,GAAiBgnH,UAAUoZ,MAA3B;;;;;;CAMA,MAAI5/F,QAAQwmF,gBAAA,GAAmB,EAA/B;;;;;;;;;;;;;;;CAeA,WAASoZ,MAAT,CAAiBzG,GAAjB,EAAsB+U,IAAtB,EAA4B;CAC1B,QAAI,QAAO/U,GAAP,2CAAOA,GAAP,OAAe,QAAnB,EAA6B;CAC3B+U,aAAO/U,GAAP;CACAA,YAAMv5H,SAAN;CACD;;CAEDsuI,WAAOA,QAAQ,EAAf;;CAEA,QAAI7I,SAAS74E,MAAI2sE,GAAJ,CAAb;CACA,QAAIr4H,SAASukI,OAAOvkI,MAApB;CACA,QAAIu9B,KAAKgnG,OAAOhnG,EAAhB;CACA,QAAI4a,OAAOosF,OAAOpsF,IAAlB;CACA,QAAIkoG,gBAAgBnhH,MAAM3B,EAAN,KAAa4a,QAAQjZ,MAAM3B,EAAN,EAAUkkH,IAAnD;CACA,QAAIqC,gBAAgB1W,KAAK2W,QAAL,IAAiB3W,KAAK,sBAAL,CAAjB,IACA,UAAUA,KAAK4W,SADf,IAC4B3D,aADhD;;CAGA,QAAIhB,EAAJ;;CAEA,QAAIyE,aAAJ,EAAmB;CACjBjoB,YAAM,8BAAN,EAAsC77H,MAAtC;CACAq/I,WAAKmC,QAAQxhJ,MAAR,EAAgBotI,IAAhB,CAAL;CACD,KAHD,MAGO;CACL,UAAI,CAACluG,MAAM3B,EAAN,CAAL,EAAgB;CACds+F,cAAM,wBAAN,EAAgC77H,MAAhC;CACAk/B,cAAM3B,EAAN,IAAYikH,QAAQxhJ,MAAR,EAAgBotI,IAAhB,CAAZ;CACD;CACDiS,WAAKngH,MAAM3B,EAAN,CAAL;CACD;CACD,QAAIgnG,OAAOqQ,KAAP,IAAgB,CAACxH,KAAKwH,KAA1B,EAAiC;CAC/BxH,WAAKwH,KAAL,GAAarQ,OAAOqQ,KAApB;CACD;CACD,WAAOyK,GAAGjoB,MAAH,CAAUmN,OAAOpsF,IAAjB,EAAuBi1F,IAAvB,CAAP;CACD;;;;;;;;CAQD1nB,kBAAA,GAAmBwwB,gBAAO9X,QAA1B;;;;;;;;;CASA1Y,iBAAA,GAAkBoZ,MAAlB;;;;;;;;CAQApZ,iBAAA,GAAkB87B,OAAlB;CACA97B,gBAAA,GAAiBsxB,QAAjB;;;;;;;;;;;;;;;;;;;;;;CC7FA,SAAS5c,MAAT,GAAgB;;CAmBhB,SAASjM,GAAT,CAAauQ,EAAb,EAAiB;CAChB,QAAOA,IAAP;CACA;;CAED,SAASulB,YAAT,GAAwB;CACvB,QAAO3kJ,OAAOy2B,MAAP,CAAc,IAAd,CAAP;CACA;;CAED,SAASmuH,OAAT,CAAiBC,GAAjB,EAAsB;CACrBA,KAAIvT,OAAJ,CAAYziB,GAAZ;CACA;;CAED,SAASi2B,WAAT,CAAqBC,KAArB,EAA4B;CAC3B,QAAO,OAAOA,KAAP,KAAiB,UAAxB;CACA;;CAED,SAASC,cAAT,CAAwBh0I,CAAxB,EAA2BjI,CAA3B,EAA8B;CAC7B,QAAOiI,KAAKA,CAAL,GAASjI,KAAKA,CAAd,GAAkBiI,MAAMjI,CAAN,IAAaiI,KAAK,QAAOA,CAAP,2CAAOA,CAAP,OAAa,QAAnB,IAAgC,OAAOA,CAAP,KAAa,UAAlF;CACA;;CAgFD,SAAS+/H,MAAT,CAAgBzwI,MAAhB,EAAwByd,IAAxB,EAA8B;CAC7Bzd,QAAOgmH,WAAP,CAAmBvoG,IAAnB;CACA;;CAED,SAASknI,MAAT,CAAgB3kJ,MAAhB,EAAwByd,IAAxB,EAA8BmnI,MAA9B,EAAsC;CACrC5kJ,QAAO26I,YAAP,CAAoBl9H,IAApB,EAA0BmnI,MAA1B;CACA;;CAED,SAAS5iD,MAAT,CAAgBvkF,IAAhB,EAAsB;CACrBA,MAAK48H,UAAL,CAAgBC,WAAhB,CAA4B78H,IAA5B;CACA;;CA0BD,SAASw3G,OAAT,CAAiBx1H,IAAjB,EAAuB;CACtB,QAAO0yD,SAASC,aAAT,CAAuB3yD,IAAvB,CAAP;CACA;;CAMD,SAASqyD,IAAT,CAActyB,IAAd,EAAoB;CACnB,QAAO2yB,SAAS0yF,cAAT,CAAwBrlH,IAAxB,CAAP;CACA;;CAED,SAASslH,KAAT,GAAiB;CAChB,QAAOhzF,KAAK,GAAL,CAAP;CACA;;CAMD,SAASizF,MAAT,CAAgBtnI,IAAhB,EAAsB2b,KAAtB,EAA6B0uF,OAA7B,EAAsCjgE,OAAtC,EAA+C;CAC9CpqC,MAAKgb,gBAAL,CAAsBW,KAAtB,EAA6B0uF,OAA7B,EAAsCjgE,OAAtC;CACA,QAAO;CAAA,SAAMpqC,KAAKub,mBAAL,CAAyBI,KAAzB,EAAgC0uF,OAAhC,EAAyCjgE,OAAzC,CAAN;CAAA,EAAP;CACA;;CAiED,SAASjtB,QAAT,CAAkBq6F,OAAlB,EAA2B;CAC1B,QAAO35F,MAAM8gB,IAAN,CAAW64E,QAAQ+vB,UAAnB,CAAP;CACA;;CA6BD,SAASC,QAAT,CAAkBnzF,IAAlB,EAAwBtyB,IAAxB,EAA8B;CAC7BA,QAAO,KAAKA,IAAZ;CACA,KAAIsyB,KAAKtyB,IAAL,KAAcA,IAAlB,EAAwBsyB,KAAKtyB,IAAL,GAAYA,IAAZ;CACxB;;CA6OD,IAAI0lH,0BAAJ;;CAEA,SAASC,qBAAT,CAA+BC,SAA/B,EAA0C;CACzCF,qBAAoBE,SAApB;CACA;;CA2DD,IAAMC,mBAAmB,EAAzB;AACA;CAEA,IAAIC,uBAAJ;CACA,IAAMC,oBAAoB,EAA1B;CACA,IAAMC,mBAAmB,EAAzB;CACA,IAAMC,kBAAkB,EAAxB;;CAEA,SAASC,eAAT,GAA2B;CAC1B,KAAI,CAACJ,cAAL,EAAqB;CACpBA,mBAAiBK,QAAQC,OAAR,EAAjB;CACAN,iBAAe53B,IAAf,CAAoB0wB,KAApB;CACA;CACD;;CAWD,SAASyH,mBAAT,CAA6B/mB,EAA7B,EAAiC;CAChC0mB,kBAAiB5yH,IAAjB,CAAsBksG,EAAtB;CACA;;CAMD,SAASsf,KAAT,GAAiB;CAChB,KAAM0H,iBAAiB,IAAIC,GAAJ,EAAvB;;CAEA,IAAG;CACF;CACA;CACA,SAAOV,iBAAiBllJ,MAAxB,EAAgC;CAC/B,OAAMilJ,YAAYC,iBAAiBvnG,KAAjB,EAAlB;CACAqnG,yBAAsBC,SAAtB;CACAt3I,UAAOs3I,UAAUY,EAAjB;CACA;;CAED,SAAOT,kBAAkBplJ,MAAzB;CAAiColJ,qBAAkBznG,KAAlB;CAAjC,GATE;CAYF;CACA;CACA,SAAO0nG,iBAAiBrlJ,MAAxB,EAAgC;CAC/B,OAAMyR,WAAW4zI,iBAAiBluG,GAAjB,EAAjB;CACA,OAAI,CAACwuG,eAAehY,GAAf,CAAmBl8H,QAAnB,CAAL,EAAmC;CAClCA;;CAEA;CACAk0I,mBAAe35I,GAAf,CAAmByF,QAAnB;CACA;CACD;CACD,EAvBD,QAuBSyzI,iBAAiBllJ,MAvB1B;;CAyBA,QAAOslJ,gBAAgBtlJ,MAAvB,EAA+B;CAC9BslJ,kBAAgBnuG,GAAhB;CACA;;CAEDguG,kBAAiB,IAAjB;CACA;;CAED,SAASx3I,MAAT,CAAgBk4I,EAAhB,EAAoB;CACnB,KAAIA,GAAGC,QAAP,EAAiB;CAChBD,KAAGl4I,MAAH,CAAUk4I,GAAGE,KAAb;CACA5B,UAAQ0B,GAAGG,aAAX;CACAH,KAAGC,QAAH,CAAY38I,CAAZ,CAAc08I,GAAGE,KAAjB,EAAwBF,GAAGI,GAA3B;CACAJ,KAAGE,KAAH,GAAW,IAAX;;CAEAF,KAAGK,YAAH,CAAgBrV,OAAhB,CAAwB6U,mBAAxB;CACA;CACD;;CAooBD,SAASS,eAAT,CAAyBlB,SAAzB,EAAoCplJ,MAApC,EAA4C4kJ,MAA5C,EAAoD;CAAA,qBACMQ,UAAUY,EADhB;CAAA,KAC3CC,QAD2C,iBAC3CA,QAD2C;CAAA,KACjCM,QADiC,iBACjCA,QADiC;CAAA,KACvBC,UADuB,iBACvBA,UADuB;CAAA,KACXH,YADW,iBACXA,YADW;;;CAGnDJ,UAAS77I,CAAT,CAAWpK,MAAX,EAAmB4kJ,MAAnB;;CAEA;CACA;CACA;CACAiB,qBAAoB,YAAM;CACzB,MAAMY,iBAAiBF,SAASz7F,GAAT,CAAayjE,GAAb,EAAkBjqE,MAAlB,CAAyBkgG,WAAzB,CAAvB;CACA,MAAIgC,UAAJ,EAAgB;CACfA,cAAW5zH,IAAX,sCAAmB6zH,cAAnB;CACA,GAFD,MAEO;CACN;CACA;CACAnC,WAAQmC,cAAR;CACA;CACDrB,YAAUY,EAAV,CAAaO,QAAb,GAAwB,EAAxB;CACA,EAVD;;CAYAF,cAAarV,OAAb,CAAqB6U,mBAArB;CACA;;CAED,SAASt5D,OAAT,CAAiB64D,SAAjB,EAA4BsB,SAA5B,EAAuC;CACtC,KAAItB,UAAUY,EAAd,EAAkB;CACjB1B,UAAQc,UAAUY,EAAV,CAAaQ,UAArB;CACApB,YAAUY,EAAV,CAAaC,QAAb,CAAsBjwI,CAAtB,CAAwB0wI,SAAxB;;CAEA;CACA;CACAtB,YAAUY,EAAV,CAAaQ,UAAb,GAA0BpB,UAAUY,EAAV,CAAaC,QAAb,GAAwB,IAAlD;CACAb,YAAUY,EAAV,CAAaI,GAAb,GAAmB,EAAnB;CACA;CACD;;CAED,SAASO,UAAT,CAAoBvB,SAApB,EAA+B7lH,GAA/B,EAAoC;CACnC,KAAI,CAAC6lH,UAAUY,EAAV,CAAaE,KAAlB,EAAyB;CACxBb,mBAAiBzyH,IAAjB,CAAsBwyH,SAAtB;CACAM;CACAN,YAAUY,EAAV,CAAaE,KAAb,GAAqB,EAArB;CACA;CACDd,WAAUY,EAAV,CAAaE,KAAb,CAAmB3mH,GAAnB,IAA0B,IAA1B;CACA;;CAED,SAASksC,MAAT,CAAc25E,SAAd,EAAyBv9F,OAAzB,EAAkCs1E,QAAlC,EAA4CypB,eAA5C,EAA6DC,YAA7D,EAA2EC,UAA3E,EAAuF;CACtF,KAAMC,mBAAmB7B,iBAAzB;CACAC,uBAAsBC,SAAtB;;CAEA,KAAM4B,QAAQn/F,QAAQm/F,KAAR,IAAiB,EAA/B;;CAEA,KAAMhB,KAAKZ,UAAUY,EAAV,GAAe;CACzBC,YAAU,IADe;CAEzBG,OAAK,IAFoB;;CAIzB;CACAY,SAAOF,UALkB;CAMzBh5I,UAAQ0sH,MANiB;CAOzBysB,aAAWJ,YAPc;CAQzBK,SAAO7C,cARkB;;CAUzB;CACAkC,YAAU,EAXe;CAYzBC,cAAY,EAZa;CAazBL,iBAAe,EAbU;CAczBE,gBAAc,EAdW;CAezBzjG,WAAS,IAAI6sE,GAAJ,CAAQs3B,mBAAmBA,iBAAiBf,EAAjB,CAAoBpjG,OAAvC,GAAiD,EAAzD,CAfgB;;CAiBzB;CACAo8E,aAAWqlB,cAlBc;CAmBzB6B,SAAO;CAnBkB,EAA1B;;CAsBA,KAAIiB,QAAQ,KAAZ;;CAEAnB,IAAGI,GAAH,GAASjpB,WACNA,SAASioB,SAAT,EAAoB4B,KAApB,EAA2B,UAACznH,GAAD,EAAM12B,KAAN,EAAgB;CAC5C,MAAIm9I,GAAGI,GAAH,IAAUS,aAAab,GAAGI,GAAH,CAAO7mH,GAAP,CAAb,EAA0BymH,GAAGI,GAAH,CAAO7mH,GAAP,IAAc12B,KAAxC,CAAd,EAA8D;CAC7D,OAAIm9I,GAAGkB,KAAH,CAAS3nH,GAAT,CAAJ,EAAmBymH,GAAGkB,KAAH,CAAS3nH,GAAT,EAAc12B,KAAd;CACnB,OAAIs+I,KAAJ,EAAWR,WAAWvB,SAAX,EAAsB7lH,GAAtB;CACX;CACD,EALC,CADM,GAONynH,KAPH;;CASAhB,IAAGl4I,MAAH;CACAq5I,SAAQ,IAAR;CACA7C,SAAQ0B,GAAGG,aAAX;CACAH,IAAGC,QAAH,GAAcW,gBAAgBZ,GAAGI,GAAnB,CAAd;;CAEA,KAAIv+F,QAAQ7nD,MAAZ,EAAoB;CACnB,MAAI6nD,QAAQu/F,OAAZ,EAAqB;CACpBpB,MAAGC,QAAH,CAAYt8I,CAAZ,CAAcixB,SAASitB,QAAQ7nD,MAAjB,CAAd;CACA,GAFD,MAEO;CACNgmJ,MAAGC,QAAH,CAAYp5I,CAAZ;CACA;;CAED,MAAIg7C,QAAQw/F,KAAR,IAAiBjC,UAAUY,EAAV,CAAaC,QAAb,CAAsBrqI,CAA3C,EAA8CwpI,UAAUY,EAAV,CAAaC,QAAb,CAAsBrqI,CAAtB;CAC9C0qI,kBAAgBlB,SAAhB,EAA2Bv9F,QAAQ7nD,MAAnC,EAA2C6nD,QAAQ+8F,MAAnD;CACAxG;CACA;;CAED+G,uBAAsB4B,gBAAtB;CACA;;CAED,IAAIO,sBAAJ;CACA,IAAI,OAAOC,WAAP,KAAuB,WAA3B,EAAwC;CACvCD;CAAA;;CACC,2BAAc;CAAA;;CAAA;;CAEb,SAAKE,YAAL,CAAkB,EAAE/4G,MAAM,MAAR,EAAlB;CAFa;CAGb;;CAJF;CAAA;CAAA,uCAMqB;CACnB,SAAK,IAAMlP,GAAX,IAAkB,KAAKymH,EAAL,CAAQyB,OAA1B,EAAmC;CAClC,UAAKzhC,WAAL,CAAiB,KAAKggC,EAAL,CAAQyB,OAAR,CAAgBloH,GAAhB,CAAjB;CACA;CACD;CAVF;CAAA;CAAA,4CAY0BmoH,OAZ1B,EAYmCC,QAZnC,EAY6CtsF,QAZ7C,EAYuD;CACrD,SAAKqsF,OAAL,IAAgBrsF,QAAhB;CACA;CAdF;CAAA;CAAA,8BAgBY;CACVkxB,YAAQ,IAAR,EAAc,IAAd;CACA,SAAKq7D,QAAL,GAAgBptB,MAAhB;CACA;CAnBF;CAAA;CAAA,uBAqBK9hG,IArBL,EAqBW9mB,QArBX,EAqBqB;CACnB;CACA,QAAMotH,YAAa,KAAKgnB,EAAL,CAAQhnB,SAAR,CAAkBtmG,IAAlB,MAA4B,KAAKstH,EAAL,CAAQhnB,SAAR,CAAkBtmG,IAAlB,IAA0B,EAAtD,CAAnB;CACAsmG,cAAUpsG,IAAV,CAAehhB,QAAf;;CAEA,WAAO,YAAM;CACZ,SAAM3R,QAAQ++H,UAAUlmG,OAAV,CAAkBlnB,QAAlB,CAAd;CACA,SAAI3R,UAAU,CAAC,CAAf,EAAkB++H,UAAU9lG,MAAV,CAAiBj5B,KAAjB,EAAwB,CAAxB;CAClB,KAHD;CAIA;CA9BF;CAAA;CAAA,0BAgCQ;CACN;CACA;CAlCF;;CAAA;CAAA,GAA8BsnJ,WAA9B;CAoCA;;KAEKM;;;;;;;8BACM;CACVt7D,WAAQ,IAAR,EAAc,IAAd;CACA,QAAKq7D,QAAL,GAAgBptB,MAAhB;CACA;;;uBAEG9hG,MAAM9mB,UAAU;CACnB,OAAMotH,YAAa,KAAKgnB,EAAL,CAAQhnB,SAAR,CAAkBtmG,IAAlB,MAA4B,KAAKstH,EAAL,CAAQhnB,SAAR,CAAkBtmG,IAAlB,IAA0B,EAAtD,CAAnB;CACAsmG,aAAUpsG,IAAV,CAAehhB,QAAf;;CAEA,UAAO,YAAM;CACZ,QAAM3R,QAAQ++H,UAAUlmG,OAAV,CAAkBlnB,QAAlB,CAAd;CACA,QAAI3R,UAAU,CAAC,CAAf,EAAkB++H,UAAU9lG,MAAV,CAAiBj5B,KAAjB,EAAwB,CAAxB;CAClB,IAHD;CAIA;;;0BAEM;CACN;CACA;;;;;;KAGI6nJ;;;CACL,6BAAYjgG,OAAZ,EAAqB;CAAA;;CACpB,MAAI,CAACA,OAAD,IAAa,CAACA,QAAQ7nD,MAAT,IAAmB,CAAC6nD,QAAQkgG,QAA7C,EAAwD;CACvD,SAAM,IAAIn/B,KAAJ,mCAAN;CACA;;CAHmB;CAMpB;;;;8BAEU;CACV;CACA,QAAKg/B,QAAL,GAAgB,YAAM;CACrB19I,YAAQC,IAAR,oCADqB;CAErB,IAFD;CAGA;;;;GAd+B09I;;;;;;;;;;;;;qBC16Cf3nH,UAAU,IAAI,SAAS;;;;;;;;kBAA/BA;;;;0CADkB8nH;;;;;;;;;;;sBAClB9nH;;;sDAAQA,UAAU,IAAI,SAAS;;;;;;;;;;;;;;;;;;;;CARxC,KAAIA,QAAQ,CAAZ;;CAEA,UAAS8nH,WAAT,GAAuB;yBACrB9nH,SAAS;CACV;;;;;;;;;;;;;;;;;;;;;;;;;;CCLFmlB,OAAOtmD,KAAP,GAAeu4H,KAAf;CACAjyE,OAAOgpE,KAAP,GAAe,IAAf;;CAQAhpE,OAAOmmF,MAAP,GAAgB,YAAM;CACpB,MAAMhU,SAASioB,OAAf;CACA,MAAMwI,SAAS,IAAIz6B,UAAJ,EAAf;CACAy6B,SAAO1tI,KAAP;;CAEA0tI,SAAOC,QAAP,CAAgB,IAAI3wB,aAAJ,CAAkBC,MAAlB,CAAhB;;CAEA,MAAI2wB,MAAJ,CAAS;CACPnoJ,YAAQmyD,SAASg8D;CADV,GAAT;CAGD,CAVD;;;;;;;;;;"}